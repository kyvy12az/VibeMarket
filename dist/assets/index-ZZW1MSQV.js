var e,t,n,r,i,a,s,o,l,c,d,u,h,p,m,f,g,v,x,y,b,w,j,N,_,S,C,A,M,E,k,T,P,O,R,I,D,L,B,F,U,z,H,V,G,W,K,q,X,$=e=>{throw TypeError(e)},Y=(e,t,n)=>t.has(e)||$("Cannot "+n),J=(e,t,n)=>(Y(e,t,"read from private field"),n?n.call(e):t.get(e)),Z=(e,t,n)=>t.has(e)?$("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Q=(e,t,n,r)=>(Y(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ee=(e,t,n)=>(Y(e,t,"access private method"),n),te=(e,t,n,r)=>({set _(r){Q(e,t,r,n)},get _(){return J(e,t,r)}});function ne(e,t){for(var n=0;n<t.length;n++){const r=t[n];if("string"!=typeof r&&!Array.isArray(r))for(const t in r)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(r,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>r[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var re="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ie(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ae={exports:{}},se={},oe={exports:{}},le={},ce=Symbol.for("react.element"),de=Symbol.for("react.portal"),ue=Symbol.for("react.fragment"),he=Symbol.for("react.strict_mode"),pe=Symbol.for("react.profiler"),me=Symbol.for("react.provider"),fe=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),ve=Symbol.for("react.suspense"),xe=Symbol.for("react.memo"),ye=Symbol.for("react.lazy"),be=Symbol.iterator;var we={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},je=Object.assign,Ne={};function _e(e,t,n){this.props=e,this.context=t,this.refs=Ne,this.updater=n||we}function Se(){}function Ce(e,t,n){this.props=e,this.context=t,this.refs=Ne,this.updater=n||we}_e.prototype.isReactComponent={},_e.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},_e.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},Se.prototype=_e.prototype;var Ae=Ce.prototype=new Se;Ae.constructor=Ce,je(Ae,_e.prototype),Ae.isPureReactComponent=!0;var Me=Array.isArray,Ee=Object.prototype.hasOwnProperty,ke={current:null},Te={key:!0,ref:!0,__self:!0,__source:!0};function Pe(e,t,n){var r,i={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)Ee.call(t,r)&&!Te.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===i[r]&&(i[r]=o[r]);return{$$typeof:ce,type:e,key:a,ref:s,props:i,_owner:ke.current}}function Oe(e){return"object"==typeof e&&null!==e&&e.$$typeof===ce}var Re=/\/+/g;function Ie(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function De(e,t,n,r,i){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var s=!1;if(null===e)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case ce:case de:s=!0}}if(s)return i=i(s=e),e=""===r?"."+Ie(s,0):r,Me(i)?(n="",null!=e&&(n=e.replace(Re,"$&/")+"/"),De(i,t,n,"",function(e){return e})):null!=i&&(Oe(i)&&(i=function(e,t){return{$$typeof:ce,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Re,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=""===r?".":r+":",Me(e))for(var o=0;o<e.length;o++){var l=r+Ie(a=e[o],o);s+=De(a,t,n,l,i)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=be&&e[be]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),o=0;!(a=e.next()).done;)s+=De(a=a.value,t,n,l=r+Ie(a,o++),i);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Le(e,t,n){if(null==e)return e;var r=[],i=0;return De(e,r,"","",function(e){return t.call(n,e,i++)}),r}function Be(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var Fe={current:null},Ue={transition:null},ze={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:Ue,ReactCurrentOwner:ke};function He(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Le,forEach:function(e,t,n){Le(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Le(e,function(){t++}),t},toArray:function(e){return Le(e,function(e){return e})||[]},only:function(e){if(!Oe(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},le.Component=_e,le.Fragment=ue,le.Profiler=pe,le.PureComponent=Ce,le.StrictMode=he,le.Suspense=ve,le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ze,le.act=He,le.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=je({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=ke.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)Ee.call(t,l)&&!Te.hasOwnProperty(l)&&(r[l]=void 0===t[l]&&void 0!==o?o[l]:t[l])}var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:ce,type:e.type,key:i,ref:a,props:r,_owner:s}},le.createContext=function(e){return(e={$$typeof:fe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:me,_context:e},e.Consumer=e},le.createElement=Pe,le.createFactory=function(e){var t=Pe.bind(null,e);return t.type=e,t},le.createRef=function(){return{current:null}},le.forwardRef=function(e){return{$$typeof:ge,render:e}},le.isValidElement=Oe,le.lazy=function(e){return{$$typeof:ye,_payload:{_status:-1,_result:e},_init:Be}},le.memo=function(e,t){return{$$typeof:xe,type:e,compare:void 0===t?null:t}},le.startTransition=function(e){var t=Ue.transition;Ue.transition={};try{e()}finally{Ue.transition=t}},le.unstable_act=He,le.useCallback=function(e,t){return Fe.current.useCallback(e,t)},le.useContext=function(e){return Fe.current.useContext(e)},le.useDebugValue=function(){},le.useDeferredValue=function(e){return Fe.current.useDeferredValue(e)},le.useEffect=function(e,t){return Fe.current.useEffect(e,t)},le.useId=function(){return Fe.current.useId()},le.useImperativeHandle=function(e,t,n){return Fe.current.useImperativeHandle(e,t,n)},le.useInsertionEffect=function(e,t){return Fe.current.useInsertionEffect(e,t)},le.useLayoutEffect=function(e,t){return Fe.current.useLayoutEffect(e,t)},le.useMemo=function(e,t){return Fe.current.useMemo(e,t)},le.useReducer=function(e,t,n){return Fe.current.useReducer(e,t,n)},le.useRef=function(e){return Fe.current.useRef(e)},le.useState=function(e){return Fe.current.useState(e)},le.useSyncExternalStore=function(e,t,n){return Fe.current.useSyncExternalStore(e,t,n)},le.useTransition=function(){return Fe.current.useTransition()},le.version="18.3.1",oe.exports=le;var Ve=oe.exports;const Ge=ie(Ve),We=ne({__proto__:null,default:Ge},[Ve]);var Ke=Ve,qe=Symbol.for("react.element"),Xe=Symbol.for("react.fragment"),$e=Object.prototype.hasOwnProperty,Ye=Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Je={key:!0,ref:!0,__self:!0,__source:!0};function Ze(e,t,n){var r,i={},a=null,s=null;for(r in void 0!==n&&(a=""+n),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(s=t.ref),t)$e.call(t,r)&&!Je.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:qe,type:e,key:a,ref:s,props:i,_owner:Ye.current}}se.Fragment=Xe,se.jsx=Ze,se.jsxs=Ze,ae.exports=se;var Qe=ae.exports,et={exports:{}},tt={},nt={exports:{}},rt={};!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,s=a>>>1;r<s;){var o=2*(r+1)-1,l=e[o],c=o+1,d=e[c];if(0>i(l,n))c<a&&0>i(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<a&&0>i(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],c=[],d=1,u=null,h=3,p=!1,m=!1,f=!1,g="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,x="undefined"!=typeof setImmediate?setImmediate:null;function y(e){for(var i=n(c);null!==i;){if(null===i.callback)r(c);else{if(!(i.startTime<=e))break;r(c),i.sortIndex=i.expirationTime,t(l,i)}i=n(c)}}function b(e){if(f=!1,y(e),!m)if(null!==n(l))m=!0,P(w);else{var t=n(c);null!==t&&O(b,t.startTime-e)}}function w(t,i){m=!1,f&&(f=!1,v(S),S=-1),p=!0;var a=h;try{for(y(i),u=n(l);null!==u&&(!(u.expirationTime>i)||t&&!M());){var s=u.callback;if("function"==typeof s){u.callback=null,h=u.priorityLevel;var o=s(u.expirationTime<=i);i=e.unstable_now(),"function"==typeof o?u.callback=o:u===n(l)&&r(l),y(i)}else r(l);u=n(l)}if(null!==u)var d=!0;else{var g=n(c);null!==g&&O(b,g.startTime-i),d=!1}return d}finally{u=null,h=a,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,N=!1,_=null,S=-1,C=5,A=-1;function M(){return!(e.unstable_now()-A<C)}function E(){if(null!==_){var t=e.unstable_now();A=t;var n=!0;try{n=_(!0,t)}finally{n?j():(N=!1,_=null)}}else N=!1}if("function"==typeof x)j=function(){x(E)};else if("undefined"!=typeof MessageChannel){var k=new MessageChannel,T=k.port2;k.port1.onmessage=E,j=function(){T.postMessage(null)}}else j=function(){g(E,0)};function P(e){_=e,N||(N=!0,j())}function O(t,n){S=g(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,P(w))},e.unstable_forceFrameRate=function(e){0>e||125<e||(C=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,i,a){var s=e.unstable_now();switch("object"==typeof a&&null!==a?a="number"==typeof(a=a.delay)&&0<a?s+a:s:a=s,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return r={id:d++,callback:i,priorityLevel:r,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(r.sortIndex=a,t(c,r),null===n(l)&&r===n(c)&&(f?(v(S),S=-1):f=!0,O(b,a-s))):(r.sortIndex=o,t(l,r),m||p||(m=!0,P(w))),r},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(rt),nt.exports=rt;var it=nt.exports,at=Ve,st=it;function ot(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lt=new Set,ct={};function dt(e,t){ut(e,t),ut(e+"Capture",t)}function ut(e,t){for(ct[e]=t,e=0;e<t.length;e++)lt.add(t[e])}var ht=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),pt=Object.prototype.hasOwnProperty,mt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ft={},gt={};function vt(e,t,n,r,i,a,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){xt[e]=new vt(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];xt[t]=new vt(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){xt[e]=new vt(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){xt[e]=new vt(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){xt[e]=new vt(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){xt[e]=new vt(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){xt[e]=new vt(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){xt[e]=new vt(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){xt[e]=new vt(e,5,!1,e.toLowerCase(),null,!1,!1)});var yt=/[\-:]([a-z])/g;function bt(e){return e[1].toUpperCase()}function wt(e,t,n,r){var i=xt.hasOwnProperty(t)?xt[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!pt.call(gt,e)||!pt.call(ft,e)&&(mt.test(e)?gt[e]=!0:(ft[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(yt,bt);xt[t]=new vt(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(yt,bt);xt[t]=new vt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(yt,bt);xt[t]=new vt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){xt[e]=new vt(e,1,!1,e.toLowerCase(),null,!1,!1)}),xt.xlinkHref=new vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){xt[e]=new vt(e,1,!1,e.toLowerCase(),null,!0,!0)});var jt=at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nt=Symbol.for("react.element"),_t=Symbol.for("react.portal"),St=Symbol.for("react.fragment"),Ct=Symbol.for("react.strict_mode"),At=Symbol.for("react.profiler"),Mt=Symbol.for("react.provider"),Et=Symbol.for("react.context"),kt=Symbol.for("react.forward_ref"),Tt=Symbol.for("react.suspense"),Pt=Symbol.for("react.suspense_list"),Ot=Symbol.for("react.memo"),Rt=Symbol.for("react.lazy"),It=Symbol.for("react.offscreen"),Dt=Symbol.iterator;function Lt(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Dt&&e[Dt]||e["@@iterator"])?e:null}var Bt,Ft=Object.assign;function Ut(e){if(void 0===Bt)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Bt=t&&t[1]||""}return"\n"+Bt+e}var zt=!1;function Ht(e,t){if(!e||zt)return"";zt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(EI){var r=EI}Reflect.construct(e,[],t)}else{try{t.call()}catch(EI){r=EI}e.call(t.prototype)}else{try{throw Error()}catch(EI){r=EI}e()}}catch(EI){if(EI&&r&&"string"==typeof EI.stack){for(var i=EI.stack.split("\n"),a=r.stack.split("\n"),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(1!==s||1!==o)do{if(s--,0>--o||i[s]!==a[o]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=o);break}}}finally{zt=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ut(e):""}function Vt(e){switch(e.tag){case 5:return Ut(e.type);case 16:return Ut("Lazy");case 13:return Ut("Suspense");case 19:return Ut("SuspenseList");case 0:case 2:case 15:return e=Ht(e.type,!1);case 11:return e=Ht(e.type.render,!1);case 1:return e=Ht(e.type,!0);default:return""}}function Gt(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case St:return"Fragment";case _t:return"Portal";case At:return"Profiler";case Ct:return"StrictMode";case Tt:return"Suspense";case Pt:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Et:return(e.displayName||"Context")+".Consumer";case Mt:return(e._context.displayName||"Context")+".Provider";case kt:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case Ot:return null!==(t=e.displayName||null)?t:Gt(e.type)||"Memo";case Rt:t=e._payload,e=e._init;try{return Gt(e(t))}catch(n){}}return null}function Wt(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gt(t);case 8:return t===Ct?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function Kt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function qt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Xt(e){e._valueTracker||(e._valueTracker=function(e){var t=qt(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $t(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=qt(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Yt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Jt(e,t){var n=t.checked;return Ft({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Zt(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Kt(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Qt(e,t){null!=(t=t.checked)&&wt(e,"checked",t,!1)}function en(e,t){Qt(e,t);var n=Kt(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?nn(e,t.type,n):t.hasOwnProperty("defaultValue")&&nn(e,t.type,Kt(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function tn(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function nn(e,t,n){"number"===t&&Yt(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var rn=Array.isArray;function an(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Kt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function sn(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(ot(91));return Ft({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function on(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(ot(92));if(rn(n)){if(1<n.length)throw Error(ot(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Kt(n)}}function ln(e,t){var n=Kt(t.value),r=Kt(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function cn(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function dn(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function un(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?dn(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var hn,pn,mn=(pn=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((hn=hn||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=hn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return pn(e,t)})}:pn);function fn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var gn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vn=["Webkit","ms","Moz","O"];function xn(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||gn.hasOwnProperty(e)&&gn[e]?(""+t).trim():t+"px"}function yn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=xn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(gn).forEach(function(e){vn.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),gn[t]=gn[e]})});var bn=Ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wn(e,t){if(t){if(bn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(ot(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(ot(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(ot(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(ot(62))}}function jn(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nn=null;function _n(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Sn=null,Cn=null,An=null;function Mn(e){if(e=ws(e)){if("function"!=typeof Sn)throw Error(ot(280));var t=e.stateNode;t&&(t=Ns(t),Sn(e.stateNode,e.type,t))}}function En(e){Cn?An?An.push(e):An=[e]:Cn=e}function kn(){if(Cn){var e=Cn,t=An;if(An=Cn=null,Mn(e),t)for(e=0;e<t.length;e++)Mn(t[e])}}function Tn(e,t){return e(t)}function Pn(){}var On=!1;function Rn(e,t,n){if(On)return e(t,n);On=!0;try{return Tn(e,t,n)}finally{On=!1,(null!==Cn||null!==An)&&(Pn(),kn())}}function In(e,t){var n=e.stateNode;if(null===n)return null;var r=Ns(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(ot(231,t,typeof n));return n}var Dn=!1;if(ht)try{var Ln={};Object.defineProperty(Ln,"passive",{get:function(){Dn=!0}}),window.addEventListener("test",Ln,Ln),window.removeEventListener("test",Ln,Ln)}catch(pn){Dn=!1}function Bn(e,t,n,r,i,a,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Fn=!1,Un=null,zn=!1,Hn=null,Vn={onError:function(e){Fn=!0,Un=e}};function Gn(e,t,n,r,i,a,s,o,l){Fn=!1,Un=null,Bn.apply(Vn,arguments)}function Wn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Kn(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qn(e){if(Wn(e)!==e)throw Error(ot(188))}function Xn(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Wn(e)))throw Error(ot(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return qn(i),e;if(a===r)return qn(i),t;a=a.sibling}throw Error(ot(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s)throw Error(ot(189))}}if(n.alternate!==r)throw Error(ot(190))}if(3!==n.tag)throw Error(ot(188));return n.stateNode.current===n?e:t}(e))?$n(e):null}function $n(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=$n(e);if(null!==t)return t;e=e.sibling}return null}var Yn=st.unstable_scheduleCallback,Jn=st.unstable_cancelCallback,Zn=st.unstable_shouldYield,Qn=st.unstable_requestPaint,er=st.unstable_now,tr=st.unstable_getCurrentPriorityLevel,nr=st.unstable_ImmediatePriority,rr=st.unstable_UserBlockingPriority,ir=st.unstable_NormalPriority,ar=st.unstable_LowPriority,sr=st.unstable_IdlePriority,or=null,lr=null;var cr=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(dr(e)/ur|0)|0},dr=Math.log,ur=Math.LN2;var hr=64,pr=4194304;function mr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fr(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=268435455&n;if(0!==s){var o=s&~i;0!==o?r=mr(o):0!==(a&=s)&&(r=mr(a))}else 0!==(s=n&~i)?r=mr(s):0!==a&&(r=mr(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&4194240&a))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-cr(t)),r|=e[n],t&=~i;return r}function gr(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function vr(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function xr(){var e=hr;return!(4194240&(hr<<=1))&&(hr=64),e}function yr(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function br(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-cr(t)]=n}function wr(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-cr(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var jr=0;function Nr(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var _r,Sr,Cr,Ar,Mr,Er=!1,kr=[],Tr=null,Pr=null,Or=null,Rr=new Map,Ir=new Map,Dr=[],Lr="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Br(e,t){switch(e){case"focusin":case"focusout":Tr=null;break;case"dragenter":case"dragleave":Pr=null;break;case"mouseover":case"mouseout":Or=null;break;case"pointerover":case"pointerout":Rr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ir.delete(t.pointerId)}}function Fr(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ws(t))&&Sr(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ur(e){var t=bs(e.target);if(null!==t){var n=Wn(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Kn(n)))return e.blockedOn=t,void Mr(e.priority,function(){Cr(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zr(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zr(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ws(n))&&Sr(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Nn=r,n.target.dispatchEvent(r),Nn=null,t.shift()}return!0}function Hr(e,t,n){zr(e)&&n.delete(t)}function Vr(){Er=!1,null!==Tr&&zr(Tr)&&(Tr=null),null!==Pr&&zr(Pr)&&(Pr=null),null!==Or&&zr(Or)&&(Or=null),Rr.forEach(Hr),Ir.forEach(Hr)}function Gr(e,t){e.blockedOn===t&&(e.blockedOn=null,Er||(Er=!0,st.unstable_scheduleCallback(st.unstable_NormalPriority,Vr)))}function Wr(e){function t(t){return Gr(t,e)}if(0<kr.length){Gr(kr[0],e);for(var n=1;n<kr.length;n++){var r=kr[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tr&&Gr(Tr,e),null!==Pr&&Gr(Pr,e),null!==Or&&Gr(Or,e),Rr.forEach(t),Ir.forEach(t),n=0;n<Dr.length;n++)(r=Dr[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dr.length&&null===(n=Dr[0]).blockedOn;)Ur(n),null===n.blockedOn&&Dr.shift()}var Kr=jt.ReactCurrentBatchConfig,qr=!0;function Xr(e,t,n,r){var i=jr,a=Kr.transition;Kr.transition=null;try{jr=1,Yr(e,t,n,r)}finally{jr=i,Kr.transition=a}}function $r(e,t,n,r){var i=jr,a=Kr.transition;Kr.transition=null;try{jr=4,Yr(e,t,n,r)}finally{jr=i,Kr.transition=a}}function Yr(e,t,n,r){if(qr){var i=Zr(e,t,n,r);if(null===i)Ka(e,t,r,Jr,n),Br(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tr=Fr(Tr,e,t,n,r,i),!0;case"dragenter":return Pr=Fr(Pr,e,t,n,r,i),!0;case"mouseover":return Or=Fr(Or,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rr.set(a,Fr(Rr.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ir.set(a,Fr(Ir.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Br(e,r),4&t&&-1<Lr.indexOf(e)){for(;null!==i;){var a=ws(i);if(null!==a&&_r(a),null===(a=Zr(e,t,n,r))&&Ka(e,t,r,Jr,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Ka(e,t,r,null,n)}}var Jr=null;function Zr(e,t,n,r){if(Jr=null,null!==(e=bs(e=_n(r))))if(null===(t=Wn(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Kn(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jr=e,null}function Qr(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tr()){case nr:return 1;case rr:return 4;case ir:case ar:return 16;case sr:return 536870912;default:return 16}default:return 16}}var ei=null,ti=null,ni=null;function ri(){if(ni)return ni;var e,t,n=ti,r=n.length,i="value"in ei?ei.value:ei.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[a-t];t++);return ni=i.slice(e,1<t?1-t:void 0)}function ii(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ai(){return!0}function si(){return!1}function oi(e){function t(t,n,r,i,a){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?ai:si,this.isPropagationStopped=si,this}return Ft(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ai)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ai)},persist:function(){},isPersistent:ai}),t}var li,ci,di,ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hi=oi(ui),pi=Ft({},ui,{view:0,detail:0}),mi=oi(pi),fi=Ft({},pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ai,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==di&&(di&&"mousemove"===e.type?(li=e.screenX-di.screenX,ci=e.screenY-di.screenY):ci=li=0,di=e),li)},movementY:function(e){return"movementY"in e?e.movementY:ci}}),gi=oi(fi),vi=oi(Ft({},fi,{dataTransfer:0})),xi=oi(Ft({},pi,{relatedTarget:0})),yi=oi(Ft({},ui,{animationName:0,elapsedTime:0,pseudoElement:0})),bi=Ft({},ui,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wi=oi(bi),ji=oi(Ft({},ui,{data:0})),Ni={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_i={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Si={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ci(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Si[e])&&!!t[e]}function Ai(){return Ci}var Mi=Ft({},pi,{key:function(e){if(e.key){var t=Ni[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ii(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_i[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ai,charCode:function(e){return"keypress"===e.type?ii(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ii(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ei=oi(Mi),ki=oi(Ft({},fi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ti=oi(Ft({},pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ai})),Pi=oi(Ft({},ui,{propertyName:0,elapsedTime:0,pseudoElement:0})),Oi=Ft({},fi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ri=oi(Oi),Ii=[9,13,27,32],Di=ht&&"CompositionEvent"in window,Li=null;ht&&"documentMode"in document&&(Li=document.documentMode);var Bi=ht&&"TextEvent"in window&&!Li,Fi=ht&&(!Di||Li&&8<Li&&11>=Li),Ui=String.fromCharCode(32),zi=!1;function Hi(e,t){switch(e){case"keyup":return-1!==Ii.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vi(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Gi=!1;var Wi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ki(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wi[e.type]:"textarea"===t}function qi(e,t,n,r){En(r),0<(t=Xa(t,"onChange")).length&&(n=new hi("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xi=null,$i=null;function Yi(e){Ua(e,0)}function Ji(e){if($t(js(e)))return e}function Zi(e,t){if("change"===e)return t}var Qi=!1;if(ht){var ea;if(ht){var ta="oninput"in document;if(!ta){var na=document.createElement("div");na.setAttribute("oninput","return;"),ta="function"==typeof na.oninput}ea=ta}else ea=!1;Qi=ea&&(!document.documentMode||9<document.documentMode)}function ra(){Xi&&(Xi.detachEvent("onpropertychange",ia),$i=Xi=null)}function ia(e){if("value"===e.propertyName&&Ji($i)){var t=[];qi(t,$i,e,_n(e)),Rn(Yi,t)}}function aa(e,t,n){"focusin"===e?(ra(),$i=n,(Xi=t).attachEvent("onpropertychange",ia)):"focusout"===e&&ra()}function sa(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ji($i)}function oa(e,t){if("click"===e)return Ji(t)}function la(e,t){if("input"===e||"change"===e)return Ji(t)}var ca="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function da(e,t){if(ca(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!pt.call(t,i)||!ca(e[i],t[i]))return!1}return!0}function ua(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ha(e,t){var n,r=ua(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ua(r)}}function pa(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pa(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ma(){for(var e=window,t=Yt();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Yt((e=t.contentWindow).document)}return t}function fa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ga(e){var t=ma(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&pa(n.ownerDocument.documentElement,n)){if(null!==r&&fa(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=ha(n,a);var s=ha(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var va=ht&&"documentMode"in document&&11>=document.documentMode,xa=null,ya=null,ba=null,wa=!1;function ja(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wa||null==xa||xa!==Yt(r)||("selectionStart"in(r=xa)&&fa(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ba&&da(ba,r)||(ba=r,0<(r=Xa(ya,"onSelect")).length&&(t=new hi("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=xa)))}function Na(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _a={animationend:Na("Animation","AnimationEnd"),animationiteration:Na("Animation","AnimationIteration"),animationstart:Na("Animation","AnimationStart"),transitionend:Na("Transition","TransitionEnd")},Sa={},Ca={};function Aa(e){if(Sa[e])return Sa[e];if(!_a[e])return e;var t,n=_a[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ca)return Sa[e]=n[t];return e}ht&&(Ca=document.createElement("div").style,"AnimationEvent"in window||(delete _a.animationend.animation,delete _a.animationiteration.animation,delete _a.animationstart.animation),"TransitionEvent"in window||delete _a.transitionend.transition);var Ma=Aa("animationend"),Ea=Aa("animationiteration"),ka=Aa("animationstart"),Ta=Aa("transitionend"),Pa=new Map,Oa="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ra(e,t){Pa.set(e,t),dt(t,[e])}for(var Ia=0;Ia<Oa.length;Ia++){var Da=Oa[Ia];Ra(Da.toLowerCase(),"on"+(Da[0].toUpperCase()+Da.slice(1)))}Ra(Ma,"onAnimationEnd"),Ra(Ea,"onAnimationIteration"),Ra(ka,"onAnimationStart"),Ra("dblclick","onDoubleClick"),Ra("focusin","onFocus"),Ra("focusout","onBlur"),Ra(Ta,"onTransitionEnd"),ut("onMouseEnter",["mouseout","mouseover"]),ut("onMouseLeave",["mouseout","mouseover"]),ut("onPointerEnter",["pointerout","pointerover"]),ut("onPointerLeave",["pointerout","pointerover"]),dt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),dt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),dt("onBeforeInput",["compositionend","keypress","textInput","paste"]),dt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),dt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),dt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var La="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ba=new Set("cancel close invalid load scroll toggle".split(" ").concat(La));function Fa(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,o,l){if(Gn.apply(this,arguments),Fn){if(!Fn)throw Error(ot(198));var c=Un;Fn=!1,Un=null,zn||(zn=!0,Hn=c)}}(r,t,void 0,e),e.currentTarget=null}function Ua(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;Fa(i,o,c),a=l}else for(s=0;s<r.length;s++){if(l=(o=r[s]).instance,c=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;Fa(i,o,c),a=l}}}if(zn)throw e=Hn,zn=!1,Hn=null,e}function za(e,t){var n=t[vs];void 0===n&&(n=t[vs]=new Set);var r=e+"__bubble";n.has(r)||(Wa(t,e,2,!1),n.add(r))}function Ha(e,t,n){var r=0;t&&(r|=4),Wa(n,e,r,t)}var Va="_reactListening"+Math.random().toString(36).slice(2);function Ga(e){if(!e[Va]){e[Va]=!0,lt.forEach(function(t){"selectionchange"!==t&&(Ba.has(t)||Ha(t,!1,e),Ha(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Va]||(t[Va]=!0,Ha("selectionchange",!1,t))}}function Wa(e,t,n,r){switch(Qr(t)){case 1:var i=Xr;break;case 4:i=$r;break;default:i=Yr}n=i.bind(null,t,n,e),i=void 0,!Dn||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Ka(e,t,n,r,i){var a=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==o;){if(null===(s=bs(o)))return;if(5===(l=s.tag)||6===l){r=a=s;continue e}o=o.parentNode}}r=r.return}Rn(function(){var r=a,i=_n(n),s=[];e:{var o=Pa.get(e);if(void 0!==o){var l=hi,c=e;switch(e){case"keypress":if(0===ii(n))break e;case"keydown":case"keyup":l=Ei;break;case"focusin":c="focus",l=xi;break;case"focusout":c="blur",l=xi;break;case"beforeblur":case"afterblur":l=xi;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=vi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ti;break;case Ma:case Ea:case ka:l=yi;break;case Ta:l=Pi;break;case"scroll":l=mi;break;case"wheel":l=Ri;break;case"copy":case"cut":case"paste":l=wi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=ki}var d=!!(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var p,m=r;null!==m;){var f=(p=m).stateNode;if(5===p.tag&&null!==f&&(p=f,null!==h&&(null!=(f=In(m,h))&&d.push(qa(m,f,p)))),u)break;m=m.return}0<d.length&&(o=new l(o,c,null,n,i),s.push({event:o,listeners:d}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Nn||!(c=n.relatedTarget||n.fromElement)||!bs(c)&&!c[gs])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?bs(c):null)&&(c!==(u=Wn(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(d=gi,f="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=ki,f="onPointerLeave",h="onPointerEnter",m="pointer"),u=null==l?o:js(l),p=null==c?o:js(c),(o=new d(f,m+"leave",l,n,i)).target=u,o.relatedTarget=p,f=null,bs(i)===r&&((d=new d(h,m+"enter",c,n,i)).target=p,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(h=c,m=0,p=d=l;p;p=$a(p))m++;for(p=0,f=h;f;f=$a(f))p++;for(;0<m-p;)d=$a(d),m--;for(;0<p-m;)h=$a(h),p--;for(;m--;){if(d===h||null!==h&&d===h.alternate)break e;d=$a(d),h=$a(h)}d=null}else d=null;null!==l&&Ya(s,o,l,d,!1),null!==c&&null!==u&&Ya(s,u,c,d,!0)}if("select"===(l=(o=r?js(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Zi;else if(Ki(o))if(Qi)g=la;else{g=sa;var v=aa}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=oa);switch(g&&(g=g(e,r))?qi(s,g,n,i):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&nn(o,"number",o.value)),v=r?js(r):window,e){case"focusin":(Ki(v)||"true"===v.contentEditable)&&(xa=v,ya=r,ba=null);break;case"focusout":ba=ya=xa=null;break;case"mousedown":wa=!0;break;case"contextmenu":case"mouseup":case"dragend":wa=!1,ja(s,n,i);break;case"selectionchange":if(va)break;case"keydown":case"keyup":ja(s,n,i)}var x;if(Di)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Gi?Hi(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Fi&&"ko"!==n.locale&&(Gi||"onCompositionStart"!==y?"onCompositionEnd"===y&&Gi&&(x=ri()):(ti="value"in(ei=i)?ei.value:ei.textContent,Gi=!0)),0<(v=Xa(r,y)).length&&(y=new ji(y,e,null,n,i),s.push({event:y,listeners:v}),x?y.data=x:null!==(x=Vi(n))&&(y.data=x))),(x=Bi?function(e,t){switch(e){case"compositionend":return Vi(t);case"keypress":return 32!==t.which?null:(zi=!0,Ui);case"textInput":return(e=t.data)===Ui&&zi?null:e;default:return null}}(e,n):function(e,t){if(Gi)return"compositionend"===e||!Di&&Hi(e,t)?(e=ri(),ni=ti=ei=null,Gi=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fi&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Xa(r,"onBeforeInput")).length&&(i=new ji("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=x))}Ua(s,t)})}function qa(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Xa(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=In(e,n))&&r.unshift(qa(e,a,i)),null!=(a=In(e,t))&&r.push(qa(e,a,i))),e=e.return}return r}function $a(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ya(e,t,n,r,i){for(var a=t._reactName,s=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=In(n,a))&&s.unshift(qa(n,l,o)):i||null!=(l=In(n,a))&&s.push(qa(n,l,o))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Ja=/\r\n?/g,Za=/\u0000|\uFFFD/g;function Qa(e){return("string"==typeof e?e:""+e).replace(Ja,"\n").replace(Za,"")}function es(e,t,n){if(t=Qa(t),Qa(e)!==t&&n)throw Error(ot(425))}function ts(){}var ns=null,rs=null;function is(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var as="function"==typeof setTimeout?setTimeout:void 0,ss="function"==typeof clearTimeout?clearTimeout:void 0,os="function"==typeof Promise?Promise:void 0,ls="function"==typeof queueMicrotask?queueMicrotask:void 0!==os?function(e){return os.resolve(null).then(e).catch(cs)}:as;function cs(e){setTimeout(function(){throw e})}function ds(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Wr(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Wr(t)}function us(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function hs(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ps=Math.random().toString(36).slice(2),ms="__reactFiber$"+ps,fs="__reactProps$"+ps,gs="__reactContainer$"+ps,vs="__reactEvents$"+ps,xs="__reactListeners$"+ps,ys="__reactHandles$"+ps;function bs(e){var t=e[ms];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gs]||n[ms]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=hs(e);null!==e;){if(n=e[ms])return n;e=hs(e)}return t}n=(e=n).parentNode}return null}function ws(e){return!(e=e[ms]||e[gs])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function js(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(ot(33))}function Ns(e){return e[fs]||null}var _s=[],Ss=-1;function Cs(e){return{current:e}}function As(e){0>Ss||(e.current=_s[Ss],_s[Ss]=null,Ss--)}function Ms(e,t){Ss++,_s[Ss]=e.current,e.current=t}var Es={},ks=Cs(Es),Ts=Cs(!1),Ps=Es;function Os(e,t){var n=e.type.contextTypes;if(!n)return Es;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Rs(e){return null!=(e=e.childContextTypes)}function Is(){As(Ts),As(ks)}function Ds(e,t,n){if(ks.current!==Es)throw Error(ot(168));Ms(ks,t),Ms(Ts,n)}function Ls(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(ot(108,Wt(e)||"Unknown",i));return Ft({},n,r)}function Bs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Es,Ps=ks.current,Ms(ks,e),Ms(Ts,Ts.current),!0}function Fs(e,t,n){var r=e.stateNode;if(!r)throw Error(ot(169));n?(e=Ls(e,t,Ps),r.__reactInternalMemoizedMergedChildContext=e,As(Ts),As(ks),Ms(ks,e)):As(Ts),Ms(Ts,n)}var Us=null,zs=!1,Hs=!1;function Vs(e){null===Us?Us=[e]:Us.push(e)}function Gs(){if(!Hs&&null!==Us){Hs=!0;var e=0,t=jr;try{var n=Us;for(jr=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Us=null,zs=!1}catch(CI){throw null!==Us&&(Us=Us.slice(e+1)),Yn(nr,Gs),CI}finally{jr=t,Hs=!1}}return null}var Ws=[],Ks=0,qs=null,Xs=0,$s=[],Ys=0,Js=null,Zs=1,Qs="";function eo(e,t){Ws[Ks++]=Xs,Ws[Ks++]=qs,qs=e,Xs=t}function to(e,t,n){$s[Ys++]=Zs,$s[Ys++]=Qs,$s[Ys++]=Js,Js=e;var r=Zs;e=Qs;var i=32-cr(r)-1;r&=~(1<<i),n+=1;var a=32-cr(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Zs=1<<32-cr(t)+i|n<<i|r,Qs=a+e}else Zs=1<<a|n<<i|r,Qs=e}function no(e){null!==e.return&&(eo(e,1),to(e,1,0))}function ro(e){for(;e===qs;)qs=Ws[--Ks],Ws[Ks]=null,Xs=Ws[--Ks],Ws[Ks]=null;for(;e===Js;)Js=$s[--Ys],$s[Ys]=null,Qs=$s[--Ys],$s[Ys]=null,Zs=$s[--Ys],$s[Ys]=null}var io=null,ao=null,so=!1,oo=null;function lo(e,t){var n=Pu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function co(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,io=e,ao=us(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,io=e,ao=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Js?{id:Zs,overflow:Qs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,io=e,ao=null,!0);default:return!1}}function uo(e){return!(!(1&e.mode)||128&e.flags)}function ho(e){if(so){var t=ao;if(t){var n=t;if(!co(e,t)){if(uo(e))throw Error(ot(418));t=us(n.nextSibling);var r=io;t&&co(e,t)?lo(r,n):(e.flags=-4097&e.flags|2,so=!1,io=e)}}else{if(uo(e))throw Error(ot(418));e.flags=-4097&e.flags|2,so=!1,io=e}}}function po(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;io=e}function mo(e){if(e!==io)return!1;if(!so)return po(e),so=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!is(e.type,e.memoizedProps)),t&&(t=ao)){if(uo(e))throw fo(),Error(ot(418));for(;t;)lo(e,t),t=us(t.nextSibling)}if(po(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(ot(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ao=us(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ao=null}}else ao=io?us(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ao;e;)e=us(e.nextSibling)}function go(){ao=io=null,so=!1}function vo(e){null===oo?oo=[e]:oo.push(e)}var xo=jt.ReactCurrentBatchConfig;function yo(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(ot(309));var r=n.stateNode}if(!r)throw Error(ot(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:((t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e})._stringRef=a,t)}if("string"!=typeof e)throw Error(ot(284));if(!n._owner)throw Error(ot(290,e))}return e}function bo(e,t){throw e=Object.prototype.toString.call(t),Error(ot(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wo(e){return(0,e._init)(e._payload)}function jo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ru(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,n,r){return null===t||6!==t.tag?((t=Bu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var a=n.type;return a===St?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===Rt&&wo(a)===t.type)?((r=i(t,n.props)).ref=yo(e,t,n),r.return=e,r):((r=Iu(n.type,n.key,n.props,null,e.mode,r)).ref=yo(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Du(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Bu(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case Nt:return(n=Iu(t.type,t.key,t.props,null,e.mode,n)).ref=yo(e,null,t),n.return=e,n;case _t:return(t=Fu(t,e.mode,n)).return=e,t;case Rt:return u(e,(0,t._init)(t._payload),n)}if(rn(t)||Lt(t))return(t=Du(t,e.mode,n,null)).return=e,t;bo(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:o(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Nt:return n.key===i?l(e,t,n,r):null;case _t:return n.key===i?c(e,t,n,r):null;case Rt:return h(e,t,(i=n._init)(n._payload),r)}if(rn(n)||Lt(n))return null!==i?null:d(e,t,n,r,null);bo(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return o(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Nt:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _t:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case Rt:return p(e,t,n,(0,r._init)(r._payload),i)}if(rn(r)||Lt(r))return d(t,e=e.get(n)||null,r,i,null);bo(t,r)}return null}return function o(l,c,d,m){if("object"==typeof d&&null!==d&&d.type===St&&null===d.key&&(d=d.props.children),"object"==typeof d&&null!==d){switch(d.$$typeof){case Nt:e:{for(var f=d.key,g=c;null!==g;){if(g.key===f){if((f=d.type)===St){if(7===g.tag){n(l,g.sibling),(c=i(g,d.props.children)).return=l,l=c;break e}}else if(g.elementType===f||"object"==typeof f&&null!==f&&f.$$typeof===Rt&&wo(f)===g.type){n(l,g.sibling),(c=i(g,d.props)).ref=yo(l,g,d),c.return=l,l=c;break e}n(l,g);break}t(l,g),g=g.sibling}d.type===St?((c=Du(d.props.children,l.mode,m,d.key)).return=l,l=c):((m=Iu(d.type,d.key,d.props,null,l.mode,m)).ref=yo(l,c,d),m.return=l,l=m)}return s(l);case _t:e:{for(g=d.key;null!==c;){if(c.key===g){if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){n(l,c.sibling),(c=i(c,d.children||[])).return=l,l=c;break e}n(l,c);break}t(l,c),c=c.sibling}(c=Fu(d,l.mode,m)).return=l,l=c}return s(l);case Rt:return o(l,c,(g=d._init)(d._payload),m)}if(rn(d))return function(i,s,o,l){for(var c=null,d=null,m=s,f=s=0,g=null;null!==m&&f<o.length;f++){m.index>f?(g=m,m=null):g=m.sibling;var v=h(i,m,o[f],l);if(null===v){null===m&&(m=g);break}e&&m&&null===v.alternate&&t(i,m),s=a(v,s,f),null===d?c=v:d.sibling=v,d=v,m=g}if(f===o.length)return n(i,m),so&&eo(i,f),c;if(null===m){for(;f<o.length;f++)null!==(m=u(i,o[f],l))&&(s=a(m,s,f),null===d?c=m:d.sibling=m,d=m);return so&&eo(i,f),c}for(m=r(i,m);f<o.length;f++)null!==(g=p(m,i,f,o[f],l))&&(e&&null!==g.alternate&&m.delete(null===g.key?f:g.key),s=a(g,s,f),null===d?c=g:d.sibling=g,d=g);return e&&m.forEach(function(e){return t(i,e)}),so&&eo(i,f),c}(l,c,d,m);if(Lt(d))return function(i,s,o,l){var c=Lt(o);if("function"!=typeof c)throw Error(ot(150));if(null==(o=c.call(o)))throw Error(ot(151));for(var d=c=null,m=s,f=s=0,g=null,v=o.next();null!==m&&!v.done;f++,v=o.next()){m.index>f?(g=m,m=null):g=m.sibling;var x=h(i,m,v.value,l);if(null===x){null===m&&(m=g);break}e&&m&&null===x.alternate&&t(i,m),s=a(x,s,f),null===d?c=x:d.sibling=x,d=x,m=g}if(v.done)return n(i,m),so&&eo(i,f),c;if(null===m){for(;!v.done;f++,v=o.next())null!==(v=u(i,v.value,l))&&(s=a(v,s,f),null===d?c=v:d.sibling=v,d=v);return so&&eo(i,f),c}for(m=r(i,m);!v.done;f++,v=o.next())null!==(v=p(m,i,f,v.value,l))&&(e&&null!==v.alternate&&m.delete(null===v.key?f:v.key),s=a(v,s,f),null===d?c=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(i,e)}),so&&eo(i,f),c}(l,c,d,m);bo(l,d)}return"string"==typeof d&&""!==d||"number"==typeof d?(d=""+d,null!==c&&6===c.tag?(n(l,c.sibling),(c=i(c,d)).return=l,l=c):(n(l,c),(c=Bu(d,l.mode,m)).return=l,l=c),s(l)):n(l,c)}}var No=jo(!0),_o=jo(!1),So=Cs(null),Co=null,Ao=null,Mo=null;function Eo(){Mo=Ao=Co=null}function ko(e){var t=So.current;As(So),e._currentValue=t}function To(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Po(e,t){Co=e,Mo=Ao=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bc=!0),e.firstContext=null)}function Oo(e){var t=e._currentValue;if(Mo!==e)if(e={context:e,memoizedValue:t,next:null},null===Ao){if(null===Co)throw Error(ot(308));Ao=e,Co.dependencies={lanes:0,firstContext:e}}else Ao=Ao.next=e;return t}var Ro=null;function Io(e){null===Ro?Ro=[e]:Ro.push(e)}function Do(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Io(t)):(n.next=i.next,i.next=n),t.interleaved=n,Lo(e,r)}function Lo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Bo=!1;function Fo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ho(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&Ed){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Lo(e,n)}return null===(i=r.interleaved)?(t.next=t,Io(r)):(t.next=i.next,i.next=t),r.interleaved=t,Lo(e,n)}function Vo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,wr(e,n)}}function Go(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wo(e,t,n,r){var i=e.updateQueue;Bo=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==s&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==a){var u=i.baseState;for(s=0,d=c=l=null,o=a;;){var h=o.lane,p=o.eventTime;if((r&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,f=o;switch(h=t,p=n,f.tag){case 1:if("function"==typeof(m=f.payload)){u=m.call(p,u,h);break e}u=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(h="function"==typeof(m=f.payload)?m.call(p,u,h):m))break e;u=Ft({},u,h);break e;case 2:Bo=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,s|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===d&&(l=u),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ld|=s,e.lanes=s,e.memoizedState=u}}function Ko(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(ot(191,i));i.call(r)}}}var qo={},Xo=Cs(qo),$o=Cs(qo),Yo=Cs(qo);function Jo(e){if(e===qo)throw Error(ot(174));return e}function Zo(e,t){switch(Ms(Yo,t),Ms($o,e),Ms(Xo,qo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:un(null,"");break;default:t=un(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}As(Xo),Ms(Xo,t)}function Qo(){As(Xo),As($o),As(Yo)}function el(e){Jo(Yo.current);var t=Jo(Xo.current),n=un(t,e.type);t!==n&&(Ms($o,e),Ms(Xo,n))}function tl(e){$o.current===e&&(As(Xo),As($o))}var nl=Cs(0);function rl(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var il=[];function al(){for(var e=0;e<il.length;e++)il[e]._workInProgressVersionPrimary=null;il.length=0}var sl=jt.ReactCurrentDispatcher,ol=jt.ReactCurrentBatchConfig,ll=0,cl=null,dl=null,ul=null,hl=!1,pl=!1,ml=0,fl=0;function gl(){throw Error(ot(321))}function vl(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ca(e[n],t[n]))return!1;return!0}function xl(e,t,n,r,i,a){if(ll=a,cl=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,sl.current=null===e||null===e.memoizedState?tc:nc,e=n(r,i),pl){a=0;do{if(pl=!1,ml=0,25<=a)throw Error(ot(301));a+=1,ul=dl=null,t.updateQueue=null,sl.current=rc,e=n(r,i)}while(pl)}if(sl.current=ec,t=null!==dl&&null!==dl.next,ll=0,ul=dl=cl=null,hl=!1,t)throw Error(ot(300));return e}function yl(){var e=0!==ml;return ml=0,e}function bl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ul?cl.memoizedState=ul=e:ul=ul.next=e,ul}function wl(){if(null===dl){var e=cl.alternate;e=null!==e?e.memoizedState:null}else e=dl.next;var t=null===ul?cl.memoizedState:ul.next;if(null!==t)ul=t,dl=e;else{if(null===e)throw Error(ot(310));e={memoizedState:(dl=e).memoizedState,baseState:dl.baseState,baseQueue:dl.baseQueue,queue:dl.queue,next:null},null===ul?cl.memoizedState=ul=e:ul=ul.next=e}return ul}function jl(e,t){return"function"==typeof t?t(e):t}function Nl(e){var t=wl(),n=t.queue;if(null===n)throw Error(ot(311));n.lastRenderedReducer=e;var r=dl,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var o=s=null,l=null,c=a;do{var d=c.lane;if((ll&d)===d)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var u={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(o=l=u,s=r):l=l.next=u,cl.lanes|=d,Ld|=d}c=c.next}while(null!==c&&c!==a);null===l?s=r:l.next=o,ca(r,t.memoizedState)||(bc=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,cl.lanes|=a,Ld|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _l(e){var t=wl(),n=t.queue;if(null===n)throw Error(ot(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);ca(a,t.memoizedState)||(bc=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Sl(){}function Cl(e,t){var n=cl,r=wl(),i=t(),a=!ca(r.memoizedState,i);if(a&&(r.memoizedState=i,bc=!0),r=r.queue,Bl(El.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ul&&1&ul.memoizedState.tag){if(n.flags|=2048,Ol(9,Ml.bind(null,n,r,i,t),void 0,null),null===kd)throw Error(ot(349));30&ll||Al(n,t,i)}return i}function Al(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=cl.updateQueue)?(t={lastEffect:null,stores:null},cl.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ml(e,t,n,r){t.value=n,t.getSnapshot=r,kl(t)&&Tl(e)}function El(e,t,n){return n(function(){kl(t)&&Tl(e)})}function kl(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ca(e,n)}catch(r){return!0}}function Tl(e){var t=Lo(e,1);null!==t&&ru(t,e,1,-1)}function Pl(e){var t=bl();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jl,lastRenderedState:e},t.queue=e,e=e.dispatch=Yl.bind(null,cl,e),[t.memoizedState,e]}function Ol(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=cl.updateQueue)?(t={lastEffect:null,stores:null},cl.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Rl(){return wl().memoizedState}function Il(e,t,n,r){var i=bl();cl.flags|=e,i.memoizedState=Ol(1|t,n,void 0,void 0===r?null:r)}function Dl(e,t,n,r){var i=wl();r=void 0===r?null:r;var a=void 0;if(null!==dl){var s=dl.memoizedState;if(a=s.destroy,null!==r&&vl(r,s.deps))return void(i.memoizedState=Ol(t,n,a,r))}cl.flags|=e,i.memoizedState=Ol(1|t,n,a,r)}function Ll(e,t){return Il(8390656,8,e,t)}function Bl(e,t){return Dl(2048,8,e,t)}function Fl(e,t){return Dl(4,2,e,t)}function Ul(e,t){return Dl(4,4,e,t)}function zl(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Hl(e,t,n){return n=null!=n?n.concat([e]):null,Dl(4,4,zl.bind(null,t,e),n)}function Vl(){}function Gl(e,t){var n=wl();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&vl(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wl(e,t){var n=wl();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&vl(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Kl(e,t,n){return 21&ll?(ca(n,t)||(n=xr(),cl.lanes|=n,Ld|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,bc=!0),e.memoizedState=n)}function ql(e,t){var n=jr;jr=0!==n&&4>n?n:4,e(!0);var r=ol.transition;ol.transition={};try{e(!1),t()}finally{jr=n,ol.transition=r}}function Xl(){return wl().memoizedState}function $l(e,t,n){var r=nu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Jl(e))Zl(t,n);else if(null!==(n=Do(e,t,n,r))){ru(n,e,r,tu()),Ql(n,t,r)}}function Yl(e,t,n){var r=nu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jl(e))Zl(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,ca(o,s)){var l=t.interleaved;return null===l?(i.next=i,Io(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(EI){}null!==(n=Do(e,t,i,r))&&(ru(n,e,r,i=tu()),Ql(n,t,r))}}function Jl(e){var t=e.alternate;return e===cl||null!==t&&t===cl}function Zl(e,t){pl=hl=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ql(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,wr(e,n)}}var ec={readContext:Oo,useCallback:gl,useContext:gl,useEffect:gl,useImperativeHandle:gl,useInsertionEffect:gl,useLayoutEffect:gl,useMemo:gl,useReducer:gl,useRef:gl,useState:gl,useDebugValue:gl,useDeferredValue:gl,useTransition:gl,useMutableSource:gl,useSyncExternalStore:gl,useId:gl,unstable_isNewReconciler:!1},tc={readContext:Oo,useCallback:function(e,t){return bl().memoizedState=[e,void 0===t?null:t],e},useContext:Oo,useEffect:Ll,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Il(4194308,4,zl.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Il(4194308,4,e,t)},useInsertionEffect:function(e,t){return Il(4,2,e,t)},useMemo:function(e,t){var n=bl();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=bl();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=$l.bind(null,cl,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},bl().memoizedState=e},useState:Pl,useDebugValue:Vl,useDeferredValue:function(e){return bl().memoizedState=e},useTransition:function(){var e=Pl(!1),t=e[0];return e=ql.bind(null,e[1]),bl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=cl,i=bl();if(so){if(void 0===n)throw Error(ot(407));n=n()}else{if(n=t(),null===kd)throw Error(ot(349));30&ll||Al(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Ll(El.bind(null,r,a,e),[e]),r.flags|=2048,Ol(9,Ml.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=bl(),t=kd.identifierPrefix;if(so){var n=Qs;t=":"+t+"R"+(n=(Zs&~(1<<32-cr(Zs)-1)).toString(32)+n),0<(n=ml++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fl++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},nc={readContext:Oo,useCallback:Gl,useContext:Oo,useEffect:Bl,useImperativeHandle:Hl,useInsertionEffect:Fl,useLayoutEffect:Ul,useMemo:Wl,useReducer:Nl,useRef:Rl,useState:function(){return Nl(jl)},useDebugValue:Vl,useDeferredValue:function(e){return Kl(wl(),dl.memoizedState,e)},useTransition:function(){return[Nl(jl)[0],wl().memoizedState]},useMutableSource:Sl,useSyncExternalStore:Cl,useId:Xl,unstable_isNewReconciler:!1},rc={readContext:Oo,useCallback:Gl,useContext:Oo,useEffect:Bl,useImperativeHandle:Hl,useInsertionEffect:Fl,useLayoutEffect:Ul,useMemo:Wl,useReducer:_l,useRef:Rl,useState:function(){return _l(jl)},useDebugValue:Vl,useDeferredValue:function(e){var t=wl();return null===dl?t.memoizedState=e:Kl(t,dl.memoizedState,e)},useTransition:function(){return[_l(jl)[0],wl().memoizedState]},useMutableSource:Sl,useSyncExternalStore:Cl,useId:Xl,unstable_isNewReconciler:!1};function ic(e,t){if(e&&e.defaultProps){for(var n in t=Ft({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ac(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:Ft({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var sc={isMounted:function(e){return!!(e=e._reactInternals)&&Wn(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),a=zo(r,i);a.payload=t,null!=n&&(a.callback=n),null!==(t=Ho(e,a,i))&&(ru(t,e,i,r),Vo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),a=zo(r,i);a.tag=1,a.payload=t,null!=n&&(a.callback=n),null!==(t=Ho(e,a,i))&&(ru(t,e,i,r),Vo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),r=nu(e),i=zo(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=Ho(e,i,r))&&(ru(t,e,r,n),Vo(t,e,r))}};function oc(e,t,n,r,i,a,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!da(n,r)||!da(i,a))}function lc(e,t,n){var r=!1,i=Es,a=t.contextType;return"object"==typeof a&&null!==a?a=Oo(a):(i=Rs(t)?Ps:ks.current,a=(r=null!=(r=t.contextTypes))?Os(e,i):Es),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=sc,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function cc(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&sc.enqueueReplaceState(t,t.state,null)}function dc(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Fo(e);var a=t.contextType;"object"==typeof a&&null!==a?i.context=Oo(a):(a=Rs(t)?Ps:ks.current,i.context=Os(e,a)),i.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(ac(e,t,a,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&sc.enqueueReplaceState(i,i.state,null),Wo(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function uc(e,t){try{var n="",r=t;do{n+=Vt(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hc(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}var pc="function"==typeof WeakMap?WeakMap:Map;function mc(e,t,n){(n=zo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wd||(Wd=!0,Kd=r)},n}function fc(e,t,n){(n=zo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===qd?qd=new Set([this]):qd.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gc(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new pc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cu.bind(null,e,t,n),t.then(e,e))}function vc(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function xc(e,t,n,r,i){return 1&e.mode?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=zo(-1,1)).tag=2,Ho(n,t,1))),n.lanes|=1),e)}var yc=jt.ReactCurrentOwner,bc=!1;function wc(e,t,n,r){t.child=null===e?_o(t,null,n,r):No(t,e.child,n,r)}function jc(e,t,n,r,i){n=n.render;var a=t.ref;return Po(t,i),r=xl(e,t,n,r,a,i),n=yl(),null===e||bc?(so&&n&&no(t),t.flags|=1,wc(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wc(e,t,i))}function Nc(e,t,n,r,i){if(null===e){var a=n.type;return"function"!=typeof a||Ou(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Iu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,_c(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:da)(s,r)&&e.ref===t.ref)return Wc(e,t,i)}return t.flags|=1,(e=Ru(a,r)).ref=t.ref,e.return=t,t.child=e}function _c(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(da(a,r)&&e.ref===t.ref){if(bc=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Wc(e,t,i);131072&e.flags&&(bc=!0)}}return Ac(e,t,n,r,i)}function Sc(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ms(Rd,Od),Od|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ms(Rd,Od),Od|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ms(Rd,Od),Od|=n;else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ms(Rd,Od),Od|=r;return wc(e,t,i,n),t.child}function Cc(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ac(e,t,n,r,i){var a=Rs(n)?Ps:ks.current;return a=Os(t,a),Po(t,i),n=xl(e,t,n,r,a,i),r=yl(),null===e||bc?(so&&r&&no(t),t.flags|=1,wc(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wc(e,t,i))}function Mc(e,t,n,r,i){if(Rs(n)){var a=!0;Bs(t)}else a=!1;if(Po(t,i),null===t.stateNode)Gc(e,t),lc(t,n,r),dc(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=n.contextType;"object"==typeof c&&null!==c?c=Oo(c):c=Os(t,c=Rs(n)?Ps:ks.current);var d=n.getDerivedStateFromProps,u="function"==typeof d||"function"==typeof s.getSnapshotBeforeUpdate;u||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==r||l!==c)&&cc(t,s,r,c),Bo=!1;var h=t.memoizedState;s.state=h,Wo(t,r,s,i),l=t.memoizedState,o!==r||h!==l||Ts.current||Bo?("function"==typeof d&&(ac(t,n,d,r),l=t.memoizedState),(o=Bo||oc(t,n,o,r,h,l,c))?(u||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=o):("function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Uo(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:ic(t.type,o),s.props=c,u=t.pendingProps,h=s.context,"object"==typeof(l=n.contextType)&&null!==l?l=Oo(l):l=Os(t,l=Rs(n)?Ps:ks.current);var p=n.getDerivedStateFromProps;(d="function"==typeof p||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==u||h!==l)&&cc(t,s,r,l),Bo=!1,h=t.memoizedState,s.state=h,Wo(t,r,s,i);var m=t.memoizedState;o!==u||h!==m||Ts.current||Bo?("function"==typeof p&&(ac(t,n,p,r),m=t.memoizedState),(c=Bo||oc(t,n,c,r,h,m,l)||!1)?(d||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,m,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,m,l)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),s.props=r,s.state=m,s.context=l,r=c):("function"!=typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ec(e,t,n,r,a,i)}function Ec(e,t,n,r,i,a){Cc(e,t);var s=!!(128&t.flags);if(!r&&!s)return i&&Fs(t,n,!1),Wc(e,t,a);r=t.stateNode,yc.current=t;var o=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=No(t,e.child,null,a),t.child=No(t,null,o,a)):wc(e,t,o,a),t.memoizedState=r.state,i&&Fs(t,n,!0),t.child}function kc(e){var t=e.stateNode;t.pendingContext?Ds(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ds(0,t.context,!1),Zo(e,t.containerInfo)}function Tc(e,t,n,r,i){return go(),vo(i),t.flags|=256,wc(e,t,n,r),t.child}var Pc,Oc,Rc,Ic,Dc={dehydrated:null,treeContext:null,retryLane:0};function Lc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bc(e,t,n){var r,i=t.pendingProps,a=nl.current,s=!1,o=!!(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&!!(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ms(nl,1&a),null===e)return ho(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,e=i.fallback,s?(i=t.mode,s=t.child,o={mode:"hidden",children:o},1&i||null===s?s=Lu(o,i,0,null):(s.childLanes=0,s.pendingProps=o),e=Du(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Lc(n),t.memoizedState=Dc,e):Fc(t,o));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,Uc(e,t,s,r=hc(Error(ot(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Lu({mode:"visible",children:r.children},i,0,null),(a=Du(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,1&t.mode&&No(t,e.child,null,s),t.child.memoizedState=Lc(s),t.memoizedState=Dc,a);if(!(1&t.mode))return Uc(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var o=r.dgst;return r=o,Uc(e,t,s,r=hc(a=Error(ot(419)),r,void 0))}if(o=0!==(s&e.childLanes),bc||o){if(null!==(r=kd)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Lo(e,i),ru(r,e,i,-1))}return gu(),Uc(e,t,s,r=hc(Error(ot(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Mu.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ao=us(i.nextSibling),io=t,so=!0,oo=null,null!==e&&($s[Ys++]=Zs,$s[Ys++]=Qs,$s[Ys++]=Js,Zs=e.id,Qs=e.overflow,Js=t),t=Fc(t,r.children),t.flags|=4096,t)}(e,t,o,i,r,a,n);if(s){s=i.fallback,o=t.mode,r=(a=e.child).sibling;var l={mode:"hidden",children:i.children};return 1&o||t.child===a?(i=Ru(a,l)).subtreeFlags=14680064&a.subtreeFlags:((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null),null!==r?s=Ru(r,s):(s=Du(s,o,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,o=null===(o=e.child.memoizedState)?Lc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=Dc,i}return e=(s=e.child).sibling,i=Ru(s,{mode:"visible",children:i.children}),!(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fc(e,t){return(t=Lu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uc(e,t,n,r){return null!==r&&vo(r),No(t,e.child,null,n),(e=Fc(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zc(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),To(e.return,t,n)}function Hc(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Vc(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wc(e,t,r.children,n),2&(r=nl.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zc(e,n,t);else if(19===e.tag)zc(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ms(nl,r),1&t.mode)switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===rl(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Hc(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===rl(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Hc(t,!0,n,null,a);break;case"together":Hc(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Gc(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wc(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ld|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(ot(153));if(null!==t.child){for(n=Ru(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ru(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Kc(e,t){if(!so)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qc(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xc(e,t,n){var r=t.pendingProps;switch(ro(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qc(t),null;case 1:case 17:return Rs(t.type)&&Is(),qc(t),null;case 3:return r=t.stateNode,Qo(),As(Ts),As(ks),al(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(mo(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==oo&&(ou(oo),oo=null))),Oc(e,t),qc(t),null;case 5:tl(t);var i=Jo(Yo.current);if(n=t.type,null!==e&&null!=t.stateNode)Rc(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(ot(166));return qc(t),null}if(e=Jo(Xo.current),mo(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[ms]=t,r[fs]=a,e=!!(1&t.mode),n){case"dialog":za("cancel",r),za("close",r);break;case"iframe":case"object":case"embed":za("load",r);break;case"video":case"audio":for(i=0;i<La.length;i++)za(La[i],r);break;case"source":za("error",r);break;case"img":case"image":case"link":za("error",r),za("load",r);break;case"details":za("toggle",r);break;case"input":Zt(r,a),za("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},za("invalid",r);break;case"textarea":on(r,a),za("invalid",r)}for(var s in wn(n,a),i=null,a)if(a.hasOwnProperty(s)){var o=a[s];"children"===s?"string"==typeof o?r.textContent!==o&&(!0!==a.suppressHydrationWarning&&es(r.textContent,o,e),i=["children",o]):"number"==typeof o&&r.textContent!==""+o&&(!0!==a.suppressHydrationWarning&&es(r.textContent,o,e),i=["children",""+o]):ct.hasOwnProperty(s)&&null!=o&&"onScroll"===s&&za("scroll",r)}switch(n){case"input":Xt(r),tn(r,a,!0);break;case"textarea":Xt(r),cn(r);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(r.onclick=ts)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=dn(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[ms]=t,e[fs]=r,Pc(e,t,!1,!1),t.stateNode=e;e:{switch(s=jn(n,r),n){case"dialog":za("cancel",e),za("close",e),i=r;break;case"iframe":case"object":case"embed":za("load",e),i=r;break;case"video":case"audio":for(i=0;i<La.length;i++)za(La[i],e);i=r;break;case"source":za("error",e),i=r;break;case"img":case"image":case"link":za("error",e),za("load",e),i=r;break;case"details":za("toggle",e),i=r;break;case"input":Zt(e,r),i=Jt(e,r),za("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ft({},r,{value:void 0}),za("invalid",e);break;case"textarea":on(e,r),i=sn(e,r),za("invalid",e)}for(a in wn(n,i),o=i)if(o.hasOwnProperty(a)){var l=o[a];"style"===a?yn(e,l):"dangerouslySetInnerHTML"===a?null!=(l=l?l.__html:void 0)&&mn(e,l):"children"===a?"string"==typeof l?("textarea"!==n||""!==l)&&fn(e,l):"number"==typeof l&&fn(e,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(ct.hasOwnProperty(a)?null!=l&&"onScroll"===a&&za("scroll",e):null!=l&&wt(e,a,l,s))}switch(n){case"input":Xt(e),tn(e,r,!1);break;case"textarea":Xt(e),cn(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Kt(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?an(e,!!r.multiple,a,!1):null!=r.defaultValue&&an(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=ts)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qc(t),null;case 6:if(e&&null!=t.stateNode)Ic(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(ot(166));if(n=Jo(Yo.current),Jo(Xo.current),mo(t)){if(r=t.stateNode,n=t.memoizedProps,r[ms]=t,(a=r.nodeValue!==n)&&null!==(e=io))switch(e.tag){case 3:es(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&es(r.nodeValue,n,!!(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ms]=t,t.stateNode=r}return qc(t),null;case 13:if(As(nl),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(so&&null!==ao&&1&t.mode&&!(128&t.flags))fo(),go(),t.flags|=98560,a=!1;else if(a=mo(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(ot(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(ot(317));a[ms]=t}else go(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qc(t),a=!1}else null!==oo&&(ou(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&nl.current?0===Id&&(Id=3):gu())),null!==t.updateQueue&&(t.flags|=4),qc(t),null);case 4:return Qo(),Oc(e,t),null===e&&Ga(t.stateNode.containerInfo),qc(t),null;case 10:return ko(t.type._context),qc(t),null;case 19:if(As(nl),null===(a=t.memoizedState))return qc(t),null;if(r=!!(128&t.flags),null===(s=a.rendering))if(r)Kc(a,!1);else{if(0!==Id||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(s=rl(e))){for(t.flags|=128,Kc(a,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(s=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ms(nl,1&nl.current|2),t.child}e=e.sibling}null!==a.tail&&er()>Vd&&(t.flags|=128,r=!0,Kc(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=rl(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Kc(a,!0),null===a.tail&&"hidden"===a.tailMode&&!s.alternate&&!so)return qc(t),null}else 2*er()-a.renderingStartTime>Vd&&1073741824!==n&&(t.flags|=128,r=!0,Kc(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=a.last)?n.sibling=s:t.child=s,a.last=s)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=er(),t.sibling=null,n=nl.current,Ms(nl,r?1&n|2:1&n),t):(qc(t),null);case 22:case 23:return hu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&Od)&&(qc(t),6&t.subtreeFlags&&(t.flags|=8192)):qc(t),null;case 24:case 25:return null}throw Error(ot(156,t.tag))}function $c(e,t){switch(ro(t),t.tag){case 1:return Rs(t.type)&&Is(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qo(),As(Ts),As(ks),al(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return tl(t),null;case 13:if(As(nl),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(ot(340));go()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return As(nl),null;case 4:return Qo(),null;case 10:return ko(t.type._context),null;case 22:case 23:return hu(),null;default:return null}}Pc=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oc=function(){},Rc=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Jo(Xo.current);var a,s=null;switch(n){case"input":i=Jt(e,i),r=Jt(e,r),s=[];break;case"select":i=Ft({},i,{value:void 0}),r=Ft({},r,{value:void 0}),s=[];break;case"textarea":i=sn(e,i),r=sn(e,r),s=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=ts)}for(c in wn(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var o=i[c];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(ct.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(o=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(null!=l||null!=o))if("style"===c)if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,o=o?o.__html:void 0,null!=l&&o!==l&&(s=s||[]).push(c,l)):"children"===c?"string"!=typeof l&&"number"!=typeof l||(s=s||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(ct.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&za("scroll",e),s||o===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}},Ic=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yc=!1,Jc=!1,Zc="function"==typeof WeakSet?WeakSet:Set,Qc=null;function ed(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){Su(e,t,r)}else n.current=null}function td(e,t,n){try{n()}catch(r){Su(e,t,r)}}var nd=!1;function rd(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&td(t,n,a)}i=i.next}while(i!==r)}}function id(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ad(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function sd(e){var t=e.alternate;null!==t&&(e.alternate=null,sd(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ms],delete t[fs],delete t[vs],delete t[xs],delete t[ys])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function od(e){return 5===e.tag||3===e.tag||4===e.tag}function ld(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||od(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cd(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=ts));else if(4!==r&&null!==(e=e.child))for(cd(e,t,n),e=e.sibling;null!==e;)cd(e,t,n),e=e.sibling}function dd(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(dd(e,t,n),e=e.sibling;null!==e;)dd(e,t,n),e=e.sibling}var ud=null,hd=!1;function pd(e,t,n){for(n=n.child;null!==n;)md(e,t,n),n=n.sibling}function md(e,t,n){if(lr&&"function"==typeof lr.onCommitFiberUnmount)try{lr.onCommitFiberUnmount(or,n)}catch(o){}switch(n.tag){case 5:Jc||ed(n,t);case 6:var r=ud,i=hd;ud=null,pd(e,t,n),hd=i,null!==(ud=r)&&(hd?(e=ud,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ud.removeChild(n.stateNode));break;case 18:null!==ud&&(hd?(e=ud,n=n.stateNode,8===e.nodeType?ds(e.parentNode,n):1===e.nodeType&&ds(e,n),Wr(e)):ds(ud,n.stateNode));break;case 4:r=ud,i=hd,ud=n.stateNode.containerInfo,hd=!0,pd(e,t,n),ud=r,hd=i;break;case 0:case 11:case 14:case 15:if(!Jc&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,void 0!==s&&(2&a||4&a)&&td(n,t,s),i=i.next}while(i!==r)}pd(e,t,n);break;case 1:if(!Jc&&(ed(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Su(n,t,o)}pd(e,t,n);break;case 21:pd(e,t,n);break;case 22:1&n.mode?(Jc=(r=Jc)||null!==n.memoizedState,pd(e,t,n),Jc=r):pd(e,t,n);break;default:pd(e,t,n)}}function fd(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zc),t.forEach(function(t){var r=Eu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function gd(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,o=s;e:for(;null!==o;){switch(o.tag){case 5:ud=o.stateNode,hd=!1;break e;case 3:case 4:ud=o.stateNode.containerInfo,hd=!0;break e}o=o.return}if(null===ud)throw Error(ot(160));md(a,s,i),ud=null,hd=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(EI){Su(i,t,EI)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vd(t,e),t=t.sibling}function vd(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gd(t,e),xd(e),4&r){try{rd(3,e,e.return),id(3,e)}catch(AI){Su(e,e.return,AI)}try{rd(5,e,e.return)}catch(AI){Su(e,e.return,AI)}}break;case 1:gd(t,e),xd(e),512&r&&null!==n&&ed(n,n.return);break;case 5:if(gd(t,e),xd(e),512&r&&null!==n&&ed(n,n.return),32&e.flags){var i=e.stateNode;try{fn(i,"")}catch(AI){Su(e,e.return,AI)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,o=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===o&&"radio"===a.type&&null!=a.name&&Qt(i,a),jn(o,s);var c=jn(o,a);for(s=0;s<l.length;s+=2){var d=l[s],u=l[s+1];"style"===d?yn(i,u):"dangerouslySetInnerHTML"===d?mn(i,u):"children"===d?fn(i,u):wt(i,d,u,c)}switch(o){case"input":en(i,a);break;case"textarea":ln(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?an(i,!!a.multiple,p,!1):h!==!!a.multiple&&(null!=a.defaultValue?an(i,!!a.multiple,a.defaultValue,!0):an(i,!!a.multiple,a.multiple?[]:"",!1))}i[fs]=a}catch(AI){Su(e,e.return,AI)}}break;case 6:if(gd(t,e),xd(e),4&r){if(null===e.stateNode)throw Error(ot(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(AI){Su(e,e.return,AI)}}break;case 3:if(gd(t,e),xd(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wr(t.containerInfo)}catch(AI){Su(e,e.return,AI)}break;case 4:default:gd(t,e),xd(e);break;case 13:gd(t,e),xd(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Hd=er())),4&r&&fd(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Jc=(c=Jc)||d,gd(t,e),Jc=c):gd(t,e),xd(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&1&e.mode)for(Qc=e,d=e.child;null!==d;){for(u=Qc=d;null!==Qc;){switch(p=(h=Qc).child,h.tag){case 0:case 11:case 14:case 15:rd(4,h,h.return);break;case 1:ed(h,h.return);var m=h.stateNode;if("function"==typeof m.componentWillUnmount){r=h,n=h.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(AI){Su(r,n,AI)}}break;case 5:ed(h,h.return);break;case 22:if(null!==h.memoizedState){jd(u);continue}}null!==p?(p.return=h,Qc=p):jd(u)}d=d.sibling}e:for(d=null,u=e;;){if(5===u.tag){if(null===d){d=u;try{i=u.stateNode,c?"function"==typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(o=u.stateNode,s=null!=(l=u.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,o.style.display=xn("display",s))}catch(AI){Su(e,e.return,AI)}}}else if(6===u.tag){if(null===d)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(AI){Su(e,e.return,AI)}}else if((22!==u.tag&&23!==u.tag||null===u.memoizedState||u===e)&&null!==u.child){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;null===u.sibling;){if(null===u.return||u.return===e)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:gd(t,e),xd(e),4&r&&fd(e);case 21:}}function xd(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(od(n)){var r=n;break e}n=n.return}throw Error(ot(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fn(i,""),r.flags&=-33),dd(e,ld(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;cd(e,ld(e),a);break;default:throw Error(ot(161))}}catch(s){Su(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yd(e,t,n){Qc=e,bd(e)}function bd(e,t,n){for(var r=!!(1&e.mode);null!==Qc;){var i=Qc,a=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Yc;if(!s){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Jc;o=Yc;var c=Jc;if(Yc=s,(Jc=l)&&!c)for(Qc=i;null!==Qc;)l=(s=Qc).child,22===s.tag&&null!==s.memoizedState?Nd(i):null!==l?(l.return=s,Qc=l):Nd(i);for(;null!==a;)Qc=a,bd(a),a=a.sibling;Qc=i,Yc=o,Jc=c}wd(e)}else 8772&i.subtreeFlags&&null!==a?(a.return=i,Qc=a):wd(e)}}function wd(e){for(;null!==Qc;){var t=Qc;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Jc||id(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Jc)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ic(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Ko(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ko(t,s,n)}break;case 5:var o=t.stateNode;if(null===n&&4&t.flags){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var u=d.dehydrated;null!==u&&Wr(u)}}}break;default:throw Error(ot(163))}Jc||512&t.flags&&ad(t)}catch(MI){Su(t,t.return,MI)}}if(t===e){Qc=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qc=n;break}Qc=t.return}}function jd(e){for(;null!==Qc;){var t=Qc;if(t===e){Qc=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qc=n;break}Qc=t.return}}function Nd(e){for(;null!==Qc;){var t=Qc;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{id(4,t)}catch(l){Su(t,n,l)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Su(t,i,l)}}var a=t.return;try{ad(t)}catch(l){Su(t,a,l)}break;case 5:var s=t.return;try{ad(t)}catch(l){Su(t,s,l)}}}catch(l){Su(t,t.return,l)}if(t===e){Qc=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Qc=o;break}Qc=t.return}}var _d,Sd=Math.ceil,Cd=jt.ReactCurrentDispatcher,Ad=jt.ReactCurrentOwner,Md=jt.ReactCurrentBatchConfig,Ed=0,kd=null,Td=null,Pd=0,Od=0,Rd=Cs(0),Id=0,Dd=null,Ld=0,Bd=0,Fd=0,Ud=null,zd=null,Hd=0,Vd=1/0,Gd=null,Wd=!1,Kd=null,qd=null,Xd=!1,$d=null,Yd=0,Jd=0,Zd=null,Qd=-1,eu=0;function tu(){return 6&Ed?er():-1!==Qd?Qd:Qd=er()}function nu(e){return 1&e.mode?2&Ed&&0!==Pd?Pd&-Pd:null!==xo.transition?(0===eu&&(eu=xr()),eu):0!==(e=jr)?e:e=void 0===(e=window.event)?16:Qr(e.type):1}function ru(e,t,n,r){if(50<Jd)throw Jd=0,Zd=null,Error(ot(185));br(e,n,r),2&Ed&&e===kd||(e===kd&&(!(2&Ed)&&(Bd|=n),4===Id&&lu(e,Pd)),iu(e,r),1===n&&0===Ed&&!(1&t.mode)&&(Vd=er()+500,zs&&Gs()))}function iu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-cr(a),o=1<<s,l=i[s];-1===l?0!==(o&n)&&0===(o&r)||(i[s]=gr(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var r=fr(e,e===kd?Pd:0);if(0===r)null!==n&&Jn(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Jn(n),1===t)0===e.tag?function(e){zs=!0,Vs(e)}(cu.bind(null,e)):Vs(cu.bind(null,e)),ls(function(){!(6&Ed)&&Gs()}),n=null;else{switch(Nr(r)){case 1:n=nr;break;case 4:n=rr;break;case 16:default:n=ir;break;case 536870912:n=sr}n=ku(n,au.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function au(e,t){if(Qd=-1,eu=0,6&Ed)throw Error(ot(327));var n=e.callbackNode;if(Nu()&&e.callbackNode!==n)return null;var r=fr(e,e===kd?Pd:0);if(0===r)return null;if(30&r||0!==(r&e.expiredLanes)||t)t=vu(e,r);else{t=r;var i=Ed;Ed|=2;var a=fu();for(kd===e&&Pd===t||(Gd=null,Vd=er()+500,pu(e,t));;)try{yu();break}catch(o){mu(e,o)}Eo(),Cd.current=a,Ed=i,null!==Td?t=0:(kd=null,Pd=0,t=Id)}if(0!==t){if(2===t&&(0!==(i=vr(e))&&(r=i,t=su(e,i))),1===t)throw n=Dd,pu(e,0),lu(e,r),iu(e,er()),n;if(6===t)lu(e,r);else{if(i=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ca(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)||(t=vu(e,r),2===t&&(a=vr(e),0!==a&&(r=a,t=su(e,a))),1!==t)))throw n=Dd,pu(e,0),lu(e,r),iu(e,er()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ot(345));case 2:case 5:ju(e,zd,Gd);break;case 3:if(lu(e,r),(130023424&r)===r&&10<(t=Hd+500-er())){if(0!==fr(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=as(ju.bind(null,e,zd,Gd),t);break}ju(e,zd,Gd);break;case 4:if(lu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-cr(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=er()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sd(r/1960))-r)){e.timeoutHandle=as(ju.bind(null,e,zd,Gd),r);break}ju(e,zd,Gd);break;default:throw Error(ot(329))}}}return iu(e,er()),e.callbackNode===n?au.bind(null,e):null}function su(e,t){var n=Ud;return e.current.memoizedState.isDehydrated&&(pu(e,t).flags|=256),2!==(e=vu(e,t))&&(t=zd,zd=n,null!==t&&ou(t)),e}function ou(e){null===zd?zd=e:zd.push.apply(zd,e)}function lu(e,t){for(t&=~Fd,t&=~Bd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-cr(t),r=1<<n;e[n]=-1,t&=~r}}function cu(e){if(6&Ed)throw Error(ot(327));Nu();var t=fr(e,0);if(!(1&t))return iu(e,er()),null;var n=vu(e,t);if(0!==e.tag&&2===n){var r=vr(e);0!==r&&(t=r,n=su(e,r))}if(1===n)throw n=Dd,pu(e,0),lu(e,t),iu(e,er()),n;if(6===n)throw Error(ot(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ju(e,zd,Gd),iu(e,er()),null}function du(e,t){var n=Ed;Ed|=1;try{return e(t)}finally{0===(Ed=n)&&(Vd=er()+500,zs&&Gs())}}function uu(e){null!==$d&&0===$d.tag&&!(6&Ed)&&Nu();var t=Ed;Ed|=1;var n=Md.transition,r=jr;try{if(Md.transition=null,jr=1,e)return e()}finally{jr=r,Md.transition=n,!(6&(Ed=t))&&Gs()}}function hu(){Od=Rd.current,As(Rd)}function pu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Td)for(n=Td.return;null!==n;){var r=n;switch(ro(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Is();break;case 3:Qo(),As(Ts),As(ks),al();break;case 5:tl(r);break;case 4:Qo();break;case 13:case 19:As(nl);break;case 10:ko(r.type._context);break;case 22:case 23:hu()}n=n.return}if(kd=e,Td=e=Ru(e.current,null),Pd=Od=t,Id=0,Dd=null,Fd=Bd=Ld=0,zd=Ud=null,null!==Ro){for(t=0;t<Ro.length;t++)if(null!==(r=(n=Ro[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var s=a.next;a.next=i,r.next=s}n.pending=r}Ro=null}return e}function mu(e,t){for(;;){var n=Td;try{if(Eo(),sl.current=ec,hl){for(var r=cl.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}hl=!1}if(ll=0,ul=dl=cl=null,pl=!1,ml=0,Ad.current=null,null===n||null===n.return){Id=1,Dd=t,Td=null;break}e:{var a=e,s=n.return,o=n,l=t;if(t=Pd,o.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l,d=o,u=d.tag;if(!(1&d.mode||0!==u&&11!==u&&15!==u)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=vc(s);if(null!==p){p.flags&=-257,xc(p,s,o,0,t),1&p.mode&&gc(a,c,t),l=c;var m=(t=p).updateQueue;if(null===m){var f=new Set;f.add(l),t.updateQueue=f}else m.add(l);break e}if(!(1&t)){gc(a,c,t),gu();break e}l=Error(ot(426))}else if(so&&1&o.mode){var g=vc(s);if(null!==g){!(65536&g.flags)&&(g.flags|=256),xc(g,s,o,0,t),vo(uc(l,o));break e}}a=l=uc(l,o),4!==Id&&(Id=2),null===Ud?Ud=[a]:Ud.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Go(a,mc(0,l,t));break e;case 1:o=l;var v=a.type,x=a.stateNode;if(!(128&a.flags||"function"!=typeof v.getDerivedStateFromError&&(null===x||"function"!=typeof x.componentDidCatch||null!==qd&&qd.has(x)))){a.flags|=65536,t&=-t,a.lanes|=t,Go(a,fc(a,o,t));break e}}a=a.return}while(null!==a)}wu(n)}catch(y){t=y,Td===n&&null!==n&&(Td=n=n.return);continue}break}}function fu(){var e=Cd.current;return Cd.current=ec,null===e?ec:e}function gu(){0!==Id&&3!==Id&&2!==Id||(Id=4),null===kd||!(268435455&Ld)&&!(268435455&Bd)||lu(kd,Pd)}function vu(e,t){var n=Ed;Ed|=2;var r=fu();for(kd===e&&Pd===t||(Gd=null,pu(e,t));;)try{xu();break}catch(CI){mu(e,CI)}if(Eo(),Ed=n,Cd.current=r,null!==Td)throw Error(ot(261));return kd=null,Pd=0,Id}function xu(){for(;null!==Td;)bu(Td)}function yu(){for(;null!==Td&&!Zn();)bu(Td)}function bu(e){var t=_d(e.alternate,e,Od);e.memoizedProps=e.pendingProps,null===t?wu(e):Td=t,Ad.current=null}function wu(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=$c(n,t)))return n.flags&=32767,void(Td=n);if(null===e)return Id=6,void(Td=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Xc(n,t,Od)))return void(Td=n);if(null!==(t=t.sibling))return void(Td=t);Td=t=e}while(null!==t);0===Id&&(Id=5)}function ju(e,t,n){var r=jr,i=Md.transition;try{Md.transition=null,jr=1,function(e,t,n,r){do{Nu()}while(null!==$d);if(6&Ed)throw Error(ot(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ot(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-cr(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,a),e===kd&&(Td=kd=null,Pd=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||Xd||(Xd=!0,ku(ir,function(){return Nu(),null})),a=!!(15990&n.flags),!!(15990&n.subtreeFlags)||a){a=Md.transition,Md.transition=null;var s=jr;jr=1;var o=Ed;Ed|=4,Ad.current=null,function(e,t){if(ns=qr,fa(e=ma())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(b){n=null;break e}var s=0,o=-1,l=-1,c=0,d=0,u=e,h=null;t:for(;;){for(var p;u!==n||0!==i&&3!==u.nodeType||(o=s+i),u!==a||0!==r&&3!==u.nodeType||(l=s+r),3===u.nodeType&&(s+=u.nodeValue.length),null!==(p=u.firstChild);)h=u,u=p;for(;;){if(u===e)break t;if(h===n&&++c===i&&(o=s),h===a&&++d===r&&(l=s),null!==(p=u.nextSibling))break;h=(u=h).parentNode}u=p}n=-1===o||-1===l?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(rs={focusedElem:e,selectionRange:n},qr=!1,Qc=t;null!==Qc;)if(e=(t=Qc).child,1028&t.subtreeFlags&&null!==e)e.return=t,Qc=e;else for(;null!==Qc;){t=Qc;try{var m=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var f=m.memoizedProps,g=m.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?f:ic(t.type,f),g);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var y=t.stateNode.containerInfo;1===y.nodeType?y.textContent="":9===y.nodeType&&y.documentElement&&y.removeChild(y.documentElement);break;default:throw Error(ot(163))}}catch(b){Su(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Qc=e;break}Qc=t.return}m=nd,nd=!1}(e,n),vd(n,e),ga(rs),qr=!!ns,rs=ns=null,e.current=n,yd(n),Qn(),Ed=o,jr=s,Md.transition=a}else e.current=n;if(Xd&&(Xd=!1,$d=e,Yd=i),a=e.pendingLanes,0===a&&(qd=null),function(e){if(lr&&"function"==typeof lr.onCommitFiberRoot)try{lr.onCommitFiberRoot(or,e,void 0,!(128&~e.current.flags))}catch(t){}}(n.stateNode),iu(e,er()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wd)throw Wd=!1,e=Kd,Kd=null,e;!!(1&Yd)&&0!==e.tag&&Nu(),a=e.pendingLanes,1&a?e===Zd?Jd++:(Jd=0,Zd=e):Jd=0,Gs()}(e,t,n,r)}finally{Md.transition=i,jr=r}return null}function Nu(){if(null!==$d){var e=Nr(Yd),t=Md.transition,n=jr;try{if(Md.transition=null,jr=16>e?16:e,null===$d)var r=!1;else{if(e=$d,$d=null,Yd=0,6&Ed)throw Error(ot(331));var i=Ed;for(Ed|=4,Qc=e.current;null!==Qc;){var a=Qc,s=a.child;if(16&Qc.flags){var o=a.deletions;if(null!==o){for(var l=0;l<o.length;l++){var c=o[l];for(Qc=c;null!==Qc;){var d=Qc;switch(d.tag){case 0:case 11:case 15:rd(8,d,a)}var u=d.child;if(null!==u)u.return=d,Qc=u;else for(;null!==Qc;){var h=(d=Qc).sibling,p=d.return;if(sd(d),d===c){Qc=null;break}if(null!==h){h.return=p,Qc=h;break}Qc=p}}}var m=a.alternate;if(null!==m){var f=m.child;if(null!==f){m.child=null;do{var g=f.sibling;f.sibling=null,f=g}while(null!==f)}}Qc=a}}if(2064&a.subtreeFlags&&null!==s)s.return=a,Qc=s;else e:for(;null!==Qc;){if(2048&(a=Qc).flags)switch(a.tag){case 0:case 11:case 15:rd(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Qc=v;break e}Qc=a.return}}var x=e.current;for(Qc=x;null!==Qc;){var y=(s=Qc).child;if(2064&s.subtreeFlags&&null!==y)y.return=s,Qc=y;else e:for(s=x;null!==Qc;){if(2048&(o=Qc).flags)try{switch(o.tag){case 0:case 11:case 15:id(9,o)}}catch(w){Su(o,o.return,w)}if(o===s){Qc=null;break e}var b=o.sibling;if(null!==b){b.return=o.return,Qc=b;break e}Qc=o.return}}if(Ed=i,Gs(),lr&&"function"==typeof lr.onPostCommitFiberRoot)try{lr.onPostCommitFiberRoot(or,e)}catch(w){}r=!0}return r}finally{jr=n,Md.transition=t}}return!1}function _u(e,t,n){e=Ho(e,t=mc(0,t=uc(n,t),1),1),t=tu(),null!==e&&(br(e,1,t),iu(e,t))}function Su(e,t,n){if(3===e.tag)_u(e,e,n);else for(;null!==t;){if(3===t.tag){_u(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===qd||!qd.has(r))){t=Ho(t,e=fc(t,e=uc(n,e),1),1),e=tu(),null!==t&&(br(t,1,e),iu(t,e));break}}t=t.return}}function Cu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,kd===e&&(Pd&n)===n&&(4===Id||3===Id&&(130023424&Pd)===Pd&&500>er()-Hd?pu(e,0):Fd|=n),iu(e,t)}function Au(e,t){0===t&&(1&e.mode?(t=pr,!(130023424&(pr<<=1))&&(pr=4194304)):t=1);var n=tu();null!==(e=Lo(e,t))&&(br(e,t,n),iu(e,n))}function Mu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Au(e,n)}function Eu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ot(314))}null!==r&&r.delete(t),Au(e,n)}function ku(e,t){return Yn(e,t)}function Tu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pu(e,t,n,r){return new Tu(e,t,n,r)}function Ou(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ru(e,t){var n=e.alternate;return null===n?((n=Pu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Iu(e,t,n,r,i,a){var s=2;if(r=e,"function"==typeof e)Ou(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case St:return Du(n.children,i,a,t);case Ct:s=8,i|=8;break;case At:return(e=Pu(12,n,t,2|i)).elementType=At,e.lanes=a,e;case Tt:return(e=Pu(13,n,t,i)).elementType=Tt,e.lanes=a,e;case Pt:return(e=Pu(19,n,t,i)).elementType=Pt,e.lanes=a,e;case It:return Lu(n,i,a,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Mt:s=10;break e;case Et:s=9;break e;case kt:s=11;break e;case Ot:s=14;break e;case Rt:s=16,r=null;break e}throw Error(ot(130,null==e?e:typeof e,""))}return(t=Pu(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Du(e,t,n,r){return(e=Pu(7,e,r,t)).lanes=n,e}function Lu(e,t,n,r){return(e=Pu(22,e,r,t)).elementType=It,e.lanes=n,e.stateNode={isHidden:!1},e}function Bu(e,t,n){return(e=Pu(6,e,null,t)).lanes=n,e}function Fu(e,t,n){return(t=Pu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yr(0),this.expirationTimes=yr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yr(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zu(e,t,n,r,i,a,s,o,l){return e=new Uu(e,t,n,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pu(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fo(a),e}function Hu(e){if(!e)return Es;e:{if(Wn(e=e._reactInternals)!==e||1!==e.tag)throw Error(ot(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(ot(171))}if(1===e.tag){var n=e.type;if(Rs(n))return Ls(e,n,t)}return t}function Vu(e,t,n,r,i,a,s,o,l){return(e=zu(n,r,!0,e,0,a,0,o,l)).context=Hu(null),n=e.current,(a=zo(r=tu(),i=nu(n))).callback=null!=t?t:null,Ho(n,a,i),e.current.lanes=i,br(e,i,r),iu(e,r),e}function Gu(e,t,n,r){var i=t.current,a=tu(),s=nu(i);return n=Hu(n),null===t.context?t.context=n:t.pendingContext=n,(t=zo(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ho(i,t,s))&&(ru(e,i,s,a),Vo(e,i,s)),s}function Wu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Ku(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qu(e,t){Ku(e,t),(e=e.alternate)&&Ku(e,t)}_d=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ts.current)bc=!0;else{if(0===(e.lanes&n)&&!(128&t.flags))return bc=!1,function(e,t,n){switch(t.tag){case 3:kc(t),go();break;case 5:el(t);break;case 1:Rs(t.type)&&Bs(t);break;case 4:Zo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ms(So,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ms(nl,1&nl.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Bc(e,t,n):(Ms(nl,1&nl.current),null!==(e=Wc(e,t,n))?e.sibling:null);Ms(nl,1&nl.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return Vc(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ms(nl,nl.current),r)break;return null;case 22:case 23:return t.lanes=0,Sc(e,t,n)}return Wc(e,t,n)}(e,t,n);bc=!!(131072&e.flags)}else bc=!1,so&&1048576&t.flags&&to(t,Xs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Gc(e,t),e=t.pendingProps;var i=Os(t,ks.current);Po(t,n),i=xl(null,t,r,e,i,n);var a=yl();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rs(r)?(a=!0,Bs(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Fo(t),i.updater=sc,t.stateNode=i,i._reactInternals=t,dc(t,r,e,n),t=Ec(null,t,r,!0,a,n)):(t.tag=0,so&&a&&no(t),wc(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Gc(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Ou(e)?1:0;if(null!=e){if((e=e.$$typeof)===kt)return 11;if(e===Ot)return 14}return 2}(r),e=ic(r,e),i){case 0:t=Ac(null,t,r,e,n);break e;case 1:t=Mc(null,t,r,e,n);break e;case 11:t=jc(null,t,r,e,n);break e;case 14:t=Nc(null,t,r,ic(r.type,e),n);break e}throw Error(ot(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ac(e,t,r,i=t.elementType===r?i:ic(r,i),n);case 1:return r=t.type,i=t.pendingProps,Mc(e,t,r,i=t.elementType===r?i:ic(r,i),n);case 3:e:{if(kc(t),null===e)throw Error(ot(387));r=t.pendingProps,i=(a=t.memoizedState).element,Uo(e,t),Wo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Tc(e,t,r,n,i=uc(Error(ot(423)),t));break e}if(r!==i){t=Tc(e,t,r,n,i=uc(Error(ot(424)),t));break e}for(ao=us(t.stateNode.containerInfo.firstChild),io=t,so=!0,oo=null,n=_o(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(go(),r===i){t=Wc(e,t,n);break e}wc(e,t,r,n)}t=t.child}return t;case 5:return el(t),null===e&&ho(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,is(r,i)?s=null:null!==a&&is(r,a)&&(t.flags|=32),Cc(e,t),wc(e,t,s,n),t.child;case 6:return null===e&&ho(t),null;case 13:return Bc(e,t,n);case 4:return Zo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=No(t,null,r,n):wc(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,jc(e,t,r,i=t.elementType===r?i:ic(r,i),n);case 7:return wc(e,t,t.pendingProps,n),t.child;case 8:case 12:return wc(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Ms(So,r._currentValue),r._currentValue=s,null!==a)if(ca(a.value,s)){if(a.children===i.children&&!Ts.current){t=Wc(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var o=a.dependencies;if(null!==o){s=a.child;for(var l=o.firstContext;null!==l;){if(l.context===r){if(1===a.tag){(l=zo(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),To(a.return,n,t),o.lanes|=n;break}l=l.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(ot(341));s.lanes|=n,null!==(o=s.alternate)&&(o.lanes|=n),To(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}wc(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Po(t,n),r=r(i=Oo(i)),t.flags|=1,wc(e,t,r,n),t.child;case 14:return i=ic(r=t.type,t.pendingProps),Nc(e,t,r,i=ic(r.type,i),n);case 15:return _c(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ic(r,i),Gc(e,t),t.tag=1,Rs(r)?(e=!0,Bs(t)):e=!1,Po(t,n),lc(t,r,i),dc(t,r,i,n),Ec(null,t,r,!0,e,n);case 19:return Vc(e,t,n);case 22:return Sc(e,t,n)}throw Error(ot(156,t.tag))};var Xu="function"==typeof reportError?reportError:function(e){};function $u(e){this._internalRoot=e}function Yu(e){this._internalRoot=e}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qu(){}function eh(e,t,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if("function"==typeof i){var o=i;i=function(){var e=Wu(s);o.call(e)}}Gu(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"==typeof r){var a=r;r=function(){var e=Wu(s);a.call(e)}}var s=Vu(t,r,e,0,null,!1,0,"",Qu);return e._reactRootContainer=s,e[gs]=s.current,Ga(8===e.nodeType?e.parentNode:e),uu(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var o=r;r=function(){var e=Wu(l);o.call(e)}}var l=zu(e,0,!1,null,0,!1,0,"",Qu);return e._reactRootContainer=l,e[gs]=l.current,Ga(8===e.nodeType?e.parentNode:e),uu(function(){Gu(t,l,n,r)}),l}(n,t,e,i,r);return Wu(s)}Yu.prototype.render=$u.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(ot(409));Gu(e,t,null,null)},Yu.prototype.unmount=$u.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uu(function(){Gu(null,e,null,null)}),t[gs]=null}},Yu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ar();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dr.length&&0!==t&&t<Dr[n].priority;n++);Dr.splice(n,0,e),0===n&&Ur(e)}},_r=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=mr(t.pendingLanes);0!==n&&(wr(t,1|n),iu(t,er()),!(6&Ed)&&(Vd=er()+500,Gs()))}break;case 13:uu(function(){var t=Lo(e,1);if(null!==t){var n=tu();ru(t,e,1,n)}}),qu(e,1)}},Sr=function(e){if(13===e.tag){var t=Lo(e,134217728);if(null!==t)ru(t,e,134217728,tu());qu(e,134217728)}},Cr=function(e){if(13===e.tag){var t=nu(e),n=Lo(e,t);if(null!==n)ru(n,e,t,tu());qu(e,t)}},Ar=function(){return jr},Mr=function(e,t){var n=jr;try{return jr=e,t()}finally{jr=n}},Sn=function(e,t,n){switch(t){case"input":if(en(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ns(r);if(!i)throw Error(ot(90));$t(r),en(r,i)}}}break;case"textarea":ln(e,n);break;case"select":null!=(t=n.value)&&an(e,!!n.multiple,t,!1)}},Tn=du,Pn=uu;var th={usingClientEntryPoint:!1,Events:[ws,js,Ns,En,kn,du]},nh={findFiberByHostInstance:bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rh={bundleType:nh.bundleType,version:nh.version,rendererPackageName:nh.rendererPackageName,rendererConfig:nh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Xn(e))?null:e.stateNode},findFiberByHostInstance:nh.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ih.isDisabled&&ih.supportsFiber)try{or=ih.inject(rh),lr=ih}catch(pn){}}tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=th,tt.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ju(t))throw Error(ot(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_t,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},tt.createRoot=function(e,t){if(!Ju(e))throw Error(ot(299));var n=!1,r="",i=Xu;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zu(e,1,!1,null,0,n,0,r,i),e[gs]=t.current,Ga(8===e.nodeType?e.parentNode:e),new $u(t)},tt.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(ot(188));throw e=Object.keys(e).join(","),Error(ot(268,e))}return e=null===(e=Xn(t))?null:e.stateNode},tt.flushSync=function(e){return uu(e)},tt.hydrate=function(e,t,n){if(!Zu(t))throw Error(ot(200));return eh(null,e,t,!0,n)},tt.hydrateRoot=function(e,t,n){if(!Ju(e))throw Error(ot(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Xu;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vu(t,null,e,1,null!=n?n:null,i,0,a,s),e[gs]=t.current,Ga(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yu(t)},tt.render=function(e,t,n){if(!Zu(t))throw Error(ot(200));return eh(null,e,t,!1,n)},tt.unmountComponentAtNode=function(e){if(!Zu(e))throw Error(ot(40));return!!e._reactRootContainer&&(uu(function(){eh(null,null,e,!1,function(){e._reactRootContainer=null,e[gs]=null})}),!0)},tt.unstable_batchedUpdates=du,tt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zu(n))throw Error(ot(200));if(null==e||void 0===e._reactInternals)throw Error(ot(38));return eh(e,t,n,!1,r)},tt.version="18.3.1-next-f1338f8080-20240426",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),et.exports=tt;var ah=et.exports;const sh=ie(ah);var oh,lh=ah;oh=lh.createRoot,lh.hydrateRoot;let ch=0;const dh=new Map,uh=e=>{if(dh.has(e))return;const t=setTimeout(()=>{dh.delete(e),fh({type:"REMOVE_TOAST",toastId:e})},1e6);dh.set(e,t)},hh=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?uh(n):e.toasts.forEach(e=>{uh(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,open:!1}:e)}}case"REMOVE_TOAST":return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},ph=[];let mh={toasts:[]};function fh(e){mh=hh(mh,e),ph.forEach(e=>{e(mh)})}function gh({...e}){const t=(ch=(ch+1)%Number.MAX_SAFE_INTEGER,ch.toString()),n=()=>fh({type:"DISMISS_TOAST",toastId:t});return fh({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||n()}}}),{id:t,dismiss:n,update:e=>fh({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function vh(){const[e,t]=Ve.useState(mh);return Ve.useEffect(()=>(ph.push(t),()=>{const e=ph.indexOf(t);e>-1&&ph.splice(e,1)}),[e]),{...e,toast:gh,dismiss:e=>fh({type:"DISMISS_TOAST",toastId:e})}}function xh(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(null==e||e(r),!1===n||!r.defaultPrevented)return null==t?void 0:t(r)}}function yh(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function bh(...e){return t=>{let n=!1;const r=e.map(e=>{const r=yh(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){const n=r[t];"function"==typeof n?n():yh(e[t],null)}}}}function wh(...e){return Ve.useCallback(bh(...e),e)}function jh(e,t=[]){let n=[];const r=()=>{const t=n.map(e=>Ve.createContext(e));return function(n){const r=(null==n?void 0:n[e])||t;return Ve.useMemo(()=>({[`__scope${e}`]:{...n,[e]:r}}),[n,r])}};return r.scopeName=e,[function(t,r){const i=Ve.createContext(r),a=n.length;n=[...n,r];const s=t=>{var n;const{scope:r,children:s,...o}=t,l=(null==(n=null==r?void 0:r[e])?void 0:n[a])||i,c=Ve.useMemo(()=>o,Object.values(o));return Qe.jsx(l.Provider,{value:c,children:s})};return s.displayName=t+"Provider",[s,function(n,s){var o;const l=(null==(o=null==s?void 0:s[e])?void 0:o[a])||i,c=Ve.useContext(l);if(c)return c;if(void 0!==r)return r;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},Nh(r,...t)]}function Nh(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=n.reduce((t,{useScope:n,scopeName:r})=>({...t,...n(e)[`__scope${r}`]}),{});return Ve.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}function _h(e){const t=Ch(e),n=Ve.forwardRef((e,n)=>{const{children:r,...i}=e,a=Ve.Children.toArray(r),s=a.find(Eh);if(s){const e=s.props.children,r=a.map(t=>t===s?Ve.Children.count(e)>1?Ve.Children.only(null):Ve.isValidElement(e)?e.props.children:null:t);return Qe.jsx(t,{...i,ref:n,children:Ve.isValidElement(e)?Ve.cloneElement(e,void 0,r):null})}return Qe.jsx(t,{...i,ref:n,children:r})});return n.displayName=`${e}.Slot`,n}var Sh=_h("Slot");function Ch(e){const t=Ve.forwardRef((e,t)=>{const{children:n,...r}=e;if(Ve.isValidElement(n)){const e=function(e){var t,n;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=r&&"isReactWarning"in r&&r.isReactWarning;if(i)return e.ref;if(r=null==(n=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:n.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(n),i=function(e,t){const n={...t};for(const r in t){const i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...e)=>{const t=a(...e);return i(...e),t}:i&&(n[r]=i):"style"===r?n[r]={...i,...a}:"className"===r&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props);return n.type!==Ve.Fragment&&(i.ref=t?bh(t,e):e),Ve.cloneElement(n,i)}return Ve.Children.count(n)>1?Ve.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Ah=Symbol("radix.slottable");function Mh(e){const t=({children:e})=>Qe.jsx(Qe.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=Ah,t}function Eh(e){return Ve.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Ah}function kh(e){const t=e+"CollectionProvider",[n,r]=jh(t),[i,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=e=>{const{scope:t,children:n}=e,r=Ge.useRef(null),a=Ge.useRef(new Map).current;return Qe.jsx(i,{scope:t,itemMap:a,collectionRef:r,children:n})};s.displayName=t;const o=e+"CollectionSlot",l=_h(o),c=Ge.forwardRef((e,t)=>{const{scope:n,children:r}=e,i=wh(t,a(o,n).collectionRef);return Qe.jsx(l,{ref:i,children:r})});c.displayName=o;const d=e+"CollectionItemSlot",u="data-radix-collection-item",h=_h(d),p=Ge.forwardRef((e,t)=>{const{scope:n,children:r,...i}=e,s=Ge.useRef(null),o=wh(t,s),l=a(d,n);return Ge.useEffect(()=>(l.itemMap.set(s,{ref:s,...i}),()=>{l.itemMap.delete(s)})),Qe.jsx(h,{[u]:"",ref:o,children:r})});return p.displayName=d,[{Provider:s,Slot:c,ItemSlot:p},function(t){const n=a(e+"CollectionConsumer",t),r=Ge.useCallback(()=>{const e=n.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${u}]`)),r=Array.from(n.itemMap.values()).sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current));return r},[n.collectionRef,n.itemMap]);return r},r]}var Th=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=_h(`Primitive.${t}`),r=Ve.forwardRef((e,r)=>{const{asChild:i,...a}=e,s=i?n:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),Qe.jsx(s,{...a,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Ph(e,t){e&&ah.flushSync(()=>e.dispatchEvent(t))}function Oh(e){const t=Ve.useRef(e);return Ve.useEffect(()=>{t.current=e}),Ve.useMemo(()=>(...e)=>{var n;return null==(n=t.current)?void 0:n.call(t,...e)},[])}var Rh,Ih="dismissableLayer.update",Dh="dismissableLayer.pointerDownOutside",Lh="dismissableLayer.focusOutside",Bh=Ve.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Fh=Ve.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:s,onDismiss:o,...l}=e,c=Ve.useContext(Bh),[d,u]=Ve.useState(null),h=(null==d?void 0:d.ownerDocument)??(null==globalThis?void 0:globalThis.document),[,p]=Ve.useState({}),m=wh(t,e=>u(e)),f=Array.from(c.layers),[g]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=f.indexOf(g),x=d?f.indexOf(d):-1,y=c.layersWithOutsidePointerEventsDisabled.size>0,b=x>=v,w=function(e,t=(null==globalThis?void 0:globalThis.document)){const n=Oh(e),r=Ve.useRef(!1),i=Ve.useRef(()=>{});return Ve.useEffect(()=>{const e=e=>{if(e.target&&!r.current){let r=function(){Hh(Dh,n,a,{discrete:!0})};const a={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",i.current),i.current=r,t.addEventListener("click",i.current,{once:!0})):r()}else t.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",e),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}(e=>{const t=e.target,n=[...c.branches].some(e=>e.contains(t));b&&!n&&(null==i||i(e),null==s||s(e),e.defaultPrevented||null==o||o())},h),j=function(e,t=(null==globalThis?void 0:globalThis.document)){const n=Oh(e),r=Ve.useRef(!1);return Ve.useEffect(()=>{const e=e=>{if(e.target&&!r.current){Hh(Lh,n,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}(e=>{const t=e.target;[...c.branches].some(e=>e.contains(t))||(null==a||a(e),null==s||s(e),e.defaultPrevented||null==o||o())},h);return function(e,t=(null==globalThis?void 0:globalThis.document)){const n=Oh(e);Ve.useEffect(()=>{const e=e=>{"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[n,t])}(e=>{x===c.layers.size-1&&(null==r||r(e),!e.defaultPrevented&&o&&(e.preventDefault(),o()))},h),Ve.useEffect(()=>{if(d)return n&&(0===c.layersWithOutsidePointerEventsDisabled.size&&(Rh=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),zh(),()=>{n&&1===c.layersWithOutsidePointerEventsDisabled.size&&(h.body.style.pointerEvents=Rh)}},[d,h,n,c]),Ve.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),zh())},[d,c]),Ve.useEffect(()=>{const e=()=>p({});return document.addEventListener(Ih,e),()=>document.removeEventListener(Ih,e)},[]),Qe.jsx(Th.div,{...l,ref:m,style:{pointerEvents:y?b?"auto":"none":void 0,...e.style},onFocusCapture:xh(e.onFocusCapture,j.onFocusCapture),onBlurCapture:xh(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:xh(e.onPointerDownCapture,w.onPointerDownCapture)})});Fh.displayName="DismissableLayer";var Uh=Ve.forwardRef((e,t)=>{const n=Ve.useContext(Bh),r=Ve.useRef(null),i=wh(t,r);return Ve.useEffect(()=>{const e=r.current;if(e)return n.branches.add(e),()=>{n.branches.delete(e)}},[n.branches]),Qe.jsx(Th.div,{...e,ref:i})});function zh(){const e=new CustomEvent(Ih);document.dispatchEvent(e)}function Hh(e,t,n,{discrete:r}){const i=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?Ph(i,a):i.dispatchEvent(a)}Uh.displayName="DismissableLayerBranch";var Vh=Fh,Gh=Uh,Wh=(null==globalThis?void 0:globalThis.document)?Ve.useLayoutEffect:()=>{},Kh=Ve.forwardRef((e,t)=>{var n;const{container:r,...i}=e,[a,s]=Ve.useState(!1);Wh(()=>s(!0),[]);const o=r||a&&(null==(n=null==globalThis?void 0:globalThis.document)?void 0:n.body);return o?sh.createPortal(Qe.jsx(Th.div,{...i,ref:t}),o):null});Kh.displayName="Portal";var qh=e=>{const{present:t,children:n}=e,r=function(e){const[t,n]=Ve.useState(),r=Ve.useRef(null),i=Ve.useRef(e),a=Ve.useRef("none"),s=e?"mounted":"unmounted",[o,l]=function(e,t){return Ve.useReducer((e,n)=>t[e][n]??e,e)}(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Ve.useEffect(()=>{const e=Xh(r.current);a.current="mounted"===o?e:"none"},[o]),Wh(()=>{const t=r.current,n=i.current;if(n!==e){const r=a.current,s=Xh(t);if(e)l("MOUNT");else if("none"===s||"none"===(null==t?void 0:t.display))l("UNMOUNT");else{l(n&&r!==s?"ANIMATION_OUT":"UNMOUNT")}i.current=e}},[e,l]),Wh(()=>{if(t){let e;const n=t.ownerDocument.defaultView??window,s=a=>{const s=Xh(r.current).includes(CSS.escape(a.animationName));if(a.target===t&&s&&(l("ANIMATION_END"),!i.current)){const r=t.style.animationFillMode;t.style.animationFillMode="forwards",e=n.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=r)})}},o=e=>{e.target===t&&(a.current=Xh(r.current))};return t.addEventListener("animationstart",o),t.addEventListener("animationcancel",s),t.addEventListener("animationend",s),()=>{n.clearTimeout(e),t.removeEventListener("animationstart",o),t.removeEventListener("animationcancel",s),t.removeEventListener("animationend",s)}}l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:Ve.useCallback(e=>{r.current=e?getComputedStyle(e):null,n(e)},[])}}(t),i="function"==typeof n?n({present:r.isPresent}):Ve.Children.only(n),a=wh(r.ref,function(e){var t,n;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=r&&"isReactWarning"in r&&r.isReactWarning;if(i)return e.ref;if(r=null==(n=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:n.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(i));return"function"==typeof n||r.isPresent?Ve.cloneElement(i,{ref:a}):null};function Xh(e){return(null==e?void 0:e.animationName)||"none"}qh.displayName="Presence";var $h=We[" useInsertionEffect ".trim().toString()]||Wh;function Yh({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[i,a,s]=function({defaultProp:e,onChange:t}){const[n,r]=Ve.useState(e),i=Ve.useRef(n),a=Ve.useRef(t);return $h(()=>{a.current=t},[t]),Ve.useEffect(()=>{var e;i.current!==n&&(null==(e=a.current)||e.call(a,n),i.current=n)},[n,i]),[n,r,a]}({defaultProp:t,onChange:n}),o=void 0!==e,l=o?e:i;{const t=Ve.useRef(void 0!==e);Ve.useEffect(()=>{const e=t.current;if(e!==o){}t.current=o},[o,r])}const c=Ve.useCallback(t=>{var n;if(o){const r=function(e){return"function"==typeof e}(t)?t(e):t;r!==e&&(null==(n=s.current)||n.call(s,r))}else a(t)},[o,e,a,s]);return[l,c]}var Jh=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Zh=Ve.forwardRef((e,t)=>Qe.jsx(Th.span,{...e,ref:t,style:{...Jh,...e.style}}));Zh.displayName="VisuallyHidden";var Qh=Zh,ep="ToastProvider",[tp,np,rp]=kh("Toast"),[ip]=jh("Toast",[rp]),[ap,sp]=ip(ep),op=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:s}=e,[o,l]=Ve.useState(null),[c,d]=Ve.useState(0),u=Ve.useRef(!1),h=Ve.useRef(!1);return n.trim(),Qe.jsx(tp.Provider,{scope:t,children:Qe.jsx(ap,{scope:t,label:n,duration:r,swipeDirection:i,swipeThreshold:a,toastCount:c,viewport:o,onViewportChange:l,onToastAdd:Ve.useCallback(()=>d(e=>e+1),[]),onToastRemove:Ve.useCallback(()=>d(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:h,children:s})})};op.displayName=ep;var lp="ToastViewport",cp=["F8"],dp="toast.viewportPause",up="toast.viewportResume",hp=Ve.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=cp,label:i="Notifications ({hotkey})",...a}=e,s=sp(lp,n),o=np(n),l=Ve.useRef(null),c=Ve.useRef(null),d=Ve.useRef(null),u=Ve.useRef(null),h=wh(t,u,s.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=s.toastCount>0;Ve.useEffect(()=>{const e=e=>{var t;0!==r.length&&r.every(t=>e[t]||e.code===t)&&(null==(t=u.current)||t.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[r]),Ve.useEffect(()=>{const e=l.current,t=u.current;if(m&&e&&t){const n=()=>{if(!s.isClosePausedRef.current){const e=new CustomEvent(dp);t.dispatchEvent(e),s.isClosePausedRef.current=!0}},r=()=>{if(s.isClosePausedRef.current){const e=new CustomEvent(up);t.dispatchEvent(e),s.isClosePausedRef.current=!1}},i=t=>{!e.contains(t.relatedTarget)&&r()},a=()=>{e.contains(document.activeElement)||r()};return e.addEventListener("focusin",n),e.addEventListener("focusout",i),e.addEventListener("pointermove",n),e.addEventListener("pointerleave",a),window.addEventListener("blur",n),window.addEventListener("focus",r),()=>{e.removeEventListener("focusin",n),e.removeEventListener("focusout",i),e.removeEventListener("pointermove",n),e.removeEventListener("pointerleave",a),window.removeEventListener("blur",n),window.removeEventListener("focus",r)}}},[m,s.isClosePausedRef]);const f=Ve.useCallback(({tabbingDirection:e})=>{const t=o().map(t=>{const n=t.ref.current,r=[n,...kp(n)];return"forwards"===e?r:r.reverse()});return("forwards"===e?t.reverse():t).flat()},[o]);return Ve.useEffect(()=>{const e=u.current;if(e){const t=t=>{var n,r,i;const a=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!a){const a=document.activeElement,s=t.shiftKey;if(t.target===e&&s)return void(null==(n=c.current)||n.focus());const o=f({tabbingDirection:s?"backwards":"forwards"}),l=o.findIndex(e=>e===a);Tp(o.slice(l+1))?t.preventDefault():s?null==(r=c.current)||r.focus():null==(i=d.current)||i.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[o,f]),Qe.jsxs(Gh,{ref:l,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&Qe.jsx(mp,{ref:c,onFocusFromOutsideViewport:()=>{Tp(f({tabbingDirection:"forwards"}))}}),Qe.jsx(tp.Slot,{scope:n,children:Qe.jsx(Th.ol,{tabIndex:-1,...a,ref:h})}),m&&Qe.jsx(mp,{ref:d,onFocusFromOutsideViewport:()=>{Tp(f({tabbingDirection:"backwards"}))}})]})});hp.displayName=lp;var pp="ToastFocusProxy",mp=Ve.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=e,a=sp(pp,n);return Qe.jsx(Zh,{tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:e=>{var t;const n=e.relatedTarget;!(null==(t=a.viewport)?void 0:t.contains(n))&&r()}})});mp.displayName=pp;var fp="Toast",gp=Ve.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:a,...s}=e,[o,l]=Yh({prop:r,defaultProp:i??!0,onChange:a,caller:fp});return Qe.jsx(qh,{present:n||o,children:Qe.jsx(yp,{open:o,...s,ref:t,onClose:()=>l(!1),onPause:Oh(e.onPause),onResume:Oh(e.onResume),onSwipeStart:xh(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:xh(e.onSwipeMove,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${n}px`)}),onSwipeCancel:xh(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:xh(e.onSwipeEnd,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${n}px`),l(!1)})})})});gp.displayName=fp;var[vp,xp]=ip(fp,{onClose(){}}),yp=Ve.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:a,onClose:s,onEscapeKeyDown:o,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:u,onSwipeCancel:h,onSwipeEnd:p,...m}=e,f=sp(fp,n),[g,v]=Ve.useState(null),x=wh(t,e=>v(e)),y=Ve.useRef(null),b=Ve.useRef(null),w=i||f.duration,j=Ve.useRef(0),N=Ve.useRef(w),_=Ve.useRef(0),{onToastAdd:S,onToastRemove:C}=f,A=Oh(()=>{var e;(null==g?void 0:g.contains(document.activeElement))&&(null==(e=f.viewport)||e.focus()),s()}),M=Ve.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(_.current),j.current=(new Date).getTime(),_.current=window.setTimeout(A,e))},[A]);Ve.useEffect(()=>{const e=f.viewport;if(e){const t=()=>{M(N.current),null==c||c()},n=()=>{const e=(new Date).getTime()-j.current;N.current=N.current-e,window.clearTimeout(_.current),null==l||l()};return e.addEventListener(dp,n),e.addEventListener(up,t),()=>{e.removeEventListener(dp,n),e.removeEventListener(up,t)}}},[f.viewport,w,l,c,M]),Ve.useEffect(()=>{a&&!f.isClosePausedRef.current&&M(w)},[a,w,f.isClosePausedRef,M]),Ve.useEffect(()=>(S(),()=>C()),[S,C]);const E=Ve.useMemo(()=>g?Ap(g):null,[g]);return f.viewport?Qe.jsxs(Qe.Fragment,{children:[E&&Qe.jsx(bp,{__scopeToast:n,role:"status","aria-live":"foreground"===r?"assertive":"polite",children:E}),Qe.jsx(vp,{scope:n,onClose:A,children:ah.createPortal(Qe.jsx(tp.ItemSlot,{scope:n,children:Qe.jsx(Vh,{asChild:!0,onEscapeKeyDown:xh(o,()=>{f.isFocusedToastEscapeKeyDownRef.current||A(),f.isFocusedToastEscapeKeyDownRef.current=!1}),children:Qe.jsx(Th.li,{tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":f.swipeDirection,...m,ref:x,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:xh(e.onKeyDown,e=>{"Escape"===e.key&&(null==o||o(e.nativeEvent),e.nativeEvent.defaultPrevented||(f.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:xh(e.onPointerDown,e=>{0===e.button&&(y.current={x:e.clientX,y:e.clientY})}),onPointerMove:xh(e.onPointerMove,e=>{if(!y.current)return;const t=e.clientX-y.current.x,n=e.clientY-y.current.y,r=Boolean(b.current),i=["left","right"].includes(f.swipeDirection),a=["left","up"].includes(f.swipeDirection)?Math.min:Math.max,s=i?a(0,t):0,o=i?0:a(0,n),l="touch"===e.pointerType?10:2,c={x:s,y:o},h={originalEvent:e,delta:c};r?(b.current=c,Mp("toast.swipeMove",u,h,{discrete:!1})):Ep(c,f.swipeDirection,l)?(b.current=c,Mp("toast.swipeStart",d,h,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(n)>l)&&(y.current=null)}),onPointerUp:xh(e.onPointerUp,e=>{const t=b.current,n=e.target;if(n.hasPointerCapture(e.pointerId)&&n.releasePointerCapture(e.pointerId),b.current=null,y.current=null,t){const n=e.currentTarget,r={originalEvent:e,delta:t};Ep(t,f.swipeDirection,f.swipeThreshold)?Mp("toast.swipeEnd",p,r,{discrete:!0}):Mp("toast.swipeCancel",h,r,{discrete:!0}),n.addEventListener("click",e=>e.preventDefault(),{once:!0})}})})})}),f.viewport)})]}):null}),bp=e=>{const{__scopeToast:t,children:n,...r}=e,i=sp(fp,t),[a,s]=Ve.useState(!1),[o,l]=Ve.useState(!1);return function(e=()=>{}){const t=Oh(e);Wh(()=>{let e=0,n=0;return e=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(n)}},[t])}(()=>s(!0)),Ve.useEffect(()=>{const e=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(e)},[]),o?null:Qe.jsx(Kh,{asChild:!0,children:Qe.jsx(Zh,{...r,children:a&&Qe.jsxs(Qe.Fragment,{children:[i.label," ",n]})})})},wp=Ve.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return Qe.jsx(Th.div,{...r,ref:t})});wp.displayName="ToastTitle";var jp=Ve.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return Qe.jsx(Th.div,{...r,ref:t})});jp.displayName="ToastDescription";var Np=Ve.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?Qe.jsx(Cp,{altText:n,asChild:!0,children:Qe.jsx(Sp,{...r,ref:t})}):null});Np.displayName="ToastAction";var _p="ToastClose",Sp=Ve.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,i=xp(_p,n);return Qe.jsx(Cp,{asChild:!0,children:Qe.jsx(Th.button,{type:"button",...r,ref:t,onClick:xh(e.onClick,i.onClose)})})});Sp.displayName=_p;var Cp=Ve.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...i}=e;return Qe.jsx(Th.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:t})});function Ap(e){const t=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const n=e.ariaHidden||e.hidden||"none"===e.style.display,r=""===e.dataset.radixToastAnnounceExclude;if(!n)if(r){const n=e.dataset.radixToastAnnounceAlt;n&&t.push(n)}else t.push(...Ap(e))}}),t}function Mp(e,t,n,{discrete:r}){const i=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?Ph(i,a):i.dispatchEvent(a)}var Ep=(e,t,n=0)=>{const r=Math.abs(e.x),i=Math.abs(e.y),a=r>i;return"left"===t||"right"===t?a&&r>n:!a&&i>n};function kp(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Tp(e){const t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}var Pp=op,Op=hp,Rp=gp,Ip=wp,Dp=jp,Lp=Np,Bp=Sp;function Fp(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Fp(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Up(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Fp(e))&&(r&&(r+=" "),r+=t);return r}const zp=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,Hp=Up,Vp=(e,t)=>n=>{var r;if(null==(null==t?void 0:t.variants))return Hp(e,null==n?void 0:n.class,null==n?void 0:n.className);const{variants:i,defaultVariants:a}=t,s=Object.keys(i).map(e=>{const t=null==n?void 0:n[e],r=null==a?void 0:a[e];if(null===t)return null;const s=zp(t)||zp(r);return i[e][s]}),o=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{}),l=null==t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:n,className:r,...i}=t;return Object.entries(i).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...a,...o}[t]):{...a,...o}[t]===n})?[...e,n,r]:e},[]);return Hp(e,s,l,null==n?void 0:n.class,null==n?void 0:n.className)},Gp=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim();var Wp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Kp=Ve.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...o},l)=>Ve.createElement("svg",{ref:l,...Wp,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:Gp("lucide",i),...o},[...s.map(([e,t])=>Ve.createElement(e,t)),...Array.isArray(a)?a:[a]])),qp=(e,t)=>{const n=Ve.forwardRef(({className:n,...r},i)=>{return Ve.createElement(Kp,{ref:i,iconNode:t,className:Gp(`lucide-${a=e,a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,n),...r});var a});return n.displayName=`${e}`,n},Xp=qp("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),$p=qp("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),Yp=qp("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]),Jp=qp("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]),Zp=qp("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Qp=qp("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),em=qp("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),tm=qp("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),nm=qp("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),rm=qp("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),im=qp("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),am=qp("BookmarkPlus",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}],["line",{x1:"12",x2:"12",y1:"7",y2:"13",key:"1cppfj"}],["line",{x1:"15",x2:"9",y1:"10",y2:"10",key:"1gty7f"}]]),sm=qp("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),om=qp("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),lm=qp("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),cm=qp("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),dm=qp("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]),um=qp("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),hm=qp("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),pm=qp("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),mm=qp("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),fm=qp("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]),gm=qp("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),vm=qp("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),xm=qp("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),ym=qp("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),bm=qp("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),wm=qp("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]),jm=qp("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Nm=qp("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),_m=qp("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Sm=qp("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Cm=qp("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),Am=qp("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Mm=qp("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Em=qp("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),km=qp("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),Tm=qp("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]),Pm=qp("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]),Om=qp("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Rm=qp("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Im=qp("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),Dm=qp("Diamond",[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]]),Lm=qp("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Bm=qp("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Fm=qp("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),Um=qp("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),zm=qp("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),Hm=qp("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Vm=qp("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Gm=qp("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),Wm=qp("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),Km=qp("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),qm=qp("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),Xm=qp("GalleryHorizontal",[["path",{d:"M2 3v18",key:"pzttux"}],["rect",{width:"12",height:"18",x:"6",y:"3",rx:"2",key:"btr8bg"}],["path",{d:"M22 3v18",key:"6jf3v"}]]),$m=qp("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]),Ym=qp("Gamepad",[["line",{x1:"6",x2:"10",y1:"12",y2:"12",key:"161bw2"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"15",x2:"15.01",y1:"13",y2:"13",key:"dqpgro"}],["line",{x1:"18",x2:"18.01",y1:"11",y2:"11",key:"meh2c"}],["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]]),Jm=qp("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]),Zm=qp("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),Qm=qp("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]),ef=qp("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),tf=qp("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),nf=qp("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),rf=qp("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]),af=qp("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"4oyue0"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]),sf=qp("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),of=qp("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),lf=qp("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),cf=qp("ImagePlus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]),df=qp("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),uf=qp("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),hf=qp("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),pf=qp("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]),mf=qp("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),ff=qp("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]),gf=qp("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),vf=qp("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),xf=qp("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]),yf=qp("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),bf=qp("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),wf=qp("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),jf=qp("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Nf=qp("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),_f=qp("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]),Sf=qp("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Cf=qp("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),Af=qp("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Mf=qp("MessagesSquare",[["path",{d:"M14 9a2 2 0 0 1-2 2H6l-4 4V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2z",key:"p1xzt8"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1",key:"1cx29u"}]]),Ef=qp("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),kf=qp("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),Tf=qp("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Pf=qp("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),Of=qp("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Rf=qp("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),If=qp("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),Df=qp("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]),Lf=qp("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),Bf=qp("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]),Ff=qp("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),Uf=qp("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]),zf=qp("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),Hf=qp("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]),Vf=qp("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Gf=qp("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),Wf=qp("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Kf=qp("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),qf=qp("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Xf=qp("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),$f=qp("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),Yf=qp("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]),Jf=qp("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Zf=qp("SearchCheck",[["path",{d:"m8 11 2 2 4-4",key:"1sed1v"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Qf=qp("SearchX",[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),eg=qp("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),tg=qp("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),ng=qp("SeparatorHorizontal",[["line",{x1:"3",x2:"21",y1:"12",y2:"12",key:"10d38w"}],["polyline",{points:"8 8 12 4 16 8",key:"zo8t4w"}],["polyline",{points:"16 16 12 20 8 16",key:"1oyrid"}]]),rg=qp("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ig=qp("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),ag=qp("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),sg=qp("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),og=qp("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]),lg=qp("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),cg=qp("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),dg=qp("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),ug=qp("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),hg=qp("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),pg=qp("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),mg=qp("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),fg=qp("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),gg=qp("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]),vg=qp("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),xg=qp("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),yg=qp("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),bg=qp("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]),wg=qp("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]),jg=qp("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),Ng=qp("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),_g=qp("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Sg=qp("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Cg=qp("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Ag=qp("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),Mg=qp("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),Eg=qp("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),kg=qp("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Tg=qp("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Pg=qp("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Og=qp("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Rg=qp("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Ig=qp("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),Dg=qp("WalletMinimal",[["path",{d:"M17 14h.01",key:"7oqj8z"}],["path",{d:"M7 7h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14",key:"u1rqew"}]]),Lg=qp("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),Bg=qp("Watch",[["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["polyline",{points:"12 10 12 12 13 13",key:"19dquz"}],["path",{d:"m16.13 7.66-.81-4.05a2 2 0 0 0-2-1.61h-2.68a2 2 0 0 0-2 1.61l-.78 4.05",key:"18k57s"}],["path",{d:"m7.88 16.36.8 4a2 2 0 0 0 2 1.61h2.72a2 2 0 0 0 2-1.61l.81-4.05",key:"16ny36"}]]),Fg=qp("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ug=qp("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),zg=qp("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Hg=e=>{const t=Kg(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{const n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),Vg(n,t)||Wg(e)},getConflictingClassGroupIds:(e,t)=>{const i=n[e]||[];return t&&r[e]?[...i,...r[e]]:i}}},Vg=(e,t)=>{var n;if(0===e.length)return t.classGroupId;const r=e[0],i=t.nextPart.get(r),a=i?Vg(e.slice(1),i):void 0;if(a)return a;if(0===t.validators.length)return;const s=e.join("-");return null==(n=t.validators.find(({validator:e})=>e(s)))?void 0:n.classGroupId},Gg=/^\[(.+)\]$/,Wg=e=>{if(Gg.test(e)){const t=Gg.exec(e)[1],n=null==t?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Kg=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return Yg(Object.entries(e.classGroups),n).forEach(([e,n])=>{qg(n,r,e,t)}),r},qg=(e,t,n,r)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:Xg(t,e)).classGroupId=n)}if("function"==typeof e)return $g(e)?void qg(e(r),t,n,r):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach(([e,i])=>{qg(i,Xg(t,e),n,r)})})},Xg=(e,t)=>{let n=e;return t.split("-").forEach(e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)}),n},$g=e=>e.isThemeGetter,Yg=(e,t)=>t?e.map(([e,n])=>[e,n.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,n])=>[t+e,n])):e)]):e,Jg=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const i=(i,a)=>{n.set(i,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(i(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):i(e,t)}}},Zg=e=>{const{separator:t,experimentalParseClassName:n}=e,r=1===t.length,i=t[0],a=t.length,s=e=>{const n=[];let s,o=0,l=0;for(let u=0;u<e.length;u++){let c=e[u];if(0===o){if(c===i&&(r||e.slice(u,u+a)===t)){n.push(e.slice(l,u)),l=u+a;continue}if("/"===c){s=u;continue}}"["===c?o++:"]"===c&&o--}const c=0===n.length?e:e.substring(l),d=c.startsWith("!");return{modifiers:n,hasImportantModifier:d,baseClassName:d?c.substring(1):c,maybePostfixModifierPosition:s&&s>l?s-l:void 0}};return n?e=>n({className:e,parseClassName:s}):s},Qg=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(e=>{"["===e[0]?(t.push(...n.sort(),e),n=[]):n.push(e)}),t.push(...n.sort()),t},ev=/\s+/;function tv(){let e,t,n=0,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=nv(e))&&(r&&(r+=" "),r+=t);return r}const nv=e=>{if("string"==typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=nv(e[r]))&&(n&&(n+=" "),n+=t);return n};function rv(e,...t){let n,r,i,a=function(o){const l=t.reduce((e,t)=>t(e),e());return n=(e=>({cache:Jg(e.cacheSize),parseClassName:Zg(e),...Hg(e)}))(l),r=n.cache.get,i=n.cache.set,a=s,s(o)};function s(e){const t=r(e);if(t)return t;const a=((e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=t,a=[],s=e.trim().split(ev);let o="";for(let l=s.length-1;l>=0;l-=1){const e=s[l],{modifiers:t,hasImportantModifier:c,baseClassName:d,maybePostfixModifierPosition:u}=n(e);let h=Boolean(u),p=r(h?d.substring(0,u):d);if(!p){if(!h){o=e+(o.length>0?" "+o:o);continue}if(p=r(d),!p){o=e+(o.length>0?" "+o:o);continue}h=!1}const m=Qg(t).join(":"),f=c?m+"!":m,g=f+p;if(a.includes(g))continue;a.push(g);const v=i(p,h);for(let n=0;n<v.length;++n){const e=v[n];a.push(f+e)}o=e+(o.length>0?" "+o:o)}return o})(e,n);return i(e,a),a}return function(){return a(tv.apply(null,arguments))}}const iv=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},av=/^\[(?:([a-z-]+):)?(.+)\]$/i,sv=/^\d+\/\d+$/,ov=new Set(["px","full","screen"]),lv=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,cv=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,dv=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,uv=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,hv=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,pv=e=>fv(e)||ov.has(e)||sv.test(e),mv=e=>Mv(e,"length",Ev),fv=e=>Boolean(e)&&!Number.isNaN(Number(e)),gv=e=>Mv(e,"number",fv),vv=e=>Boolean(e)&&Number.isInteger(Number(e)),xv=e=>e.endsWith("%")&&fv(e.slice(0,-1)),yv=e=>av.test(e),bv=e=>lv.test(e),wv=new Set(["length","size","percentage"]),jv=e=>Mv(e,wv,kv),Nv=e=>Mv(e,"position",kv),_v=new Set(["image","url"]),Sv=e=>Mv(e,_v,Pv),Cv=e=>Mv(e,"",Tv),Av=()=>!0,Mv=(e,t,n)=>{const r=av.exec(e);return!!r&&(r[1]?"string"==typeof t?r[1]===t:t.has(r[1]):n(r[2]))},Ev=e=>cv.test(e)&&!dv.test(e),kv=()=>!1,Tv=e=>uv.test(e),Pv=e=>hv.test(e),Ov=rv(()=>{const e=iv("colors"),t=iv("spacing"),n=iv("blur"),r=iv("brightness"),i=iv("borderColor"),a=iv("borderRadius"),s=iv("borderSpacing"),o=iv("borderWidth"),l=iv("contrast"),c=iv("grayscale"),d=iv("hueRotate"),u=iv("invert"),h=iv("gap"),p=iv("gradientColorStops"),m=iv("gradientColorStopPositions"),f=iv("inset"),g=iv("margin"),v=iv("opacity"),x=iv("padding"),y=iv("saturate"),b=iv("scale"),w=iv("sepia"),j=iv("skew"),N=iv("space"),_=iv("translate"),S=()=>["auto",yv,t],C=()=>[yv,t],A=()=>["",pv,mv],M=()=>["auto",fv,yv],E=()=>["","0",yv],k=()=>[fv,yv];return{cacheSize:500,separator:":",theme:{colors:[Av],spacing:[pv,mv],blur:["none","",bv,yv],brightness:k(),borderColor:[e],borderRadius:["none","","full",bv,yv],borderSpacing:C(),borderWidth:A(),contrast:k(),grayscale:E(),hueRotate:k(),invert:E(),gap:C(),gradientColorStops:[e],gradientColorStopPositions:[xv,mv],inset:S(),margin:S(),opacity:k(),padding:C(),saturate:k(),scale:k(),sepia:E(),skew:k(),space:C(),translate:C()},classGroups:{aspect:[{aspect:["auto","square","video",yv]}],container:["container"],columns:[{columns:[bv]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",yv]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",vv,yv]}],basis:[{basis:S()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",yv]}],grow:[{grow:E()}],shrink:[{shrink:E()}],order:[{order:["first","last","none",vv,yv]}],"grid-cols":[{"grid-cols":[Av]}],"col-start-end":[{col:["auto",{span:["full",vv,yv]},yv]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[Av]}],"row-start-end":[{row:["auto",{span:[vv,yv]},yv]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",yv]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",yv]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",yv,t]}],"min-w":[{"min-w":[yv,t,"min","max","fit"]}],"max-w":[{"max-w":[yv,t,"none","full","min","max","fit","prose",{screen:[bv]},bv]}],h:[{h:[yv,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[yv,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[yv,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[yv,t,"auto","min","max","fit"]}],"font-size":[{text:["base",bv,mv]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",gv]}],"font-family":[{font:[Av]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",yv]}],"line-clamp":[{"line-clamp":["none",fv,gv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",pv,yv]}],"list-image":[{"list-image":["none",yv]}],"list-style-type":[{list:["none","disc","decimal",yv]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",pv,mv]}],"underline-offset":[{"underline-offset":["auto",pv,yv]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",yv]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",yv]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Nv]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",jv]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Sv]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[pv,yv]}],"outline-w":[{outline:[pv,mv]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:A()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[pv,mv]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",bv,Cv]}],"shadow-color":[{shadow:[Av]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",bv,yv]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[y]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",yv]}],duration:[{duration:k()}],ease:[{ease:["linear","in","out","in-out",yv]}],delay:[{delay:k()}],animate:[{animate:["none","spin","ping","pulse","bounce",yv]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[vv,yv]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",yv]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",yv]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",yv]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[pv,mv,gv]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function Rv(...e){return Ov(Up(e))}const Iv=Pp,Dv=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(Op,{ref:n,className:Rv("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Dv.displayName=Op.displayName;const Lv=Vp("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground",success:"border-green-500 bg-green-50 text-green-900"}},defaultVariants:{variant:"default"}}),Bv=Ve.forwardRef(({className:e,variant:t,...n},r)=>Qe.jsx(Rp,{ref:r,className:Rv(Lv({variant:t}),e),...n}));Bv.displayName=Rp.displayName;Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(Lp,{ref:n,className:Rv("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t})).displayName=Lp.displayName;const Fv=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(Bp,{ref:n,className:Rv("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:Qe.jsx(Fg,{className:"h-4 w-4"})}));Fv.displayName=Bp.displayName;const Uv=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(Ip,{ref:n,className:Rv("text-sm font-semibold",e),...t}));Uv.displayName=Ip.displayName;const zv=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(Dp,{ref:n,className:Rv("text-sm opacity-90",e),...t}));function Hv(){const{toasts:e}=vh();return Qe.jsxs(Iv,{children:[e.map(function({id:e,title:t,description:n,action:r,...i}){return Qe.jsxs(Bv,{...i,children:[Qe.jsxs("div",{className:"grid gap-1",children:[t&&Qe.jsx(Uv,{children:t}),n&&Qe.jsx(zv,{children:n})]}),r,Qe.jsx(Fv,{})]},e)}),Qe.jsx(Dv,{})]})}zv.displayName=Dp.displayName;var Vv=["light","dark"],Gv="(prefers-color-scheme: dark)",Wv="undefined"==typeof window,Kv=Ve.createContext(void 0),qv={setTheme:e=>{},themes:[]},Xv=()=>{var e;return null!=(e=Ve.useContext(Kv))?e:qv},$v=e=>Ve.useContext(Kv)?e.children:Ve.createElement(Jv,{...e}),Yv=["light","dark"],Jv=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:i="theme",themes:a=Yv,defaultTheme:s=(n?"system":"light"),attribute:o="data-theme",value:l,children:c,nonce:d})=>{let[u,h]=Ve.useState(()=>Qv(i,s)),[p,m]=Ve.useState(()=>Qv(i)),f=l?Object.values(l):a,g=Ve.useCallback(e=>{let i=e;if(!i)return;"system"===e&&n&&(i=tx());let a=l?l[i]:i,c=t?ex():null,d=document.documentElement;if("class"===o?(d.classList.remove(...f),a&&d.classList.add(a)):a?d.setAttribute(o,a):d.removeAttribute(o),r){let e=Vv.includes(s)?s:null,t=Vv.includes(i)?i:e;d.style.colorScheme=t}null==c||c()},[]),v=Ve.useCallback(e=>{let t="function"==typeof e?e(e):e;h(t);try{localStorage.setItem(i,t)}catch(n){}},[e]),x=Ve.useCallback(t=>{let r=tx(t);m(r),"system"===u&&n&&!e&&g("system")},[u,e]);Ve.useEffect(()=>{let e=window.matchMedia(Gv);return e.addListener(x),x(e),()=>e.removeListener(x)},[x]),Ve.useEffect(()=>{let e=e=>{if(e.key!==i)return;let t=e.newValue||s;v(t)};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[v]),Ve.useEffect(()=>{g(null!=e?e:u)},[e,u]);let y=Ve.useMemo(()=>({theme:u,setTheme:v,forcedTheme:e,resolvedTheme:"system"===u?p:u,themes:n?[...a,"system"]:a,systemTheme:n?p:void 0}),[u,v,e,p,n,a]);return Ve.createElement(Kv.Provider,{value:y},Ve.createElement(Zv,{forcedTheme:e,disableTransitionOnChange:t,enableSystem:n,enableColorScheme:r,storageKey:i,themes:a,defaultTheme:s,attribute:o,value:l,children:c,attrs:f,nonce:d}),c)},Zv=Ve.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:a,value:s,attrs:o,nonce:l})=>{let c="system"===a,d="class"===n?`var d=document.documentElement,c=d.classList;c.remove(${o.map(e=>`'${e}'`).join(",")});`:`var d=document.documentElement,n='${n}',s='setAttribute';`,u=i?Vv.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(e,t=!1,r=!0)=>{let a=s?s[e]:e,o=t?e+"|| ''":`'${a}'`,l="";return i&&r&&!t&&Vv.includes(e)&&(l+=`d.style.colorScheme = '${e}';`),"class"===n?l+=t||a?`c.add(${o})`:"null":a&&(l+=`d[s](n,${o})`),l},p=e?`!function(){${d}${h(e)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${c})){var t='${Gv}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${s?`var x=${JSON.stringify(s)};`:""}${h(s?"x[e]":"e",!0)}}${c?"":"else{"+h(a,!1,!1)+"}"}${u}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${s?`var x=${JSON.stringify(s)};`:""}${h(s?"x[e]":"e",!0)}}else{${h(a,!1,!1)};}${u}}catch(t){}}();`;return Ve.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:p}})}),Qv=(e,t)=>{if(Wv)return;let n;try{n=localStorage.getItem(e)||void 0}catch(r){}return n||t},ex=()=>{let e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},tx=e=>(e||(e=window.matchMedia(Gv)),e.matches?"dark":"light"),nx=Array(12).fill(0),rx=({visible:e,className:t})=>Ge.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Ge.createElement("div",{className:"sonner-spinner"},nx.map((e,t)=>Ge.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),ix=Ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ge.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),ax=Ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ge.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),sx=Ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ge.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ox=Ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ge.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),lx=Ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ge.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ge.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),cx=1,dx=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,i="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:cx++,a=this.toasts.find(e=>e.id===i),s=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),a?this.toasts=this.toasts.map(t=>t.id===i?(this.publish({...t,...e,id:i,title:n}),{...t,...e,id:i,dismissible:s,title:n}):t):this.addToast({title:n,...r,dismissible:s,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;void 0!==t.loading&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));let r,i=e instanceof Promise?e:e(),a=void 0!==n,s=i.then(async e=>{if(r=["resolve",e],Ge.isValidElement(e))a=!1,this.create({id:n,type:"default",message:e});else if(ux(e)&&!e.ok){a=!1;let r="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,i="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description;this.create({id:n,type:"error",message:r,description:i})}else if(void 0!==t.success){a=!1;let r="function"==typeof t.success?await t.success(e):t.success,i="function"==typeof t.description?await t.description(e):t.description;this.create({id:n,type:"success",message:r,description:i})}}).catch(async e=>{if(r=["reject",e],void 0!==t.error){a=!1;let r="function"==typeof t.error?await t.error(e):t.error,i="function"==typeof t.description?await t.description(e):t.description;this.create({id:n,type:"error",message:r,description:i})}}).finally(()=>{var e;a&&(this.dismiss(n),n=void 0),null==(e=t.finally)||e.call(t)}),o=()=>new Promise((e,t)=>s.then(()=>"reject"===r[0]?t(r[1]):e(r[1])).catch(t));return"string"!=typeof n&&"number"!=typeof n?{unwrap:o}:Object.assign(n,{unwrap:o})},this.custom=(e,t)=>{let n=(null==t?void 0:t.id)||cx++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ux=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,hx=(e,t)=>{let n=(null==t?void 0:t.id)||cx++;return dx.addToast({title:e,...t,id:n}),n},px=Object.assign(hx,{success:dx.success,info:dx.info,warning:dx.warning,error:dx.error,custom:dx.custom,message:dx.message,promise:dx.promise,dismiss:dx.dismiss,loading:dx.loading},{getHistory:()=>dx.toasts,getToasts:()=>dx.getActiveToasts()});function mx(e){return void 0!==e.label}!function(e,{insertAt:t}={}){if("undefined"==typeof document)return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===t&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}(':where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}\n');var fx=3,gx=14;function vx(...e){return e.filter(Boolean).join(" ")}var xx=e=>{var t,n,r,i,a,s,o,l,c,d,u;let{invert:h,toast:p,unstyled:m,interacting:f,setHeights:g,visibleToasts:v,heights:x,index:y,toasts:b,expanded:w,removeToast:j,defaultRichColors:N,closeButton:_,style:S,cancelButtonStyle:C,actionButtonStyle:A,className:M="",descriptionClassName:E="",duration:k,position:T,gap:P,loadingIcon:O,expandByDefault:R,classNames:I,icons:D,closeButtonAriaLabel:L="Close toast",pauseWhenPageIsHidden:B}=e,[F,U]=Ge.useState(null),[z,H]=Ge.useState(null),[V,G]=Ge.useState(!1),[W,K]=Ge.useState(!1),[q,X]=Ge.useState(!1),[$,Y]=Ge.useState(!1),[J,Z]=Ge.useState(!1),[Q,ee]=Ge.useState(0),[te,ne]=Ge.useState(0),re=Ge.useRef(p.duration||k||4e3),ie=Ge.useRef(null),ae=Ge.useRef(null),se=0===y,oe=y+1<=v,le=p.type,ce=!1!==p.dismissible,de=p.className||"",ue=p.descriptionClassName||"",he=Ge.useMemo(()=>x.findIndex(e=>e.toastId===p.id)||0,[x,p.id]),pe=Ge.useMemo(()=>{var e;return null!=(e=p.closeButton)?e:_},[p.closeButton,_]),me=Ge.useMemo(()=>p.duration||k||4e3,[p.duration,k]),fe=Ge.useRef(0),ge=Ge.useRef(0),ve=Ge.useRef(0),xe=Ge.useRef(null),[ye,be]=T.split("-"),we=Ge.useMemo(()=>x.reduce((e,t,n)=>n>=he?e:e+t.height,0),[x,he]),je=(()=>{let[e,t]=Ge.useState(document.hidden);return Ge.useEffect(()=>{let e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e})(),Ne=p.invert||h,_e="loading"===le;ge.current=Ge.useMemo(()=>he*P+we,[he,we]),Ge.useEffect(()=>{re.current=me},[me]),Ge.useEffect(()=>{G(!0)},[]),Ge.useEffect(()=>{let e=ae.current;if(e){let t=e.getBoundingClientRect().height;return ne(t),g(e=>[{toastId:p.id,height:t,position:p.position},...e]),()=>g(e=>e.filter(e=>e.toastId!==p.id))}},[g,p.id]),Ge.useLayoutEffect(()=>{if(!V)return;let e=ae.current,t=e.style.height;e.style.height="auto";let n=e.getBoundingClientRect().height;e.style.height=t,ne(n),g(e=>e.find(e=>e.toastId===p.id)?e.map(e=>e.toastId===p.id?{...e,height:n}:e):[{toastId:p.id,height:n,position:p.position},...e])},[V,p.title,p.description,g,p.id]);let Se=Ge.useCallback(()=>{K(!0),ee(ge.current),g(e=>e.filter(e=>e.toastId!==p.id)),setTimeout(()=>{j(p)},200)},[p,j,g,ge]);return Ge.useEffect(()=>{if(p.promise&&"loading"===le||p.duration===1/0||"loading"===p.type)return;let e;return w||f||B&&je?(()=>{if(ve.current<fe.current){let e=(new Date).getTime()-fe.current;re.current=re.current-e}ve.current=(new Date).getTime()})():re.current!==1/0&&(fe.current=(new Date).getTime(),e=setTimeout(()=>{var e;null==(e=p.onAutoClose)||e.call(p,p),Se()},re.current)),()=>clearTimeout(e)},[w,f,p,le,B,je,Se]),Ge.useEffect(()=>{p.delete&&Se()},[Se,p.delete]),Ge.createElement("li",{tabIndex:0,ref:ae,className:vx(M,de,null==I?void 0:I.toast,null==(t=null==p?void 0:p.classNames)?void 0:t.toast,null==I?void 0:I.default,null==I?void 0:I[le],null==(n=null==p?void 0:p.classNames)?void 0:n[le]),"data-sonner-toast":"","data-rich-colors":null!=(r=p.richColors)?r:N,"data-styled":!(p.jsx||p.unstyled||m),"data-mounted":V,"data-promise":!!p.promise,"data-swiped":J,"data-removed":W,"data-visible":oe,"data-y-position":ye,"data-x-position":be,"data-index":y,"data-front":se,"data-swiping":q,"data-dismissible":ce,"data-type":le,"data-invert":Ne,"data-swipe-out":$,"data-swipe-direction":z,"data-expanded":!!(w||R&&V),style:{"--index":y,"--toasts-before":y,"--z-index":b.length-y,"--offset":`${W?Q:ge.current}px`,"--initial-height":R?"auto":`${te}px`,...S,...p.style},onDragEnd:()=>{X(!1),U(null),xe.current=null},onPointerDown:e=>{_e||!ce||(ie.current=new Date,ee(ge.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(X(!0),xe.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,n,r;if($||!ce)return;xe.current=null;let i=Number((null==(e=ae.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),a=Number((null==(t=ae.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),s=(new Date).getTime()-(null==(n=ie.current)?void 0:n.getTime()),o="x"===F?i:a,l=Math.abs(o)/s;if(Math.abs(o)>=20||l>.11)return ee(ge.current),null==(r=p.onDismiss)||r.call(p,p),H("x"===F?i>0?"right":"left":a>0?"down":"up"),Se(),Y(!0),void Z(!1);X(!1),U(null)},onPointerMove:t=>{var n,r,i,a;if(!xe.current||!ce||(null==(n=window.getSelection())?void 0:n.toString().length)>0)return;let s=t.clientY-xe.current.y,o=t.clientX-xe.current.x,l=null!=(r=e.swipeDirections)?r:function(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}(T);!F&&(Math.abs(o)>1||Math.abs(s)>1)&&U(Math.abs(o)>Math.abs(s)?"x":"y");let c={x:0,y:0};"y"===F?(l.includes("top")||l.includes("bottom"))&&(l.includes("top")&&s<0||l.includes("bottom")&&s>0)&&(c.y=s):"x"===F&&(l.includes("left")||l.includes("right"))&&(l.includes("left")&&o<0||l.includes("right")&&o>0)&&(c.x=o),(Math.abs(c.x)>0||Math.abs(c.y)>0)&&Z(!0),null==(i=ae.current)||i.style.setProperty("--swipe-amount-x",`${c.x}px`),null==(a=ae.current)||a.style.setProperty("--swipe-amount-y",`${c.y}px`)}},pe&&!p.jsx?Ge.createElement("button",{"aria-label":L,"data-disabled":_e,"data-close-button":!0,onClick:_e||!ce?()=>{}:()=>{var e;Se(),null==(e=p.onDismiss)||e.call(p,p)},className:vx(null==I?void 0:I.closeButton,null==(i=null==p?void 0:p.classNames)?void 0:i.closeButton)},null!=(a=null==D?void 0:D.close)?a:lx):null,p.jsx||Ve.isValidElement(p.title)?p.jsx?p.jsx:"function"==typeof p.title?p.title():p.title:Ge.createElement(Ge.Fragment,null,le||p.icon||p.promise?Ge.createElement("div",{"data-icon":"",className:vx(null==I?void 0:I.icon,null==(s=null==p?void 0:p.classNames)?void 0:s.icon)},p.promise||"loading"===p.type&&!p.icon?p.icon||(null!=D&&D.loading?Ge.createElement("div",{className:vx(null==I?void 0:I.loader,null==(Ce=null==p?void 0:p.classNames)?void 0:Ce.loader,"sonner-loader"),"data-visible":"loading"===le},D.loading):O?Ge.createElement("div",{className:vx(null==I?void 0:I.loader,null==(Ae=null==p?void 0:p.classNames)?void 0:Ae.loader,"sonner-loader"),"data-visible":"loading"===le},O):Ge.createElement(rx,{className:vx(null==I?void 0:I.loader,null==(Me=null==p?void 0:p.classNames)?void 0:Me.loader),visible:"loading"===le})):null,"loading"!==p.type?p.icon||(null==D?void 0:D[le])||(e=>{switch(e){case"success":return ix;case"info":return sx;case"warning":return ax;case"error":return ox;default:return null}})(le):null):null,Ge.createElement("div",{"data-content":"",className:vx(null==I?void 0:I.content,null==(o=null==p?void 0:p.classNames)?void 0:o.content)},Ge.createElement("div",{"data-title":"",className:vx(null==I?void 0:I.title,null==(l=null==p?void 0:p.classNames)?void 0:l.title)},"function"==typeof p.title?p.title():p.title),p.description?Ge.createElement("div",{"data-description":"",className:vx(E,ue,null==I?void 0:I.description,null==(c=null==p?void 0:p.classNames)?void 0:c.description)},"function"==typeof p.description?p.description():p.description):null),Ve.isValidElement(p.cancel)?p.cancel:p.cancel&&mx(p.cancel)?Ge.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||C,onClick:e=>{var t,n;mx(p.cancel)&&ce&&(null==(n=(t=p.cancel).onClick)||n.call(t,e),Se())},className:vx(null==I?void 0:I.cancelButton,null==(d=null==p?void 0:p.classNames)?void 0:d.cancelButton)},p.cancel.label):null,Ve.isValidElement(p.action)?p.action:p.action&&mx(p.action)?Ge.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||A,onClick:e=>{var t,n;mx(p.action)&&(null==(n=(t=p.action).onClick)||n.call(t,e),!e.defaultPrevented&&Se())},className:vx(null==I?void 0:I.actionButton,null==(u=null==p?void 0:p.classNames)?void 0:u.actionButton)},p.action.label):null));var Ce,Ae,Me};function yx(){if("undefined"==typeof window||"undefined"==typeof document)return"ltr";let e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function bx(e,t){let n={};return[e,t].forEach((e,t)=>{let r=1===t,i=r?"--mobile-offset":"--offset",a=r?"16px":"32px";function s(e){["top","right","bottom","left"].forEach(t=>{n[`${i}-${t}`]="number"==typeof e?`${e}px`:e})}"number"==typeof e||"string"==typeof e?s(e):"object"==typeof e?["top","right","bottom","left"].forEach(t=>{void 0===e[t]?n[`${i}-${t}`]=a:n[`${i}-${t}`]="number"==typeof e[t]?`${e[t]}px`:e[t]}):s(a)}),n}var wx=Ve.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:a,closeButton:s,className:o,offset:l,mobileOffset:c,theme:d="light",richColors:u,duration:h,style:p,visibleToasts:m=fx,toastOptions:f,dir:g=yx(),gap:v=gx,loadingIcon:x,icons:y,containerAriaLabel:b="Notifications",pauseWhenPageIsHidden:w}=e,[j,N]=Ge.useState([]),_=Ge.useMemo(()=>Array.from(new Set([r].concat(j.filter(e=>e.position).map(e=>e.position)))),[j,r]),[S,C]=Ge.useState([]),[A,M]=Ge.useState(!1),[E,k]=Ge.useState(!1),[T,P]=Ge.useState("system"!==d?d:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),O=Ge.useRef(null),R=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),I=Ge.useRef(null),D=Ge.useRef(!1),L=Ge.useCallback(e=>{N(t=>{var n;return null!=(n=t.find(t=>t.id===e.id))&&n.delete||dx.dismiss(e.id),t.filter(({id:t})=>t!==e.id)})},[]);return Ge.useEffect(()=>dx.subscribe(e=>{e.dismiss?N(t=>t.map(t=>t.id===e.id?{...t,delete:!0}:t)):setTimeout(()=>{sh.flushSync(()=>{N(t=>{let n=t.findIndex(t=>t.id===e.id);return-1!==n?[...t.slice(0,n),{...t[n],...e},...t.slice(n+1)]:[e,...t]})})})}),[]),Ge.useEffect(()=>{if("system"!==d)return void P(d);if("system"===d&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?P("dark"):P("light")),"undefined"==typeof window)return;let e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",({matches:e})=>{P(e?"dark":"light")})}catch(t){e.addListener(({matches:e})=>{try{P(e?"dark":"light")}catch(t){}})}},[d]),Ge.useEffect(()=>{j.length<=1&&M(!1)},[j]),Ge.useEffect(()=>{let e=e=>{var t,n;i.every(t=>e[t]||e.code===t)&&(M(!0),null==(t=O.current)||t.focus()),"Escape"===e.code&&(document.activeElement===O.current||null!=(n=O.current)&&n.contains(document.activeElement))&&M(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[i]),Ge.useEffect(()=>{if(O.current)return()=>{I.current&&(I.current.focus({preventScroll:!0}),I.current=null,D.current=!1)}},[O.current]),Ge.createElement("section",{ref:t,"aria-label":`${b} ${R}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},_.map((t,r)=>{var i;let[d,b]=t.split("-");return j.length?Ge.createElement("ol",{key:t,dir:"auto"===g?yx():g,tabIndex:-1,ref:O,className:o,"data-sonner-toaster":!0,"data-theme":T,"data-y-position":d,"data-lifted":A&&j.length>1&&!a,"data-x-position":b,style:{"--front-toast-height":`${(null==(i=S[0])?void 0:i.height)||0}px`,"--width":"356px","--gap":`${v}px`,...p,...bx(l,c)},onBlur:e=>{D.current&&!e.currentTarget.contains(e.relatedTarget)&&(D.current=!1,I.current&&(I.current.focus({preventScroll:!0}),I.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||D.current||(D.current=!0,I.current=e.relatedTarget)},onMouseEnter:()=>M(!0),onMouseMove:()=>M(!0),onMouseLeave:()=>{E||M(!1)},onDragEnd:()=>M(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||k(!0)},onPointerUp:()=>k(!1)},j.filter(e=>!e.position&&0===r||e.position===t).map((r,i)=>{var o,l;return Ge.createElement(xx,{key:r.id,icons:y,index:i,toast:r,defaultRichColors:u,duration:null!=(o=null==f?void 0:f.duration)?o:h,className:null==f?void 0:f.className,descriptionClassName:null==f?void 0:f.descriptionClassName,invert:n,visibleToasts:m,closeButton:null!=(l=null==f?void 0:f.closeButton)?l:s,interacting:E,position:t,style:null==f?void 0:f.style,unstyled:null==f?void 0:f.unstyled,classNames:null==f?void 0:f.classNames,cancelButtonStyle:null==f?void 0:f.cancelButtonStyle,actionButtonStyle:null==f?void 0:f.actionButtonStyle,removeToast:L,toasts:j.filter(e=>e.position==r.position),heights:S.filter(e=>e.position==r.position),setHeights:C,expandByDefault:a,gap:v,loadingIcon:x,expanded:A,pauseWhenPageIsHidden:w,swipeDirections:e.swipeDirections})})):null}))});const jx=({...e})=>{const{theme:t="system"}=Xv();return Qe.jsx(wx,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var Nx=We[" useId ".trim().toString()]||(()=>{}),_x=0;function Sx(e){const[t,n]=Ve.useState(Nx());return Wh(()=>{n(e=>e??String(_x++))},[e]),t?`radix-${t}`:""}const Cx=["top","right","bottom","left"],Ax=Math.min,Mx=Math.max,Ex=Math.round,kx=Math.floor,Tx=e=>({x:e,y:e}),Px={left:"right",right:"left",bottom:"top",top:"bottom"},Ox={start:"end",end:"start"};function Rx(e,t,n){return Mx(e,Ax(t,n))}function Ix(e,t){return"function"==typeof e?e(t):e}function Dx(e){return e.split("-")[0]}function Lx(e){return e.split("-")[1]}function Bx(e){return"x"===e?"y":"x"}function Fx(e){return"y"===e?"height":"width"}const Ux=new Set(["top","bottom"]);function zx(e){return Ux.has(Dx(e))?"y":"x"}function Hx(e){return Bx(zx(e))}function Vx(e){return e.replace(/start|end/g,e=>Ox[e])}const Gx=["left","right"],Wx=["right","left"],Kx=["top","bottom"],qx=["bottom","top"];function Xx(e,t,n,r){const i=Lx(e);let a=function(e,t,n){switch(e){case"top":case"bottom":return n?t?Wx:Gx:t?Gx:Wx;case"left":case"right":return t?Kx:qx;default:return[]}}(Dx(e),"start"===n,r);return i&&(a=a.map(e=>e+"-"+i),t&&(a=a.concat(a.map(Vx)))),a}function $x(e){return e.replace(/left|right|bottom|top/g,e=>Px[e])}function Yx(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function Jx(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Zx(e,t,n){let{reference:r,floating:i}=e;const a=zx(t),s=Hx(t),o=Fx(s),l=Dx(t),c="y"===a,d=r.x+r.width/2-i.width/2,u=r.y+r.height/2-i.height/2,h=r[o]/2-i[o]/2;let p;switch(l){case"top":p={x:d,y:r.y-i.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:u};break;case"left":p={x:r.x-i.width,y:u};break;default:p={x:r.x,y:r.y}}switch(Lx(t)){case"start":p[s]-=h*(n&&c?-1:1);break;case"end":p[s]+=h*(n&&c?-1:1)}return p}async function Qx(e,t){var n;void 0===t&&(t={});const{x:r,y:i,platform:a,rects:s,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:h=!1,padding:p=0}=Ix(t,e),m=Yx(p),f=o[h?"floating"===u?"reference":"floating":u],g=Jx(await a.getClippingRect({element:null==(n=await(null==a.isElement?void 0:a.isElement(f)))||n?f:f.contextElement||await(null==a.getDocumentElement?void 0:a.getDocumentElement(o.floating)),boundary:c,rootBoundary:d,strategy:l})),v="floating"===u?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,x=await(null==a.getOffsetParent?void 0:a.getOffsetParent(o.floating)),y=await(null==a.isElement?void 0:a.isElement(x))&&await(null==a.getScale?void 0:a.getScale(x))||{x:1,y:1},b=Jx(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:v,offsetParent:x,strategy:l}):v);return{top:(g.top-b.top+m.top)/y.y,bottom:(b.bottom-g.bottom+m.bottom)/y.y,left:(g.left-b.left+m.left)/y.x,right:(b.right-g.right+m.right)/y.x}}function ey(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function ty(e){return Cx.some(t=>e[t]>=0)}const ny=new Set(["left","top"]);function ry(){return"undefined"!=typeof window}function iy(e){return oy(e)?(e.nodeName||"").toLowerCase():"#document"}function ay(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function sy(e){var t;return null==(t=(oy(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function oy(e){return!!ry()&&(e instanceof Node||e instanceof ay(e).Node)}function ly(e){return!!ry()&&(e instanceof Element||e instanceof ay(e).Element)}function cy(e){return!!ry()&&(e instanceof HTMLElement||e instanceof ay(e).HTMLElement)}function dy(e){return!(!ry()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof ay(e).ShadowRoot)}const uy=new Set(["inline","contents"]);function hy(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=_y(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!uy.has(i)}const py=new Set(["table","td","th"]);function my(e){return py.has(iy(e))}const fy=[":popover-open",":modal"];function gy(e){return fy.some(t=>{try{return e.matches(t)}catch(n){return!1}})}const vy=["transform","translate","scale","rotate","perspective"],xy=["transform","translate","scale","rotate","perspective","filter"],yy=["paint","layout","strict","content"];function by(e){const t=wy(),n=ly(e)?_y(e):e;return vy.some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||xy.some(e=>(n.willChange||"").includes(e))||yy.some(e=>(n.contain||"").includes(e))}function wy(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const jy=new Set(["html","body","#document"]);function Ny(e){return jy.has(iy(e))}function _y(e){return ay(e).getComputedStyle(e)}function Sy(e){return ly(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Cy(e){if("html"===iy(e))return e;const t=e.assignedSlot||e.parentNode||dy(e)&&e.host||sy(e);return dy(t)?t.host:t}function Ay(e){const t=Cy(e);return Ny(t)?e.ownerDocument?e.ownerDocument.body:e.body:cy(t)&&hy(t)?t:Ay(t)}function My(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=Ay(e),a=i===(null==(r=e.ownerDocument)?void 0:r.body),s=ay(i);if(a){const e=Ey(s);return t.concat(s,s.visualViewport||[],hy(i)?i:[],e&&n?My(e):[])}return t.concat(i,My(i,[],n))}function Ey(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ky(e){const t=_y(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=cy(e),a=i?e.offsetWidth:n,s=i?e.offsetHeight:r,o=Ex(n)!==a||Ex(r)!==s;return o&&(n=a,r=s),{width:n,height:r,$:o}}function Ty(e){return ly(e)?e:e.contextElement}function Py(e){const t=Ty(e);if(!cy(t))return Tx(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:a}=ky(t);let s=(a?Ex(n.width):n.width)/r,o=(a?Ex(n.height):n.height)/i;return s&&Number.isFinite(s)||(s=1),o&&Number.isFinite(o)||(o=1),{x:s,y:o}}const Oy=Tx(0);function Ry(e){const t=ay(e);return wy()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Oy}function Iy(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),a=Ty(e);let s=Tx(1);t&&(r?ly(r)&&(s=Py(r)):s=Py(e));const o=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==ay(e))&&t}(a,n,r)?Ry(a):Tx(0);let l=(i.left+o.x)/s.x,c=(i.top+o.y)/s.y,d=i.width/s.x,u=i.height/s.y;if(a){const e=ay(a),t=r&&ly(r)?ay(r):r;let n=e,i=Ey(n);for(;i&&r&&t!==n;){const e=Py(i),t=i.getBoundingClientRect(),r=_y(i),a=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,s=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,d*=e.x,u*=e.y,l+=a,c+=s,n=ay(i),i=Ey(n)}}return Jx({width:d,height:u,x:l,y:c})}function Dy(e,t){const n=Sy(e).scrollLeft;return t?t.left+n:Iy(sy(e)).left+n}function Ly(e,t){const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-Dy(e,n),y:n.top+t.scrollTop}}const By=new Set(["absolute","fixed"]);function Fy(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=ay(e),r=sy(e),i=n.visualViewport;let a=r.clientWidth,s=r.clientHeight,o=0,l=0;if(i){a=i.width,s=i.height;const e=wy();(!e||e&&"fixed"===t)&&(o=i.offsetLeft,l=i.offsetTop)}const c=Dy(r);if(c<=0){const e=r.ownerDocument,t=e.body,n=getComputedStyle(t),i="CSS1Compat"===e.compatMode&&parseFloat(n.marginLeft)+parseFloat(n.marginRight)||0,s=Math.abs(r.clientWidth-t.clientWidth-i);s<=25&&(a-=s)}else c<=25&&(a+=c);return{width:a,height:s,x:o,y:l}}(e,n);else if("document"===t)r=function(e){const t=sy(e),n=Sy(e),r=e.ownerDocument.body,i=Mx(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=Mx(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+Dy(e);const o=-n.scrollTop;return"rtl"===_y(r).direction&&(s+=Mx(t.clientWidth,r.clientWidth)-i),{width:i,height:a,x:s,y:o}}(sy(e));else if(ly(t))r=function(e,t){const n=Iy(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,a=cy(e)?Py(e):Tx(1);return{width:e.clientWidth*a.x,height:e.clientHeight*a.y,x:i*a.x,y:r*a.y}}(t,n);else{const n=Ry(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return Jx(r)}function Uy(e,t){const n=Cy(e);return!(n===t||!ly(n)||Ny(n))&&("fixed"===_y(n).position||Uy(n,t))}function zy(e,t,n){const r=cy(t),i=sy(t),a="fixed"===n,s=Iy(e,!0,a,t);let o={scrollLeft:0,scrollTop:0};const l=Tx(0);function c(){l.x=Dy(i)}if(r||!r&&!a)if(("body"!==iy(t)||hy(i))&&(o=Sy(t)),r){const e=Iy(t,!0,a,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&c();a&&!r&&i&&c();const d=!i||r||a?Tx(0):Ly(i,o);return{x:s.left+o.scrollLeft-l.x-d.x,y:s.top+o.scrollTop-l.y-d.y,width:s.width,height:s.height}}function Hy(e){return"static"===_y(e).position}function Vy(e,t){if(!cy(e)||"fixed"===_y(e).position)return null;if(t)return t(e);let n=e.offsetParent;return sy(e)===n&&(n=n.ownerDocument.body),n}function Gy(e,t){const n=ay(e);if(gy(e))return n;if(!cy(e)){let t=Cy(e);for(;t&&!Ny(t);){if(ly(t)&&!Hy(t))return t;t=Cy(t)}return n}let r=Vy(e,t);for(;r&&my(r)&&Hy(r);)r=Vy(r,t);return r&&Ny(r)&&Hy(r)&&!by(r)?n:r||function(e){let t=Cy(e);for(;cy(t)&&!Ny(t);){if(by(t))return t;if(gy(t))return null;t=Cy(t)}return null}(e)||n}const Wy={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const a="fixed"===i,s=sy(r),o=!!t&&gy(t.floating);if(r===s||o&&a)return n;let l={scrollLeft:0,scrollTop:0},c=Tx(1);const d=Tx(0),u=cy(r);if((u||!u&&!a)&&(("body"!==iy(r)||hy(s))&&(l=Sy(r)),cy(r))){const e=Iy(r);c=Py(r),d.x=e.x+r.clientLeft,d.y=e.y+r.clientTop}const h=!s||u||a?Tx(0):Ly(s,l);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+h.x,y:n.y*c.y-l.scrollTop*c.y+d.y+h.y}},getDocumentElement:sy,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const a=[..."clippingAncestors"===n?gy(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=My(e,[],!1).filter(e=>ly(e)&&"body"!==iy(e)),i=null;const a="fixed"===_y(e).position;let s=a?Cy(e):e;for(;ly(s)&&!Ny(s);){const t=_y(s),n=by(s);n||"fixed"!==t.position||(i=null),(a?!n&&!i:!n&&"static"===t.position&&i&&By.has(i.position)||hy(s)&&!n&&Uy(e,s))?r=r.filter(e=>e!==s):i=t,s=Cy(s)}return t.set(e,r),r}(t,this._c):[].concat(n),r],s=a[0],o=a.reduce((e,n)=>{const r=Fy(t,n,i);return e.top=Mx(r.top,e.top),e.right=Ax(r.right,e.right),e.bottom=Ax(r.bottom,e.bottom),e.left=Mx(r.left,e.left),e},Fy(t,s,i));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:Gy,getElementRects:async function(e){const t=this.getOffsetParent||Gy,n=this.getDimensions,r=await n(e.floating);return{reference:zy(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=ky(e);return{width:t,height:n}},getScale:Py,isElement:ly,isRTL:function(e){return"rtl"===_y(e).direction}};function Ky(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function qy(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:s="function"==typeof ResizeObserver,layoutShift:o="function"==typeof IntersectionObserver,animationFrame:l=!1}=r,c=Ty(e),d=i||a?[...c?My(c):[],...My(t)]:[];d.forEach(e=>{i&&e.addEventListener("scroll",n,{passive:!0}),a&&e.addEventListener("resize",n)});const u=c&&o?function(e,t){let n,r=null;const i=sy(e);function a(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function s(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),a();const c=e.getBoundingClientRect(),{left:d,top:u,width:h,height:p}=c;if(o||t(),!h||!p)return;const m={rootMargin:-kx(u)+"px "+-kx(i.clientWidth-(d+h))+"px "+-kx(i.clientHeight-(u+p))+"px "+-kx(d)+"px",threshold:Mx(0,Ax(1,l))||1};let f=!0;function g(t){const r=t[0].intersectionRatio;if(r!==l){if(!f)return s();r?s(!1,r):n=setTimeout(()=>{s(!1,1e-7)},1e3)}1!==r||Ky(c,e.getBoundingClientRect())||s(),f=!1}try{r=new IntersectionObserver(g,{...m,root:i.ownerDocument})}catch(v){r=new IntersectionObserver(g,m)}r.observe(e)}(!0),a}(c,n):null;let h,p=-1,m=null;s&&(m=new ResizeObserver(e=>{let[r]=e;r&&r.target===c&&m&&(m.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var e;null==(e=m)||e.observe(t)})),n()}),c&&!l&&m.observe(c),m.observe(t));let f=l?Iy(e):null;return l&&function t(){const r=Iy(e);f&&!Ky(f,r)&&n();f=r,h=requestAnimationFrame(t)}(),n(),()=>{var e;d.forEach(e=>{i&&e.removeEventListener("scroll",n),a&&e.removeEventListener("resize",n)}),null==u||u(),null==(e=m)||e.disconnect(),m=null,l&&cancelAnimationFrame(h)}}const Xy=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:a,placement:s,middlewareData:o}=t,l=await async function(e,t){const{placement:n,platform:r,elements:i}=e,a=await(null==r.isRTL?void 0:r.isRTL(i.floating)),s=Dx(n),o=Lx(n),l="y"===zx(n),c=ny.has(s)?-1:1,d=a&&l?-1:1,u=Ix(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:m}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return o&&"number"==typeof m&&(p="end"===o?-1*m:m),l?{x:p*d,y:h*c}:{x:h*c,y:p*d}}(t,e);return s===(null==(n=o.offset)?void 0:n.placement)&&null!=(r=o.arrow)&&r.alignmentOffset?{}:{x:i+l.x,y:a+l.y,data:{...l,placement:s}}}}},$y=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:a=!0,crossAxis:s=!1,limiter:o={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=Ix(e,t),c={x:n,y:r},d=await Qx(t,l),u=zx(Dx(i)),h=Bx(u);let p=c[h],m=c[u];if(a){const e="y"===h?"bottom":"right";p=Rx(p+d["y"===h?"top":"left"],p,p-d[e])}if(s){const e="y"===u?"bottom":"right";m=Rx(m+d["y"===u?"top":"left"],m,m-d[e])}const f=o.fn({...t,[h]:p,[u]:m});return{...f,data:{x:f.x-n,y:f.y-r,enabled:{[h]:a,[u]:s}}}}}},Yy=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:a,rects:s,initialPlacement:o,platform:l,elements:c}=t,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:f=!0,...g}=Ix(e,t);if(null!=(n=a.arrow)&&n.alignmentOffset)return{};const v=Dx(i),x=zx(o),y=Dx(o)===o,b=await(null==l.isRTL?void 0:l.isRTL(c.floating)),w=h||(y||!f?[$x(o)]:function(e){const t=$x(e);return[Vx(e),t,Vx(t)]}(o)),j="none"!==m;!h&&j&&w.push(...Xx(o,f,m,b));const N=[o,...w],_=await Qx(t,g),S=[];let C=(null==(r=a.flip)?void 0:r.overflows)||[];if(d&&S.push(_[v]),u){const e=function(e,t,n){void 0===n&&(n=!1);const r=Lx(e),i=Hx(e),a=Fx(i);let s="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[a]>t.floating[a]&&(s=$x(s)),[s,$x(s)]}(i,s,b);S.push(_[e[0]],_[e[1]])}if(C=[...C,{placement:i,overflows:S}],!S.every(e=>e<=0)){var A,M;const e=((null==(A=a.flip)?void 0:A.index)||0)+1,t=N[e];if(t){if(!("alignment"===u&&x!==zx(t))||C.every(e=>zx(e.placement)!==x||e.overflows[0]>0))return{data:{index:e,overflows:C},reset:{placement:t}}}let n=null==(M=C.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:M.placement;if(!n)switch(p){case"bestFit":{var E;const e=null==(E=C.filter(e=>{if(j){const t=zx(e.placement);return t===x||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:E[0];e&&(n=e);break}case"initialPlacement":n=o}if(i!==n)return{reset:{placement:n}}}return{}}}},Jy=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:a,platform:s,elements:o}=t,{apply:l=()=>{},...c}=Ix(e,t),d=await Qx(t,c),u=Dx(i),h=Lx(i),p="y"===zx(i),{width:m,height:f}=a.floating;let g,v;"top"===u||"bottom"===u?(g=u,v=h===(await(null==s.isRTL?void 0:s.isRTL(o.floating))?"start":"end")?"left":"right"):(v=u,g="end"===h?"top":"bottom");const x=f-d.top-d.bottom,y=m-d.left-d.right,b=Ax(f-d[g],x),w=Ax(m-d[v],y),j=!t.middlewareData.shift;let N=b,_=w;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(_=y),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(N=x),j&&!h){const e=Mx(d.left,0),t=Mx(d.right,0),n=Mx(d.top,0),r=Mx(d.bottom,0);p?_=m-2*(0!==e||0!==t?e+t:Mx(d.left,d.right)):N=f-2*(0!==n||0!==r?n+r:Mx(d.top,d.bottom))}await l({...t,availableWidth:_,availableHeight:N});const S=await s.getDimensions(o.floating);return m!==S.width||f!==S.height?{reset:{rects:!0}}:{}}}},Zy=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=Ix(e,t);switch(r){case"referenceHidden":{const e=ey(await Qx(t,{...i,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:ty(e)}}}case"escaped":{const e=ey(await Qx(t,{...i,altBoundary:!0}),n.floating);return{data:{escapedOffsets:e,escaped:ty(e)}}}default:return{}}}}},Qy=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:a,platform:s,elements:o,middlewareData:l}=t,{element:c,padding:d=0}=Ix(e,t)||{};if(null==c)return{};const u=Yx(d),h={x:n,y:r},p=Hx(i),m=Fx(p),f=await s.getDimensions(c),g="y"===p,v=g?"top":"left",x=g?"bottom":"right",y=g?"clientHeight":"clientWidth",b=a.reference[m]+a.reference[p]-h[p]-a.floating[m],w=h[p]-a.reference[p],j=await(null==s.getOffsetParent?void 0:s.getOffsetParent(c));let N=j?j[y]:0;N&&await(null==s.isElement?void 0:s.isElement(j))||(N=o.floating[y]||a.floating[m]);const _=b/2-w/2,S=N/2-f[m]/2-1,C=Ax(u[v],S),A=Ax(u[x],S),M=C,E=N-f[m]-A,k=N/2-f[m]/2+_,T=Rx(M,k,E),P=!l.arrow&&null!=Lx(i)&&k!==T&&a.reference[m]/2-(k<M?C:A)-f[m]/2<0,O=P?k<M?k-M:k-E:0;return{[p]:h[p]+O,data:{[p]:T,centerOffset:k-T-O,...P&&{alignmentOffset:O}},reset:P}}}),eb=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:a,middlewareData:s}=t,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=Ix(e,t),d={x:n,y:r},u=zx(i),h=Bx(u);let p=d[h],m=d[u];const f=Ix(o,t),g="number"==typeof f?{mainAxis:f,crossAxis:0}:{mainAxis:0,crossAxis:0,...f};if(l){const e="y"===h?"height":"width",t=a.reference[h]-a.floating[e]+g.mainAxis,n=a.reference[h]+a.reference[e]-g.mainAxis;p<t?p=t:p>n&&(p=n)}if(c){var v,x;const e="y"===h?"width":"height",t=ny.has(Dx(i)),n=a.reference[u]-a.floating[e]+(t&&(null==(v=s.offset)?void 0:v[u])||0)+(t?0:g.crossAxis),r=a.reference[u]+a.reference[e]+(t?0:(null==(x=s.offset)?void 0:x[u])||0)-(t?g.crossAxis:0);m<n?m=n:m>r&&(m=r)}return{[h]:p,[u]:m}}}},tb=(e,t,n)=>{const r=new Map,i={platform:Wy,...n},a={...i.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:s}=n,o=a.filter(Boolean),l=await(null==s.isRTL?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:u}=Zx(c,r,l),h=r,p={},m=0;for(let f=0;f<o.length;f++){const{name:n,fn:a}=o[f],{x:g,y:v,data:x,reset:y}=await a({x:d,y:u,initialPlacement:r,placement:h,strategy:i,middlewareData:p,rects:c,platform:s,elements:{reference:e,floating:t}});d=null!=g?g:d,u=null!=v?v:u,p={...p,[n]:{...p[n],...x}},y&&m<=50&&(m++,"object"==typeof y&&(y.placement&&(h=y.placement),y.rects&&(c=!0===y.rects?await s.getElementRects({reference:e,floating:t,strategy:i}):y.rects),({x:d,y:u}=Zx(c,h,l))),f=-1)}return{x:d,y:u,placement:h,strategy:i,middlewareData:p}})(e,t,{...i,platform:a})};var nb="undefined"!=typeof document?Ve.useLayoutEffect:function(){};function rb(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!rb(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!==r--;){const n=i[r];if(("_owner"!==n||!e.$$typeof)&&!rb(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function ib(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ab(e,t){const n=ib(e);return Math.round(t*n)/n}function sb(e){const t=Ve.useRef(e);return nb(()=>{t.current=e}),t}const ob=e=>({name:"arrow",options:e,fn(t){const{element:n,padding:r}="function"==typeof e?e(t):e;return n&&(i=n,{}.hasOwnProperty.call(i,"current"))?null!=n.current?Qy({element:n.current,padding:r}).fn(t):{}:n?Qy({element:n,padding:r}).fn(t):{};var i}}),lb=(e,t)=>({...Xy(e),options:[e,t]}),cb=(e,t)=>({...$y(e),options:[e,t]}),db=(e,t)=>({...eb(e),options:[e,t]}),ub=(e,t)=>({...Yy(e),options:[e,t]}),hb=(e,t)=>({...Jy(e),options:[e,t]}),pb=(e,t)=>({...Zy(e),options:[e,t]}),mb=(e,t)=>({...ob(e),options:[e,t]});var fb=Ve.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...a}=e;return Qe.jsx(Th.svg,{...a,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:Qe.jsx("polygon",{points:"0,0 30,0 15,10"})})});fb.displayName="Arrow";var gb=fb;function vb(e){const[t,n]=Ve.useState(void 0);return Wh(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const r=t[0];let i,a;if("borderBoxSize"in r){const e=r.borderBoxSize,t=Array.isArray(e)?e[0]:e;i=t.inlineSize,a=t.blockSize}else i=e.offsetWidth,a=e.offsetHeight;n({width:i,height:a})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)},[e]),t}var xb="Popper",[yb,bb]=jh(xb),[wb,jb]=yb(xb),Nb=e=>{const{__scopePopper:t,children:n}=e,[r,i]=Ve.useState(null);return Qe.jsx(wb,{scope:t,anchor:r,onAnchorChange:i,children:n})};Nb.displayName=xb;var _b="PopperAnchor",Sb=Ve.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,a=jb(_b,n),s=Ve.useRef(null),o=wh(t,s),l=Ve.useRef(null);return Ve.useEffect(()=>{const e=l.current;l.current=(null==r?void 0:r.current)||s.current,e!==l.current&&a.onAnchorChange(l.current)}),r?null:Qe.jsx(Th.div,{...i,ref:o})});Sb.displayName=_b;var Cb="PopperContent",[Ab,Mb]=yb(Cb),Eb=Ve.forwardRef((e,t)=>{var n,r,i,a,s,o;const{__scopePopper:l,side:c="bottom",sideOffset:d=0,align:u="center",alignOffset:h=0,arrowPadding:p=0,avoidCollisions:m=!0,collisionBoundary:f=[],collisionPadding:g=0,sticky:v="partial",hideWhenDetached:x=!1,updatePositionStrategy:y="optimized",onPlaced:b,...w}=e,j=jb(Cb,l),[N,_]=Ve.useState(null),S=wh(t,e=>_(e)),[C,A]=Ve.useState(null),M=vb(C),E=(null==M?void 0:M.width)??0,k=(null==M?void 0:M.height)??0,T=c+("center"!==u?"-"+u:""),P="number"==typeof g?g:{top:0,right:0,bottom:0,left:0,...g},O=Array.isArray(f)?f:[f],R=O.length>0,I={padding:P,boundary:O.filter(Ob),altBoundary:R},{refs:D,floatingStyles:L,placement:B,isPositioned:F,middlewareData:U}=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:s}={},transform:o=!0,whileElementsMounted:l,open:c}=e,[d,u]=Ve.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=Ve.useState(r);rb(h,r)||p(r);const[m,f]=Ve.useState(null),[g,v]=Ve.useState(null),x=Ve.useCallback(e=>{e!==j.current&&(j.current=e,f(e))},[]),y=Ve.useCallback(e=>{e!==N.current&&(N.current=e,v(e))},[]),b=a||m,w=s||g,j=Ve.useRef(null),N=Ve.useRef(null),_=Ve.useRef(d),S=null!=l,C=sb(l),A=sb(i),M=sb(c),E=Ve.useCallback(()=>{if(!j.current||!N.current)return;const e={placement:t,strategy:n,middleware:h};A.current&&(e.platform=A.current),tb(j.current,N.current,e).then(e=>{const t={...e,isPositioned:!1!==M.current};k.current&&!rb(_.current,t)&&(_.current=t,ah.flushSync(()=>{u(t)}))})},[h,t,n,A,M]);nb(()=>{!1===c&&_.current.isPositioned&&(_.current.isPositioned=!1,u(e=>({...e,isPositioned:!1})))},[c]);const k=Ve.useRef(!1);nb(()=>(k.current=!0,()=>{k.current=!1}),[]),nb(()=>{if(b&&(j.current=b),w&&(N.current=w),b&&w){if(C.current)return C.current(b,w,E);E()}},[b,w,E,C,S]);const T=Ve.useMemo(()=>({reference:j,floating:N,setReference:x,setFloating:y}),[x,y]),P=Ve.useMemo(()=>({reference:b,floating:w}),[b,w]),O=Ve.useMemo(()=>{const e={position:n,left:0,top:0};if(!P.floating)return e;const t=ab(P.floating,d.x),r=ab(P.floating,d.y);return o?{...e,transform:"translate("+t+"px, "+r+"px)",...ib(P.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}},[n,o,P.floating,d.x,d.y]);return Ve.useMemo(()=>({...d,update:E,refs:T,elements:P,floatingStyles:O}),[d,E,T,P,O])}({strategy:"fixed",placement:T,whileElementsMounted:(...e)=>qy(...e,{animationFrame:"always"===y}),elements:{reference:j.anchor},middleware:[lb({mainAxis:d+k,alignmentAxis:h}),m&&cb({mainAxis:!0,crossAxis:!1,limiter:"partial"===v?db():void 0,...I}),m&&ub({...I}),hb({...I,apply:({elements:e,rects:t,availableWidth:n,availableHeight:r})=>{const{width:i,height:a}=t.reference,s=e.floating.style;s.setProperty("--radix-popper-available-width",`${n}px`),s.setProperty("--radix-popper-available-height",`${r}px`),s.setProperty("--radix-popper-anchor-width",`${i}px`),s.setProperty("--radix-popper-anchor-height",`${a}px`)}}),C&&mb({element:C,padding:p}),Rb({arrowWidth:E,arrowHeight:k}),x&&pb({strategy:"referenceHidden",...I})]}),[z,H]=Ib(B),V=Oh(b);Wh(()=>{F&&(null==V||V())},[F,V]);const G=null==(n=U.arrow)?void 0:n.x,W=null==(r=U.arrow)?void 0:r.y,K=0!==(null==(i=U.arrow)?void 0:i.centerOffset),[q,X]=Ve.useState();return Wh(()=>{N&&X(window.getComputedStyle(N).zIndex)},[N]),Qe.jsx("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:{...L,transform:F?L.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:q,"--radix-popper-transform-origin":[null==(a=U.transformOrigin)?void 0:a.x,null==(s=U.transformOrigin)?void 0:s.y].join(" "),...(null==(o=U.hide)?void 0:o.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:Qe.jsx(Ab,{scope:l,placedSide:z,onArrowChange:A,arrowX:G,arrowY:W,shouldHideArrow:K,children:Qe.jsx(Th.div,{"data-side":z,"data-align":H,...w,ref:S,style:{...w.style,animation:F?void 0:"none"}})})})});Eb.displayName=Cb;var kb="PopperArrow",Tb={top:"bottom",right:"left",bottom:"top",left:"right"},Pb=Ve.forwardRef(function(e,t){const{__scopePopper:n,...r}=e,i=Mb(kb,n),a=Tb[i.placedSide];return Qe.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:Qe.jsx(gb,{...r,ref:t,style:{...r.style,display:"block"}})})});function Ob(e){return null!==e}Pb.displayName=kb;var Rb=e=>({name:"transformOrigin",options:e,fn(t){var n,r,i;const{placement:a,rects:s,middlewareData:o}=t,l=0!==(null==(n=o.arrow)?void 0:n.centerOffset),c=l?0:e.arrowWidth,d=l?0:e.arrowHeight,[u,h]=Ib(a),p={start:"0%",center:"50%",end:"100%"}[h],m=((null==(r=o.arrow)?void 0:r.x)??0)+c/2,f=((null==(i=o.arrow)?void 0:i.y)??0)+d/2;let g="",v="";return"bottom"===u?(g=l?p:`${m}px`,v=-d+"px"):"top"===u?(g=l?p:`${m}px`,v=`${s.floating.height+d}px`):"right"===u?(g=-d+"px",v=l?p:`${f}px`):"left"===u&&(g=`${s.floating.width+d}px`,v=l?p:`${f}px`),{data:{x:g,y:v}}}});function Ib(e){const[t,n="center"]=e.split("-");return[t,n]}var Db=Nb,Lb=Sb,Bb=Eb,Fb=Pb,[Ub]=jh("Tooltip",[bb]),zb=bb(),Hb="TooltipProvider",Vb=700,Gb="tooltip.open",[Wb,Kb]=Ub(Hb),qb=e=>{const{__scopeTooltip:t,delayDuration:n=Vb,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:a}=e,s=Ve.useRef(!0),o=Ve.useRef(!1),l=Ve.useRef(0);return Ve.useEffect(()=>{const e=l.current;return()=>window.clearTimeout(e)},[]),Qe.jsx(Wb,{scope:t,isOpenDelayedRef:s,delayDuration:n,onOpen:Ve.useCallback(()=>{window.clearTimeout(l.current),s.current=!1},[]),onClose:Ve.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.current=!0,r)},[r]),isPointerInTransitRef:o,onPointerInTransitChange:Ve.useCallback(e=>{o.current=e},[]),disableHoverableContent:i,children:a})};qb.displayName=Hb;var Xb="Tooltip",[$b,Yb]=Ub(Xb),Jb=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:i,onOpenChange:a,disableHoverableContent:s,delayDuration:o}=e,l=Kb(Xb,e.__scopeTooltip),c=zb(t),[d,u]=Ve.useState(null),h=Sx(),p=Ve.useRef(0),m=s??l.disableHoverableContent,f=o??l.delayDuration,g=Ve.useRef(!1),[v,x]=Yh({prop:r,defaultProp:i??!1,onChange:e=>{e?(l.onOpen(),document.dispatchEvent(new CustomEvent(Gb))):l.onClose(),null==a||a(e)},caller:Xb}),y=Ve.useMemo(()=>v?g.current?"delayed-open":"instant-open":"closed",[v]),b=Ve.useCallback(()=>{window.clearTimeout(p.current),p.current=0,g.current=!1,x(!0)},[x]),w=Ve.useCallback(()=>{window.clearTimeout(p.current),p.current=0,x(!1)},[x]),j=Ve.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{g.current=!0,x(!0),p.current=0},f)},[f,x]);return Ve.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),Qe.jsx(Db,{...c,children:Qe.jsx($b,{scope:t,contentId:h,open:v,stateAttribute:y,trigger:d,onTriggerChange:u,onTriggerEnter:Ve.useCallback(()=>{l.isOpenDelayedRef.current?j():b()},[l.isOpenDelayedRef,j,b]),onTriggerLeave:Ve.useCallback(()=>{m?w():(window.clearTimeout(p.current),p.current=0)},[w,m]),onOpen:b,onClose:w,disableHoverableContent:m,children:n})})};Jb.displayName=Xb;var Zb="TooltipTrigger",Qb=Ve.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=Yb(Zb,n),a=Kb(Zb,n),s=zb(n),o=wh(t,Ve.useRef(null),i.onTriggerChange),l=Ve.useRef(!1),c=Ve.useRef(!1),d=Ve.useCallback(()=>l.current=!1,[]);return Ve.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),Qe.jsx(Lb,{asChild:!0,...s,children:Qe.jsx(Th.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:o,onPointerMove:xh(e.onPointerMove,e=>{"touch"!==e.pointerType&&(c.current||a.isPointerInTransitRef.current||(i.onTriggerEnter(),c.current=!0))}),onPointerLeave:xh(e.onPointerLeave,()=>{i.onTriggerLeave(),c.current=!1}),onPointerDown:xh(e.onPointerDown,()=>{i.open&&i.onClose(),l.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:xh(e.onFocus,()=>{l.current||i.onOpen()}),onBlur:xh(e.onBlur,i.onClose),onClick:xh(e.onClick,i.onClose)})})});Qb.displayName=Zb;var[ew,tw]=Ub("TooltipPortal",{forceMount:void 0}),nw="TooltipContent",rw=Ve.forwardRef((e,t)=>{const n=tw(nw,e.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...a}=e,s=Yb(nw,e.__scopeTooltip);return Qe.jsx(qh,{present:r||s.open,children:s.disableHoverableContent?Qe.jsx(lw,{side:i,...a,ref:t}):Qe.jsx(iw,{side:i,...a,ref:t})})}),iw=Ve.forwardRef((e,t)=>{const n=Yb(nw,e.__scopeTooltip),r=Kb(nw,e.__scopeTooltip),i=Ve.useRef(null),a=wh(t,i),[s,o]=Ve.useState(null),{trigger:l,onClose:c}=n,d=i.current,{onPointerInTransitChange:u}=r,h=Ve.useCallback(()=>{o(null),u(!1)},[u]),p=Ve.useCallback((e,t)=>{const n=e.currentTarget,r={x:e.clientX,y:e.clientY},i=function(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n})}return r}(r,function(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,i,a)){case a:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}(r,n.getBoundingClientRect())),a=function(e){const t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const n=e[r];for(;t.length>=2;){const e=t[t.length-1],r=t[t.length-2];if(!((e.x-r.x)*(n.y-r.y)>=(e.y-r.y)*(n.x-r.x)))break;t.pop()}t.push(n)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const t=e[r];for(;n.length>=2;){const e=n[n.length-1],r=n[n.length-2];if(!((e.x-r.x)*(t.y-r.y)>=(e.y-r.y)*(t.x-r.x)))break;n.pop()}n.push(t)}return n.pop(),1===t.length&&1===n.length&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}(t)}([...i,...function(e){const{top:t,right:n,bottom:r,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:r},{x:i,y:r}]}(t.getBoundingClientRect())]);o(a),u(!0)},[u]);return Ve.useEffect(()=>()=>h(),[h]),Ve.useEffect(()=>{if(l&&d){const e=e=>p(e,d),t=e=>p(e,l);return l.addEventListener("pointerleave",e),d.addEventListener("pointerleave",t),()=>{l.removeEventListener("pointerleave",e),d.removeEventListener("pointerleave",t)}}},[l,d,p,h]),Ve.useEffect(()=>{if(s){const e=e=>{const t=e.target,n={x:e.clientX,y:e.clientY},r=(null==l?void 0:l.contains(t))||(null==d?void 0:d.contains(t)),i=!function(e,t){const{x:n,y:r}=e;let i=!1;for(let a=0,s=t.length-1;a<t.length;s=a++){const e=t[a],o=t[s],l=e.x,c=e.y,d=o.x,u=o.y;c>r!=u>r&&n<(d-l)*(r-c)/(u-c)+l&&(i=!i)}return i}(n,s);r?h():i&&(h(),c())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[l,d,s,c,h]),Qe.jsx(lw,{...e,ref:a})}),[aw,sw]=Ub(Xb,{isInside:!1}),ow=Mh("TooltipContent"),lw=Ve.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:s,...o}=e,l=Yb(nw,n),c=zb(n),{onClose:d}=l;return Ve.useEffect(()=>(document.addEventListener(Gb,d),()=>document.removeEventListener(Gb,d)),[d]),Ve.useEffect(()=>{if(l.trigger){const e=e=>{const t=e.target;(null==t?void 0:t.contains(l.trigger))&&d()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[l.trigger,d]),Qe.jsx(Fh,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:e=>e.preventDefault(),onDismiss:d,children:Qe.jsxs(Bb,{"data-state":l.stateAttribute,...c,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[Qe.jsx(ow,{children:r}),Qe.jsx(aw,{scope:n,isInside:!0,children:Qe.jsx(Qh,{id:l.contentId,role:"tooltip",children:i||r})})]})})});rw.displayName=nw;var cw="TooltipArrow";Ve.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=zb(n);return sw(cw,n).isInside?null:Qe.jsx(Fb,{...i,...r,ref:t})}).displayName=cw;var dw=rw;const uw=qb,hw=Jb,pw=Qb,mw=Ve.forwardRef(({className:e,sideOffset:t=4,...n},r)=>Qe.jsx(dw,{ref:r,sideOffset:t,className:Rv("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));mw.displayName=dw.displayName;var fw=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},gw={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},vw=(n=class{constructor(){Z(this,e,gw),Z(this,t,!1)}setTimeoutProvider(t){Q(this,e,t)}setTimeout(t,n){return J(this,e).setTimeout(t,n)}clearTimeout(t){J(this,e).clearTimeout(t)}setInterval(t,n){return J(this,e).setInterval(t,n)}clearInterval(t){J(this,e).clearInterval(t)}},e=new WeakMap,t=new WeakMap,n),xw=new vw;var yw="undefined"==typeof window||"Deno"in globalThis;function bw(){}function ww(e,t){return"function"==typeof e?e(t):e}function jw(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:a,queryKey:s,stale:o}=e;if(s)if(r){if(t.queryHash!==_w(s,t.options))return!1}else if(!Cw(t.queryKey,s))return!1;if("all"!==n){const e=t.isActive();if("active"===n&&!e)return!1;if("inactive"===n&&e)return!1}return("boolean"!=typeof o||t.isStale()===o)&&((!i||i===t.state.fetchStatus)&&!(a&&!a(t)))}function Nw(e,t){const{exact:n,status:r,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(Sw(t.options.mutationKey)!==Sw(a))return!1}else if(!Cw(t.options.mutationKey,a))return!1}return(!r||t.state.status===r)&&!(i&&!i(t))}function _w(e,t){return((null==t?void 0:t.queryKeyHashFn)||Sw)(e)}function Sw(e){return JSON.stringify(e,(e,t)=>kw(t)?Object.keys(t).sort().reduce((e,n)=>(e[n]=t[n],e),{}):t)}function Cw(e,t){return e===t||typeof e==typeof t&&(!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&Object.keys(t).every(n=>Cw(e[n],t[n])))}var Aw=Object.prototype.hasOwnProperty;function Mw(e,t){if(e===t)return e;const n=Ew(e)&&Ew(t);if(!(n||kw(e)&&kw(t)))return t;const r=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),a=i.length,s=n?new Array(a):{};let o=0;for(let l=0;l<a;l++){const a=n?l:i[l],c=e[a],d=t[a];if(c===d){s[a]=c,(n?l<r:Aw.call(e,a))&&o++;continue}if(null===c||null===d||"object"!=typeof c||"object"!=typeof d){s[a]=d;continue}const u=Mw(c,d);s[a]=u,u===c&&o++}return r===a&&o===r?e:s}function Ew(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function kw(e){if(!Tw(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!!Tw(n)&&(!!n.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function Tw(e){return"[object Object]"===Object.prototype.toString.call(e)}function Pw(e,t,n){return"function"==typeof n.structuralSharing?n.structuralSharing(e,t):!1!==n.structuralSharing?Mw(e,t):t}function Ow(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function Rw(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Iw=Symbol();function Dw(e,t){return!e.queryFn&&(null==t?void 0:t.initialPromise)?()=>t.initialPromise:e.queryFn&&e.queryFn!==Iw?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}var Lw=new(s=class extends fw{constructor(){super(),Z(this,r),Z(this,i),Z(this,a),Q(this,a,e=>{if(!yw&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){J(this,i)||this.setEventListener(J(this,a))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=J(this,i))||e.call(this),Q(this,i,void 0))}setEventListener(e){var t;Q(this,a,e),null==(t=J(this,i))||t.call(this),Q(this,i,e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()}))}setFocused(e){J(this,r)!==e&&(Q(this,r,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return"boolean"==typeof J(this,r)?J(this,r):"hidden"!==(null==(e=globalThis.document)?void 0:e.visibilityState)}},r=new WeakMap,i=new WeakMap,a=new WeakMap,s);var Bw=function(e){setTimeout(e,0)};var Fw=function(){let e=[],t=0,n=e=>{e()},r=e=>{e()},i=Bw;const a=r=>{t?e.push(r):i(()=>{n(r)})};return{batch:a=>{let s;t++;try{s=a()}finally{t--,t||(()=>{const t=e;e=[],t.length&&i(()=>{r(()=>{t.forEach(e=>{n(e)})})})})()}return s},batchCalls:e=>(...t)=>{a(()=>{e(...t)})},schedule:a,setNotifyFunction:e=>{n=e},setBatchNotifyFunction:e=>{r=e},setScheduler:e=>{i=e}}}(),Uw=new(d=class extends fw{constructor(){super(),Z(this,o,!0),Z(this,l),Z(this,c),Q(this,c,e=>{if(!yw&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}})}onSubscribe(){J(this,l)||this.setEventListener(J(this,c))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=J(this,l))||e.call(this),Q(this,l,void 0))}setEventListener(e){var t;Q(this,c,e),null==(t=J(this,l))||t.call(this),Q(this,l,e(this.setOnline.bind(this)))}setOnline(e){J(this,o)!==e&&(Q(this,o,e),this.listeners.forEach(t=>{t(e)}))}isOnline(){return J(this,o)}},o=new WeakMap,l=new WeakMap,c=new WeakMap,d);function zw(e){return Math.min(1e3*2**e,3e4)}function Hw(e){return"online"!==(e??"online")||Uw.isOnline()}var Vw=class extends Error{constructor(e){super("CancelledError"),this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent}};function Gw(e){let t,n=!1,r=0;const i=function(){let e,t;const n=new Promise((n,r)=>{e=n,t=r});function r(e){Object.assign(n,e),delete n.resolve,delete n.reject}return n.status="pending",n.catch(()=>{}),n.resolve=t=>{r({status:"fulfilled",value:t}),e(t)},n.reject=e=>{r({status:"rejected",reason:e}),t(e)},n}(),a=()=>"pending"!==i.status,s=()=>Lw.isFocused()&&("always"===e.networkMode||Uw.isOnline())&&e.canRun(),o=()=>Hw(e.networkMode)&&e.canRun(),l=e=>{a()||(null==t||t(),i.resolve(e))},c=e=>{a()||(null==t||t(),i.reject(e))},d=()=>new Promise(n=>{var r;t=e=>{(a()||s())&&n(e)},null==(r=e.onPause)||r.call(e)}).then(()=>{var n;t=void 0,a()||null==(n=e.onContinue)||n.call(e)}),u=()=>{if(a())return;let t;const i=0===r?e.initialPromise:void 0;try{t=i??e.fn()}catch(o){t=Promise.reject(o)}Promise.resolve(t).then(l).catch(t=>{var i;if(a())return;const o=e.retry??(yw?0:3),l=e.retryDelay??zw,h="function"==typeof l?l(r,t):l,p=!0===o||"number"==typeof o&&r<o||"function"==typeof o&&o(r,t);var m;!n&&p?(r++,null==(i=e.onFail)||i.call(e,r,t),(m=h,new Promise(e=>{xw.setTimeout(e,m)})).then(()=>s()?void 0:d()).then(()=>{n?c(t):u()})):c(t)})};return{promise:i,status:()=>i.status,cancel:t=>{var n;if(!a()){const r=new Vw(t);c(r),null==(n=e.onCancel)||n.call(e,r)}},continue:()=>(null==t||t(),i),cancelRetry:()=>{n=!0},continueRetry:()=>{n=!1},canStart:o,start:()=>(o()?u():d().then(u),i)}}var Ww=(h=class{constructor(){Z(this,u)}destroy(){this.clearGcTimeout()}scheduleGc(){var e;this.clearGcTimeout(),"number"==typeof(e=this.gcTime)&&e>=0&&e!==1/0&&Q(this,u,xw.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(yw?1/0:3e5))}clearGcTimeout(){J(this,u)&&(xw.clearTimeout(J(this,u)),Q(this,u,void 0))}},u=new WeakMap,h),Kw=(j=class extends Ww{constructor(e){super(),Z(this,b),Z(this,p),Z(this,m),Z(this,f),Z(this,g),Z(this,v),Z(this,x),Z(this,y),Q(this,y,!1),Q(this,x,e.defaultOptions),this.setOptions(e.options),this.observers=[],Q(this,g,e.client),Q(this,f,J(this,g).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Q(this,p,Xw(this.options)),this.state=e.state??J(this,p),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return null==(e=J(this,v))?void 0:e.promise}setOptions(e){if(this.options={...J(this,x),...e},this.updateGcTime(this.options.gcTime),this.state&&void 0===this.state.data){const e=Xw(this.options);void 0!==e.data&&(this.setData(e.data,{updatedAt:e.dataUpdatedAt,manual:!0}),Q(this,p,e))}}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||J(this,f).remove(this)}setData(e,t){const n=Pw(this.state.data,e,this.options);return ee(this,b,w).call(this,{data:n,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt,manual:null==t?void 0:t.manual}),n}setState(e,t){ee(this,b,w).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var t,n;const r=null==(t=J(this,v))?void 0:t.promise;return null==(n=J(this,v))||n.cancel(e),r?r.then(bw).catch(bw):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(J(this,p))}isActive(){return this.observers.some(e=>{return!1!==(t=e.options.enabled,n=this,"function"==typeof t?t(n):t);var t,n})}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Iw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(e=>"static"===ww(e.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(e=0){return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!function(e,t){return Math.max(e+(t||0)-Date.now(),0)}(this.state.dataUpdatedAt,e))}onFocus(){var e;const t=this.observers.find(e=>e.shouldFetchOnWindowFocus());null==t||t.refetch({cancelRefetch:!1}),null==(e=J(this,v))||e.continue()}onOnline(){var e;const t=this.observers.find(e=>e.shouldFetchOnReconnect());null==t||t.refetch({cancelRefetch:!1}),null==(e=J(this,v))||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),J(this,f).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(J(this,v)&&(J(this,y)?J(this,v).cancel({revert:!0}):J(this,v).cancelRetry()),this.scheduleGc()),J(this,f).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ee(this,b,w).call(this,{type:"invalidate"})}async fetch(e,t){var n,r,i,a,s,o,l,c,d,u,h,p;if("idle"!==this.state.fetchStatus&&"rejected"!==(null==(n=J(this,v))?void 0:n.status()))if(void 0!==this.state.data&&(null==t?void 0:t.cancelRefetch))this.cancel({silent:!0});else if(J(this,v))return J(this,v).continueRetry(),J(this,v).promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const x=new AbortController,j=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(Q(this,y,!0),x.signal)})},N=()=>{const e=Dw(this.options,t),n=(()=>{const e={client:J(this,g),queryKey:this.queryKey,meta:this.meta};return j(e),e})();return Q(this,y,!1),this.options.persister?this.options.persister(e,n,this):e(n)},_=(()=>{const e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:J(this,g),state:this.state,fetchFn:N};return j(e),e})();null==(r=this.options.behavior)||r.onFetch(_,this),Q(this,m,this.state),"idle"!==this.state.fetchStatus&&this.state.fetchMeta===(null==(i=_.fetchOptions)?void 0:i.meta)||ee(this,b,w).call(this,{type:"fetch",meta:null==(a=_.fetchOptions)?void 0:a.meta}),Q(this,v,Gw({initialPromise:null==t?void 0:t.initialPromise,fn:_.fetchFn,onCancel:e=>{e instanceof Vw&&e.revert&&this.setState({...J(this,m),fetchStatus:"idle"}),x.abort()},onFail:(e,t)=>{ee(this,b,w).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{ee(this,b,w).call(this,{type:"pause"})},onContinue:()=>{ee(this,b,w).call(this,{type:"continue"})},retry:_.options.retry,retryDelay:_.options.retryDelay,networkMode:_.options.networkMode,canRun:()=>!0}));try{const e=await J(this,v).start();if(void 0===e)throw new Error(`${this.queryHash} data is undefined`);return this.setData(e),null==(o=(s=J(this,f).config).onSuccess)||o.call(s,e,this),null==(c=(l=J(this,f).config).onSettled)||c.call(l,e,this.state.error,this),e}catch(S){if(S instanceof Vw){if(S.silent)return J(this,v).promise;if(S.revert){if(void 0===this.state.data)throw S;return this.state.data}}throw ee(this,b,w).call(this,{type:"error",error:S}),null==(u=(d=J(this,f).config).onError)||u.call(d,S,this),null==(p=(h=J(this,f).config).onSettled)||p.call(h,this.state.data,S,this),S}finally{this.scheduleGc()}}},p=new WeakMap,m=new WeakMap,f=new WeakMap,g=new WeakMap,v=new WeakMap,x=new WeakMap,y=new WeakMap,b=new WeakSet,w=function(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...qw(t.data,this.options),fetchMeta:e.meta??null};case"success":const n={...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Q(this,m,e.manual?n:void 0),n;case"error":const r=e.error;return{...t,error:r,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),Fw.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),J(this,f).notify({query:this,type:"updated",action:e})})},j);function qw(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Hw(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}function Xw(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,n=void 0!==t,r=n?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function $w(e){return{onFetch:(t,n)=>{var r,i,a,s,o;const l=t.options,c=null==(a=null==(i=null==(r=t.fetchOptions)?void 0:r.meta)?void 0:i.fetchMore)?void 0:a.direction,d=(null==(s=t.state.data)?void 0:s.pages)||[],u=(null==(o=t.state.data)?void 0:o.pageParams)||[];let h={pages:[],pageParams:[]},p=0;const m=async()=>{let n=!1;const r=Dw(t.options,t.fetchOptions),i=async(e,i,a)=>{if(n)return Promise.reject();if(null==i&&e.pages.length)return Promise.resolve(e);const s=(()=>{const e={client:t.client,queryKey:t.queryKey,pageParam:i,direction:a?"backward":"forward",meta:t.options.meta};var r;return r=e,Object.defineProperty(r,"signal",{enumerable:!0,get:()=>(t.signal.aborted?n=!0:t.signal.addEventListener("abort",()=>{n=!0}),t.signal)}),e})(),o=await r(s),{maxPages:l}=t.options,c=a?Rw:Ow;return{pages:c(e.pages,o,l),pageParams:c(e.pageParams,i,l)}};if(c&&d.length){const e="backward"===c,t={pages:d,pageParams:u},n=(e?Jw:Yw)(l,t);h=await i(t,n,e)}else{const t=e??d.length;do{const e=0===p?u[0]??l.initialPageParam:Yw(l,h);if(p>0&&null==e)break;h=await i(h,e),p++}while(p<t)}return h};t.options.persister?t.fetchFn=()=>{var e,r;return null==(r=(e=t.options).persister)?void 0:r.call(e,m,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=m}}}function Yw(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function Jw(e,{pages:t,pageParams:n}){var r;return t.length>0?null==(r=e.getPreviousPageParam)?void 0:r.call(e,t[0],t,n[0],n):void 0}var Zw=(E=class extends Ww{constructor(e){super(),Z(this,A),Z(this,N),Z(this,_),Z(this,S),Z(this,C),Q(this,N,e.client),this.mutationId=e.mutationId,Q(this,S,e.mutationCache),Q(this,_,[]),this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){J(this,_).includes(e)||(J(this,_).push(e),this.clearGcTimeout(),J(this,S).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Q(this,_,J(this,_).filter(t=>t!==e)),this.scheduleGc(),J(this,S).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){J(this,_).length||("pending"===this.state.status?this.scheduleGc():J(this,S).remove(this))}continue(){var e;return(null==(e=J(this,C))?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var t,n,r,i,a,s,o,l,c,d,u,h,p,m,f,g,v,x,y,b;const w=()=>{ee(this,A,M).call(this,{type:"continue"})},j={client:J(this,N),meta:this.options.meta,mutationKey:this.options.mutationKey};Q(this,C,Gw({fn:()=>this.options.mutationFn?this.options.mutationFn(e,j):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{ee(this,A,M).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{ee(this,A,M).call(this,{type:"pause"})},onContinue:w,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>J(this,S).canRun(this)}));const _="pending"===this.state.status,E=!J(this,C).canStart();try{if(_)w();else{ee(this,A,M).call(this,{type:"pending",variables:e,isPaused:E}),await(null==(n=(t=J(this,S).config).onMutate)?void 0:n.call(t,e,this,j));const a=await(null==(i=(r=this.options).onMutate)?void 0:i.call(r,e,j));a!==this.state.context&&ee(this,A,M).call(this,{type:"pending",context:a,variables:e,isPaused:E})}const p=await J(this,C).start();return await(null==(s=(a=J(this,S).config).onSuccess)?void 0:s.call(a,p,e,this.state.context,this,j)),await(null==(l=(o=this.options).onSuccess)?void 0:l.call(o,p,e,this.state.context,j)),await(null==(d=(c=J(this,S).config).onSettled)?void 0:d.call(c,p,null,this.state.variables,this.state.context,this,j)),await(null==(h=(u=this.options).onSettled)?void 0:h.call(u,p,null,e,this.state.context,j)),ee(this,A,M).call(this,{type:"success",data:p}),p}catch(k){try{throw await(null==(m=(p=J(this,S).config).onError)?void 0:m.call(p,k,e,this.state.context,this,j)),await(null==(g=(f=this.options).onError)?void 0:g.call(f,k,e,this.state.context,j)),await(null==(x=(v=J(this,S).config).onSettled)?void 0:x.call(v,void 0,k,this.state.variables,this.state.context,this,j)),await(null==(b=(y=this.options).onSettled)?void 0:b.call(y,void 0,k,e,this.state.context,j)),k}finally{ee(this,A,M).call(this,{type:"error",error:k})}}finally{J(this,S).runNext(this)}}},N=new WeakMap,_=new WeakMap,S=new WeakMap,C=new WeakMap,A=new WeakSet,M=function(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),Fw.batch(()=>{J(this,_).forEach(t=>{t.onMutationUpdate(e)}),J(this,S).notify({mutation:this,type:"updated",action:e})})},E);var Qw=(O=class extends fw{constructor(e={}){super(),Z(this,k),Z(this,T),Z(this,P),this.config=e,Q(this,k,new Set),Q(this,T,new Map),Q(this,P,0)}build(e,t,n){const r=new Zw({client:e,mutationCache:this,mutationId:++te(this,P)._,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){J(this,k).add(e);const t=ej(e);if("string"==typeof t){const n=J(this,T).get(t);n?n.push(e):J(this,T).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(J(this,k).delete(e)){const t=ej(e);if("string"==typeof t){const n=J(this,T).get(t);if(n)if(n.length>1){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}else n[0]===e&&J(this,T).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=ej(e);if("string"==typeof t){const n=J(this,T).get(t),r=null==n?void 0:n.find(e=>"pending"===e.state.status);return!r||r===e}return!0}runNext(e){var t;const n=ej(e);if("string"==typeof n){const r=null==(t=J(this,T).get(n))?void 0:t.find(t=>t!==e&&t.state.isPaused);return(null==r?void 0:r.continue())??Promise.resolve()}return Promise.resolve()}clear(){Fw.batch(()=>{J(this,k).forEach(e=>{this.notify({type:"removed",mutation:e})}),J(this,k).clear(),J(this,T).clear()})}getAll(){return Array.from(J(this,k))}find(e){const t={exact:!0,...e};return this.getAll().find(e=>Nw(t,e))}findAll(e={}){return this.getAll().filter(t=>Nw(e,t))}notify(e){Fw.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(e=>e.state.isPaused);return Fw.batch(()=>Promise.all(e.map(e=>e.continue().catch(bw))))}},k=new WeakMap,T=new WeakMap,P=new WeakMap,O);function ej(e){var t;return null==(t=e.options.scope)?void 0:t.id}var tj,nj,rj=(I=class extends fw{constructor(e={}){super(),Z(this,R),this.config=e,Q(this,R,new Map)}build(e,t,n){const r=t.queryKey,i=t.queryHash??_w(r,t);let a=this.get(i);return a||(a=new Kw({client:e,queryKey:r,queryHash:i,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(a)),a}add(e){J(this,R).has(e.queryHash)||(J(this,R).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=J(this,R).get(e.queryHash);t&&(e.destroy(),t===e&&J(this,R).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Fw.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return J(this,R).get(e)}getAll(){return[...J(this,R).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(e=>jw(t,e))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(t=>jw(e,t)):t}notify(e){Fw.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Fw.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Fw.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},R=new WeakMap,I),ij=(G=class{constructor(e={}){Z(this,D),Z(this,L),Z(this,B),Z(this,F),Z(this,U),Z(this,z),Z(this,H),Z(this,V),Q(this,D,e.queryCache||new rj),Q(this,L,e.mutationCache||new Qw),Q(this,B,e.defaultOptions||{}),Q(this,F,new Map),Q(this,U,new Map),Q(this,z,0)}mount(){te(this,z)._++,1===J(this,z)&&(Q(this,H,Lw.subscribe(async e=>{e&&(await this.resumePausedMutations(),J(this,D).onFocus())})),Q(this,V,Uw.subscribe(async e=>{e&&(await this.resumePausedMutations(),J(this,D).onOnline())})))}unmount(){var e,t;te(this,z)._--,0===J(this,z)&&(null==(e=J(this,H))||e.call(this),Q(this,H,void 0),null==(t=J(this,V))||t.call(this),Q(this,V,void 0))}isFetching(e){return J(this,D).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return J(this,L).findAll({...e,status:"pending"}).length}getQueryData(e){var t;const n=this.defaultQueryOptions({queryKey:e});return null==(t=J(this,D).get(n.queryHash))?void 0:t.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=J(this,D).build(this,t),r=n.state.data;return void 0===r?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(ww(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return J(this,D).findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=J(this,D).get(r.queryHash),a=function(e,t){return"function"==typeof e?e(t):e}(t,null==i?void 0:i.state.data);if(void 0!==a)return J(this,D).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(e,t,n){return Fw.batch(()=>J(this,D).findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,n)]))}getQueryState(e){var t;const n=this.defaultQueryOptions({queryKey:e});return null==(t=J(this,D).get(n.queryHash))?void 0:t.state}removeQueries(e){const t=J(this,D);Fw.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){const n=J(this,D);return Fw.batch(()=>(n.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Fw.batch(()=>J(this,D).findAll(e).map(e=>e.cancel(n)));return Promise.all(r).then(bw).catch(bw)}invalidateQueries(e,t={}){return Fw.batch(()=>(J(this,D).findAll(e).forEach(e=>{e.invalidate()}),"none"===(null==e?void 0:e.refetchType)?Promise.resolve():this.refetchQueries({...e,type:(null==e?void 0:e.refetchType)??(null==e?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Fw.batch(()=>J(this,D).findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,n);return n.throwOnError||(t=t.catch(bw)),"paused"===e.state.fetchStatus?Promise.resolve():t}));return Promise.all(r).then(bw)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const n=J(this,D).build(this,t);return n.isStaleByTime(ww(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(bw).catch(bw)}fetchInfiniteQuery(e){return e.behavior=$w(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(bw).catch(bw)}ensureInfiniteQueryData(e){return e.behavior=$w(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Uw.isOnline()?J(this,L).resumePausedMutations():Promise.resolve()}getQueryCache(){return J(this,D)}getMutationCache(){return J(this,L)}getDefaultOptions(){return J(this,B)}setDefaultOptions(e){Q(this,B,e)}setQueryDefaults(e,t){J(this,F).set(Sw(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...J(this,F).values()],n={};return t.forEach(t=>{Cw(e,t.queryKey)&&Object.assign(n,t.defaultOptions)}),n}setMutationDefaults(e,t){J(this,U).set(Sw(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...J(this,U).values()],n={};return t.forEach(t=>{Cw(e,t.mutationKey)&&Object.assign(n,t.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...J(this,B).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=_w(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Iw&&(t.enabled=!1),t}defaultMutationOptions(e){return(null==e?void 0:e._defaulted)?e:{...J(this,B).mutations,...(null==e?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){J(this,D).clear(),J(this,L).clear()}},D=new WeakMap,L=new WeakMap,B=new WeakMap,F=new WeakMap,U=new WeakMap,z=new WeakMap,H=new WeakMap,V=new WeakMap,G),aj=Ve.createContext(void 0),sj=({client:e,children:t})=>(Ve.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),Qe.jsx(aj.Provider,{value:e,children:t}));function oj(){return oj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oj.apply(this,arguments)}(nj=tj||(tj={})).Pop="POP",nj.Push="PUSH",nj.Replace="REPLACE";const lj="popstate";function cj(e){return void 0===e&&(e={}),function(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o=tj.Pop,l=null,c=d();null==c&&(c=0,s.replaceState(oj({},s.state,{idx:c}),""));function d(){return(s.state||{idx:null}).idx}function u(){o=tj.Pop;let e=d(),t=null==e?null:e-c;c=e,l&&l({action:o,location:f.location,delta:t})}function h(e,t){o=tj.Push;let n=pj(f.location,e,t);c=d()+1;let r=hj(n,c),u=f.createHref(n);try{s.pushState(r,"",u)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;i.location.assign(u)}a&&l&&l({action:o,location:f.location,delta:1})}function p(e,t){o=tj.Replace;let n=pj(f.location,e,t);c=d();let r=hj(n,c),i=f.createHref(n);s.replaceState(r,"",i),a&&l&&l({action:o,location:f.location,delta:0})}function m(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"==typeof e?e:mj(e);return n=n.replace(/ $/,"%20"),dj(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}let f={get action(){return o},get location(){return e(i,s)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(lj,u),l=e,()=>{i.removeEventListener(lj,u),l=null}},createHref:e=>t(i,e),createURL:m,encodeLocation(e){let t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:h,replace:p,go:e=>s.go(e)};return f}(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return pj("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:mj(t)},0,e)}function dj(e,t){if(!1===e||null==e)throw new Error(t)}function uj(e,t){if(!e)try{throw new Error(t)}catch(CI){}}function hj(e,t){return{usr:e.state,key:e.key,idx:t}}function pj(e,t,n,r){return void 0===n&&(n=null),oj({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?fj(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function mj(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function fj(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var gj,vj;function xj(e,t,n){return void 0===n&&(n="/"),function(e,t,n){let r="string"==typeof t?fj(t):t,i=Pj(r.pathname||"/",n);if(null==i)return null;let a=yj(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let s=null;for(let o=0;null==s&&o<a.length;++o){let e=Tj(i);s=Ej(a[o],e)}return s}(e,t,n)}function yj(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,a)=>{let s={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(dj(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let o=Dj([r,s.relativePath]),l=n.concat(s);e.children&&e.children.length>0&&(dj(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),yj(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:Mj(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of bj(e.path))i(e,t,r);else i(e,t)}),t}function bj(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return i?[a,""]:[a];let s=bj(r.join("/")),o=[];return o.push(...s.map(e=>""===e?a:[a,e].join("/"))),i&&o.push(...s),o.map(t=>e.startsWith("/")&&""===t?"/":t)}(vj=gj||(gj={})).data="data",vj.deferred="deferred",vj.redirect="redirect",vj.error="error";const wj=/^:[\w-]+$/,jj=3,Nj=2,_j=1,Sj=10,Cj=-2,Aj=e=>"*"===e;function Mj(e,t){let n=e.split("/"),r=n.length;return n.some(Aj)&&(r+=Cj),t&&(r+=Nj),n.filter(e=>!Aj(e)).reduce((e,t)=>e+(wj.test(t)?jj:""===t?_j:Sj),r)}function Ej(e,t,n){let{routesMeta:r}=e,i={},a="/",s=[];for(let o=0;o<r.length;++o){let e=r[o],n=o===r.length-1,l="/"===a?t:t.slice(a.length)||"/",c=kj({path:e.relativePath,caseSensitive:e.caseSensitive,end:n},l),d=e.route;if(!c)return null;Object.assign(i,c.params),s.push({params:i,pathname:Dj([a,c.pathname]),pathnameBase:Lj(Dj([a,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(a=Dj([a,c.pathnameBase]))}return s}function kj(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);uj("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";s=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:a,pathnameBase:s,pattern:e}}function Tj(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return uj(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function Pj(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Oj(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Rj(e,t){let n=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function Ij(e,t,n,r){let i;void 0===r&&(r=!1),"string"==typeof e?i=fj(e):(i=oj({},e),dj(!i.pathname||!i.pathname.includes("?"),Oj("?","pathname","search",i)),dj(!i.pathname||!i.pathname.includes("#"),Oj("#","pathname","hash",i)),dj(!i.search||!i.search.includes("#"),Oj("#","search","hash",i)));let a,s=""===e||""===i.pathname,o=s?"/":i.pathname;if(null==o)a=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"==typeof e?fj(e):e,a=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:a,search:Bj(r),hash:Fj(i)}}(i,a),c=o&&"/"!==o&&o.endsWith("/"),d=(s||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!d||(l.pathname+="/"),l}const Dj=e=>e.join("/").replace(/\/\/+/g,"/"),Lj=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Bj=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Fj=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";const Uj=["post","put","patch","delete"];new Set(Uj);const zj=["get",...Uj];function Hj(){return Hj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hj.apply(this,arguments)}new Set(zj);const Vj=Ve.createContext(null),Gj=Ve.createContext(null),Wj=Ve.createContext(null),Kj=Ve.createContext(null),qj=Ve.createContext({outlet:null,matches:[],isDataRoute:!1}),Xj=Ve.createContext(null);function $j(){return null!=Ve.useContext(Kj)}function Yj(){return $j()||dj(!1),Ve.useContext(Kj).location}function Jj(e){Ve.useContext(Wj).static||Ve.useLayoutEffect(e)}function Zj(){let{isDataRoute:e}=Ve.useContext(qj);return e?function(){let{router:e}=function(){let e=Ve.useContext(Vj);return e||dj(!1),e}(oN.UseNavigateStable),t=cN(lN.UseNavigateStable),n=Ve.useRef(!1);Jj(()=>{n.current=!0});let r=Ve.useCallback(function(r,i){void 0===i&&(i={}),n.current&&("number"==typeof r?e.navigate(r):e.navigate(r,Hj({fromRouteId:t},i)))},[e,t]);return r}():function(){$j()||dj(!1);let e=Ve.useContext(Vj),{basename:t,future:n,navigator:r}=Ve.useContext(Wj),{matches:i}=Ve.useContext(qj),{pathname:a}=Yj(),s=JSON.stringify(Rj(i,n.v7_relativeSplatPath)),o=Ve.useRef(!1);Jj(()=>{o.current=!0});let l=Ve.useCallback(function(n,i){if(void 0===i&&(i={}),!o.current)return;if("number"==typeof n)return void r.go(n);let l=Ij(n,JSON.parse(s),a,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:Dj([t,l.pathname])),(i.replace?r.replace:r.push)(l,i.state,i)},[t,r,s,a,e]);return l}()}const Qj=Ve.createContext(null);function eN(){let{matches:e}=Ve.useContext(qj),t=e[e.length-1];return t?t.params:{}}function tN(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=Ve.useContext(Wj),{matches:i}=Ve.useContext(qj),{pathname:a}=Yj(),s=JSON.stringify(Rj(i,r.v7_relativeSplatPath));return Ve.useMemo(()=>Ij(e,JSON.parse(s),a,"path"===n),[e,s,a,n])}function nN(e,t){return function(e,t,n,r){$j()||dj(!1);let{navigator:i}=Ve.useContext(Wj),{matches:a}=Ve.useContext(qj),s=a[a.length-1],o=s?s.params:{};!s||s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let c,d=Yj();if(t){var u;let e="string"==typeof t?fj(t):t;"/"===l||(null==(u=e.pathname)?void 0:u.startsWith(l))||dj(!1),c=e}else c=d;let h=c.pathname||"/",p=h;if("/"!==l){let e=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(e.length).join("/")}let m=xj(e,{pathname:p}),f=function(e,t,n,r){var i;void 0===t&&(t=[]);void 0===n&&(n=null);void 0===r&&(r=null);if(null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let s=e,o=null==(i=n)?void 0:i.errors;if(null!=o){let e=s.findIndex(e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id]));e>=0||dj(!1),s=s.slice(0,Math.min(s.length,e+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<s.length;d++){let e=s[d];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=d),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){l=!0,s=c>=0?s.slice(0,c+1):[s[0]];break}}}return s.reduceRight((e,r,i)=>{let a,d=!1,u=null,h=null;var p;n&&(a=o&&r.route.id?o[r.route.id]:void 0,u=r.route.errorElement||iN,l&&(c<0&&0===i?(dN[p="route-fallback"]||(dN[p]=!0),d=!0,h=null):c===i&&(d=!0,h=r.route.hydrateFallbackElement||null)));let m=t.concat(s.slice(0,i+1)),f=()=>{let t;return t=a?u:d?h:r.route.Component?Ve.createElement(r.route.Component,null):r.route.element?r.route.element:e,Ve.createElement(sN,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?Ve.createElement(aN,{location:n.location,revalidation:n.revalidation,component:u,error:a,children:f(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):f()},null)}(m&&m.map(e=>Object.assign({},e,{params:Object.assign({},o,e.params),pathname:Dj([l,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:Dj([l,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,n,r);if(t&&f)return Ve.createElement(Kj.Provider,{value:{location:Hj({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:tj.Pop}},f);return f}(e,t)}function rN(){let e=function(){var e;let t=Ve.useContext(Xj),n=function(){let e=Ve.useContext(Gj);return e||dj(!1),e}(),r=cN();if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Ve.createElement(Ve.Fragment,null,Ve.createElement("h2",null,"Unexpected Application Error!"),Ve.createElement("h3",{style:{fontStyle:"italic"}},t),n?Ve.createElement("pre",{style:r},n):null,null)}const iN=Ve.createElement(rN,null);class aN extends Ve.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){}render(){return void 0!==this.state.error?Ve.createElement(qj.Provider,{value:this.props.routeContext},Ve.createElement(Xj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sN(e){let{routeContext:t,match:n,children:r}=e,i=Ve.useContext(Vj);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),Ve.createElement(qj.Provider,{value:t},r)}var oN=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(oN||{}),lN=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(lN||{});function cN(e){let t=function(){let e=Ve.useContext(qj);return e||dj(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||dj(!1),n.route.id}const dN={};function uN(e){let{to:t,replace:n,state:r,relative:i}=e;$j()||dj(!1);let{future:a,static:s}=Ve.useContext(Wj),{matches:o}=Ve.useContext(qj),{pathname:l}=Yj(),c=Zj(),d=Ij(t,Rj(o,a.v7_relativeSplatPath),l,"path"===i),u=JSON.stringify(d);return Ve.useEffect(()=>c(JSON.parse(u),{replace:n,state:r,relative:i}),[c,u,i,n,r]),null}function hN(e){return function(e){let t=Ve.useContext(qj).outlet;return t?Ve.createElement(Qj.Provider,{value:e},t):t}(e.context)}function pN(e){dj(!1)}function mN(e){let{basename:t="/",children:n=null,location:r,navigationType:i=tj.Pop,navigator:a,static:s=!1,future:o}=e;$j()&&dj(!1);let l=t.replace(/^\/*/,"/"),c=Ve.useMemo(()=>({basename:l,navigator:a,static:s,future:Hj({v7_relativeSplatPath:!1},o)}),[l,o,a,s]);"string"==typeof r&&(r=fj(r));let{pathname:d="/",search:u="",hash:h="",state:p=null,key:m="default"}=r,f=Ve.useMemo(()=>{let e=Pj(d,l);return null==e?null:{location:{pathname:e,search:u,hash:h,state:p,key:m},navigationType:i}},[l,d,u,h,p,m,i]);return null==f?null:Ve.createElement(Wj.Provider,{value:c},Ve.createElement(Kj.Provider,{children:n,value:f}))}function fN(e){let{children:t,location:n}=e;return nN(gN(t),n)}function gN(e,t){void 0===t&&(t=[]);let n=[];return Ve.Children.forEach(e,(e,r)=>{if(!Ve.isValidElement(e))return;let i=[...t,r];if(e.type===Ve.Fragment)return void n.push.apply(n,gN(e.props.children,i));e.type!==pN&&dj(!1),e.props.index&&e.props.children&&dj(!1);let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=gN(e.props.children,i)),n.push(a)}),n}function vN(){return vN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vN.apply(this,arguments)}function xN(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function yN(e){return void 0===e&&(e=""),new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}new Promise(()=>{});const bN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],wN=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"];try{window.__reactRouterVersion="6"}catch(CI){}const jN=Ve.createContext({isTransitioning:!1}),NN=We.startTransition;function _N(e){let{basename:t,children:n,future:r,window:i}=e,a=Ve.useRef();null==a.current&&(a.current=cj({window:i,v5Compat:!0}));let s=a.current,[o,l]=Ve.useState({action:s.action,location:s.location}),{v7_startTransition:c}=r||{},d=Ve.useCallback(e=>{c&&NN?NN(()=>l(e)):l(e)},[l,c]);return Ve.useLayoutEffect(()=>s.listen(d),[s,d]),Ve.useEffect(()=>{return null==(e=r)||e.v7_startTransition,void(null==e||e.v7_relativeSplatPath);var e},[r]),Ve.createElement(mN,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:s,future:r})}const SN="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,CN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,AN=Ve.forwardRef(function(e,t){let n,{onClick:r,relative:i,reloadDocument:a,replace:s,state:o,target:l,to:c,preventScrollReset:d,viewTransition:u}=e,h=xN(e,bN),{basename:p}=Ve.useContext(Wj),m=!1;if("string"==typeof c&&CN.test(c)&&(n=c,SN))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),n=Pj(t.pathname,p);t.origin===e.origin&&null!=n?c=n+t.search+t.hash:m=!0}catch(CI){}let f=function(e,t){let{relative:n}=void 0===t?{}:t;$j()||dj(!1);let{basename:r,navigator:i}=Ve.useContext(Wj),{hash:a,pathname:s,search:o}=tN(e,{relative:n}),l=s;return"/"!==r&&(l="/"===s?r:Dj([r,s])),i.createHref({pathname:l,search:o,hash:a})}(c,{relative:i}),g=function(e,t){let{target:n,replace:r,state:i,preventScrollReset:a,relative:s,viewTransition:o}=void 0===t?{}:t,l=Zj(),c=Yj(),d=tN(e,{relative:s});return Ve.useCallback(t=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(t,n)){t.preventDefault();let n=void 0!==r?r:mj(c)===mj(d);l(e,{replace:n,state:i,preventScrollReset:a,relative:s,viewTransition:o})}},[c,l,d,r,i,n,e,a,s,o])}(c,{replace:s,state:o,target:l,preventScrollReset:d,relative:i,viewTransition:u});return Ve.createElement("a",vN({},h,{href:n||f,onClick:m||a?r:function(e){r&&r(e),e.defaultPrevented||g(e)},ref:t,target:l}))}),MN=Ve.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:r=!1,className:i="",end:a=!1,style:s,to:o,viewTransition:l,children:c}=e,d=xN(e,wN),u=tN(o,{relative:d.relative}),h=Yj(),p=Ve.useContext(Gj),{navigator:m,basename:f}=Ve.useContext(Wj),g=null!=p&&function(e,t){void 0===t&&(t={});let n=Ve.useContext(jN);null==n&&dj(!1);let{basename:r}=function(){let e=Ve.useContext(Vj);return e||dj(!1),e}(EN.useViewTransitionState),i=tN(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=Pj(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Pj(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=kj(i.pathname,s)||null!=kj(i.pathname,a)}(u)&&!0===l,v=m.encodeLocation?m.encodeLocation(u).pathname:u.pathname,x=h.pathname,y=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(x=x.toLowerCase(),y=y?y.toLowerCase():null,v=v.toLowerCase()),y&&f&&(y=Pj(y,f)||y);const b="/"!==v&&v.endsWith("/")?v.length-1:v.length;let w,j=x===v||!a&&x.startsWith(v)&&"/"===x.charAt(b),N=null!=y&&(y===v||!a&&y.startsWith(v)&&"/"===y.charAt(v.length)),_={isActive:j,isPending:N,isTransitioning:g},S=j?n:void 0;w="function"==typeof i?i(_):[i,j?"active":null,N?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let C="function"==typeof s?s(_):s;return Ve.createElement(AN,vN({},d,{"aria-current":S,className:w,ref:t,style:C,to:o,viewTransition:l}),"function"==typeof c?c(_):c)});var EN,kN,TN,PN;function ON(e){let t=Ve.useRef(yN(e)),n=Ve.useRef(!1),r=Yj(),i=Ve.useMemo(()=>function(e,t){let n=yN(e);return t&&t.forEach((e,r)=>{n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)})}),n}(r.search,n.current?null:t.current),[r.search]),a=Zj(),s=Ve.useCallback((e,t)=>{const r=yN("function"==typeof e?e(i):e);n.current=!0,a("?"+r,t)},[a,i]);return[i,s]}(kN=EN||(EN={})).UseScrollRestoration="useScrollRestoration",kN.UseSubmit="useSubmit",kN.UseSubmitFetcher="useSubmitFetcher",kN.UseFetcher="useFetcher",kN.useViewTransitionState="useViewTransitionState",(PN=TN||(TN={})).UseFetcher="useFetcher",PN.UseFetchers="useFetchers",PN.UseScrollRestoration="useScrollRestoration";const RN=Ve.createContext({});function IN(e){const t=Ve.useRef(null);return null===t.current&&(t.current=e()),t.current}const DN="undefined"!=typeof window,LN=DN?Ve.useLayoutEffect:Ve.useEffect,BN=Ve.createContext(null);function FN(e,t){-1===e.indexOf(t)&&e.push(t)}function UN(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const zN=(e,t,n)=>n>t?t:n<e?e:n;const HN={},VN=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function GN(e){return"object"==typeof e&&null!==e}const WN=e=>/^0[^.\s]+$/u.test(e);function KN(e){let t;return()=>(void 0===t&&(t=e()),t)}const qN=e=>e,XN=(e,t)=>n=>t(e(n)),$N=(...e)=>e.reduce(XN),YN=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r};class JN{constructor(){this.subscriptions=[]}add(e){return FN(this.subscriptions,e),()=>UN(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let i=0;i<r;i++){const r=this.subscriptions[i];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ZN=e=>1e3*e,QN=e=>e/1e3;function e_(e,t){return t?e*(1e3/t):0}const t_=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function n_(e,t,n,r){if(e===t&&n===r)return qN;const i=t=>function(e,t,n,r,i){let a,s,o=0;do{s=t+(n-t)/2,a=t_(s,r,i)-e,a>0?n=s:t=s}while(Math.abs(a)>1e-7&&++o<12);return s}(t,0,1,e,n);return e=>0===e||1===e?e:t_(i(e),t,r)}const r_=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,i_=e=>t=>1-e(1-t),a_=n_(.33,1.53,.69,.99),s_=i_(a_),o_=r_(s_),l_=e=>(e*=2)<1?.5*s_(e):.5*(2-Math.pow(2,-10*(e-1))),c_=e=>1-Math.sin(Math.acos(e)),d_=i_(c_),u_=r_(c_),h_=n_(.42,0,1,1),p_=n_(0,0,.58,1),m_=n_(.42,0,.58,1),f_=e=>Array.isArray(e)&&"number"==typeof e[0],g_={linear:qN,easeIn:h_,easeInOut:m_,easeOut:p_,circIn:c_,circInOut:u_,circOut:d_,backIn:s_,backInOut:o_,backOut:a_,anticipate:l_},v_=e=>{if(f_(e)){e.length;const[t,n,r,i]=e;return n_(t,n,r,i)}return"string"==typeof e?g_[e]:e},x_=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function y_(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=x_.reduce((e,t)=>(e[t]=function(e){let t=new Set,n=new Set,r=!1,i=!1;const a=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1};function o(t){a.has(t)&&(l.schedule(t),e()),t(s)}const l={schedule:(e,i=!1,s=!1)=>{const o=s&&r?t:n;return i&&a.add(e),o.has(e)||o.add(e),e},cancel:e=>{n.delete(e),a.delete(e)},process:e=>{s=e,r?i=!0:(r=!0,[t,n]=[n,t],t.forEach(o),t.clear(),r=!1,i&&(i=!1,l.process(e)))}};return l}(a),e),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:d,update:u,preRender:h,render:p,postRender:m}=s,f=()=>{const a=HN.useManualTiming?i.timestamp:performance.now();n=!1,HN.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(a-i.timestamp,40),1)),i.timestamp=a,i.isProcessing=!0,o.process(i),l.process(i),c.process(i),d.process(i),u.process(i),h.process(i),p.process(i),m.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(f))};return{schedule:x_.reduce((t,a)=>{const o=s[a];return t[a]=(t,a=!1,s=!1)=>(n||(n=!0,r=!0,i.isProcessing||e(f)),o.schedule(t,a,s)),t},{}),cancel:e=>{for(let t=0;t<x_.length;t++)s[x_[t]].cancel(e)},state:i,steps:s}}const{schedule:b_,cancel:w_,state:j_,steps:N_}=y_("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:qN,!0);let __;function S_(){__=void 0}const C_={now:()=>(void 0===__&&C_.set(j_.isProcessing||HN.useManualTiming?j_.timestamp:performance.now()),__),set:e=>{__=e,queueMicrotask(S_)}},A_=e=>t=>"string"==typeof t&&t.startsWith(e),M_=A_("--"),E_=A_("var(--"),k_=e=>!!E_(e)&&T_.test(e.split("/*")[0].trim()),T_=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,P_={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},O_={...P_,transform:e=>zN(0,1,e)},R_={...P_,default:1},I_=e=>Math.round(1e5*e)/1e5,D_=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const L_=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,B_=(e,t)=>n=>Boolean("string"==typeof n&&L_.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),F_=(e,t,n)=>r=>{if("string"!=typeof r)return r;const[i,a,s,o]=r.match(D_);return{[e]:parseFloat(i),[t]:parseFloat(a),[n]:parseFloat(s),alpha:void 0!==o?parseFloat(o):1}},U_={...P_,transform:e=>Math.round((e=>zN(0,255,e))(e))},z_={test:B_("rgb","red"),parse:F_("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+U_.transform(e)+", "+U_.transform(t)+", "+U_.transform(n)+", "+I_(O_.transform(r))+")"};const H_={test:B_("#"),parse:function(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:z_.transform},V_=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),G_=V_("deg"),W_=V_("%"),K_=V_("px"),q_=V_("vh"),X_=V_("vw"),$_=(()=>({...W_,parse:e=>W_.parse(e)/100,transform:e=>W_.transform(100*e)}))(),Y_={test:B_("hsl","hue"),parse:F_("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+W_.transform(I_(t))+", "+W_.transform(I_(n))+", "+I_(O_.transform(r))+")"},J_={test:e=>z_.test(e)||H_.test(e)||Y_.test(e),parse:e=>z_.test(e)?z_.parse(e):Y_.test(e)?Y_.parse(e):H_.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?z_.transform(e):Y_.transform(e),getAnimatableNone:e=>{const t=J_.parse(e);return t.alpha=0,J_.transform(t)}},Z_=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const Q_="number",eS="color",tS=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function nS(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const s=t.replace(tS,e=>(J_.test(e)?(r.color.push(a),i.push(eS),n.push(J_.parse(e))):e.startsWith("var(")?(r.var.push(a),i.push("var"),n.push(e)):(r.number.push(a),i.push(Q_),n.push(parseFloat(e))),++a,"${}")).split("${}");return{values:n,split:s,indexes:r,types:i}}function rS(e){return nS(e).values}function iS(e){const{split:t,types:n}=nS(e),r=t.length;return e=>{let i="";for(let a=0;a<r;a++)if(i+=t[a],void 0!==e[a]){const t=n[a];i+=t===Q_?I_(e[a]):t===eS?J_.transform(e[a]):e[a]}return i}}const aS=e=>"number"==typeof e?0:J_.test(e)?J_.getAnimatableNone(e):e;const sS={test:function(e){var t,n;return isNaN(e)&&"string"==typeof e&&((null==(t=e.match(D_))?void 0:t.length)||0)+((null==(n=e.match(Z_))?void 0:n.length)||0)>0},parse:rS,createTransformer:iS,getAnimatableNone:function(e){const t=rS(e);return iS(e)(t.map(aS))}};function oS(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function lS(e,t){return n=>n>0?t:e}const cS=(e,t,n)=>e+(t-e)*n,dS=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},uS=[H_,z_,Y_];function hS(e){const t=(n=e,uS.find(e=>e.test(n)));var n;if(!Boolean(t))return!1;let r=t.parse(e);return t===Y_&&(r=function({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,n/=100;let i=0,a=0,s=0;if(t/=100){const r=n<.5?n*(1+t):n+t-n*t,o=2*n-r;i=oS(o,r,e+1/3),a=oS(o,r,e),s=oS(o,r,e-1/3)}else i=a=s=n;return{red:Math.round(255*i),green:Math.round(255*a),blue:Math.round(255*s),alpha:r}}(r)),r}const pS=(e,t)=>{const n=hS(e),r=hS(t);if(!n||!r)return lS(e,t);const i={...n};return e=>(i.red=dS(n.red,r.red,e),i.green=dS(n.green,r.green,e),i.blue=dS(n.blue,r.blue,e),i.alpha=cS(n.alpha,r.alpha,e),z_.transform(i))},mS=new Set(["none","hidden"]);function fS(e,t){return n=>cS(e,t,n)}function gS(e){return"number"==typeof e?fS:"string"==typeof e?k_(e)?lS:J_.test(e)?pS:yS:Array.isArray(e)?vS:"object"==typeof e?J_.test(e)?pS:xS:lS}function vS(e,t){const n=[...e],r=n.length,i=e.map((e,n)=>gS(e)(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}}function xS(e,t){const n={...e,...t},r={};for(const i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=gS(e[i])(e[i],t[i]));return e=>{for(const t in r)n[t]=r[t](e);return n}}const yS=(e,t)=>{const n=sS.createTransformer(t),r=nS(e),i=nS(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?mS.has(e)&&!i.values.length||mS.has(t)&&!r.values.length?function(e,t){return mS.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):$N(vS(function(e,t){const n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const a=t.types[i],s=e.indexes[a][r[a]],o=e.values[s]??0;n[i]=o,r[a]++}return n}(r,i),i.values),n):lS(e,t)};function bS(e,t,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return cS(e,t,n);return gS(e)(e,t)}const wS=e=>{const t=({timestamp:t})=>e(t);return{start:(e=!0)=>b_.update(t,e),stop:()=>w_(t),now:()=>j_.isProcessing?j_.timestamp:C_.now()}},jS=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let a=0;a<i;a++)r+=Math.round(1e4*e(a/(i-1)))/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},NS=2e4;function _S(e){let t=0;let n=e.next(t);for(;!n.done&&t<NS;)t+=50,n=e.next(t);return t>=NS?1/0:t}function SS(e,t,n){const r=Math.max(t-5,0);return e_(n-e(r),t-r)}const CS=100,AS=10,MS=1,ES=0,kS=800,TS=.3,PS=.3,OS={granular:.01,default:2},RS={granular:.005,default:.5},IS=.01,DS=10,LS=.05,BS=1,FS=.001;function US({duration:e=kS,bounce:t=TS,velocity:n=ES,mass:r=MS}){let i,a,s=1-t;s=zN(LS,BS,s),e=zN(IS,DS,QN(e)),s<1?(i=t=>{const r=t*s,i=r*e,a=r-n,o=HS(t,s),l=Math.exp(-i);return FS-a/o*l},a=t=>{const r=t*s*e,a=r*n+n,o=Math.pow(s,2)*Math.pow(t,2)*e,l=Math.exp(-r),c=HS(Math.pow(t,2),s);return(-i(t)+FS>0?-1:1)*((a-o)*l)/c}):(i=t=>Math.exp(-t*e)*((t-n)*e+1)-.001,a=t=>Math.exp(-t*e)*(e*e*(n-t)));const o=function(e,t,n){let r=n;for(let i=1;i<zS;i++)r-=e(r)/t(r);return r}(i,a,5/e);if(e=ZN(e),isNaN(o))return{stiffness:CS,damping:AS,duration:e};{const t=Math.pow(o,2)*r;return{stiffness:t,damping:2*s*Math.sqrt(r*t),duration:e}}}const zS=12;function HS(e,t){return e*Math.sqrt(1-t*t)}const VS=["duration","bounce"],GS=["stiffness","damping","mass"];function WS(e,t){return t.some(t=>void 0!==e[t])}function KS(e=PS,t=TS){const n="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:p}=function(e){let t={velocity:ES,stiffness:CS,damping:AS,mass:MS,isResolvedFromDuration:!1,...e};if(!WS(e,GS)&&WS(e,VS))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(1.2*n),i=r*r,a=2*zN(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:MS,stiffness:i,damping:a}}else{const n=US(e);t={...t,...n,mass:MS},t.isResolvedFromDuration=!0}return t}({...n,velocity:-QN(n.velocity||0)}),m=h||0,f=c/(2*Math.sqrt(l*d)),g=s-a,v=QN(Math.sqrt(l/d)),x=Math.abs(g)<5;let y;if(r||(r=x?OS.granular:OS.default),i||(i=x?RS.granular:RS.default),f<1){const e=HS(v,f);y=t=>{const n=Math.exp(-f*v*t);return s-n*((m+f*v*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===f)y=e=>s-Math.exp(-v*e)*(g+(m+v*g)*e);else{const e=v*Math.sqrt(f*f-1);y=t=>{const n=Math.exp(-f*v*t),r=Math.min(e*t,300);return s-n*((m+f*v*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}const b={calculatedDuration:p&&u||null,next:e=>{const t=y(e);if(p)o.done=e>=u;else{let n=0===e?m:0;f<1&&(n=0===e?ZN(m):SS(y,e,t));const a=Math.abs(n)<=r,l=Math.abs(s-t)<=i;o.done=a&&l}return o.value=o.done?s:t,o},toString:()=>{const e=Math.min(_S(b),NS),t=jS(t=>b.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return b}function qS({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:l,restDelta:c=.5,restSpeed:d}){const u=e[0],h={done:!1,value:u},p=e=>void 0===o?l:void 0===l||Math.abs(o-e)<Math.abs(l-e)?o:l;let m=n*t;const f=u+m,g=void 0===s?f:s(f);g!==f&&(m=g-u);const v=e=>-m*Math.exp(-e/r),x=e=>g+v(e),y=e=>{const t=v(e),n=x(e);h.done=Math.abs(t)<=c,h.value=h.done?g:n};let b,w;const j=e=>{var t;(t=h.value,void 0!==o&&t<o||void 0!==l&&t>l)&&(b=e,w=KS({keyframes:[h.value,p(h.value)],velocity:SS(x,e,h.value),damping:i,stiffness:a,restDelta:c,restSpeed:d}))};return j(0),{calculatedDuration:null,next:e=>{let t=!1;return w||void 0!==b||(t=!0,y(e),j(e)),void 0!==b&&e>=b?w.next(e-b):(!t&&y(e),h)}}}function XS(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const a=e.length;if(t.length,1===a)return()=>t[0];if(2===a&&t[0]===t[1])return()=>t[1];const s=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,n){const r=[],i=n||HN.mix||bS,a=e.length-1;for(let s=0;s<a;s++){let n=i(e[s],e[s+1]);if(t){const e=Array.isArray(t)?t[s]||qN:t;n=$N(e,n)}r.push(n)}return r}(t,r,i),l=o.length,c=n=>{if(s&&n<e[0])return t[0];let r=0;if(l>1)for(;r<e.length-2&&!(n<e[r+1]);r++);const i=YN(e[r],e[r+1],n);return o[r](i)};return n?t=>c(zN(e[0],e[a-1],t)):c}function $S(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=YN(0,t,r);e.push(cS(n,1,i))}}(t,e.length-1),t}function YS({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=(e=>Array.isArray(e)&&"number"!=typeof e[0])(r)?r.map(v_):v_(r),a={done:!1,value:t[0]},s=function(e,t){return e.map(e=>e*t)}(n&&n.length===t.length?n:$S(t),e),o=XS(s,t,{ease:Array.isArray(i)?i:(l=t,c=i,l.map(()=>c||m_).splice(0,l.length-1))});var l,c;return{calculatedDuration:e,next:t=>(a.value=o(t),a.done=t>=e,a)}}KS.applyToOptions=e=>{const t=function(e,t=100,n){const r=n({...e,keyframes:[0,t]}),i=Math.min(_S(r),NS);return{type:"keyframes",ease:e=>r.next(i*e).value/t,duration:QN(i)}}(e,100,KS);return e.ease=t.ease,e.duration=ZN(t.duration),e.type="keyframes",e};const JS=e=>null!==e;function ZS(e,{repeat:t,repeatType:n="loop"},r,i=1){const a=e.filter(JS),s=i<0||t&&"loop"!==n&&t%2==1?0:a.length-1;return s&&void 0!==r?r:a[s]}const QS={decay:qS,inertia:qS,tween:YS,keyframes:YS,spring:KS};function eC(e){"string"==typeof e.type&&(e.type=QS[e.type])}class tC{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const nC=e=>e/100;class rC extends tC{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var e,t;const{motionValue:n}=this.options;n&&n.updatedAt!==C_.now()&&this.tick(C_.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),null==(t=(e=this.options).onStop)||t.call(e))},this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;eC(e);const{type:t=YS,repeat:n=0,repeatDelay:r=0,repeatType:i,velocity:a=0}=e;let{keyframes:s}=e;const o=t||YS;o!==YS&&"number"!=typeof s[0]&&(this.mixKeyframes=$N(nC,bS(s[0],s[1])),s=[0,100]);const l=o({...e,keyframes:s});"mirror"===i&&(this.mirroredGenerator=o({...e,keyframes:[...s].reverse(),velocity:-a})),null===l.calculatedDuration&&(l.calculatedDuration=_S(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:n,totalDuration:r,mixKeyframes:i,mirroredGenerator:a,resolvedDuration:s,calculatedDuration:o}=this;if(null===this.startTime)return n.next(0);const{delay:l=0,keyframes:c,repeat:d,repeatType:u,repeatDelay:h,type:p,onUpdate:m,finalKeyframe:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);let x=this.currentTime,y=n;if(d){const e=Math.min(this.currentTime,r)/s;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,d+1);Boolean(t%2)&&("reverse"===u?(n=1-n,h&&(n-=h/s)):"mirror"===u&&(y=a)),x=zN(0,1,n)*s}const b=v?{done:!1,value:c[0]}:y.next(x);i&&(b.value=i(b.value));let{done:w}=b;v||null===o||(w=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const j=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return j&&p!==qS&&(b.value=ZS(c,this.options,f,this.speed)),m&&m(b.value),j&&this.finish(),b}then(e,t){return this.finished.then(e,t)}get duration(){return QN(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+QN(e)}get time(){return QN(this.currentTime)}set time(e){var t;e=ZN(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),null==(t=this.driver)||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(C_.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=QN(this.currentTime))}play(){var e,t;if(this.isStopped)return;const{driver:n=wS,startTime:r}=this.options;this.driver||(this.driver=n(e=>this.tick(e))),null==(t=(e=this.options).onPlay)||t.call(e);const i=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=i):null!==this.holdTime?this.startTime=i-this.holdTime:this.startTime||(this.startTime=r??i),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(C_.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",null==(t=(e=this.options).onComplete)||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),null==(t=(e=this.options).onCancel)||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),null==(t=this.driver)||t.stop(),e.observe(this)}}const iC=e=>180*e/Math.PI,aC=e=>{const t=iC(Math.atan2(e[1],e[0]));return oC(t)},sC={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:aC,rotateZ:aC,skewX:e=>iC(Math.atan(e[1])),skewY:e=>iC(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},oC=e=>((e%=360)<0&&(e+=360),e),lC=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),cC=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),dC={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:lC,scaleY:cC,scale:e=>(lC(e)+cC(e))/2,rotateX:e=>oC(iC(Math.atan2(e[6],e[5]))),rotateY:e=>oC(iC(Math.atan2(-e[2],e[0]))),rotateZ:aC,rotate:aC,skewX:e=>iC(Math.atan(e[4])),skewY:e=>iC(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function uC(e){return e.includes("scale")?1:0}function hC(e,t){if(!e||"none"===e)return uC(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=dC,i=n;else{const t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=sC,i=t}if(!i)return uC(t);const a=r[t],s=i[1].split(",").map(pC);return"function"==typeof a?a(s):s[a]}function pC(e){return parseFloat(e.trim())}const mC=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],fC=(()=>new Set(mC))(),gC=e=>e===P_||e===K_,vC=new Set(["x","y","z"]),xC=mC.filter(e=>!vC.has(e));const yC={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>hC(t,"x"),y:(e,{transform:t})=>hC(t,"y")};yC.translateX=yC.x,yC.translateY=yC.y;const bC=new Set;let wC=!1,jC=!1,NC=!1;function _C(){if(jC){const e=Array.from(bC).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{const t=function(e){const t=[];return xC.forEach(n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=n.get(e);t&&t.forEach(([t,n])=>{var r;null==(r=e.getValue(t))||r.set(n)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}jC=!1,wC=!1,bC.forEach(e=>e.complete(NC)),bC.clear()}function SC(){bC.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(jC=!0)})}class CC{constructor(e,t,n,r,i,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=i,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(bC.add(this),wC||(wC=!0,b_.read(SC),b_.resolveKeyframes(_C))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;if(null===e[0]){const i=null==r?void 0:r.get(),a=e[e.length-1];if(void 0!==i)e[0]=i;else if(n&&t){const r=n.readValue(t,a);null!=r&&(e[0]=r)}void 0===e[0]&&(e[0]=a),r&&void 0===i&&r.set(e[0])}!function(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),bC.delete(this)}cancel(){"scheduled"===this.state&&(bC.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const AC=KN(()=>void 0!==window.ScrollTimeline),MC={};function EC(e,t){const n=KN(e);return()=>MC[t]??n()}const kC=EC(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(CI){return!1}return!0},"linearEasing"),TC=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,PC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:TC([0,.65,.55,1]),circOut:TC([.55,0,1,.45]),backIn:TC([.31,.01,.66,-.59]),backOut:TC([.33,1.53,.69,.99])};function OC(e,t){return e?"function"==typeof e?kC()?jS(e,t):"ease-out":f_(e)?TC(e):Array.isArray(e)?e.map(e=>OC(e,t)||PC.easeOut):PC[e]:void 0}function RC(e,t,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeOut",times:l}={},c=void 0){const d={[t]:n};l&&(d.offset=l);const u=OC(o,i);Array.isArray(u)&&(d.easing=u);const h={delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:a+1,direction:"reverse"===s?"alternate":"normal"};c&&(h.pseudoElement=c);return e.animate(d,h)}function IC(e){return"function"==typeof e&&"applyToOptions"in e}class DC extends tC{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:r,pseudoElement:i,allowFlatten:a=!1,finalKeyframe:s,onComplete:o}=e;this.isPseudoElement=Boolean(i),this.allowFlatten=a,this.options=e,e.type;const l=function({type:e,...t}){return IC(e)&&kC()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}(e);this.animation=RC(t,n,r,l,i),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const e=ZS(r,this.options,s,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}null==o||o(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;null==(t=(e=this.animation).finish)||t.call(e)}cancel(){try{this.animation.cancel()}catch(CI){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||null==(t=(e=this.animation).commitStyles)||t.call(e)}get duration(){var e,t;const n=(null==(t=null==(e=this.animation.effect)?void 0:e.getComputedTiming)?void 0:t.call(e).duration)||0;return QN(Number(n))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+QN(e)}get time(){return QN(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ZN(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var n;return this.allowFlatten&&(null==(n=this.animation.effect)||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&AC()?(this.animation.timeline=e,qN):t(this)}}const LC={anticipate:l_,backInOut:o_,circInOut:u_};function BC(e){"string"==typeof e.ease&&e.ease in LC&&(e.ease=LC[e.ease])}class FC extends DC{constructor(e){BC(e),eC(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:r,element:i,...a}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);const s=new rC({...a,autoplay:!1}),o=ZN(this.finishedTime??this.time);t.setWithVelocity(s.sample(o-10).value,s.sample(o).value,10),s.stop()}}const UC=(e,t)=>"zIndex"!==t&&(!("number"!=typeof e&&!Array.isArray(e))||!("string"!=typeof e||!sS.test(e)&&"0"!==e||e.startsWith("url(")));function zC(e){e.duration=0,e.type="keyframes"}const HC=new Set(["opacity","clipPath","filter","transform"]),VC=KN(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class GC extends tC{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a="loop",keyframes:s,name:o,motionValue:l,element:c,...d}){var u;super(),this.stop=()=>{var e,t;this._animation&&(this._animation.stop(),null==(e=this.stopTimeline)||e.call(this)),null==(t=this.keyframeResolver)||t.cancel()},this.createdAt=C_.now();const h={autoplay:e,delay:t,type:n,repeat:r,repeatDelay:i,repeatType:a,name:o,motionValue:l,element:c,...d},p=(null==c?void 0:c.KeyframeResolver)||CC;this.keyframeResolver=new p(s,(e,t,n)=>this.onKeyframesResolved(e,t,h,!n),o,l,c),null==(u=this.keyframeResolver)||u.scheduleResolve()}onKeyframesResolved(e,t,n,r){this.keyframeResolver=void 0;const{name:i,type:a,velocity:s,delay:o,isHandoff:l,onUpdate:c}=n;this.resolvedAt=C_.now(),function(e,t,n,r){const i=e[0];if(null===i)return!1;if("display"===t||"visibility"===t)return!0;const a=e[e.length-1],s=UC(i,t),o=UC(a,t);return!(!s||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||IC(n))&&r)}(e,i,a,s)||(!HN.instantAnimations&&o||null==c||c(ZS(e,n,t)),e[0]=e[e.length-1],zC(n),n.repeat=0);const d={startTime:r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},u=!l&&function(e){var t;const{motionValue:n,name:r,repeatDelay:i,repeatType:a,damping:s,type:o}=e;if(!((null==(t=null==n?void 0:n.owner)?void 0:t.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return VC()&&r&&HC.has(r)&&("transform"!==r||!c)&&!l&&!i&&"mirror"!==a&&0!==s&&"inertia"!==o}(d)?new FC({...d,element:d.motionValue.owner.current}):new rC(d);u.finished.then(()=>this.notifyFinished()).catch(qN),this.pendingTimeline&&(this.stopTimeline=u.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=u}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||(null==(e=this.keyframeResolver)||e.resume(),NC=!0,SC(),_C(),NC=!1),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),null==(e=this.keyframeResolver)||e.cancel()}}const WC=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function KC(e,t,n=1){const[r,i]=function(e){const t=WC.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const e=a.trim();return VN(e)?parseFloat(e):e}return k_(i)?KC(i,t,n+1):i}function qC(e,t){return(null==e?void 0:e[t])??(null==e?void 0:e.default)??e}const XC=new Set(["width","height","top","left","right","bottom",...mC]),$C=e=>t=>t.test(e),YC=[P_,K_,W_,G_,X_,q_,{test:e=>"auto"===e,parse:e=>e}],JC=e=>YC.find($C(e));function ZC(e){return"number"==typeof e?0===e:null===e||("none"===e||"0"===e||WN(e))}const QC=new Set(["brightness","contrast","saturate","opacity"]);function eA(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(D_)||[];if(!r)return e;const i=n.replace(r,"");let a=QC.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+i+")"}const tA=/\b([a-z-]*)\(.*?\)/gu,nA={...sS,getAnimatableNone:e=>{const t=e.match(tA);return t?t.map(eA).join(" "):e}},rA={...P_,transform:Math.round},iA={borderWidth:K_,borderTopWidth:K_,borderRightWidth:K_,borderBottomWidth:K_,borderLeftWidth:K_,borderRadius:K_,radius:K_,borderTopLeftRadius:K_,borderTopRightRadius:K_,borderBottomRightRadius:K_,borderBottomLeftRadius:K_,width:K_,maxWidth:K_,height:K_,maxHeight:K_,top:K_,right:K_,bottom:K_,left:K_,padding:K_,paddingTop:K_,paddingRight:K_,paddingBottom:K_,paddingLeft:K_,margin:K_,marginTop:K_,marginRight:K_,marginBottom:K_,marginLeft:K_,backgroundPositionX:K_,backgroundPositionY:K_,...{rotate:G_,rotateX:G_,rotateY:G_,rotateZ:G_,scale:R_,scaleX:R_,scaleY:R_,scaleZ:R_,skew:G_,skewX:G_,skewY:G_,distance:K_,translateX:K_,translateY:K_,translateZ:K_,x:K_,y:K_,z:K_,perspective:K_,transformPerspective:K_,opacity:O_,originX:$_,originY:$_,originZ:K_},zIndex:rA,fillOpacity:O_,strokeOpacity:O_,numOctaves:rA},aA={...iA,color:J_,backgroundColor:J_,outlineColor:J_,fill:J_,stroke:J_,borderColor:J_,borderTopColor:J_,borderRightColor:J_,borderBottomColor:J_,borderLeftColor:J_,filter:nA,WebkitFilter:nA},sA=e=>aA[e];function oA(e,t){let n=sA(e);return n!==nA&&(n=sS),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const lA=new Set(["auto","none","0"]);class cA extends CC{constructor(e,t,n,r,i){super(e,t,n,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let n=e[o];if("string"==typeof n&&(n=n.trim(),k_(n))){const r=KC(n,t.current);void 0!==r&&(e[o]=r),o===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!XC.has(n)||2!==e.length)return;const[r,i]=e,a=JC(r),s=JC(i);if(a!==s)if(gC(a)&&gC(s))for(let o=0;o<e.length;o++){const t=e[o];"string"==typeof t&&(e[o]=parseFloat(t))}else yC[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let r=0;r<e.length;r++)(null===e[r]||ZC(e[r]))&&n.push(r);n.length&&function(e,t,n){let r,i=0;for(;i<e.length&&!r;){const t=e[i];"string"==typeof t&&!lA.has(t)&&nS(t).values.length&&(r=e[i]),i++}if(r&&n)for(const a of t)e[a]=oA(n,r)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=yC[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,s=r[a];r[a]=yC[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==s&&void 0===this.finalKeyframe&&(this.finalKeyframe=s),(null==(e=this.removedTransforms)?void 0:e.length)&&this.removedTransforms.forEach(([e,n])=>{t.getValue(e).set(n)}),this.resolveNoneKeyframes()}}function dA(e,t,n){if(e instanceof EventTarget)return[e];if("string"==typeof e){const t=document.querySelectorAll(e);return t?Array.from(t):[]}return Array.from(e)}const uA=(e,t)=>t&&"number"==typeof e?t.transform(e):e;function hA(e){return GN(e)&&"offsetHeight"in e}const pA={current:void 0};class mA{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{var t;const n=C_.now();if(this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(null==(t=this.events.change)||t.notify(this.current),this.dependents))for(const r of this.dependents)r.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=C_.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new JN);const n=this.events[e].add(t);return"change"===e?()=>{n(),b_.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;null==(e=this.events.change)||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return pA.current&&pA.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=C_.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return e_(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;null==(e=this.dependents)||e.clear(),null==(t=this.events.destroy)||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function fA(e,t){return new mA(e,t)}const{schedule:gA}=y_(queueMicrotask,!1),vA={x:!1,y:!1};function xA(){return vA.x||vA.y}function yA(e,t){const n=dA(e),r=new AbortController;return[n,{passive:!0,...t,signal:r.signal},()=>r.abort()]}function bA(e){return!("touch"===e.pointerType||xA())}const wA=(e,t)=>!!t&&(e===t||wA(e,t.parentElement)),jA=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary,NA=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const _A=new WeakSet;function SA(e){return t=>{"Enter"===t.key&&e(t)}}function CA(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function AA(e){return jA(e)&&!xA()}function MA(e,t,n={}){const[r,i,a]=yA(e,n),s=e=>{const r=e.currentTarget;if(!AA(e))return;_A.add(r);const a=t(r,e),s=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),_A.has(r)&&_A.delete(r),AA(e)&&"function"==typeof a&&a(e,{success:t})},o=e=>{s(e,r===window||r===document||n.useGlobalTarget||wA(r,e.target))},l=e=>{s(e,!1)};window.addEventListener("pointerup",o,i),window.addEventListener("pointercancel",l,i)};return r.forEach(e=>{var t;(n.useGlobalTarget?window:e).addEventListener("pointerdown",s,i),hA(e)&&(e.addEventListener("focus",e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const r=SA(()=>{if(_A.has(n))return;CA(n,"down");const e=SA(()=>{CA(n,"up")});n.addEventListener("keyup",e,t),n.addEventListener("blur",()=>CA(n,"cancel"),t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)})(e,i)),t=e,NA.has(t.tagName)||-1!==t.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))}),a}function EA(e){return GN(e)&&"ownerSVGElement"in e}const kA=new WeakMap;let TA;const PA=(e,t,n)=>(r,i)=>i&&i[0]?i[0][e+"Size"]:EA(r)&&"getBBox"in r?r.getBBox()[t]:r[n],OA=PA("inline","width","offsetWidth"),RA=PA("block","height","offsetHeight");function IA({target:e,borderBoxSize:t}){var n;null==(n=kA.get(e))||n.forEach(n=>{n(e,{get width(){return OA(e,t)},get height(){return RA(e,t)}})})}function DA(e){e.forEach(IA)}function LA(e,t){TA||"undefined"!=typeof ResizeObserver&&(TA=new ResizeObserver(DA));const n=dA(e);return n.forEach(e=>{let n=kA.get(e);n||(n=new Set,kA.set(e,n)),n.add(t),null==TA||TA.observe(e)}),()=>{n.forEach(e=>{const n=kA.get(e);null==n||n.delete(t),(null==n?void 0:n.size)||null==TA||TA.unobserve(e)})}}const BA=new Set;let FA;function UA(e){return BA.add(e),FA||(FA=()=>{const e={get width(){return window.innerWidth},get height(){return window.innerHeight}};BA.forEach(t=>t(e))},window.addEventListener("resize",FA)),()=>{BA.delete(e),BA.size||"function"!=typeof FA||(window.removeEventListener("resize",FA),FA=void 0)}}function zA(e,t){let n;const r=()=>{const{currentTime:r}=t,i=(null===r?0:r.value)/100;n!==i&&e(i),n=i};return b_.preUpdate(r,!0),()=>w_(r)}const HA=e=>Boolean(e&&e.getVelocity),VA=[...YC,J_,sS],GA=Ve.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function WA(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function KA(...e){return Ve.useCallback(function(...e){return t=>{let n=!1;const r=e.map(e=>{const r=WA(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){const n=r[t];"function"==typeof n?n():WA(e[t],null)}}}}(...e),e)}class qA extends Ve.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=hA(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function XA({children:e,isPresent:t,anchorX:n,root:r}){const i=Ve.useId(),a=Ve.useRef(null),s=Ve.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=Ve.useContext(GA),l=KA(a,null==e?void 0:e.ref);return Ve.useInsertionEffect(()=>{const{width:e,height:l,top:c,left:d,right:u}=s.current;if(t||!a.current||!e||!l)return;const h="left"===n?`left: ${d}`:`right: ${u}`;a.current.dataset.motionPopId=i;const p=document.createElement("style");o&&(p.nonce=o);const m=r??document.head;return m.appendChild(p),p.sheet&&p.sheet.insertRule(`\n          [data-motion-pop-id="${i}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${l}px !important;\n            ${h}px !important;\n            top: ${c}px !important;\n          }\n        `),()=>{m.contains(p)&&m.removeChild(p)}},[t]),Qe.jsx(qA,{isPresent:t,childRef:a,sizeRef:s,children:Ve.cloneElement(e,{ref:l})})}const $A=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:s,anchorX:o,root:l})=>{const c=IN(YA),d=Ve.useId();let u=!0,h=Ve.useMemo(()=>(u=!1,{id:d,initial:t,isPresent:n,custom:i,onExitComplete:e=>{c.set(e,!0);for(const t of c.values())if(!t)return;r&&r()},register:e=>(c.set(e,!1),()=>c.delete(e))}),[n,c,r]);return a&&u&&(h={...h}),Ve.useMemo(()=>{c.forEach((e,t)=>c.set(t,!1))},[n]),Ve.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),"popLayout"===s&&(e=Qe.jsx(XA,{isPresent:n,anchorX:o,root:l,children:e})),Qe.jsx(BN.Provider,{value:h,children:e})};function YA(){return new Map}function JA(e=!0){const t=Ve.useContext(BN);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,a=Ve.useId();Ve.useEffect(()=>{if(e)return i(a)},[e]);const s=Ve.useCallback(()=>e&&r&&r(a),[a,r,e]);return!n&&r?[!1,s]:[!0]}const ZA=e=>e.key||"";function QA(e){const t=[];return Ve.Children.forEach(e,e=>{Ve.isValidElement(e)&&t.push(e)}),t}const eM=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:s=!1,anchorX:o="left",root:l})=>{const[c,d]=JA(s),u=Ve.useMemo(()=>QA(e),[e]),h=s&&!c?[]:u.map(ZA),p=Ve.useRef(!0),m=Ve.useRef(u),f=IN(()=>new Map),[g,v]=Ve.useState(u),[x,y]=Ve.useState(u);LN(()=>{p.current=!1,m.current=u;for(let e=0;e<x.length;e++){const t=ZA(x[e]);h.includes(t)?f.delete(t):!0!==f.get(t)&&f.set(t,!1)}},[x,h.length,h.join("-")]);const b=[];if(u!==g){let e=[...u];for(let t=0;t<x.length;t++){const n=x[t],r=ZA(n);h.includes(r)||(e.splice(t,0,n),b.push(n))}return"wait"===a&&b.length&&(e=b),y(QA(e)),v(u),null}const{forceRender:w}=Ve.useContext(RN);return Qe.jsx(Qe.Fragment,{children:x.map(e=>{const g=ZA(e),v=!(s&&!c)&&(u===x||h.includes(g));return Qe.jsx($A,{isPresent:v,initial:!(p.current&&!n)&&void 0,custom:t,presenceAffectsLayout:i,mode:a,root:l,onExitComplete:v?void 0:()=>{if(!f.has(g))return;f.set(g,!0);let e=!0;f.forEach(t=>{t||(e=!1)}),e&&(null==w||w(),y(m.current),s&&(null==d||d()),r&&r())},anchorX:o,children:e},g)})})},tM=Ve.createContext({strict:!1}),nM={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},rM={};for(const d$e in nM)rM[d$e]={isEnabled:e=>nM[d$e].some(t=>!!e[t])};const iM=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function aM(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||iM.has(e)}let sM=e=>!aM(e);try{"function"==typeof(oM=require("@emotion/is-prop-valid").default)&&(sM=e=>e.startsWith("on")?!aM(e):oM(e))}catch{}var oM;const lM=Ve.createContext({});function cM(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function dM(e){return"string"==typeof e||Array.isArray(e)}const uM=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],hM=["initial",...uM];function pM(e){return cM(e.animate)||hM.some(t=>dM(e[t]))}function mM(e){return Boolean(pM(e)||e.variants)}function fM(e){const{initial:t,animate:n}=function(e,t){if(pM(e)){const{initial:t,animate:n}=e;return{initial:!1===t||dM(t)?t:void 0,animate:dM(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,Ve.useContext(lM));return Ve.useMemo(()=>({initial:t,animate:n}),[gM(t),gM(n)])}function gM(e){return Array.isArray(e)?e.join(" "):e}const vM={};function xM(e,{layout:t,layoutId:n}){return fC.has(e)||e.startsWith("origin")||(t||void 0!==n)&&(!!vM[e]||"opacity"===e)}const yM={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},bM=mC.length;function wM(e,t,n){const{style:r,vars:i,transformOrigin:a}=e;let s=!1,o=!1;for(const l in t){const e=t[l];if(fC.has(l))s=!0;else if(M_(l))i[l]=e;else{const t=uA(e,iA[l]);l.startsWith("origin")?(o=!0,a[l]=t):r[l]=t}}if(t.transform||(s||n?r.transform=function(e,t,n){let r="",i=!0;for(let a=0;a<bM;a++){const s=mC[a],o=e[s];if(void 0===o)continue;let l=!0;if(l="number"==typeof o?o===(s.startsWith("scale")?1:0):0===parseFloat(o),!l||n){const e=uA(o,iA[s]);l||(i=!1,r+=`${yM[s]||s}(${e}) `),n&&(t[s]=e)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:n=0}=a;r.transformOrigin=`${e} ${t} ${n}`}}const jM=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function NM(e,t,n){for(const r in t)HA(t[r])||xM(r,n)||(e[r]=t[r])}function _M(e,t){const n={};return NM(n,e.style||{},e),Object.assign(n,function({transformTemplate:e},t){return Ve.useMemo(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{}};return wM(n,t,e),Object.assign({},n.vars,n.style)},[t])}(e,t)),n}function SM(e,t){const n={},r=_M(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const CM={offset:"stroke-dashoffset",array:"stroke-dasharray"},AM={offset:"strokeDashoffset",array:"strokeDasharray"};function MM(e,{attrX:t,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:s=0,...o},l,c,d){if(wM(e,o,c),l)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:u,style:h}=e;u.transform&&(h.transform=u.transform,delete u.transform),(h.transform||u.transformOrigin)&&(h.transformOrigin=u.transformOrigin??"50% 50%",delete u.transformOrigin),h.transform&&(h.transformBox=(null==d?void 0:d.transformBox)??"fill-box",delete u.transformBox),void 0!==t&&(u.x=t),void 0!==n&&(u.y=n),void 0!==r&&(u.scale=r),void 0!==i&&function(e,t,n=1,r=0,i=!0){e.pathLength=1;const a=i?CM:AM;e[a.offset]=K_.transform(-r);const s=K_.transform(t),o=K_.transform(n);e[a.array]=`${s} ${o}`}(u,i,a,s,!1)}const EM=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),kM=e=>"string"==typeof e&&"svg"===e.toLowerCase();function TM(e,t,n,r){const i=Ve.useMemo(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return MM(n,t,kM(r),e.transformTemplate,e.style),{...n.attrs,style:{...n.style}}},[t]);if(e.style){const t={};NM(t,e.style,e),i.style={...t,...i.style}}return i}const PM=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function OM(e){return"string"==typeof e&&!e.includes("-")&&!!(PM.indexOf(e)>-1||/[A-Z]/u.test(e))}function RM(e,t,n,{latestValues:r},i,a=!1){const s=(OM(e)?TM:SM)(t,r,i,e),o=function(e,t,n){const r={};for(const i in e)"values"===i&&"object"==typeof e.values||(sM(i)||!0===n&&aM(i)||!t&&!aM(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(t,"string"==typeof e,a),l=e!==Ve.Fragment?{...o,...s,ref:n}:{},{children:c}=t,d=Ve.useMemo(()=>HA(c)?c.get():c,[c]);return Ve.createElement(e,{...l,children:d})}function IM(e){const t=[{},{}];return null==e||e.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function DM(e,t,n,r){if("function"==typeof t){const[i,a]=IM(r);t=t(void 0!==n?n:e.custom,i,a)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){const[i,a]=IM(r);t=t(void 0!==n?n:e.custom,i,a)}return t}function LM(e){return HA(e)?e.get():e}function BM(e,t,n,r){const i={},a=r(e,{});for(const h in a)i[h]=LM(a[h]);let{initial:s,animate:o}=e;const l=pM(e),c=mM(e);t&&c&&!l&&!1!==e.inherit&&(void 0===s&&(s=t.initial),void 0===o&&(o=t.animate));let d=!!n&&!1===n.initial;d=d||!1===s;const u=d?o:s;if(u&&"boolean"!=typeof u&&!cM(u)){const t=Array.isArray(u)?u:[u];for(let n=0;n<t.length;n++){const r=DM(e,t[n]);if(r){const{transitionEnd:e,transition:t,...n}=r;for(const r in n){let e=n[r];if(Array.isArray(e)){e=e[d?e.length-1:0]}null!==e&&(i[r]=e)}for(const r in e)i[r]=e[r]}}}return i}const FM=e=>(t,n)=>{const r=Ve.useContext(lM),i=Ve.useContext(BN),a=()=>function({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,i){return{latestValues:BM(n,r,i,e),renderState:t()}}(e,t,r,i);return n?a():IN(a)};function UM(e,t,n){var r;const{style:i}=e,a={};for(const s in i)(HA(i[s])||t.style&&HA(t.style[s])||xM(s,e)||void 0!==(null==(r=null==n?void 0:n.getValue(s))?void 0:r.liveStyle))&&(a[s]=i[s]);return a}const zM=FM({scrapeMotionValuesFromProps:UM,createRenderState:jM});function HM(e,t,n){const r=UM(e,t,n);for(const i in e)if(HA(e[i])||HA(t[i])){r[-1!==mC.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=e[i]}return r}const VM=FM({scrapeMotionValuesFromProps:HM,createRenderState:EM}),GM=Symbol.for("motionComponentSymbol");function WM(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function KM(e,t,n){return Ve.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"==typeof n?n(r):WM(n)&&(n.current=r))},[t])}const qM=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),XM="data-"+qM("framerAppearId"),$M=Ve.createContext({});function YM(e,t,n,r,i){var a,s;const{visualElement:o}=Ve.useContext(lM),l=Ve.useContext(tM),c=Ve.useContext(BN),d=Ve.useContext(GA).reducedMotion,u=Ve.useRef(null);r=r||l.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:o,props:n,presenceContext:c,blockInitialAnimation:!!c&&!1===c.initial,reducedMotionConfig:d}));const h=u.current,p=Ve.useContext($M);!h||h.projection||!i||"html"!==h.type&&"svg"!==h.type||function(e,t,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:JM(e.parent)),e.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:Boolean(s)||o&&WM(o),visualElement:e,animationType:"string"==typeof a?a:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:c})}(u.current,n,i,p);const m=Ve.useRef(!1);Ve.useInsertionEffect(()=>{h&&m.current&&h.update(n,c)});const f=n[XM],g=Ve.useRef(Boolean(f)&&!(null==(a=window.MotionHandoffIsComplete)?void 0:a.call(window,f))&&(null==(s=window.MotionHasOptimisedAnimation)?void 0:s.call(window,f)));return LN(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),g.current&&h.animationState&&h.animationState.animateChanges())}),Ve.useEffect(()=>{h&&(!g.current&&h.animationState&&h.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var e;null==(e=window.MotionHandoffMarkAsComplete)||e.call(window,f)}),g.current=!1),h.enteringChildren=void 0)}),h}function JM(e){if(e)return!1!==e.options.allowProjection?e.projection:JM(e.parent)}function ZM(e,{forwardMotionProps:t=!1}={},n,r){n&&function(e){for(const t in e)rM[t]={...rM[t],...e[t]}}(n);const i=OM(e)?VM:zM;function a(n,a){let s;const o={...Ve.useContext(GA),...n,layoutId:QM(n)},{isStatic:l}=o,c=fM(n),d=i(n,l);if(!l&&DN){Ve.useContext(tM).strict;const t=function(e){const{drag:t,layout:n}=rM;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:(null==t?void 0:t.isEnabled(e))||(null==n?void 0:n.isEnabled(e))?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(o);s=t.MeasureLayout,c.visualElement=YM(e,d,o,r,t.ProjectionNode)}return Qe.jsxs(lM.Provider,{value:c,children:[s&&c.visualElement?Qe.jsx(s,{visualElement:c.visualElement,...o}):null,RM(e,n,KM(d,c.visualElement,a),d,l,t)]})}a.displayName=`motion.${"string"==typeof e?e:`create(${e.displayName??e.name??""})`}`;const s=Ve.forwardRef(a);return s[GM]=e,s}function QM({layoutId:e}){const t=Ve.useContext(RN).id;return t&&void 0!==e?t+"-"+e:e}function eE(e,t){if("undefined"==typeof Proxy)return ZM;const n=new Map,r=(n,r)=>ZM(n,r,e,t);return new Proxy((e,t)=>r(e,t),{get:(i,a)=>"create"===a?r:(n.has(a)||n.set(a,ZM(a,void 0,e,t)),n.get(a))})}function tE({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function nE(e){return void 0===e||1===e}function rE({scale:e,scaleX:t,scaleY:n}){return!nE(e)||!nE(t)||!nE(n)}function iE(e){return rE(e)||aE(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function aE(e){return sE(e.x)||sE(e.y)}function sE(e){return e&&"0%"!==e}function oE(e,t,n){return n+t*(e-n)}function lE(e,t,n,r,i){return void 0!==i&&(e=oE(e,i,r)),oE(e,n,r)+t}function cE(e,t=0,n=1,r,i){e.min=lE(e.min,t,n,r,i),e.max=lE(e.max,t,n,r,i)}function dE(e,{x:t,y:n}){cE(e.x,t.translate,t.scale,t.originPoint),cE(e.y,n.translate,n.scale,n.originPoint)}const uE=.999999999999,hE=1.0000000000001;function pE(e,t){e.min=e.min+t,e.max=e.max+t}function mE(e,t,n,r,i=.5){cE(e,t,n,cS(e.min,e.max,i),r)}function fE(e,t){mE(e.x,t.x,t.scaleX,t.scale,t.originX),mE(e.y,t.y,t.scaleY,t.scale,t.originY)}function gE(e,t){return tE(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const vE=()=>({x:{min:0,max:0},y:{min:0,max:0}}),xE={current:null},yE={current:!1};const bE=new WeakMap;const wE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class jE{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:i,visualState:a},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=CC,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=C_.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,b_.render(this.render,!1,!0))};const{latestValues:o,renderState:l}=a;this.latestValues=o,this.baseTarget={...o},this.initialValues=t.initial?{...o}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=s,this.blockInitialAnimation=Boolean(i),this.isControllingVariants=pM(t),this.isVariantNode=mM(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(t,{},this);for(const u in d){const e=d[u];void 0!==o[u]&&HA(e)&&e.set(o[u])}}mount(e){var t;this.current=e,bE.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),yE.current||function(){if(yE.current=!0,DN)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>xE.current=e.matches;e.addEventListener("change",t),t()}else xE.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||xE.current),null==(t=this.parent)||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),w_(this.notifyUpdate),w_(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),null==(e=this.parent)||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=fC.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&b_.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),i&&i(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in rM){const t=rM[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<wE.length;n++){const t=wE[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){for(const r in t){const i=t[r],a=n[r];if(HA(i))e.addValue(r,i);else if(HA(a))e.addValue(r,fA(i,{owner:e}));else if(a!==i)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(i):t.hasAnimated||t.set(i)}else{const t=e.getStaticValue(r);e.addValue(r,fA(void 0!==t?t:i,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=fA(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var r;return null!=n&&("string"==typeof n&&(VN(n)||WN(n))?n=parseFloat(n):(r=n,!VA.find($C(r))&&sS.test(t)&&(n=oA(e,t))),this.setBaseTarget(e,HA(n)?n.get():n)),HA(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props;let r;if("string"==typeof n||"object"==typeof n){const i=DM(this.props,n,null==(t=this.presenceContext)?void 0:t.custom);i&&(r=i[e])}if(n&&void 0!==r)return r;const i=this.getBaseTargetFromProps(this.props,e);return void 0===i||HA(i)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:i}on(e,t){return this.events[e]||(this.events[e]=new JN),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){gA.render(this.render)}}class NE extends jE{constructor(){super(...arguments),this.KeyframeResolver=cA}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;HA(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function _E(e,{style:t,vars:n},r,i){const a=e.style;let s;for(s in t)a[s]=t[s];for(s in null==i||i.applyProjectionStyles(a,r),n)a.setProperty(s,n[s])}class SE extends NE{constructor(){super(...arguments),this.type="html",this.renderInstance=_E}readValueFromInstance(e,t){var n,r;if(fC.has(t))return(null==(n=this.projection)?void 0:n.isProjecting)?uC(t):((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return hC(n,t)})(e,t);{const n=(r=e,window.getComputedStyle(r)),i=(M_(t)?n.getPropertyValue(t):n[t])||0;return"string"==typeof i?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return gE(e,t)}build(e,t,n){wM(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return UM(e,t,n)}}const CE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);class AE extends NE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=vE}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(fC.has(t)){const e=sA(t);return e&&e.default||0}return t=CE.has(t)?t:qM(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return HM(e,t,n)}build(e,t,n){MM(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,r){!function(e,t,n,r){_E(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(CE.has(i)?i:qM(i),t.attrs[i])}(e,t,0,r)}mount(e){this.isSVGTag=kM(e.tagName),super.mount(e)}}const ME=(e,t)=>OM(e)?new AE(t):new SE(t,{allowProjection:e!==Ve.Fragment});function EE(e,t,n){const r=e.getProps();return DM(r,t,void 0!==n?n:r.custom,e)}const kE=e=>Array.isArray(e);function TE(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,fA(n))}function PE(e){return kE(e)?e[e.length-1]||0:e}function OE(e,t){const n=EE(e,t);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){TE(e,s,PE(a[s]))}}function RE(e,t){const n=e.getValue("willChange");if(r=n,Boolean(HA(r)&&r.add))return n.add(t);if(!n&&HN.WillChange){const n=new HN.WillChange("auto");e.addValue("willChange",n),n.add(t)}var r}function IE(e){return e.props[XM]}const DE=e=>null!==e;const LE={type:"spring",stiffness:500,damping:25,restSpeed:10},BE={type:"keyframes",duration:.8},FE={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},UE=(e,{keyframes:t})=>t.length>2?BE:fC.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:LE:FE;const zE=(e,t,n,r={},i,a)=>s=>{const o=qC(r,e)||{},l=o.delay||r.delay||0;let{elapsed:c=0}=r;c-=ZN(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-c,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:i};(function({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:l,elapsed:c,...d}){return!!Object.keys(d).length})(o)||Object.assign(d,UE(e,d)),d.duration&&(d.duration=ZN(d.duration)),d.repeatDelay&&(d.repeatDelay=ZN(d.repeatDelay)),void 0!==d.from&&(d.keyframes[0]=d.from);let u=!1;if((!1===d.type||0===d.duration&&!d.repeatDelay)&&(zC(d),0===d.delay&&(u=!0)),(HN.instantAnimations||HN.skipAnimations)&&(u=!0,zC(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,u&&!a&&void 0!==t.get()){const e=function(e,{repeat:t,repeatType:n="loop"}){const r=e.filter(DE);return r[t&&"loop"!==n&&t%2==1?0:r.length-1]}(d.keyframes,o);if(void 0!==e)return void b_.update(()=>{d.onUpdate(e),d.onComplete()})}return o.isSync?new rC(d):new GC(d)};function HE({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&!0!==t[n];return t[n]=!1,r}function VE(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:s,...o}=t;r&&(a=r);const l=[],c=i&&e.animationState&&e.animationState.getState()[i];for(const d in o){const t=e.getValue(d,e.latestValues[d]??null),r=o[d];if(void 0===r||c&&HE(c,d))continue;const i={delay:n,...qC(a||{},d)},s=t.get();if(void 0!==s&&!t.isAnimating&&!Array.isArray(r)&&r===s&&!i.velocity)continue;let u=!1;if(window.MotionHandoffAnimation){const t=IE(e);if(t){const e=window.MotionHandoffAnimation(t,d,b_);null!==e&&(i.startTime=e,u=!0)}}RE(e,d),t.start(zE(d,t,r,e.shouldReduceMotion&&XC.has(d)?{type:!1}:i,e,u));const h=t.animation;h&&l.push(h)}return s&&Promise.all(l).then(()=>{b_.update(()=>{s&&OE(e,s)})}),l}function GE(e,t,n,r=0,i=1){const a=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),s=e.size,o=(s-1)*r;return"function"==typeof n?n(a,s):1===i?a*r:o-a*r}function WE(e,t,n={}){var r;const i=EE(e,t,"exit"===n.type?null==(r=e.presenceContext)?void 0:r.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const s=i?()=>Promise.all(VE(e,i,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(r=0)=>{const{delayChildren:i=0,staggerChildren:s,staggerDirection:o}=a;return function(e,t,n=0,r=0,i=0,a=1,s){const o=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),o.push(WE(l,t,{...s,delay:n+("function"==typeof r?0:r)+GE(e.variantChildren,l,r,i,a)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}(e,t,r,i,s,o,n)}:()=>Promise.resolve(),{when:l}=a;if(l){const[e,t]="beforeChildren"===l?[s,o]:[o,s];return e().then(()=>t())}return Promise.all([s(),o(n.delay)])}function KE(e,t,n={}){let r;if(e.notify("AnimationStart",t),Array.isArray(t)){const i=t.map(t=>WE(e,t,n));r=Promise.all(i)}else if("string"==typeof t)r=WE(e,t,n);else{const i="function"==typeof t?EE(e,t,n.custom):t;r=Promise.all(VE(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function qE(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const XE=hM.length;function $E(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&$E(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<XE;n++){const r=hM[n],i=e.props[r];(dM(i)||!1===i)&&(t[r]=i)}return t}const YE=[...uM].reverse(),JE=uM.length;function ZE(e){let t=function(e){return t=>Promise.all(t.map(({animation:t,options:n})=>KE(e,t,n)))}(e),n=tk(),r=!0;const i=t=>(n,r)=>{var i;const a=EE(e,r,"exit"===t?null==(i=e.presenceContext)?void 0:i.custom:void 0);if(a){const{transition:e,transitionEnd:t,...r}=a;n={...n,...r,...t}}return n};function a(a){const{props:s}=e,o=$E(e.parent)||{},l=[],c=new Set;let d={},u=1/0;for(let t=0;t<JE;t++){const h=YE[t],p=n[h],m=void 0!==s[h]?s[h]:o[h],f=dM(m),g=h===a?p.isActive:null;!1===g&&(u=t);let v=m===o[h]&&m!==s[h]&&f;if(v&&r&&e.manuallyAnimateOnMount&&(v=!1),p.protectedKeys={...d},!p.isActive&&null===g||!m&&!p.prevProp||cM(m)||"boolean"==typeof m)continue;const x=QE(p.prevProp,m);let y=x||h===a&&p.isActive&&!v&&f||t>u&&f,b=!1;const w=Array.isArray(m)?m:[m];let j=w.reduce(i(h),{});!1===g&&(j={});const{prevResolvedValues:N={}}=p,_={...N,...j},S=t=>{y=!0,c.has(t)&&(b=!0,c.delete(t)),p.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in _){const t=j[e],n=N[e];if(d.hasOwnProperty(e))continue;let r=!1;r=kE(t)&&kE(n)?!qE(t,n):t!==n,r?null!=t?S(e):c.add(e):void 0!==t&&c.has(e)?S(e):p.protectedKeys[e]=!0}p.prevProp=m,p.prevResolvedValues=j,p.isActive&&(d={...d,...j}),r&&e.blockInitialAnimation&&(y=!1);const C=v&&x;y&&(!C||b)&&l.push(...w.map(t=>{const n={type:h};if("string"==typeof t&&r&&!C&&e.manuallyAnimateOnMount&&e.parent){const{parent:r}=e,i=EE(r,t);if(r.enteringChildren&&i){const{delayChildren:t}=i.transition||{};n.delay=GE(r.enteringChildren,e,t)}}return{animation:t,options:n}}))}if(c.size){const t={};if("boolean"!=typeof s.initial){const n=EE(e,Array.isArray(s.initial)?s.initial[0]:s.initial);n&&n.transition&&(t.transition=n.transition)}c.forEach(n=>{const r=e.getBaseTarget(n),i=e.getValue(n);i&&(i.liveStyle=!0),t[n]=r??null}),l.push({animation:t})}let h=Boolean(l.length);return!r||!1!==s.initial&&s.initial!==s.animate||e.manuallyAnimateOnMount||(h=!1),r=!1,h?t(l):Promise.resolve()}return{animateChanges:a,setActive:function(t,r){var i;if(n[t].isActive===r)return Promise.resolve();null==(i=e.variantChildren)||i.forEach(e=>{var n;return null==(n=e.animationState)?void 0:n.setActive(t,r)}),n[t].isActive=r;const s=a(t);for(const e in n)n[e].protectedKeys={};return s},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=tk()}}}function QE(e,t){return"string"==typeof t?t!==e:!!Array.isArray(t)&&!qE(t,e)}function ek(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function tk(){return{animate:ek(!0),whileInView:ek(),whileHover:ek(),whileTap:ek(),whileDrag:ek(),whileFocus:ek(),exit:ek()}}class nk{constructor(e){this.isMounted=!1,this.node=e}update(){}}let rk=0;const ik={animation:{Feature:class extends nk{constructor(e){super(e),e.animationState||(e.animationState=ZE(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();cM(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null==(e=this.unmountControls)||e.call(this)}}},exit:{Feature:class extends nk{constructor(){super(...arguments),this.id=rk++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}};function ak(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function sk(e){return{point:{x:e.pageX,y:e.pageY}}}function ok(e,t,n,r){return ak(e,t,(e=>t=>jA(t)&&e(t,sk(t)))(n),r)}function lk(e){return e.max-e.min}function ck(e,t,n,r=.5){e.origin=r,e.originPoint=cS(t.min,t.max,e.origin),e.scale=lk(n)/lk(t),e.translate=cS(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function dk(e,t,n,r){ck(e.x,t.x,n.x,r?r.originX:void 0),ck(e.y,t.y,n.y,r?r.originY:void 0)}function uk(e,t,n){e.min=n.min+t.min,e.max=e.min+lk(t)}function hk(e,t,n){e.min=t.min-n.min,e.max=e.min+lk(t)}function pk(e,t,n){hk(e.x,t.x,n.x),hk(e.y,t.y,n.y)}function mk(e){return[e("x"),e("y")]}const fk=({current:e})=>e?e.ownerDocument.defaultView:null,gk=(e,t)=>Math.abs(e-t);class vk{constructor(e,t,{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:i=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=bk(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=gk(e.x,t.x),r=gk(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!n)return;const{point:r}=e,{timestamp:i}=j_;this.history.push({...r,timestamp:i});const{onStart:a,onMove:s}=this.handlers;t||(a&&a(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),s&&s(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=xk(t,this.transformPagePoint),b_.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const a=bk("pointercancel"===e.type?this.lastMoveEventInfo:xk(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,a),r&&r(e,a)},!jA(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=a,this.contextWindow=r||window;const s=xk(sk(e),this.transformPagePoint),{point:o}=s,{timestamp:l}=j_;this.history=[{...o,timestamp:l}];const{onSessionStart:c}=t;c&&c(e,bk(s,this.history)),this.removeListeners=$N(ok(this.contextWindow,"pointermove",this.handlePointerMove),ok(this.contextWindow,"pointerup",this.handlePointerUp),ok(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),w_(this.updatePoint)}}function xk(e,t){return t?{point:t(e.point)}:e}function yk(e,t){return{x:e.x-t.x,y:e.y-t.y}}function bk({point:e},t){return{point:e,delta:yk(e,jk(t)),offset:yk(e,wk(t)),velocity:Nk(t,.1)}}function wk(e){return e[0]}function jk(e){return e[e.length-1]}function Nk(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=jk(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>ZN(t)));)n--;if(!r)return{x:0,y:0};const a=QN(i.timestamp-r.timestamp);if(0===a)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function _k(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function Sk(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const Ck=.35;function Ak(e,t,n){return{min:Mk(e,t),max:Mk(e,n)}}function Mk(e,t){return"number"==typeof e?e:e[t]||0}const Ek=new WeakMap;class kk{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:n}={}){const{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;const{dragSnapToOrigin:i}=this.getProps();this.panSession=new vk(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(sk(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:i}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(a=n)||"y"===a?vA[a]?null:(vA[a]=!0,()=>{vA[a]=!1}):vA.x||vA.y?null:(vA.x=vA.y=!0,()=>{vA.x=vA.y=!1}),!this.openDragLock))return;var a;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),mk(e=>{let t=this.getAxisMotionValue(e).get()||0;if(W_.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=lk(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),i&&b_.postRender(()=>i(e,t)),RE(this.visualElement,"transform");const{animationState:s}=this.visualElement;s&&s.setActive("whileDrag",!0)},onMove:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:a}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:s}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e,t=10){let n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(s),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",t.point,s),this.updateAxis("y",t.point,s),this.visualElement.render(),a&&a(e,t)},onSessionEnd:(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},resumeAnimation:()=>mk(e=>{var t;return"paused"===this.getAnimationState(e)&&(null==(t=this.getAxisMotionValue(e).animation)?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:i,distanceThreshold:n,contextWindow:fk(this.visualElement)})}stop(e,t){const n=e||this.latestPointerEvent,r=t||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!r||!n)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:s}=this.getProps();s&&b_.postRender(()=>s(n,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!Tk(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=function(e,{min:t,max:n},r){return void 0!==t&&e<t?e=r?cS(t,e,r.min):Math.max(e,t):void 0!==n&&e>n&&(e=r?cS(n,e,r.max):Math.min(e,n)),e}(a,this.constraints[e],this.elastic[e])),i.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null==(e=this.visualElement.projection)?void 0:e.layout,i=this.constraints;t&&WM(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,{top:t,left:n,bottom:r,right:i}){return{x:_k(e.x,n,i),y:_k(e.y,t,r)}}(r.layoutBox,t),this.elastic=function(e=Ck){return!1===e?e=0:!0===e&&(e=Ck),{x:Ak(e,"left","right"),y:Ak(e,"top","bottom")}}(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&mk(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!WM(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=function(e,t,n){const r=gE(e,n),{scroll:i}=t;return i&&(pE(r.x,i.offset.x),pE(r.y,i.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let a=function(e,t){return{x:Sk(e.x,t.x),y:Sk(e.y,t.y)}}(r.layout.layoutBox,i);if(t){const e=t(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=tE(e))}return a}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:s}=this.getProps(),o=this.constraints||{},l=mk(s=>{if(!Tk(s,t,this.currentDirection))return;let l=o&&o[s]||{};a&&(l={min:0,max:0});const c=r?200:1e6,d=r?40:1e7,u={type:"inertia",velocity:n?e[s]:0,bounceStiffness:c,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...i,...l};return this.startAxisValueAnimation(s,u)});return Promise.all(l).then(s)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return RE(this.visualElement,e),n.start(zE(e,n,0,t,this.visualElement,!1))}stopAnimation(){mk(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){mk(e=>{var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.pause()})}getAnimationState(e){var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){mk(t=>{const{drag:n}=this.getProps();if(!Tk(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:a}=r.layout.layoutBox[t];i.set(e[t]-cS(n,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!WM(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};mk(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();r[e]=function(e,t){let n=.5;const r=lk(e),i=lk(t);return i>r?n=YN(t.min,t.max-r,e.min):r>i&&(n=YN(e.min,e.max-i,t.min)),zN(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),mk(t=>{if(!Tk(t,e,null))return;const n=this.getAxisMotionValue(t),{min:i,max:a}=this.constraints[t];n.set(cS(i,a,r[t]))})}addListeners(){if(!this.visualElement.current)return;Ek.set(this.visualElement,this);const e=ok(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();WM(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),b_.read(t);const i=ak(window,"resize",()=>this.scalePositionWithinConstraints()),a=n.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(mk(t=>{const n=this.getAxisMotionValue(t);n&&(this.originPoint[t]+=e[t].translate,n.set(n.get()+e[t].translate))}),this.visualElement.render())});return()=>{i(),e(),r(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:a=Ck,dragMomentum:s=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:a,dragMomentum:s}}}function Tk(e,t,n){return!(!0!==t&&t!==e||null!==n&&n!==e)}const Pk=e=>(t,n)=>{e&&b_.postRender(()=>e(t,n))};const Ok={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Rk(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ik={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!K_.test(e))return e;e=parseFloat(e)}return`${Rk(e,t.target.x)}% ${Rk(e,t.target.y)}%`}},Dk={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=sS.parse(e);if(i.length>5)return r;const a=sS.createTransformer(e),s="number"!=typeof i[0]?1:0,o=n.x.scale*t.x,l=n.y.scale*t.y;i[0+s]/=o,i[1+s]/=l;const c=cS(o,l,.5);return"number"==typeof i[2+s]&&(i[2+s]/=c),"number"==typeof i[3+s]&&(i[3+s]/=c),a(i)}};let Lk=!1;class Bk extends Ve.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;!function(e){for(const t in e)vM[t]=e[t],M_(t)&&(vM[t].isCSSVariable=!0)}(Uk),i&&(t.group&&t.group.add(i),n&&n.register&&r&&n.register(i),Lk&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Ok.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:i}=this.props,{projection:a}=n;return a?(a.isPresent=i,Lk=!0,r||e.layoutDependency!==t||void 0===t||e.isPresent!==i?a.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?a.promote():a.relegate()||b_.postRender(()=>{const e=a.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),gA.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;Lk=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Fk(e){const[t,n]=JA(),r=Ve.useContext(RN);return Qe.jsx(Bk,{...e,layoutGroup:r,switchLayoutGroup:Ve.useContext($M),isPresent:t,safeToRemove:n})}const Uk={borderRadius:{...Ik,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ik,borderTopRightRadius:Ik,borderBottomLeftRadius:Ik,borderBottomRightRadius:Ik,boxShadow:Dk};const zk=(e,t)=>e.depth-t.depth;class Hk{constructor(){this.children=[],this.isDirty=!1}add(e){FN(this.children,e),this.isDirty=!0}remove(e){UN(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(zk),this.isDirty=!1,this.children.forEach(e)}}const Vk=["TopLeft","TopRight","BottomLeft","BottomRight"],Gk=Vk.length,Wk=e=>"string"==typeof e?parseFloat(e):e,Kk=e=>"number"==typeof e||K_.test(e);function qk(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const Xk=Yk(0,.5,d_),$k=Yk(.5,.95,qN);function Yk(e,t,n){return r=>r<e?0:r>t?1:n(YN(e,t,r))}function Jk(e,t){e.min=t.min,e.max=t.max}function Zk(e,t){Jk(e.x,t.x),Jk(e.y,t.y)}function Qk(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function eT(e,t,n,r,i){return e=oE(e-=t,1/n,r),void 0!==i&&(e=oE(e,1/i,r)),e}function tT(e,t,[n,r,i],a,s){!function(e,t=0,n=1,r=.5,i,a=e,s=e){W_.test(t)&&(t=parseFloat(t),t=cS(s.min,s.max,t/100)-s.min);if("number"!=typeof t)return;let o=cS(a.min,a.max,r);e===a&&(o-=t),e.min=eT(e.min,t,n,o,i),e.max=eT(e.max,t,n,o,i)}(e,t[n],t[r],t[i],t.scale,a,s)}const nT=["x","scaleX","originX"],rT=["y","scaleY","originY"];function iT(e,t,n,r){tT(e.x,t,nT,n?n.x:void 0,r?r.x:void 0),tT(e.y,t,rT,n?n.y:void 0,r?r.y:void 0)}function aT(e){return 0===e.translate&&1===e.scale}function sT(e){return aT(e.x)&&aT(e.y)}function oT(e,t){return e.min===t.min&&e.max===t.max}function lT(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function cT(e,t){return lT(e.x,t.x)&&lT(e.y,t.y)}function dT(e){return lk(e.x)/lk(e.y)}function uT(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class hT{constructor(){this.members=[]}add(e){FN(this.members,e),e.scheduleRender()}remove(e){if(UN(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const pT=["","X","Y","Z"];let mT=0;function fT(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function gT(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=IE(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",b_,!(t||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&gT(r)}function vT({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(e={},n=(null==t?void 0:t())){this.id=mT++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(bT),this.nodes.forEach(AT),this.nodes.forEach(MT),this.nodes.forEach(wT)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let t=0;t<this.path.length;t++)this.path[t].shouldResetTransform=!0;this.root===this&&(this.nodes=new Hk)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new JN),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){const n=this.eventHandlers.get(e);n&&n.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t){if(this.instance)return;var n;this.isSVG=EA(t)&&!(EA(n=t)&&"svg"===n.tagName),this.instance=t;const{layoutId:r,layout:i,visualElement:a}=this.options;if(a&&!a.current&&a.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(i||r)&&(this.isLayoutDirty=!0),e){let n,r=0;const i=()=>this.root.updateBlockedByResize=!1;b_.read(()=>{r=window.innerWidth}),e(t,()=>{const e=window.innerWidth;e!==r&&(r=e,this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=C_.now(),r=({timestamp:i})=>{const a=i-n;a>=t&&(w_(r),e(a-t))};return b_.setup(r,!0),()=>w_(r)}(i,250),Ok.hasAnimatedSinceResize&&(Ok.hasAnimatedSinceResize=!1,this.nodes.forEach(CT)))})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&a&&(r||i)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:n,layout:r})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const i=this.options.transition||a.getDefaultTransition()||RT,{onLayoutAnimationStart:s,onLayoutAnimationComplete:o}=a.getProps(),l=!this.targetLayout||!cT(this.targetLayout,r),c=!t&&n;if(this.options.layoutRoot||this.resumeFrom||c||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const t={...qC(i,"layout"),onPlay:s,onComplete:o};(a.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t),this.setAnimationOrigin(e,c)}else t||CT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),w_(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ET),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&gT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const e=this.path[i];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(NT);if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(_T);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(ST),this.nodes.forEach(xT),this.nodes.forEach(yT)):this.nodes.forEach(_T),this.clearAllSnapshots();const e=C_.now();j_.delta=zN(0,1e3/60,e-j_.timestamp),j_.timestamp=e,j_.isProcessing=!0,N_.update.process(j_),N_.preRender.process(j_),N_.render.process(j_),j_.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,gA.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(jT),this.sharedNodes.forEach(kT)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,b_.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){b_.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||lk(this.snapshot.measuredBox.x)||lk(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=r(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!i)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!sT(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,a=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||iE(this.latestValues)||a)&&(i(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),LT((r=n).x),LT(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return{x:{min:0,max:0},y:{min:0,max:0}};const n=t.measureViewportBox();if(!((null==(e=this.scroll)?void 0:e.wasRoot)||this.path.some(FT))){const{scroll:e}=this.root;e&&(pE(n.x,e.offset.x),pE(n.y,e.offset.y))}return n}removeElementScroll(e){var t;const n={x:{min:0,max:0},y:{min:0,max:0}};if(Zk(n,e),null==(t=this.scroll)?void 0:t.wasRoot)return n;for(let r=0;r<this.path.length;r++){const t=this.path[r],{scroll:i,options:a}=t;t!==this.root&&i&&a.layoutScroll&&(i.wasRoot&&Zk(n,e),pE(n.x,i.offset.x),pE(n.y,i.offset.y))}return n}applyTransform(e,t=!1){const n={x:{min:0,max:0},y:{min:0,max:0}};Zk(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&fE(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),iE(e.latestValues)&&fE(n,e.latestValues)}return iE(this.latestValues)&&fE(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Zk(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!iE(e.latestValues))continue;rE(e.latestValues)&&e.updateSnapshot();const r=vE();Zk(r,e.measurePageBox()),iT(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return iE(this.latestValues)&&iT(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==j_.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null==(t=this.parent)?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:i,layoutId:a}=this.options;if(this.layout&&(i||a)){if(this.resolvedRelativeTargetAt=j_.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},pk(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),Zk(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}var s,o,l;if(this.relativeTarget||this.targetDelta)if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),s=this.target,o=this.relativeTarget,l=this.relativeParent.target,uk(s.x,o.x,l.x),uk(s.y,o.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Zk(this.target,this.layout.layoutBox),dE(this.target,this.targetDelta)):Zk(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},pk(this.relativeTargetOrigin,this.target,e.target),Zk(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(this.parent&&!rE(this.parent.latestValues)&&!aE(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||(null==(e=this.parent)?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===j_.timestamp&&(r=!1),r)return;const{layout:i,layoutId:a}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!i&&!a)return;Zk(this.layoutCorrected,this.layout.layoutBox);const s=this.treeScale.x,o=this.treeScale.y;!function(e,t,n,r=!1){const i=n.length;if(!i)return;let a,s;t.x=t.y=1;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:i}=a.options;i&&i.props.style&&"contents"===i.props.style.display||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&fE(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,dE(e,s)),r&&iE(a.latestValues)&&fE(e,a.latestValues))}t.x<hE&&t.x>uE&&(t.x=1),t.y<hE&&t.y>uE&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(Qk(this.prevProjectionDelta.x,this.projectionDelta.x),Qk(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),dk(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===s&&this.treeScale.y===o&&uT(this.projectionDelta.x,this.prevProjectionDelta.x)&&uT(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l))):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){var t;if(null==(t=this.options.visualElement)||t.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e,t=!1){const n=this.snapshot,r=n?n.latestValues:{},i={...this.latestValues},a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const s={x:{min:0,max:0},y:{min:0,max:0}},o=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,d=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(OT));let u;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,h,p,m;TT(a.x,e.x,n),TT(a.y,e.y,n),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(pk(s,this.layout.layoutBox,this.relativeParent.layout.layoutBox),l=this.relativeTarget,h=this.relativeTargetOrigin,p=s,m=n,PT(l.x,h.x,p.x,m),PT(l.y,h.y,p.y,m),u&&function(e,t){return oT(e.x,t.x)&&oT(e.y,t.y)}(this.relativeTarget,u)&&(this.isProjectionDirty=!1),u||(u={x:{min:0,max:0},y:{min:0,max:0}}),Zk(u,this.relativeTarget)),o&&(this.animationValues=i,function(e,t,n,r,i,a){i?(e.opacity=cS(0,n.opacity??1,Xk(r)),e.opacityExit=cS(t.opacity??1,0,$k(r))):a&&(e.opacity=cS(t.opacity??1,n.opacity??1,r));for(let s=0;s<Gk;s++){const i=`border${Vk[s]}Radius`;let a=qk(t,i),o=qk(n,i);void 0===a&&void 0===o||(a||(a=0),o||(o=0),0===a||0===o||Kk(a)===Kk(o)?(e[i]=Math.max(cS(Wk(a),Wk(o),r),0),(W_.test(o)||W_.test(a))&&(e[i]+="%")):e[i]=o)}(t.rotate||n.rotate)&&(e.rotate=cS(t.rotate||0,n.rotate||0,r))}(i,r,this.latestValues,n,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){var t,n,r;this.notifyListeners("animationStart"),null==(t=this.currentAnimation)||t.stop(),null==(r=null==(n=this.resumingFrom)?void 0:n.currentAnimation)||r.stop(),this.pendingAnimation&&(w_(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=b_.update(()=>{Ok.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=fA(0)),this.currentAnimation=function(e,t,n){const r=HA(e)?e:fA(e);return r.start(zE("",r,t,n)),r.animation}(this.motionValue,[0,1e3],{...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:i}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&BT(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=lk(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=lk(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}Zk(t,n),fE(t,i),dk(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new hT);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null==(e=this.getStack())?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null==(e=this.getStack())?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:n}={}){const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const r={};n.z&&fT("z",e,r,this.animationValues);for(let i=0;i<pT.length;i++)fT(`rotate${pT[i]}`,e,r,this.animationValues),fT(`skew${pT[i]}`,e,r,this.animationValues);e.render();for(const i in r)e.setStaticValue(i,r[i]),this.animationValues&&(this.animationValues[i]=r[i]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible)return void(e.visibility="hidden");const n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=LM(null==t?void 0:t.pointerEvents)||"",void(e.transform=n?n(this.latestValues,""):"none");const r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target)return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=LM(null==t?void 0:t.pointerEvents)||""),void(this.hasProjected&&!iE(this.latestValues)&&(e.transform=n?n({},""):"none",this.hasProjected=!1));e.visibility="";const i=r.animationValues||r.latestValues;this.applyTransformsToTarget();let a=function(e,t,n){let r="";const i=e.x.translate/t.x,a=e.y.translate/t.y,s=(null==n?void 0:n.z)||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),1===t.x&&1===t.y||(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:e,rotate:t,rotateX:i,rotateY:a,skewX:s,skewY:o}=n;e&&(r=`perspective(${e}px) ${r}`),t&&(r+=`rotate(${t}deg) `),i&&(r+=`rotateX(${i}deg) `),a&&(r+=`rotateY(${a}deg) `),s&&(r+=`skewX(${s}deg) `),o&&(r+=`skewY(${o}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(r+=`scale(${o}, ${l})`),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,i);n&&(a=n(i,a)),e.transform=a;const{x:s,y:o}=this.projectionDelta;e.transformOrigin=`${100*s.origin}% ${100*o.origin}% 0`,r.animationValues?e.opacity=r===this?i.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:e.opacity=r===this?void 0!==i.opacity?i.opacity:"":void 0!==i.opacityExit?i.opacityExit:0;for(const l in vM){if(void 0===i[l])continue;const{correct:t,applyTo:n,isCSSVariable:s}=vM[l],o="none"===a?i[l]:t(i[l],r);if(n){const t=n.length;for(let r=0;r<t;r++)e[n[r]]=o}else s?this.options.visualElement.renderState.vars[l]=o:e[l]=o}this.options.layoutId&&(e.pointerEvents=r===this?LM(null==t?void 0:t.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null==(t=e.currentAnimation)?void 0:t.stop()}),this.root.nodes.forEach(NT),this.root.sharedNodes.clear()}}}function xT(e){e.updateLayout()}function yT(e){var t;const n=(null==(t=e.resumeFrom)?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:i}=e.options,a=n.source!==e.layout.source;"size"===i?mk(e=>{const r=a?n.measuredBox[e]:n.layoutBox[e],i=lk(r);r.min=t[e].min,r.max=r.min+i}):BT(i,n.layoutBox,t)&&mk(r=>{const i=a?n.measuredBox[r]:n.layoutBox[r],s=lk(t[r]);i.max=i.min+s,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+s)});const s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};dk(s,t,n.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};a?dk(o,e.applyTransform(r,!0),n.measuredBox):dk(o,t,n.layoutBox);const l=!sT(s);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:i,layout:a}=r;if(i&&a){const s={x:{min:0,max:0},y:{min:0,max:0}};pk(s,n.layoutBox,i.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};pk(o,t,a.layoutBox),cT(s,o)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=s,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:o,layoutDelta:s,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function bT(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function wT(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function jT(e){e.clearSnapshot()}function NT(e){e.clearMeasurements()}function _T(e){e.isLayoutDirty=!1}function ST(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function CT(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function AT(e){e.resolveTargetDelta()}function MT(e){e.calcProjection()}function ET(e){e.resetSkewAndRotation()}function kT(e){e.removeLeadSnapshot()}function TT(e,t,n){e.translate=cS(t.translate,0,n),e.scale=cS(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function PT(e,t,n,r){e.min=cS(t.min,n.min,r),e.max=cS(t.max,n.max,r)}function OT(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const RT={duration:.45,ease:[.4,0,.1,1]},IT=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),DT=IT("applewebkit/")&&!IT("chrome/")?Math.round:qN;function LT(e){e.min=DT(e.min),e.max=DT(e.max)}function BT(e,t,n){return"position"===e||"preserve-aspect"===e&&(r=dT(t),i=dT(n),a=.2,!(Math.abs(r-i)<=a));var r,i,a}function FT(e){var t;return e!==e.root&&(null==(t=e.scroll)?void 0:t.wasRoot)}const UT=vT({attachResizeListener:(e,t)=>ak(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),zT={current:void 0},HT=vT({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!zT.current){const e=new UT({});e.mount(window),e.setOptions({layoutScroll:!0}),zT.current=e}return zT.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),VT={pan:{Feature:class extends nk{constructor(){super(...arguments),this.removePointerDownListener=qN}onPointerDown(e){this.session=new vk(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:fk(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:Pk(e),onStart:Pk(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&b_.postRender(()=>r(e,t))}}}mount(){this.removePointerDownListener=ok(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends nk{constructor(e){super(e),this.removeGroupControls=qN,this.removeListeners=qN,this.controls=new kk(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||qN}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:HT,MeasureLayout:Fk}};function GT(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);const i=r["onHover"+n];i&&b_.postRender(()=>i(t,sk(t)))}function WT(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);const i=r["onTap"+("End"===n?"":n)];i&&b_.postRender(()=>i(t,sk(t)))}const KT=new WeakMap,qT=new WeakMap,XT=e=>{const t=KT.get(e.target);t&&t(e)},$T=e=>{e.forEach(XT)};function YT(e,t,n){const r=function({root:e,...t}){const n=e||document;qT.has(n)||qT.set(n,{});const r=qT.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver($T,{root:e,...t})),r[i]}(t);return KT.set(e,n),r.observe(e),()=>{KT.delete(e),r.unobserve(e)}}const JT={some:0,all:1};const ZT={inView:{Feature:class extends nk{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:i}=e,a={root:t?t.current:void 0,rootMargin:n,threshold:"number"==typeof r?r:JT[r]};return YT(this.node.current,a,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,i&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),a=t?n:r;a&&a(e)})}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends nk{mount(){const{current:e}=this.node;e&&(this.unmount=MA(e,(e,t)=>(WT(this.node,t,"Start"),(e,{success:t})=>WT(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends nk{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(CI){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=$N(ak(this.node.current,"focus",()=>this.onFocus()),ak(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends nk{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t,n={}){const[r,i,a]=yA(e,n),s=e=>{if(!bA(e))return;const{target:n}=e,r=t(n,e);if("function"!=typeof r||!n)return;const a=e=>{bA(e)&&(r(e),n.removeEventListener("pointerleave",a))};n.addEventListener("pointerleave",a,i)};return r.forEach(e=>{e.addEventListener("pointerenter",s,i)}),a}(e,(e,t)=>(GT(this.node,t,"Start"),e=>GT(this.node,e,"End"))))}unmount(){}}}},QT=eE({...ik,...ZT,...VT,...{layout:{ProjectionNode:HT,MeasureLayout:Fk}}},ME),eP={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function tP(e,t,n,r){const i=n[t],{length:a,position:s}=eP[t],o=i.current,l=n.time;i.current=e[`scroll${s}`],i.scrollLength=e[`scroll${a}`]-e[`client${a}`],i.offset.length=0,i.offset[0]=0,i.offset[1]=i.scrollLength,i.progress=YN(0,i.scrollLength,i.current);const c=r-l;i.velocity=c>50?0:e_(i.current-o,c)}const nP={start:0,center:.5,end:1};function rP(e,t,n=0){let r=0;if(e in nP&&(e=nP[e]),"string"==typeof e){const t=parseFloat(e);e.endsWith("px")?r=t:e.endsWith("%")?e=t/100:e.endsWith("vw")?r=t/100*document.documentElement.clientWidth:e.endsWith("vh")?r=t/100*document.documentElement.clientHeight:e=t}return"number"==typeof e&&(r=t*e),n+r}const iP=[0,0];function aP(e,t,n,r){let i=Array.isArray(e)?e:iP,a=0,s=0;return"number"==typeof e?i=[e,e]:"string"==typeof e&&(i=(e=e.trim()).includes(" ")?e.split(" "):[e,nP[e]?e:"0"]),a=rP(i[0],n,r),s=rP(i[1],t),a-s}const sP={All:[[0,0],[1,1]]},oP={x:0,y:0};function lP(e,t,n){const{offset:r=sP.All}=n,{target:i=e,axis:a="y"}=n,s="y"===a?"height":"width",o=i!==e?function(e,t){const n={x:0,y:0};let r=e;for(;r&&r!==t;)if(hA(r))n.x+=r.offsetLeft,n.y+=r.offsetTop,r=r.offsetParent;else if("svg"===r.tagName){const e=r.getBoundingClientRect();r=r.parentElement;const t=r.getBoundingClientRect();n.x+=e.left-t.left,n.y+=e.top-t.top}else{if(!(r instanceof SVGGraphicsElement))break;{const{x:e,y:t}=r.getBBox();n.x+=e,n.y+=t;let i=null,a=r.parentNode;for(;!i;)"svg"===a.tagName&&(i=a),a=r.parentNode;r=i}}return n}(i,e):oP,l=i===e?{width:e.scrollWidth,height:e.scrollHeight}:function(e){return"getBBox"in e&&"svg"!==e.tagName?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}(i),c={width:e.clientWidth,height:e.clientHeight};t[a].offset.length=0;let d=!t[a].interpolate;const u=r.length;for(let h=0;h<u;h++){const e=aP(r[h],c[s],l[s],o[a]);d||e===t[a].interpolatorOffsets[h]||(d=!0),t[a].offset[h]=e}d&&(t[a].interpolate=XS(t[a].offset,$S(r),{clamp:!1}),t[a].interpolatorOffsets=[...t[a].offset]),t[a].progress=zN(0,1,t[a].interpolate(t[a].current))}function cP(e,t,n,r={}){return{measure:t=>{!function(e,t=e,n){if(n.x.targetOffset=0,n.y.targetOffset=0,t!==e){let r=t;for(;r&&r!==e;)n.x.targetOffset+=r.offsetLeft,n.y.targetOffset+=r.offsetTop,r=r.offsetParent}n.x.targetLength=t===e?t.scrollWidth:t.clientWidth,n.y.targetLength=t===e?t.scrollHeight:t.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight}(e,r.target,n),function(e,t,n){tP(e,"x",t,n),tP(e,"y",t,n),t.time=n}(e,n,t),(r.offset||r.target)&&lP(e,n,r)},notify:()=>t(n)}}const dP=new WeakMap,uP=new WeakMap,hP=new WeakMap,pP=e=>e===document.scrollingElement?window:e;function mP(e,{container:t=document.scrollingElement,...n}={}){if(!t)return qN;let r=hP.get(t);r||(r=new Set,hP.set(t,r));const i=cP(t,e,{time:0,x:{current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0},y:{current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}},n);if(r.add(i),!dP.has(t)){const e=()=>{for(const e of r)e.measure(j_.timestamp);b_.preUpdate(n)},n=()=>{for(const e of r)e.notify()},i=()=>b_.read(e);dP.set(t,i);const a=pP(t);window.addEventListener("resize",i,{passive:!0}),t!==document.documentElement&&uP.set(t,function(e,t){return"function"==typeof e?UA(e):LA(e,t)}(t,i)),a.addEventListener("scroll",i,{passive:!0}),i()}const a=dP.get(t);return b_.read(a,!1,!0),()=>{var e;w_(a);const n=hP.get(t);if(!n)return;if(n.delete(i),n.size)return;const r=dP.get(t);dP.delete(t),r&&(pP(t).removeEventListener("scroll",r),null==(e=uP.get(t))||e(),window.removeEventListener("resize",r))}}const fP=new Map;function gP({source:e,container:t,...n}){const{axis:r}=n;e&&(t=e);const i=fP.get(t)??new Map;fP.set(t,i);const a=n.target??"self",s=i.get(a)??{},o=r+(n.offset??[]).join(",");return s[o]||(s[o]=!n.target&&AC()?new ScrollTimeline({source:t,axis:r}):function(e){const t={value:0},n=mP(n=>{t.value=100*n[e.axis].progress},e);return{currentTime:t,cancel:n}}({container:t,...n})),s[o]}function vP(e,{axis:t="y",container:n=document.scrollingElement,...r}={}){if(!n)return qN;const i={axis:t,container:n,...r};return"function"==typeof e?function(e,t){return function(e){return 2===e.length}(e)?mP(n=>{e(n[t.axis].progress,n)},t):zA(e,gP(t))}(e,i):function(e,t){const n=gP(t);return e.attachTimeline({timeline:t.target?void 0:n,observe:e=>(e.pause(),zA(t=>{e.time=e.iterationDuration*t},n))})}(e,i)}const xP=()=>({scrollX:fA(0),scrollY:fA(0),scrollXProgress:fA(0),scrollYProgress:fA(0)}),yP=e=>!!e&&!e.current;function bP({container:e,target:t,...n}={}){const r=IN(xP),i=Ve.useRef(null),a=Ve.useRef(!1),s=Ve.useCallback(()=>(i.current=vP((e,{x:t,y:n})=>{r.scrollX.set(t.current),r.scrollXProgress.set(t.progress),r.scrollY.set(n.current),r.scrollYProgress.set(n.progress)},{...n,container:(null==e?void 0:e.current)||void 0,target:(null==t?void 0:t.current)||void 0}),()=>{var e;null==(e=i.current)||e.call(i)}),[e,t,JSON.stringify(n.offset)]);return LN(()=>(a.current=!1,yP(e)||yP(t)?void(a.current=!0):s()),[s]),Ve.useEffect(()=>a.current?(yP(e),yP(t),s()):void 0,[s]),r}function wP(e,t){const n=function(e){const t=IN(()=>fA(e)),{isStatic:n}=Ve.useContext(GA);if(n){const[,n]=Ve.useState(e);Ve.useEffect(()=>t.on("change",n),[])}return t}(t()),r=()=>n.set(t());return r(),LN(()=>{const t=()=>b_.preRender(r,!1,!0),n=e.map(e=>e.on("change",t));return()=>{n.forEach(e=>e()),w_(r)}}),n}function jP(e,t,n,r){if("function"==typeof e)return function(e){pA.current=[],e();const t=wP(pA.current,e);return pA.current=void 0,t}(e);const i="function"==typeof t?t:function(...e){const t=!Array.isArray(e[0]),n=t?0:-1,r=e[0+n],i=XS(e[1+n],e[2+n],e[3+n]);return t?i(r):i}(t,n,r);return Array.isArray(e)?NP(e,i):NP([e],([e])=>i(e))}function NP(e,t){const n=IN(()=>[]);return wP(e,()=>{n.length=0;const r=e.length;for(let t=0;t<r;t++)n[t]=e[t].get();return t(n)})}function _P(e,t){[...t].reverse().forEach(n=>{const r=e.getVariant(n);r&&OE(e,r),e.variantChildren&&e.variantChildren.forEach(e=>{_P(e,t)})})}function SP(){const e=new Set,t={subscribe:t=>(e.add(t),()=>{e.delete(t)}),start(t,n){const r=[];return e.forEach(e=>{r.push(KE(e,t,{transitionOverride:n}))}),Promise.all(r)},set:t=>e.forEach(e=>{!function(e,t){Array.isArray(t)?_P(e,t):"string"==typeof t?_P(e,[t]):OE(e,t)}(e,t)}),stop(){e.forEach(e=>{!function(e){e.values.forEach(e=>e.stop())}(e)})},mount:()=>()=>{t.stop()}};return t}const CP=Vp("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),AP=Ve.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...i},a)=>{const s=r?Sh:"button";return Qe.jsx(s,{className:Rv(CP({variant:t,size:n,className:e})),ref:a,...i})});AP.displayName="Button";const MP=Vp("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function EP({className:e,variant:t,...n}){return Qe.jsx("div",{className:Rv(MP({variant:t}),e),...n})}const kP=""+new URL("hero-banner-1-CB8QDBzr.png",import.meta.url).href,TP=""+new URL("hero-banner-2-BVAEZCxR.png",import.meta.url).href,PP=""+new URL("hero-banner-3-DqWvgqHS.png",import.meta.url).href,OP=""+new URL("hero-banner-4-D9LStYnm.png",import.meta.url).href,RP=[{id:1,bg:kP,overlay:"from-[#2a174d]/95 via-[#1e2a6d]/70 to-transparent",accentColor:"#b983ff",subtitle:{icon:"",text:"Trending Now",bgColor:"bg-gradient-to-r from-[#b983ff] to-[#8b5cf6]"},title:{line1:"Mua sm thng minh,",line2:"Kt ni cng ng",gradient:"from-[#b983ff] via-[#5f8fff] to-[#3be8b0]"},desc:"Khm ph hng ngn sn phm c o, tham gia cng ng si ng v tri nghim mua sm livestream y th v.",tags:[],cta:[{label:"Khm ph ngay",variant:"primary",icon:Qe.jsx(Qp,{className:"w-4 h-4"}),color:"from-[#b983ff] to-[#8b5cf6]"},{label:"Xem Livestream",variant:"outline",icon:Qe.jsx(Gf,{className:"w-4 h-4"}),borderColor:"border-[#b983ff]"}],stats:[{icon:Qe.jsx(Og,{className:"w-6 h-6"}),label:"Thnh vin",value:"50K+",color:"text-[#b983ff]"},{icon:Qe.jsx(lg,{className:"w-6 h-6"}),label:"Sn phm",value:"10K+",color:"text-[#5f8fff]"},{icon:Qe.jsx(zg,{className:"w-6 h-6"}),label:"Flash Sale",value:"24/7",color:"text-[#3be8b0]"}]},{id:2,bg:TP,overlay:"from-black/90 via-black/50 to-transparent",accentColor:"#f97316",subtitle:{icon:"",text:"VibeMarket - Mua sm thng minh",bgColor:"bg-gradient-to-r from-orange-500 to-orange-600"},title:{line1:"Khm ph xu hng mi",line2:"Sn phm mi 2025",gradient:"from-orange-400 via-orange-600 to-yellow-500"},desc:"Nn tng thng mi in t hin i, kt ni cng ng, sn deal hot v tri nghim mua sm tin li mi lc mi ni.",tags:["Thi trang","in t","Gia dng","Lm p"],cta:[{label:"Khm ph ngay",variant:"primary",icon:Qe.jsx(Qp,{className:"w-4 h-4"}),color:"from-orange-500 to-orange-600"},{label:"Xem u i",variant:"outline",icon:Qe.jsx(Zm,{className:"w-4 h-4"}),borderColor:"border-orange-500"}],stats:[]},{id:3,bg:PP,overlay:"from-[#1e2a6d]/90 via-[#5f8fff]/70 to-transparent",accentColor:"#3b82f6",subtitle:{icon:"",text:"Livestream mua sm",bgColor:"bg-gradient-to-r from-blue-600 to-blue-700"},title:{line1:"Flash Sale 24/7",line2:"u i livestream",gradient:"from-[#5f8fff] via-[#3be8b0] to-[#b983ff]"},desc:"Tham gia cc phin livestream, sn deal sc v nhn qu tng hp dn mi ngy.",tags:["Flash Sale","Livestream","Qu tng"],cta:[{label:"Xem Livestream",variant:"primary",icon:Qe.jsx(Gf,{className:"w-4 h-4"}),color:"from-blue-600 to-blue-700"},{label:"Nhn u i",variant:"outline",icon:Qe.jsx(pg,{className:"w-4 h-4"}),borderColor:"border-blue-500"}],stats:[]},{id:4,bg:OP,overlay:"from-green-900/85 via-green-700/50 to-transparent",accentColor:"#16a34a",subtitle:{icon:"",text:"Cng ng mua sm",bgColor:"bg-gradient-to-r from-green-600 to-green-700"},title:{line1:"Kt ni & Tit kim",line2:"Chng trnh thnh vin",gradient:"from-green-400 via-green-600 to-green-400"},desc:"Tham gia cng ng, tch im i qu, nhn badge v xp hng thnh vin.",tags:["Tch im","i qu","Badge"],cta:[{label:"Tham gia ngay",variant:"primary",icon:Qe.jsx(Og,{className:"w-4 h-4"}),color:"from-green-600 to-green-700"},{label:"Xem quyn li",variant:"outline",icon:Qe.jsx(Sg,{className:"w-4 h-4"}),borderColor:"border-green-600"}],stats:[]}],IP=()=>{const[e,t]=Ve.useState(0),[n,r]=Ve.useState(!0),i=RP[e];Ve.useEffect(()=>{if(!n)return;const e=setInterval(()=>{t(e=>e===RP.length-1?0:e+1)},5e3);return()=>clearInterval(e)},[n]);return Qe.jsxs("section",{className:"relative overflow-hidden h-screen w-full group",children:[Qe.jsx(eM,{mode:"wait",children:Qe.jsxs(QT.div,{initial:{scale:1.1,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.8,ease:[.43,.13,.23,.96]},className:"absolute inset-0",children:[Qe.jsx(QT.img,{src:i.bg,alt:"Hero background",className:"w-full h-full object-cover object-center",animate:{scale:[1,1.05]},transition:{duration:20,repeat:1/0,repeatType:"reverse"}}),Qe.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${i.overlay}`}),Qe.jsx(QT.div,{className:"absolute inset-0",style:{background:`radial-gradient(circle at 20% 50%, ${i.accentColor}15 0%, transparent 50%),\n                           radial-gradient(circle at 80% 50%, ${i.accentColor}10 0%, transparent 50%)`},animate:{opacity:[.3,.6,.3]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}}),[...Array(15)].map((e,t)=>Qe.jsx(QT.div,{className:"absolute w-2 h-2 rounded-full hidden md:block",style:{background:i.accentColor,left:100*Math.random()+"%",top:100*Math.random()+"%"},animate:{y:[0,-30,0],opacity:[0,.6,0],scale:[0,1.5,0]},transition:{duration:3+2*Math.random(),repeat:1/0,delay:2*Math.random(),ease:"easeInOut"}},t))]},i.id)}),Qe.jsx("div",{className:"relative h-full flex items-center",children:Qe.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:Qe.jsxs("div",{className:"flex flex-col lg:flex-row w-full gap-8 lg:gap-12 items-center justify-between",children:[Qe.jsx(eM,{mode:"wait",children:Qe.jsxs(QT.div,{initial:"initial",animate:"animate",exit:"exit",variants:{initial:{opacity:0},animate:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}},exit:{opacity:0}},className:"flex-1 flex flex-col justify-center z-10 w-full lg:max-w-2xl",children:[Qe.jsx(QT.div,{variants:{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.9}},className:"mb-4 md:mb-6",children:Qe.jsxs(EP,{className:`${i.subtitle.bgColor} text-white border-0 shadow-2xl px-4 md:px-5 py-2 md:py-2.5 text-sm md:text-base font-bold hover:scale-105 transition-transform`,children:[Qe.jsx("span",{className:"mr-2 text-lg md:text-xl",children:i.subtitle.icon}),Qe.jsx("span",{className:"hidden sm:inline",children:i.subtitle.text}),Qe.jsx("span",{className:"sm:hidden",children:i.subtitle.text.split(" ")[0]})]})}),Qe.jsx(QT.div,{variants:{initial:{opacity:0,y:30},animate:{opacity:1,y:0},exit:{opacity:0,y:-30}},className:"mb-4 md:mb-6",children:Qe.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl font-extrabold leading-tight",children:[Qe.jsx("span",{className:"block text-white drop-shadow-2xl font-dancing mb-1 md:mb-2",children:i.title.line1}),Qe.jsx("span",{className:`block bg-gradient-to-r ${i.title.gradient} bg-clip-text text-transparent drop-shadow-2xl font-dancing`,children:i.title.line2})]})}),Qe.jsx(QT.p,{variants:{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20}},className:"text-white/90 text-base sm:text-lg md:text-xl max-w-xl mb-6 md:mb-8 leading-relaxed",children:i.desc}),i.tags&&i.tags.length>0&&Qe.jsx(QT.div,{variants:{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20}},className:"flex gap-2 md:gap-3 mb-6 md:mb-8 flex-wrap",children:i.tags.map((e,t)=>Qe.jsx(QT.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.5+.1*t},whileHover:{scale:1.1,y:-2},className:"px-3 md:px-5 py-1.5 md:py-2.5 rounded-full text-xs md:text-sm font-semibold bg-white/10 backdrop-blur-md border-2",style:{borderColor:i.accentColor,color:"white"},children:e},e))}),Qe.jsx(QT.div,{variants:{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20}},className:"flex gap-3 md:gap-4 mb-6 md:mb-10 flex-wrap",children:i.cta.map((e,t)=>Qe.jsx(QT.div,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},children:"primary"===e.variant?Qe.jsxs(AP,{size:"lg",className:`bg-gradient-to-r ${e.color} text-white px-5 sm:px-6 md:px-8 py-4 md:py-6 text-sm sm:text-base md:text-lg font-bold rounded-full shadow-2xl border-0 hover:opacity-90 transition-all`,children:[Qe.jsx("span",{className:"hidden sm:inline",children:e.label}),Qe.jsx("span",{className:"sm:hidden",children:e.label.split(" ")[0]}),e.icon&&Qe.jsx("span",{className:"ml-2",children:e.icon})]}):Qe.jsxs(AP,{size:"lg",variant:"outline",className:`${e.borderColor} text-white px-5 sm:px-6 md:px-8 py-4 md:py-6 text-sm sm:text-base md:text-lg font-bold rounded-full border-3 bg-white/10 backdrop-blur-md hover:bg-white/20 transition-all`,children:[Qe.jsx("span",{className:"hidden sm:inline",children:e.label}),Qe.jsx("span",{className:"sm:hidden",children:e.label.split(" ")[0]}),e.icon&&Qe.jsx("span",{className:"ml-2",children:e.icon})]})},t))}),i.stats&&i.stats.length>0&&Qe.jsx(QT.div,{variants:{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20}},className:"flex gap-6 md:gap-10 flex-wrap",children:i.stats.map((e,t)=>Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7+.1*t},whileHover:{scale:1.1,y:-5},className:"flex flex-col items-center group cursor-pointer",children:[Qe.jsx(QT.div,{className:"w-12 h-12 md:w-16 md:h-16 flex items-center justify-center rounded-2xl bg-white/10 backdrop-blur-md mb-2 md:mb-3 shadow-xl group-hover:shadow-2xl transition-all",whileHover:{rotate:[0,-10,10,0]},transition:{duration:.5},children:Qe.jsx("span",{className:e.color,children:e.icon})}),Qe.jsx("div",{className:"text-xl md:text-3xl font-bold text-white mb-1",children:e.value}),Qe.jsx("div",{className:"text-xs md:text-sm text-white/70 font-medium",children:e.label})]},t))})]},i.id)}),Qe.jsx(eM,{mode:"wait",children:Qe.jsx(QT.div,{initial:{opacity:0,scale:.9,x:100},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.9,x:-100},transition:{duration:.8,ease:[.43,.13,.23,.96]},className:"hidden lg:block flex-1 relative z-10 max-w-xl xl:max-w-2xl",children:Qe.jsxs("div",{className:"relative",children:[Qe.jsx(QT.div,{className:"absolute -inset-4 rounded-[56px] blur-3xl opacity-40",style:{background:i.accentColor},animate:{scale:[1,1.1,1],opacity:[.3,.5,.3]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),Qe.jsxs(QT.div,{className:"relative overflow-hidden rounded-[48px] shadow-2xl",whileHover:{scale:1.02,rotate:1},transition:{duration:.3},children:[Qe.jsx("img",{src:i.bg,alt:"Hero visual",className:"w-full h-[400px] lg:h-[500px] xl:h-[600px] object-cover"}),Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent"}),Qe.jsx("div",{className:"absolute inset-0 rounded-[48px] border-4 border-white/10"})]}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},className:"absolute -bottom-6 -right-6 bg-white/95 backdrop-blur-md rounded-2xl shadow-2xl p-4 lg:p-6",children:Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"w-10 h-10 lg:w-12 lg:h-12 rounded-xl flex items-center justify-center text-white",style:{background:i.accentColor},children:Qe.jsx(pg,{className:"w-5 h-5 lg:w-6 lg:h-6"})}),Qe.jsxs("div",{children:[Qe.jsx("div",{className:"text-xl lg:text-2xl font-bold text-gray-900",children:"99%"}),Qe.jsx("div",{className:"text-xs text-gray-600 font-medium",children:"Hi lng"})]})]})})]})},`right-${i.id}`)})]})})}),Qe.jsxs("div",{className:"absolute bottom-6 md:bottom-8 left-1/2 -translate-x-1/2 flex items-center gap-3 md:gap-4 z-20",children:[Qe.jsx(QT.button,{onClick:()=>{t(e=>0===e?RP.length-1:e-1),r(!1)},whileHover:{scale:1.1,x:-2},whileTap:{scale:.9},className:"p-2 md:p-3 rounded-full bg-white/20 backdrop-blur-md hover:bg-white/30 transition-all shadow-lg",children:Qe.jsx(xm,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})}),Qe.jsx("div",{className:"flex gap-2 md:gap-3 px-4 md:px-6 py-2 md:py-3 rounded-full bg-white/10 backdrop-blur-md shadow-lg",children:RP.map((n,i)=>Qe.jsx(QT.button,{onClick:()=>(t(i),void r(!1)),whileHover:{scale:1.2},whileTap:{scale:.9},className:"relative h-2 md:h-2.5 rounded-full transition-all duration-500 "+(e===i?"w-8 md:w-10":"w-2 md:w-2.5"),style:{background:e===i?n.accentColor:"rgba(255,255,255,0.3)"},children:e===i&&Qe.jsx(QT.div,{className:"absolute inset-0 rounded-full",style:{background:n.accentColor},animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0}})},n.id))}),Qe.jsx(QT.button,{onClick:()=>{t(e=>e===RP.length-1?0:e+1),r(!1)},whileHover:{scale:1.1,x:2},whileTap:{scale:.9},className:"p-2 md:p-3 rounded-full bg-white/20 backdrop-blur-md hover:bg-white/30 transition-all shadow-lg",children:Qe.jsx(ym,{className:"w-5 h-5 md:w-6 md:h-6 text-white"})})]}),Qe.jsx(QT.div,{className:"absolute top-6 md:top-8 right-4 md:right-8 z-20",initial:{opacity:0},animate:{opacity:1},transition:{delay:1},children:Qe.jsx(QT.button,{onClick:()=>r(!n),whileHover:{scale:1.1},whileTap:{scale:.9},className:"flex items-center gap-2 px-3 md:px-4 py-1.5 md:py-2 rounded-full bg-white/10 backdrop-blur-md text-white text-xs md:text-sm font-medium hover:bg-white/20 transition-all shadow-lg",children:n?Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(QT.div,{className:"w-1.5 h-1.5 md:w-2 md:h-2 rounded-full bg-green-400",animate:{scale:[1,1.2,1]},transition:{duration:1.5,repeat:1/0}}),Qe.jsx("span",{className:"hidden sm:inline",children:"Auto"})]}):Qe.jsxs(Qe.Fragment,{children:[Qe.jsx("div",{className:"w-1.5 h-1.5 md:w-2 md:h-2 rounded-full bg-gray-400"}),Qe.jsx("span",{className:"hidden sm:inline",children:"Manual"})]})})})]})},DP=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx("div",{ref:n,className:Rv("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));DP.displayName="Card";const LP=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx("div",{ref:n,className:Rv("flex flex-col space-y-1.5 p-6",e),...t}));LP.displayName="CardHeader";const BP=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx("h3",{ref:n,className:Rv("text-2xl font-semibold leading-none tracking-tight",e),...t}));BP.displayName="CardTitle";const FP=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx("p",{ref:n,className:Rv("text-sm text-muted-foreground",e),...t}));FP.displayName="CardDescription";const UP=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx("div",{ref:n,className:Rv("p-6 pt-0",e),...t}));UP.displayName="CardContent";Ve.forwardRef(({className:e,...t},n)=>Qe.jsx("div",{ref:n,className:Rv("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter";const zP=()=>{const e=[{id:1,name:"Thi trang",icon:og,count:"2.5K+",color:"from-pink-500 to-rose-500",bgImage:"https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=400&h=300&fit=crop",trending:!0,discount:"Gim 50%"},{id:2,name:"in thoi",icon:ug,count:"1.2K+",color:"from-blue-500 to-cyan-500",bgImage:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=400&h=300&fit=crop",trending:!0,discount:"Hot"},{id:3,name:"Laptop & PC",icon:pf,count:"890+",color:"from-purple-500 to-indigo-500",bgImage:"https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=400&h=300&fit=crop",trending:!1,discount:"Sale"},{id:4,name:"Gaming",icon:$m,count:"1.5K+",color:"from-green-500 to-emerald-500",bgImage:"https://images.unsplash.com/photo-1542751371-adc38448a05e?w=400&h=300&fit=crop",trending:!0,discount:"New"},{id:5,name:"Nh ca",icon:lf,count:"3.2K+",color:"from-orange-500 to-amber-500",bgImage:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=400&h=300&fit=crop",trending:!1,discount:"Deal"},{id:6,name:"Camera",icon:hm,count:"567+",color:"from-red-500 to-pink-500",bgImage:"https://images.unsplash.com/photo-1502920917128-1aa500764cbd?w=400&h=300&fit=crop",trending:!1,discount:"-30%"},{id:7,name:"Audio",icon:rf,count:"743+",color:"from-violet-500 to-purple-500",bgImage:"https://images.unsplash.com/photo-1583394838336-acd977736f90?w=400&h=300&fit=crop",trending:!0,discount:"Mi"},{id:8,name:"ng h",icon:Bg,count:"432+",color:"from-teal-500 to-cyan-500",bgImage:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400&h=300&fit=crop",trending:!1,discount:"Luxury"}],t={hidden:{opacity:0,y:30,scale:.9},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:100,damping:12}}};return Qe.jsxs("section",{className:"py-20 lg:py-28 bg-gradient-to-b from-background via-card/20 to-background relative overflow-hidden",children:[Qe.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[Qe.jsx(QT.div,{className:"absolute top-20 left-10 w-72 h-72 bg-primary/10 rounded-full blur-3xl",animate:{scale:[1,1.2,1],opacity:[.3,.5,.3]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),Qe.jsx(QT.div,{className:"absolute bottom-20 right-10 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl",animate:{scale:[1.2,1,1.2],opacity:[.2,.4,.2]},transition:{duration:10,repeat:1/0,ease:"easeInOut"}}),[...Array(8)].map((e,t)=>Qe.jsx(QT.div,{className:"absolute w-2 h-2 bg-primary/30 rounded-full",style:{top:100*Math.random()+"%",left:100*Math.random()+"%"},animate:{y:[0,-30,0],opacity:[0,.6,0],scale:[0,1.5,0]},transition:{duration:3+2*Math.random(),repeat:1/0,delay:2*Math.random(),ease:"easeInOut"}},t))]}),Qe.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[Qe.jsx(QT.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"text-center mb-16",children:Qe.jsxs("div",{className:"flex flex-col items-center justify-center mb-6",children:[Qe.jsxs(QT.div,{initial:{scale:0,rotate:-180},whileInView:{scale:1,rotate:0},viewport:{once:!0},transition:{type:"spring",duration:.8},className:"relative mb-4",children:[Qe.jsx(QT.div,{className:"absolute inset-0 bg-gradient-to-r from-pink-500 to-rose-500 rounded-2xl blur-xl opacity-50",animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),Qe.jsx("div",{className:"relative w-16 h-16 rounded-2xl bg-gradient-to-br from-pink-500 to-rose-500 flex items-center justify-center shadow-2xl",children:Qe.jsx(pg,{className:"w-8 h-8 text-white"})})]}),Qe.jsxs("h2",{className:"text-4xl lg:text-5xl font-extrabold mb-6",children:["Danh mc"," ",Qe.jsx("span",{className:"bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:"Ni bt"})]}),Qe.jsxs(QT.div,{className:"flex items-center justify-center gap-2 mb-6",initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{delay:.3,duration:.5},children:[Qe.jsx(QT.div,{className:"h-1 w-16 bg-gradient-to-r from-primary/30 to-purple-600/30 rounded-full",initial:{width:0},whileInView:{width:"4rem"},viewport:{once:!0},transition:{delay:.4,duration:.6}}),Qe.jsx(QT.div,{className:"h-1.5 w-8 bg-gradient-to-r from-primary to-purple-600 rounded-full",initial:{scale:0},whileInView:{scale:1},viewport:{once:!0},transition:{delay:.5,duration:.4,type:"spring"}}),Qe.jsx(QT.div,{className:"h-1 w-16 bg-gradient-to-r from-primary/30 to-purple-600/30 rounded-full",initial:{width:0},whileInView:{width:"4rem"},viewport:{once:!0},transition:{delay:.4,duration:.6}})]}),Qe.jsx("p",{className:"text-muted-foreground text-lg lg:text-xl max-w-2xl mx-auto",children:"Khm ph hng ngn sn phm cht lng trong mi lnh vc"}),Qe.jsxs("div",{className:"flex items-center gap-6 mt-6",children:[Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center",children:Qe.jsx(Sg,{className:"w-5 h-5 text-primary"})}),Qe.jsxs("div",{className:"text-left",children:[Qe.jsx("div",{className:"text-2xl font-bold",children:"8"}),Qe.jsx("div",{className:"text-xs text-muted-foreground",children:"Danh mc"})]})]}),Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-500/20 flex items-center justify-center",children:Qe.jsx(zg,{className:"w-5 h-5 text-amber-500"})}),Qe.jsxs("div",{className:"text-left",children:[Qe.jsx("div",{className:"text-2xl font-bold",children:"10K+"}),Qe.jsx("div",{className:"text-xs text-muted-foreground",children:"Sn phm"})]})]})]})]})}),Qe.jsx(QT.div,{variants:{hidden:{},visible:{transition:{staggerChildren:.08}}},initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 lg:gap-6 mb-12",children:e.map(e=>Qe.jsx(QT.div,{variants:t,whileHover:{scale:1.05,y:-8},whileTap:{scale:.98},className:"cursor-pointer group",children:Qe.jsxs(DP,{className:"relative overflow-hidden h-44 lg:h-52 border-2 border-border/50 hover:border-primary/50 bg-gradient-to-br from-card/50 to-card/30 backdrop-blur-sm shadow-lg hover:shadow-2xl transition-all duration-300",children:[Qe.jsxs(QT.div,{className:"absolute inset-0",whileHover:{scale:1.1},transition:{duration:.6},children:[Qe.jsx("img",{src:e.bgImage,alt:e.name,className:"w-full h-full object-cover opacity-20 group-hover:opacity-30 transition-opacity duration-300"}),Qe.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${e.color} opacity-70 group-hover:opacity-60 transition-opacity duration-300`})]}),Qe.jsx(QT.div,{className:`absolute inset-0 bg-gradient-to-br ${e.color} opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-300`,animate:{scale:[1,1.1,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),Qe.jsx("div",{className:`absolute top-0 left-0 right-0 h-1 bg-gradient-to-r ${e.color}`}),Qe.jsxs(UP,{className:"relative h-full p-4 lg:p-5 flex flex-col justify-between text-white",children:[Qe.jsxs("div",{className:"flex items-start justify-between",children:[Qe.jsx(QT.div,{whileHover:{rotate:[0,-10,10,-10,10,0]},transition:{duration:.5},className:"p-2.5 lg:p-3 rounded-xl bg-white/20 backdrop-blur-md shadow-lg group-hover:bg-white/30 transition-colors",children:Qe.jsx(e.icon,{className:"w-6 h-6 lg:w-7 lg:h-7"})}),Qe.jsxs("div",{className:"flex flex-col gap-2 items-end",children:[e.trending&&Qe.jsxs(EP,{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white border-0 shadow-lg text-xs px-2 py-0.5",children:[Qe.jsx(fg,{className:"w-3 h-3 mr-1"}),"Hot"]}),Qe.jsx(EP,{className:"bg-white/30 backdrop-blur-md text-white border-0 text-xs px-2 py-0.5 font-bold",children:e.count})]})]}),Qe.jsxs("div",{children:[Qe.jsx("h3",{className:"font-bold text-base lg:text-lg mb-1.5 drop-shadow-lg",children:e.name}),Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsx("p",{className:"text-xs lg:text-sm text-white/90 font-medium",children:"Sn phm a dng"}),Qe.jsx(EP,{className:`bg-gradient-to-r ${e.color} text-white border-0 shadow-lg text-xs px-2 py-0.5`,children:e.discount})]})]}),Qe.jsx(QT.div,{initial:{opacity:0,x:-10},whileHover:{opacity:1,x:0},className:"absolute bottom-4 right-4",children:Qe.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 backdrop-blur-md flex items-center justify-center",children:Qe.jsx(Qp,{className:"w-4 h-4 text-white"})})}),Qe.jsx(QT.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 group-hover:opacity-100",initial:{x:"-100%"},whileHover:{x:"200%"},transition:{duration:.6}})]})]})},e.id))}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.3},className:"relative",children:Qe.jsxs(DP,{className:"border-border/50 bg-gradient-to-r from-card/80 via-card/60 to-card/80 backdrop-blur-sm shadow-xl overflow-hidden",children:[Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary via-purple-500 to-cyan-500"}),Qe.jsxs(UP,{className:"p-8",children:[Qe.jsxs("div",{className:"text-center mb-6",children:[Qe.jsx("h3",{className:"text-xl font-bold mb-2",children:"Xu hng mua sm"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Khm ph cc t kha hot nht hin nay"})]}),Qe.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:[{label:"Hot trend",icon:"",color:"from-orange-500 to-red-500"},{label:"Flash sale",icon:"",color:"from-yellow-500 to-amber-500"},{label:"Local brand",icon:"",color:"from-green-500 to-emerald-500"},{label:"Vintage",icon:"",color:"from-purple-500 to-pink-500"},{label:"Gaming gear",icon:"",color:"from-blue-500 to-cyan-500"},{label:"Luxury",icon:"",color:"from-indigo-500 to-purple-500"},{label:"Tech deals",icon:"",color:"from-cyan-500 to-blue-500"},{label:"Fashion",icon:"",color:"from-pink-500 to-rose-500"}].map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{delay:.05*t},whileHover:{scale:1.1,y:-2},whileTap:{scale:.95},children:Qe.jsxs(EP,{variant:"outline",className:`border-2 border-border/50 bg-gradient-to-r ${e.color} bg-clip-text text-transparent hover:bg-gradient-to-r hover:${e.color} cursor-pointer transition-all duration-300 px-4 py-2 text-sm font-semibold shadow-md hover:shadow-lg backdrop-blur-sm`,children:[Qe.jsx("span",{className:"mr-2",children:e.icon}),"#",e.label]})},e.label))}),Qe.jsx(QT.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{delay:.5},className:"flex justify-center mt-8",children:Qe.jsxs(AP,{className:"bg-gradient-to-r from-primary to-purple-600 text-white font-bold px-8 py-6 rounded-2xl shadow-xl hover:shadow-2xl hover:scale-105 transition-all duration-300",children:[Qe.jsx(pg,{className:"w-5 h-5 mr-2"}),"Khm ph tt c",Qe.jsx(Qp,{className:"w-5 h-5 ml-2"})]})})]})]})})]})]})},HP=Ve.createContext(void 0),VP=({children:e})=>{const[t,n]=Ve.useState([]),r=e=>{n(t=>t.filter(t=>t.id!==e))};return Qe.jsx(HP.Provider,{value:{items:t,addToCart:e=>{n(t=>t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?{...t,quantity:t.quantity+(e.quantity||1)}:t):[...t,{...e,quantity:e.quantity||1}])},removeFromCart:r,updateQuantity:(e,t)=>{t<=0?r(e):n(n=>n.map(n=>n.id===e?{...n,quantity:t}:n))},clearCart:()=>{n([])},getTotalItems:()=>t.reduce((e,t)=>e+t.quantity,0),getTotalPrice:()=>t.reduce((e,t)=>e+t.price*t.quantity,0)},children:e})},GP=()=>{const e=Ve.useContext(HP);if(!e)throw new Error("useCart must be used within a CartProvider");return e};var WP="focusScope.autoFocusOnMount",KP="focusScope.autoFocusOnUnmount",qP={bubbles:!1,cancelable:!0},XP=Ve.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...s}=e,[o,l]=Ve.useState(null),c=Oh(i),d=Oh(a),u=Ve.useRef(null),h=wh(t,e=>l(e)),p=Ve.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;Ve.useEffect(()=>{if(r){let e=function(e){if(p.paused||!o)return;const t=e.target;o.contains(t)?u.current=t:ZP(u.current,{select:!0})},t=function(e){if(p.paused||!o)return;const t=e.relatedTarget;null!==t&&(o.contains(t)||ZP(u.current,{select:!0}))},n=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&ZP(o)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const r=new MutationObserver(n);return o&&r.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[r,o,p.paused]),Ve.useEffect(()=>{if(o){QP.add(p);const t=document.activeElement;if(!o.contains(t)){const n=new CustomEvent(WP,qP);o.addEventListener(WP,c),o.dispatchEvent(n),n.defaultPrevented||(!function(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(ZP(r,{select:t}),document.activeElement!==n)return}((e=$P(o),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&ZP(o))}return()=>{o.removeEventListener(WP,c),setTimeout(()=>{const e=new CustomEvent(KP,qP);o.addEventListener(KP,d),o.dispatchEvent(e),e.defaultPrevented||ZP(t??document.body,{select:!0}),o.removeEventListener(KP,d),QP.remove(p)},0)}}var e},[o,c,d,p]);const m=Ve.useCallback(e=>{if(!n&&!r)return;if(p.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,i=document.activeElement;if(t&&i){const t=e.currentTarget,[r,a]=function(e){const t=$P(e),n=YP(t,e),r=YP(t.reverse(),e);return[n,r]}(t);r&&a?e.shiftKey||i!==a?e.shiftKey&&i===r&&(e.preventDefault(),n&&ZP(a,{select:!0})):(e.preventDefault(),n&&ZP(r,{select:!0})):i===t&&e.preventDefault()}},[n,r,p.paused]);return Qe.jsx(Th.div,{tabIndex:-1,...s,ref:h,onKeyDown:m})});function $P(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function YP(e,t){for(const n of e)if(!JP(n,{upTo:t}))return n}function JP(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function ZP(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}XP.displayName="FocusScope";var QP=function(){let e=[];return{add(t){const n=e[0];t!==n&&(null==n||n.pause()),e=eO(e,t),e.unshift(t)},remove(t){var n;e=eO(e,t),null==(n=e[0])||n.resume()}}}();function eO(e,t){const n=[...e],r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}var tO=0;function nO(){Ve.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??rO()),document.body.insertAdjacentElement("beforeend",e[1]??rO()),tO++,()=>{1===tO&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),tO--}},[])}function rO(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var iO=function(){return iO=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},iO.apply(this,arguments)};function aO(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}"function"==typeof SuppressedError&&SuppressedError;var sO="right-scroll-bar-position",oO="width-before-scroll-bar";function lO(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var cO="undefined"!=typeof window?Ve.useLayoutEffect:Ve.useEffect,dO=new WeakMap;function uO(e,t){var n,r,i,a=(n=null,r=function(t){return e.forEach(function(e){return lO(e,t)})},(i=Ve.useState(function(){return{value:n,callback:r,facade:{get current(){return i.value},set current(e){var t=i.value;t!==e&&(i.value=e,i.callback(e,t))}}}})[0]).callback=r,i.facade);return cO(function(){var t=dO.get(a);if(t){var n=new Set(t),r=new Set(e),i=a.current;n.forEach(function(e){r.has(e)||lO(e,null)}),r.forEach(function(e){n.has(e)||lO(e,i)})}dO.set(a,e)},[e]),a}function hO(e){return e}var pO=function(e){var t=e.sideCar,n=aO(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return Ve.createElement(r,iO({},n))};pO.isSideCarExport=!0;var mO=function(e){void 0===e&&(e={});var t=function(e,t){void 0===t&&(t=hO);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var i=t(e,r);return n.push(i),function(){n=n.filter(function(e){return e!==i})}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var i=n;n=[],i.forEach(e),t=n}var a=function(){var n=t;t=[],n.forEach(e)},s=function(){return Promise.resolve().then(a)};s(),n={push:function(e){t.push(e),s()},filter:function(e){return t=t.filter(e),n}}}};return i}(null);return t.options=iO({async:!0,ssr:!1},e),t}(),fO=function(){},gO=Ve.forwardRef(function(e,t){var n=Ve.useRef(null),r=Ve.useState({onScrollCapture:fO,onWheelCapture:fO,onTouchMoveCapture:fO}),i=r[0],a=r[1],s=e.forwardProps,o=e.children,l=e.className,c=e.removeScrollBar,d=e.enabled,u=e.shards,h=e.sideCar,p=e.noRelative,m=e.noIsolation,f=e.inert,g=e.allowPinchZoom,v=e.as,x=void 0===v?"div":v,y=e.gapMode,b=aO(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=h,j=uO([n,t]),N=iO(iO({},b),i);return Ve.createElement(Ve.Fragment,null,d&&Ve.createElement(w,{sideCar:mO,removeScrollBar:c,shards:u,noRelative:p,noIsolation:m,inert:f,setCallbacks:a,allowPinchZoom:!!g,lockRef:n,gapMode:y}),s?Ve.cloneElement(Ve.Children.only(o),iO(iO({},N),{ref:j})):Ve.createElement(x,iO({},N,{className:l,ref:j}),o))});gO.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},gO.classNames={fullWidth:oO,zeroRight:sO};function vO(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return t&&e.setAttribute("nonce",t),e}var xO=function(){var e=0,t=null;return{add:function(n){var r,i;0==e&&(t=vO())&&(i=n,(r=t).styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},yO=function(){var e,t=(e=xO(),function(t,n){Ve.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])});return function(e){var n=e.styles,r=e.dynamic;return t(n,r),null}},bO={left:0,top:0,right:0,gap:0},wO=function(e){return parseInt(e||"",10)||0},jO=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return bO;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[wO(n),wO(r),wO(i)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},NO=yO(),_O="data-scroll-locked",SO=function(e,t,n,r){var i=e.left,a=e.top,s=e.right,o=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(o,"px ").concat(r,";\n  }\n  body[").concat(_O,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(a,"px;\n    padding-right: ").concat(s,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(sO," {\n    right: ").concat(o,"px ").concat(r,";\n  }\n  \n  .").concat(oO," {\n    margin-right: ").concat(o,"px ").concat(r,";\n  }\n  \n  .").concat(sO," .").concat(sO," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(oO," .").concat(oO," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(_O,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},CO=function(){var e=parseInt(document.body.getAttribute(_O)||"0",10);return isFinite(e)?e:0},AO=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=void 0===r?"margin":r;Ve.useEffect(function(){return document.body.setAttribute(_O,(CO()+1).toString()),function(){var e=CO()-1;e<=0?document.body.removeAttribute(_O):document.body.setAttribute(_O,e.toString())}},[]);var a=Ve.useMemo(function(){return jO(i)},[i]);return Ve.createElement(NO,{styles:SO(a,!t,i,n?"":"!important")})},MO=!1;if("undefined"!=typeof window)try{var EO=Object.defineProperty({},"passive",{get:function(){return MO=!0,!0}});window.addEventListener("test",EO,EO),window.removeEventListener("test",EO,EO)}catch(c$e){MO=!1}var kO=!!MO&&{passive:!1},TO=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},PO=function(e,t){var n=t.ownerDocument,r=t;do{if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),OO(e,r)){var i=RO(e,r);if(i[1]>i[2])return!0}r=r.parentNode}while(r&&r!==n.body);return!1},OO=function(e,t){return"v"===e?function(e){return TO(e,"overflowY")}(t):function(e){return TO(e,"overflowX")}(t)},RO=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},IO=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},DO=function(e){return[e.deltaX,e.deltaY]},LO=function(e){return e&&"current"in e?e.current:e},BO=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},FO=0,UO=[];function zO(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const HO=(VO=function(e){var t=Ve.useRef([]),n=Ve.useRef([0,0]),r=Ve.useRef(),i=Ve.useState(FO++)[0],a=Ve.useState(yO)[0],s=Ve.useRef(e);Ve.useEffect(function(){s.current=e},[e]),Ve.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var t=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([e.lockRef.current],(e.shards||[]).map(LO),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var o=Ve.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!s.current.allowPinchZoom;var i,a=IO(e),o=n.current,l="deltaX"in e?e.deltaX:o[0]-a[0],c="deltaY"in e?e.deltaY:o[1]-a[1],d=e.target,u=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var h=PO(u,d);if(!h)return!0;if(h?i=u:(i="v"===u?"h":"v",h=PO(u,d)),!h)return!1;if(!r.current&&"changedTouches"in e&&(l||c)&&(r.current=i),!i)return!0;var p=r.current||i;return function(e,t,n,r){var i=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),a=i*r,s=n.target,o=t.contains(s),l=!1,c=a>0,d=0,u=0;do{if(!s)break;var h=RO(e,s),p=h[0],m=h[1]-h[2]-i*p;(p||m)&&OO(e,s)&&(d+=m,u+=p);var f=s.parentNode;s=f&&f.nodeType===Node.DOCUMENT_FRAGMENT_NODE?f.host:f}while(!o&&s!==document.body||o&&(t.contains(s)||t===s));return(c&&Math.abs(d)<1||!c&&Math.abs(u)<1)&&(l=!0),l}(p,t,e,"h"===p?l:c)},[]),l=Ve.useCallback(function(e){var n=e;if(UO.length&&UO[UO.length-1]===a){var r="deltaY"in n?DO(n):IO(n),i=t.current.filter(function(e){return e.name===n.type&&(e.target===n.target||n.target===e.shadowParent)&&function(e,t){return e[0]===t[0]&&e[1]===t[1]}(e.delta,r)})[0];if(i&&i.should)n.cancelable&&n.preventDefault();else if(!i){var l=(s.current.shards||[]).map(LO).filter(Boolean).filter(function(e){return e.contains(n.target)});(l.length>0?o(n,l[0]):!s.current.noIsolation)&&n.cancelable&&n.preventDefault()}}},[]),c=Ve.useCallback(function(e,n,r,i){var a={name:e,delta:n,target:r,should:i,shadowParent:zO(r)};t.current.push(a),setTimeout(function(){t.current=t.current.filter(function(e){return e!==a})},1)},[]),d=Ve.useCallback(function(e){n.current=IO(e),r.current=void 0},[]),u=Ve.useCallback(function(t){c(t.type,DO(t),t.target,o(t,e.lockRef.current))},[]),h=Ve.useCallback(function(t){c(t.type,IO(t),t.target,o(t,e.lockRef.current))},[]);Ve.useEffect(function(){return UO.push(a),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:h}),document.addEventListener("wheel",l,kO),document.addEventListener("touchmove",l,kO),document.addEventListener("touchstart",d,kO),function(){UO=UO.filter(function(e){return e!==a}),document.removeEventListener("wheel",l,kO),document.removeEventListener("touchmove",l,kO),document.removeEventListener("touchstart",d,kO)}},[]);var p=e.removeScrollBar,m=e.inert;return Ve.createElement(Ve.Fragment,null,m?Ve.createElement(a,{styles:BO(i)}):null,p?Ve.createElement(AO,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},mO.useMedium(VO),pO);var VO,GO=Ve.forwardRef(function(e,t){return Ve.createElement(gO,iO({},e,{ref:t,sideCar:HO}))});GO.classNames=gO.classNames;var WO=new WeakMap,KO=new WeakMap,qO={},XO=0,$O=function(e){return e&&(e.host||$O(e.parentNode))},YO=function(e,t,n,r){var i=function(e,t){return t.map(function(t){if(e.contains(t))return t;var n=$O(t);return n&&e.contains(n)?n:null}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);qO[n]||(qO[n]=new WeakMap);var a=qO[n],s=[],o=new Set,l=new Set(i),c=function(e){e&&!o.has(e)&&(o.add(e),c(e.parentNode))};i.forEach(c);var d=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(o.has(e))d(e);else try{var t=e.getAttribute(r),i=null!==t&&"false"!==t,l=(WO.get(e)||0)+1,c=(a.get(e)||0)+1;WO.set(e,l),a.set(e,c),s.push(e),1===l&&i&&KO.set(e,!0),1===c&&e.setAttribute(n,"true"),i||e.setAttribute(r,"true")}catch(CI){}})};return d(t),o.clear(),XO++,function(){s.forEach(function(e){var t=WO.get(e)-1,i=a.get(e)-1;WO.set(e,t),a.set(e,i),t||(KO.has(e)||e.removeAttribute(r),KO.delete(e)),i||e.removeAttribute(n)}),--XO||(WO=new WeakMap,WO=new WeakMap,KO=new WeakMap,qO={})}},JO=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),YO(r,i,n,"aria-hidden")):function(){return null}},ZO="Dialog",[QO,eR]=jh(ZO),[tR,nR]=QO(ZO),rR=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:s=!0}=e,o=Ve.useRef(null),l=Ve.useRef(null),[c,d]=Yh({prop:r,defaultProp:i??!1,onChange:a,caller:ZO});return Qe.jsx(tR,{scope:t,triggerRef:o,contentRef:l,contentId:Sx(),titleId:Sx(),descriptionId:Sx(),open:c,onOpenChange:d,onOpenToggle:Ve.useCallback(()=>d(e=>!e),[d]),modal:s,children:n})};rR.displayName=ZO;var iR="DialogTrigger",aR=Ve.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=nR(iR,n),a=wh(t,i.triggerRef);return Qe.jsx(Th.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":SR(i.open),...r,ref:a,onClick:xh(e.onClick,i.onOpenToggle)})});aR.displayName=iR;var sR="DialogPortal",[oR,lR]=QO(sR,{forceMount:void 0}),cR=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:i}=e,a=nR(sR,t);return Qe.jsx(oR,{scope:t,forceMount:n,children:Ve.Children.map(r,e=>Qe.jsx(qh,{present:n||a.open,children:Qe.jsx(Kh,{asChild:!0,container:i,children:e})}))})};cR.displayName=sR;var dR="DialogOverlay",uR=Ve.forwardRef((e,t)=>{const n=lR(dR,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,a=nR(dR,e.__scopeDialog);return a.modal?Qe.jsx(qh,{present:r||a.open,children:Qe.jsx(pR,{...i,ref:t})}):null});uR.displayName=dR;var hR=_h("DialogOverlay.RemoveScroll"),pR=Ve.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=nR(dR,n);return Qe.jsx(GO,{as:hR,allowPinchZoom:!0,shards:[i.contentRef],children:Qe.jsx(Th.div,{"data-state":SR(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),mR="DialogContent",fR=Ve.forwardRef((e,t)=>{const n=lR(mR,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,a=nR(mR,e.__scopeDialog);return Qe.jsx(qh,{present:r||a.open,children:a.modal?Qe.jsx(gR,{...i,ref:t}):Qe.jsx(vR,{...i,ref:t})})});fR.displayName=mR;var gR=Ve.forwardRef((e,t)=>{const n=nR(mR,e.__scopeDialog),r=Ve.useRef(null),i=wh(t,n.contentRef,r);return Ve.useEffect(()=>{const e=r.current;if(e)return JO(e)},[]),Qe.jsx(xR,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:xh(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null==(t=n.triggerRef.current)||t.focus()}),onPointerDownOutside:xh(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()}),onFocusOutside:xh(e.onFocusOutside,e=>e.preventDefault())})}),vR=Ve.forwardRef((e,t)=>{const n=nR(mR,e.__scopeDialog),r=Ve.useRef(!1),i=Ve.useRef(!1);return Qe.jsx(xR,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var a,s;null==(a=e.onCloseAutoFocus)||a.call(e,t),t.defaultPrevented||(r.current||null==(s=n.triggerRef.current)||s.focus(),t.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:t=>{var a,s;null==(a=e.onInteractOutside)||a.call(e,t),t.defaultPrevented||(r.current=!0,"pointerdown"===t.detail.originalEvent.type&&(i.current=!0));const o=t.target;(null==(s=n.triggerRef.current)?void 0:s.contains(o))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})}),xR=Ve.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...s}=e,o=nR(mR,n),l=Ve.useRef(null),c=wh(t,l);return nO(),Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(XP,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:Qe.jsx(Fh,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":SR(o.open),...s,ref:c,onDismiss:()=>o.onOpenChange(!1)})}),Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(ER,{titleId:o.titleId}),Qe.jsx(kR,{contentRef:l,descriptionId:o.descriptionId})]})]})}),yR="DialogTitle",bR=Ve.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=nR(yR,n);return Qe.jsx(Th.h2,{id:i.titleId,...r,ref:t})});bR.displayName=yR;var wR="DialogDescription",jR=Ve.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=nR(wR,n);return Qe.jsx(Th.p,{id:i.descriptionId,...r,ref:t})});jR.displayName=wR;var NR="DialogClose",_R=Ve.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=nR(NR,n);return Qe.jsx(Th.button,{type:"button",...r,ref:t,onClick:xh(e.onClick,()=>i.onOpenChange(!1))})});function SR(e){return e?"open":"closed"}_R.displayName=NR;var CR="DialogTitleWarning",[AR,MR]=function(e,t){const n=Ve.createContext(t),r=e=>{const{children:t,...r}=e,i=Ve.useMemo(()=>r,Object.values(r));return Qe.jsx(n.Provider,{value:i,children:t})};return r.displayName=e+"Provider",[r,function(r){const i=Ve.useContext(n);if(i)return i;if(void 0!==t)return t;throw new Error(`\`${r}\` must be used within \`${e}\``)}]}(CR,{contentName:mR,titleName:yR,docsSlug:"dialog"}),ER=({titleId:e})=>{const t=MR(CR),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return Ve.useEffect(()=>{if(e){document.getElementById(e)}},[n,e]),null},kR=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${MR("DialogDescriptionWarning").contentName}}.`;return Ve.useEffect(()=>{var n;const r=null==(n=e.current)?void 0:n.getAttribute("aria-describedby");if(t&&r){document.getElementById(t)}},[n,e,t]),null},TR=rR,PR=aR,OR=cR,RR=uR,IR=fR,DR=bR,LR=jR,BR=_R;const FR=TR,UR=PR,zR=OR,HR=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(RR,{ref:n,className:Rv("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));HR.displayName=RR.displayName;const VR=Ve.forwardRef(({className:e,children:t,...n},r)=>Qe.jsxs(zR,{children:[Qe.jsx(HR,{}),Qe.jsxs(IR,{ref:r,className:Rv("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,Qe.jsxs(BR,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[Qe.jsx(Fg,{className:"h-4 w-4"}),Qe.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));VR.displayName=IR.displayName;const GR=({className:e,...t})=>Qe.jsx("div",{className:Rv("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});GR.displayName="DialogHeader";const WR=({className:e,...t})=>Qe.jsx("div",{className:Rv("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});WR.displayName="DialogFooter";const KR=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(DR,{ref:n,className:Rv("text-lg font-semibold leading-none tracking-tight",e),...t}));KR.displayName=DR.displayName;const qR=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(LR,{ref:n,className:Rv("text-sm text-muted-foreground",e),...t}));qR.displayName=LR.displayName;var XR="horizontal",$R=["horizontal","vertical"],YR=Ve.forwardRef((e,t)=>{const{decorative:n,orientation:r=XR,...i}=e,a=function(e){return $R.includes(e)}(r)?r:XR,s=n?{role:"none"}:{"aria-orientation":"vertical"===a?a:void 0,role:"separator"};return Qe.jsx(Th.div,{"data-orientation":a,...s,...i,ref:t})});YR.displayName="Separator";var JR=YR;const ZR=Ve.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},i)=>Qe.jsx(JR,{ref:i,decorative:n,orientation:t,className:Rv("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),...r}));ZR.displayName=JR.displayName;let QR,eI,tI,nI={data:""},rI=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,iI=/\/\*[^]*?\*\/|  +/g,aI=/\n+/g,sI=(e,t)=>{let n="",r="",i="";for(let a in e){let s=e[a];"@"==a[0]?"i"==a[1]?n=a+" "+s+";":r+="f"==a[1]?sI(s,a):a+"{"+sI(s,"k"==a[1]?"":t)+"}":"object"==typeof s?r+=sI(s,t?t.replace(/([^,])+/g,e=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):a):null!=s&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=sI.p?sI.p(a,s):a+":"+s+";")}return n+(t&&i?t+"{"+i+"}":i)+r},oI={},lI=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+lI(e[n]);return t}return e};function cI(e){let t=this||{},n=e.call?e(t.p):e;return((e,t,n,r,i)=>{let a=lI(e),s=oI[a]||(oI[a]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(a));if(!oI[s]){let t=a!==e?e:(e=>{let t,n,r=[{}];for(;t=rI.exec(e.replace(iI,""));)t[4]?r.shift():t[3]?(n=t[3].replace(aI," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(aI," ").trim();return r[0]})(e);oI[s]=sI(i?{["@keyframes "+s]:t}:t,n?"":"."+s)}let o=n&&oI.g?oI.g:null;return n&&(oI.g=oI[s]),l=oI[s],c=t,d=r,(u=o)?c.data=c.data.replace(u,l):-1===c.data.indexOf(l)&&(c.data=d?l+c.data:c.data+l),s;var l,c,d,u})(n.unshift?n.raw?((e,t,n)=>e.reduce((e,r,i)=>{let a=t[i];if(a&&a.call){let e=a(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;a=t?"."+t:e&&"object"==typeof e?e.props?"":sI(e,""):!1===e?"":e}return e+r+(null==a?"":a)},""))(n,[].slice.call(arguments,1),t.p):n.reduce((e,n)=>Object.assign(e,n&&n.call?n(t.p):n),{}):n,(e=>{if("object"==typeof window){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||nI})(t.target),t.g,t.o,t.k)}cI.bind({g:1});let dI=cI.bind({k:1});function uI(e,t){let n=this||{};return function(){let t=arguments;return function r(i,a){let s=Object.assign({},i),o=s.className||r.className;n.p=Object.assign({theme:eI&&eI()},s),n.o=/ *go\d+/.test(o),s.className=cI.apply(n,t)+(o?" "+o:"");let l=e;return e[0]&&(l=s.as||e,delete s.as),tI&&l[0]&&tI(s),QR(l,s)}}}var hI=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,pI=(()=>{let e=0;return()=>(++e).toString()})(),mI=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),fI="default",gI=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case 2:let{toast:r}=t;return gI(e,{type:e.toasts.find(e=>e.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=t;return{...e,toasts:e.toasts.map(e=>e.id===i||void 0===i?{...e,dismissed:!0,visible:!1}:e)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+a}))}}},vI=[],xI={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},yI={},bI=(e,t=fI)=>{yI[t]=gI(yI[t]||xI,e),vI.forEach(([e,n])=>{e===t&&n(yI[t])})},wI=e=>Object.keys(yI).forEach(t=>bI(e,t)),jI=(e=fI)=>t=>{bI(t,e)},NI={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},_I=e=>(t,n)=>{let r=((e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(null==n?void 0:n.id)||pI()}))(t,e,n);return jI(r.toasterId||(e=>Object.keys(yI).find(t=>yI[t].toasts.some(t=>t.id===e)))(r.id))({type:2,toast:r}),r.id},SI=(e,t)=>_I("blank")(e,t);SI.error=_I("error"),SI.success=_I("success"),SI.loading=_I("loading"),SI.custom=_I("custom"),SI.dismiss=(e,t)=>{let n={type:3,toastId:e};t?jI(t)(n):wI(n)},SI.dismissAll=e=>SI.dismiss(void 0,e),SI.remove=(e,t)=>{let n={type:4,toastId:e};t?jI(t)(n):wI(n)},SI.removeAll=e=>SI.remove(void 0,e),SI.promise=(e,t,n)=>{let r=SI.loading(t.loading,{...n,...null==n?void 0:n.loading});return"function"==typeof e&&(e=e()),e.then(e=>{let i=t.success?hI(t.success,e):void 0;return i?SI.success(i,{id:r,...n,...null==n?void 0:n.success}):SI.dismiss(r),e}).catch(e=>{let i=t.error?hI(t.error,e):void 0;i?SI.error(i,{id:r,...n,...null==n?void 0:n.error}):SI.dismiss(r)}),e};var CI,AI,MI,EI,kI=(e,t="default")=>{let{toasts:n,pausedAt:r}=((e={},t=fI)=>{let[n,r]=Ve.useState(yI[t]||xI),i=Ve.useRef(yI[t]);Ve.useEffect(()=>(i.current!==yI[t]&&r(yI[t]),vI.push([t,r]),()=>{let e=vI.findIndex(([e])=>e===t);e>-1&&vI.splice(e,1)}),[t]);let a=n.toasts.map(t=>{var n,r,i;return{...e,...e[t.type],...t,removeDelay:t.removeDelay||(null==(n=e[t.type])?void 0:n.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(r=e[t.type])?void 0:r.duration)||(null==e?void 0:e.duration)||NI[t.type],style:{...e.style,...null==(i=e[t.type])?void 0:i.style,...t.style}}});return{...n,toasts:a}})(e,t),i=Ve.useRef(new Map).current,a=Ve.useCallback((e,t=1e3)=>{if(i.has(e))return;let n=setTimeout(()=>{i.delete(e),s({type:4,toastId:e})},t);i.set(e,n)},[]);Ve.useEffect(()=>{if(r)return;let e=Date.now(),i=n.map(n=>{if(n.duration===1/0)return;let r=(n.duration||0)+n.pauseDuration-(e-n.createdAt);if(!(r<0))return setTimeout(()=>SI.dismiss(n.id,t),r);n.visible&&SI.dismiss(n.id)});return()=>{i.forEach(e=>e&&clearTimeout(e))}},[n,r,t]);let s=Ve.useCallback(jI(t),[t]),o=Ve.useCallback(()=>{s({type:5,time:Date.now()})},[s]),l=Ve.useCallback((e,t)=>{s({type:1,toast:{id:e,height:t}})},[s]),c=Ve.useCallback(()=>{r&&s({type:6,time:Date.now()})},[r,s]),d=Ve.useCallback((e,t)=>{let{reverseOrder:r=!1,gutter:i=8,defaultPosition:a}=t||{},s=n.filter(t=>(t.position||a)===(e.position||a)&&t.height),o=s.findIndex(t=>t.id===e.id),l=s.filter((e,t)=>t<o&&e.visible).length;return s.filter(e=>e.visible).slice(...r?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+i,0)},[n]);return Ve.useEffect(()=>{n.forEach(e=>{if(e.dismissed)a(e.id,e.removeDelay);else{let t=i.get(e.id);t&&(clearTimeout(t),i.delete(e.id))}})},[n,a]),{toasts:n,handlers:{updateHeight:l,startPause:o,endPause:c,calculateOffset:d}}},TI=dI`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,PI=dI`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,OI=dI`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,RI=uI("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${TI} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${PI} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${OI} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,II=dI`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,DI=uI("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${II} 1s linear infinite;
`,LI=dI`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,BI=dI`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,FI=uI("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${LI} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${BI} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,UI=uI("div")`
  position: absolute;
`,zI=uI("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,HI=dI`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,VI=uI("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${HI} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,GI=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return void 0!==t?"string"==typeof t?Ve.createElement(VI,null,t):t:"blank"===n?null:Ve.createElement(zI,null,Ve.createElement(DI,{...r}),"loading"!==n&&Ve.createElement(UI,null,"error"===n?Ve.createElement(RI,{...r}):Ve.createElement(FI,{...r})))},WI=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,KI=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,qI=uI("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,XI=uI("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,$I=Ve.memo(({toast:e,position:t,style:n,children:r})=>{let i=e.height?((e,t)=>{let n=e.includes("top")?1:-1,[r,i]=mI()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[WI(n),KI(n)];return{animation:t?`${dI(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${dI(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(e.position||t||"top-center",e.visible):{opacity:0},a=Ve.createElement(GI,{toast:e}),s=Ve.createElement(XI,{...e.ariaProps},hI(e.message,e));return Ve.createElement(qI,{className:e.className,style:{...i,...n,...e.style}},"function"==typeof r?r({icon:a,message:s}):Ve.createElement(Ve.Fragment,null,a,s))});CI=Ve.createElement,sI.p=AI,QR=CI,eI=MI,tI=EI;var YI=({id:e,className:t,style:n,onHeightUpdate:r,children:i})=>{let a=Ve.useCallback(t=>{if(t){let n=()=>{let n=t.getBoundingClientRect().height;r(e,n)};n(),new MutationObserver(n).observe(t,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return Ve.createElement("div",{ref:a,className:t,style:n},i)},JI=cI`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ZI=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:i,toasterId:a,containerStyle:s,containerClassName:o})=>{let{toasts:l,handlers:c}=kI(n,a);return Ve.createElement("div",{"data-rht-toaster":a||"",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...s},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(n=>{let a=n.position||t,s=((e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:mI()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...i}})(a,c.calculateOffset(n,{reverseOrder:e,gutter:r,defaultPosition:t}));return Ve.createElement(YI,{id:n.id,key:n.id,onHeightUpdate:c.updateHeight,className:n.visible?JI:"",style:s},"custom"===n.type?hI(n.message,n):i?i(n):Ve.createElement($I,{toast:n,position:a}))}))},QI=SI;const eD=({open:e,onOpenChange:t})=>{const{items:n,updateQuantity:r,removeFromCart:i,getTotalPrice:a,getTotalItems:s}=GP(),o=Zj(),{toast:l}=vh(),c=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e);return Qe.jsx(FR,{open:e,onOpenChange:t,children:Qe.jsxs(VR,{className:"max-w-2xl max-h-[80vh] bg-gradient-card border-border",children:[Qe.jsx(GR,{className:"space-y-3",children:Qe.jsxs(KR,{className:"flex items-center gap-3 text-2xl",children:[Qe.jsx(lg,{className:"w-6 h-6 text-primary"}),"Gi hng ca bn",s()>0&&Qe.jsxs(EP,{className:"bg-primary text-primary-foreground",children:[s()," sn phm"]})]})}),Qe.jsx("div",{className:"flex flex-col max-h-[60vh]",children:0===n.length?Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center py-12 text-center",children:[Qe.jsx(lg,{className:"w-16 h-16 text-muted-foreground mb-4"}),Qe.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Gi hng trng"}),Qe.jsx("p",{className:"text-muted-foreground mb-6",children:"Hy thm mt s sn phm  bt u mua sm"}),Qe.jsx(AP,{onClick:()=>t(!1),className:"bg-gradient-primary hover:opacity-90 transition-smooth",children:"Tip tc mua sm"})]}):Qe.jsxs(Qe.Fragment,{children:[Qe.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-4",children:Qe.jsx(eM,{children:n.map((e,t)=>Qe.jsxs(QT.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:.1*t},className:"flex gap-4 p-4 bg-background/50 rounded-lg border border-border hover-glow",children:[Qe.jsx("div",{className:"relative",children:Qe.jsx("img",{src:e.image,alt:e.name,className:"w-20 h-20 object-cover rounded-md"})}),Qe.jsxs("div",{className:"flex-1 space-y-2",children:[Qe.jsx("h4",{className:"font-semibold text-foreground",children:e.name}),(e.size||e.color)&&Qe.jsxs("div",{className:"flex gap-2",children:[e.size&&Qe.jsxs(EP,{variant:"outline",className:"text-xs",children:["Size: ",e.size]}),e.color&&Qe.jsxs(EP,{variant:"outline",className:"text-xs",children:["Mu: ",e.color]})]}),Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("div",{className:"flex flex-col",children:[Qe.jsx("span",{className:"font-bold text-primary",children:c(e.price)}),e.originalPrice&&Qe.jsx("span",{className:"text-sm text-muted-foreground line-through",children:c(e.originalPrice)})]}),Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsxs("div",{className:"flex items-center gap-2 bg-background rounded-md border border-border",children:[Qe.jsx(AP,{size:"icon",variant:"ghost",className:"w-8 h-8",onClick:()=>r(e.id,e.quantity-1),children:Qe.jsx(Tf,{className:"w-3 h-3"})}),Qe.jsx("span",{className:"w-8 text-center font-medium",children:e.quantity}),Qe.jsx(AP,{size:"icon",variant:"ghost",className:"w-8 h-8",onClick:()=>r(e.id,e.quantity+1),children:Qe.jsx(Wf,{className:"w-3 h-3"})})]}),Qe.jsx(AP,{size:"icon",variant:"ghost",className:"w-8 h-8 text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>{return t=e.id,n=e.name,i(t),void l({title:" xa sn phm",description:`${n}  c xa khi gi hng.`});var t,n},children:Qe.jsx(Ng,{className:"w-4 h-4"})})]})]})]})]},e.id))})}),Qe.jsx(ZR,{className:"my-4"}),Qe.jsxs("div",{className:"space-y-4",children:[Qe.jsxs("div",{className:"flex justify-between items-center",children:[Qe.jsx("span",{className:"text-lg font-semibold",children:"Tng cng:"}),Qe.jsx("span",{className:"text-2xl font-bold text-primary",children:c(a())})]}),Qe.jsxs("div",{className:"flex gap-3",children:[Qe.jsx(AP,{variant:"outline",className:"flex-1 border-primary text-primary hover:bg-primary/10 transition-smooth",onClick:()=>t(!1),children:"Tip tc mua sm"}),Qe.jsxs(AP,{className:"flex-1 bg-gradient-primary hover:opacity-90 transition-smooth",onClick:()=>{0!==n.length?(t(!1),QI.loading("ang chuyn n trang thanh ton...",{duration:1500,position:"top-center"}),setTimeout(()=>{o("/checkout",{state:{products:n}})},1e3)):l({title:"Gi hng trng",description:"Vui lng thm sn phm vo gi hng trc khi thanh ton.",variant:"destructive"})},children:["Thanh ton",Qe.jsx(Qp,{className:"w-4 h-4 ml-2"})]})]})]})]})})]})})},tD=()=>{const e=Zj(),{addToCart:t}=GP();vh();const[n,r]=Ve.useState(!1),[i,a]=Ve.useState([]),s={hidden:{opacity:0,y:30,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:100,damping:12}}};return Qe.jsxs("section",{className:"py-20 lg:py-28 bg-gradient-to-b from-background via-muted/20 to-background relative overflow-hidden",children:[Qe.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[Qe.jsx(QT.div,{className:"absolute top-20 left-20 w-96 h-96 bg-primary/10 rounded-full blur-3xl",animate:{scale:[1,1.2,1],opacity:[.3,.5,.3]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),Qe.jsx(QT.div,{className:"absolute bottom-20 right-20 w-80 h-80 bg-purple-500/10 rounded-full blur-3xl",animate:{scale:[1.2,1,1.2],opacity:[.2,.4,.2]},transition:{duration:10,repeat:1/0,ease:"easeInOut"}}),[...Array(10)].map((e,t)=>Qe.jsx(QT.div,{className:"absolute w-2 h-2 bg-primary/30 rounded-full",style:{top:100*Math.random()+"%",left:100*Math.random()+"%"},animate:{y:[0,-30,0],opacity:[0,.6,0],scale:[0,1.5,0]},transition:{duration:3+2*Math.random(),repeat:1/0,delay:2*Math.random(),ease:"easeInOut"}},t))]}),Qe.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[Qe.jsx(QT.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"text-center mb-16",children:Qe.jsxs("div",{className:"flex flex-col items-center justify-center mb-6",children:[Qe.jsxs(QT.div,{initial:{scale:0,rotate:-180},whileInView:{scale:1,rotate:0},viewport:{once:!0},transition:{type:"spring",duration:.8},className:"relative mb-4",children:[Qe.jsx(QT.div,{className:"absolute inset-0 bg-gradient-to-r from-orange-500 to-pink-500 rounded-2xl blur-xl opacity-50",animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),Qe.jsx("div",{className:"relative w-16 h-16 rounded-2xl bg-gradient-to-br from-orange-500 to-pink-500 flex items-center justify-center shadow-2xl",children:Qe.jsx(pg,{className:"w-8 h-8 text-white"})})]}),Qe.jsxs("h2",{className:"text-4xl lg:text-5xl font-extrabold mb-6",children:["Sn phm"," ",Qe.jsx("span",{className:"bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:"Hot Trend"})]}),Qe.jsxs(QT.div,{className:"flex items-center justify-center gap-2 mb-6",initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{delay:.3,duration:.5},children:[Qe.jsx(QT.div,{className:"h-1 w-16 bg-gradient-to-r from-primary/30 to-purple-600/30 rounded-full",initial:{width:0},whileInView:{width:"4rem"},viewport:{once:!0},transition:{delay:.4,duration:.6}}),Qe.jsx(QT.div,{className:"h-1.5 w-8 bg-gradient-to-r from-primary to-purple-600 rounded-full",initial:{scale:0},whileInView:{scale:1},viewport:{once:!0},transition:{delay:.5,duration:.4,type:"spring"}}),Qe.jsx(QT.div,{className:"h-1 w-16 bg-gradient-to-r from-primary/30 to-purple-600/30 rounded-full",initial:{width:0},whileInView:{width:"4rem"},viewport:{once:!0},transition:{delay:.4,duration:.6}})]}),Qe.jsx("p",{className:"text-muted-foreground text-lg lg:text-xl max-w-2xl mx-auto",children:"Khm ph nhng sn phm c yu thch nht t cng ng"}),Qe.jsxs("div",{className:"flex items-center gap-6 mt-6",children:[Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center",children:Qe.jsx(Sg,{className:"w-5 h-5 text-primary"})}),Qe.jsxs("div",{className:"text-left",children:[Qe.jsx("div",{className:"text-2xl font-bold",children:"6"}),Qe.jsx("div",{className:"text-xs text-muted-foreground",children:"Hot Items"})]})]}),Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-500/20 flex items-center justify-center",children:Qe.jsx(zg,{className:"w-5 h-5 text-amber-500"})}),Qe.jsxs("div",{className:"text-left",children:[Qe.jsx("div",{className:"text-2xl font-bold",children:"50%"}),Qe.jsx("div",{className:"text-xs text-muted-foreground",children:"Sale Off"})]})]})]})]})}),Qe.jsx(QT.div,{variants:{hidden:{},visible:{transition:{staggerChildren:.08}}},initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8 mb-12",children:[{id:1,name:"o thun local brand",price:"299.000",originalPrice:"399.000",image:"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=400&h=400&fit=crop",rating:4.8,reviews:124,discount:25,isLive:!0,isTrending:!0,seller:{name:"LocalBrandVN",avatar:"https://images.unsplash.com/photo-1511367461989-f85a21fda167?w=60&h=60&fit=crop",verified:!0}},{id:2,name:"Ti xch vintage",price:"450.000",originalPrice:null,image:"https://images.unsplash.com/photo-1584917865442-de89df76afd3?w=400&h=400&fit=crop",rating:4.9,reviews:89,discount:0,isLive:!1,isTrending:!1,seller:{name:"VintageShop",avatar:"https://images.unsplash.com/photo-1465101046530-73398c7f28ca?w=60&h=60&fit=crop",verified:!0}},{id:3,name:"Sneakers limited",price:"1.299.000",originalPrice:"1.599.000",image:"https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=400&h=400&fit=crop",rating:4.7,reviews:256,discount:19,isLive:!0,isTrending:!0,seller:{name:"SneakerZone",avatar:"https://images.unsplash.com/photo-1517841905240-472988babdf9?w=60&h=60&fit=crop",verified:!0}},{id:4,name:"Tai nghe gaming",price:"899.000",originalPrice:null,image:"https://images.unsplash.com/photo-1583394838336-acd977736f90?w=400&h=400&fit=crop",rating:4.6,reviews:167,discount:0,isLive:!1,isTrending:!1,seller:{name:"GameAudio",avatar:"https://images.unsplash.com/photo-1508214751196-bcfd4ca60f91?w=60&h=60&fit=crop",verified:!1}},{id:5,name:"ng h thng minh",price:"2.299.000",originalPrice:"2.799.000",image:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400&h=400&fit=crop",rating:4.9,reviews:203,discount:18,isLive:!0,isTrending:!0,seller:{name:"SmartWatchVN",avatar:"https://images.unsplash.com/photo-1512436991641-6745cdb1723f?w=60&h=60&fit=crop",verified:!0}},{id:6,name:"Balo laptop cao cp",price:"799.000",originalPrice:null,image:"https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=400&h=400&fit=crop",rating:4.5,reviews:92,discount:0,isLive:!1,isTrending:!1,seller:{name:"LaptopBagPro",avatar:"https://images.unsplash.com/photo-1508214751196-bcfd4ca60f91?w=60&h=60&fit=crop",verified:!1}}].map(n=>Qe.jsx(QT.div,{variants:s,whileHover:{y:-8,scale:1.02},className:"group cursor-pointer",children:Qe.jsxs(DP,{className:"relative overflow-hidden border-2 border-border/50 hover:border-primary/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm shadow-lg hover:shadow-2xl transition-all duration-300 h-full",children:[Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-orange-500 via-pink-500 to-purple-500"}),Qe.jsx(QT.div,{className:"absolute inset-0 bg-gradient-to-br from-primary/10 to-purple-500/10 opacity-0 group-hover:opacity-100 blur-xl transition-opacity duration-300",animate:{scale:[1,1.05,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),Qe.jsxs("div",{className:"relative overflow-hidden",children:[Qe.jsx(QT.img,{src:n.image,alt:n.name,className:"w-full h-64 object-cover",whileHover:{scale:1.1},transition:{duration:.6}}),Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),Qe.jsxs("div",{className:"absolute top-3 left-3 flex flex-col gap-2",children:[n.discount>0&&Qe.jsxs(EP,{className:"bg-gradient-to-r from-red-500 to-orange-500 text-white border-0 shadow-lg animate-pulse",children:[Qe.jsx(zg,{className:"w-3 h-3 mr-1"}),"-",n.discount,"%"]}),n.isLive&&Qe.jsxs(EP,{className:"bg-gradient-to-r from-red-600 to-pink-600 text-white border-0 shadow-lg",children:[Qe.jsx(QT.span,{animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0},className:"w-2 h-2 bg-white rounded-full mr-2"}),"LIVE"]}),n.isTrending&&Qe.jsxs(EP,{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white border-0 shadow-lg",children:[Qe.jsx(Sg,{className:"w-3 h-3 mr-1"}),"Hot"]})]}),Qe.jsx(QT.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:Qe.jsx(AP,{size:"icon",variant:"ghost",className:"absolute top-3 right-3 w-10 h-10 rounded-full backdrop-blur-md shadow-lg transition-all "+(i.includes(n.id)?"bg-red-500/90 hover:bg-red-500 text-white":"bg-white/20 hover:bg-white/40 text-white"),onClick:e=>{var t;e.stopPropagation(),t=n.id,a(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},children:Qe.jsx(sf,{className:"w-5 h-5 transition-all "+(i.includes(n.id)?"fill-white":"")})})}),Qe.jsxs(QT.div,{initial:{opacity:0,y:20},whileHover:{opacity:1,y:0},className:"absolute inset-x-0 bottom-0 p-4 flex items-center justify-center gap-3",children:[Qe.jsx(QT.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:Qe.jsxs(AP,{size:"sm",variant:"secondary",className:"backdrop-blur-md bg-background shadow-lg",onClick:t=>{t.stopPropagation(),e(`/product/${n.id}`)},children:[Qe.jsx(Vm,{className:"w-4 h-4 mr-2"}),"Xem chi tit"]})}),Qe.jsx(QT.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:Qe.jsxs(AP,{size:"sm",className:"bg-gradient-to-r from-primary to-purple-600 hover:opacity-90 shadow-lg",onClick:e=>{e.stopPropagation(),t({id:n.id,name:n.name,price:n.price,originalPrice:n.originalPrice,image:n.image}),r(!0)},children:[Qe.jsx(cg,{className:"w-4 h-4 mr-2"}),"Thm"]})})]}),Qe.jsx(QT.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent opacity-0 group-hover:opacity-100",initial:{x:"-100%"},whileHover:{x:"200%"},transition:{duration:.6}})]}),Qe.jsxs(UP,{className:"p-5 relative",children:[Qe.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Qe.jsxs("div",{className:"relative",children:[Qe.jsx("img",{src:n.seller.avatar,alt:n.seller.name,className:"w-8 h-8 rounded-full object-cover border-2 border-primary/20"}),n.seller.verified&&Qe.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center border-2 border-card",children:Qe.jsx(Im,{className:"w-2.5 h-2.5 text-white"})})]}),Qe.jsx("span",{className:"text-sm font-semibold text-primary",children:n.seller.name})]}),Qe.jsx("h3",{className:"font-bold text-lg text-foreground group-hover:text-primary transition-colors mb-2 line-clamp-2",children:n.name}),Qe.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[Qe.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((e,t)=>Qe.jsx(fg,{className:"w-4 h-4 "+(t<Math.floor(n.rating)?"fill-amber-500 text-amber-500":"fill-gray-300 text-gray-300")},t))}),Qe.jsx("span",{className:"text-sm font-semibold",children:n.rating}),Qe.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",n.reviews," nh gi)"]})]}),Qe.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border/50",children:[Qe.jsxs("div",{className:"flex flex-col",children:[Qe.jsxs("span",{className:"text-2xl font-bold bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:[n.price,""]}),n.originalPrice&&Qe.jsxs("span",{className:"text-sm text-muted-foreground line-through",children:[n.originalPrice,""]})]}),Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"lg:hidden",children:Qe.jsx(AP,{size:"icon",className:"w-12 h-12 rounded-full bg-gradient-to-r from-primary to-purple-600 hover:opacity-90 shadow-lg",onClick:()=>{t({id:n.id,name:n.name,price:n.price,originalPrice:n.originalPrice,image:n.image}),r(!0)},children:Qe.jsx(cg,{className:"w-5 h-5"})})})]})]})]})},n.id))}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.3},className:"text-center",children:Qe.jsx(AN,{to:"/shop",children:Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(AP,{size:"lg",className:"bg-gradient-to-r from-primary to-purple-600 text-white font-bold px-10 py-7 rounded-2xl shadow-2xl hover:shadow-primary/50 transition-all duration-300 text-lg",children:[Qe.jsx(pg,{className:"w-5 h-5 mr-2"}),"Xem tt c sn phm",Qe.jsx(Qp,{className:"w-5 h-5 ml-2"})]})})})})]}),Qe.jsx(eD,{open:n,onOpenChange:r})]})};var nD={exports:{}},rD={},iD=Ve;var aD="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},sD=iD.useState,oD=iD.useEffect,lD=iD.useLayoutEffect,cD=iD.useDebugValue;function dD(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!aD(e,n)}catch(r){return!0}}var uD="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=sD({inst:{value:n,getSnapshot:t}}),i=r[0].inst,a=r[1];return lD(function(){i.value=n,i.getSnapshot=t,dD(i)&&a({inst:i})},[e,n,t]),oD(function(){return dD(i)&&a({inst:i}),e(function(){dD(i)&&a({inst:i})})},[e]),cD(n),n};rD.useSyncExternalStore=void 0!==iD.useSyncExternalStore?iD.useSyncExternalStore:uD,nD.exports=rD;var hD=nD.exports;function pD(){return()=>{}}var mD="Avatar",[fD]=jh(mD),[gD,vD]=fD(mD),xD=Ve.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[i,a]=Ve.useState("idle");return Qe.jsx(gD,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:Qe.jsx(Th.span,{...r,ref:t})})});xD.displayName=mD;var yD="AvatarImage",bD=Ve.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...a}=e,s=vD(yD,n),o=function(e,{referrerPolicy:t,crossOrigin:n}){const r=hD.useSyncExternalStore(pD,()=>!0,()=>!1),i=Ve.useRef(null),a=r?(i.current||(i.current=new window.Image),i.current):null,[s,o]=Ve.useState(()=>ND(a,e));return Wh(()=>{o(ND(a,e))},[a,e]),Wh(()=>{const e=e=>()=>{o(e)};if(!a)return;const r=e("loaded"),i=e("error");return a.addEventListener("load",r),a.addEventListener("error",i),t&&(a.referrerPolicy=t),"string"==typeof n&&(a.crossOrigin=n),()=>{a.removeEventListener("load",r),a.removeEventListener("error",i)}},[a,n,t]),s}(r,a),l=Oh(e=>{i(e),s.onImageLoadingStatusChange(e)});return Wh(()=>{"idle"!==o&&l(o)},[o,l]),"loaded"===o?Qe.jsx(Th.img,{...a,ref:t,src:r}):null});bD.displayName=yD;var wD="AvatarFallback",jD=Ve.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...i}=e,a=vD(wD,n),[s,o]=Ve.useState(void 0===r);return Ve.useEffect(()=>{if(void 0!==r){const e=window.setTimeout(()=>o(!0),r);return()=>window.clearTimeout(e)}},[r]),s&&"loaded"!==a.imageLoadingStatus?Qe.jsx(Th.span,{...i,ref:t}):null});function ND(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}jD.displayName=wD;var _D=xD,SD=bD,CD=jD;const AD=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(_D,{ref:n,className:Rv("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));AD.displayName=_D.displayName;const MD=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(SD,{ref:n,className:Rv("aspect-square h-full w-full",e),...t}));MD.displayName=SD.displayName;const ED=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(CD,{ref:n,className:Rv("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));ED.displayName=CD.displayName;const kD=()=>{const[e,t]=Ve.useState([]),[n,r]=Ve.useState([]),i=[{id:1,author:{name:"Minh Anh",username:"@minhanh_review",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b47c?w=100&h=100&fit=crop",verified:!0,badge:"Top Reviewer",badgeColor:"from-amber-500 to-orange-500"},content:"Review chi tit v chic o hoodie local brand ny! Cht liu cotton 100%, form dng oversized rt p. ng ng tin bt go ",image:"https://images.unsplash.com/photo-1556821840-3a63f95609a7?w=600&h=500&fit=crop",type:"review",likes:234,comments:45,shares:12,views:1200,timeAgo:"2 gi trc",tags:["#localbrand","#hoodie","#review"],featuredProduct:{name:"o Hoodie Local Brand",price:"299.000",originalPrice:"399.000",discount:25,image:"https://images.unsplash.com/photo-1512436991641-6745cdb1723f?w=80&h=80&fit=crop"}},{id:2,author:{name:"Tech Guru",username:"@techguru_vn",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop",verified:!0,badge:"Tech Expert",badgeColor:"from-blue-500 to-cyan-500"},content:"Livestream unboxing iPhone 15 Pro Max lc 20h ti nay! Ai cn t vn th vo xem nh ",image:"https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=600&h=500&fit=crop",type:"livestream",likes:567,comments:89,shares:34,views:5600,timeAgo:"4 gi trc",tags:["#iPhone15","#unboxing","#livestream"],isLive:!0,viewers:1234,featuredProduct:{name:"iPhone 15 Pro Max",price:"29.990.000",originalPrice:null,discount:0,image:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=80&h=80&fit=crop"}},{id:3,author:{name:"Fashion Lover",username:"@fashion_style",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop",verified:!1,badge:null,badgeColor:null},content:"Outfit of the day  Mix & match vi nhng mn  vintage tm c  ch m. Style retro ang comeback mnh!",image:"https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=600&h=500&fit=crop",type:"photo",likes:432,comments:67,shares:23,views:2100,timeAgo:"6 gi trc",tags:["#OOTD","#vintage","#fashion"]},{id:4,author:{name:"Gamer Zone",username:"@gamer_zone",avatar:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=100&h=100&fit=crop",verified:!0,badge:"Gaming Pro",badgeColor:"from-green-500 to-emerald-500"},content:"Setup gaming mi hon thin! RTX 4080 + i7 13700K. Ai mun build PC tng t th inbox t vn nh ",image:"https://images.unsplash.com/photo-1593640408182-31c70c8268f5?w=600&h=500&fit=crop",type:"photo",likes:789,comments:156,shares:45,views:3400,timeAgo:"8 gi trc",tags:["#gaming","#PC","#setup"]}],a={hidden:{opacity:0,y:30,scale:.98},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:100,damping:15}}};return Qe.jsxs("section",{className:"py-20 lg:py-28 bg-gradient-to-b from-background via-muted/20 to-background relative overflow-hidden",children:[Qe.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[Qe.jsx(QT.div,{className:"absolute top-20 left-20 w-96 h-96 bg-primary/10 rounded-full blur-3xl",animate:{scale:[1,1.2,1],opacity:[.3,.5,.3]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),Qe.jsx(QT.div,{className:"absolute bottom-20 right-20 w-80 h-80 bg-purple-500/10 rounded-full blur-3xl",animate:{scale:[1.2,1,1.2],opacity:[.2,.4,.2]},transition:{duration:10,repeat:1/0,ease:"easeInOut"}})]}),Qe.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[Qe.jsx(QT.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"text-center mb-16",children:Qe.jsxs("div",{className:"flex flex-col items-center justify-center mb-6",children:[Qe.jsxs(QT.div,{initial:{scale:0,rotate:-180},whileInView:{scale:1,rotate:0},viewport:{once:!0},transition:{type:"spring",duration:.8},className:"relative mb-4",children:[Qe.jsx(QT.div,{className:"absolute inset-0 bg-gradient-to-r from-blue-500 to-purple-500 rounded-2xl blur-xl opacity-50",animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),Qe.jsx("div",{className:"relative w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center shadow-2xl",children:Qe.jsx(Og,{className:"w-8 h-8 text-white"})})]}),Qe.jsxs("h2",{className:"text-4xl lg:text-5xl font-extrabold mb-6",children:["Cng ng"," ",Qe.jsx("span",{className:"bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:"Si ng"})]}),Qe.jsxs(QT.div,{className:"flex items-center justify-center gap-2 mb-6",initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{delay:.3,duration:.5},children:[Qe.jsx(QT.div,{className:"h-1 w-16 bg-gradient-to-r from-primary/30 to-purple-600/30 rounded-full",initial:{width:0},whileInView:{width:"4rem"},viewport:{once:!0},transition:{delay:.4,duration:.6}}),Qe.jsx(QT.div,{className:"h-1.5 w-8 bg-gradient-to-r from-primary to-purple-600 rounded-full",initial:{scale:0},whileInView:{scale:1},viewport:{once:!0},transition:{delay:.5,duration:.4,type:"spring"}}),Qe.jsx(QT.div,{className:"h-1 w-16 bg-gradient-to-r from-primary/30 to-purple-600/30 rounded-full",initial:{width:0},whileInView:{width:"4rem"},viewport:{once:!0},transition:{delay:.4,duration:.6}})]}),Qe.jsx("p",{className:"text-muted-foreground text-lg lg:text-xl max-w-2xl mx-auto",children:"Kt ni, chia s v khm ph t cng ng ngi dng am m mua sm"}),Qe.jsxs("div",{className:"flex items-center gap-6 mt-6",children:[Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center",children:Qe.jsx(Xp,{className:"w-5 h-5 text-primary"})}),Qe.jsxs("div",{className:"text-left",children:[Qe.jsx("div",{className:"text-2xl font-bold",children:i.length}),Qe.jsx("div",{className:"text-xs text-muted-foreground",children:"Bi vit"})]})]}),Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-500/20 flex items-center justify-center",children:Qe.jsx(Sg,{className:"w-5 h-5 text-amber-500"})}),Qe.jsxs("div",{className:"text-left",children:[Qe.jsx("div",{className:"text-2xl font-bold",children:"2.1K"}),Qe.jsx("div",{className:"text-xs text-muted-foreground",children:"Tng tc"})]})]})]})]})}),Qe.jsxs("div",{className:"grid lg:grid-cols-3 gap-6 lg:gap-8",children:[Qe.jsx(QT.div,{variants:{hidden:{},visible:{transition:{staggerChildren:.1}}},initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"lg:col-span-2 space-y-6",children:Qe.jsx(eM,{children:i.map(i=>{var s;return Qe.jsx(QT.div,{variants:a,whileHover:{y:-4},className:"group",children:Qe.jsxs(DP,{className:"relative overflow-hidden border-2 border-border/50 hover:border-primary/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm shadow-lg hover:shadow-2xl transition-all duration-300",children:[Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary to-purple-600"}),Qe.jsx(QT.div,{className:"absolute inset-0 bg-gradient-to-br from-primary/10 to-purple-500/10 opacity-0 group-hover:opacity-100 blur-xl transition-opacity duration-300",animate:{scale:[1,1.05,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),Qe.jsx(LP,{className:"pb-4 relative",children:Qe.jsxs("div",{className:"flex items-start justify-between",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsxs("div",{className:"relative",children:[Qe.jsxs(QT.div,{whileHover:{scale:1.1},className:"relative",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary to-purple-500 rounded-full blur-sm opacity-50"}),Qe.jsxs(AD,{className:"relative ring-2 ring-primary/30 w-12 h-12",children:[Qe.jsx(MD,{src:i.author.avatar}),Qe.jsx(ED,{children:i.author.name[0]})]})]}),i.author.verified&&Qe.jsx(QT.div,{initial:{scale:0},animate:{scale:1},className:"absolute -bottom-1 -right-1 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center border-2 border-card shadow-lg",children:Qe.jsx(_m,{className:"w-3 h-3 text-white"})})]}),Qe.jsxs("div",{children:[Qe.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Qe.jsx("h4",{className:"font-bold text-foreground",children:i.author.name}),i.author.badge&&Qe.jsx(EP,{className:`bg-gradient-to-r ${i.author.badgeColor} text-white text-xs px-2 py-0.5 border-0 shadow-md`,children:i.author.badge})]}),Qe.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[i.author.username,Qe.jsx("span",{children:""}),i.timeAgo]})]})]}),Qe.jsx(QT.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:Qe.jsx(AP,{variant:"ghost",size:"icon",className:"rounded-full",children:Qe.jsx(Um,{className:"w-5 h-5"})})})]})}),Qe.jsxs(UP,{className:"space-y-4 relative",children:[Qe.jsx("p",{className:"text-foreground leading-relaxed text-base",children:i.content}),i.image&&Qe.jsxs("div",{className:"relative rounded-xl overflow-hidden group/image",children:[Qe.jsx(QT.img,{src:i.image,alt:"Post content",className:"w-full object-cover",whileHover:{scale:1.05},transition:{duration:.4}}),Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover/image:opacity-100 transition-opacity duration-300"}),i.isLive&&Qe.jsxs("div",{className:"absolute top-4 left-4 flex items-center gap-2",children:[Qe.jsxs(EP,{className:"bg-gradient-to-r from-red-600 to-pink-600 text-white border-0 shadow-lg",children:[Qe.jsx(QT.span,{animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0},className:"w-2 h-2 bg-white rounded-full mr-2 inline-block"}),"LIVE"]}),Qe.jsxs(EP,{className:"bg-black/70 backdrop-blur-md text-white border-0 shadow-lg",children:[Qe.jsx(Vm,{className:"w-3 h-3 mr-1"}),null==(s=i.viewers)?void 0:s.toLocaleString()]})]}),"livestream"===i.type&&Qe.jsx(QT.div,{initial:{opacity:0},whileHover:{opacity:1},className:"absolute inset-0 flex items-center justify-center",children:Qe.jsx(QT.div,{whileHover:{scale:1.1},whileTap:{scale:.95},children:Qe.jsxs(AP,{size:"lg",className:"bg-white/20 backdrop-blur-md hover:bg-white/30 text-white border-2 border-white/30 shadow-2xl rounded-full px-8 py-6",children:[Qe.jsx(Gf,{className:"w-6 h-6 mr-2 fill-white"}),"Xem ngay"]})})}),Qe.jsx(QT.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent opacity-0 group-hover/image:opacity-100",initial:{x:"-100%"},whileHover:{x:"200%"},transition:{duration:.6}})]}),Qe.jsx("div",{className:"flex flex-wrap gap-2",children:i.tags.map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.05*t},whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},children:Qe.jsx(EP,{variant:"outline",className:"border-primary/50 text-primary hover:bg-primary/10 cursor-pointer transition-all duration-300 px-3 py-1",children:e})},e))}),i.featuredProduct&&Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"relative",children:Qe.jsxs(DP,{className:"border-border/50 bg-gradient-to-r from-card/80 to-card/60 backdrop-blur-sm overflow-hidden",children:[Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-amber-500 to-orange-500"}),Qe.jsxs(UP,{className:"p-4",children:[Qe.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Qe.jsx(xg,{className:"w-4 h-4 text-amber-500"}),Qe.jsx("span",{className:"text-sm font-semibold text-foreground",children:"Sn phm ni bt"})]}),Qe.jsxs("div",{className:"flex items-center justify-between gap-4",children:[Qe.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[Qe.jsx("div",{className:"relative",children:Qe.jsxs(QT.div,{whileHover:{scale:1.05},className:"relative",children:[Qe.jsx("img",{src:i.featuredProduct.image,alt:i.featuredProduct.name,className:"w-16 h-16 rounded-lg object-cover border-2 border-border/50 shadow-md"}),i.featuredProduct.discount>0&&Qe.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-gradient-to-r from-red-500 to-orange-500 rounded-full flex items-center justify-center shadow-lg",children:Qe.jsxs("span",{className:"text-white text-xs font-bold",children:["-",i.featuredProduct.discount,"%"]})})]})}),Qe.jsxs("div",{className:"flex-1 min-w-0",children:[Qe.jsx("p",{className:"text-sm font-semibold text-foreground line-clamp-1 mb-1",children:i.featuredProduct.name}),Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsxs("span",{className:"text-lg font-bold bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:[i.featuredProduct.price,""]}),i.featuredProduct.originalPrice&&Qe.jsxs("span",{className:"text-xs text-muted-foreground line-through",children:[i.featuredProduct.originalPrice,""]})]})]})]}),Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(AP,{size:"sm",className:"bg-gradient-to-r from-primary to-purple-600 hover:opacity-90 text-white shadow-lg whitespace-nowrap",children:[Qe.jsx(cg,{className:"w-4 h-4 mr-2"}),"Thm"]})})]})]})]})}),Qe.jsxs("div",{className:"flex items-center gap-4 py-3 border-t border-border/50",children:[Qe.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[Qe.jsx(Vm,{className:"w-4 h-4"}),Qe.jsx("span",{className:"text-xs",children:i.views})]}),Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx(sf,{className:"w-4 h-4 text-red-500 fill-red-500"}),Qe.jsx(Cf,{className:"w-4 h-4 text-blue-500"}),Qe.jsxs("span",{className:"text-xs text-muted-foreground",children:[i.likes+i.comments," lt tng tc"]})]})]}),Qe.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-border/50",children:[Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(AP,{variant:"ghost",size:"sm",className:"transition-all duration-300 "+(e.includes(i.id)?"text-red-500 hover:text-red-600":"text-muted-foreground hover:text-red-500"),onClick:()=>{return e=i.id,void t(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]);var e},children:[Qe.jsx(sf,{className:"w-5 h-5 mr-2 transition-all "+(e.includes(i.id)?"fill-red-500":"")}),i.likes+(e.includes(i.id)?1:0)]})}),Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(AP,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-blue-500 transition-colors",children:[Qe.jsx(Cf,{className:"w-5 h-5 mr-2"}),i.comments]})}),Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(AP,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-green-500 transition-colors",children:[Qe.jsx(tg,{className:"w-5 h-5 mr-2"}),i.shares]})})]}),Qe.jsx(QT.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:Qe.jsx(AP,{variant:"ghost",size:"icon",className:"transition-all duration-300 "+(n.includes(i.id)?"text-amber-500 hover:text-amber-600":"text-muted-foreground hover:text-amber-500"),onClick:()=>{return e=i.id,void r(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]);var e},children:Qe.jsx(sm,{className:"w-5 h-5 transition-all "+(n.includes(i.id)?"fill-amber-500":"")})})})]})]})]})},i.id)})})}),Qe.jsxs(QT.div,{initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6,delay:.2},className:"space-y-6",children:[Qe.jsxs(DP,{className:"border-2 border-border/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm shadow-lg overflow-hidden",children:[Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-amber-500 to-orange-500"}),Qe.jsx(LP,{className:"pb-4",children:Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx("div",{className:"p-2 bg-amber-500/20 rounded-lg",children:Qe.jsx(Sg,{className:"w-5 h-5 text-amber-500"})}),Qe.jsx("h3",{className:"font-bold text-lg",children:"Trending hm nay"})]})}),Qe.jsx(UP,{className:"space-y-3",children:[{tag:"#iPhone15ProMax",count:"500K",trend:"up"},{tag:"#LocalBrand",count:"400K",trend:"up"},{tag:"#VintageStyle",count:"300K",trend:"down"},{tag:"#GamingSetup",count:"200K",trend:"up"},{tag:"#FlashSale",count:"100K",trend:"up"}].map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},whileHover:{x:5},className:"group cursor-pointer",children:Qe.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-accent/10 transition-colors",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary/20 to-purple-500/20 flex items-center justify-center",children:Qe.jsx(nf,{className:"w-4 h-4 text-primary"})}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"font-semibold text-primary group-hover:underline",children:e.tag}),Qe.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.count," bi vit"]})]})]}),Qe.jsx("div",{className:"flex items-center gap-1",children:"up"===e.trend?Qe.jsx(Sg,{className:"w-4 h-4 text-green-500"}):Qe.jsx(_g,{className:"w-4 h-4 text-red-500"})})]})},e.tag))})]}),Qe.jsxs(DP,{className:"border-2 border-border/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm shadow-lg overflow-hidden",children:[Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 to-purple-500"}),Qe.jsx(LP,{className:"pb-4",children:Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:Qe.jsx(Og,{className:"w-5 h-5 text-blue-500"})}),Qe.jsx("h3",{className:"font-bold text-lg",children:"Gi  kt bn"})]})}),Qe.jsx(UP,{className:"space-y-4",children:[{name:"Reviewer Pro",username:"@reviewer_pro",followers:"15K",avatar:"https://images.unsplash.com/photo-1527980965255-d3b416303d12?w=100&h=100&fit=crop",verified:!0},{name:"Style Icon",username:"@style_icon",followers:"8.2K",avatar:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=100&h=100&fit=crop",verified:!1},{name:"Tech News",username:"@tech_news",followers:"25K",avatar:"https://images.unsplash.com/photo-1539571696357-5a69c17a67c6?w=100&h=100&fit=crop",verified:!0}].map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.08*t},whileHover:{scale:1.02},className:"group",children:Qe.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-accent/10 transition-colors",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsxs("div",{className:"relative",children:[Qe.jsxs(AD,{className:"w-10 h-10 ring-2 ring-primary/20",children:[Qe.jsx(MD,{src:e.avatar}),Qe.jsx(ED,{children:e.name[0]})]}),e.verified&&Qe.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center border-2 border-card",children:Qe.jsx(_m,{className:"w-2.5 h-2.5 text-white"})})]}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"font-semibold text-sm text-foreground",children:e.name}),Qe.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.followers," followers"]})]})]}),Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsx(AP,{size:"sm",className:"bg-gradient-to-r from-primary to-purple-600 hover:opacity-90 text-white shadow-md",children:"Follow"})})]})},e.username))})]}),Qe.jsxs(DP,{className:"border-2 border-border/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm shadow-lg overflow-hidden",children:[Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-green-500 to-emerald-500"}),Qe.jsx(LP,{className:"pb-4",children:Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg",children:Qe.jsx(pg,{className:"w-5 h-5 text-green-500"})}),Qe.jsx("h3",{className:"font-bold text-lg",children:"Thnh tch"})]})}),Qe.jsxs(UP,{className:"space-y-4",children:[Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx(fg,{className:"w-5 h-5 text-amber-500 fill-amber-500"}),Qe.jsx("span",{className:"text-sm font-medium",children:"im tch ly"})]}),Qe.jsx("span",{className:"text-lg font-bold bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent",children:"2,847"})]}),Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx(Sg,{className:"w-5 h-5 text-green-500"}),Qe.jsx("span",{className:"text-sm font-medium",children:"Xp hng"})]}),Qe.jsx("span",{className:"text-lg font-bold text-green-500",children:"#156"})]}),Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx(sf,{className:"w-5 h-5 text-red-500 fill-red-500"}),Qe.jsx("span",{className:"text-sm font-medium",children:"Bi vit yu thch"})]}),Qe.jsx("span",{className:"text-lg font-bold text-red-500",children:n.length})]})]})]})]})]})]})]})},TD=()=>{const e=[{id:1,title:"Flash Sale",subtitle:"Gim ti 70%",icon:zg,color:"from-yellow-500 to-orange-500",bgGradient:"from-yellow-500/10 to-orange-500/10",badge:"HOT",badgeColor:"from-red-500 to-orange-500",description:"Hng ngn sn phm gim gi sc"},{id:2,title:"Livestream",subtitle:"Shopping show",icon:Ig,color:"from-pink-500 to-red-500",bgGradient:"from-pink-500/10 to-red-500/10",badge:"LIVE",badgeColor:"from-red-600 to-pink-600",description:"Mua sm trc tip cng streamer"},{id:3,title:"Community Chat",subtitle:"Kt ni bn b",icon:Af,color:"from-blue-500 to-cyan-500",bgGradient:"from-blue-500/10 to-cyan-500/10",badge:"NEW",badgeColor:"from-blue-500 to-cyan-500",description:"Tho lun & chia s kinh nghim"},{id:4,title:"Rewards",subtitle:"Tch im thng",icon:Zm,color:"from-purple-500 to-indigo-500",bgGradient:"from-purple-500/10 to-indigo-500/10",badge:"BONUS",badgeColor:"from-purple-500 to-indigo-500",description:"i im ly qu hp dn"}],t=[{icon:Og,label:"Thnh vin online",value:"12,345",growth:"+12%",gradient:"from-green-500 to-emerald-600",iconBg:"bg-green-500/20"},{icon:lg,label:"n hng hm nay",value:"8,921",growth:"+8%",gradient:"from-blue-500 to-indigo-600",iconBg:"bg-blue-500/20"},{icon:Ag,label:"Xp hng ca bn",value:"#156",growth:"+5%",gradient:"from-amber-500 to-orange-500",iconBg:"bg-amber-500/20"},{icon:Pm,label:"im tch ly",value:"2,847",growth:"+15%",gradient:"from-purple-500 to-fuchsia-600",iconBg:"bg-purple-500/20"}],n={hidden:{opacity:0,y:30,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:100,damping:12}}};return Qe.jsxs("section",{className:"py-20 lg:py-28 bg-gradient-to-b from-background via-card/20 to-background relative overflow-hidden",children:[Qe.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[Qe.jsx(QT.div,{className:"absolute top-20 right-20 w-96 h-96 bg-primary/10 rounded-full blur-3xl",animate:{scale:[1,1.2,1],opacity:[.3,.5,.3]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),Qe.jsx(QT.div,{className:"absolute bottom-20 left-20 w-80 h-80 bg-amber-500/10 rounded-full blur-3xl",animate:{scale:[1.2,1,1.2],opacity:[.2,.4,.2]},transition:{duration:10,repeat:1/0,ease:"easeInOut"}}),Qe.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(var(--primary),0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(var(--primary),0.03)_1px,transparent_1px)] bg-[size:64px_64px]"})]}),Qe.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[Qe.jsx(QT.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"text-center mb-16",children:Qe.jsxs("div",{className:"flex flex-col items-center justify-center mb-6",children:[Qe.jsxs(QT.div,{initial:{scale:0,rotate:-180},whileInView:{scale:1,rotate:0},viewport:{once:!0},transition:{type:"spring",duration:.8},className:"relative mb-4",children:[Qe.jsx(QT.div,{className:"absolute inset-0 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-2xl blur-xl opacity-50",animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),Qe.jsx("div",{className:"relative w-16 h-16 rounded-2xl bg-gradient-to-br from-yellow-500 to-orange-500 flex items-center justify-center shadow-2xl",children:Qe.jsx(zg,{className:"w-8 h-8 text-white"})})]}),Qe.jsxs("h2",{className:"text-4xl lg:text-5xl font-extrabold mb-6",children:["Tri nghim"," ",Qe.jsx("span",{className:"bg-gradient-to-r from-yellow-500 via-orange-500 to-red-500 bg-clip-text text-transparent",children:"c bit"})]}),Qe.jsxs(QT.div,{className:"flex items-center justify-center gap-2 mb-6",initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{delay:.3,duration:.5},children:[Qe.jsx(QT.div,{className:"h-1 w-16 bg-gradient-to-r from-yellow-500/30 via-orange-500/30 to-red-500/30 rounded-full",initial:{width:0},whileInView:{width:"4rem"},viewport:{once:!0},transition:{delay:.4,duration:.6}}),Qe.jsx(QT.div,{className:"h-1.5 w-8 bg-gradient-to-r from-yellow-500 via-orange-500 to-red-500 rounded-full",initial:{scale:0},whileInView:{scale:1},viewport:{once:!0},transition:{delay:.5,duration:.4,type:"spring"}}),Qe.jsx(QT.div,{className:"h-1 w-16 bg-gradient-to-r from-yellow-500/30 via-orange-500/30 to-red-500/30 rounded-full",initial:{width:0},whileInView:{width:"4rem"},viewport:{once:!0},transition:{delay:.4,duration:.6}})]}),Qe.jsx("p",{className:"text-muted-foreground text-lg lg:text-xl max-w-2xl mx-auto",children:"Khm ph nhng tnh nng c o v c hi hp dn ch c ti VibeMarket"}),Qe.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 mt-6",children:[Qe.jsxs(EP,{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white border-0 shadow-lg px-4 py-2",children:[Qe.jsx(pg,{className:"w-4 h-4 mr-2"}),"Tnh nng c quyn"]}),Qe.jsxs(EP,{className:"bg-gradient-to-r from-primary to-purple-600 text-white border-0 shadow-lg px-4 py-2",children:[Qe.jsx(fg,{className:"w-4 h-4 mr-2"}),"u i c bit"]})]})]})}),Qe.jsx(QT.div,{variants:{hidden:{},visible:{transition:{staggerChildren:.08}}},initial:"hidden",whileInView:"visible",viewport:{once:!0},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-16",children:e.map((e,t)=>Qe.jsx(QT.div,{variants:n,whileHover:{scale:1.05,y:-8},whileTap:{scale:.98},className:"cursor-pointer group",children:Qe.jsxs(DP,{className:"relative overflow-hidden h-full border-2 border-border/50 hover:border-primary/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm shadow-lg hover:shadow-2xl transition-all duration-300",children:[Qe.jsx("div",{className:`absolute top-0 left-0 right-0 h-1 bg-gradient-to-r ${e.color}`}),Qe.jsx(QT.div,{className:`absolute inset-0 bg-gradient-to-br ${e.bgGradient} opacity-0 group-hover:opacity-100 transition-opacity duration-300`}),Qe.jsx(QT.div,{className:`absolute inset-0 bg-gradient-to-br ${e.color} opacity-0 group-hover:opacity-10 blur-xl transition-opacity duration-300`,animate:{scale:[1,1.1,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),Qe.jsxs(UP,{className:"relative p-6 flex flex-col items-center text-center h-full",children:[Qe.jsxs(EP,{className:`absolute top-3 right-3 text-xs bg-gradient-to-r ${e.badgeColor} text-white border-0 shadow-lg px-3 py-1`,children:["LIVE"===e.badge&&Qe.jsx(QT.span,{animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0},className:"w-2 h-2 bg-white rounded-full mr-2 inline-block"}),e.badge]}),Qe.jsxs(QT.div,{whileHover:{rotate:[0,-10,10,-10,10,0]},transition:{duration:.5},className:"relative mb-4",children:[Qe.jsx(QT.div,{className:`absolute inset-0 bg-gradient-to-r ${e.color} blur-2xl opacity-50`,animate:{scale:[1,1.3,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),Qe.jsx("div",{className:`relative w-16 h-16 mx-auto rounded-2xl bg-gradient-to-br ${e.color} flex items-center justify-center shadow-lg`,children:Qe.jsx(e.icon,{className:"w-8 h-8 text-white"})})]}),Qe.jsx("h3",{className:"text-xl font-bold text-foreground mb-1 group-hover:text-primary transition-colors",children:e.title}),Qe.jsx("p",{className:`text-base font-semibold mb-3 bg-gradient-to-r ${e.color} bg-clip-text text-transparent`,children:e.subtitle}),Qe.jsx("p",{className:"text-sm text-muted-foreground mb-6 flex-grow",children:e.description}),Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full",children:Qe.jsxs(AP,{className:`w-full bg-gradient-to-r ${e.color} hover:opacity-90 text-white shadow-lg transition-all duration-300 group`,children:["Khm ph ngay",Qe.jsx(Qp,{className:"ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform"})]})}),Qe.jsx(QT.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 group-hover:opacity-100",initial:{x:"-100%"},whileHover:{x:"200%"},transition:{duration:.6}})]})]})},e.id))}),Qe.jsxs(QT.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.2},className:"mb-16",children:[Qe.jsxs("div",{className:"text-center mb-8",children:[Qe.jsxs("h3",{className:"text-2xl lg:text-3xl font-bold mb-2",children:["Thng k"," ",Qe.jsx("span",{className:"bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:"Thi gian thc"})]}),Qe.jsx("p",{className:"text-muted-foreground",children:"Cp nht lin tc mi pht"})]}),Qe.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6",children:t.map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{delay:.08*t},whileHover:{y:-6,scale:1.03},className:"group",children:Qe.jsxs(DP,{className:"relative overflow-hidden border-2 border-border/50 hover:border-primary/30 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm shadow-lg hover:shadow-2xl transition-all duration-300 h-full",children:[Qe.jsx("div",{className:`absolute top-0 left-0 right-0 h-1 bg-gradient-to-r ${e.gradient}`}),Qe.jsx(QT.div,{className:`absolute inset-0 bg-gradient-to-br ${e.gradient} opacity-0 group-hover:opacity-10 transition-opacity duration-300`,animate:{scale:[1,1.05,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),Qe.jsxs(UP,{className:"p-4 lg:p-6 relative",children:[Qe.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Qe.jsx(QT.div,{whileHover:{rotate:[0,-10,10,0]},transition:{duration:.5},className:`p-2.5 lg:p-3 rounded-xl ${e.iconBg} shadow-lg group-hover:shadow-xl transition-shadow`,children:Qe.jsx(e.icon,{className:`w-5 h-5 lg:w-6 lg:h-6 bg-gradient-to-r ${e.gradient} bg-clip-text`,style:{WebkitTextFillColor:"transparent"}})}),Qe.jsxs(EP,{className:`bg-gradient-to-r ${e.gradient} text-white border-0 shadow-md text-xs px-2 py-1`,children:[Qe.jsx(Sg,{className:"w-3 h-3 mr-1"}),e.growth]})]}),Qe.jsx("div",{className:`text-2xl lg:text-3xl font-bold mb-1 bg-gradient-to-r ${e.gradient} bg-clip-text text-transparent`,children:e.value}),Qe.jsx("div",{className:"text-xs lg:text-sm text-muted-foreground font-medium",children:e.label}),Qe.jsx("div",{className:"mt-3 h-1.5 bg-muted rounded-full overflow-hidden",children:Qe.jsx(QT.div,{className:`h-full bg-gradient-to-r ${e.gradient} rounded-full`,initial:{width:0},whileInView:{width:60+10*t+"%"},viewport:{once:!0},transition:{duration:1,delay:.1*t}})})]})]})},e.label))})]}),Qe.jsx(QT.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.4},children:Qe.jsxs(DP,{className:"relative overflow-hidden border-2 border-border/50 bg-gradient-to-r from-card/80 via-card/60 to-card/80 backdrop-blur-sm shadow-2xl",children:[Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary to-purple-600"}),Qe.jsx(QT.div,{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10",animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:10,repeat:1/0,ease:"linear"}}),[...Array(6)].map((e,t)=>Qe.jsx(QT.div,{className:"absolute w-2 h-2 bg-primary/30 rounded-full",style:{top:20+15*t+"%",left:10+15*t+"%"},animate:{y:[0,-20,0],opacity:[.2,.6,.2],scale:[1,1.5,1]},transition:{duration:3+.5*t,repeat:1/0,delay:.2*t}},t)),Qe.jsxs(UP,{className:"p-8 lg:p-12 text-center relative z-10",children:[Qe.jsx(QT.div,{initial:{scale:0},whileInView:{scale:1},viewport:{once:!0},transition:{type:"spring",duration:.6},className:"flex justify-center mb-6",children:Qe.jsxs("div",{className:"relative",children:[Qe.jsx(QT.div,{className:"absolute inset-0 bg-gradient-to-r from-blue-500 to-purple-500 rounded-2xl blur-2xl opacity-50",animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0}}),Qe.jsx("div",{className:"relative w-16 h-16 rounded-2xl bg-gradient-to-r from-primary to-purple-600 flex items-center justify-center shadow-2xl",children:Qe.jsx(Im,{className:"w-8 h-8 text-white"})})]})}),Qe.jsxs("h3",{className:"text-2xl lg:text-3xl font-extrabold mb-3",children:["Sn sng tham gia cng ng"," ",Qe.jsx("span",{className:"bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:"VibeMarket"}),"?"]}),Qe.jsx("p",{className:"text-muted-foreground mb-8 max-w-2xl mx-auto text-base lg:text-lg",children:"Kt ni vi hng nghn thnh vin, khm ph sn phm c o v tri nghim mua sm hon ton mi!"}),Qe.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(AP,{size:"lg",className:"bg-gradient-to-r from-primary to-purple-600 text-white font-bold px-8 py-6 rounded-2xl shadow-2xl hover:shadow-primary/50 transition-all duration-300",children:[Qe.jsx(pg,{className:"w-5 h-5 mr-2"}),"ng k min ph",Qe.jsx(Qp,{className:"w-5 h-5 ml-2"})]})}),Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsx(AP,{variant:"outline",size:"lg",className:"border-2 border-primary/50 hover:border-primary bg-card/50 backdrop-blur-sm hover:bg-primary/10 font-bold px-8 py-6 rounded-2xl shadow-lg transition-all duration-300",children:"Tm hiu thm"})})]}),Qe.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-6 lg:gap-8 mt-8 pt-8 border-t border-border/50",children:[Qe.jsxs("div",{className:"text-center",children:[Qe.jsx("div",{className:"text-2xl lg:text-3xl font-bold bg-gradient-to-r from-blue-500 to-cyan-500 bg-clip-text text-transparent",children:"95K+"}),Qe.jsx("div",{className:"text-xs lg:text-sm text-muted-foreground",children:"Thnh vin"})]}),Qe.jsxs("div",{className:"text-center",children:[Qe.jsx("div",{className:"text-2xl lg:text-3xl font-bold bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:"89K+"}),Qe.jsx("div",{className:"text-xs lg:text-sm text-muted-foreground",children:"Sn phm"})]}),Qe.jsxs("div",{className:"text-center",children:[Qe.jsx("div",{className:"text-2xl lg:text-3xl font-bold bg-gradient-to-r from-green-500 to-emerald-500 bg-clip-text text-transparent",children:"98.5%"}),Qe.jsx("div",{className:"text-xs lg:text-sm text-muted-foreground",children:"Hi lng"})]})]})]})]})})]})]})};var PD=Array.isArray,OD="object"==typeof re&&re&&re.Object===Object&&re,RD=OD,ID="object"==typeof self&&self&&self.Object===Object&&self,DD=RD||ID||Function("return this")(),LD=DD.Symbol,BD=LD,FD=Object.prototype,UD=FD.hasOwnProperty,zD=FD.toString,HD=BD?BD.toStringTag:void 0;var VD=function(e){var t=UD.call(e,HD),n=e[HD];try{e[HD]=void 0;var r=!0}catch(CI){}var i=zD.call(e);return r&&(t?e[HD]=n:delete e[HD]),i},GD=Object.prototype.toString;var WD=VD,KD=function(e){return GD.call(e)},qD=LD?LD.toStringTag:void 0;var XD=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":qD&&qD in Object(e)?WD(e):KD(e)};var $D=function(e){return null!=e&&"object"==typeof e},YD=XD,JD=$D;var ZD=function(e){return"symbol"==typeof e||JD(e)&&"[object Symbol]"==YD(e)},QD=PD,eL=ZD,tL=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nL=/^\w*$/;var rL=function(e,t){if(QD(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!eL(e))||(nL.test(e)||!tL.test(e)||null!=t&&e in Object(t))};var iL=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const aL=ie(iL);var sL=XD,oL=iL;var lL=function(e){if(!oL(e))return!1;var t=sL(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const cL=ie(lL);var dL,uL=DD["__core-js_shared__"],hL=(dL=/[^.]+$/.exec(uL&&uL.keys&&uL.keys.IE_PROTO||""))?"Symbol(src)_1."+dL:"";var pL=function(e){return!!hL&&hL in e},mL=Function.prototype.toString;var fL=function(e){if(null!=e){try{return mL.call(e)}catch(CI){}try{return e+""}catch(CI){}}return""},gL=lL,vL=pL,xL=iL,yL=fL,bL=/^\[object .+?Constructor\]$/,wL=Function.prototype,jL=Object.prototype,NL=wL.toString,_L=jL.hasOwnProperty,SL=RegExp("^"+NL.call(_L).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var CL=function(e){return!(!xL(e)||vL(e))&&(gL(e)?SL:bL).test(yL(e))},AL=function(e,t){return null==e?void 0:e[t]};var ML=function(e,t){var n=AL(e,t);return CL(n)?n:void 0},EL=ML(Object,"create"),kL=EL;var TL=function(){this.__data__=kL?kL(null):{},this.size=0};var PL=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},OL=EL,RL=Object.prototype.hasOwnProperty;var IL=function(e){var t=this.__data__;if(OL){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return RL.call(t,e)?t[e]:void 0},DL=EL,LL=Object.prototype.hasOwnProperty;var BL=EL;var FL=TL,UL=PL,zL=IL,HL=function(e){var t=this.__data__;return DL?void 0!==t[e]:LL.call(t,e)},VL=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=BL&&void 0===t?"__lodash_hash_undefined__":t,this};function GL(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}GL.prototype.clear=FL,GL.prototype.delete=UL,GL.prototype.get=zL,GL.prototype.has=HL,GL.prototype.set=VL;var WL=GL;var KL=function(){this.__data__=[],this.size=0};var qL=function(e,t){return e===t||e!=e&&t!=t},XL=qL;var $L=function(e,t){for(var n=e.length;n--;)if(XL(e[n][0],t))return n;return-1},YL=$L,JL=Array.prototype.splice;var ZL=$L;var QL=$L;var eB=$L;var tB=KL,nB=function(e){var t=this.__data__,n=YL(t,e);return!(n<0)&&(n==t.length-1?t.pop():JL.call(t,n,1),--this.size,!0)},rB=function(e){var t=this.__data__,n=ZL(t,e);return n<0?void 0:t[n][1]},iB=function(e){return QL(this.__data__,e)>-1},aB=function(e,t){var n=this.__data__,r=eB(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function sB(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}sB.prototype.clear=tB,sB.prototype.delete=nB,sB.prototype.get=rB,sB.prototype.has=iB,sB.prototype.set=aB;var oB=sB,lB=ML(DD,"Map"),cB=WL,dB=oB,uB=lB;var hB=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var pB=function(e,t){var n=e.__data__;return hB(t)?n["string"==typeof t?"string":"hash"]:n.map},mB=pB;var fB=pB;var gB=pB;var vB=pB;var xB=function(){this.size=0,this.__data__={hash:new cB,map:new(uB||dB),string:new cB}},yB=function(e){var t=mB(this,e).delete(e);return this.size-=t?1:0,t},bB=function(e){return fB(this,e).get(e)},wB=function(e){return gB(this,e).has(e)},jB=function(e,t){var n=vB(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function NB(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}NB.prototype.clear=xB,NB.prototype.delete=yB,NB.prototype.get=bB,NB.prototype.has=wB,NB.prototype.set=jB;var _B=NB,SB=_B;function CB(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var s=e.apply(this,r);return n.cache=a.set(i,s)||a,s};return n.cache=new(CB.Cache||SB),n}CB.Cache=SB;var AB=CB;const MB=ie(AB);var EB=AB;var kB=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,TB=/\\(\\)?/g,PB=function(e){var t=EB(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(kB,function(e,n,r,i){t.push(r?i.replace(TB,"$1"):n||e)}),t});var OB=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i},RB=OB,IB=PD,DB=ZD,LB=LD?LD.prototype:void 0,BB=LB?LB.toString:void 0;var FB=function e(t){if("string"==typeof t)return t;if(IB(t))return RB(t,e)+"";if(DB(t))return BB?BB.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},UB=FB;var zB=function(e){return null==e?"":UB(e)},HB=PD,VB=rL,GB=PB,WB=zB;var KB=function(e,t){return HB(e)?e:VB(e,t)?[e]:GB(WB(e))},qB=ZD;var XB=function(e){if("string"==typeof e||qB(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},$B=KB,YB=XB;var JB=function(e,t){for(var n=0,r=(t=$B(t,e)).length;null!=e&&n<r;)e=e[YB(t[n++])];return n&&n==r?e:void 0},ZB=JB;var QB=function(e,t,n){var r=null==e?void 0:ZB(e,t);return void 0===r?n:r};const eF=ie(QB);const tF=ie(function(e){return null==e});var nF=XD,rF=PD,iF=$D;const aF=ie(function(e){return"string"==typeof e||!rF(e)&&iF(e)&&"[object String]"==nF(e)});var sF,oF={exports:{}},lF={},cF=Symbol.for("react.element"),dF=Symbol.for("react.portal"),uF=Symbol.for("react.fragment"),hF=Symbol.for("react.strict_mode"),pF=Symbol.for("react.profiler"),mF=Symbol.for("react.provider"),fF=Symbol.for("react.context"),gF=Symbol.for("react.server_context"),vF=Symbol.for("react.forward_ref"),xF=Symbol.for("react.suspense"),yF=Symbol.for("react.suspense_list"),bF=Symbol.for("react.memo"),wF=Symbol.for("react.lazy"),jF=Symbol.for("react.offscreen");function NF(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case cF:switch(e=e.type){case uF:case pF:case hF:case xF:case yF:return e;default:switch(e=e&&e.$$typeof){case gF:case fF:case vF:case wF:case bF:case mF:return e;default:return t}}case dF:return t}}}sF=Symbol.for("react.module.reference"),lF.ContextConsumer=fF,lF.ContextProvider=mF,lF.Element=cF,lF.ForwardRef=vF,lF.Fragment=uF,lF.Lazy=wF,lF.Memo=bF,lF.Portal=dF,lF.Profiler=pF,lF.StrictMode=hF,lF.Suspense=xF,lF.SuspenseList=yF,lF.isAsyncMode=function(){return!1},lF.isConcurrentMode=function(){return!1},lF.isContextConsumer=function(e){return NF(e)===fF},lF.isContextProvider=function(e){return NF(e)===mF},lF.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===cF},lF.isForwardRef=function(e){return NF(e)===vF},lF.isFragment=function(e){return NF(e)===uF},lF.isLazy=function(e){return NF(e)===wF},lF.isMemo=function(e){return NF(e)===bF},lF.isPortal=function(e){return NF(e)===dF},lF.isProfiler=function(e){return NF(e)===pF},lF.isStrictMode=function(e){return NF(e)===hF},lF.isSuspense=function(e){return NF(e)===xF},lF.isSuspenseList=function(e){return NF(e)===yF},lF.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===uF||e===pF||e===hF||e===xF||e===yF||e===jF||"object"==typeof e&&null!==e&&(e.$$typeof===wF||e.$$typeof===bF||e.$$typeof===mF||e.$$typeof===fF||e.$$typeof===vF||e.$$typeof===sF||void 0!==e.getModuleId)},lF.typeOf=NF,oF.exports=lF;var _F=oF.exports,SF=XD,CF=$D;var AF=function(e){return"number"==typeof e||CF(e)&&"[object Number]"==SF(e)};const MF=ie(AF);var EF=AF;const kF=ie(function(e){return EF(e)&&e!=+e});var TF=function(e){return 0===e?0:e>0?1:-1},PF=function(e){return aF(e)&&e.indexOf("%")===e.length-1},OF=function(e){return MF(e)&&!kF(e)},RF=function(e){return OF(e)||aF(e)},IF=0,DF=function(e){var t=++IF;return"".concat(e||"").concat(t)},LF=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!OF(e)&&!aF(e))return r;if(PF(e)){var a=e.indexOf("%");n=t*parseFloat(e.slice(0,a))/100}else n=+e;return kF(n)&&(n=r),i&&n>t&&(n=t),n},BF=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},FF=function(e,t){return OF(e)&&OF(t)?function(n){return e+n*(t-e)}:function(){return t}};function UF(e,t,n){return e&&e.length?e.find(function(e){return e&&("function"==typeof t?t(e):eF(e,t))===n}):null}var zF=function(e,t){return OF(e)&&OF(t)?e-t:aF(e)&&aF(t)?e.localeCompare(t):e instanceof Date&&t instanceof Date?e.getTime()-t.getTime():String(e).localeCompare(String(t))};function HF(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function VF(e){return(VF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var GF=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],WF=["points","pathLength"],KF={svg:["viewBox","children"],polygon:WF,polyline:WF},qF=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],XF=function(e,t){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var n=e;if(Ve.isValidElement(e)&&(n=e.props),!aL(n))return null;var r={};return Object.keys(n).forEach(function(e){qF.includes(e)&&(r[e]=t||function(t){return n[e](n,t)})}),r},$F=function(e,t,n){if(!aL(e)||"object"!==VF(e))return null;var r=null;return Object.keys(e).forEach(function(i){var a=e[i];qF.includes(i)&&"function"==typeof a&&(r||(r={}),r[i]=function(e,t,n){return function(r){return e(t,n,r),null}}(a,t,n))}),r},YF=["children"],JF=["children"];function ZF(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function QF(e){return(QF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var eU={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},tU=function(e){return"string"==typeof e?e:e?e.displayName||e.name||"Component":""},nU=null,rU=null,iU=function e(t){if(t===nU&&Array.isArray(rU))return rU;var n=[];return Ve.Children.forEach(t,function(t){tF(t)||(_F.isFragment(t)?n=n.concat(e(t.props.children)):n.push(t))}),rU=n,nU=t,n};function aU(e,t){var n=[],r=[];return r=Array.isArray(t)?t.map(function(e){return tU(e)}):[tU(t)],iU(e).forEach(function(e){var t=eF(e,"type.displayName")||eF(e,"type.name");-1!==r.indexOf(t)&&n.push(e)}),n}function sU(e,t){var n=aU(e,t);return n&&n[0]}var oU=function(e){if(!e||!e.props)return!1;var t=e.props,n=t.width,r=t.height;return!(!OF(n)||n<=0||!OF(r)||r<=0)},lU=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],cU=function(e){return e&&"object"===QF(e)&&"clipDot"in e},dU=function(e,t,n){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var r=e;if(Ve.isValidElement(e)&&(r=e.props),!aL(r))return null;var i={};return Object.keys(r).forEach(function(e){var a;(function(e,t,n,r){var i,a=null!==(i=null==KF?void 0:KF[r])&&void 0!==i?i:[];return t.startsWith("data-")||!cL(e)&&(r&&a.includes(t)||GF.includes(t))||n&&qF.includes(t)})(null===(a=r)||void 0===a?void 0:a[e],e,t,n)&&(i[e]=r[e])}),i},uU=function e(t,n){if(t===n)return!0;var r=Ve.Children.count(t);if(r!==Ve.Children.count(n))return!1;if(0===r)return!0;if(1===r)return hU(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var a=t[i],s=n[i];if(Array.isArray(a)||Array.isArray(s)){if(!e(a,s))return!1}else if(!hU(a,s))return!1}return!0},hU=function(e,t){if(tF(e)&&tF(t))return!0;if(!tF(e)&&!tF(t)){var n=e.props||{},r=n.children,i=ZF(n,YF),a=t.props||{},s=a.children,o=ZF(a,JF);return r&&s?HF(i,o)&&uU(r,s):!r&&!s&&HF(i,o)}return!1},pU=function(e,t){var n=[],r={};return iU(e).forEach(function(e,i){if(function(e){return e&&e.type&&aF(e.type)&&lU.indexOf(e.type)>=0}(e))n.push(e);else if(e){var a=tU(e.type),s=t[a]||{},o=s.handler,l=s.once;if(o&&(!l||!r[a])){var c=o(e,a,i);n.push(c),r[a]=!0}}}),n},mU=["children","width","height","viewBox","className","style","title","desc"];function fU(){return fU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fU.apply(this,arguments)}function gU(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function vU(e){var t=e.children,n=e.width,r=e.height,i=e.viewBox,a=e.className,s=e.style,o=e.title,l=e.desc,c=gU(e,mU),d=i||{width:n,height:r,x:0,y:0},u=Up("recharts-surface",a);return Ge.createElement("svg",fU({},dU(c,!0,"svg"),{className:u,width:n,height:r,style:s,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),Ge.createElement("title",null,o),Ge.createElement("desc",null,l),t)}var xU=["children","className"];function yU(){return yU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yU.apply(this,arguments)}function bU(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var wU=Ge.forwardRef(function(e,t){var n=e.children,r=e.className,i=bU(e,xU),a=Up("recharts-layer",r);return Ge.createElement("g",yU({className:a},dU(i,!0),{ref:t}),n)}),jU=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i]};var NU=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a};var _U=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:NU(e,t,n)},SU=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var CU=function(e){return SU.test(e)};var AU=function(e){return e.split("")},MU="\\ud800-\\udfff",EU="["+MU+"]",kU="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",TU="\\ud83c[\\udffb-\\udfff]",PU="[^"+MU+"]",OU="(?:\\ud83c[\\udde6-\\uddff]){2}",RU="[\\ud800-\\udbff][\\udc00-\\udfff]",IU="(?:"+kU+"|"+TU+")"+"?",DU="[\\ufe0e\\ufe0f]?",LU=DU+IU+("(?:\\u200d(?:"+[PU,OU,RU].join("|")+")"+DU+IU+")*"),BU="(?:"+[PU+kU+"?",kU,OU,RU,EU].join("|")+")",FU=RegExp(TU+"(?="+TU+")|"+BU+LU,"g");var UU=AU,zU=CU,HU=function(e){return e.match(FU)||[]};var VU=_U,GU=CU,WU=function(e){return zU(e)?HU(e):UU(e)},KU=zB;const qU=ie(function(e){return function(t){t=KU(t);var n=GU(t)?WU(t):void 0,r=n?n[0]:t.charAt(0),i=n?VU(n,1).join(""):t.slice(1);return r[e]()+i}}("toUpperCase"));function XU(e){return function(){return e}}const $U=Math.cos,YU=Math.sin,JU=Math.sqrt,ZU=Math.PI,QU=2*ZU,ez=Math.PI,tz=2*ez,nz=1e-6,rz=tz-nz;function iz(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}let az=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?iz:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return iz;const n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,r){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(e,t,n,r,i,a){this._append`C${+e},${+t},${+n},${+r},${this._x1=+i},${this._y1=+a}`}arcTo(e,t,n,r,i){if(e=+e,t=+t,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let a=this._x1,s=this._y1,o=n-e,l=r-t,c=a-e,d=s-t,u=c*c+d*d;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(u>nz)if(Math.abs(d*o-l*c)>nz&&i){let h=n-a,p=r-s,m=o*o+l*l,f=h*h+p*p,g=Math.sqrt(m),v=Math.sqrt(u),x=i*Math.tan((ez-Math.acos((m+u-f)/(2*g*v)))/2),y=x/v,b=x/g;Math.abs(y-1)>nz&&this._append`L${e+y*c},${t+y*d}`,this._append`A${i},${i},0,0,${+(d*h>c*p)},${this._x1=e+b*o},${this._y1=t+b*l}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,n,r,i,a){if(e=+e,t=+t,a=!!a,(n=+n)<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(r),o=n*Math.sin(r),l=e+s,c=t+o,d=1^a,u=a?r-i:i-r;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>nz||Math.abs(this._y1-c)>nz)&&this._append`L${l},${c}`,n&&(u<0&&(u=u%tz+tz),u>rz?this._append`A${n},${n},0,1,${d},${e-s},${t-o}A${n},${n},0,1,${d},${this._x1=l},${this._y1=c}`:u>nz&&this._append`A${n},${n},0,${+(u>=ez)},${d},${this._x1=e+n*Math.cos(i)},${this._y1=t+n*Math.sin(i)}`)}rect(e,t,n,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}};function sz(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);t=e}return e},()=>new az(t)}function oz(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function lz(e){this._context=e}function cz(e){return new lz(e)}function dz(e){return e[0]}function uz(e){return e[1]}function hz(e,t){var n=XU(!0),r=null,i=cz,a=null,s=sz(o);function o(o){var l,c,d,u=(o=oz(o)).length,h=!1;for(null==r&&(a=i(d=s())),l=0;l<=u;++l)!(l<u&&n(c=o[l],l,o))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(c,l,o),+t(c,l,o));if(d)return a=null,d+""||null}return e="function"==typeof e?e:void 0===e?dz:XU(e),t="function"==typeof t?t:void 0===t?uz:XU(t),o.x=function(t){return arguments.length?(e="function"==typeof t?t:XU(+t),o):e},o.y=function(e){return arguments.length?(t="function"==typeof e?e:XU(+e),o):t},o.defined=function(e){return arguments.length?(n="function"==typeof e?e:XU(!!e),o):n},o.curve=function(e){return arguments.length?(i=e,null!=r&&(a=i(r)),o):i},o.context=function(e){return arguments.length?(null==e?r=a=null:a=i(r=e),o):r},o}function pz(e,t,n){var r=null,i=XU(!0),a=null,s=cz,o=null,l=sz(c);function c(c){var d,u,h,p,m,f=(c=oz(c)).length,g=!1,v=new Array(f),x=new Array(f);for(null==a&&(o=s(m=l())),d=0;d<=f;++d){if(!(d<f&&i(p=c[d],d,c))===g)if(g=!g)u=d,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),h=d-1;h>=u;--h)o.point(v[h],x[h]);o.lineEnd(),o.areaEnd()}g&&(v[d]=+e(p,d,c),x[d]=+t(p,d,c),o.point(r?+r(p,d,c):v[d],n?+n(p,d,c):x[d]))}if(m)return o=null,m+""||null}function d(){return hz().defined(i).curve(s).context(a)}return e="function"==typeof e?e:void 0===e?dz:XU(+e),t="function"==typeof t?t:XU(void 0===t?0:+t),n="function"==typeof n?n:void 0===n?uz:XU(+n),c.x=function(t){return arguments.length?(e="function"==typeof t?t:XU(+t),r=null,c):e},c.x0=function(t){return arguments.length?(e="function"==typeof t?t:XU(+t),c):e},c.x1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:XU(+e),c):r},c.y=function(e){return arguments.length?(t="function"==typeof e?e:XU(+e),n=null,c):t},c.y0=function(e){return arguments.length?(t="function"==typeof e?e:XU(+e),c):t},c.y1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:XU(+e),c):n},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(n)},c.lineX1=function(){return d().x(r).y(t)},c.defined=function(e){return arguments.length?(i="function"==typeof e?e:XU(!!e),c):i},c.curve=function(e){return arguments.length?(s=e,null!=a&&(o=s(a)),c):s},c.context=function(e){return arguments.length?(null==e?a=o=null:o=s(a=e),c):a},c}lz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};class mz{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}const fz={draw(e,t){const n=JU(t/ZU);e.moveTo(n,0),e.arc(0,0,n,0,QU)}},gz={draw(e,t){const n=JU(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},vz=JU(1/3),xz=2*vz,yz={draw(e,t){const n=JU(t/xz),r=n*vz;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},bz={draw(e,t){const n=JU(t),r=-n/2;e.rect(r,r,n,n)}},wz=YU(ZU/10)/YU(7*ZU/10),jz=YU(QU/10)*wz,Nz=-$U(QU/10)*wz,_z={draw(e,t){const n=JU(.8908130915292852*t),r=jz*n,i=Nz*n;e.moveTo(0,-n),e.lineTo(r,i);for(let a=1;a<5;++a){const t=QU*a/5,s=$U(t),o=YU(t);e.lineTo(o*n,-s*n),e.lineTo(s*r-o*i,o*r+s*i)}e.closePath()}},Sz=JU(3),Cz={draw(e,t){const n=-JU(t/(3*Sz));e.moveTo(0,2*n),e.lineTo(-Sz*n,-n),e.lineTo(Sz*n,-n),e.closePath()}},Az=-.5,Mz=JU(3)/2,Ez=1/JU(12),kz=3*(Ez/2+1),Tz={draw(e,t){const n=JU(t/kz),r=n/2,i=n*Ez,a=r,s=n*Ez+n,o=-a,l=s;e.moveTo(r,i),e.lineTo(a,s),e.lineTo(o,l),e.lineTo(Az*r-Mz*i,Mz*r+Az*i),e.lineTo(Az*a-Mz*s,Mz*a+Az*s),e.lineTo(Az*o-Mz*l,Mz*o+Az*l),e.lineTo(Az*r+Mz*i,Az*i-Mz*r),e.lineTo(Az*a+Mz*s,Az*s-Mz*a),e.lineTo(Az*o+Mz*l,Az*l-Mz*o),e.closePath()}};function Pz(){}function Oz(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Rz(e){this._context=e}function Iz(e){this._context=e}function Dz(e){this._context=e}function Lz(e){this._context=e}function Bz(e){return e<0?-1:1}function Fz(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(Bz(a)+Bz(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function Uz(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function zz(e,t,n){var r=e._x0,i=e._y0,a=e._x1,s=e._y1,o=(a-r)/3;e._context.bezierCurveTo(r+o,i+o*t,a-o,s-o*n,a,s)}function Hz(e){this._context=e}function Vz(e){this._context=new Gz(e)}function Gz(e){this._context=e}function Wz(e){this._context=e}function Kz(e){var t,n,r=e.length-1,i=new Array(r),a=new Array(r),s=new Array(r);for(i[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,s[t]-=n*s[t-1];for(i[r-1]=s[r-1]/a[r-1],t=r-2;t>=0;--t)i[t]=(s[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function qz(e,t){this._context=e,this._t=t}function Xz(e,t){if((i=e.length)>1)for(var n,r,i,a=1,s=e[t[0]],o=s.length;a<i;++a)for(r=s,s=e[t[a]],n=0;n<o;++n)s[n][1]+=s[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function $z(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Yz(e,t){return e[t]}function Jz(e){const t=[];return t.key=e,t}function Zz(e){return(Zz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Rz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Oz(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Oz(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Iz.prototype={areaStart:Pz,areaEnd:Pz,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Oz(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Dz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Oz(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Lz.prototype={areaStart:Pz,areaEnd:Pz,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},Hz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:zz(this,this._t0,Uz(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,zz(this,Uz(this,n=Fz(this,e,t)),n);break;default:zz(this,this._t0,n=Fz(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(Vz.prototype=Object.create(Hz.prototype)).point=function(e,t){Hz.prototype.point.call(this,t,e)},Gz.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}},Wz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=Kz(e),i=Kz(t),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[s],t[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},qz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var Qz=["type","size","sizeType"];function eH(){return eH=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eH.apply(this,arguments)}function tH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tH(Object(n),!0).forEach(function(t){rH(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tH(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function rH(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Zz(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Zz(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zz(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iH(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var aH={symbolCircle:fz,symbolCross:gz,symbolDiamond:yz,symbolSquare:bz,symbolStar:_z,symbolTriangle:Cz,symbolWye:Tz},sH=Math.PI/180,oH=function(e){var t,n,r=e.type,i=void 0===r?"circle":r,a=e.size,s=void 0===a?64:a,o=e.sizeType,l=void 0===o?"area":o,c=nH(nH({},iH(e,Qz)),{},{type:i,size:s,sizeType:l}),d=c.className,u=c.cx,h=c.cy,p=dU(c,!0);return u===+u&&h===+h&&s===+s?Ge.createElement("path",eH({},p,{className:Up("recharts-symbols",d),transform:"translate(".concat(u,", ").concat(h,")"),d:(t=function(e){var t="symbol".concat(qU(e));return aH[t]||fz}(i),n=function(e,t){let n=null,r=sz(i);function i(){let i;if(n||(n=i=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return e="function"==typeof e?e:XU(e||fz),t="function"==typeof t?t:XU(void 0===t?64:+t),i.type=function(t){return arguments.length?(e="function"==typeof t?t:XU(t),i):e},i.size=function(e){return arguments.length?(t="function"==typeof e?e:XU(+e),i):t},i.context=function(e){return arguments.length?(n=null==e?null:e,i):n},i}().type(t).size(function(e,t,n){if("area"===t)return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var r=18*sH;return 1.25*e*e*(Math.tan(r)-Math.tan(2*r)*Math.pow(Math.tan(r),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(s,l,i)),n())})):null};function lH(e){return(lH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cH(){return cH=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cH.apply(this,arguments)}function dH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function uH(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vH(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hH(e,t,n){return t=mH(t),function(e,t){if(t&&("object"===lH(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,pH()?Reflect.construct(t,n||[],mH(e).constructor):t.apply(e,n))}function pH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(pH=function(){return!!e})()}function mH(e){return(mH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fH(e,t){return(fH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gH(e,t,n){return(t=vH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vH(e){var t=function(e,t){if("object"!=lH(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=lH(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==lH(t)?t:t+""}oH.registerSymbol=function(e,t){aH["symbol".concat(qU(e))]=t};var xH=32,yH=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),hH(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fH(e,t)}(e,Ve.PureComponent),uH(e,[{key:"renderIcon",value:function(e){var t=this.props.inactiveColor,n=16,r=xH/6,i=xH/3,a=e.inactive?t:e.color;if("plainline"===e.type)return Ge.createElement("line",{strokeWidth:4,fill:"none",stroke:a,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:n,x2:xH,y2:n,className:"recharts-legend-icon"});if("line"===e.type)return Ge.createElement("path",{strokeWidth:4,fill:"none",stroke:a,d:"M0,".concat(n,"h").concat(i,"\n            A").concat(r,",").concat(r,",0,1,1,").concat(2*i,",").concat(n,"\n            H").concat(xH,"M").concat(2*i,",").concat(n,"\n            A").concat(r,",").concat(r,",0,1,1,").concat(i,",").concat(n),className:"recharts-legend-icon"});if("rect"===e.type)return Ge.createElement("path",{stroke:"none",fill:a,d:"M0,".concat(4,"h").concat(xH,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(Ge.isValidElement(e.legendIcon)){var s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dH(Object(n),!0).forEach(function(t){gH(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dH(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);return delete s.legendIcon,Ge.cloneElement(e.legendIcon,s)}return Ge.createElement(oH,{fill:a,cx:n,cy:n,size:xH,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,t=this.props,n=t.payload,r=t.iconSize,i=t.layout,a=t.formatter,s=t.inactiveColor,o={x:0,y:0,width:xH,height:xH},l={display:"horizontal"===i?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return n.map(function(t,n){var i=t.formatter||a,d=Up(gH(gH({"recharts-legend-item":!0},"legend-item-".concat(n),!0),"inactive",t.inactive));if("none"===t.type)return null;var u=cL(t.value)?null:t.value;jU(!cL(t.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var h=t.inactive?s:t.color;return Ge.createElement("li",cH({className:d,style:l,key:"legend-item-".concat(n)},$F(e.props,t,n)),Ge.createElement(vU,{width:r,height:r,viewBox:o,style:c},e.renderIcon(t)),Ge.createElement("span",{className:"recharts-legend-item-text",style:{color:h}},i?i(u,t,n):u))})}},{key:"render",value:function(){var e=this.props,t=e.payload,n=e.layout,r=e.align;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:"horizontal"===n?r:"left"};return Ge.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}])}();gH(yH,"displayName","Legend"),gH(yH,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var bH=oB;var wH=oB,jH=lB,NH=_B;var _H=oB,SH=function(){this.__data__=new bH,this.size=0},CH=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},AH=function(e){return this.__data__.get(e)},MH=function(e){return this.__data__.has(e)},EH=function(e,t){var n=this.__data__;if(n instanceof wH){var r=n.__data__;if(!jH||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new NH(r)}return n.set(e,t),this.size=n.size,this};function kH(e){var t=this.__data__=new _H(e);this.size=t.size}kH.prototype.clear=SH,kH.prototype.delete=CH,kH.prototype.get=AH,kH.prototype.has=MH,kH.prototype.set=EH;var TH=kH;var PH=_B,OH=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},RH=function(e){return this.__data__.has(e)};function IH(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new PH;++t<n;)this.add(e[t])}IH.prototype.add=IH.prototype.push=OH,IH.prototype.has=RH;var DH=IH;var LH=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};var BH=function(e,t){return e.has(t)},FH=DH,UH=LH,zH=BH;var HH=function(e,t,n,r,i,a){var s=1&n,o=e.length,l=t.length;if(o!=l&&!(s&&l>o))return!1;var c=a.get(e),d=a.get(t);if(c&&d)return c==t&&d==e;var u=-1,h=!0,p=2&n?new FH:void 0;for(a.set(e,t),a.set(t,e);++u<o;){var m=e[u],f=t[u];if(r)var g=s?r(f,m,u,t,e,a):r(m,f,u,e,t,a);if(void 0!==g){if(g)continue;h=!1;break}if(p){if(!UH(t,function(e,t){if(!zH(p,t)&&(m===e||i(m,e,n,r,a)))return p.push(t)})){h=!1;break}}else if(m!==f&&!i(m,f,n,r,a)){h=!1;break}}return a.delete(e),a.delete(t),h};var VH=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n},GH=DD.Uint8Array,WH=qL,KH=HH,qH=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n},XH=VH,$H=LD?LD.prototype:void 0,YH=$H?$H.valueOf:void 0;var JH=function(e,t,n,r,i,a,s){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new GH(e),new GH(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return WH(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var o=qH;case"[object Set]":var l=1&r;if(o||(o=XH),e.size!=t.size&&!l)return!1;var c=s.get(e);if(c)return c==t;r|=2,s.set(e,t);var d=KH(o(e),o(t),r,i,a,s);return s.delete(e),d;case"[object Symbol]":if(YH)return YH.call(e)==YH.call(t)}return!1};var ZH=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},QH=ZH,eV=PD;var tV=function(e,t,n){var r=t(e);return eV(e)?r:QH(r,n(e))};var nV=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var s=e[n];t(s,n,e)&&(a[i++]=s)}return a},rV=function(){return[]},iV=Object.prototype.propertyIsEnumerable,aV=Object.getOwnPropertySymbols,sV=aV?function(e){return null==e?[]:(e=Object(e),nV(aV(e),function(t){return iV.call(e,t)}))}:rV;var oV=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},lV=XD,cV=$D;var dV,uV,hV,pV,mV,fV,gV,vV,xV=function(e){return cV(e)&&"[object Arguments]"==lV(e)},yV=$D,bV=Object.prototype,wV=bV.hasOwnProperty,jV=bV.propertyIsEnumerable,NV=xV(function(){return arguments}())?xV:function(e){return yV(e)&&wV.call(e,"callee")&&!jV.call(e,"callee")},_V={exports:{}};dV=_V,hV=DD,pV=function(){return!1},mV=(uV=_V.exports)&&!uV.nodeType&&uV,fV=mV&&dV&&!dV.nodeType&&dV,gV=fV&&fV.exports===mV?hV.Buffer:void 0,vV=(gV?gV.isBuffer:void 0)||pV,dV.exports=vV;var SV=_V.exports,CV=/^(?:0|[1-9]\d*)$/;var AV=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&CV.test(e))&&e>-1&&e%1==0&&e<t};var MV=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},EV=XD,kV=MV,TV=$D,PV={};PV["[object Float32Array]"]=PV["[object Float64Array]"]=PV["[object Int8Array]"]=PV["[object Int16Array]"]=PV["[object Int32Array]"]=PV["[object Uint8Array]"]=PV["[object Uint8ClampedArray]"]=PV["[object Uint16Array]"]=PV["[object Uint32Array]"]=!0,PV["[object Arguments]"]=PV["[object Array]"]=PV["[object ArrayBuffer]"]=PV["[object Boolean]"]=PV["[object DataView]"]=PV["[object Date]"]=PV["[object Error]"]=PV["[object Function]"]=PV["[object Map]"]=PV["[object Number]"]=PV["[object Object]"]=PV["[object RegExp]"]=PV["[object Set]"]=PV["[object String]"]=PV["[object WeakMap]"]=!1;var OV=function(e){return TV(e)&&kV(e.length)&&!!PV[EV(e)]};var RV=function(e){return function(t){return e(t)}},IV={exports:{}};!function(e,t){var n=OD,r=t&&!t.nodeType&&t,i=r&&e&&!e.nodeType&&e,a=i&&i.exports===r&&n.process,s=function(){try{var e=i&&i.require&&i.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(CI){}}();e.exports=s}(IV,IV.exports);var DV=IV.exports,LV=OV,BV=RV,FV=DV&&DV.isTypedArray,UV=FV?BV(FV):LV,zV=oV,HV=NV,VV=PD,GV=SV,WV=AV,KV=UV,qV=Object.prototype.hasOwnProperty;var XV=function(e,t){var n=VV(e),r=!n&&HV(e),i=!n&&!r&&GV(e),a=!n&&!r&&!i&&KV(e),s=n||r||i||a,o=s?zV(e.length,String):[],l=o.length;for(var c in e)!t&&!qV.call(e,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||WV(c,l))||o.push(c);return o},$V=Object.prototype;var YV=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||$V)};var JV=function(e,t){return function(n){return e(t(n))}},ZV=JV(Object.keys,Object),QV=YV,eG=ZV,tG=Object.prototype.hasOwnProperty;var nG=lL,rG=MV;var iG=function(e){return null!=e&&rG(e.length)&&!nG(e)},aG=XV,sG=function(e){if(!QV(e))return eG(e);var t=[];for(var n in Object(e))tG.call(e,n)&&"constructor"!=n&&t.push(n);return t},oG=iG;var lG=function(e){return oG(e)?aG(e):sG(e)},cG=tV,dG=sV,uG=lG;var hG=function(e){return cG(e,uG,dG)},pG=Object.prototype.hasOwnProperty;var mG=function(e,t,n,r,i,a){var s=1&n,o=hG(e),l=o.length;if(l!=hG(t).length&&!s)return!1;for(var c=l;c--;){var d=o[c];if(!(s?d in t:pG.call(t,d)))return!1}var u=a.get(e),h=a.get(t);if(u&&h)return u==t&&h==e;var p=!0;a.set(e,t),a.set(t,e);for(var m=s;++c<l;){var f=e[d=o[c]],g=t[d];if(r)var v=s?r(g,f,d,t,e,a):r(f,g,d,e,t,a);if(!(void 0===v?f===g||i(f,g,n,r,a):v)){p=!1;break}m||(m="constructor"==d)}if(p&&!m){var x=e.constructor,y=t.constructor;x==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof y&&y instanceof y||(p=!1)}return a.delete(e),a.delete(t),p},fG=ML(DD,"DataView"),gG=ML(DD,"Promise"),vG=ML(DD,"Set"),xG=fG,yG=lB,bG=gG,wG=vG,jG=ML(DD,"WeakMap"),NG=XD,_G=fL,SG="[object Map]",CG="[object Promise]",AG="[object Set]",MG="[object WeakMap]",EG="[object DataView]",kG=_G(xG),TG=_G(yG),PG=_G(bG),OG=_G(wG),RG=_G(jG),IG=NG;(xG&&IG(new xG(new ArrayBuffer(1)))!=EG||yG&&IG(new yG)!=SG||bG&&IG(bG.resolve())!=CG||wG&&IG(new wG)!=AG||jG&&IG(new jG)!=MG)&&(IG=function(e){var t=NG(e),n="[object Object]"==t?e.constructor:void 0,r=n?_G(n):"";if(r)switch(r){case kG:return EG;case TG:return SG;case PG:return CG;case OG:return AG;case RG:return MG}return t});var DG=TH,LG=HH,BG=JH,FG=mG,UG=IG,zG=PD,HG=SV,VG=UV,GG="[object Arguments]",WG="[object Array]",KG="[object Object]",qG=Object.prototype.hasOwnProperty;var XG=function(e,t,n,r,i,a){var s=zG(e),o=zG(t),l=s?WG:UG(e),c=o?WG:UG(t),d=(l=l==GG?KG:l)==KG,u=(c=c==GG?KG:c)==KG,h=l==c;if(h&&HG(e)){if(!HG(t))return!1;s=!0,d=!1}if(h&&!d)return a||(a=new DG),s||VG(e)?LG(e,t,n,r,i,a):BG(e,t,l,n,r,i,a);if(!(1&n)){var p=d&&qG.call(e,"__wrapped__"),m=u&&qG.call(t,"__wrapped__");if(p||m){var f=p?e.value():e,g=m?t.value():t;return a||(a=new DG),i(f,g,n,r,a)}}return!!h&&(a||(a=new DG),FG(e,t,n,r,i,a))},$G=$D;var YG=function e(t,n,r,i,a){return t===n||(null==t||null==n||!$G(t)&&!$G(n)?t!=t&&n!=n:XG(t,n,r,i,e,a))},JG=TH,ZG=YG;var QG=iL;var eW=function(e){return e==e&&!QG(e)},tW=eW,nW=lG;var rW=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}},iW=function(e,t,n,r){var i=n.length,a=i,s=!r;if(null==e)return!a;for(e=Object(e);i--;){var o=n[i];if(s&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++i<a;){var l=(o=n[i])[0],c=e[l],d=o[1];if(s&&o[2]){if(void 0===c&&!(l in e))return!1}else{var u=new JG;if(r)var h=r(c,d,l,e,t,u);if(!(void 0===h?ZG(d,c,3,r,u):h))return!1}}return!0},aW=function(e){for(var t=nW(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,tW(i)]}return t},sW=rW;var oW=KB,lW=NV,cW=PD,dW=AV,uW=MV,hW=XB;var pW=function(e,t){return null!=e&&t in Object(e)},mW=function(e,t,n){for(var r=-1,i=(t=oW(t,e)).length,a=!1;++r<i;){var s=hW(t[r]);if(!(a=null!=e&&n(e,s)))break;e=e[s]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&uW(i)&&dW(s,i)&&(cW(e)||lW(e))};var fW=YG,gW=QB,vW=function(e,t){return null!=e&&mW(e,t,pW)},xW=rL,yW=eW,bW=rW,wW=XB;var jW=function(e){return e};var NW=JB;var _W=function(e){return function(t){return null==t?void 0:t[e]}},SW=function(e){return function(t){return NW(t,e)}},CW=rL,AW=XB;var MW=function(e){var t=aW(e);return 1==t.length&&t[0][2]?sW(t[0][0],t[0][1]):function(n){return n===e||iW(n,e,t)}},EW=function(e,t){return xW(e)&&yW(t)?bW(wW(e),t):function(n){var r=gW(n,e);return void 0===r&&r===t?vW(n,e):fW(t,r,3)}},kW=jW,TW=PD,PW=function(e){return CW(e)?_W(AW(e)):SW(e)};var OW=function(e){return"function"==typeof e?e:null==e?kW:"object"==typeof e?TW(e)?EW(e[0],e[1]):MW(e):PW(e)};var RW=function(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1};var IW=RW,DW=function(e){return e!=e},LW=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1};var BW=function(e,t,n){return t==t?LW(e,t,n):IW(e,DW,n)};var FW=function(e,t){return!!(null==e?0:e.length)&&BW(e,t,0)>-1};var UW=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1};var zW=vG,HW=function(){},VW=zW&&1/VH(new zW([,-0]))[1]==1/0?function(e){return new zW(e)}:HW,GW=DH,WW=FW,KW=UW,qW=BH,XW=VW,$W=VH;var YW=OW,JW=function(e,t,n){var r=-1,i=WW,a=e.length,s=!0,o=[],l=o;if(n)s=!1,i=KW;else if(a>=200){var c=t?null:XW(e);if(c)return $W(c);s=!1,i=qW,l=new GW}else l=t?[]:o;e:for(;++r<a;){var d=e[r],u=t?t(d):d;if(d=n||0!==d?d:0,s&&u==u){for(var h=l.length;h--;)if(l[h]===u)continue e;t&&l.push(u),o.push(d)}else i(l,u,n)||(l!==o&&l.push(u),o.push(d))}return o};const ZW=ie(function(e,t){return e&&e.length?JW(e,YW(t)):[]});function QW(e,t,n){return!0===t?ZW(e,n):cL(t)?ZW(e,t):e}function eK(e){return(eK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var tK=["ref"];function nK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nK(Object(n),!0).forEach(function(t){cK(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nK(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function iK(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dK(r.key),r)}}function aK(e,t,n){return t=oK(t),function(e,t){if(t&&("object"===eK(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,sK()?Reflect.construct(t,n||[],oK(e).constructor):t.apply(e,n))}function sK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(sK=function(){return!!e})()}function oK(e){return(oK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lK(e,t){return(lK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function cK(e,t,n){return(t=dK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dK(e){var t=function(e,t){if("object"!=eK(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=eK(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==eK(t)?t:t+""}function uK(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function hK(e){return e.value}var pK=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return cK(t=aK(this,e,[].concat(r)),"lastBoundingBox",{width:-1,height:-1}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lK(e,t)}(e,Ve.PureComponent),t=e,r=[{key:"getWithHeight",value:function(e,t){var n=rK(rK({},this.defaultProps),e.props).layout;return"vertical"===n&&OF(e.props.height)?{height:e.props.height}:"horizontal"===n?{width:e.props.width||t}:null}}],(n=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();return e.height=this.wrapperNode.offsetHeight,e.width=this.wrapperNode.offsetWidth,e}return null}},{key:"updateBBox",value:function(){var e=this.props.onBBoxUpdate,t=this.getBBox();t?(Math.abs(t.width-this.lastBoundingBox.width)>1||Math.abs(t.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=t.width,this.lastBoundingBox.height=t.height,e&&e(t)):-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,e&&e(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?rK({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(e){var t,n,r=this.props,i=r.layout,a=r.align,s=r.verticalAlign,o=r.margin,l=r.chartWidth,c=r.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===a&&"vertical"===i?{left:((l||0)-this.getBBoxSnapshot().width)/2}:"right"===a?{right:o&&o.right||0}:{left:o&&o.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(n="middle"===s?{top:((c||0)-this.getBBoxSnapshot().height)/2}:"bottom"===s?{bottom:o&&o.bottom||0}:{top:o&&o.top||0}),rK(rK({},t),n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.content,r=t.width,i=t.height,a=t.wrapperStyle,s=t.payloadUniqBy,o=t.payload,l=rK(rK({position:"absolute",width:r||"auto",height:i||"auto"},this.getDefaultPosition(a)),a);return Ge.createElement("div",{className:"recharts-legend-wrapper",style:l,ref:function(t){e.wrapperNode=t}},function(e,t){if(Ge.isValidElement(e))return Ge.cloneElement(e,t);if("function"==typeof e)return Ge.createElement(e,t);t.ref;var n=uK(t,tK);return Ge.createElement(yH,n)}(n,rK(rK({},this.props),{},{payload:QW(o,s,hK)})))}}])&&iK(t.prototype,n),r&&iK(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();cK(pK,"displayName","Legend"),cK(pK,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var mK=NV,fK=PD,gK=LD?LD.isConcatSpreadable:void 0;var vK=ZH,xK=function(e){return fK(e)||mK(e)||!!(gK&&e&&e[gK])};var yK=function e(t,n,r,i,a){var s=-1,o=t.length;for(r||(r=xK),a||(a=[]);++s<o;){var l=t[s];n>0&&r(l)?n>1?e(l,n-1,r,i,a):vK(a,l):i||(a[a.length]=l)}return a};var bK=function(e){return function(t,n,r){for(var i=-1,a=Object(t),s=r(t),o=s.length;o--;){var l=s[e?o:++i];if(!1===n(a[l],l,a))break}return t}}(),wK=lG;var jK=function(e,t){return e&&bK(e,t,wK)},NK=iG;var _K=function(e,t){return function(n,r){if(null==n)return n;if(!NK(n))return e(n,r);for(var i=n.length,a=t?i:-1,s=Object(n);(t?a--:++a<i)&&!1!==r(s[a],a,s););return n}}(jK),SK=_K,CK=iG;var AK=function(e,t){var n=-1,r=CK(e)?Array(e.length):[];return SK(e,function(e,i,a){r[++n]=t(e,i,a)}),r};var MK=ZD;var EK=function(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,a=MK(e),s=void 0!==t,o=null===t,l=t==t,c=MK(t);if(!o&&!c&&!a&&e>t||a&&s&&l&&!o&&!c||r&&s&&l||!n&&l||!i)return 1;if(!r&&!a&&!c&&e<t||c&&n&&i&&!r&&!a||o&&n&&i||!s&&i||!l)return-1}return 0};var kK=OB,TK=JB,PK=OW,OK=AK,RK=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},IK=RV,DK=function(e,t,n){for(var r=-1,i=e.criteria,a=t.criteria,s=i.length,o=n.length;++r<s;){var l=EK(i[r],a[r]);if(l)return r>=o?l:l*("desc"==n[r]?-1:1)}return e.index-t.index},LK=jW,BK=PD;var FK=function(e,t,n){t=t.length?kK(t,function(e){return BK(e)?function(t){return TK(t,1===e.length?e[0]:e)}:e}):[LK];var r=-1;t=kK(t,IK(PK));var i=OK(e,function(e,n,i){return{criteria:kK(t,function(t){return t(e)}),index:++r,value:e}});return RK(i,function(e,t){return DK(e,t,n)})};var UK=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},zK=UK,HK=Math.max;var VK=function(e,t,n){return t=HK(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=HK(r.length-t,0),s=Array(a);++i<a;)s[i]=r[t+i];i=-1;for(var o=Array(t+1);++i<t;)o[i]=r[i];return o[t]=n(s),zK(e,this,o)}};var GK=function(e){return function(){return e}},WK=ML,KK=function(){try{var e=WK(Object,"defineProperty");return e({},"",{}),e}catch(CI){}}(),qK=GK,XK=KK,$K=XK?function(e,t){return XK(e,"toString",{configurable:!0,enumerable:!1,value:qK(t),writable:!0})}:jW,YK=Date.now;var JK=function(e){var t=0,n=0;return function(){var r=YK(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}($K),ZK=jW,QK=VK,eq=JK;var tq=qL,nq=iG,rq=AV,iq=iL;var aq=function(e,t,n){if(!iq(n))return!1;var r=typeof t;return!!("number"==r?nq(n)&&rq(t,n.length):"string"==r&&t in n)&&tq(n[t],e)},sq=yK,oq=FK,lq=aq;const cq=ie(function(e,t){return eq(QK(e,t,ZK),e+"")}(function(e,t){if(null==e)return[];var n=t.length;return n>1&&lq(e,t[0],t[1])?t=[]:n>2&&lq(t[0],t[1],t[2])&&(t=[t[0]]),oq(e,sq(t,1),[])}));function dq(e){return(dq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uq(){return uq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uq.apply(this,arguments)}function hq(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t);else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pq(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pq(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pq(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function fq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mq(Object(n),!0).forEach(function(t){gq(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mq(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function gq(e,t,n){return t=function(e){var t=function(e,t){if("object"!=dq(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=dq(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dq(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vq(e){return Array.isArray(e)&&RF(e[0])&&RF(e[1])?e.join(" ~ "):e}var xq=function(e){var t=e.separator,n=void 0===t?" : ":t,r=e.contentStyle,i=void 0===r?{}:r,a=e.itemStyle,s=void 0===a?{}:a,o=e.labelStyle,l=void 0===o?{}:o,c=e.payload,d=e.formatter,u=e.itemSorter,h=e.wrapperClassName,p=e.labelClassName,m=e.label,f=e.labelFormatter,g=e.accessibilityLayer,v=void 0!==g&&g,x=fq({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),y=fq({margin:0},l),b=!tF(m),w=b?m:"",j=Up("recharts-default-tooltip",h),N=Up("recharts-tooltip-label",p);b&&f&&null!=c&&(w=f(m,c));var _=v?{role:"status","aria-live":"assertive"}:{};return Ge.createElement("div",uq({className:j,style:x},_),Ge.createElement("p",{className:N,style:y},Ge.isValidElement(w)?w:"".concat(w)),function(){if(c&&c.length){var e=(u?cq(c,u):c).map(function(e,t){if("none"===e.type)return null;var r=fq({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},s),i=e.formatter||d||vq,a=e.value,o=e.name,l=a,u=o;if(i&&null!=l&&null!=u){var h=i(a,o,e,t,c);if(Array.isArray(h)){var p=hq(h,2);l=p[0],u=p[1]}else l=h}return Ge.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(t),style:r},RF(u)?Ge.createElement("span",{className:"recharts-tooltip-item-name"},u):null,RF(u)?Ge.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,Ge.createElement("span",{className:"recharts-tooltip-item-value"},l),Ge.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return Ge.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null}())};function yq(e){return(yq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bq(e,t,n){return t=function(e){var t=function(e,t){if("object"!=yq(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=yq(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yq(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wq="recharts-tooltip-wrapper",jq={visibility:"hidden"};function Nq(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return Up(wq,bq(bq(bq(bq({},"".concat(wq,"-right"),OF(n)&&t&&OF(t.x)&&n>=t.x),"".concat(wq,"-left"),OF(n)&&t&&OF(t.x)&&n<t.x),"".concat(wq,"-bottom"),OF(r)&&t&&OF(t.y)&&r>=t.y),"".concat(wq,"-top"),OF(r)&&t&&OF(t.y)&&r<t.y))}function _q(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,i=e.offsetTopLeft,a=e.position,s=e.reverseDirection,o=e.tooltipDimension,l=e.viewBox,c=e.viewBoxDimension;if(a&&OF(a[r]))return a[r];var d=n[r]-o-i,u=n[r]+i;return t[r]?s[r]?d:u:s[r]?d<l[r]?Math.max(u,l[r]):Math.max(d,l[r]):u+o>l[r]+c?Math.max(d,l[r]):Math.max(u,l[r])}function Sq(e){return(Sq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Aq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cq(Object(n),!0).forEach(function(t){Oq(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cq(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Mq(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Rq(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Eq(e,t,n){return t=Tq(t),function(e,t){if(t&&("object"===Sq(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,kq()?Reflect.construct(t,n||[],Tq(e).constructor):t.apply(e,n))}function kq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(kq=function(){return!!e})()}function Tq(e){return(Tq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pq(e,t){return(Pq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Oq(e,t,n){return(t=Rq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rq(e){var t=function(e,t){if("object"!=Sq(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Sq(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Sq(t)?t:t+""}var Iq=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oq(t=Eq(this,e,[].concat(r)),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Oq(t,"handleKeyDown",function(e){var n,r,i,a;"Escape"===e.key&&t.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(n=null===(r=t.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==n?n:0,y:null!==(i=null===(a=t.props.coordinate)||void 0===a?void 0:a.y)&&void 0!==i?i:0}})}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pq(e,t)}(e,Ve.PureComponent),Mq(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();(Math.abs(e.width-this.state.lastBoundingBox.width)>1||Math.abs(e.height-this.state.lastBoundingBox.height)>1)&&this.setState({lastBoundingBox:{width:e.width,height:e.height}})}else-1===this.state.lastBoundingBox.width&&-1===this.state.lastBoundingBox.height||this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var e,t;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}},{key:"render",value:function(){var e=this,t=this.props,n=t.active,r=t.allowEscapeViewBox,i=t.animationDuration,a=t.animationEasing,s=t.children,o=t.coordinate,l=t.hasPayload,c=t.isAnimationActive,d=t.offset,u=t.position,h=t.reverseDirection,p=t.useTranslate3d,m=t.viewBox,f=t.wrapperStyle,g=function(e){var t,n,r=e.allowEscapeViewBox,i=e.coordinate,a=e.offsetTopLeft,s=e.position,o=e.reverseDirection,l=e.tooltipBox,c=e.useTranslate3d,d=e.viewBox;return{cssProperties:l.height>0&&l.width>0&&i?function(e){var t=e.translateX,n=e.translateY;return{transform:e.useTranslate3d?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}({translateX:t=_q({allowEscapeViewBox:r,coordinate:i,key:"x",offsetTopLeft:a,position:s,reverseDirection:o,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),translateY:n=_q({allowEscapeViewBox:r,coordinate:i,key:"y",offsetTopLeft:a,position:s,reverseDirection:o,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),useTranslate3d:c}):jq,cssClasses:Nq({translateX:t,translateY:n,coordinate:i})}}({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:d,position:u,reverseDirection:h,tooltipBox:this.state.lastBoundingBox,useTranslate3d:p,viewBox:m}),v=g.cssClasses,x=g.cssProperties,y=Aq(Aq({transition:c&&n?"transform ".concat(i,"ms ").concat(a):void 0},x),{},{pointerEvents:"none",visibility:!this.state.dismissed&&n&&l?"visible":"hidden",position:"absolute",top:0,left:0},f);return Ge.createElement("div",{tabIndex:-1,className:v,style:y,ref:function(t){e.wrapperNode=t}},s)}}])}(),Dq=!("undefined"!=typeof window&&window.document&&window.document.createElement&&window.setTimeout);function Lq(e){return(Lq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Fq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bq(Object(n),!0).forEach(function(t){Wq(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bq(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Uq(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Kq(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function zq(e,t,n){return t=Vq(t),function(e,t){if(t&&("object"===Lq(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Hq()?Reflect.construct(t,n||[],Vq(e).constructor):t.apply(e,n))}function Hq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Hq=function(){return!!e})()}function Vq(e){return(Vq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gq(e,t){return(Gq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Wq(e,t,n){return(t=Kq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kq(e){var t=function(e,t){if("object"!=Lq(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Lq(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Lq(t)?t:t+""}function qq(e){return e.dataKey}var Xq=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),zq(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gq(e,t)}(e,Ve.PureComponent),Uq(e,[{key:"render",value:function(){var e=this,t=this.props,n=t.active,r=t.allowEscapeViewBox,i=t.animationDuration,a=t.animationEasing,s=t.content,o=t.coordinate,l=t.filterNull,c=t.isAnimationActive,d=t.offset,u=t.payload,h=t.payloadUniqBy,p=t.position,m=t.reverseDirection,f=t.useTranslate3d,g=t.viewBox,v=t.wrapperStyle,x=null!=u?u:[];l&&x.length&&(x=QW(u.filter(function(t){return null!=t.value&&(!0!==t.hide||e.props.includeHidden)}),h,qq));var y=x.length>0;return Ge.createElement(Iq,{allowEscapeViewBox:r,animationDuration:i,animationEasing:a,isAnimationActive:c,active:n,coordinate:o,hasPayload:y,offset:d,position:p,reverseDirection:m,useTranslate3d:f,viewBox:g,wrapperStyle:v},function(e,t){return Ge.isValidElement(e)?Ge.cloneElement(e,t):"function"==typeof e?Ge.createElement(e,t):Ge.createElement(xq,t)}(s,Fq(Fq({},this.props),{},{payload:x})))}}])}();Wq(Xq,"displayName","Tooltip"),Wq(Xq,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Dq,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var $q=DD,Yq=/\s/;var Jq=function(e){for(var t=e.length;t--&&Yq.test(e.charAt(t)););return t},Zq=/^\s+/;var Qq=function(e){return e?e.slice(0,Jq(e)+1).replace(Zq,""):e},eX=iL,tX=ZD,nX=/^[-+]0x[0-9a-f]+$/i,rX=/^0b[01]+$/i,iX=/^0o[0-7]+$/i,aX=parseInt;var sX=function(e){if("number"==typeof e)return e;if(tX(e))return NaN;if(eX(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=eX(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Qq(e);var n=rX.test(e);return n||iX.test(e)?aX(e.slice(2),n?2:8):nX.test(e)?NaN:+e},oX=iL,lX=function(){return $q.Date.now()},cX=sX,dX=Math.max,uX=Math.min;var hX=function(e,t,n){var r,i,a,s,o,l,c=0,d=!1,u=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=r,a=i;return r=i=void 0,c=t,s=e.apply(a,n)}function m(e){var n=e-l;return void 0===l||n>=t||n<0||u&&e-c>=a}function f(){var e=lX();if(m(e))return g(e);o=setTimeout(f,function(e){var n=t-(e-l);return u?uX(n,a-(e-c)):n}(e))}function g(e){return o=void 0,h&&r?p(e):(r=i=void 0,s)}function v(){var e=lX(),n=m(e);if(r=arguments,i=this,l=e,n){if(void 0===o)return function(e){return c=e,o=setTimeout(f,t),d?p(e):s}(l);if(u)return clearTimeout(o),o=setTimeout(f,t),p(l)}return void 0===o&&(o=setTimeout(f,t)),s}return t=cX(t)||0,oX(n)&&(d=!!n.leading,a=(u="maxWait"in n)?dX(cX(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),v.cancel=function(){void 0!==o&&clearTimeout(o),c=0,r=l=i=o=void 0},v.flush=function(){return void 0===o?s:g(lX())},v},pX=hX,mX=iL;var fX=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return mX(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),pX(e,t,{leading:r,maxWait:t,trailing:i})};const gX=ie(fX);function vX(e){return(vX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function yX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xX(Object(n),!0).forEach(function(t){bX(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xX(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function bX(e,t,n){return t=function(e){var t=function(e,t){if("object"!=vX(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=vX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vX(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wX(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t);else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jX(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jX(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jX(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var NX=Ve.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,i=void 0===r?{width:-1,height:-1}:r,a=e.width,s=void 0===a?"100%":a,o=e.height,l=void 0===o?"100%":o,c=e.minWidth,d=void 0===c?0:c,u=e.minHeight,h=e.maxHeight,p=e.children,m=e.debounce,f=void 0===m?0:m,g=e.id,v=e.className,x=e.onResize,y=e.style,b=void 0===y?{}:y,w=Ve.useRef(null),j=Ve.useRef();j.current=x,Ve.useImperativeHandle(t,function(){return Object.defineProperty(w.current,"current",{get:function(){return w.current},configurable:!0})});var N=wX(Ve.useState({containerWidth:i.width,containerHeight:i.height}),2),_=N[0],S=N[1],C=Ve.useCallback(function(e,t){S(function(n){var r=Math.round(e),i=Math.round(t);return n.containerWidth===r&&n.containerHeight===i?n:{containerWidth:r,containerHeight:i}})},[]);Ve.useEffect(function(){var e=function(e){var t,n=e[0].contentRect,r=n.width,i=n.height;C(r,i),null===(t=j.current)||void 0===t||t.call(j,r,i)};f>0&&(e=gX(e,f,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),n=w.current.getBoundingClientRect(),r=n.width,i=n.height;return C(r,i),t.observe(w.current),function(){t.disconnect()}},[C,f]);var A=Ve.useMemo(function(){var e=_.containerWidth,t=_.containerHeight;if(e<0||t<0)return null;jU(PF(s)||PF(l),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",s,l),jU(!n||n>0,"The aspect(%s) must be greater than zero.",n);var r=PF(s)?e:s,i=PF(l)?t:l;n&&n>0&&(r?i=r/n:i&&(r=i*n),h&&i>h&&(i=h)),jU(r>0||i>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",r,i,s,l,d,u,n);var a=!Array.isArray(p)&&tU(p.type).endsWith("Chart");return Ge.Children.map(p,function(e){return Ge.isValidElement(e)?Ve.cloneElement(e,yX({width:r,height:i},a?{style:yX({height:"100%",width:"100%",maxHeight:i,maxWidth:r},e.props.style)}:{})):e})},[n,p,l,h,u,d,_,s]);return Ge.createElement("div",{id:g?"".concat(g):void 0,className:Up("recharts-responsive-container",v),style:yX(yX({},b),{},{width:s,height:l,minWidth:d,minHeight:u,maxHeight:h}),ref:w},A)}),_X=function(e){return null};function SX(e){return(SX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function AX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CX(Object(n),!0).forEach(function(t){MX(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CX(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function MX(e,t,n){return t=function(e){var t=function(e,t){if("object"!=SX(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=SX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==SX(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}_X.displayName="Cell";var EX={widthCache:{},cacheCount:0},kX={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},TX="recharts_measurement_span";var PX=function(e){if(null==e||Dq)return{width:0,height:0};var t,n=(t=AX({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),Object.keys(t).forEach(function(e){t[e]||delete t[e]}),t),r=JSON.stringify({text:e,copyStyle:n});if(EX.widthCache[r])return EX.widthCache[r];try{var i=document.getElementById(TX);i||((i=document.createElement("span")).setAttribute("id",TX),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var a=AX(AX({},kX),n);Object.assign(i.style,a),i.textContent="".concat(e);var s=i.getBoundingClientRect(),o={width:s.width,height:s.height};return EX.widthCache[r]=o,++EX.cacheCount>2e3&&(EX.cacheCount=0,EX.widthCache={}),o}catch(CI){return{width:0,height:0}}};function OX(e){return(OX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RX(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return IX(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IX(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IX(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function DX(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,LX(r.key),r)}}function LX(e){var t=function(e,t){if("object"!=OX(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=OX(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==OX(t)?t:t+""}var BX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,FX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,UX=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,zX=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,HX={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},VX=Object.keys(HX),GX="NaN";var WX=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),""===n||UX.test(n)||(this.num=NaN,this.unit=""),VX.includes(n)&&(this.num=function(e,t){return e*HX[t]}(t,n),this.unit="px")}return t=e,r=[{key:"parse",value:function(t){var n,r=RX(null!==(n=zX.exec(t))&&void 0!==n?n:[],3),i=r[1],a=r[2];return new e(parseFloat(i),null!=a?a:"")}}],(n=[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}])&&DX(t.prototype,n),r&&DX(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function KX(e){if(e.includes(GX))return GX;for(var t=e;t.includes("*")||t.includes("/");){var n,r=RX(null!==(n=BX.exec(t))&&void 0!==n?n:[],4),i=r[1],a=r[2],s=r[3],o=WX.parse(null!=i?i:""),l=WX.parse(null!=s?s:""),c="*"===a?o.multiply(l):o.divide(l);if(c.isNaN())return GX;t=t.replace(BX,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,u=RX(null!==(d=FX.exec(t))&&void 0!==d?d:[],4),h=u[1],p=u[2],m=u[3],f=WX.parse(null!=h?h:""),g=WX.parse(null!=m?m:""),v="+"===p?f.add(g):f.subtract(g);if(v.isNaN())return GX;t=t.replace(FX,v.toString())}return t}var qX=/\(([^()]*)\)/;function XX(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t=e;t.includes("(");){var n=RX(qX.exec(t),2)[1];t=t.replace(qX,KX(n))}return t}(t),t=KX(t)}function $X(e){var t=function(e){try{return XX(e)}catch(CI){return GX}}(e.slice(5,-1));return t===GX?"":t}var YX=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],JX=["dx","dy","angle","className","breakAll"];function ZX(){return ZX=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZX.apply(this,arguments)}function QX(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function e$(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return t$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t$(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var n$=/[ \f\n\r\t\v\u2028\u2029]+/,r$=function(e){var t=e.children,n=e.breakAll,r=e.style;try{var i=[];return tF(t)||(i=n?t.toString().split(""):t.toString().split(n$)),{wordsWithComputedWidth:i.map(function(e){return{word:e,width:PX(e,r).width}}),spaceWidth:n?0:PX("",r).width}}catch(CI){return null}},i$=function(e){return[{words:tF(e)?[]:e.toString().split(n$)}]},a$=function(e){var t=e.width,n=e.scaleToFit,r=e.children,i=e.style,a=e.breakAll,s=e.maxLines;if((t||n)&&!Dq){var o=r$({breakAll:a,children:r,style:i});return o?function(e,t,n,r,i){var a=e.maxLines,s=e.children,o=e.style,l=e.breakAll,c=OF(a),d=s,u=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){var a=t.word,s=t.width,o=e[e.length-1];if(o&&(null==r||i||o.width+s+n<Number(r)))o.words.push(a),o.width+=s+n;else{var l={words:[a],width:s};e.push(l)}return e},[])},h=u(t);if(!c)return h;for(var p,m=function(e){var t=d.slice(0,e),n=r$({breakAll:l,style:o,children:t+""}).wordsWithComputedWidth,i=u(n),s=i.length>a||function(e){return e.reduce(function(e,t){return e.width>t.width?e:t})}(i).width>Number(r);return[s,i]},f=0,g=d.length-1,v=0;f<=g&&v<=d.length-1;){var x=Math.floor((f+g)/2),y=e$(m(x-1),2),b=y[0],w=y[1],j=e$(m(x),1)[0];if(b||j||(f=x+1),b&&j&&(g=x-1),!b&&j){p=w;break}v++}return p||h}({breakAll:a,children:r,maxLines:s,style:i},o.wordsWithComputedWidth,o.spaceWidth,t,n):i$(r)}return i$(r)},s$="#808080",o$=function(e){var t=e.x,n=void 0===t?0:t,r=e.y,i=void 0===r?0:r,a=e.lineHeight,s=void 0===a?"1em":a,o=e.capHeight,l=void 0===o?"0.71em":o,c=e.scaleToFit,d=void 0!==c&&c,u=e.textAnchor,h=void 0===u?"start":u,p=e.verticalAnchor,m=void 0===p?"end":p,f=e.fill,g=void 0===f?s$:f,v=QX(e,YX),x=Ve.useMemo(function(){return a$({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:d,style:v.style,width:v.width})},[v.breakAll,v.children,v.maxLines,d,v.style,v.width]),y=v.dx,b=v.dy,w=v.angle,j=v.className,N=v.breakAll,_=QX(v,JX);if(!RF(n)||!RF(i))return null;var S,C=n+(OF(y)?y:0),A=i+(OF(b)?b:0);switch(m){case"start":S=$X("calc(".concat(l,")"));break;case"middle":S=$X("calc(".concat((x.length-1)/2," * -").concat(s," + (").concat(l," / 2))"));break;default:S=$X("calc(".concat(x.length-1," * -").concat(s,")"))}var M=[];if(d){var E=x[0].width,k=v.width;M.push("scale(".concat((OF(k)?k/E:1)/E,")"))}return w&&M.push("rotate(".concat(w,", ").concat(C,", ").concat(A,")")),M.length&&(_.transform=M.join(" ")),Ge.createElement("text",ZX({},dU(_,!0),{x:C,y:A,className:Up("recharts-text",j),textAnchor:h,fill:g.includes("url")?s$:g}),x.map(function(e,t){var n=e.words.join(N?"":" ");return Ge.createElement("tspan",{x:C,dy:0===t?S:s,key:"".concat(n,"-").concat(t)},n)}))};function l$(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function c$(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function d$(e){let t,n,r;function i(e,r,i=0,a=e.length){if(i<a){if(0!==t(r,r))return a;do{const t=i+a>>>1;n(e[t],r)<0?i=t+1:a=t}while(i<a)}return i}return 2!==e.length?(t=l$,n=(t,n)=>l$(e(t),n),r=(t,n)=>e(t)-n):(t=e===l$||e===c$?e:u$,n=e,r=e),{left:i,center:function(e,t,n=0,a=e.length){const s=i(e,t,n,a-1);return s>n&&r(e[s-1],t)>-r(e[s],t)?s-1:s},right:function(e,r,i=0,a=e.length){if(i<a){if(0!==t(r,r))return a;do{const t=i+a>>>1;n(e[t],r)<=0?i=t+1:a=t}while(i<a)}return i}}}function u$(){return 0}function h$(e){return null===e?NaN:+e}const p$=d$(l$).right;d$(h$).center;class m$ extends Map{constructor(e,t=g$){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(f$(this,e))}has(e){return super.has(f$(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},n){const r=t(n);e.has(r)&&(n=e.get(r),e.delete(r));return n}(this,e))}}function f$({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function g$(e){return null!==e&&"object"==typeof e?e.valueOf():e}function v$(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}const x$=Math.sqrt(50),y$=Math.sqrt(10),b$=Math.sqrt(2);function w$(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=x$?10:a>=y$?5:a>=b$?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/s,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*s,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=n&&n<2?w$(e,t,2*n):[o,l,c]}function j$(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const r=t<e,[i,a,s]=r?w$(t,e,n):w$(e,t,n);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(r)if(s<0)for(let c=0;c<o;++c)l[c]=(a-c)/-s;else for(let c=0;c<o;++c)l[c]=(a-c)*s;else if(s<0)for(let c=0;c<o;++c)l[c]=(i+c)/-s;else for(let c=0;c<o;++c)l[c]=(i+c)*s;return l}function N$(e,t,n){return w$(e=+e,t=+t,n=+n)[2]}function _$(e,t,n){n=+n;const r=(t=+t)<(e=+e),i=r?N$(t,e,n):N$(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function S$(e,t){let n;for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);return n}function C$(e,t){let n;for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);return n}function A$(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=void 0===i?v$:function(e=l$){if(e===l$)return v$;if("function"!=typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||0===r?r:(0===e(n,n))-(0===e(t,t))}}(i);r>n;){if(r-n>600){const a=r-n+1,s=t-n+1,o=Math.log(a),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(a-l)/a)*(s-a/2<0?-1:1);A$(e,t,Math.max(n,Math.floor(t-s*l/a+c)),Math.min(r,Math.floor(t+(a-s)*l/a+c)),i)}const a=e[t];let s=n,o=r;for(M$(e,n,t),i(e[r],a)>0&&M$(e,n,r);s<o;){for(M$(e,s,o),++s,--o;i(e[s],a)<0;)++s;for(;i(e[o],a)>0;)--o}0===i(e[n],a)?M$(e,n,o):(++o,M$(e,o,r)),o<=t&&(n=o+1),t<=o&&(r=o-1)}return e}function M$(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function E$(e,t,n=h$){if((r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),s=+n(e[a],a,e);return s+(+n(e[a+1],a+1,e)-s)*(i-a)}}function k$(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function T$(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}const P$=Symbol("implicit");function O$(){var e=new m$,t=[],n=[],r=P$;function i(i){let a=e.get(i);if(void 0===a){if(r!==P$)return r;e.set(i,a=t.push(i)-1)}return n[a%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new m$;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return O$(t,n).unknown(r)},k$.apply(i,arguments),i}function R$(){var e,t,n=O$().unknown(void 0),r=n.domain,i=n.range,a=0,s=1,o=!1,l=0,c=0,d=.5;function u(){var n=r().length,u=s<a,h=u?s:a,p=u?a:s;e=(p-h)/Math.max(1,n-l+2*c),o&&(e=Math.floor(e)),h+=(p-h-e*(n-l))*d,t=e*(1-l),o&&(h=Math.round(h),t=Math.round(t));var m=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a}(n).map(function(t){return h+e*t});return i(u?m.reverse():m)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),u()):r()},n.range=function(e){return arguments.length?([a,s]=e,a=+a,s=+s,u()):[a,s]},n.rangeRound=function(e){return[a,s]=e,a=+a,s=+s,o=!0,u()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,u()):o},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),u()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),u()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,u()):c},n.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),u()):d},n.copy=function(){return R$(r(),[a,s]).round(o).paddingInner(l).paddingOuter(c).align(d)},k$.apply(u(),arguments)}function I$(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return I$(t())},e}function D$(){return I$(R$.apply(null,arguments).paddingInner(1))}function L$(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function B$(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function F$(){}var U$=.7,z$=1/U$,H$="\\s*([+-]?\\d+)\\s*",V$="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",G$="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",W$=/^#([0-9a-f]{3,8})$/,K$=new RegExp(`^rgb\\(${H$},${H$},${H$}\\)$`),q$=new RegExp(`^rgb\\(${G$},${G$},${G$}\\)$`),X$=new RegExp(`^rgba\\(${H$},${H$},${H$},${V$}\\)$`),$$=new RegExp(`^rgba\\(${G$},${G$},${G$},${V$}\\)$`),Y$=new RegExp(`^hsl\\(${V$},${G$},${G$}\\)$`),J$=new RegExp(`^hsla\\(${V$},${G$},${G$},${V$}\\)$`),Z$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Q$(){return this.rgb().formatHex()}function eY(){return this.rgb().formatRgb()}function tY(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=W$.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?nY(t):3===n?new aY(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?rY(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?rY(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=K$.exec(e))?new aY(t[1],t[2],t[3],1):(t=q$.exec(e))?new aY(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=X$.exec(e))?rY(t[1],t[2],t[3],t[4]):(t=$$.exec(e))?rY(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Y$.exec(e))?uY(t[1],t[2]/100,t[3]/100,1):(t=J$.exec(e))?uY(t[1],t[2]/100,t[3]/100,t[4]):Z$.hasOwnProperty(e)?nY(Z$[e]):"transparent"===e?new aY(NaN,NaN,NaN,0):null}function nY(e){return new aY(e>>16&255,e>>8&255,255&e,1)}function rY(e,t,n,r){return r<=0&&(e=t=n=NaN),new aY(e,t,n,r)}function iY(e,t,n,r){return 1===arguments.length?((i=e)instanceof F$||(i=tY(i)),i?new aY((i=i.rgb()).r,i.g,i.b,i.opacity):new aY):new aY(e,t,n,null==r?1:r);var i}function aY(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function sY(){return`#${dY(this.r)}${dY(this.g)}${dY(this.b)}`}function oY(){const e=lY(this.opacity);return`${1===e?"rgb(":"rgba("}${cY(this.r)}, ${cY(this.g)}, ${cY(this.b)}${1===e?")":`, ${e})`}`}function lY(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function cY(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function dY(e){return((e=cY(e))<16?"0":"")+e.toString(16)}function uY(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new pY(e,t,n,r)}function hY(e){if(e instanceof pY)return new pY(e.h,e.s,e.l,e.opacity);if(e instanceof F$||(e=tY(e)),!e)return new pY;if(e instanceof pY)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),s=NaN,o=a-i,l=(a+i)/2;return o?(s=t===a?(n-r)/o+6*(n<r):n===a?(r-t)/o+2:(t-n)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new pY(s,o,l,e.opacity)}function pY(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function mY(e){return(e=(e||0)%360)<0?e+360:e}function fY(e){return Math.max(0,Math.min(1,e||0))}function gY(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}L$(F$,tY,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Q$,formatHex:Q$,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return hY(this).formatHsl()},formatRgb:eY,toString:eY}),L$(aY,iY,B$(F$,{brighter(e){return e=null==e?z$:Math.pow(z$,e),new aY(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?U$:Math.pow(U$,e),new aY(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new aY(cY(this.r),cY(this.g),cY(this.b),lY(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sY,formatHex:sY,formatHex8:function(){return`#${dY(this.r)}${dY(this.g)}${dY(this.b)}${dY(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:oY,toString:oY})),L$(pY,function(e,t,n,r){return 1===arguments.length?hY(e):new pY(e,t,n,null==r?1:r)},B$(F$,{brighter(e){return e=null==e?z$:Math.pow(z$,e),new pY(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?U$:Math.pow(U$,e),new pY(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new aY(gY(e>=240?e-240:e+120,i,r),gY(e,i,r),gY(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new pY(mY(this.h),fY(this.s),fY(this.l),lY(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=lY(this.opacity);return`${1===e?"hsl(":"hsla("}${mY(this.h)}, ${100*fY(this.s)}%, ${100*fY(this.l)}%${1===e?")":`, ${e})`}`}}));const vY=e=>()=>e;function xY(e){return 1===(e=+e)?yY:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):vY(isNaN(t)?n:t)}}function yY(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):vY(isNaN(e)?t:e)}const bY=function e(t){var n=xY(t);function r(e,t){var r=n((e=iY(e)).r,(t=iY(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),s=yY(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=s(t),e+""}}return r.gamma=e,r}(1);function wY(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function jY(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),s=new Array(r);for(n=0;n<i;++n)a[n]=EY(e[n],t[n]);for(;n<r;++n)s[n]=t[n];return function(e){for(n=0;n<i;++n)s[n]=a[n](e);return s}}function NY(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function _Y(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function SY(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=EY(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var CY=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,AY=new RegExp(CY.source,"g");function MY(e,t){var n,r,i,a=CY.lastIndex=AY.lastIndex=0,s=-1,o=[],l=[];for(e+="",t+="";(n=CY.exec(e))&&(r=AY.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),o[s]?o[s]+=i:o[++s]=i),(n=n[0])===(r=r[0])?o[s]?o[s]+=r:o[++s]=r:(o[++s]=null,l.push({i:s,x:_Y(n,r)})),a=AY.lastIndex;return a<t.length&&(i=t.slice(a),o[s]?o[s]+=i:o[++s]=i),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)o[(n=l[r]).i]=n.x(e);return o.join("")})}function EY(e,t){var n,r=typeof t;return null==t||"boolean"===r?vY(t):("number"===r?_Y:"string"===r?(n=tY(t))?(t=n,bY):MY:t instanceof tY?bY:t instanceof Date?NY:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?wY:Array.isArray(t)?jY:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?SY:_Y)(e,t)}function kY(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function TY(e){return+e}var PY=[0,1];function OY(e){return e}function RY(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function IY(e,t,n){var r=e[0],i=e[1],a=t[0],s=t[1];return i<r?(r=RY(i,r),a=n(s,a)):(r=RY(r,i),a=n(a,s)),function(e){return a(r(e))}}function DY(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=RY(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(t){var n=p$(e,t,1,r)-1;return a[n](i[n](t))}}function LY(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function BY(){var e,t,n,r,i,a,s=PY,o=PY,l=EY,c=OY;function d(){var e=Math.min(s.length,o.length);return c!==OY&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(s[0],s[e-1])),r=e>2?DY:IY,i=a=null,u}function u(t){return null==t||isNaN(t=+t)?n:(i||(i=r(s.map(e),o,l)))(e(c(t)))}return u.invert=function(n){return c(t((a||(a=r(o,s.map(e),_Y)))(n)))},u.domain=function(e){return arguments.length?(s=Array.from(e,TY),d()):s.slice()},u.range=function(e){return arguments.length?(o=Array.from(e),d()):o.slice()},u.rangeRound=function(e){return o=Array.from(e),l=kY,d()},u.clamp=function(e){return arguments.length?(c=!!e||OY,d()):c!==OY},u.interpolate=function(e){return arguments.length?(l=e,d()):l},u.unknown=function(e){return arguments.length?(n=e,u):n},function(n,r){return e=n,t=r,d()}}function FY(){return BY()(OY,OY)}function UY(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function zY(e){return(e=UY(Math.abs(e)))?e[1]:NaN}var HY,VY=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function GY(e){if(!(t=VY.exec(e)))throw new Error("invalid format: "+e);var t;return new WY({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function WY(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function KY(e,t){var n=UY(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}GY.prototype=WY.prototype,WY.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const qY={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>KY(100*e,t),r:KY,s:function(e,t){var n=UY(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(HY=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+UY(e,Math.max(0,t+a-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function XY(e){return e}var $Y,YY,JY,ZY=Array.prototype.map,QY=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function eJ(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?XY:(t=ZY.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,a=[],s=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),a.push(e.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",s=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?XY:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(ZY.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"":e.minus+"",d=void 0===e.nan?"NaN":e.nan+"";function u(e){var t=(e=GY(e)).fill,n=e.align,u=e.sign,h=e.symbol,p=e.zero,m=e.width,f=e.comma,g=e.precision,v=e.trim,x=e.type;"n"===x?(f=!0,x="g"):qY[x]||(void 0===g&&(g=12),v=!0,x="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var y="$"===h?i:"#"===h&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",b="$"===h?a:/[%p]/.test(x)?l:"",w=qY[x],j=/[defgprs%]/.test(x);function N(e){var i,a,l,h=y,N=b;if("c"===x)N=w(e)+N,e="";else{var _=(e=+e)<0||1/e<0;if(e=isNaN(e)?d:w(Math.abs(e),g),v&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),_&&0===+e&&"+"!==u&&(_=!1),h=(_?"("===u?u:c:"-"===u||"("===u?"":u)+h,N=("s"===x?QY[8+HY/3]:"")+N+(_&&"("===u?")":""),j)for(i=-1,a=e.length;++i<a;)if(48>(l=e.charCodeAt(i))||l>57){N=(46===l?s+e.slice(i+1):e.slice(i))+N,e=e.slice(0,i);break}}f&&!p&&(e=r(e,1/0));var S=h.length+e.length+N.length,C=S<m?new Array(m-S+1).join(t):"";switch(f&&p&&(e=r(C+e,C.length?m-N.length:1/0),C=""),n){case"<":e=h+e+N+C;break;case"=":e=h+C+e+N;break;case"^":e=C.slice(0,S=C.length>>1)+h+e+N+C.slice(S);break;default:e=C+h+e+N}return o(e)}return g=void 0===g?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),N.toString=function(){return e+""},N}return{format:u,formatPrefix:function(e,t){var n=u(((e=GY(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(zY(t)/3))),i=Math.pow(10,-r),a=QY[8+r/3];return function(e){return n(i*e)+a}}}}function tJ(e,t,n,r){var i,a=_$(e,t,n);switch((r=GY(null==r?",f":r)).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(zY(t)/3)))-zY(Math.abs(e)))}(a,s))||(r.precision=i),JY(r,s);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,zY(t)-zY(e))+1}(a,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-zY(Math.abs(e)))}(a))||(r.precision=i-2*("%"===r.type))}return YY(r)}function nJ(e){var t=e.domain;return e.ticks=function(e){var n=t();return j$(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return tJ(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,a=t(),s=0,o=a.length-1,l=a[s],c=a[o],d=10;for(c<l&&(i=l,l=c,c=i,i=s,s=o,o=i);d-- >0;){if((i=N$(l,c,n))===r)return a[s]=l,a[o]=c,t(a);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return e},e}function rJ(){var e=FY();return e.copy=function(){return LY(e,rJ())},k$.apply(e,arguments),nJ(e)}function iJ(e,t){var n,r=0,i=(e=e.slice()).length-1,a=e[r],s=e[i];return s<a&&(n=r,r=i,i=n,n=a,a=s,s=n),e[r]=t.floor(a),e[i]=t.ceil(s),e}function aJ(e){return Math.log(e)}function sJ(e){return Math.exp(e)}function oJ(e){return-Math.log(-e)}function lJ(e){return-Math.exp(-e)}function cJ(e){return isFinite(e)?+("1e"+e):e<0?0:e}function dJ(e){return(t,n)=>-e(-t,n)}function uJ(e){const t=e(aJ,sJ),n=t.domain;let r,i,a=10;function s(){return r=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(a),i=function(e){return 10===e?cJ:e===Math.E?Math.exp:t=>Math.pow(e,t)}(a),n()[0]<0?(r=dJ(r),i=dJ(i),e(oJ,lJ)):e(aJ,sJ),t}return t.base=function(e){return arguments.length?(a=+e,s()):a},t.domain=function(e){return arguments.length?(n(e),s()):n()},t.ticks=e=>{const t=n();let s=t[0],o=t[t.length-1];const l=o<s;l&&([s,o]=[o,s]);let c,d,u=r(s),h=r(o);const p=null==e?10:+e;let m=[];if(!(a%1)&&h-u<p){if(u=Math.floor(u),h=Math.ceil(h),s>0){for(;u<=h;++u)for(c=1;c<a;++c)if(d=u<0?c/i(-u):c*i(u),!(d<s)){if(d>o)break;m.push(d)}}else for(;u<=h;++u)for(c=a-1;c>=1;--c)if(d=u>0?c/i(-u):c*i(u),!(d<s)){if(d>o)break;m.push(d)}2*m.length<p&&(m=j$(s,o,p))}else m=j$(u,h,Math.min(h-u,p)).map(i);return l?m.reverse():m},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===a?"s":","),"function"!=typeof n&&(a%1||null!=(n=GY(n)).precision||(n.trim=!0),n=YY(n)),e===1/0)return n;const s=Math.max(1,a*e/t.ticks().length);return e=>{let t=e/i(Math.round(r(e)));return t*a<a-.5&&(t*=a),t<=s?n(e):""}},t.nice=()=>n(iJ(n(),{floor:e=>i(Math.floor(r(e))),ceil:e=>i(Math.ceil(r(e)))})),t}function hJ(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function pJ(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function mJ(e){var t=1,n=e(hJ(t),pJ(t));return n.constant=function(n){return arguments.length?e(hJ(t=+n),pJ(t)):t},nJ(n)}function fJ(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function gJ(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function vJ(e){return e<0?-e*e:e*e}function xJ(e){var t=e(OY,OY),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(OY,OY):.5===n?e(gJ,vJ):e(fJ(n),fJ(1/n)):n},nJ(t)}function yJ(){var e=xJ(BY());return e.copy=function(){return LY(e,yJ()).exponent(e.exponent())},k$.apply(e,arguments),e}function bJ(e){return Math.sign(e)*e*e}$Y=eJ({thousands:",",grouping:[3],currency:["$",""]}),YY=$Y.format,JY=$Y.formatPrefix;const wJ=new Date,jJ=new Date;function NJ(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=t=>(e(t=new Date(+t)),t),i.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),i.round=e=>{const t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),i.range=(n,r,a)=>{const s=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return s;let o;do{s.push(o=new Date(+n)),t(n,a),e(n)}while(o<n&&n<r);return s},i.filter=n=>NJ(t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},(e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}),n&&(i.count=(t,r)=>(wJ.setTime(+t),jJ.setTime(+r),e(wJ),e(jJ),Math.floor(n(wJ,jJ))),i.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?t=>r(t)%e===0:t=>i.count(0,t)%e===0):i:null)),i}const _J=NJ(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);_J.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?NJ(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):_J:null),_J.range;const SJ=1e3,CJ=6e4,AJ=36e5,MJ=864e5,EJ=6048e5,kJ=2592e6,TJ=31536e6,PJ=NJ(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*SJ)},(e,t)=>(t-e)/SJ,e=>e.getUTCSeconds());PJ.range;const OJ=NJ(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*SJ)},(e,t)=>{e.setTime(+e+t*CJ)},(e,t)=>(t-e)/CJ,e=>e.getMinutes());OJ.range;const RJ=NJ(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*CJ)},(e,t)=>(t-e)/CJ,e=>e.getUTCMinutes());RJ.range;const IJ=NJ(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*SJ-e.getMinutes()*CJ)},(e,t)=>{e.setTime(+e+t*AJ)},(e,t)=>(t-e)/AJ,e=>e.getHours());IJ.range;const DJ=NJ(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*AJ)},(e,t)=>(t-e)/AJ,e=>e.getUTCHours());DJ.range;const LJ=NJ(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*CJ)/MJ,e=>e.getDate()-1);LJ.range;const BJ=NJ(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/MJ,e=>e.getUTCDate()-1);BJ.range;const FJ=NJ(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/MJ,e=>Math.floor(e/MJ));function UJ(e){return NJ(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*CJ)/EJ)}FJ.range;const zJ=UJ(0),HJ=UJ(1),VJ=UJ(2),GJ=UJ(3),WJ=UJ(4),KJ=UJ(5),qJ=UJ(6);function XJ(e){return NJ(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/EJ)}zJ.range,HJ.range,VJ.range,GJ.range,WJ.range,KJ.range,qJ.range;const $J=XJ(0),YJ=XJ(1),JJ=XJ(2),ZJ=XJ(3),QJ=XJ(4),eZ=XJ(5),tZ=XJ(6);$J.range,YJ.range,JJ.range,ZJ.range,QJ.range,eZ.range,tZ.range;const nZ=NJ(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth());nZ.range;const rZ=NJ(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth());rZ.range;const iZ=NJ(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());iZ.every=e=>isFinite(e=Math.floor(e))&&e>0?NJ(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}):null,iZ.range;const aZ=NJ(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());function sZ(e,t,n,r,i,a){const s=[[PJ,1,SJ],[PJ,5,5e3],[PJ,15,15e3],[PJ,30,3e4],[a,1,CJ],[a,5,3e5],[a,15,9e5],[a,30,18e5],[i,1,AJ],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,MJ],[r,2,1728e5],[n,1,EJ],[t,1,kJ],[t,3,7776e6],[e,1,TJ]];function o(t,n,r){const i=Math.abs(n-t)/r,a=d$(([,,e])=>e).right(s,i);if(a===s.length)return e.every(_$(t/TJ,n/TJ,r));if(0===a)return _J.every(Math.max(_$(t,n,r),1));const[o,l]=s[i/s[a-1][2]<s[a][2]/i?a-1:a];return o.every(l)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const i=n&&"function"==typeof n.range?n:o(e,t,n),a=i?i.range(e,+t+1):[];return r?a.reverse():a},o]}aZ.every=e=>isFinite(e=Math.floor(e))&&e>0?NJ(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null,aZ.range;const[oZ,lZ]=sZ(aZ,rZ,$J,FJ,DJ,RJ),[cZ,dZ]=sZ(iZ,nZ,zJ,LJ,IJ,OJ);function uZ(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function hZ(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function pZ(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var mZ,fZ,gZ,vZ={"-":"",_:" ",0:"0"},xZ=/^\s*\d+/,yZ=/^%/,bZ=/[\\^$*+?|[\]().{}]/g;function wZ(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function jZ(e){return e.replace(bZ,"\\$&")}function NZ(e){return new RegExp("^(?:"+e.map(jZ).join("|")+")","i")}function _Z(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function SZ(e,t,n){var r=xZ.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function CZ(e,t,n){var r=xZ.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function AZ(e,t,n){var r=xZ.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function MZ(e,t,n){var r=xZ.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function EZ(e,t,n){var r=xZ.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function kZ(e,t,n){var r=xZ.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function TZ(e,t,n){var r=xZ.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function PZ(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function OZ(e,t,n){var r=xZ.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function RZ(e,t,n){var r=xZ.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function IZ(e,t,n){var r=xZ.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function DZ(e,t,n){var r=xZ.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function LZ(e,t,n){var r=xZ.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function BZ(e,t,n){var r=xZ.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function FZ(e,t,n){var r=xZ.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function UZ(e,t,n){var r=xZ.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function zZ(e,t,n){var r=xZ.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function HZ(e,t,n){var r=yZ.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function VZ(e,t,n){var r=xZ.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function GZ(e,t,n){var r=xZ.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function WZ(e,t){return wZ(e.getDate(),t,2)}function KZ(e,t){return wZ(e.getHours(),t,2)}function qZ(e,t){return wZ(e.getHours()%12||12,t,2)}function XZ(e,t){return wZ(1+LJ.count(iZ(e),e),t,3)}function $Z(e,t){return wZ(e.getMilliseconds(),t,3)}function YZ(e,t){return $Z(e,t)+"000"}function JZ(e,t){return wZ(e.getMonth()+1,t,2)}function ZZ(e,t){return wZ(e.getMinutes(),t,2)}function QZ(e,t){return wZ(e.getSeconds(),t,2)}function eQ(e){var t=e.getDay();return 0===t?7:t}function tQ(e,t){return wZ(zJ.count(iZ(e)-1,e),t,2)}function nQ(e){var t=e.getDay();return t>=4||0===t?WJ(e):WJ.ceil(e)}function rQ(e,t){return e=nQ(e),wZ(WJ.count(iZ(e),e)+(4===iZ(e).getDay()),t,2)}function iQ(e){return e.getDay()}function aQ(e,t){return wZ(HJ.count(iZ(e)-1,e),t,2)}function sQ(e,t){return wZ(e.getFullYear()%100,t,2)}function oQ(e,t){return wZ((e=nQ(e)).getFullYear()%100,t,2)}function lQ(e,t){return wZ(e.getFullYear()%1e4,t,4)}function cQ(e,t){var n=e.getDay();return wZ((e=n>=4||0===n?WJ(e):WJ.ceil(e)).getFullYear()%1e4,t,4)}function dQ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+wZ(t/60|0,"0",2)+wZ(t%60,"0",2)}function uQ(e,t){return wZ(e.getUTCDate(),t,2)}function hQ(e,t){return wZ(e.getUTCHours(),t,2)}function pQ(e,t){return wZ(e.getUTCHours()%12||12,t,2)}function mQ(e,t){return wZ(1+BJ.count(aZ(e),e),t,3)}function fQ(e,t){return wZ(e.getUTCMilliseconds(),t,3)}function gQ(e,t){return fQ(e,t)+"000"}function vQ(e,t){return wZ(e.getUTCMonth()+1,t,2)}function xQ(e,t){return wZ(e.getUTCMinutes(),t,2)}function yQ(e,t){return wZ(e.getUTCSeconds(),t,2)}function bQ(e){var t=e.getUTCDay();return 0===t?7:t}function wQ(e,t){return wZ($J.count(aZ(e)-1,e),t,2)}function jQ(e){var t=e.getUTCDay();return t>=4||0===t?QJ(e):QJ.ceil(e)}function NQ(e,t){return e=jQ(e),wZ(QJ.count(aZ(e),e)+(4===aZ(e).getUTCDay()),t,2)}function _Q(e){return e.getUTCDay()}function SQ(e,t){return wZ(YJ.count(aZ(e)-1,e),t,2)}function CQ(e,t){return wZ(e.getUTCFullYear()%100,t,2)}function AQ(e,t){return wZ((e=jQ(e)).getUTCFullYear()%100,t,2)}function MQ(e,t){return wZ(e.getUTCFullYear()%1e4,t,4)}function EQ(e,t){var n=e.getUTCDay();return wZ((e=n>=4||0===n?QJ(e):QJ.ceil(e)).getUTCFullYear()%1e4,t,4)}function kQ(){return"+0000"}function TQ(){return"%"}function PQ(e){return+e}function OQ(e){return Math.floor(+e/1e3)}function RQ(e){return new Date(e)}function IQ(e){return e instanceof Date?+e:+new Date(+e)}function DQ(e,t,n,r,i,a,s,o,l,c){var d=FY(),u=d.invert,h=d.domain,p=c(".%L"),m=c(":%S"),f=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),x=c("%b %d"),y=c("%B"),b=c("%Y");function w(e){return(l(e)<e?p:o(e)<e?m:s(e)<e?f:a(e)<e?g:r(e)<e?i(e)<e?v:x:n(e)<e?y:b)(e)}return d.invert=function(e){return new Date(u(e))},d.domain=function(e){return arguments.length?h(Array.from(e,IQ)):h().map(RQ)},d.ticks=function(t){var n=h();return e(n[0],n[n.length-1],null==t?10:t)},d.tickFormat=function(e,t){return null==t?w:c(t)},d.nice=function(e){var n=h();return e&&"function"==typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?h(iJ(n,e)):d},d.copy=function(){return LY(d,DQ(e,t,n,r,i,a,s,o,l,c))},d}function LQ(){var e,t,n,r,i,a=0,s=1,o=OY,l=!1;function c(t){return null==t||isNaN(t=+t)?i:o(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function d(e){return function(t){var n,r;return arguments.length?([n,r]=t,o=e(n,r),c):[o(0),o(1)]}}return c.domain=function(i){return arguments.length?([a,s]=i,e=r(a=+a),t=r(s=+s),n=e===t?0:1/(t-e),c):[a,s]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(o=e,c):o},c.range=d(EY),c.rangeRound=d(kY),c.unknown=function(e){return arguments.length?(i=e,c):i},function(i){return r=i,e=i(a),t=i(s),n=e===t?0:1/(t-e),c}}function BQ(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function FQ(){var e=xJ(LQ());return e.copy=function(){return BQ(e,FQ()).exponent(e.exponent())},T$.apply(e,arguments)}function UQ(){var e,t,n,r,i,a,s,o=0,l=.5,c=1,d=1,u=OY,h=!1;function p(e){return isNaN(e=+e)?s:(e=.5+((e=+a(e))-t)*(d*e<d*t?r:i),u(h?Math.max(0,Math.min(1,e)):e))}function m(e){return function(t){var n,r,i;return arguments.length?([n,r,i]=t,u=function(e,t){void 0===t&&(t=e,e=EY);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return a[t](e-t)}}(e,[n,r,i]),p):[u(0),u(.5),u(1)]}}return p.domain=function(s){return arguments.length?([o,l,c]=s,e=a(o=+o),t=a(l=+l),n=a(c=+c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),d=t<e?-1:1,p):[o,l,c]},p.clamp=function(e){return arguments.length?(h=!!e,p):h},p.interpolator=function(e){return arguments.length?(u=e,p):u},p.range=m(EY),p.rangeRound=m(kY),p.unknown=function(e){return arguments.length?(s=e,p):s},function(s){return a=s,e=s(o),t=s(l),n=s(c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),d=t<e?-1:1,p}}function zQ(){var e=xJ(UQ());return e.copy=function(){return BQ(e,zQ()).exponent(e.exponent())},T$.apply(e,arguments)}!function(e){mZ=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,s=e.shortDays,o=e.months,l=e.shortMonths,c=NZ(i),d=_Z(i),u=NZ(a),h=_Z(a),p=NZ(s),m=_Z(s),f=NZ(o),g=_Z(o),v=NZ(l),x=_Z(l),y={a:function(e){return s[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:WZ,e:WZ,f:YZ,g:oQ,G:cQ,H:KZ,I:qZ,j:XZ,L:$Z,m:JZ,M:ZZ,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:PQ,s:OQ,S:QZ,u:eQ,U:tQ,V:rQ,w:iQ,W:aQ,x:null,X:null,y:sQ,Y:lQ,Z:dQ,"%":TQ},b={a:function(e){return s[e.getUTCDay()]},A:function(e){return a[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:uQ,e:uQ,f:gQ,g:AQ,G:EQ,H:hQ,I:pQ,j:mQ,L:fQ,m:vQ,M:xQ,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:PQ,s:OQ,S:yQ,u:bQ,U:wQ,V:NQ,w:_Q,W:SQ,x:null,X:null,y:CQ,Y:MQ,Z:kQ,"%":TQ},w={a:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=m.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=u.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=x.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return _(e,t,n,r)},d:IZ,e:IZ,f:zZ,g:TZ,G:kZ,H:LZ,I:LZ,j:DZ,L:UZ,m:RZ,M:BZ,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=d.get(r[0].toLowerCase()),n+r[0].length):-1},q:OZ,Q:VZ,s:GZ,S:FZ,u:CZ,U:AZ,V:MZ,w:SZ,W:EZ,x:function(e,t,r){return _(e,n,t,r)},X:function(e,t,n){return _(e,r,t,n)},y:TZ,Y:kZ,Z:PZ,"%":HZ};function j(e,t){return function(n){var r,i,a,s=[],o=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++o<c;)37===e.charCodeAt(o)&&(s.push(e.slice(l,o)),null!=(i=vZ[r=e.charAt(++o)])?r=e.charAt(++o):i="e"===r?" ":"0",(a=t[r])&&(r=a(n,i)),s.push(r),l=o+1);return s.push(e.slice(l,o)),s.join("")}}function N(e,t){return function(n){var r,i,a=pZ(1900,void 0,1);if(_(a,e,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(t&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=hZ(pZ(a.y,0,1))).getUTCDay(),r=i>4||0===i?YJ.ceil(r):YJ(r),r=BJ.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=uZ(pZ(a.y,0,1))).getDay(),r=i>4||0===i?HJ.ceil(r):HJ(r),r=LJ.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?hZ(pZ(a.y,0,1)).getUTCDay():uZ(pZ(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,hZ(a)):uZ(a)}}function _(e,t,n,r){for(var i,a,s=0,o=t.length,l=n.length;s<o;){if(r>=l)return-1;if(37===(i=t.charCodeAt(s++))){if(i=t.charAt(s++),!(a=w[i in vZ?t.charAt(s++):i])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return y.x=j(n,y),y.X=j(r,y),y.c=j(t,y),b.x=j(n,b),b.X=j(r,b),b.c=j(t,b),{format:function(e){var t=j(e+="",y);return t.toString=function(){return e},t},parse:function(e){var t=N(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=j(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=N(e+="",!0);return t.toString=function(){return e},t}}}(e),fZ=mZ.format,mZ.parse,gZ=mZ.utcFormat,mZ.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const HQ=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:R$,scaleDiverging:function e(){var t=nJ(UQ()(OY));return t.copy=function(){return BQ(t,e())},T$.apply(t,arguments)},scaleDivergingLog:function e(){var t=uJ(UQ()).domain([.1,1,10]);return t.copy=function(){return BQ(t,e()).base(t.base())},T$.apply(t,arguments)},scaleDivergingPow:zQ,scaleDivergingSqrt:function(){return zQ.apply(null,arguments).exponent(.5)},scaleDivergingSymlog:function e(){var t=mJ(UQ());return t.copy=function(){return BQ(t,e()).constant(t.constant())},T$.apply(t,arguments)},scaleIdentity:function e(t){var n;function r(e){return null==e||isNaN(e=+e)?n:e}return r.invert=r,r.domain=r.range=function(e){return arguments.length?(t=Array.from(e,TY),r):t.slice()},r.unknown=function(e){return arguments.length?(n=e,r):n},r.copy=function(){return e(t).unknown(n)},t=arguments.length?Array.from(t,TY):[0,1],nJ(r)},scaleImplicit:P$,scaleLinear:rJ,scaleLog:function e(){const t=uJ(BY()).domain([1,10]);return t.copy=()=>LY(t,e()).base(t.base()),k$.apply(t,arguments),t},scaleOrdinal:O$,scalePoint:D$,scalePow:yJ,scaleQuantile:function e(){var t,n=[],r=[],i=[];function a(){var e=0,t=Math.max(1,r.length);for(i=new Array(t-1);++e<t;)i[e-1]=E$(n,e/t);return s}function s(e){return null==e||isNaN(e=+e)?t:r[p$(i,e)]}return s.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[t>0?i[t-1]:n[0],t<i.length?i[t]:n[n.length-1]]},s.domain=function(e){if(!arguments.length)return n.slice();n=[];for(let t of e)null==t||isNaN(t=+t)||n.push(t);return n.sort(l$),a()},s.range=function(e){return arguments.length?(r=Array.from(e),a()):r.slice()},s.unknown=function(e){return arguments.length?(t=e,s):t},s.quantiles=function(){return i.slice()},s.copy=function(){return e().domain(n).range(r).unknown(t)},k$.apply(s,arguments)},scaleQuantize:function e(){var t,n=0,r=1,i=1,a=[.5],s=[0,1];function o(e){return null!=e&&e<=e?s[p$(a,e,0,i)]:t}function l(){var e=-1;for(a=new Array(i);++e<i;)a[e]=((e+1)*r-(e-i)*n)/(i+1);return o}return o.domain=function(e){return arguments.length?([n,r]=e,n=+n,r=+r,l()):[n,r]},o.range=function(e){return arguments.length?(i=(s=Array.from(e)).length-1,l()):s.slice()},o.invertExtent=function(e){var t=s.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,a[0]]:t>=i?[a[i-1],r]:[a[t-1],a[t]]},o.unknown=function(e){return arguments.length?(t=e,o):o},o.thresholds=function(){return a.slice()},o.copy=function(){return e().domain([n,r]).range(s).unknown(t)},k$.apply(nJ(o),arguments)},scaleRadial:function e(){var t,n=FY(),r=[0,1],i=!1;function a(e){var r=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(n(e));return isNaN(r)?t:i?Math.round(r):r}return a.invert=function(e){return n.invert(bJ(e))},a.domain=function(e){return arguments.length?(n.domain(e),a):n.domain()},a.range=function(e){return arguments.length?(n.range((r=Array.from(e,TY)).map(bJ)),a):r.slice()},a.rangeRound=function(e){return a.range(e).round(!0)},a.round=function(e){return arguments.length?(i=!!e,a):i},a.clamp=function(e){return arguments.length?(n.clamp(e),a):n.clamp()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.copy=function(){return e(n.domain(),r).round(i).clamp(n.clamp()).unknown(t)},k$.apply(a,arguments),nJ(a)},scaleSequential:function e(){var t=nJ(LQ()(OY));return t.copy=function(){return BQ(t,e())},T$.apply(t,arguments)},scaleSequentialLog:function e(){var t=uJ(LQ()).domain([1,10]);return t.copy=function(){return BQ(t,e()).base(t.base())},T$.apply(t,arguments)},scaleSequentialPow:FQ,scaleSequentialQuantile:function e(){var t=[],n=OY;function r(e){if(null!=e&&!isNaN(e=+e))return n((p$(t,e,1)-1)/(t.length-1))}return r.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(l$),r},r.interpolator=function(e){return arguments.length?(n=e,r):n},r.range=function(){return t.map((e,r)=>n(r/(t.length-1)))},r.quantiles=function(e){return Array.from({length:e+1},(n,r)=>function(e,t){if((n=(e=Float64Array.from(function*(e){for(let t of e)null!=t&&(t=+t)>=t&&(yield t)}(e))).length)&&!isNaN(t=+t)){if(t<=0||n<2)return C$(e);if(t>=1)return S$(e);var n,r=(n-1)*t,i=Math.floor(r),a=S$(A$(e,i).subarray(0,i+1));return a+(C$(e.subarray(i+1))-a)*(r-i)}}(t,r/e))},r.copy=function(){return e(n).domain(t)},T$.apply(r,arguments)},scaleSequentialSqrt:function(){return FQ.apply(null,arguments).exponent(.5)},scaleSequentialSymlog:function e(){var t=mJ(LQ());return t.copy=function(){return BQ(t,e()).constant(t.constant())},T$.apply(t,arguments)},scaleSqrt:function(){return yJ.apply(null,arguments).exponent(.5)},scaleSymlog:function e(){var t=mJ(BY());return t.copy=function(){return LY(t,e()).constant(t.constant())},k$.apply(t,arguments)},scaleThreshold:function e(){var t,n=[.5],r=[0,1],i=1;function a(e){return null!=e&&e<=e?r[p$(n,e,0,i)]:t}return a.domain=function(e){return arguments.length?(n=Array.from(e),i=Math.min(n.length,r.length-1),a):n.slice()},a.range=function(e){return arguments.length?(r=Array.from(e),i=Math.min(n.length,r.length-1),a):r.slice()},a.invertExtent=function(e){var t=r.indexOf(e);return[n[t-1],n[t]]},a.unknown=function(e){return arguments.length?(t=e,a):t},a.copy=function(){return e().domain(n).range(r).unknown(t)},k$.apply(a,arguments)},scaleTime:function(){return k$.apply(DQ(cZ,dZ,iZ,nZ,zJ,LJ,IJ,OJ,PJ,fZ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},scaleUtc:function(){return k$.apply(DQ(oZ,lZ,aZ,rZ,$J,BJ,DJ,RJ,PJ,gZ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},tickFormat:tJ},Symbol.toStringTag,{value:"Module"}));var VQ=ZD;var GQ=function(e,t,n){for(var r=-1,i=e.length;++r<i;){var a=e[r],s=t(a);if(null!=s&&(void 0===o?s==s&&!VQ(s):n(s,o)))var o=s,l=a}return l};var WQ=function(e,t){return e>t},KQ=GQ,qQ=WQ,XQ=jW;const $Q=ie(function(e){return e&&e.length?KQ(e,XQ,qQ):void 0});var YQ=function(e,t){return e<t},JQ=GQ,ZQ=YQ,QQ=jW;const e0=ie(function(e){return e&&e.length?JQ(e,QQ,ZQ):void 0});var t0=OB,n0=OW,r0=AK,i0=PD;var a0=yK,s0=function(e,t){return(i0(e)?t0:r0)(e,n0(t))};const o0=ie(function(e,t){return a0(s0(e,t),1)});var l0=YG;const c0=ie(function(e,t){return l0(e,t)});var d0,u0=1e9,h0=!0,p0="[DecimalError] ",m0=p0+"Invalid argument: ",f0=p0+"Exponent out of range: ",g0=Math.floor,v0=Math.pow,x0=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,y0=1e7,b0=9007199254740991,w0=g0(1286742750677284.5),j0={};function N0(e,t){var n,r,i,a,s,o,l,c,d=e.constructor,u=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),h0?O0(t,u):t;if(l=e.d,c=t.d,s=e.e,i=t.e,l=l.slice(),a=s-i){for(a<0?(r=l,a=-a,o=c.length):(r=c,i=s,o=l.length),a>(o=(s=Math.ceil(u/7))>o?s+1:o+1)&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for((o=l.length)-(a=c.length)<0&&(a=o,r=c,c=l,l=r),n=0;a;)n=(l[--a]=l[a]+c[a]+n)/y0|0,l[a]%=y0;for(n&&(l.unshift(n),++i),o=l.length;0==l[--o];)l.pop();return t.d=l,t.e=i,h0?O0(t,u):t}function _0(e,t,n){if(e!==~~e||e<t||e>n)throw Error(m0+e)}function S0(e){var t,n,r,i=e.length-1,a="",s=e[0];if(i>0){for(a+=s,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(a+=k0(n)),a+=r;(n=7-(r=(s=e[t])+"").length)&&(a+=k0(n))}else if(0===s)return"0";for(;s%10==0;)s/=10;return a+s}j0.absoluteValue=j0.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},j0.comparedTo=j0.cmp=function(e){var t,n,r,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(t=0,n=(r=a.d.length)<(i=e.d.length)?r:i;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1},j0.decimalPlaces=j0.dp=function(){var e=this,t=e.d.length-1,n=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},j0.dividedBy=j0.div=function(e){return C0(this,new this.constructor(e))},j0.dividedToIntegerBy=j0.idiv=function(e){var t=this.constructor;return O0(C0(this,new t(e),0,1),t.precision)},j0.equals=j0.eq=function(e){return!this.cmp(e)},j0.exponent=function(){return M0(this)},j0.greaterThan=j0.gt=function(e){return this.cmp(e)>0},j0.greaterThanOrEqualTo=j0.gte=function(e){return this.cmp(e)>=0},j0.isInteger=j0.isint=function(){return this.e>this.d.length-2},j0.isNegative=j0.isneg=function(){return this.s<0},j0.isPositive=j0.ispos=function(){return this.s>0},j0.isZero=function(){return 0===this.s},j0.lessThan=j0.lt=function(e){return this.cmp(e)<0},j0.lessThanOrEqualTo=j0.lte=function(e){return this.cmp(e)<1},j0.logarithm=j0.log=function(e){var t,n=this,r=n.constructor,i=r.precision,a=i+5;if(void 0===e)e=new r(10);else if((e=new r(e)).s<1||e.eq(d0))throw Error(p0+"NaN");if(n.s<1)throw Error(p0+(n.s?"NaN":"-Infinity"));return n.eq(d0)?new r(0):(h0=!1,t=C0(T0(n,a),T0(e,a),a),h0=!0,O0(t,i))},j0.minus=j0.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?R0(t,e):N0(t,(e.s=-e.s,e))},j0.modulo=j0.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(!(e=new r(e)).s)throw Error(p0+"NaN");return n.s?(h0=!1,t=C0(n,e,0,1).times(e),h0=!0,n.minus(t)):O0(new r(n),i)},j0.naturalExponential=j0.exp=function(){return A0(this)},j0.naturalLogarithm=j0.ln=function(){return T0(this)},j0.negated=j0.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},j0.plus=j0.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?N0(t,e):R0(t,(e.s=-e.s,e))},j0.precision=j0.sd=function(e){var t,n,r,i=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(m0+e);if(t=M0(i)+1,n=7*(r=i.d.length-1)+1,r=i.d[r]){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},j0.squareRoot=j0.sqrt=function(){var e,t,n,r,i,a,s,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(p0+"NaN")}for(e=M0(o),h0=!1,0==(i=Math.sqrt(+o))||i==1/0?(((t=S0(o.d)).length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=g0((e+1)/2)-(e<0||e%2),r=new l(t=i==1/0?"5e"+e:(t=i.toExponential()).slice(0,t.indexOf("e")+1)+e)):r=new l(i.toString()),i=s=(n=l.precision)+3;;)if(r=(a=r).plus(C0(o,a,s+2)).times(.5),S0(a.d).slice(0,s)===(t=S0(r.d)).slice(0,s)){if(t=t.slice(s-3,s+1),i==s&&"4999"==t){if(O0(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if("9999"!=t)break;s+=4}return h0=!0,O0(r,n)},j0.times=j0.mul=function(e){var t,n,r,i,a,s,o,l,c,d=this,u=d.constructor,h=d.d,p=(e=new u(e)).d;if(!d.s||!e.s)return new u(0);for(e.s*=d.s,n=d.e+e.e,(l=h.length)<(c=p.length)&&(a=h,h=p,p=a,s=l,l=c,c=s),a=[],r=s=l+c;r--;)a.push(0);for(r=c;--r>=0;){for(t=0,i=l+r;i>r;)o=a[i]+p[r]*h[i-r-1]+t,a[i--]=o%y0|0,t=o/y0|0;a[i]=(a[i]+t)%y0|0}for(;!a[--s];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,h0?O0(e,u.precision):e},j0.toDecimalPlaces=j0.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(_0(e,0,u0),void 0===t?t=r.rounding:_0(t,0,8),O0(n,e+M0(n)+1,t))},j0.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=I0(r,!0):(_0(e,0,u0),void 0===t?t=i.rounding:_0(t,0,8),n=I0(r=O0(new i(r),e+1,t),!0,e+1)),n},j0.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return void 0===e?I0(i):(_0(e,0,u0),void 0===t?t=a.rounding:_0(t,0,8),n=I0((r=O0(new a(i),e+M0(i)+1,t)).abs(),!1,e+M0(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)},j0.toInteger=j0.toint=function(){var e=this,t=e.constructor;return O0(new t(e),M0(e)+1,t.rounding)},j0.toNumber=function(){return+this},j0.toPower=j0.pow=function(e){var t,n,r,i,a,s,o=this,l=o.constructor,c=+(e=new l(e));if(!e.s)return new l(d0);if(!(o=new l(o)).s){if(e.s<1)throw Error(p0+"Infinity");return o}if(o.eq(d0))return o;if(r=l.precision,e.eq(d0))return O0(o,r);if(s=(t=e.e)>=(n=e.d.length-1),a=o.s,s){if((n=c<0?-c:c)<=b0){for(i=new l(d0),t=Math.ceil(r/7+4),h0=!1;n%2&&D0((i=i.times(o)).d,t),0!==(n=g0(n/2));)D0((o=o.times(o)).d,t);return h0=!0,e.s<0?new l(d0).div(i):O0(i,r)}}else if(a<0)throw Error(p0+"NaN");return a=a<0&&1&e.d[Math.max(t,n)]?-1:1,o.s=1,h0=!1,i=e.times(T0(o,r+12)),h0=!0,(i=A0(i)).s=a,i},j0.toPrecision=function(e,t){var n,r,i=this,a=i.constructor;return void 0===e?r=I0(i,(n=M0(i))<=a.toExpNeg||n>=a.toExpPos):(_0(e,1,u0),void 0===t?t=a.rounding:_0(t,0,8),r=I0(i=O0(new a(i),e,t),e<=(n=M0(i))||n<=a.toExpNeg,e)),r},j0.toSignificantDigits=j0.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(_0(e,1,u0),void 0===t?t=n.rounding:_0(t,0,8)),O0(new n(this),e,t)},j0.toString=j0.valueOf=j0.val=j0.toJSON=j0[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=M0(e),n=e.constructor;return I0(e,t<=n.toExpNeg||t>=n.toExpPos)};var C0=function(){function e(e,t){var n,r=0,i=e.length;for(e=e.slice();i--;)n=e[i]*t+r,e[i]=n%y0|0,r=n/y0|0;return r&&e.unshift(r),e}function t(e,t,n,r){var i,a;if(n!=r)a=n>r?1:-1;else for(i=a=0;i<n;i++)if(e[i]!=t[i]){a=e[i]>t[i]?1:-1;break}return a}function n(e,t,n){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=r*y0+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,a,s){var o,l,c,d,u,h,p,m,f,g,v,x,y,b,w,j,N,_,S=r.constructor,C=r.s==i.s?1:-1,A=r.d,M=i.d;if(!r.s)return new S(r);if(!i.s)throw Error(p0+"Division by zero");for(l=r.e-i.e,N=M.length,w=A.length,m=(p=new S(C)).d=[],c=0;M[c]==(A[c]||0);)++c;if(M[c]>(A[c]||0)&&--l,(x=null==a?a=S.precision:s?a+(M0(r)-M0(i))+1:a)<0)return new S(0);if(x=x/7+2|0,c=0,1==N)for(d=0,M=M[0],x++;(c<w||d)&&x--;c++)y=d*y0+(A[c]||0),m[c]=y/M|0,d=y%M|0;else{for((d=y0/(M[0]+1)|0)>1&&(M=e(M,d),A=e(A,d),N=M.length,w=A.length),b=N,g=(f=A.slice(0,N)).length;g<N;)f[g++]=0;(_=M.slice()).unshift(0),j=M[0],M[1]>=y0/2&&++j;do{d=0,(o=t(M,f,N,g))<0?(v=f[0],N!=g&&(v=v*y0+(f[1]||0)),(d=v/j|0)>1?(d>=y0&&(d=y0-1),1==(o=t(u=e(M,d),f,h=u.length,g=f.length))&&(d--,n(u,N<h?_:M,h))):(0==d&&(o=d=1),u=M.slice()),(h=u.length)<g&&u.unshift(0),n(f,u,g),-1==o&&(o=t(M,f,N,g=f.length))<1&&(d++,n(f,N<g?_:M,g)),g=f.length):0===o&&(d++,f=[0]),m[c++]=d,o&&f[0]?f[g++]=A[b]||0:(f=[A[b]],g=1)}while((b++<w||void 0!==f[0])&&x--)}return m[0]||m.shift(),p.e=l,O0(p,s?a+M0(p)+1:a)}}();function A0(e,t){var n,r,i,a,s,o=0,l=0,c=e.constructor,d=c.precision;if(M0(e)>16)throw Error(f0+M0(e));if(!e.s)return new c(d0);for(h0=!1,s=d,a=new c(.03125);e.abs().gte(.1);)e=e.times(a),l+=5;for(s+=Math.log(v0(2,l))/Math.LN10*2+5|0,n=r=i=new c(d0),c.precision=s;;){if(r=O0(r.times(e),s),n=n.times(++o),S0((a=i.plus(C0(r,n,s))).d).slice(0,s)===S0(i.d).slice(0,s)){for(;l--;)i=O0(i.times(i),s);return c.precision=d,null==t?(h0=!0,O0(i,d)):i}i=a}}function M0(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function E0(e,t,n){if(t>e.LN10.sd())throw h0=!0,n&&(e.precision=n),Error(p0+"LN10 precision limit exceeded");return O0(new e(e.LN10),t)}function k0(e){for(var t="";e--;)t+="0";return t}function T0(e,t){var n,r,i,a,s,o,l,c,d,u=1,h=e,p=h.d,m=h.constructor,f=m.precision;if(h.s<1)throw Error(p0+(h.s?"NaN":"-Infinity"));if(h.eq(d0))return new m(0);if(null==t?(h0=!1,c=f):c=t,h.eq(10))return null==t&&(h0=!0),E0(m,c);if(c+=10,m.precision=c,r=(n=S0(p)).charAt(0),a=M0(h),!(Math.abs(a)<15e14))return l=E0(m,c+2,f).times(a+""),h=T0(new m(r+"."+n.slice(1)),c-10).plus(l),m.precision=f,null==t?(h0=!0,O0(h,f)):h;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=S0((h=h.times(e)).d)).charAt(0),u++;for(a=M0(h),r>1?(h=new m("0."+n),a++):h=new m(r+"."+n.slice(1)),o=s=h=C0(h.minus(d0),h.plus(d0),c),d=O0(h.times(h),c),i=3;;){if(s=O0(s.times(d),c),S0((l=o.plus(C0(s,new m(i),c))).d).slice(0,c)===S0(o.d).slice(0,c))return o=o.times(2),0!==a&&(o=o.plus(E0(m,c+2,f).times(a+""))),o=C0(o,new m(u),c),m.precision=f,null==t?(h0=!0,O0(o,f)):o;o=l,i+=2}}function P0(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);)++r;for(i=t.length;48===t.charCodeAt(i-1);)--i;if(t=t.slice(r,i)){if(i-=r,n=n-r-1,e.e=g0(n/7),e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),h0&&(e.e>w0||e.e<-w0))throw Error(f0+n)}else e.s=0,e.e=0,e.d=[0];return e}function O0(e,t,n){var r,i,a,s,o,l,c,d,u=e.d;for(s=1,a=u[0];a>=10;a/=10)s++;if((r=t-s)<0)r+=7,i=t,c=u[d=0];else{if((d=Math.ceil((r+1)/7))>=(a=u.length))return e;for(c=a=u[d],s=1;a>=10;a/=10)s++;i=(r%=7)-7+s}if(void 0!==n&&(o=c/(a=v0(10,s-i-1))%10|0,l=t<0||void 0!==u[d+1]||c%a,l=n<4?(o||l)&&(0==n||n==(e.s<0?3:2)):o>5||5==o&&(4==n||l||6==n&&(r>0?i>0?c/v0(10,s-i):0:u[d-1])%10&1||n==(e.s<0?8:7))),t<1||!u[0])return l?(a=M0(e),u.length=1,t=t-a-1,u[0]=v0(10,(7-t%7)%7),e.e=g0(-t/7)||0):(u.length=1,u[0]=e.e=e.s=0),e;if(0==r?(u.length=d,a=1,d--):(u.length=d+1,a=v0(10,7-r),u[d]=i>0?(c/v0(10,s-i)%v0(10,i)|0)*a:0),l)for(;;){if(0==d){(u[0]+=a)==y0&&(u[0]=1,++e.e);break}if(u[d]+=a,u[d]!=y0)break;u[d--]=0,a=1}for(r=u.length;0===u[--r];)u.pop();if(h0&&(e.e>w0||e.e<-w0))throw Error(f0+M0(e));return e}function R0(e,t){var n,r,i,a,s,o,l,c,d,u,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),h0?O0(t,p):t;if(l=e.d,u=t.d,r=t.e,c=e.e,l=l.slice(),s=c-r){for((d=s<0)?(n=l,s=-s,o=u.length):(n=u,r=c,o=l.length),s>(i=Math.max(Math.ceil(p/7),o)+2)&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for((d=(i=l.length)<(o=u.length))&&(o=i),i=0;i<o;i++)if(l[i]!=u[i]){d=l[i]<u[i];break}s=0}for(d&&(n=l,l=u,u=n,t.s=-t.s),o=l.length,i=u.length-o;i>0;--i)l[o++]=0;for(i=u.length;i>s;){if(l[--i]<u[i]){for(a=i;a&&0===l[--a];)l[a]=y0-1;--l[a],l[i]+=y0}l[i]-=u[i]}for(;0===l[--o];)l.pop();for(;0===l[0];l.shift())--r;return l[0]?(t.d=l,t.e=r,h0?O0(t,p):t):new h(0)}function I0(e,t,n){var r,i=M0(e),a=S0(e.d),s=a.length;return t?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+k0(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+k0(-i-1)+a,n&&(r=n-s)>0&&(a+=k0(r))):i>=s?(a+=k0(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+k0(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=k0(r))),e.s<0?"-"+a:a}function D0(e,t){if(e.length>t)return e.length=t,!0}function L0(e){if(!e||"object"!=typeof e)throw Error(p0+"Object expected");var t,n,r,i=["precision",1,u0,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if(void 0!==(r=e[n=i[t]])){if(!(g0(r)===r&&r>=i[t+1]&&r<=i[t+2]))throw Error(m0+n+": "+r);this[n]=r}if(void 0!==(r=e[n="LN10"])){if(r!=Math.LN10)throw Error(m0+n+": "+r);this[n]=new this(r)}return this}var B0=function e(t){var n,r,i;function a(e){var t=this;if(!(t instanceof a))return new a(e);if(t.constructor=a,e instanceof a)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"==typeof e){if(0*e!=0)throw Error(m0+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):P0(t,e.toString())}if("string"!=typeof e)throw Error(m0+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!x0.test(e))throw Error(m0+e);P0(t,e)}if(a.prototype=j0,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=e,a.config=a.set=L0,void 0===t&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return a.config(t),a}({precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"});d0=new B0(1);const F0=B0;function U0(e){return function(e){if(Array.isArray(e))return z0(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return z0(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z0(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z0(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var H0=function(e){return e},V0={},G0=function(e){return e===V0},W0=function(e){return function t(){return 0===arguments.length||1===arguments.length&&G0(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},K0=function e(t,n){return 1===t?n:W0(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=i.filter(function(e){return e!==V0}).length;return s>=t?n.apply(void 0,i):e(t-s,W0(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=i.map(function(e){return G0(e)?t.shift():e});return n.apply(void 0,U0(a).concat(t))}))})},q0=function(e){return K0(e.length,e)},X0=function(e,t){for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},$0=q0(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(e){return t[e]}).map(e)}),Y0=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},J0=function(e){var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t&&i.every(function(e,n){return e===t[n]})?n:(t=i,n=e.apply(void 0,i))}};var Z0=q0(function(e,t,n){var r=+e;return r+n*(+t-r)}),Q0=q0(function(e,t,n){var r=t-+e;return(n-e)/(r=r||1/0)}),e1=q0(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const t1={rangeStep:function(e,t,n){for(var r=new F0(e),i=0,a=[];r.lt(t)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a},getDigitCount:function(e){return 0===e?1:Math.floor(new F0(e).abs().log(10).toNumber())+1},interpolateNumber:Z0,uninterpolateNumber:Q0,uninterpolateTruncation:e1};function n1(e){return function(e){if(Array.isArray(e))return a1(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||i1(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r1(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(c$e){i=!0,a=c$e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}(e,t)||i1(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i1(e,t){if(e){if("string"==typeof e)return a1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a1(e,t):void 0}}function a1(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s1(e){var t=r1(e,2),n=t[0],r=t[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function o1(e,t,n){if(e.lte(0))return new F0(0);var r=t1.getDigitCount(e.toNumber()),i=new F0(10).pow(r),a=e.div(i),s=1!==r?.05:.1,o=new F0(Math.ceil(a.div(s).toNumber())).add(n).mul(s).mul(i);return t?o:new F0(Math.ceil(o))}function l1(e,t,n){var r=1,i=new F0(e);if(!i.isint()&&n){var a=Math.abs(e);a<1?(r=new F0(10).pow(t1.getDigitCount(e)-1),i=new F0(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new F0(Math.floor(e)))}else 0===e?i=new F0(Math.floor((t-1)/2)):n||(i=new F0(Math.floor(e)));var s=Math.floor((t-1)/2),o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return H0;var r=t.reverse(),i=r[0],a=r.slice(1);return function(){return a.reduce(function(e,t){return t(e)},i.apply(void 0,arguments))}}($0(function(e){return i.add(new F0(e-s).mul(r)).toNumber()}),X0);return o(0,t)}function c1(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new F0(0),tickMin:new F0(0),tickMax:new F0(0)};var a,s=o1(new F0(t).sub(e).div(n-1),r,i);a=e<=0&&t>=0?new F0(0):(a=new F0(e).add(t).div(2)).sub(new F0(a).mod(s));var o=Math.ceil(a.sub(e).div(s).toNumber()),l=Math.ceil(new F0(t).sub(a).div(s).toNumber()),c=o+l+1;return c>n?c1(e,t,n,r,i+1):(c<n&&(l=t>0?l+(n-c):l,o=t>0?o:o+(n-c)),{step:s,tickMin:a.sub(new F0(o).mul(s)),tickMax:a.add(new F0(l).mul(s))})}var d1=J0(function(e){var t=r1(e,2),n=t[0],r=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=Math.max(i,2),o=r1(s1([n,r]),2),l=o[0],c=o[1];if(l===-1/0||c===1/0){var d=c===1/0?[l].concat(n1(X0(0,i-1).map(function(){return 1/0}))):[].concat(n1(X0(0,i-1).map(function(){return-1/0})),[c]);return n>r?Y0(d):d}if(l===c)return l1(l,i,a);var u=c1(l,c,s,a),h=u.step,p=u.tickMin,m=u.tickMax,f=t1.rangeStep(p,m.add(new F0(.1).mul(h)),h);return n>r?Y0(f):f}),u1=J0(function(e,t){var n=r1(e,2),r=n[0],i=n[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=r1(s1([r,i]),2),o=s[0],l=s[1];if(o===-1/0||l===1/0)return[r,i];if(o===l)return[o];var c=Math.max(t,2),d=o1(new F0(l).sub(o).div(c-1),a,0),u=[].concat(n1(t1.rangeStep(new F0(o),new F0(l).sub(new F0(.99).mul(d)),d)),[l]);return r>i?Y0(u):u});function h1(e,t){throw new Error("Invariant failed")}var p1=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function m1(e){return(m1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f1(){return f1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f1.apply(this,arguments)}function g1(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t);else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v1(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v1(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x1(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function y1(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S1(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function b1(e,t,n){return t=j1(t),function(e,t){if(t&&("object"===m1(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,w1()?Reflect.construct(t,n||[],j1(e).constructor):t.apply(e,n))}function w1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(w1=function(){return!!e})()}function j1(e){return(j1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N1(e,t){return(N1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _1(e,t,n){return(t=S1(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S1(e){var t=function(e,t){if("object"!=m1(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=m1(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==m1(t)?t:t+""}var C1=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),b1(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N1(e,t)}(e,Ge.Component),y1(e,[{key:"render",value:function(){var e=this.props,t=e.offset,n=e.layout,r=e.width,i=e.dataKey,a=e.data,s=e.dataPointFormatter,o=e.xAxis,l=e.yAxis,c=x1(e,p1),d=dU(c,!1);"x"===this.props.direction&&"number"!==o.type&&h1();var u=a.map(function(e){var a=s(e,i),c=a.x,u=a.y,h=a.value,p=a.errorVal;if(!p)return null;var m,f,g=[];if(Array.isArray(p)){var v=g1(p,2);m=v[0],f=v[1]}else m=f=p;if("vertical"===n){var x=o.scale,y=u+t,b=y+r,w=y-r,j=x(h-m),N=x(h+f);g.push({x1:N,y1:b,x2:N,y2:w}),g.push({x1:j,y1:y,x2:N,y2:y}),g.push({x1:j,y1:b,x2:j,y2:w})}else if("horizontal"===n){var _=l.scale,S=c+t,C=S-r,A=S+r,M=_(h-m),E=_(h+f);g.push({x1:C,y1:E,x2:A,y2:E}),g.push({x1:S,y1:M,x2:S,y2:E}),g.push({x1:C,y1:M,x2:A,y2:M})}return Ge.createElement(wU,f1({className:"recharts-errorBar",key:"bar-".concat(g.map(function(e){return"".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))},d),g.map(function(e){return Ge.createElement("line",f1({},e,{key:"line-".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))}))});return Ge.createElement(wU,{className:"recharts-errorBars"},u)}}])}();function A1(e){return(A1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function E1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M1(Object(n),!0).forEach(function(t){k1(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M1(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function k1(e,t,n){return t=function(e){var t=function(e,t){if("object"!=A1(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=A1(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==A1(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}_1(C1,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),_1(C1,"displayName","ErrorBar");var T1=function(e){var t=e.children,n=e.formattedGraphicalItems,r=e.legendWidth,i=e.legendContent,a=sU(t,pK);if(!a)return null;var s,o=pK.defaultProps,l=void 0!==o?E1(E1({},o),a.props):{};return s=a.props&&a.props.payload?a.props&&a.props.payload:"children"===i?(n||[]).reduce(function(e,t){var n=t.item,r=t.props,i=r.sectors||r.data||[];return e.concat(i.map(function(e){return{type:a.props.iconType||n.props.legendType,value:e.name,color:e.fill,payload:e}}))},[]):(n||[]).map(function(e){var t=e.item,n=t.type.defaultProps,r=void 0!==n?E1(E1({},n),t.props):{},i=r.dataKey,a=r.name,s=r.legendType;return{inactive:r.hide,dataKey:i,type:l.iconType||s||"square",color:U1(t),value:a||i,payload:r}}),E1(E1(E1({},l),pK.getWithHeight(a,r)),{},{payload:s,item:a})};function P1(e){return(P1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O1(e){return function(e){if(Array.isArray(e))return R1(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return R1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R1(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R1(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function D1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I1(Object(n),!0).forEach(function(t){L1(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I1(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function L1(e,t,n){return t=function(e){var t=function(e,t){if("object"!=P1(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=P1(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==P1(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B1(e,t,n){return tF(e)||tF(t)?n:RF(t)?eF(e,t,n):cL(t)?t(e):n}function F1(e,t,n,r){var i=o0(e,function(e){return B1(e,t)});if("number"===n){var a=i.filter(function(e){return OF(e)||parseFloat(e)});return a.length?[e0(a),$Q(a)]:[1/0,-1/0]}return(r?i.filter(function(e){return!tF(e)}):i).map(function(e){return RF(e)||e instanceof Date?e:""})}var U1=function(e){var t,n,r=e.type.displayName,i=null!==(t=e.type)&&void 0!==t&&t.defaultProps?D1(D1({},e.type.defaultProps),e.props):e.props,a=i.stroke,s=i.fill;switch(r){case"Line":n=a;break;case"Area":case"Radar":n=a&&"none"!==a?a:s;break;default:n=s}return n},z1=function(e,t,n,r,i){var a=aU(t.props.children,C1).filter(function(e){return function(e,t,n){return!!tF(t)||("horizontal"===e?"yAxis"===t:"vertical"===e||"x"===n?"xAxis"===t:"y"!==n||"yAxis"===t)}(r,i,e.props.direction)});if(a&&a.length){var s=a.map(function(e){return e.props.dataKey});return e.reduce(function(e,t){var r=B1(t,n);if(tF(r))return e;var i=Array.isArray(r)?[e0(r),$Q(r)]:[r,r],a=s.reduce(function(e,n){var r=B1(t,n,0),a=i[0]-Math.abs(Array.isArray(r)?r[0]:r),s=i[1]+Math.abs(Array.isArray(r)?r[1]:r);return[Math.min(a,e[0]),Math.max(s,e[1])]},[1/0,-1/0]);return[Math.min(a[0],e[0]),Math.max(a[1],e[1])]},[1/0,-1/0])}return null},H1=function(e,t,n,r,i){var a=t.map(function(t){var a=t.props.dataKey;return"number"===n&&a&&z1(e,t,a,r)||F1(e,a,n,i)});if("number"===n)return a.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]);var s={};return a.reduce(function(e,t){for(var n=0,r=t.length;n<r;n++)s[t[n]]||(s[t[n]]=!0,e.push(t[n]));return e},[])},V1=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},G1=function(e,t,n,r){if(r)return e.map(function(e){return e.coordinate});var i,a,s=e.map(function(e){return e.coordinate===t&&(i=!0),e.coordinate===n&&(a=!0),e.coordinate});return i||s.push(t),a||s.push(n),s},W1=function(e,t,n){if(!e)return null;var r=e.scale,i=e.duplicateDomain,a=e.type,s=e.range,o="scaleBand"===e.realScaleType?r.bandwidth()/2:2,l=(t||n)&&"category"===a&&r.bandwidth?r.bandwidth()/o:0;return l="angleAxis"===e.axisType&&(null==s?void 0:s.length)>=2?2*TF(s[0]-s[1])*l:l,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map(function(e){var t=i?i.indexOf(e):e;return{coordinate:r(t)+l,value:e,offset:l}}).filter(function(e){return!kF(e.coordinate)}):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(e,t){return{coordinate:r(e)+l,value:e,index:t,offset:l}}):r.ticks&&!n?r.ticks(e.tickCount).map(function(e){return{coordinate:r(e)+l,value:e,offset:l}}):r.domain().map(function(e,t){return{coordinate:r(e)+l,value:i?i[e]:e,index:t,offset:l}})},K1=new WeakMap,q1=function(e,t){if("function"!=typeof t)return e;K1.has(e)||K1.set(e,new WeakMap);var n=K1.get(e);if(n.has(t))return n.get(t);var r=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return n.set(t,r),r},X1=function(e,t,n){var r=e.scale,i=e.type,a=e.layout,s=e.axisType;if("auto"===r)return"radial"===a&&"radiusAxis"===s?{scale:R$(),realScaleType:"band"}:"radial"===a&&"angleAxis"===s?{scale:rJ(),realScaleType:"linear"}:"category"===i&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!n)?{scale:D$(),realScaleType:"point"}:"category"===i?{scale:R$(),realScaleType:"band"}:{scale:rJ(),realScaleType:"linear"};if(aF(r)){var o="scale".concat(qU(r));return{scale:(HQ[o]||D$)(),realScaleType:HQ[o]?o:"point"}}return cL(r)?{scale:r}:{scale:D$(),realScaleType:"point"}},$1=1e-4,Y1=function(e){var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-$1,a=Math.max(r[0],r[1])+$1,s=e(t[0]),o=e(t[n-1]);(s<i||s>a||o<i||o>a)&&e.domain([t[0],t[n-1]])}},J1={sign:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,a=0,s=0;s<t;++s){var o=kF(e[s][n][1])?e[s][n][0]:e[s][n][1];o>=0?(e[s][n][0]=i,e[s][n][1]=i+o,i=e[s][n][1]):(e[s][n][0]=a,e[s][n][1]=a+o,a=e[s][n][1])}},expand:function(e,t){if((r=e.length)>0){for(var n,r,i,a=0,s=e[0].length;a<s;++a){for(i=n=0;n<r;++n)i+=e[n][a][1]||0;if(i)for(n=0;n<r;++n)e[n][a][1]/=i}Xz(e,t)}},none:Xz,silhouette:function(e,t){if((n=e.length)>0){for(var n,r=0,i=e[t[0]],a=i.length;r<a;++r){for(var s=0,o=0;s<n;++s)o+=e[s][r][1]||0;i[r][1]+=i[r][0]=-o/2}Xz(e,t)}},wiggle:function(e,t){if((i=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,i,a=0,s=1;s<r;++s){for(var o=0,l=0,c=0;o<i;++o){for(var d=e[t[o]],u=d[s][1]||0,h=(u-(d[s-1][1]||0))/2,p=0;p<o;++p){var m=e[t[p]];h+=(m[s][1]||0)-(m[s-1][1]||0)}l+=u,c+=h*u}n[s-1][1]+=n[s-1][0]=a,l&&(a-=c/l)}n[s-1][1]+=n[s-1][0]=a,Xz(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,a=0;a<t;++a){var s=kF(e[a][n][1])?e[a][n][0]:e[a][n][1];s>=0?(e[a][n][0]=i,e[a][n][1]=i+s,i=e[a][n][1]):(e[a][n][0]=0,e[a][n][1]=0)}}},Z1=function(e,t,n){var r=t.map(function(e){return e.props.dataKey}),i=J1[n],a=function(){var e=XU([]),t=$z,n=Xz,r=Yz;function i(i){var a,s,o=Array.from(e.apply(this,arguments),Jz),l=o.length,c=-1;for(const e of i)for(a=0,++c;a<l;++a)(o[a][c]=[0,+r(e,o[a].key,c,i)]).data=e;for(a=0,s=oz(t(o));a<l;++a)o[s[a]].index=a;return n(o,s),o}return i.keys=function(t){return arguments.length?(e="function"==typeof t?t:XU(Array.from(t)),i):e},i.value=function(e){return arguments.length?(r="function"==typeof e?e:XU(+e),i):r},i.order=function(e){return arguments.length?(t=null==e?$z:"function"==typeof e?e:XU(Array.from(e)),i):t},i.offset=function(e){return arguments.length?(n=null==e?Xz:e,i):n},i}().keys(r).value(function(e,t){return+B1(e,t,0)}).order($z).offset(i);return a(e)},Q1=function(e,t){var n=t.realScaleType,r=t.type,i=t.tickCount,a=t.originalDomain,s=t.allowDecimals,o=n||t.scale;if("auto"!==o&&"linear"!==o)return null;if(i&&"number"===r&&a&&("auto"===a[0]||"auto"===a[1])){var l=e.domain();if(!l.length)return null;var c=d1(l,i,s);return e.domain([e0(c),$Q(c)]),{niceTicks:c}}if(i&&"number"===r){var d=e.domain();return{niceTicks:u1(d,i,s)}}return null};function e2(e){var t=e.axis,n=e.ticks,r=e.bandSize,i=e.entry,a=e.index,s=e.dataKey;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!tF(i[t.dataKey])){var o=UF(n,"value",i[t.dataKey]);if(o)return o.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var l=B1(i,tF(s)?t.dataKey:s);return tF(l)?null:t.scale(l)}var t2=function(e){var t=e.axis,n=e.ticks,r=e.offset,i=e.bandSize,a=e.entry,s=e.index;if("category"===t.type)return n[s]?n[s].coordinate+r:null;var o=B1(a,t.dataKey,t.domain[s]);return tF(o)?null:t.scale(o)-i/2+r},n2=function(e,t,n){return Object.keys(e).reduce(function(r,i){var a=e[i].stackedData.reduce(function(e,r){var i=r.slice(t,n+1).reduce(function(e,t){return[e0(t.concat([e[0]]).filter(OF)),$Q(t.concat([e[1]]).filter(OF))]},[1/0,-1/0]);return[Math.min(e[0],i[0]),Math.max(e[1],i[1])]},[1/0,-1/0]);return[Math.min(a[0],r[0]),Math.max(a[1],r[1])]},[1/0,-1/0]).map(function(e){return e===1/0||e===-1/0?0:e})},r2=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,i2=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,a2=function(e,t,n){if(cL(e))return e(t,n);if(!Array.isArray(e))return t;var r=[];if(OF(e[0]))r[0]=n?e[0]:Math.min(e[0],t[0]);else if(r2.test(e[0])){var i=+r2.exec(e[0])[1];r[0]=t[0]-i}else cL(e[0])?r[0]=e[0](t[0]):r[0]=t[0];if(OF(e[1]))r[1]=n?e[1]:Math.max(e[1],t[1]);else if(i2.test(e[1])){var a=+i2.exec(e[1])[1];r[1]=t[1]+a}else cL(e[1])?r[1]=e[1](t[1]):r[1]=t[1];return r},s2=function(e,t,n){if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=cq(t,function(e){return e.coordinate}),a=1/0,s=1,o=i.length;s<o;s++){var l=i[s],c=i[s-1];a=Math.min((l.coordinate||0)-(c.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0},o2=function(e,t,n){return e&&e.length?c0(e,eF(n,"type.defaultProps.domain"))?t:e:t},l2=function(e,t){var n=e.type.defaultProps?D1(D1({},e.type.defaultProps),e.props):e.props,r=n.dataKey,i=n.name,a=n.unit,s=n.formatter,o=n.tooltipType,l=n.chartType,c=n.hide;return D1(D1({},dU(e,!1)),{},{dataKey:r,unit:a,formatter:s,name:i||r,color:U1(e),value:B1(t,r),type:o,payload:t,chartType:l,hide:c})};function c2(e){return(c2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d2(Object(n),!0).forEach(function(t){h2(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d2(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function h2(e,t,n){return t=function(e){var t=function(e,t){if("object"!=c2(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=c2(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c2(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p2(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t);else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m2(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m2(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f2=Math.PI/180,g2=function(e){return 180*e/Math.PI},v2=function(e,t,n,r){return{x:e+Math.cos(-f2*r)*n,y:t+Math.sin(-f2*r)*n}},x2=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(t-(n.top||0)-(n.bottom||0)))/2},y2=function(e,t){var n=e.x,r=e.y,i=t.cx,a=t.cy,s=function(e,t){var n=e.x,r=e.y,i=t.x,a=t.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(r-a,2))}({x:n,y:r},{x:i,y:a});if(s<=0)return{radius:s};var o=(n-i)/s,l=Math.acos(o);return r>a&&(l=2*Math.PI-l),{radius:s,angle:g2(l),angleInRadian:l}},b2=function(e,t){var n=t.startAngle,r=t.endAngle,i=Math.floor(n/360),a=Math.floor(r/360);return e+360*Math.min(i,a)},w2=function(e,t){var n=e.x,r=e.y,i=y2({x:n,y:r},t),a=i.radius,s=i.angle,o=t.innerRadius,l=t.outerRadius;if(a<o||a>l)return!1;if(0===a)return!0;var c,d=function(e){var t=e.startAngle,n=e.endAngle,r=Math.floor(t/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:t-360*a,endAngle:n-360*a}}(t),u=d.startAngle,h=d.endAngle,p=s;if(u<=h){for(;p>h;)p-=360;for(;p<u;)p+=360;c=p>=u&&p<=h}else{for(;p>u;)p-=360;for(;p<h;)p+=360;c=p>=h&&p<=u}return c?u2(u2({},t),{},{radius:a,angle:b2(p,t)}):null},j2=function(e){return Ve.isValidElement(e)||cL(e)||"boolean"==typeof e?"":e.className};function N2(e){return(N2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _2=["offset"];function S2(e){return function(e){if(Array.isArray(e))return C2(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return C2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C2(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C2(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A2(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function M2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function E2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M2(Object(n),!0).forEach(function(t){k2(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M2(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function k2(e,t,n){return t=function(e){var t=function(e,t){if("object"!=N2(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=N2(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==N2(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T2(){return T2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T2.apply(this,arguments)}var P2=function(e,t,n){var r,i,a=e.position,s=e.viewBox,o=e.offset,l=e.className,c=s,d=c.cx,u=c.cy,h=c.innerRadius,p=c.outerRadius,m=c.startAngle,f=c.endAngle,g=c.clockWise,v=(h+p)/2,x=function(e,t){return TF(t-e)*Math.min(Math.abs(t-e),360)}(m,f),y=x>=0?1:-1;"insideStart"===a?(r=m+y*o,i=g):"insideEnd"===a?(r=f-y*o,i=!g):"end"===a&&(r=f+y*o,i=g),i=x<=0?i:!i;var b=v2(d,u,v,r),w=v2(d,u,v,r+359*(i?1:-1)),j="M".concat(b.x,",").concat(b.y,"\n    A").concat(v,",").concat(v,",0,1,").concat(i?0:1,",\n    ").concat(w.x,",").concat(w.y),N=tF(e.id)?DF("recharts-radial-line-"):e.id;return Ge.createElement("text",T2({},n,{dominantBaseline:"central",className:Up("recharts-radial-bar-label",l)}),Ge.createElement("defs",null,Ge.createElement("path",{id:N,d:j})),Ge.createElement("textPath",{xlinkHref:"#".concat(N)},t))};function O2(e){var t,n=e.offset,r=E2({offset:void 0===n?5:n},A2(e,_2)),i=r.viewBox,a=r.position,s=r.value,o=r.children,l=r.content,c=r.className,d=void 0===c?"":c,u=r.textBreakAll;if(!i||tF(s)&&tF(o)&&!Ve.isValidElement(l)&&!cL(l))return null;if(Ve.isValidElement(l))return Ve.cloneElement(l,r);if(cL(l)){if(t=Ve.createElement(l,r),Ve.isValidElement(t))return t}else t=function(e){var t=e.value,n=e.formatter,r=tF(e.children)?t:e.children;return cL(n)?n(r):r}(r);var h=function(e){return"cx"in e&&OF(e.cx)}(i),p=dU(r,!0);if(h&&("insideStart"===a||"insideEnd"===a||"end"===a))return P2(r,t,p);var m=h?function(e){var t=e.viewBox,n=e.offset,r=e.position,i=t,a=i.cx,s=i.cy,o=i.innerRadius,l=i.outerRadius,c=(i.startAngle+i.endAngle)/2;if("outside"===r){var d=v2(a,s,l+n,c),u=d.x;return{x:u,y:d.y,textAnchor:u>=a?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:a,y:s,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:a,y:s,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:a,y:s,textAnchor:"middle",verticalAnchor:"end"};var h=v2(a,s,(o+l)/2,c);return{x:h.x,y:h.y,textAnchor:"middle",verticalAnchor:"middle"}}(r):function(e){var t=e.viewBox,n=e.parentViewBox,r=e.offset,i=e.position,a=t,s=a.x,o=a.y,l=a.width,c=a.height,d=c>=0?1:-1,u=d*r,h=d>0?"end":"start",p=d>0?"start":"end",m=l>=0?1:-1,f=m*r,g=m>0?"end":"start",v=m>0?"start":"end";if("top"===i)return E2(E2({},{x:s+l/2,y:o-d*r,textAnchor:"middle",verticalAnchor:h}),n?{height:Math.max(o-n.y,0),width:l}:{});if("bottom"===i)return E2(E2({},{x:s+l/2,y:o+c+u,textAnchor:"middle",verticalAnchor:p}),n?{height:Math.max(n.y+n.height-(o+c),0),width:l}:{});if("left"===i){var x={x:s-f,y:o+c/2,textAnchor:g,verticalAnchor:"middle"};return E2(E2({},x),n?{width:Math.max(x.x-n.x,0),height:c}:{})}if("right"===i){var y={x:s+l+f,y:o+c/2,textAnchor:v,verticalAnchor:"middle"};return E2(E2({},y),n?{width:Math.max(n.x+n.width-y.x,0),height:c}:{})}var b=n?{width:l,height:c}:{};return"insideLeft"===i?E2({x:s+f,y:o+c/2,textAnchor:v,verticalAnchor:"middle"},b):"insideRight"===i?E2({x:s+l-f,y:o+c/2,textAnchor:g,verticalAnchor:"middle"},b):"insideTop"===i?E2({x:s+l/2,y:o+u,textAnchor:"middle",verticalAnchor:p},b):"insideBottom"===i?E2({x:s+l/2,y:o+c-u,textAnchor:"middle",verticalAnchor:h},b):"insideTopLeft"===i?E2({x:s+f,y:o+u,textAnchor:v,verticalAnchor:p},b):"insideTopRight"===i?E2({x:s+l-f,y:o+u,textAnchor:g,verticalAnchor:p},b):"insideBottomLeft"===i?E2({x:s+f,y:o+c-u,textAnchor:v,verticalAnchor:h},b):"insideBottomRight"===i?E2({x:s+l-f,y:o+c-u,textAnchor:g,verticalAnchor:h},b):aL(i)&&(OF(i.x)||PF(i.x))&&(OF(i.y)||PF(i.y))?E2({x:s+LF(i.x,l),y:o+LF(i.y,c),textAnchor:"end",verticalAnchor:"end"},b):E2({x:s+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},b)}(r);return Ge.createElement(o$,T2({className:Up("recharts-label",d)},p,m,{breakAll:u}),t)}O2.displayName="Label";var R2=function(e){var t=e.cx,n=e.cy,r=e.angle,i=e.startAngle,a=e.endAngle,s=e.r,o=e.radius,l=e.innerRadius,c=e.outerRadius,d=e.x,u=e.y,h=e.top,p=e.left,m=e.width,f=e.height,g=e.clockWise,v=e.labelViewBox;if(v)return v;if(OF(m)&&OF(f)){if(OF(d)&&OF(u))return{x:d,y:u,width:m,height:f};if(OF(h)&&OF(p))return{x:h,y:p,width:m,height:f}}return OF(d)&&OF(u)?{x:d,y:u,width:0,height:0}:OF(t)&&OF(n)?{cx:t,cy:n,startAngle:i||r||0,endAngle:a||r||0,innerRadius:l||0,outerRadius:c||o||s||0,clockWise:g}:e.viewBox?e.viewBox:{}};O2.parseViewBox=R2,O2.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var r=e.children,i=R2(e),a=aU(r,O2).map(function(e,n){return Ve.cloneElement(e,{viewBox:t||i,key:"label-".concat(n)})});if(!n)return a;var s=function(e,t){return e?!0===e?Ge.createElement(O2,{key:"label-implicit",viewBox:t}):RF(e)?Ge.createElement(O2,{key:"label-implicit",viewBox:t,value:e}):Ve.isValidElement(e)?e.type===O2?Ve.cloneElement(e,{key:"label-implicit",viewBox:t}):Ge.createElement(O2,{key:"label-implicit",content:e,viewBox:t}):cL(e)?Ge.createElement(O2,{key:"label-implicit",content:e,viewBox:t}):aL(e)?Ge.createElement(O2,T2({viewBox:t},e,{key:"label-implicit"})):null:null}(e.label,t||i);return[s].concat(S2(a))};const I2=ie(function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0});function D2(e){return(D2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var L2=["valueAccessor"],B2=["data","dataKey","clockWise","id","textBreakAll"];function F2(e){return function(e){if(Array.isArray(e))return U2(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return U2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U2(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U2(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function z2(){return z2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z2.apply(this,arguments)}function H2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function V2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H2(Object(n),!0).forEach(function(t){G2(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H2(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function G2(e,t,n){return t=function(e){var t=function(e,t){if("object"!=D2(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=D2(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==D2(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W2(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var K2=function(e){return Array.isArray(e.value)?I2(e.value):e.value};function q2(e){var t=e.valueAccessor,n=void 0===t?K2:t,r=W2(e,L2),i=r.data,a=r.dataKey,s=r.clockWise,o=r.id,l=r.textBreakAll,c=W2(r,B2);return i&&i.length?Ge.createElement(wU,{className:"recharts-label-list"},i.map(function(e,t){var r=tF(a)?n(e,t):B1(e&&e.payload,a),i=tF(o)?{}:{id:"".concat(o,"-").concat(t)};return Ge.createElement(O2,z2({},dU(e,!0),c,i,{parentViewBox:e.parentViewBox,value:r,textBreakAll:l,viewBox:O2.parseViewBox(tF(s)?e:V2(V2({},e),{},{clockWise:s})),key:"label-".concat(t),index:t}))})):null}function X2(e){return(X2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $2(){return $2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$2.apply(this,arguments)}function Y2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function J2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y2(Object(n),!0).forEach(function(t){Z2(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y2(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Z2(e,t,n){return t=function(e){var t=function(e,t){if("object"!=X2(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=X2(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==X2(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}q2.displayName="LabelList",q2.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var r=aU(e.children,q2).map(function(e,n){return Ve.cloneElement(e,{data:t,key:"labelList-".concat(n)})});return n?[function(e,t){return e?!0===e?Ge.createElement(q2,{key:"labelList-implicit",data:t}):Ge.isValidElement(e)||cL(e)?Ge.createElement(q2,{key:"labelList-implicit",data:t,content:e}):aL(e)?Ge.createElement(q2,z2({data:t},e,{key:"labelList-implicit"})):null:null}(e.label,t)].concat(F2(r)):r};var Q2=function(e){var t=e.cx,n=e.cy,r=e.radius,i=e.angle,a=e.sign,s=e.isExternal,o=e.cornerRadius,l=e.cornerIsExternal,c=o*(s?1:-1)+r,d=Math.asin(o/c)/f2,u=l?i:i+a*d,h=l?i-a*d:i;return{center:v2(t,n,c,u),circleTangency:v2(t,n,r,u),lineTangency:v2(t,n,c*Math.cos(d*f2),h),theta:d}},e5=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,i=e.outerRadius,a=e.startAngle,s=function(e,t){return TF(t-e)*Math.min(Math.abs(t-e),359.999)}(a,e.endAngle),o=a+s,l=v2(t,n,i,a),c=v2(t,n,i,o),d="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(i,",").concat(i,",0,\n    ").concat(+(Math.abs(s)>180),",").concat(+(a>o),",\n    ").concat(c.x,",").concat(c.y,"\n  ");if(r>0){var u=v2(t,n,r,a),h=v2(t,n,r,o);d+="L ".concat(h.x,",").concat(h.y,"\n            A ").concat(r,",").concat(r,",0,\n            ").concat(+(Math.abs(s)>180),",").concat(+(a<=o),",\n            ").concat(u.x,",").concat(u.y," Z")}else d+="L ".concat(t,",").concat(n," Z");return d},t5={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},n5=function(e){var t=J2(J2({},t5),e),n=t.cx,r=t.cy,i=t.innerRadius,a=t.outerRadius,s=t.cornerRadius,o=t.forceCornerRadius,l=t.cornerIsExternal,c=t.startAngle,d=t.endAngle,u=t.className;if(a<i||c===d)return null;var h,p=Up("recharts-sector",u),m=a-i,f=LF(s,m,0,!0);return h=f>0&&Math.abs(c-d)<360?function(e){var t=e.cx,n=e.cy,r=e.innerRadius,i=e.outerRadius,a=e.cornerRadius,s=e.forceCornerRadius,o=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,d=TF(c-l),u=Q2({cx:t,cy:n,radius:i,angle:l,sign:d,cornerRadius:a,cornerIsExternal:o}),h=u.circleTangency,p=u.lineTangency,m=u.theta,f=Q2({cx:t,cy:n,radius:i,angle:c,sign:-d,cornerRadius:a,cornerIsExternal:o}),g=f.circleTangency,v=f.lineTangency,x=f.theta,y=o?Math.abs(l-c):Math.abs(l-c)-m-x;if(y<0)return s?"M ".concat(p.x,",").concat(p.y,"\n        a").concat(a,",").concat(a,",0,0,1,").concat(2*a,",0\n        a").concat(a,",").concat(a,",0,0,1,").concat(2*-a,",0\n      "):e5({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:c});var b="M ".concat(p.x,",").concat(p.y,"\n    A").concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(h.x,",").concat(h.y,"\n    A").concat(i,",").concat(i,",0,").concat(+(y>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,"\n    A").concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(v.x,",").concat(v.y,"\n  ");if(r>0){var w=Q2({cx:t,cy:n,radius:r,angle:l,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),j=w.circleTangency,N=w.lineTangency,_=w.theta,S=Q2({cx:t,cy:n,radius:r,angle:c,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),C=S.circleTangency,A=S.lineTangency,M=S.theta,E=o?Math.abs(l-c):Math.abs(l-c)-_-M;if(E<0&&0===a)return"".concat(b,"L").concat(t,",").concat(n,"Z");b+="L".concat(A.x,",").concat(A.y,"\n      A").concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(C.x,",").concat(C.y,"\n      A").concat(r,",").concat(r,",0,").concat(+(E>180),",").concat(+(d>0),",").concat(j.x,",").concat(j.y,"\n      A").concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,"Z")}else b+="L".concat(t,",").concat(n,"Z");return b}({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(f,m/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}):e5({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:c,endAngle:d}),Ge.createElement("path",$2({},dU(t,!0),{className:p,d:h,role:"img"}))};function r5(e){return(r5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i5(){return i5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i5.apply(this,arguments)}function a5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s5(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a5(Object(n),!0).forEach(function(t){o5(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a5(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o5(e,t,n){return t=function(e){var t=function(e,t){if("object"!=r5(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=r5(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r5(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l5={curveBasisClosed:function(e){return new Iz(e)},curveBasisOpen:function(e){return new Dz(e)},curveBasis:function(e){return new Rz(e)},curveBumpX:function(e){return new mz(e,!0)},curveBumpY:function(e){return new mz(e,!1)},curveLinearClosed:function(e){return new Lz(e)},curveLinear:cz,curveMonotoneX:function(e){return new Hz(e)},curveMonotoneY:function(e){return new Vz(e)},curveNatural:function(e){return new Wz(e)},curveStep:function(e){return new qz(e,.5)},curveStepAfter:function(e){return new qz(e,1)},curveStepBefore:function(e){return new qz(e,0)}},c5=function(e){return e.x===+e.x&&e.y===+e.y},d5=function(e){return e.x},u5=function(e){return e.y},h5=function(e){var t,n=e.type,r=void 0===n?"linear":n,i=e.points,a=void 0===i?[]:i,s=e.baseLine,o=e.layout,l=e.connectNulls,c=void 0!==l&&l,d=function(e,t){if(cL(e))return e;var n="curve".concat(qU(e));return"curveMonotone"!==n&&"curveBump"!==n||!t?l5[n]||cz:l5["".concat(n).concat("vertical"===t?"Y":"X")]}(r,o),u=c?a.filter(function(e){return c5(e)}):a;if(Array.isArray(s)){var h=c?s.filter(function(e){return c5(e)}):s,p=u.map(function(e,t){return s5(s5({},e),{},{base:h[t]})});return(t="vertical"===o?pz().y(u5).x1(d5).x0(function(e){return e.base.x}):pz().x(d5).y1(u5).y0(function(e){return e.base.y})).defined(c5).curve(d),t(p)}return(t="vertical"===o&&OF(s)?pz().y(u5).x1(d5).x0(s):OF(s)?pz().x(d5).y1(u5).y0(s):hz().x(d5).y(u5)).defined(c5).curve(d),t(u)},p5=function(e){var t=e.className,n=e.points,r=e.path,i=e.pathRef;if(!(n&&n.length||r))return null;var a=n&&n.length?h5(e):r;return Ve.createElement("path",i5({},dU(e,!1),XF(e),{className:Up("recharts-curve",t),d:a,ref:i}))},m5={exports:{}};function f5(){}function g5(){}g5.resetWarningCache=f5;m5.exports=function(){function e(e,t,n,r,i,a){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==a){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:g5,resetWarningCache:f5};return n.PropTypes=n,n}();const v5=ie(m5.exports);var x5=Object.getOwnPropertyNames,y5=Object.getOwnPropertySymbols,b5=Object.prototype.hasOwnProperty;function w5(e,t){return function(n,r,i){return e(n,r,i)&&t(n,r,i)}}function j5(e){return function(t,n,r){if(!t||!n||"object"!=typeof t||"object"!=typeof n)return e(t,n,r);var i=r.cache,a=i.get(t),s=i.get(n);if(a&&s)return a===n&&s===t;i.set(t,n),i.set(n,t);var o=e(t,n,r);return i.delete(t),i.delete(n),o}}function N5(e){return x5(e).concat(y5(e))}var _5=Object.hasOwn||function(e,t){return b5.call(e,t)};function S5(e,t){return e===t||!e&&!t&&e!=e&&t!=t}var C5=Object.getOwnPropertyDescriptor,A5=Object.keys;function M5(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function E5(e,t){return S5(e.getTime(),t.getTime())}function k5(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function T5(e,t){return e===t}function P5(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i,a,s=new Array(r),o=e.entries(),l=0;(i=o.next())&&!i.done;){for(var c=t.entries(),d=!1,u=0;(a=c.next())&&!a.done;)if(s[u])u++;else{var h=i.value,p=a.value;if(n.equals(h[0],p[0],l,u,e,t,n)&&n.equals(h[1],p[1],h[0],p[0],e,t,n)){d=s[u]=!0;break}u++}if(!d)return!1;l++}return!0}var O5=S5;function R5(e,t,n){var r=A5(e),i=r.length;if(A5(t).length!==i)return!1;for(;i-- >0;)if(!z5(e,t,n,r[i]))return!1;return!0}function I5(e,t,n){var r,i,a,s=N5(e),o=s.length;if(N5(t).length!==o)return!1;for(;o-- >0;){if(!z5(e,t,n,r=s[o]))return!1;if(i=C5(e,r),a=C5(t,r),(i||a)&&(!i||!a||i.configurable!==a.configurable||i.enumerable!==a.enumerable||i.writable!==a.writable))return!1}return!0}function D5(e,t){return S5(e.valueOf(),t.valueOf())}function L5(e,t){return e.source===t.source&&e.flags===t.flags}function B5(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var i,a,s=new Array(r),o=e.values();(i=o.next())&&!i.done;){for(var l=t.values(),c=!1,d=0;(a=l.next())&&!a.done;){if(!s[d]&&n.equals(i.value,a.value,i.value,a.value,e,t,n)){c=s[d]=!0;break}d++}if(!c)return!1}return!0}function F5(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function U5(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function z5(e,t,n,r){return!("_owner"!==r&&"__o"!==r&&"__v"!==r||!e.$$typeof&&!t.$$typeof)||_5(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var H5=Array.isArray,V5="function"==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,G5=Object.assign,W5=Object.prototype.toString.call.bind(Object.prototype.toString);function K5(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,i=e.areFunctionsEqual,a=e.areMapsEqual,s=e.areNumbersEqual,o=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,c=e.areRegExpsEqual,d=e.areSetsEqual,u=e.areTypedArraysEqual,h=e.areUrlsEqual,p=e.unknownTagComparators;return function(e,m,f){if(e===m)return!0;if(null==e||null==m)return!1;var g=typeof e;if(g!==typeof m)return!1;if("object"!==g)return"number"===g?s(e,m,f):"function"===g&&i(e,m,f);var v=e.constructor;if(v!==m.constructor)return!1;if(v===Object)return o(e,m,f);if(H5(e))return t(e,m,f);if(null!=V5&&V5(e))return u(e,m,f);if(v===Date)return n(e,m,f);if(v===RegExp)return c(e,m,f);if(v===Map)return a(e,m,f);if(v===Set)return d(e,m,f);var x,y=W5(e);if("[object Date]"===y)return n(e,m,f);if("[object RegExp]"===y)return c(e,m,f);if("[object Map]"===y)return a(e,m,f);if("[object Set]"===y)return d(e,m,f);if("[object Object]"===y)return"function"!=typeof e.then&&"function"!=typeof m.then&&o(e,m,f);if("[object URL]"===y)return h(e,m,f);if("[object Error]"===y)return r(e,m,f);if("[object Arguments]"===y)return o(e,m,f);if("[object Boolean]"===y||"[object Number]"===y||"[object String]"===y)return l(e,m,f);if(p){var b=p[y];if(!b){var w=null!=(x=e)?x[Symbol.toStringTag]:void 0;w&&(b=p[w])}if(b)return b(e,m,f)}return!1}}var q5=X5();function X5(e){void 0===e&&(e={});var t,n=e.circular,r=void 0!==n&&n,i=e.createInternalComparator,a=e.createState,s=e.strict,o=void 0!==s&&s,l=function(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,i={areArraysEqual:r?I5:M5,areDatesEqual:E5,areErrorsEqual:k5,areFunctionsEqual:T5,areMapsEqual:r?w5(P5,I5):P5,areNumbersEqual:O5,areObjectsEqual:r?I5:R5,arePrimitiveWrappersEqual:D5,areRegExpsEqual:L5,areSetsEqual:r?w5(B5,I5):B5,areTypedArraysEqual:r?I5:F5,areUrlsEqual:U5,unknownTagComparators:void 0};if(n&&(i=G5({},i,n(i))),t){var a=j5(i.areArraysEqual),s=j5(i.areMapsEqual),o=j5(i.areObjectsEqual),l=j5(i.areSetsEqual);i=G5({},i,{areArraysEqual:a,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:l})}return i}(e),c=K5(l),d=i?i(c):(t=c,function(e,n,r,i,a,s,o){return t(e,n,o)});return function(e){var t=e.circular,n=e.comparator,r=e.createState,i=e.equals,a=e.strict;if(r)return function(e,s){var o=r(),l=o.cache,c=void 0===l?t?new WeakMap:void 0:l,d=o.meta;return n(e,s,{cache:c,equals:i,meta:d,strict:a})};if(t)return function(e,t){return n(e,t,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var s={cache:void 0,equals:i,meta:void 0,strict:a};return function(e,t){return n(e,t,s)}}({circular:r,comparator:c,createState:a,equals:d,strict:o})}function $5(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1;requestAnimationFrame(function r(i){n<0&&(n=i),i-n>t?(e(i),n=-1):function(e){"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame(e)}(r)})}function Y5(e){return(Y5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J5(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Z5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z5(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z5(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Q5(){var e=function(){return null},t=!1,n=function n(r){if(!t){if(Array.isArray(r)){if(!r.length)return;var i=J5(r),a=i[0],s=i.slice(1);return"number"==typeof a?void $5(n.bind(null,s),a):(n(a),void $5(n.bind(null,s)))}"object"===Y5(r)&&e(r),"function"==typeof r&&r()}};return{stop:function(){t=!0},start:function(e){t=!1,n(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function e3(e){return(e3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function n3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?t3(Object(n),!0).forEach(function(t){r3(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t3(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function r3(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==e3(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!==e3(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===e3(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}X5({strict:!0}),X5({circular:!0}),X5({circular:!0,strict:!0}),X5({createInternalComparator:function(){return S5}}),X5({strict:!0,createInternalComparator:function(){return S5}}),X5({circular:!0,createInternalComparator:function(){return S5}}),X5({circular:!0,createInternalComparator:function(){return S5},strict:!0});var i3=function(e){return e},a3=function(e,t){return Object.keys(t).reduce(function(n,r){return n3(n3({},n),{},r3({},r,e(r,t[r])))},{})},s3=function(e,t,n){return e.map(function(e){return"".concat((r=e,r.replace(/([A-Z])/g,function(e){return"-".concat(e.toLowerCase())}))," ").concat(t,"ms ").concat(n);var r}).join(",")};function o3(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t);else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||c3(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l3(e){return function(e){if(Array.isArray(e))return d3(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c3(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c3(e,t){if(e){if("string"==typeof e)return d3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d3(e,t):void 0}}function d3(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u3=1e-4,h3=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},p3=function(e,t){return e.map(function(e,n){return e*Math.pow(t,n)}).reduce(function(e,t){return e+t})},m3=function(e,t){return function(n){var r=h3(e,t);return p3(r,n)}},f3=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2],s=t[3];if(1===t.length)switch(t[0]){case"linear":r=0,i=0,a=1,s=1;break;case"ease":r=.25,i=.1,a=.25,s=1;break;case"ease-in":r=.42,i=0,a=1,s=1;break;case"ease-out":r=.42,i=0,a=.58,s=1;break;case"ease-in-out":r=0,i=0,a=.58,s=1;break;default:var o=t[0].split("(");if("cubic-bezier"===o[0]&&4===o[1].split(")")[0].split(",").length){var l=o[1].split(")")[0].split(",").map(function(e){return parseFloat(e)}),c=o3(l,4);r=c[0],i=c[1],a=c[2],s=c[3]}}var d,u,h=m3(r,a),p=m3(i,s),m=(d=r,u=a,function(e){var t=h3(d,u),n=[].concat(l3(t.map(function(e,t){return e*t}).slice(1)),[0]);return p3(n,e)}),f=function(e){return e>1?1:e<0?0:e},g=function(e){for(var t=e>1?1:e,n=t,r=0;r<8;++r){var i=h(n)-t,a=m(n);if(Math.abs(i-t)<u3||a<u3)return p(n);n=f(n-i/a)}return p(n)};return g.isStepper=!1,g},g3=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if("string"==typeof r)switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return f3(r);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,n=void 0===t?100:t,r=e.damping,i=void 0===r?8:r,a=e.dt,s=void 0===a?17:a,o=function(e,t,r){var a=r+(-(e-t)*n-r*i)*s/1e3,o=r*s/1e3+e;return Math.abs(o-t)<u3&&Math.abs(a)<u3?[t,0]:[o,a]};return o.isStepper=!0,o.dt=s,o}();default:if("cubic-bezier"===r.split("(")[0])return f3(r)}return"function"==typeof r?r:null};function v3(e){return(v3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x3(e){return function(e){if(Array.isArray(e))return _3(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||N3(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y3(Object(n),!0).forEach(function(t){w3(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y3(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function w3(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==v3(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!==v3(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===v3(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j3(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t);else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||N3(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N3(e,t){if(e){if("string"==typeof e)return _3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_3(e,t):void 0}}function _3(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S3=function(e,t,n){return e+(t-e)*n},C3=function(e){return e.from!==e.to},A3=function e(t,n,r){var i=a3(function(e,n){if(C3(n)){var r=j3(t(n.from,n.to,n.velocity),2),i=r[0],a=r[1];return b3(b3({},n),{},{from:i,velocity:a})}return n},n);return r<1?a3(function(e,t){return C3(t)?b3(b3({},t),{},{velocity:S3(t.velocity,i[e].velocity,r),from:S3(t.from,i[e].from,r)}):t},n):e(t,i,r-1)};const M3=function(e,t,n,r,i){var a,s,o,l,c=(a=e,s=t,[Object.keys(a),Object.keys(s)].reduce(function(e,t){return e.filter(function(e){return t.includes(e)})})),d=c.reduce(function(n,r){return b3(b3({},n),{},w3({},r,[e[r],t[r]]))},{}),u=c.reduce(function(n,r){return b3(b3({},n),{},w3({},r,{from:e[r],velocity:0,to:t[r]}))},{}),h=-1,p=function(){return null};return p=n.isStepper?function(r){o||(o=r);var a=(r-o)/n.dt;u=A3(n,u,a),i(b3(b3(b3({},e),t),a3(function(e,t){return t.from},u))),o=r,Object.values(u).filter(C3).length&&(h=requestAnimationFrame(p))}:function(a){l||(l=a);var s=(a-l)/r,o=a3(function(e,t){return S3.apply(void 0,x3(t).concat([n(s)]))},d);if(i(b3(b3(b3({},e),t),o)),s<1)h=requestAnimationFrame(p);else{var c=a3(function(e,t){return S3.apply(void 0,x3(t).concat([n(1)]))},d);i(b3(b3(b3({},e),t),c))}},function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(h)}}};function E3(e){return(E3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var k3=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function T3(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function P3(e){return function(e){if(Array.isArray(e))return O3(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return O3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O3(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O3(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function R3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function I3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R3(Object(n),!0).forEach(function(t){D3(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R3(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function D3(e,t,n){return(t=B3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L3(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,B3(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function B3(e){var t=function(e,t){if("object"!==E3(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!==E3(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===E3(t)?t:String(t)}function F3(e,t){return(F3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function U3(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(CI){return!1}}();return function(){var n,r=V3(e);if(t){var i=V3(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return z3(this,n)}}function z3(e,t){if(t&&("object"===E3(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return H3(e)}function H3(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V3(e){return(V3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var G3=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F3(e,t)}(t,Ve.PureComponent);var e=U3(t);function t(n,r){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=(i=e.call(this,n,r)).props,s=a.isActive,o=a.attributeName,l=a.from,c=a.to,d=a.steps,u=a.children,h=a.duration;if(i.handleStyleChange=i.handleStyleChange.bind(H3(i)),i.changeStyle=i.changeStyle.bind(H3(i)),!s||h<=0)return i.state={style:{}},"function"==typeof u&&(i.state={style:c}),z3(i);if(d&&d.length)i.state={style:d[0].style};else if(l){if("function"==typeof u)return i.state={style:l},z3(i);i.state={style:o?D3({},o,l):l}}else i.state={style:{}};return i}return L3(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,n=e.canBegin;this.mounted=!0,t&&n&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isActive,r=t.canBegin,i=t.attributeName,a=t.shouldReAnimate,s=t.to,o=t.from,l=this.state.style;if(r)if(n){if(!(q5(e.to,s)&&e.canBegin&&e.isActive)){var c=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var d=c||a?o:e.to;if(this.state&&l){var u={style:i?D3({},i,d):d};(i&&l[i]!==d||!i&&l!==d)&&this.setState(u)}this.runAnimation(I3(I3({},this.props),{},{from:d,begin:0}))}}else{var h={style:i?D3({},i,s):s};this.state&&l&&(i&&l[i]!==s||!i&&l!==s)&&this.setState(h)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"runJSAnimation",value:function(e){var t=this,n=e.from,r=e.to,i=e.duration,a=e.easing,s=e.begin,o=e.onAnimationEnd,l=e.onAnimationStart,c=M3(n,r,g3(a),i,this.changeStyle);this.manager.start([l,s,function(){t.stopJSAnimation=c()},i,o])}},{key:"runStepAnimation",value:function(e){var t=this,n=e.steps,r=e.begin,i=e.onAnimationStart,a=n[0],s=a.style,o=a.duration,l=void 0===o?0:o;return this.manager.start([i].concat(P3(n.reduce(function(e,r,i){if(0===i)return e;var a=r.duration,s=r.easing,o=void 0===s?"ease":s,l=r.style,c=r.properties,d=r.onAnimationEnd,u=i>0?n[i-1]:r,h=c||Object.keys(l);if("function"==typeof o||"spring"===o)return[].concat(P3(e),[t.runJSAnimation.bind(t,{from:u.style,to:l,duration:a,easing:o}),a]);var p=s3(h,a,o),m=I3(I3(I3({},u.style),l),{},{transition:p});return[].concat(P3(e),[m,a,d]).filter(i3)},[s,Math.max(l,r)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=Q5());var t=e.begin,n=e.duration,r=e.attributeName,i=e.to,a=e.easing,s=e.onAnimationStart,o=e.onAnimationEnd,l=e.steps,c=e.children,d=this.manager;if(this.unSubscribe=d.subscribe(this.handleStyleChange),"function"!=typeof a&&"function"!=typeof c&&"spring"!==a)if(l.length>1)this.runStepAnimation(e);else{var u=r?D3({},r,i):i,h=s3(Object.keys(u),n,a);d.start([s,t,I3(I3({},u),{},{transition:h}),n,o])}else this.runJSAnimation(e)}},{key:"render",value:function(){var e=this.props,t=e.children;e.begin;var n=e.duration;e.attributeName,e.easing;var r=e.isActive;e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart;var i=T3(e,k3),a=Ve.Children.count(t),s=this.state.style;if("function"==typeof t)return t(s);if(!r||0===a||n<=0)return t;var o=function(e){var t=e.props,n=t.style,r=void 0===n?{}:n,a=t.className;return Ve.cloneElement(e,I3(I3({},i),{},{style:I3(I3({},r),s),className:a}))};return 1===a?o(Ve.Children.only(t)):Ge.createElement("div",null,Ve.Children.map(t,function(e){return o(e)}))}}]),t}();function W3(){return W3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W3.apply(null,arguments)}function K3(e){return(K3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q3(){return q3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q3.apply(this,arguments)}function X3(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t);else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $3(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $3(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function J3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y3(Object(n),!0).forEach(function(t){Z3(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y3(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Z3(e,t,n){return t=function(e){var t=function(e,t){if("object"!=K3(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=K3(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==K3(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}G3.displayName="Animate",G3.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},G3.propTypes={from:v5.oneOfType([v5.object,v5.string]),to:v5.oneOfType([v5.object,v5.string]),attributeName:v5.string,duration:v5.number,begin:v5.number,easing:v5.oneOfType([v5.string,v5.func]),steps:v5.arrayOf(v5.shape({duration:v5.number.isRequired,style:v5.object.isRequired,easing:v5.oneOfType([v5.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),v5.func]),properties:v5.arrayOf("string"),onAnimationEnd:v5.func})),children:v5.oneOfType([v5.node,v5.func]),isActive:v5.bool,canBegin:v5.bool,onAnimationEnd:v5.func,shouldReAnimate:v5.bool,onAnimationStart:v5.func,onAnimationReStart:v5.func};var Q3=function(e,t,n,r,i){var a,s=Math.min(Math.abs(n)/2,Math.abs(r)/2),o=r>=0?1:-1,l=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0;if(s>0&&i instanceof Array){for(var d=[0,0,0,0],u=0;u<4;u++)d[u]=i[u]>s?s:i[u];a="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(a+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),a+="L ".concat(e+n-l*d[1],",").concat(t),d[1]>0&&(a+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,",\n        ").concat(e+n,",").concat(t+o*d[1])),a+="L ".concat(e+n,",").concat(t+r-o*d[2]),d[2]>0&&(a+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,",\n        ").concat(e+n-l*d[2],",").concat(t+r)),a+="L ".concat(e+l*d[3],",").concat(t+r),d[3]>0&&(a+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+r-o*d[3])),a+="Z"}else if(s>0&&i===+i&&i>0){var h=Math.min(s,i);a="M ".concat(e,",").concat(t+o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(t,"\n            L ").concat(e+n-l*h,",").concat(t,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n,",").concat(t+o*h,"\n            L ").concat(e+n,",").concat(t+r-o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n-l*h,",").concat(t+r,"\n            L ").concat(e+l*h,",").concat(t+r,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+r-o*h," Z")}else a="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return a},e4=function(e,t){if(!e||!t)return!1;var n=e.x,r=e.y,i=t.x,a=t.y,s=t.width,o=t.height;if(Math.abs(s)>0&&Math.abs(o)>0){var l=Math.min(i,i+s),c=Math.max(i,i+s),d=Math.min(a,a+o),u=Math.max(a,a+o);return n>=l&&n<=c&&r>=d&&r<=u}return!1},t4={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},n4=function(e){var t=J3(J3({},t4),e),n=Ve.useRef(),r=X3(Ve.useState(-1),2),i=r[0],a=r[1];Ve.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&a(e)}catch(c$e){}},[]);var s=t.x,o=t.y,l=t.width,c=t.height,d=t.radius,u=t.className,h=t.animationEasing,p=t.animationDuration,m=t.animationBegin,f=t.isAnimationActive,g=t.isUpdateAnimationActive;if(s!==+s||o!==+o||l!==+l||c!==+c||0===l||0===c)return null;var v=Up("recharts-rectangle",u);return g?Ge.createElement(G3,{canBegin:i>0,from:{width:l,height:c,x:s,y:o},to:{width:l,height:c,x:s,y:o},duration:p,animationEasing:h,isActive:g},function(e){var r=e.width,a=e.height,s=e.x,o=e.y;return Ge.createElement(G3,{canBegin:i>0,from:"0px ".concat(-1===i?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:p,isActive:f,easing:h},Ge.createElement("path",q3({},dU(t,!0),{className:v,d:Q3(s,o,r,a,d),ref:n})))}):Ge.createElement("path",q3({},dU(t,!0),{className:v,d:Q3(s,o,l,c,d)}))},r4=["points","className","baseLinePoints","connectNulls"];function i4(){return i4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i4.apply(this,arguments)}function a4(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function s4(e){return function(e){if(Array.isArray(e))return o4(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o4(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o4(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l4=function(e){return e&&e.x===+e.x&&e.y===+e.y},c4=function(e,t){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]];return e.forEach(function(e){l4(e)?t[t.length-1].push(e):t[t.length-1].length>0&&t.push([])}),l4(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t}(e);t&&(n=[n.reduce(function(e,t){return[].concat(s4(e),s4(t))},[])]);var r=n.map(function(e){return e.reduce(function(e,t,n){return"".concat(e).concat(0===n?"M":"L").concat(t.x,",").concat(t.y)},"")}).join("");return 1===n.length?"".concat(r,"Z"):r},d4=function(e){var t=e.points,n=e.className,r=e.baseLinePoints,i=e.connectNulls,a=a4(e,r4);if(!t||!t.length)return null;var s=Up("recharts-polygon",n);if(r&&r.length){var o=a.stroke&&"none"!==a.stroke,l=function(e,t,n){var r=c4(e,n);return"".concat("Z"===r.slice(-1)?r.slice(0,-1):r,"L").concat(c4(t.reverse(),n).slice(1))}(t,r,i);return Ge.createElement("g",{className:s},Ge.createElement("path",i4({},dU(a,!0),{fill:"Z"===l.slice(-1)?a.fill:"none",stroke:"none",d:l})),o?Ge.createElement("path",i4({},dU(a,!0),{fill:"none",d:c4(t,i)})):null,o?Ge.createElement("path",i4({},dU(a,!0),{fill:"none",d:c4(r,i)})):null)}var c=c4(t,i);return Ge.createElement("path",i4({},dU(a,!0),{fill:"Z"===c.slice(-1)?a.fill:"none",className:s,d:c}))};function u4(){return u4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u4.apply(this,arguments)}var h4=function(e){var t=e.cx,n=e.cy,r=e.r,i=Up("recharts-dot",e.className);return t===+t&&n===+n&&r===+r?Ve.createElement("circle",u4({},dU(e,!1),XF(e),{className:i,cx:t,cy:n,r:r})):null};function p4(e){return(p4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var m4=["x","y","top","left","width","height","className"];function f4(){return f4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f4.apply(this,arguments)}function g4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v4(e,t,n){return t=function(e){var t=function(e,t){if("object"!=p4(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=p4(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p4(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x4(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var y4=function(e,t,n,r,i,a){return"M".concat(e,",").concat(i,"v").concat(r,"M").concat(a,",").concat(t,"h").concat(n)},b4=function(e){var t=e.x,n=void 0===t?0:t,r=e.y,i=void 0===r?0:r,a=e.top,s=void 0===a?0:a,o=e.left,l=void 0===o?0:o,c=e.width,d=void 0===c?0:c,u=e.height,h=void 0===u?0:u,p=e.className,m=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g4(Object(n),!0).forEach(function(t){v4(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g4(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({x:n,y:i,top:s,left:l,width:d,height:h},x4(e,m4));return OF(n)&&OF(i)&&OF(d)&&OF(h)&&OF(s)&&OF(l)?Ge.createElement("path",f4({},dU(m,!0),{className:Up("recharts-cross",p),d:y4(n,i,d,h,s,l)})):null},w4=GQ,j4=WQ,N4=OW;const _4=ie(function(e,t){return e&&e.length?w4(e,N4(t),j4):void 0});var S4=GQ,C4=OW,A4=YQ;const M4=ie(function(e,t){return e&&e.length?S4(e,C4(t),A4):void 0});var E4=["cx","cy","angle","ticks","axisLine"],k4=["ticks","tick","angle","tickFormatter","stroke"];function T4(e){return(T4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P4(){return P4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P4.apply(this,arguments)}function O4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function R4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O4(Object(n),!0).forEach(function(t){z4(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O4(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function I4(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function D4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,H4(r.key),r)}}function L4(e,t,n){return t=F4(t),function(e,t){if(t&&("object"===T4(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,B4()?Reflect.construct(t,n||[],F4(e).constructor):t.apply(e,n))}function B4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(B4=function(){return!!e})()}function F4(e){return(F4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U4(e,t){return(U4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function z4(e,t,n){return(t=H4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H4(e){var t=function(e,t){if("object"!=T4(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=T4(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==T4(t)?t:t+""}var V4=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),L4(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U4(e,t)}(e,Ve.PureComponent),t=e,n=[{key:"getTickValueCoord",value:function(e){var t=e.coordinate,n=this.props,r=n.angle,i=n.cx,a=n.cy;return v2(i,a,t,r)}},{key:"getTickTextAnchor",value:function(){var e;switch(this.props.orientation){case"left":e="end";break;case"right":e="start";break;default:e="middle"}return e}},{key:"getViewBox",value:function(){var e=this.props,t=e.cx,n=e.cy,r=e.angle,i=e.ticks,a=_4(i,function(e){return e.coordinate||0});return{cx:t,cy:n,startAngle:r,endAngle:r,innerRadius:M4(i,function(e){return e.coordinate||0}).coordinate||0,outerRadius:a.coordinate||0}}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,n=e.cy,r=e.angle,i=e.ticks,a=e.axisLine,s=I4(e,E4),o=i.reduce(function(e,t){return[Math.min(e[0],t.coordinate),Math.max(e[1],t.coordinate)]},[1/0,-1/0]),l=v2(t,n,o[0],r),c=v2(t,n,o[1],r),d=R4(R4(R4({},dU(s,!1)),{},{fill:"none"},dU(a,!1)),{},{x1:l.x,y1:l.y,x2:c.x,y2:c.y});return Ge.createElement("line",P4({className:"recharts-polar-radius-axis-line"},d))}},{key:"renderTicks",value:function(){var t=this,n=this.props,r=n.ticks,i=n.tick,a=n.angle,s=n.tickFormatter,o=n.stroke,l=I4(n,k4),c=this.getTickTextAnchor(),d=dU(l,!1),u=dU(i,!1),h=r.map(function(n,r){var l=t.getTickValueCoord(n),h=R4(R4(R4(R4({textAnchor:c,transform:"rotate(".concat(90-a,", ").concat(l.x,", ").concat(l.y,")")},d),{},{stroke:"none",fill:o},u),{},{index:r},l),{},{payload:n});return Ge.createElement(wU,P4({className:Up("recharts-polar-radius-axis-tick",j2(i)),key:"tick-".concat(n.coordinate)},$F(t.props,n,r)),e.renderTickItem(i,h,s?s(n.value,r):n.value))});return Ge.createElement(wU,{className:"recharts-polar-radius-axis-ticks"},h)}},{key:"render",value:function(){var e=this.props,t=e.ticks,n=e.axisLine,r=e.tick;return t&&t.length?Ge.createElement(wU,{className:Up("recharts-polar-radius-axis",this.props.className)},n&&this.renderAxisLine(),r&&this.renderTicks(),O2.renderCallByParent(this.props,this.getViewBox())):null}}],r=[{key:"renderTickItem",value:function(e,t,n){return Ge.isValidElement(e)?Ge.cloneElement(e,t):cL(e)?e(t):Ge.createElement(o$,P4({},t,{className:"recharts-polar-radius-axis-tick-value"}),n)}}],n&&D4(t.prototype,n),r&&D4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function G4(e){return(G4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W4(){return W4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W4.apply(this,arguments)}function K4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function q4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K4(Object(n),!0).forEach(function(t){Q4(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K4(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function X4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,e6(r.key),r)}}function $4(e,t,n){return t=J4(t),function(e,t){if(t&&("object"===G4(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Y4()?Reflect.construct(t,n||[],J4(e).constructor):t.apply(e,n))}function Y4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Y4=function(){return!!e})()}function J4(e){return(J4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z4(e,t){return(Z4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Q4(e,t,n){return(t=e6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e6(e){var t=function(e,t){if("object"!=G4(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=G4(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==G4(t)?t:t+""}z4(V4,"displayName","PolarRadiusAxis"),z4(V4,"axisType","radiusAxis"),z4(V4,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});var t6=Math.PI/180,n6=1e-5,r6=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),$4(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z4(e,t)}(e,Ve.PureComponent),t=e,n=[{key:"getTickLineCoord",value:function(e){var t=this.props,n=t.cx,r=t.cy,i=t.radius,a=t.orientation,s=t.tickSize||8,o=v2(n,r,i,e.coordinate),l=v2(n,r,i+("inner"===a?-1:1)*s,e.coordinate);return{x1:o.x,y1:o.y,x2:l.x,y2:l.y}}},{key:"getTickTextAnchor",value:function(e){var t=this.props.orientation,n=Math.cos(-e.coordinate*t6);return n>n6?"outer"===t?"start":"end":n<-n6?"outer"===t?"end":"start":"middle"}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,n=e.cy,r=e.radius,i=e.axisLine,a=e.axisLineType,s=q4(q4({},dU(this.props,!1)),{},{fill:"none"},dU(i,!1));if("circle"===a)return Ge.createElement(h4,W4({className:"recharts-polar-angle-axis-line"},s,{cx:t,cy:n,r:r}));var o=this.props.ticks.map(function(e){return v2(t,n,r,e.coordinate)});return Ge.createElement(d4,W4({className:"recharts-polar-angle-axis-line"},s,{points:o}))}},{key:"renderTicks",value:function(){var t=this,n=this.props,r=n.ticks,i=n.tick,a=n.tickLine,s=n.tickFormatter,o=n.stroke,l=dU(this.props,!1),c=dU(i,!1),d=q4(q4({},l),{},{fill:"none"},dU(a,!1)),u=r.map(function(n,r){var u=t.getTickLineCoord(n),h=q4(q4(q4({textAnchor:t.getTickTextAnchor(n)},l),{},{stroke:"none",fill:o},c),{},{index:r,payload:n,x:u.x2,y:u.y2});return Ge.createElement(wU,W4({className:Up("recharts-polar-angle-axis-tick",j2(i)),key:"tick-".concat(n.coordinate)},$F(t.props,n,r)),a&&Ge.createElement("line",W4({className:"recharts-polar-angle-axis-tick-line"},d,u)),i&&e.renderTickItem(i,h,s?s(n.value,r):n.value))});return Ge.createElement(wU,{className:"recharts-polar-angle-axis-ticks"},u)}},{key:"render",value:function(){var e=this.props,t=e.ticks,n=e.radius,r=e.axisLine;return n<=0||!t||!t.length?null:Ge.createElement(wU,{className:Up("recharts-polar-angle-axis",this.props.className)},r&&this.renderAxisLine(),this.renderTicks())}}],r=[{key:"renderTickItem",value:function(e,t,n){return Ge.isValidElement(e)?Ge.cloneElement(e,t):cL(e)?e(t):Ge.createElement(o$,W4({},t,{className:"recharts-polar-angle-axis-tick-value"}),n)}}],n&&X4(t.prototype,n),r&&X4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();Q4(r6,"displayName","PolarAngleAxis"),Q4(r6,"axisType","angleAxis"),Q4(r6,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var i6=JV(Object.getPrototypeOf,Object),a6=XD,s6=i6,o6=$D,l6=Function.prototype,c6=Object.prototype,d6=l6.toString,u6=c6.hasOwnProperty,h6=d6.call(Object);const p6=ie(function(e){if(!o6(e)||"[object Object]"!=a6(e))return!1;var t=s6(e);if(null===t)return!0;var n=u6.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&d6.call(n)==h6});var m6=XD,f6=$D;const g6=ie(function(e){return!0===e||!1===e||f6(e)&&"[object Boolean]"==m6(e)});function v6(e){return(v6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x6(){return x6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x6.apply(this,arguments)}function y6(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t);else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b6(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b6(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b6(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function j6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w6(Object(n),!0).forEach(function(t){N6(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w6(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function N6(e,t,n){return t=function(e){var t=function(e,t){if("object"!=v6(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=v6(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v6(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _6,S6=function(e,t,n,r,i){var a,s=n-r;return a="M ".concat(e,",").concat(t),a+="L ".concat(e+n,",").concat(t),a+="L ".concat(e+n-s/2,",").concat(t+i),a+="L ".concat(e+n-s/2-r,",").concat(t+i),a+="L ".concat(e,",").concat(t," Z")},C6={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},A6=function(e){var t=j6(j6({},C6),e),n=Ve.useRef(),r=y6(Ve.useState(-1),2),i=r[0],a=r[1];Ve.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&a(e)}catch(c$e){}},[]);var s=t.x,o=t.y,l=t.upperWidth,c=t.lowerWidth,d=t.height,u=t.className,h=t.animationEasing,p=t.animationDuration,m=t.animationBegin,f=t.isUpdateAnimationActive;if(s!==+s||o!==+o||l!==+l||c!==+c||d!==+d||0===l&&0===c||0===d)return null;var g=Up("recharts-trapezoid",u);return f?Ge.createElement(G3,{canBegin:i>0,from:{upperWidth:0,lowerWidth:0,height:d,x:s,y:o},to:{upperWidth:l,lowerWidth:c,height:d,x:s,y:o},duration:p,animationEasing:h,isActive:f},function(e){var r=e.upperWidth,a=e.lowerWidth,s=e.height,o=e.x,l=e.y;return Ge.createElement(G3,{canBegin:i>0,from:"0px ".concat(-1===i?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:p,easing:h},Ge.createElement("path",x6({},dU(t,!0),{className:g,d:S6(o,l,r,a,s),ref:n})))}):Ge.createElement("g",null,Ge.createElement("path",x6({},dU(t,!0),{className:g,d:S6(s,o,l,c,d)})))},M6=["option","shapeType","propTransformer","activeClassName","isActive"];function E6(e){return(E6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k6(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function T6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function P6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T6(Object(n),!0).forEach(function(t){O6(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T6(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function O6(e,t,n){return t=function(e){var t=function(e,t){if("object"!=E6(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=E6(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E6(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R6(e,t){return P6(P6({},t),e)}function I6(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return Ge.createElement(n4,n);case"trapezoid":return Ge.createElement(A6,n);case"sector":return Ge.createElement(n5,n);case"symbols":if(function(e){return"symbols"===e}(t))return Ge.createElement(oH,n);break;default:return null}}function D6(e){var t,n=e.option,r=e.shapeType,i=e.propTransformer,a=void 0===i?R6:i,s=e.activeClassName,o=void 0===s?"recharts-active-shape":s,l=e.isActive,c=k6(e,M6);if(Ve.isValidElement(n))t=Ve.cloneElement(n,P6(P6({},c),function(e){return Ve.isValidElement(e)?e.props:e}(n)));else if(cL(n))t=n(c);else if(p6(n)&&!g6(n)){var d=a(n,c);t=Ge.createElement(I6,{shapeType:r,elementProps:d})}else{var u=c;t=Ge.createElement(I6,{shapeType:r,elementProps:u})}return l?Ge.createElement(wU,{className:o},t):t}function L6(e,t){return null!=t&&"trapezoids"in e.props}function B6(e,t){return null!=t&&"sectors"in e.props}function F6(e,t){return null!=t&&"points"in e.props}function U6(e,t){var n,r,i=e.x===(null==t||null===(n=t.labelViewBox)||void 0===n?void 0:n.x)||e.x===t.x,a=e.y===(null==t||null===(r=t.labelViewBox)||void 0===r?void 0:r.y)||e.y===t.y;return i&&a}function z6(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function H6(e,t){var n=e.x===t.x,r=e.y===t.y,i=e.z===t.z;return n&&r&&i}function V6(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,i=function(e,t){var n;return L6(e,t)?n="trapezoids":B6(e,t)?n="sectors":F6(e,t)&&(n="points"),n}(n,t),a=function(e,t){var n,r;return L6(e,t)?null===(n=t.tooltipPayload)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.payload:B6(e,t)?null===(r=t.tooltipPayload)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.payload)||void 0===r?void 0:r.payload:F6(e,t)?t.payload:{}}(n,t),s=r.filter(function(e,r){var s=c0(a,e),o=n.props[i].filter(function(e){var r=function(e,t){var n;return L6(e,t)?n=U6:B6(e,t)?n=z6:F6(e,t)&&(n=H6),n}(n,t);return r(e,t)}),l=n.props[i].indexOf(o[o.length-1]);return s&&r===l});return r.indexOf(s[s.length-1])}function G6(e){return(G6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W6(){return W6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W6.apply(this,arguments)}function K6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function q6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K6(Object(n),!0).forEach(function(t){Q6(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K6(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function X6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,e8(r.key),r)}}function $6(e,t,n){return t=J6(t),function(e,t){if(t&&("object"===G6(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Y6()?Reflect.construct(t,n||[],J6(e).constructor):t.apply(e,n))}function Y6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Y6=function(){return!!e})()}function J6(e){return(J6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z6(e,t){return(Z6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Q6(e,t,n){return(t=e8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e8(e){var t=function(e,t){if("object"!=G6(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=G6(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==G6(t)?t:t+""}var t8=function(){function e(t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Q6(n=$6(this,e,[t]),"pieRef",null),Q6(n,"sectorRefs",[]),Q6(n,"id",DF("recharts-pie-")),Q6(n,"handleAnimationEnd",function(){var e=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),cL(e)&&e()}),Q6(n,"handleAnimationStart",function(){var e=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),cL(e)&&e()}),n.state={isAnimationFinished:!t.isAnimationActive,prevIsAnimationActive:t.isAnimationActive,prevAnimationId:t.animationId,sectorToFocus:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z6(e,t)}(e,Ve.PureComponent),t=e,n=[{key:"isActiveIndex",value:function(e){var t=this.props.activeIndex;return Array.isArray(t)?-1!==t.indexOf(e):e===t}},{key:"hasActiveIndex",value:function(){var e=this.props.activeIndex;return Array.isArray(e)?0!==e.length:e||0===e}},{key:"renderLabels",value:function(t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,r=n.label,i=n.labelLine,a=n.dataKey,s=n.valueKey,o=dU(this.props,!1),l=dU(r,!1),c=dU(i,!1),d=r&&r.offsetRadius||20,u=t.map(function(t,n){var u=(t.startAngle+t.endAngle)/2,h=v2(t.cx,t.cy,t.outerRadius+d,u),p=q6(q6(q6(q6({},o),t),{},{stroke:"none"},l),{},{index:n,textAnchor:e.getTextAnchor(h.x,t.cx)},h),m=q6(q6(q6(q6({},o),t),{},{fill:"none",stroke:t.fill},c),{},{index:n,points:[v2(t.cx,t.cy,t.outerRadius,u),h]}),f=a;return tF(a)&&tF(s)?f="value":tF(a)&&(f=s),Ge.createElement(wU,{key:"label-".concat(t.startAngle,"-").concat(t.endAngle,"-").concat(t.midAngle,"-").concat(n)},i&&e.renderLabelLineItem(i,m,"line"),e.renderLabelItem(r,p,B1(t,f)))});return Ge.createElement(wU,{className:"recharts-pie-labels"},u)}},{key:"renderSectorsStatically",value:function(e){var t=this,n=this.props,r=n.activeShape,i=n.blendStroke,a=n.inactiveShape;return e.map(function(n,s){if(0===(null==n?void 0:n.startAngle)&&0===(null==n?void 0:n.endAngle)&&1!==e.length)return null;var o=t.isActiveIndex(s),l=a&&t.hasActiveIndex()?a:null,c=o?r:l,d=q6(q6({},n),{},{stroke:i?n.fill:n.stroke,tabIndex:-1});return Ge.createElement(wU,W6({ref:function(e){e&&!t.sectorRefs.includes(e)&&t.sectorRefs.push(e)},tabIndex:-1,className:"recharts-pie-sector"},$F(t.props,n,s),{key:"sector-".concat(null==n?void 0:n.startAngle,"-").concat(null==n?void 0:n.endAngle,"-").concat(n.midAngle,"-").concat(s)}),Ge.createElement(D6,W6({option:c,isActive:o,shapeType:"sector"},d)))})}},{key:"renderSectorsWithAnimation",value:function(){var e=this,t=this.props,n=t.sectors,r=t.isAnimationActive,i=t.animationBegin,a=t.animationDuration,s=t.animationEasing,o=t.animationId,l=this.state,c=l.prevSectors,d=l.prevIsAnimationActive;return Ge.createElement(G3,{begin:i,duration:a,isActive:r,easing:s,from:{t:0},to:{t:1},key:"pie-".concat(o,"-").concat(d),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(t){var r=t.t,i=[],a=(n&&n[0]).startAngle;return n.forEach(function(e,t){var n=c&&c[t],s=t>0?eF(e,"paddingAngle",0):0;if(n){var o=FF(n.endAngle-n.startAngle,e.endAngle-e.startAngle),l=q6(q6({},e),{},{startAngle:a+s,endAngle:a+o(r)+s});i.push(l),a=l.endAngle}else{var d=e.endAngle,u=e.startAngle,h=FF(0,d-u)(r),p=q6(q6({},e),{},{startAngle:a+s,endAngle:a+h+s});i.push(p),a=p.endAngle}}),Ge.createElement(wU,null,e.renderSectorsStatically(i))})}},{key:"attachKeyboardHandlers",value:function(e){var t=this;e.onkeydown=function(e){if(!e.altKey)switch(e.key){case"ArrowLeft":var n=++t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[n].focus(),t.setState({sectorToFocus:n});break;case"ArrowRight":var r=--t.state.sectorToFocus<0?t.sectorRefs.length-1:t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[r].focus(),t.setState({sectorToFocus:r});break;case"Escape":t.sectorRefs[t.state.sectorToFocus].blur(),t.setState({sectorToFocus:0})}}}},{key:"renderSectors",value:function(){var e=this.props,t=e.sectors,n=e.isAnimationActive,r=this.state.prevSectors;return!(n&&t&&t.length)||r&&c0(r,t)?this.renderSectorsStatically(t):this.renderSectorsWithAnimation()}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var e=this,t=this.props,n=t.hide,r=t.sectors,i=t.className,a=t.label,s=t.cx,o=t.cy,l=t.innerRadius,c=t.outerRadius,d=t.isAnimationActive,u=this.state.isAnimationFinished;if(n||!r||!r.length||!OF(s)||!OF(o)||!OF(l)||!OF(c))return null;var h=Up("recharts-pie",i);return Ge.createElement(wU,{tabIndex:this.props.rootTabIndex,className:h,ref:function(t){e.pieRef=t}},this.renderSectors(),a&&this.renderLabels(r),O2.renderCallByParent(this.props,null,!1),(!d||u)&&q2.renderCallByParent(this.props,r,!1))}}],r=[{key:"getDerivedStateFromProps",value:function(e,t){return t.prevIsAnimationActive!==e.isAnimationActive?{prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:[],isAnimationFinished:!0}:e.isAnimationActive&&e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:t.curSectors,isAnimationFinished:!0}:e.sectors!==t.curSectors?{curSectors:e.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(e,t){return e>t?"start":e<t?"end":"middle"}},{key:"renderLabelLineItem",value:function(e,t,n){if(Ge.isValidElement(e))return Ge.cloneElement(e,t);if(cL(e))return e(t);var r=Up("recharts-pie-label-line","boolean"!=typeof e?e.className:"");return Ge.createElement(p5,W6({},t,{key:n,type:"linear",className:r}))}},{key:"renderLabelItem",value:function(e,t,n){if(Ge.isValidElement(e))return Ge.cloneElement(e,t);var r=n;if(cL(e)&&(r=e(t),Ge.isValidElement(r)))return r;var i=Up("recharts-pie-label-text","boolean"==typeof e||cL(e)?"":e.className);return Ge.createElement(o$,W6({},t,{alignmentBaseline:"middle",className:i}),r)}}],n&&X6(t.prototype,n),r&&X6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();_6=t8,Q6(t8,"displayName","Pie"),Q6(t8,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Dq,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0}),Q6(t8,"parseDeltaAngle",function(e,t){return TF(t-e)*Math.min(Math.abs(t-e),360)}),Q6(t8,"getRealPieData",function(e){var t=e.data,n=e.children,r=dU(e,!1),i=aU(n,_X);return t&&t.length?t.map(function(e,t){return q6(q6(q6({payload:e},r),e),i&&i[t]&&i[t].props)}):i&&i.length?i.map(function(e){return q6(q6({},r),e.props)}):[]}),Q6(t8,"parseCoordinateOfPie",function(e,t){var n=t.top,r=t.left,i=t.width,a=t.height,s=x2(i,a);return{cx:r+LF(e.cx,i,i/2),cy:n+LF(e.cy,a,a/2),innerRadius:LF(e.innerRadius,s,0),outerRadius:LF(e.outerRadius,s,.8*s),maxRadius:e.maxRadius||Math.sqrt(i*i+a*a)/2}}),Q6(t8,"getComposedData",function(e){var t=e.item,n=e.offset,r=void 0!==t.type.defaultProps?q6(q6({},t.type.defaultProps),t.props):t.props,i=_6.getRealPieData(r);if(!i||!i.length)return null;var a=r.cornerRadius,s=r.startAngle,o=r.endAngle,l=r.paddingAngle,c=r.dataKey,d=r.nameKey,u=r.valueKey,h=r.tooltipType,p=Math.abs(r.minAngle),m=_6.parseCoordinateOfPie(r,n),f=_6.parseDeltaAngle(s,o),g=Math.abs(f),v=c;tF(c)&&tF(u)?(jU(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),v="value"):tF(c)&&(jU(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),v=u);var x,y,b=i.filter(function(e){return 0!==B1(e,v,0)}).length,w=g-b*p-(g>=360?b:b-1)*l,j=i.reduce(function(e,t){var n=B1(t,v,0);return e+(OF(n)?n:0)},0);j>0&&(x=i.map(function(e,t){var n,r=B1(e,v,0),i=B1(e,d,t),o=(OF(r)?r:0)/j,c=(n=t?y.endAngle+TF(f)*l*(0!==r?1:0):s)+TF(f)*((0!==r?p:0)+o*w),u=(n+c)/2,g=(m.innerRadius+m.outerRadius)/2,x=[{name:i,value:r,payload:e,dataKey:v,type:h}],b=v2(m.cx,m.cy,g,u);return y=q6(q6(q6({percent:o,cornerRadius:a,name:i,tooltipPayload:x,midAngle:u,middleRadius:g,tooltipPosition:b},e),m),{},{value:B1(e,v),startAngle:n,endAngle:c,payload:e,paddingAngle:TF(f)*l})}));return q6(q6({},m),{},{sectors:x,data:i})});var n8=Math.ceil,r8=Math.max;var i8=sX,a8=1/0;var s8=function(e){return e?(e=i8(e))===a8||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0},o8=function(e,t,n,r){for(var i=-1,a=r8(n8((t-e)/(n||1)),0),s=Array(a);a--;)s[r?a:++i]=e,e+=n;return s},l8=aq,c8=s8;const d8=ie(function(e){return function(t,n,r){return r&&"number"!=typeof r&&l8(t,n,r)&&(n=r=void 0),t=c8(t),void 0===n?(n=t,t=0):n=c8(n),r=void 0===r?t<n?1:-1:c8(r),o8(t,n,r,e)}}());function u8(e){return(u8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p8(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h8(Object(n),!0).forEach(function(t){m8(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h8(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m8(e,t,n){return t=function(e){var t=function(e,t){if("object"!=u8(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=u8(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u8(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f8=["Webkit","Moz","O","ms"];function g8(e){return(g8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v8(){return v8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v8.apply(this,arguments)}function x8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y8(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x8(Object(n),!0).forEach(function(t){S8(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x8(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function b8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C8(r.key),r)}}function w8(e,t,n){return t=N8(t),function(e,t){if(t&&("object"===g8(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,j8()?Reflect.construct(t,n||[],N8(e).constructor):t.apply(e,n))}function j8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(j8=function(){return!!e})()}function N8(e){return(N8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _8(e,t){return(_8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function S8(e,t,n){return(t=C8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C8(e){var t=function(e,t){if("object"!=g8(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=g8(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==g8(t)?t:t+""}var A8=function(e){return e.changedTouches&&!!e.changedTouches.length},M8=function(){function e(t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),S8(n=w8(this,e,[t]),"handleDrag",function(e){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(e):n.state.isSlideMoving&&n.handleSlideDrag(e)}),S8(n,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&n.handleDrag(e.changedTouches[0])}),S8(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var e=n.props,t=e.endIndex,r=e.onDragEnd,i=e.startIndex;null==r||r({endIndex:t,startIndex:i})}),n.detachDragEndListener()}),S8(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),S8(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),S8(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),S8(n,"handleSlideDragStart",function(e){var t=A8(e)?e.changedTouches[0]:e;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:t.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_8(e,t)}(e,Ve.PureComponent),t=e,n=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(t){var n=t.startX,r=t.endX,i=this.state.scaleValues,a=this.props,s=a.gap,o=a.data.length-1,l=Math.min(n,r),c=Math.max(n,r),d=e.getIndexInRange(i,l),u=e.getIndexInRange(i,c);return{startIndex:d-d%s,endIndex:u===o?o:u-u%s}}},{key:"getTextOfTick",value:function(e){var t=this.props,n=t.data,r=t.tickFormatter,i=t.dataKey,a=B1(n[e],i,e);return cL(r)?r(a,e):a}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,n=t.slideMoveStartX,r=t.startX,i=t.endX,a=this.props,s=a.x,o=a.width,l=a.travellerWidth,c=a.startIndex,d=a.endIndex,u=a.onChange,h=e.pageX-n;h>0?h=Math.min(h,s+o-l-i,s+o-l-r):h<0&&(h=Math.max(h,s-r,s-i));var p=this.getIndex({startX:r+h,endX:i+h});p.startIndex===c&&p.endIndex===d||!u||u(p),this.setState({startX:r+h,endX:i+h,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var n=A8(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:n.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t=this.state,n=t.brushMoveStartX,r=t.movingTravellerId,i=t.endX,a=t.startX,s=this.state[r],o=this.props,l=o.x,c=o.width,d=o.travellerWidth,u=o.onChange,h=o.gap,p=o.data,m={startX:this.state.startX,endX:this.state.endX},f=e.pageX-n;f>0?f=Math.min(f,l+c-d-s):f<0&&(f=Math.max(f,l-s)),m[r]=s+f;var g=this.getIndex(m),v=g.startIndex,x=g.endIndex;this.setState(S8(S8({},r,s+f),"brushMoveStartX",e.pageX),function(){var e;u&&(e=p.length-1,("startX"===r&&(i>a?v%h===0:x%h===0)||i<a&&x===e||"endX"===r&&(i>a?x%h===0:v%h===0)||i>a&&x===e)&&u(g))})}},{key:"handleTravellerMoveKeyboard",value:function(e,t){var n=this,r=this.state,i=r.scaleValues,a=r.startX,s=r.endX,o=this.state[t],l=i.indexOf(o);if(-1!==l){var c=l+e;if(!(-1===c||c>=i.length)){var d=i[c];"startX"===t&&d>=s||"endX"===t&&d<=a||this.setState(S8({},t,d),function(){n.props.onChange(n.getIndex({startX:n.state.startX,endX:n.state.endX}))})}}}},{key:"renderBackground",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,i=e.height,a=e.fill,s=e.stroke;return Ge.createElement("rect",{stroke:s,fill:a,x:t,y:n,width:r,height:i})}},{key:"renderPanorama",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,i=e.height,a=e.data,s=e.children,o=e.padding,l=Ve.Children.only(s);return l?Ge.cloneElement(l,{x:t,y:n,width:r,height:i,margin:o,compact:!0,data:a}):null}},{key:"renderTravellerLayer",value:function(t,n){var r,i,a=this,s=this.props,o=s.y,l=s.travellerWidth,c=s.height,d=s.traveller,u=s.ariaLabel,h=s.data,p=s.startIndex,m=s.endIndex,f=Math.max(t,this.props.x),g=y8(y8({},dU(this.props,!1)),{},{x:f,y:o,width:l,height:c}),v=u||"Min value: ".concat(null===(r=h[p])||void 0===r?void 0:r.name,", Max value: ").concat(null===(i=h[m])||void 0===i?void 0:i.name);return Ge.createElement(wU,{tabIndex:0,role:"slider","aria-label":v,"aria-valuenow":t,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[n],onTouchStart:this.travellerDragStartHandlers[n],onKeyDown:function(e){["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),a.handleTravellerMoveKeyboard("ArrowRight"===e.key?1:-1,n))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(d,g))}},{key:"renderSlide",value:function(e,t){var n=this.props,r=n.y,i=n.height,a=n.stroke,s=n.travellerWidth,o=Math.min(e,t)+s,l=Math.max(Math.abs(t-e)-s,0);return Ge.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:a,fillOpacity:.2,x:o,y:r,width:l,height:i})}},{key:"renderText",value:function(){var e=this.props,t=e.startIndex,n=e.endIndex,r=e.y,i=e.height,a=e.travellerWidth,s=e.stroke,o=this.state,l=o.startX,c=o.endX,d={pointerEvents:"none",fill:s};return Ge.createElement(wU,{className:"recharts-brush-texts"},Ge.createElement(o$,v8({textAnchor:"end",verticalAnchor:"middle",x:Math.min(l,c)-5,y:r+i/2},d),this.getTextOfTick(t)),Ge.createElement(o$,v8({textAnchor:"start",verticalAnchor:"middle",x:Math.max(l,c)+a+5,y:r+i/2},d),this.getTextOfTick(n)))}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.className,r=e.children,i=e.x,a=e.y,s=e.width,o=e.height,l=e.alwaysShowText,c=this.state,d=c.startX,u=c.endX,h=c.isTextActive,p=c.isSlideMoving,m=c.isTravellerMoving,f=c.isTravellerFocused;if(!t||!t.length||!OF(i)||!OF(a)||!OF(s)||!OF(o)||s<=0||o<=0)return null;var g,v,x,y,b=Up("recharts-brush",n),w=1===Ge.Children.count(r),j=(v="none",x=(g="userSelect").replace(/(\w)/,function(e){return e.toUpperCase()}),(y=f8.reduce(function(e,t){return p8(p8({},e),{},m8({},t+x,v))},{}))[g]=v,y);return Ge.createElement(wU,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:j},this.renderBackground(),w&&this.renderPanorama(),this.renderSlide(d,u),this.renderTravellerLayer(d,"startX"),this.renderTravellerLayer(u,"endX"),(h||p||m||f||l)&&this.renderText())}}],r=[{key:"renderDefaultTraveller",value:function(e){var t=e.x,n=e.y,r=e.width,i=e.height,a=e.stroke,s=Math.floor(n+i/2)-1;return Ge.createElement(Ge.Fragment,null,Ge.createElement("rect",{x:t,y:n,width:r,height:i,fill:a,stroke:"none"}),Ge.createElement("line",{x1:t+1,y1:s,x2:t+r-1,y2:s,fill:"none",stroke:"#fff"}),Ge.createElement("line",{x1:t+1,y1:s+2,x2:t+r-1,y2:s+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(t,n){return Ge.isValidElement(t)?Ge.cloneElement(t,n):cL(t)?t(n):e.renderDefaultTraveller(n)}},{key:"getDerivedStateFromProps",value:function(e,t){var n=e.data,r=e.width,i=e.x,a=e.travellerWidth,s=e.updateId,o=e.startIndex,l=e.endIndex;if(n!==t.prevData||s!==t.prevUpdateId)return y8({prevData:n,prevTravellerWidth:a,prevUpdateId:s,prevX:i,prevWidth:r},n&&n.length?function(e){var t=e.data,n=e.startIndex,r=e.endIndex,i=e.x,a=e.width,s=e.travellerWidth;if(!t||!t.length)return{};var o=t.length,l=D$().domain(d8(0,o)).range([i,i+a-s]),c=l.domain().map(function(e){return l(e)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(n),endX:l(r),scale:l,scaleValues:c}}({data:n,width:r,x:i,travellerWidth:a,startIndex:o,endIndex:l}):{scale:null,scaleValues:null});if(t.scale&&(r!==t.prevWidth||i!==t.prevX||a!==t.prevTravellerWidth)){t.scale.range([i,i+r-a]);var c=t.scale.domain().map(function(e){return t.scale(e)});return{prevData:n,prevTravellerWidth:a,prevUpdateId:s,prevX:i,prevWidth:r,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:c}}return null}},{key:"getIndexInRange",value:function(e,t){for(var n=0,r=e.length-1;r-n>1;){var i=Math.floor((n+r)/2);e[i]>t?r=i:n=i}return t>=e[r]?r:n}}],n&&b8(t.prototype,n),r&&b8(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();S8(M8,"displayName","Brush"),S8(M8,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var E8=_K;var k8=LH,T8=OW,P8=function(e,t){var n;return E8(e,function(e,r,i){return!(n=t(e,r,i))}),!!n},O8=PD,R8=aq;const I8=ie(function(e,t,n){var r=O8(e)?k8:P8;return n&&R8(e,t,n)&&(t=void 0),r(e,T8(t))});var D8=function(e,t){var n=e.alwaysShow,r=e.ifOverflow;return n&&(r="extendDomain"),r===t},L8=KK;var B8=function(e,t,n){"__proto__"==t&&L8?L8(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},F8=jK,U8=OW;const z8=ie(function(e,t){var n={};return t=U8(t),F8(e,function(e,r,i){B8(n,r,t(e,r,i))}),n});var H8=_K;var V8=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0},G8=function(e,t){var n=!0;return H8(e,function(e,r,i){return n=!!t(e,r,i)}),n},W8=OW,K8=PD,q8=aq;const X8=ie(function(e,t,n){var r=K8(e)?V8:G8;return n&&q8(e,t,n)&&(t=void 0),r(e,W8(t))});var $8=["x","y"];function Y8(e){return(Y8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J8(){return J8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J8.apply(this,arguments)}function Z8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Q8(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z8(Object(n),!0).forEach(function(t){e9(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z8(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function e9(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Y8(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Y8(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Y8(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t9(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function n9(e,t){var n=e.x,r=e.y,i=t9(e,$8),a="".concat(n),s=parseInt(a,10),o="".concat(r),l=parseInt(o,10),c="".concat(t.height||i.height),d=parseInt(c,10),u="".concat(t.width||i.width),h=parseInt(u,10);return Q8(Q8(Q8(Q8(Q8({},t),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function r9(e){return Ge.createElement(D6,J8({shapeType:"rectangle",propTransformer:n9,activeClassName:"recharts-active-bar"},e))}var i9,a9=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n,r){if("number"==typeof e)return e;var i=OF(n)||function(e){return tF(e)}(n);return i?e(n,r):(i||h1(),t)}},s9=["value","background"];function o9(e){return(o9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l9(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function c9(){return c9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c9.apply(this,arguments)}function d9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u9(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d9(Object(n),!0).forEach(function(t){v9(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d9(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function h9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,x9(r.key),r)}}function p9(e,t,n){return t=f9(t),function(e,t){if(t&&("object"===o9(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m9()?Reflect.construct(t,n||[],f9(e).constructor):t.apply(e,n))}function m9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(m9=function(){return!!e})()}function f9(e){return(f9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g9(e,t){return(g9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v9(e,t,n){return(t=x9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x9(e){var t=function(e,t){if("object"!=o9(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=o9(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==o9(t)?t:t+""}var y9=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return v9(t=p9(this,e,[].concat(r)),"state",{isAnimationFinished:!1}),v9(t,"id",DF("recharts-bar-")),v9(t,"handleAnimationEnd",function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),e&&e()}),v9(t,"handleAnimationStart",function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),e&&e()}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g9(e,t)}(e,Ve.PureComponent),t=e,n=[{key:"renderRectanglesStatically",value:function(e){var t=this,n=this.props,r=n.shape,i=n.dataKey,a=n.activeIndex,s=n.activeBar,o=dU(this.props,!1);return e&&e.map(function(e,n){var l=n===a,c=l?s:r,d=u9(u9(u9({},o),e),{},{isActive:l,option:c,index:n,dataKey:i,onAnimationStart:t.handleAnimationStart,onAnimationEnd:t.handleAnimationEnd});return Ge.createElement(wU,c9({className:"recharts-bar-rectangle"},$F(t.props,e,n),{key:"rectangle-".concat(null==e?void 0:e.x,"-").concat(null==e?void 0:e.y,"-").concat(null==e?void 0:e.value,"-").concat(n)}),Ge.createElement(r9,d))})}},{key:"renderRectanglesWithAnimation",value:function(){var e=this,t=this.props,n=t.data,r=t.layout,i=t.isAnimationActive,a=t.animationBegin,s=t.animationDuration,o=t.animationEasing,l=t.animationId,c=this.state.prevData;return Ge.createElement(G3,{begin:a,duration:s,isActive:i,easing:o,from:{t:0},to:{t:1},key:"bar-".concat(l),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(t){var i=t.t,a=n.map(function(e,t){var n=c&&c[t];if(n){var a=FF(n.x,e.x),s=FF(n.y,e.y),o=FF(n.width,e.width),l=FF(n.height,e.height);return u9(u9({},e),{},{x:a(i),y:s(i),width:o(i),height:l(i)})}if("horizontal"===r){var d=FF(0,e.height)(i);return u9(u9({},e),{},{y:e.y+e.height-d,height:d})}var u=FF(0,e.width)(i);return u9(u9({},e),{},{width:u})});return Ge.createElement(wU,null,e.renderRectanglesStatically(a))})}},{key:"renderRectangles",value:function(){var e=this.props,t=e.data,n=e.isAnimationActive,r=this.state.prevData;return!(n&&t&&t.length)||r&&c0(r,t)?this.renderRectanglesStatically(t):this.renderRectanglesWithAnimation()}},{key:"renderBackground",value:function(){var e=this,t=this.props,n=t.data,r=t.dataKey,i=t.activeIndex,a=dU(this.props.background,!1);return n.map(function(t,n){t.value;var s=t.background,o=l9(t,s9);if(!s)return null;var l=u9(u9(u9(u9(u9({},o),{},{fill:"#eee"},s),a),$F(e.props,t,n)),{},{onAnimationStart:e.handleAnimationStart,onAnimationEnd:e.handleAnimationEnd,dataKey:r,index:n,className:"recharts-bar-background-rectangle"});return Ge.createElement(r9,c9({key:"background-bar-".concat(n),option:e.props.background,isActive:n===i},l))})}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,r=n.data,i=n.xAxis,a=n.yAxis,s=n.layout,o=aU(n.children,C1);if(!o)return null;var l="vertical"===s?r[0].height/2:r[0].width/2,c=function(e,t){var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:B1(e,t)}},d={clipPath:e?"url(#clipPath-".concat(t,")"):null};return Ge.createElement(wU,d,o.map(function(e){return Ge.cloneElement(e,{key:"error-bar-".concat(t,"-").concat(e.props.dataKey),data:r,xAxis:i,yAxis:a,layout:s,offset:l,dataPointFormatter:c})}))}},{key:"render",value:function(){var e=this.props,t=e.hide,n=e.data,r=e.className,i=e.xAxis,a=e.yAxis,s=e.left,o=e.top,l=e.width,c=e.height,d=e.isAnimationActive,u=e.background,h=e.id;if(t||!n||!n.length)return null;var p=this.state.isAnimationFinished,m=Up("recharts-bar",r),f=i&&i.allowDataOverflow,g=a&&a.allowDataOverflow,v=f||g,x=tF(h)?this.id:h;return Ge.createElement(wU,{className:m},f||g?Ge.createElement("defs",null,Ge.createElement("clipPath",{id:"clipPath-".concat(x)},Ge.createElement("rect",{x:f?s:s-l/2,y:g?o:o-c/2,width:f?l:2*l,height:g?c:2*c}))):null,Ge.createElement(wU,{className:"recharts-bar-rectangles",clipPath:v?"url(#clipPath-".concat(x,")"):null},u?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(v,x),(!d||p)&&q2.renderCallByParent(this.props,n))}}],r=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curData:e.data,prevData:t.curData}:e.data!==t.curData?{curData:e.data}:null}}],n&&h9(t.prototype,n),r&&h9(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function b9(e){return(b9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S9(r.key),r)}}function j9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function N9(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j9(Object(n),!0).forEach(function(t){_9(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j9(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _9(e,t,n){return(t=S9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S9(e){var t=function(e,t){if("object"!=b9(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=b9(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b9(t)?t:t+""}i9=y9,v9(y9,"displayName","Bar"),v9(y9,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Dq,animationBegin:0,animationDuration:400,animationEasing:"ease"}),v9(y9,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,i=e.bandSize,a=e.xAxis,s=e.yAxis,o=e.xAxisTicks,l=e.yAxisTicks,c=e.stackedData,d=e.dataStartIndex,u=e.displayedData,h=e.offset,p=function(e,t){if(!e)return null;for(var n=0,r=e.length;n<r;n++)if(e[n].item===t)return e[n].position;return null}(r,n);if(!p)return null;var m=t.layout,f=n.type.defaultProps,g=void 0!==f?u9(u9({},f),n.props):n.props,v=g.dataKey,x=g.children,y=g.minPointSize,b="horizontal"===m?s:a,w=c?b.scale.domain():null,j=function(e){var t=e.numericAxis,n=t.scale.domain();if("number"===t.type){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]}({numericAxis:b}),N=aU(x,_X),_=u.map(function(e,t){var r,u,h,f,g,x;c?r=function(e,t){if(!t||2!==t.length||!OF(t[0])||!OF(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!OF(e[0])||e[0]<n)&&(i[0]=n),(!OF(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i}(c[d+t],w):(r=B1(e,v),Array.isArray(r)||(r=[j,r]));var b=a9(y,i9.defaultProps.minPointSize)(r[1],t);if("horizontal"===m){var _,S=[s.scale(r[0]),s.scale(r[1])],C=S[0],A=S[1];u=t2({axis:a,ticks:o,bandSize:i,offset:p.offset,entry:e,index:t}),h=null!==(_=null!=A?A:C)&&void 0!==_?_:void 0,f=p.size;var M=C-A;if(g=Number.isNaN(M)?0:M,x={x:u,y:s.y,width:f,height:s.height},Math.abs(b)>0&&Math.abs(g)<Math.abs(b)){var E=TF(g||b)*(Math.abs(b)-Math.abs(g));h-=E,g+=E}}else{var k=[a.scale(r[0]),a.scale(r[1])],T=k[0],P=k[1];if(u=T,h=t2({axis:s,ticks:l,bandSize:i,offset:p.offset,entry:e,index:t}),f=P-T,g=p.size,x={x:a.x,y:h,width:a.width,height:g},Math.abs(b)>0&&Math.abs(f)<Math.abs(b))f+=TF(f||b)*(Math.abs(b)-Math.abs(f))}return u9(u9(u9({},e),{},{x:u,y:h,width:f,height:g,value:c?r:r[1],payload:e,background:x},N&&N[t]&&N[t].props),{},{tooltipPayload:[l2(n,e)],tooltipPosition:{x:u+f/2,y:h+g/2}})});return u9({data:_,layout:m},h)});var C9=function(e,t,n,r,i){var a=e.width,s=e.height,o=e.layout,l=e.children,c=Object.keys(t),d={left:n.left,leftMirror:n.left,right:a-n.right,rightMirror:a-n.right,top:n.top,topMirror:n.top,bottom:s-n.bottom,bottomMirror:s-n.bottom},u=!!sU(l,y9);return c.reduce(function(a,s){var l,c,h,p,m,f=t[s],g=f.orientation,v=f.domain,x=f.padding,y=void 0===x?{}:x,b=f.mirror,w=f.reversed,j="".concat(g).concat(b?"Mirror":"");if("number"===f.type&&("gap"===f.padding||"no-gap"===f.padding)){var N=v[1]-v[0],_=1/0,S=f.categoricalDomain.sort(zF);if(S.forEach(function(e,t){t>0&&(_=Math.min((e||0)-(S[t-1]||0),_))}),Number.isFinite(_)){var C=_/N,A="vertical"===f.layout?n.height:n.width;if("gap"===f.padding&&(l=C*A/2),"no-gap"===f.padding){var M=LF(e.barCategoryGap,C*A),E=C*A/2;l=E-M-(E-M)/A*M}}}c="xAxis"===r?[n.left+(y.left||0)+(l||0),n.left+n.width-(y.right||0)-(l||0)]:"yAxis"===r?"horizontal"===o?[n.top+n.height-(y.bottom||0),n.top+(y.top||0)]:[n.top+(y.top||0)+(l||0),n.top+n.height-(y.bottom||0)-(l||0)]:f.range,w&&(c=[c[1],c[0]]);var k=X1(f,i,u),T=k.scale,P=k.realScaleType;T.domain(v).range(c),Y1(T);var O=Q1(T,N9(N9({},f),{},{realScaleType:P}));"xAxis"===r?(m="top"===g&&!b||"bottom"===g&&b,h=n.left,p=d[j]-m*f.height):"yAxis"===r&&(m="left"===g&&!b||"right"===g&&b,h=d[j]-m*f.width,p=n.top);var R=N9(N9(N9({},f),O),{},{realScaleType:P,x:h,y:p,scale:T,width:"xAxis"===r?n.width:f.width,height:"yAxis"===r?n.height:f.height});return R.bandSize=s2(R,O),f.hide||"xAxis"!==r?f.hide||(d[j]+=(m?-1:1)*R.width):d[j]+=(m?-1:1)*R.height,N9(N9({},a),{},_9({},s,R))},{})},A9=function(e,t){var n=e.x,r=e.y,i=t.x,a=t.y;return{x:Math.min(n,i),y:Math.min(r,a),width:Math.abs(i-n),height:Math.abs(a-r)}},M9=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scale=t}return t=e,n=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.bandAware,r=t.position;if(void 0!==e){if(r)switch(r){case"start":default:return this.scale(e);case"middle":var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i;case"end":var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}if(n){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),n=t[0],r=t[t.length-1];return n<=r?e>=n&&e<=r:e>=r&&e<=n}}],r=[{key:"create",value:function(t){return new e(t)}}],n&&w9(t.prototype,n),r&&w9(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();_9(M9,"EPS",1e-4);var E9=function(e){var t=Object.keys(e).reduce(function(t,n){return N9(N9({},t),{},_9({},n,M9.create(e[n])))},{});return N9(N9({},t),{},{apply:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.bandAware,i=n.position;return z8(e,function(e,n){return t[n].apply(e,{bandAware:r,position:i})})},isInRange:function(e){return X8(e,function(e,n){return t[n].isInRange(e)})}})};var k9=OW,T9=iG,P9=lG;var O9=function(e){return function(t,n,r){var i=Object(t);if(!T9(t)){var a=k9(n);t=P9(t),n=function(e){return a(i[e],e,i)}}var s=e(t,n,r);return s>-1?i[a?t[s]:s]:void 0}},R9=s8;var I9=RW,D9=OW,L9=function(e){var t=R9(e),n=t%1;return t==t?n?t-n:t:0},B9=Math.max;const F9=ie(O9(function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:L9(n);return i<0&&(i=B9(r+i,0)),I9(e,D9(t),i)}));var U9=MB(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),z9=Ve.createContext(void 0),H9=Ve.createContext(void 0),V9=Ve.createContext(void 0),G9=Ve.createContext({}),W9=Ve.createContext(void 0),K9=Ve.createContext(0),q9=Ve.createContext(0),X9=function(e){var t=e.state,n=t.xAxisMap,r=t.yAxisMap,i=t.offset,a=e.clipPathId,s=e.children,o=e.width,l=e.height,c=U9(i);return Ge.createElement(z9.Provider,{value:n},Ge.createElement(H9.Provider,{value:r},Ge.createElement(G9.Provider,{value:i},Ge.createElement(V9.Provider,{value:c},Ge.createElement(W9.Provider,{value:a},Ge.createElement(K9.Provider,{value:l},Ge.createElement(q9.Provider,{value:o},s)))))))},$9=function(e){var t=Ve.useContext(z9);null==t&&h1();var n=t[e];return null==n&&h1(),n},Y9=function(e){var t=Ve.useContext(H9);null==t&&h1();var n=t[e];return null==n&&h1(),n},J9=function(){return Ve.useContext(q9)},Z9=function(){return Ve.useContext(K9)};function Q9(e){return(Q9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e7(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l7(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function t7(e,t,n){return t=r7(t),function(e,t){if(t&&("object"===Q9(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,n7()?Reflect.construct(t,n||[],r7(e).constructor):t.apply(e,n))}function n7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(n7=function(){return!!e})()}function r7(e){return(r7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i7(e,t){return(i7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function a7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a7(Object(n),!0).forEach(function(t){o7(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a7(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o7(e,t,n){return(t=l7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l7(e){var t=function(e,t){if("object"!=Q9(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Q9(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Q9(t)?t:t+""}function c7(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t);else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d7(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d7(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d7(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u7(){return u7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u7.apply(this,arguments)}function h7(e){var t=e.x,n=e.y,r=e.segment,i=e.xAxisId,a=e.yAxisId,s=e.shape,o=e.className,l=e.alwaysShow,c=Ve.useContext(W9),d=$9(i),u=Y9(a),h=Ve.useContext(V9);if(!c||!h)return null;jU(void 0===l,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=function(e,t,n,r,i,a,s,o,l){var c=i.x,d=i.y,u=i.width,h=i.height;if(n){var p=l.y,m=e.y.apply(p,{position:a});if(D8(l,"discard")&&!e.y.isInRange(m))return null;var f=[{x:c+u,y:m},{x:c,y:m}];return"left"===o?f.reverse():f}if(t){var g=l.x,v=e.x.apply(g,{position:a});if(D8(l,"discard")&&!e.x.isInRange(v))return null;var x=[{x:v,y:d+h},{x:v,y:d}];return"top"===s?x.reverse():x}if(r){var y=l.segment.map(function(t){return e.apply(t,{position:a})});return D8(l,"discard")&&I8(y,function(t){return!e.isInRange(t)})?null:y}return null}(E9({x:d.scale,y:u.scale}),RF(t),RF(n),r&&2===r.length,h,e.position,d.orientation,u.orientation,e);if(!p)return null;var m=c7(p,2),f=m[0],g=f.x,v=f.y,x=m[1],y=x.x,b=x.y,w=s7(s7({clipPath:D8(e,"hidden")?"url(#".concat(c,")"):void 0},dU(e,!0)),{},{x1:g,y1:v,x2:y,y2:b});return Ge.createElement(wU,{className:Up("recharts-reference-line",o)},function(e,t){return Ge.isValidElement(e)?Ge.cloneElement(e,t):cL(e)?e(t):Ge.createElement("line",u7({},t,{className:"recharts-reference-line-line"}))}(s,w),O2.renderCallByParent(e,function(e){var t=e.x1,n=e.y1,r=e.x2,i=e.y2;return A9({x:t,y:n},{x:r,y:i})}({x1:g,y1:v,x2:y,y2:b})))}var p7=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t7(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i7(e,t)}(e,Ge.Component),e7(e,[{key:"render",value:function(){return Ge.createElement(h7,this.props)}}])}();function m7(){return m7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m7.apply(this,arguments)}function f7(e){return(f7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g7(Object(n),!0).forEach(function(t){N7(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g7(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function x7(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_7(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function y7(e,t,n){return t=w7(t),function(e,t){if(t&&("object"===f7(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,b7()?Reflect.construct(t,n||[],w7(e).constructor):t.apply(e,n))}function b7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(b7=function(){return!!e})()}function w7(e){return(w7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j7(e,t){return(j7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function N7(e,t,n){return(t=_7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _7(e){var t=function(e,t){if("object"!=f7(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=f7(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==f7(t)?t:t+""}o7(p7,"displayName","ReferenceLine"),o7(p7,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});var S7=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y7(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j7(e,t)}(e,Ge.Component),x7(e,[{key:"render",value:function(){var t=this.props,n=t.x,r=t.y,i=t.r,a=t.alwaysShow,s=t.clipPathId,o=RF(n),l=RF(r);if(jU(void 0===a,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!o||!l)return null;var c=function(e){var t=e.x,n=e.y,r=e.xAxis,i=e.yAxis,a=E9({x:r.scale,y:i.scale}),s=a.apply({x:t,y:n},{bandAware:!0});return D8(e,"discard")&&!a.isInRange(s)?null:s}(this.props);if(!c)return null;var d=c.x,u=c.y,h=this.props,p=h.shape,m=h.className,f=v7(v7({clipPath:D8(this.props,"hidden")?"url(#".concat(s,")"):void 0},dU(this.props,!0)),{},{cx:d,cy:u});return Ge.createElement(wU,{className:Up("recharts-reference-dot",m)},e.renderDot(p,f),O2.renderCallByParent(this.props,{x:d-i,y:u-i,width:2*i,height:2*i}))}}])}();function C7(){return C7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C7.apply(this,arguments)}function A7(e){return(A7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function E7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M7(Object(n),!0).forEach(function(t){I7(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M7(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function k7(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,D7(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function T7(e,t,n){return t=O7(t),function(e,t){if(t&&("object"===A7(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,P7()?Reflect.construct(t,n||[],O7(e).constructor):t.apply(e,n))}function P7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(P7=function(){return!!e})()}function O7(e){return(O7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R7(e,t){return(R7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function I7(e,t,n){return(t=D7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D7(e){var t=function(e,t){if("object"!=A7(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=A7(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==A7(t)?t:t+""}N7(S7,"displayName","ReferenceDot"),N7(S7,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),N7(S7,"renderDot",function(e,t){return Ge.isValidElement(e)?Ge.cloneElement(e,t):cL(e)?e(t):Ge.createElement(h4,m7({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"}))});var L7=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),T7(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R7(e,t)}(e,Ge.Component),k7(e,[{key:"render",value:function(){var t=this.props,n=t.x1,r=t.x2,i=t.y1,a=t.y2,s=t.className,o=t.alwaysShow,l=t.clipPathId;jU(void 0===o,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var c=RF(n),d=RF(r),u=RF(i),h=RF(a),p=this.props.shape;if(!(c||d||u||h||p))return null;var m=function(e,t,n,r,i){var a=i.x1,s=i.x2,o=i.y1,l=i.y2,c=i.xAxis,d=i.yAxis;if(!c||!d)return null;var u=E9({x:c.scale,y:d.scale}),h={x:e?u.x.apply(a,{position:"start"}):u.x.rangeMin,y:n?u.y.apply(o,{position:"start"}):u.y.rangeMin},p={x:t?u.x.apply(s,{position:"end"}):u.x.rangeMax,y:r?u.y.apply(l,{position:"end"}):u.y.rangeMax};return!D8(i,"discard")||u.isInRange(h)&&u.isInRange(p)?A9(h,p):null}(c,d,u,h,this.props);if(!m&&!p)return null;var f=D8(this.props,"hidden")?"url(#".concat(l,")"):void 0;return Ge.createElement(wU,{className:Up("recharts-reference-area",s)},e.renderRect(p,E7(E7({clipPath:f},dU(this.props,!0)),m)),O2.renderCallByParent(this.props,m))}}])}();function B7(e,t,n){if(t<1)return[];if(1===t&&void 0===n)return e;for(var r=[],i=0;i<e.length;i+=t)r.push(e[i]);return r}function F7(e,t,n){return function(e){var t=e.width,n=e.height,r=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),i=r*Math.PI/180,a=Math.atan(n/t),s=i>a&&i<Math.PI-a?n/Math.sin(i):t/Math.cos(i);return Math.abs(s)}({width:e.width+t.width,height:e.height+t.height},n)}function U7(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var a=n();return e*(t-e*a/2-r)>=0&&e*(t+e*a/2-i)<=0}function z7(e){return(z7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function V7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H7(Object(n),!0).forEach(function(t){G7(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H7(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function G7(e,t,n){return t=function(e){var t=function(e,t){if("object"!=z7(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=z7(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==z7(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W7(e,t,n){var r=e.tick,i=e.ticks,a=e.viewBox,s=e.minTickGap,o=e.orientation,l=e.interval,c=e.tickFormatter,d=e.unit,u=e.angle;if(!i||!i.length||!r)return[];if(OF(l)||Dq)return function(e,t){return B7(e,t+1)}(i,"number"==typeof l&&OF(l)?l:0);var h=[],p="top"===o||"bottom"===o?"width":"height",m=d&&"width"===p?PX(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},f=function(e,r){var i=cL(c)?c(e.value,r):e.value;return"width"===p?F7(PX(i,{fontSize:t,letterSpacing:n}),m,u):PX(i,{fontSize:t,letterSpacing:n})[p]},g=i.length>=2?TF(i[1].coordinate-i[0].coordinate):1,v=function(e,t,n){var r="width"===n,i=e.x,a=e.y,s=e.width,o=e.height;return 1===t?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}(a,g,p);return"equidistantPreserveStart"===l?function(e,t,n,r,i){for(var a,s=(r||[]).slice(),o=t.start,l=t.end,c=0,d=1,u=o,h=function(){var t=null==r?void 0:r[c];if(void 0===t)return{v:B7(r,d)};var a,s=c,h=function(){return void 0===a&&(a=n(t,s)),a},p=t.coordinate,m=0===c||U7(e,p,h,u,l);m||(c=0,u=o,d+=1),m&&(u=p+e*(h()/2+i),c+=d)};d<=s.length;)if(a=h())return a.v;return[]}(g,v,f,i,s):(h="preserveStart"===l||"preserveStartEnd"===l?function(e,t,n,r,i,a){var s=(r||[]).slice(),o=s.length,l=t.start,c=t.end;if(a){var d=r[o-1],u=n(d,o-1),h=e*(d.coordinate+e*u/2-c);s[o-1]=d=V7(V7({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate}),U7(e,d.tickCoord,function(){return u},l,c)&&(c=d.tickCoord-e*(u/2+i),s[o-1]=V7(V7({},d),{},{isShow:!0}))}for(var p=a?o-1:o,m=function(t){var r,a=s[t],o=function(){return void 0===r&&(r=n(a,t)),r};if(0===t){var d=e*(a.coordinate-e*o()/2-l);s[t]=a=V7(V7({},a),{},{tickCoord:d<0?a.coordinate-d*e:a.coordinate})}else s[t]=a=V7(V7({},a),{},{tickCoord:a.coordinate});U7(e,a.tickCoord,o,l,c)&&(l=a.tickCoord+e*(o()/2+i),s[t]=V7(V7({},a),{},{isShow:!0}))},f=0;f<p;f++)m(f);return s}(g,v,f,i,s,"preserveStartEnd"===l):function(e,t,n,r,i){for(var a=(r||[]).slice(),s=a.length,o=t.start,l=t.end,c=function(t){var r,c=a[t],d=function(){return void 0===r&&(r=n(c,t)),r};if(t===s-1){var u=e*(c.coordinate+e*d()/2-l);a[t]=c=V7(V7({},c),{},{tickCoord:u>0?c.coordinate-u*e:c.coordinate})}else a[t]=c=V7(V7({},c),{},{tickCoord:c.coordinate});U7(e,c.tickCoord,d,o,l)&&(l=c.tickCoord-e*(d()/2+i),a[t]=V7(V7({},c),{},{isShow:!0}))},d=s-1;d>=0;d--)c(d);return a}(g,v,f,i,s),h.filter(function(e){return e.isShow}))}I7(L7,"displayName","ReferenceArea"),I7(L7,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),I7(L7,"renderRect",function(e,t){return Ge.isValidElement(e)?Ge.cloneElement(e,t):cL(e)?e(t):Ge.createElement(n4,C7({},t,{className:"recharts-reference-area-rect"}))});var K7=["viewBox"],q7=["viewBox"],X7=["ticks"];function $7(e){return($7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y7(){return Y7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y7.apply(this,arguments)}function J7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Z7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J7(Object(n),!0).forEach(function(t){aee(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J7(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Q7(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function eee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,see(r.key),r)}}function tee(e,t,n){return t=ree(t),function(e,t){if(t&&("object"===$7(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,nee()?Reflect.construct(t,n||[],ree(e).constructor):t.apply(e,n))}function nee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(nee=function(){return!!e})()}function ree(e){return(ree=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iee(e,t){return(iee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function aee(e,t,n){return(t=see(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function see(e){var t=function(e,t){if("object"!=$7(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=$7(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==$7(t)?t:t+""}var oee=function(){function e(t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(n=tee(this,e,[t])).state={fontSize:"",letterSpacing:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iee(e,t)}(e,Ve.Component),t=e,n=[{key:"shouldComponentUpdate",value:function(e,t){var n=e.viewBox,r=Q7(e,K7),i=this.props,a=i.viewBox,s=Q7(i,q7);return!HF(n,a)||!HF(r,s)||!HF(t,this.state)}},{key:"componentDidMount",value:function(){var e=this.layerReference;if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];t&&this.setState({fontSize:window.getComputedStyle(t).fontSize,letterSpacing:window.getComputedStyle(t).letterSpacing})}}},{key:"getTickLineCoord",value:function(e){var t,n,r,i,a,s,o=this.props,l=o.x,c=o.y,d=o.width,u=o.height,h=o.orientation,p=o.tickSize,m=o.mirror,f=o.tickMargin,g=m?-1:1,v=e.tickSize||p,x=OF(e.tickCoord)?e.tickCoord:e.coordinate;switch(h){case"top":t=n=e.coordinate,s=(r=(i=c+ +!m*u)-g*v)-g*f,a=x;break;case"left":r=i=e.coordinate,a=(t=(n=l+ +!m*d)-g*v)-g*f,s=x;break;case"right":r=i=e.coordinate,a=(t=(n=l+ +m*d)+g*v)+g*f,s=x;break;default:t=n=e.coordinate,s=(r=(i=c+ +m*u)+g*v)+g*f,a=x}return{line:{x1:t,y1:r,x2:n,y2:i},tick:{x:a,y:s}}}},{key:"getTickTextAnchor",value:function(){var e,t=this.props,n=t.orientation,r=t.mirror;switch(n){case"left":e=r?"start":"end";break;case"right":e=r?"end":"start";break;default:e="middle"}return e}},{key:"getTickVerticalAnchor",value:function(){var e=this.props,t=e.orientation,n=e.mirror,r="end";switch(t){case"left":case"right":r="middle";break;case"top":r=n?"start":"end";break;default:r=n?"end":"start"}return r}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,i=e.height,a=e.orientation,s=e.mirror,o=e.axisLine,l=Z7(Z7(Z7({},dU(this.props,!1)),dU(o,!1)),{},{fill:"none"});if("top"===a||"bottom"===a){var c=+("top"===a&&!s||"bottom"===a&&s);l=Z7(Z7({},l),{},{x1:t,y1:n+c*i,x2:t+r,y2:n+c*i})}else{var d=+("left"===a&&!s||"right"===a&&s);l=Z7(Z7({},l),{},{x1:t+d*r,y1:n,x2:t+d*r,y2:n+i})}return Ge.createElement("line",Y7({},l,{className:Up("recharts-cartesian-axis-line",eF(o,"className"))}))}},{key:"renderTicks",value:function(t,n,r){var i=this,a=this.props,s=a.tickLine,o=a.stroke,l=a.tick,c=a.tickFormatter,d=a.unit,u=W7(Z7(Z7({},this.props),{},{ticks:t}),n,r),h=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),m=dU(this.props,!1),f=dU(l,!1),g=Z7(Z7({},m),{},{fill:"none"},dU(s,!1)),v=u.map(function(t,n){var r=i.getTickLineCoord(t),a=r.line,v=r.tick,x=Z7(Z7(Z7(Z7({textAnchor:h,verticalAnchor:p},m),{},{stroke:"none",fill:o},f),v),{},{index:n,payload:t,visibleTicksCount:u.length,tickFormatter:c});return Ge.createElement(wU,Y7({className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},$F(i.props,t,n)),s&&Ge.createElement("line",Y7({},g,a,{className:Up("recharts-cartesian-axis-tick-line",eF(s,"className"))})),l&&e.renderTickItem(l,x,"".concat(cL(c)?c(t.value,n):t.value).concat(d||"")))});return Ge.createElement("g",{className:"recharts-cartesian-axis-ticks"},v)}},{key:"render",value:function(){var e=this,t=this.props,n=t.axisLine,r=t.width,i=t.height,a=t.ticksGenerator,s=t.className;if(t.hide)return null;var o=this.props,l=o.ticks,c=Q7(o,X7),d=l;return cL(a)&&(d=l&&l.length>0?a(this.props):a(c)),r<=0||i<=0||!d||!d.length?null:Ge.createElement(wU,{className:Up("recharts-cartesian-axis",s),ref:function(t){e.layerReference=t}},n&&this.renderAxisLine(),this.renderTicks(d,this.state.fontSize,this.state.letterSpacing),O2.renderCallByParent(this.props))}}],r=[{key:"renderTickItem",value:function(e,t,n){var r=Up(t.className,"recharts-cartesian-axis-tick-value");return Ge.isValidElement(e)?Ge.cloneElement(e,Z7(Z7({},t),{},{className:r})):cL(e)?e(Z7(Z7({},t),{},{className:r})):Ge.createElement(o$,Y7({},t,{className:"recharts-cartesian-axis-tick-value"}),n)}}],n&&eee(t.prototype,n),r&&eee(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();aee(oee,"displayName","CartesianAxis"),aee(oee,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var lee=["x1","y1","x2","y2","key"],cee=["offset"];function dee(e){return(dee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function hee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uee(Object(n),!0).forEach(function(t){pee(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uee(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function pee(e,t,n){return t=function(e){var t=function(e,t){if("object"!=dee(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=dee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dee(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mee(){return mee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mee.apply(this,arguments)}function fee(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var gee=function(e){var t=e.fill;if(!t||"none"===t)return null;var n=e.fillOpacity,r=e.x,i=e.y,a=e.width,s=e.height,o=e.ry;return Ge.createElement("rect",{x:r,y:i,ry:o,width:a,height:s,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function vee(e,t){var n;if(Ge.isValidElement(e))n=Ge.cloneElement(e,t);else if(cL(e))n=e(t);else{var r=t.x1,i=t.y1,a=t.x2,s=t.y2,o=t.key,l=fee(t,lee),c=dU(l,!1);c.offset;var d=fee(c,cee);n=Ge.createElement("line",mee({},d,{x1:r,y1:i,x2:a,y2:s,fill:"none",key:o}))}return n}function xee(e){var t=e.x,n=e.width,r=e.horizontal,i=void 0===r||r,a=e.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(r,a){var s=hee(hee({},e),{},{x1:t,y1:r,x2:t+n,y2:r,key:"line-".concat(a),index:a});return vee(i,s)});return Ge.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function yee(e){var t=e.y,n=e.height,r=e.vertical,i=void 0===r||r,a=e.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(r,a){var s=hee(hee({},e),{},{x1:r,y1:t,x2:r,y2:t+n,key:"line-".concat(a),index:a});return vee(i,s)});return Ge.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function bee(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,i=e.y,a=e.width,s=e.height,o=e.horizontalPoints,l=e.horizontal;if(!(void 0===l||l)||!t||!t.length)return null;var c=o.map(function(e){return Math.round(e+i-i)}).sort(function(e,t){return e-t});i!==c[0]&&c.unshift(0);var d=c.map(function(e,o){var l=!c[o+1]?i+s-e:c[o+1]-e;if(l<=0)return null;var d=o%t.length;return Ge.createElement("rect",{key:"react-".concat(o),y:e,x:r,height:l,width:a,stroke:"none",fill:t[d],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Ge.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function wee(e){var t=e.vertical,n=void 0===t||t,r=e.verticalFill,i=e.fillOpacity,a=e.x,s=e.y,o=e.width,l=e.height,c=e.verticalPoints;if(!n||!r||!r.length)return null;var d=c.map(function(e){return Math.round(e+a-a)}).sort(function(e,t){return e-t});a!==d[0]&&d.unshift(0);var u=d.map(function(e,t){var n=!d[t+1]?a+o-e:d[t+1]-e;if(n<=0)return null;var c=t%r.length;return Ge.createElement("rect",{key:"react-".concat(t),x:e,y:s,width:n,height:l,stroke:"none",fill:r[c],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Ge.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var jee=function(e,t){var n=e.xAxis,r=e.width,i=e.height,a=e.offset;return G1(W7(hee(hee(hee({},oee.defaultProps),n),{},{ticks:W1(n,!0),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,t)},Nee=function(e,t){var n=e.yAxis,r=e.width,i=e.height,a=e.offset;return G1(W7(hee(hee(hee({},oee.defaultProps),n),{},{ticks:W1(n,!0),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,t)},_ee={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function See(e){var t,n,r,i,a,s,o,l,c=J9(),d=Z9(),u=Ve.useContext(G9),h=hee(hee({},e),{},{stroke:null!==(t=e.stroke)&&void 0!==t?t:_ee.stroke,fill:null!==(n=e.fill)&&void 0!==n?n:_ee.fill,horizontal:null!==(r=e.horizontal)&&void 0!==r?r:_ee.horizontal,horizontalFill:null!==(i=e.horizontalFill)&&void 0!==i?i:_ee.horizontalFill,vertical:null!==(a=e.vertical)&&void 0!==a?a:_ee.vertical,verticalFill:null!==(s=e.verticalFill)&&void 0!==s?s:_ee.verticalFill,x:OF(e.x)?e.x:u.left,y:OF(e.y)?e.y:u.top,width:OF(e.width)?e.width:u.width,height:OF(e.height)?e.height:u.height}),p=h.x,m=h.y,f=h.width,g=h.height,v=h.syncWithTicks,x=h.horizontalValues,y=h.verticalValues,b=(o=Ve.useContext(z9),BF(o)),w=(l=Ve.useContext(H9),F9(l,function(e){return X8(e.domain,Number.isFinite)})||BF(l));if(!OF(f)||f<=0||!OF(g)||g<=0||!OF(p)||p!==+p||!OF(m)||m!==+m)return null;var j=h.verticalCoordinatesGenerator||jee,N=h.horizontalCoordinatesGenerator||Nee,_=h.horizontalPoints,S=h.verticalPoints;if((!_||!_.length)&&cL(N)){var C=x&&x.length,A=N({yAxis:w?hee(hee({},w),{},{ticks:C?x:w.ticks}):void 0,width:c,height:d,offset:u},!!C||v);jU(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(dee(A),"]")),Array.isArray(A)&&(_=A)}if((!S||!S.length)&&cL(j)){var M=y&&y.length,E=j({xAxis:b?hee(hee({},b),{},{ticks:M?y:b.ticks}):void 0,width:c,height:d,offset:u},!!M||v);jU(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(dee(E),"]")),Array.isArray(E)&&(S=E)}return Ge.createElement("g",{className:"recharts-cartesian-grid"},Ge.createElement(gee,{fill:h.fill,fillOpacity:h.fillOpacity,x:h.x,y:h.y,width:h.width,height:h.height,ry:h.ry}),Ge.createElement(xee,mee({},h,{offset:u,horizontalPoints:_,xAxis:b,yAxis:w})),Ge.createElement(yee,mee({},h,{offset:u,verticalPoints:S,xAxis:b,yAxis:w})),Ge.createElement(bee,mee({},h,{horizontalPoints:_})),Ge.createElement(wee,mee({},h,{verticalPoints:S})))}See.displayName="CartesianGrid";var Cee=["type","layout","connectNulls","ref"],Aee=["key"];function Mee(e){return(Mee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Eee(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function kee(){return kee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kee.apply(this,arguments)}function Tee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Pee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tee(Object(n),!0).forEach(function(t){Uee(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tee(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Oee(e){return function(e){if(Array.isArray(e))return Ree(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ree(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ree(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ree(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Iee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zee(r.key),r)}}function Dee(e,t,n){return t=Bee(t),function(e,t){if(t&&("object"===Mee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Lee()?Reflect.construct(t,n||[],Bee(e).constructor):t.apply(e,n))}function Lee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Lee=function(){return!!e})()}function Bee(e){return(Bee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fee(e,t){return(Fee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Uee(e,t,n){return(t=zee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zee(e){var t=function(e,t){if("object"!=Mee(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Mee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Mee(t)?t:t+""}var Hee=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Uee(t=Dee(this,e,[].concat(r)),"state",{isAnimationFinished:!0,totalLength:0}),Uee(t,"generateSimpleStrokeDasharray",function(e,t){return"".concat(t,"px ").concat(e-t,"px")}),Uee(t,"getStrokeDasharray",function(n,r,i){var a=i.reduce(function(e,t){return e+t});if(!a)return t.generateSimpleStrokeDasharray(r,n);for(var s=Math.floor(n/a),o=n%a,l=r-n,c=[],d=0,u=0;d<i.length;u+=i[d],++d)if(u+i[d]>o){c=[].concat(Oee(i.slice(0,d)),[o-u]);break}var h=c.length%2==0?[0,l]:[l];return[].concat(Oee(e.repeat(i,s)),Oee(c),h).map(function(e){return"".concat(e,"px")}).join(", ")}),Uee(t,"id",DF("recharts-line-")),Uee(t,"pathRef",function(e){t.mainCurve=e}),Uee(t,"handleAnimationEnd",function(){t.setState({isAnimationFinished:!0}),t.props.onAnimationEnd&&t.props.onAnimationEnd()}),Uee(t,"handleAnimationStart",function(){t.setState({isAnimationFinished:!1}),t.props.onAnimationStart&&t.props.onAnimationStart()}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fee(e,t)}(e,Ve.PureComponent),t=e,n=[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();e!==this.state.totalLength&&this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(c$e){return 0}}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,r=n.points,i=n.xAxis,a=n.yAxis,s=n.layout,o=aU(n.children,C1);if(!o)return null;var l=function(e,t){return{x:e.x,y:e.y,value:e.value,errorVal:B1(e.payload,t)}},c={clipPath:e?"url(#clipPath-".concat(t,")"):null};return Ge.createElement(wU,c,o.map(function(e){return Ge.cloneElement(e,{key:"bar-".concat(e.props.dataKey),data:r,xAxis:i,yAxis:a,layout:s,dataPointFormatter:l})}))}},{key:"renderDots",value:function(t,n,r){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,a=i.dot,s=i.points,o=i.dataKey,l=dU(this.props,!1),c=dU(a,!0),d=s.map(function(t,n){var r=Pee(Pee(Pee({key:"dot-".concat(n),r:3},l),c),{},{index:n,cx:t.x,cy:t.y,value:t.value,dataKey:o,payload:t.payload,points:s});return e.renderDotItem(a,r)}),u={clipPath:t?"url(#clipPath-".concat(n?"":"dots-").concat(r,")"):null};return Ge.createElement(wU,kee({className:"recharts-line-dots",key:"dots"},u),d)}},{key:"renderCurveStatically",value:function(e,t,n,r){var i=this.props,a=i.type,s=i.layout,o=i.connectNulls;i.ref;var l=Eee(i,Cee),c=Pee(Pee(Pee({},dU(l,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:t?"url(#clipPath-".concat(n,")"):null,points:e},r),{},{type:a,layout:s,connectNulls:o});return Ge.createElement(p5,kee({},c,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(e,t){var n=this,r=this.props,i=r.points,a=r.strokeDasharray,s=r.isAnimationActive,o=r.animationBegin,l=r.animationDuration,c=r.animationEasing,d=r.animationId,u=r.animateNewValues,h=r.width,p=r.height,m=this.state,f=m.prevPoints,g=m.totalLength;return Ge.createElement(G3,{begin:o,duration:l,isActive:s,easing:c,from:{t:0},to:{t:1},key:"line-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(r){var s=r.t;if(f){var o=f.length/i.length,l=i.map(function(e,t){var n=Math.floor(t*o);if(f[n]){var r=f[n],i=FF(r.x,e.x),a=FF(r.y,e.y);return Pee(Pee({},e),{},{x:i(s),y:a(s)})}if(u){var l=FF(2*h,e.x),c=FF(p/2,e.y);return Pee(Pee({},e),{},{x:l(s),y:c(s)})}return Pee(Pee({},e),{},{x:e.x,y:e.y})});return n.renderCurveStatically(l,e,t)}var c,d=FF(0,g)(s);if(a){var m="".concat(a).split(/[,\s]+/gim).map(function(e){return parseFloat(e)});c=n.getStrokeDasharray(d,g,m)}else c=n.generateSimpleStrokeDasharray(g,d);return n.renderCurveStatically(i,e,t,{strokeDasharray:c})})}},{key:"renderCurve",value:function(e,t){var n=this.props,r=n.points,i=n.isAnimationActive,a=this.state,s=a.prevPoints,o=a.totalLength;return i&&r&&r.length&&(!s&&o>0||!c0(s,r))?this.renderCurveWithAnimation(e,t):this.renderCurveStatically(r,e,t)}},{key:"render",value:function(){var e,t=this.props,n=t.hide,r=t.dot,i=t.points,a=t.className,s=t.xAxis,o=t.yAxis,l=t.top,c=t.left,d=t.width,u=t.height,h=t.isAnimationActive,p=t.id;if(n||!i||!i.length)return null;var m=this.state.isAnimationFinished,f=1===i.length,g=Up("recharts-line",a),v=s&&s.allowDataOverflow,x=o&&o.allowDataOverflow,y=v||x,b=tF(p)?this.id:p,w=null!==(e=dU(r,!1))&&void 0!==e?e:{r:3,strokeWidth:2},j=w.r,N=void 0===j?3:j,_=w.strokeWidth,S=void 0===_?2:_,C=(cU(r)?r:{}).clipDot,A=void 0===C||C,M=2*N+S;return Ge.createElement(wU,{className:g},v||x?Ge.createElement("defs",null,Ge.createElement("clipPath",{id:"clipPath-".concat(b)},Ge.createElement("rect",{x:v?c:c-d/2,y:x?l:l-u/2,width:v?d:2*d,height:x?u:2*u})),!A&&Ge.createElement("clipPath",{id:"clipPath-dots-".concat(b)},Ge.createElement("rect",{x:c-M/2,y:l-M/2,width:d+M,height:u+M}))):null,!f&&this.renderCurve(y,b),this.renderErrorBar(y,b),(f||r)&&this.renderDots(y,A,b),(!h||m)&&q2.renderCallByParent(this.props,i))}}],r=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:t.curPoints}:e.points!==t.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,t){for(var n=e.length%2!=0?[].concat(Oee(e),[0]):e,r=[],i=0;i<t;++i)r=[].concat(Oee(r),Oee(n));return r}},{key:"renderDotItem",value:function(e,t){var n;if(Ge.isValidElement(e))n=Ge.cloneElement(e,t);else if(cL(e))n=e(t);else{var r=t.key,i=Eee(t,Aee),a=Up("recharts-line-dot","boolean"!=typeof e?e.className:"");n=Ge.createElement(h4,kee({key:r},i,{className:a}))}return n}}],n&&Iee(t.prototype,n),r&&Iee(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();Uee(Hee,"displayName","Line"),Uee(Hee,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Dq,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1}),Uee(Hee,"getComposedData",function(e){var t=e.props,n=e.xAxis,r=e.yAxis,i=e.xAxisTicks,a=e.yAxisTicks,s=e.dataKey,o=e.bandSize,l=e.displayedData,c=e.offset,d=t.layout;return Pee({points:l.map(function(e,t){var l=B1(e,s);return"horizontal"===d?{x:e2({axis:n,ticks:i,bandSize:o,entry:e,index:t}),y:tF(l)?null:r.scale(l),value:l,payload:e}:{x:tF(l)?null:n.scale(l),y:e2({axis:r,ticks:a,bandSize:o,entry:e,index:t}),value:l,payload:e}}),layout:d},c)});var Vee,Gee=["layout","type","stroke","connectNulls","isRange","ref"],Wee=["key"];function Kee(e){return(Kee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qee(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Xee(){return Xee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xee.apply(this,arguments)}function $ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Yee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$ee(Object(n),!0).forEach(function(t){nte(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$ee(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Jee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rte(r.key),r)}}function Zee(e,t,n){return t=ete(t),function(e,t){if(t&&("object"===Kee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Qee()?Reflect.construct(t,n||[],ete(e).constructor):t.apply(e,n))}function Qee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Qee=function(){return!!e})()}function ete(e){return(ete=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tte(e,t){return(tte=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nte(e,t,n){return(t=rte(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rte(e){var t=function(e,t){if("object"!=Kee(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Kee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Kee(t)?t:t+""}var ite=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return nte(t=Zee(this,e,[].concat(r)),"state",{isAnimationFinished:!0}),nte(t,"id",DF("recharts-area-")),nte(t,"handleAnimationEnd",function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),cL(e)&&e()}),nte(t,"handleAnimationStart",function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),cL(e)&&e()}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tte(e,t)}(e,Ve.PureComponent),t=e,n=[{key:"renderDots",value:function(t,n,r){var i=this.props.isAnimationActive,a=this.state.isAnimationFinished;if(i&&!a)return null;var s=this.props,o=s.dot,l=s.points,c=s.dataKey,d=dU(this.props,!1),u=dU(o,!0),h=l.map(function(t,n){var r=Yee(Yee(Yee({key:"dot-".concat(n),r:3},d),u),{},{index:n,cx:t.x,cy:t.y,dataKey:c,value:t.value,payload:t.payload,points:l});return e.renderDotItem(o,r)}),p={clipPath:t?"url(#clipPath-".concat(n?"":"dots-").concat(r,")"):null};return Ge.createElement(wU,Xee({className:"recharts-area-dots"},p),h)}},{key:"renderHorizontalRect",value:function(e){var t=this.props,n=t.baseLine,r=t.points,i=t.strokeWidth,a=r[0].x,s=r[r.length-1].x,o=e*Math.abs(a-s),l=$Q(r.map(function(e){return e.y||0}));return OF(n)&&"number"==typeof n?l=Math.max(n,l):n&&Array.isArray(n)&&n.length&&(l=Math.max($Q(n.map(function(e){return e.y||0})),l)),OF(l)?Ge.createElement("rect",{x:a<s?a:a-o,y:0,width:o,height:Math.floor(l+(i?parseInt("".concat(i),10):1))}):null}},{key:"renderVerticalRect",value:function(e){var t=this.props,n=t.baseLine,r=t.points,i=t.strokeWidth,a=r[0].y,s=r[r.length-1].y,o=e*Math.abs(a-s),l=$Q(r.map(function(e){return e.x||0}));return OF(n)&&"number"==typeof n?l=Math.max(n,l):n&&Array.isArray(n)&&n.length&&(l=Math.max($Q(n.map(function(e){return e.x||0})),l)),OF(l)?Ge.createElement("rect",{x:0,y:a<s?a:a-o,width:l+(i?parseInt("".concat(i),10):1),height:Math.floor(o)}):null}},{key:"renderClipRect",value:function(e){return"vertical"===this.props.layout?this.renderVerticalRect(e):this.renderHorizontalRect(e)}},{key:"renderAreaStatically",value:function(e,t,n,r){var i=this.props,a=i.layout,s=i.type,o=i.stroke,l=i.connectNulls,c=i.isRange;i.ref;var d=qee(i,Gee);return Ge.createElement(wU,{clipPath:n?"url(#clipPath-".concat(r,")"):null},Ge.createElement(p5,Xee({},dU(d,!0),{points:e,connectNulls:l,type:s,baseLine:t,layout:a,stroke:"none",className:"recharts-area-area"})),"none"!==o&&Ge.createElement(p5,Xee({},dU(this.props,!1),{className:"recharts-area-curve",layout:a,type:s,connectNulls:l,fill:"none",points:e})),"none"!==o&&c&&Ge.createElement(p5,Xee({},dU(this.props,!1),{className:"recharts-area-curve",layout:a,type:s,connectNulls:l,fill:"none",points:t})))}},{key:"renderAreaWithAnimation",value:function(e,t){var n=this,r=this.props,i=r.points,a=r.baseLine,s=r.isAnimationActive,o=r.animationBegin,l=r.animationDuration,c=r.animationEasing,d=r.animationId,u=this.state,h=u.prevPoints,p=u.prevBaseLine;return Ge.createElement(G3,{begin:o,duration:l,isActive:s,easing:c,from:{t:0},to:{t:1},key:"area-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(r){var s=r.t;if(h){var o,l=h.length/i.length,c=i.map(function(e,t){var n=Math.floor(t*l);if(h[n]){var r=h[n],i=FF(r.x,e.x),a=FF(r.y,e.y);return Yee(Yee({},e),{},{x:i(s),y:a(s)})}return e});return o=OF(a)&&"number"==typeof a?FF(p,a)(s):tF(a)||kF(a)?FF(p,0)(s):a.map(function(e,t){var n=Math.floor(t*l);if(p[n]){var r=p[n],i=FF(r.x,e.x),a=FF(r.y,e.y);return Yee(Yee({},e),{},{x:i(s),y:a(s)})}return e}),n.renderAreaStatically(c,o,e,t)}return Ge.createElement(wU,null,Ge.createElement("defs",null,Ge.createElement("clipPath",{id:"animationClipPath-".concat(t)},n.renderClipRect(s))),Ge.createElement(wU,{clipPath:"url(#animationClipPath-".concat(t,")")},n.renderAreaStatically(i,a,e,t)))})}},{key:"renderArea",value:function(e,t){var n=this.props,r=n.points,i=n.baseLine,a=n.isAnimationActive,s=this.state,o=s.prevPoints,l=s.prevBaseLine,c=s.totalLength;return a&&r&&r.length&&(!o&&c>0||!c0(o,r)||!c0(l,i))?this.renderAreaWithAnimation(e,t):this.renderAreaStatically(r,i,e,t)}},{key:"render",value:function(){var e,t=this.props,n=t.hide,r=t.dot,i=t.points,a=t.className,s=t.top,o=t.left,l=t.xAxis,c=t.yAxis,d=t.width,u=t.height,h=t.isAnimationActive,p=t.id;if(n||!i||!i.length)return null;var m=this.state.isAnimationFinished,f=1===i.length,g=Up("recharts-area",a),v=l&&l.allowDataOverflow,x=c&&c.allowDataOverflow,y=v||x,b=tF(p)?this.id:p,w=null!==(e=dU(r,!1))&&void 0!==e?e:{r:3,strokeWidth:2},j=w.r,N=void 0===j?3:j,_=w.strokeWidth,S=void 0===_?2:_,C=(cU(r)?r:{}).clipDot,A=void 0===C||C,M=2*N+S;return Ge.createElement(wU,{className:g},v||x?Ge.createElement("defs",null,Ge.createElement("clipPath",{id:"clipPath-".concat(b)},Ge.createElement("rect",{x:v?o:o-d/2,y:x?s:s-u/2,width:v?d:2*d,height:x?u:2*u})),!A&&Ge.createElement("clipPath",{id:"clipPath-dots-".concat(b)},Ge.createElement("rect",{x:o-M/2,y:s-M/2,width:d+M,height:u+M}))):null,f?null:this.renderArea(y,b),(r||f)&&this.renderDots(y,A,b),(!h||m)&&q2.renderCallByParent(this.props,i))}}],r=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,curBaseLine:e.baseLine,prevPoints:t.curPoints,prevBaseLine:t.curBaseLine}:e.points!==t.curPoints||e.baseLine!==t.curBaseLine?{curPoints:e.points,curBaseLine:e.baseLine}:null}}],n&&Jee(t.prototype,n),r&&Jee(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function ate(e){return(ate="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ste(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hte(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ote(e,t,n){return t=cte(t),function(e,t){if(t&&("object"===ate(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,lte()?Reflect.construct(t,n||[],cte(e).constructor):t.apply(e,n))}function lte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(lte=function(){return!!e})()}function cte(e){return(cte=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dte(e,t){return(dte=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ute(e,t,n){return(t=hte(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hte(e){var t=function(e,t){if("object"!=ate(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=ate(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==ate(t)?t:t+""}function pte(){return pte=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pte.apply(this,arguments)}function mte(e){var t=e.xAxisId,n=J9(),r=Z9(),i=$9(t);return null==i?null:Ve.createElement(oee,pte({},i,{className:Up("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(e){return W1(e,!0)}}))}Vee=ite,nte(ite,"displayName","Area"),nte(ite,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Dq,animationBegin:0,animationDuration:1500,animationEasing:"ease"}),nte(ite,"getBaseValue",function(e,t,n,r){var i=e.layout,a=e.baseValue,s=t.props.baseValue,o=null!=s?s:a;if(OF(o)&&"number"==typeof o)return o;var l="horizontal"===i?r:n,c=l.scale.domain();if("number"===l.type){var d=Math.max(c[0],c[1]),u=Math.min(c[0],c[1]);return"dataMin"===o?u:"dataMax"===o||d<0?d:Math.max(Math.min(c[0],c[1]),0)}return"dataMin"===o?c[0]:"dataMax"===o?c[1]:c[0]}),nte(ite,"getComposedData",function(e){var t,n=e.props,r=e.item,i=e.xAxis,a=e.yAxis,s=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,d=e.stackedData,u=e.dataStartIndex,h=e.displayedData,p=e.offset,m=n.layout,f=d&&d.length,g=Vee.getBaseValue(n,r,i,a),v="horizontal"===m,x=!1,y=h.map(function(e,t){var n;f?n=d[u+t]:(n=B1(e,c),Array.isArray(n)?x=!0:n=[g,n]);var r=null==n[1]||f&&null==B1(e,c);return v?{x:e2({axis:i,ticks:s,bandSize:l,entry:e,index:t}),y:r?null:a.scale(n[1]),value:n,payload:e}:{x:r?null:i.scale(n[1]),y:e2({axis:a,ticks:o,bandSize:l,entry:e,index:t}),value:n,payload:e}});return t=f||x?y.map(function(e){var t=Array.isArray(e.value)?e.value[0]:null;return v?{x:e.x,y:null!=t&&null!=e.y?a.scale(t):null}:{x:null!=t?i.scale(t):null,y:e.y}}):v?a.scale(g):i.scale(g),Yee({points:y,baseLine:t,layout:m,isRange:x},p)}),nte(ite,"renderDotItem",function(e,t){var n;if(Ge.isValidElement(e))n=Ge.cloneElement(e,t);else if(cL(e))n=e(t);else{var r=Up("recharts-area-dot","boolean"!=typeof e?e.className:""),i=t.key,a=qee(t,Wee);n=Ge.createElement(h4,Xee({},a,{key:i,className:r}))}return n});var fte=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ote(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dte(e,t)}(e,Ve.Component),ste(e,[{key:"render",value:function(){return Ve.createElement(mte,this.props)}}])}();function gte(e){return(gte="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vte(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nte(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function xte(e,t,n){return t=bte(t),function(e,t){if(t&&("object"===gte(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,yte()?Reflect.construct(t,n||[],bte(e).constructor):t.apply(e,n))}function yte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(yte=function(){return!!e})()}function bte(e){return(bte=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wte(e,t){return(wte=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jte(e,t,n){return(t=Nte(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nte(e){var t=function(e,t){if("object"!=gte(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=gte(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==gte(t)?t:t+""}function _te(){return _te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_te.apply(this,arguments)}ute(fte,"displayName","XAxis"),ute(fte,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});var Ste=function(e){var t=e.yAxisId,n=J9(),r=Z9(),i=Y9(t);return null==i?null:Ve.createElement(oee,_te({},i,{className:Up("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(e){return W1(e,!0)}}))},Cte=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),xte(this,e,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wte(e,t)}(e,Ve.Component),vte(e,[{key:"render",value:function(){return Ve.createElement(Ste,this.props)}}])}();function Ate(e){return function(e){if(Array.isArray(e))return Mte(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Mte(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mte(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mte(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}jte(Cte,"displayName","YAxis"),jte(Cte,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});var Ete=function(e,t,n,r,i){var a=aU(e,p7),s=aU(e,S7),o=[].concat(Ate(a),Ate(s)),l=aU(e,L7),c="".concat(r,"Id"),d=r[0],u=t;if(o.length&&(u=o.reduce(function(e,t){if(t.props[c]===n&&D8(t.props,"extendDomain")&&OF(t.props[d])){var r=t.props[d];return[Math.min(e[0],r),Math.max(e[1],r)]}return e},u)),l.length){var h="".concat(d,"1"),p="".concat(d,"2");u=l.reduce(function(e,t){if(t.props[c]===n&&D8(t.props,"extendDomain")&&OF(t.props[h])&&OF(t.props[p])){var r=t.props[h],i=t.props[p];return[Math.min(e[0],r,i),Math.max(e[1],r,i)]}return e},u)}return i&&i.length&&(u=i.reduce(function(e,t){return OF(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e},u)),u},kte={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,r,a,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new i(r,a||e,s),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,s=new Array(a);i<a;i++)s[i]=r[i].fn;return s},o.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,i,a,s){var o=n?n+e:e;if(!this._events[o])return!1;var l,c,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,r),!0;case 4:return d.fn.call(d.context,t,r,i),!0;case 5:return d.fn.call(d.context,t,r,i,a),!0;case 6:return d.fn.call(d.context,t,r,i,a,s),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var h,p=d.length;for(c=0;c<p;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,r);break;case 4:d[c].fn.call(d[c].context,t,r,i);break;default:if(!l)for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];d[c].fn.apply(d[c].context,l)}}return!0},o.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,r,i){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||i&&!o.once||r&&o.context!==r||s(this,a);else{for(var l=0,c=[],d=o.length;l<d;l++)(o[l].fn!==t||i&&!o[l].once||r&&o[l].context!==r)&&c.push(o[l]);c.length?this._events[a]=1===c.length?c[0]:c:s(this,a)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(kte);var Tte=new(ie(kte.exports)),Pte="recharts.syncMouseEvents";function Ote(e){return(Ote="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rte(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Dte(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ite(e,t,n){return(t=Dte(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dte(e){var t=function(e,t){if("object"!=Ote(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Ote(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Ote(t)?t:t+""}var Lte=function(){return Rte(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ite(this,"activeIndex",0),Ite(this,"coordinateList",[]),Ite(this,"layout","horizontal")},[{key:"setDetails",value:function(e){var t,n=e.coordinateList,r=void 0===n?null:n,i=e.container,a=void 0===i?null:i,s=e.layout,o=void 0===s?null:s,l=e.offset,c=void 0===l?null:l,d=e.mouseHandlerCallback,u=void 0===d?null:d;this.coordinateList=null!==(t=null!=r?r:this.coordinateList)&&void 0!==t?t:[],this.container=null!=a?a:this.container,this.layout=null!=o?o:this.layout,this.offset=null!=c?c:this.offset,this.mouseHandlerCallback=null!=u?u:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(e){if(0!==this.coordinateList.length)switch(e.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(e){this.activeIndex=e}},{key:"spoofMouse",value:function(){var e,t;if("horizontal"===this.layout&&0!==this.coordinateList.length){var n=this.container.getBoundingClientRect(),r=n.x,i=n.y,a=n.height,s=this.coordinateList[this.activeIndex].coordinate,o=(null===(e=window)||void 0===e?void 0:e.scrollX)||0,l=(null===(t=window)||void 0===t?void 0:t.scrollY)||0,c=r+s+o,d=i+this.offset.top+a/2+l;this.mouseHandlerCallback({pageX:c,pageY:d})}}}])}();function Bte(e){var t=e.cx,n=e.cy,r=e.radius,i=e.startAngle,a=e.endAngle;return{points:[v2(t,n,r,i),v2(t,n,r,a)],cx:t,cy:n,radius:r,startAngle:i,endAngle:a}}function Fte(e,t,n){var r,i,a,s;if("horizontal"===e)a=r=t.x,i=n.top,s=n.top+n.height;else if("vertical"===e)s=i=t.y,r=n.left,a=n.left+n.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return Bte(t);var o=t.cx,l=t.cy,c=t.innerRadius,d=t.outerRadius,u=t.angle,h=v2(o,l,c,u),p=v2(o,l,d,u);r=h.x,i=h.y,a=p.x,s=p.y}return[{x:r,y:i},{x:a,y:s}]}function Ute(e){return(Ute="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zte(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Hte(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zte(Object(n),!0).forEach(function(t){Vte(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zte(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Vte(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Ute(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Ute(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ute(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gte(e){var t,n,r,i=e.element,a=e.tooltipEventType,s=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,u=e.tooltipAxisBandSize,h=e.layout,p=e.chartName,m=null!==(t=i.props.cursor)&&void 0!==t?t:null===(n=i.type.defaultProps)||void 0===n?void 0:n.cursor;if(!i||!m||!s||!o||"ScatterChart"!==p&&"axis"!==a)return null;var f=p5;if("ScatterChart"===p)r=o,f=b4;else if("BarChart"===p)r=function(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-i:n.left+.5,y:"horizontal"===e?n.top+.5:t.y-i,width:"horizontal"===e?r:n.width-1,height:"horizontal"===e?n.height-1:r}}(h,o,c,u),f=n4;else if("radial"===h){var g=Bte(o),v=g.cx,x=g.cy,y=g.radius;r={cx:v,cy:x,startAngle:g.startAngle,endAngle:g.endAngle,innerRadius:y,outerRadius:y},f=n5}else r={points:Fte(h,o,c)},f=p5;var b=Hte(Hte(Hte(Hte({stroke:"#ccc",pointerEvents:"none"},c),r),dU(m,!1)),{},{payload:l,payloadIndex:d,className:Up("recharts-tooltip-cursor",m.className)});return Ve.isValidElement(m)?Ve.cloneElement(m,b):Ve.createElement(f,b)}var Wte=["item"],Kte=["children","className","width","height","style","compact","title","desc"];function qte(e){return(qte="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xte(){return Xte=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xte.apply(this,arguments)}function $te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t);else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||rne(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yte(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Jte(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lne(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zte(e,t,n){return t=ene(t),function(e,t){if(t&&("object"===qte(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Qte()?Reflect.construct(t,n||[],ene(e).constructor):t.apply(e,n))}function Qte(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Qte=function(){return!!e})()}function ene(e){return(ene=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tne(e,t){return(tne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nne(e){return function(e){if(Array.isArray(e))return ine(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rne(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rne(e,t){if(e){if("string"==typeof e)return ine(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ine(e,t):void 0}}function ine(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ane(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ane(Object(n),!0).forEach(function(t){one(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ane(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function one(e,t,n){return(t=lne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lne(e){var t=function(e,t){if("object"!=qte(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=qte(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qte(t)?t:t+""}var cne={xAxis:["bottom","top"],yAxis:["left","right"]},dne={width:"100%",height:"100%"},une={x:0,y:0};function hne(e){return e}var pne=function(e,t){var n=t.graphicalItems,r=t.dataStartIndex,i=t.dataEndIndex,a=(null!=n?n:[]).reduce(function(e,t){var n=t.props.data;return n&&n.length?[].concat(nne(e),nne(n)):e},[]);return a.length>0?a:e&&e.length&&OF(r)&&OF(i)?e.slice(r,i+1):[]};function mne(e){return"number"===e?[0,"auto"]:void 0}var fne=function(e,t,n,r){var i=e.graphicalItems,a=e.tooltipAxis,s=pne(t,e);return n<0||!i||!i.length||n>=s.length?null:i.reduce(function(i,o){var l,c,d=null!==(l=o.props.data)&&void 0!==l?l:t;(d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1)),a.dataKey&&!a.allowDuplicatedCategory)?c=UF(void 0===d?s:d,a.dataKey,r):c=d&&d[n]||s[n];return c?[].concat(nne(i),[l2(o,c)]):i},[])},gne=function(e,t,n,r){var i=r||{x:e.chartX,y:e.chartY},a=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}(i,n),s=e.orderedTooltipTicks,o=e.tooltipAxis,l=e.tooltipTicks,c=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=-1,s=null!==(t=null==n?void 0:n.length)&&void 0!==t?t:0;if(s<=1)return 0;if(i&&"angleAxis"===i.axisType&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var o=i.range,l=0;l<s;l++){var c=l>0?r[l-1].coordinate:r[s-1].coordinate,d=r[l].coordinate,u=l>=s-1?r[0].coordinate:r[l+1].coordinate,h=void 0;if(TF(d-c)!==TF(u-d)){var p=[];if(TF(u-d)===TF(o[1]-o[0])){h=u;var m=d+o[1]-o[0];p[0]=Math.min(m,(m+c)/2),p[1]=Math.max(m,(m+c)/2)}else{h=c;var f=u+o[1]-o[0];p[0]=Math.min(d,(f+d)/2),p[1]=Math.max(d,(f+d)/2)}var g=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>g[0]&&e<=g[1]||e>=p[0]&&e<=p[1]){a=r[l].index;break}}else{var v=Math.min(c,u),x=Math.max(c,u);if(e>(v+d)/2&&e<=(x+d)/2){a=r[l].index;break}}}else for(var y=0;y<s;y++)if(0===y&&e<=(n[y].coordinate+n[y+1].coordinate)/2||y>0&&y<s-1&&e>(n[y].coordinate+n[y-1].coordinate)/2&&e<=(n[y].coordinate+n[y+1].coordinate)/2||y===s-1&&e>(n[y].coordinate+n[y-1].coordinate)/2){a=n[y].index;break}return a}(a,s,l,o);if(c>=0&&l){var d=l[c]&&l[c].value,u=fne(e,t,c,d),h=function(e,t,n,r){var i=t.find(function(e){return e&&e.index===n});if(i){if("horizontal"===e)return{x:i.coordinate,y:r.y};if("vertical"===e)return{x:r.x,y:i.coordinate};if("centric"===e){var a=i.coordinate,s=r.radius;return sne(sne(sne({},r),v2(r.cx,r.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,l=r.angle;return sne(sne(sne({},r),v2(r.cx,r.cy,o,l)),{},{angle:l,radius:o})}return une}(n,s,c,i);return{activeTooltipIndex:c,activeLabel:d,activePayload:u,activeCoordinate:h}}return null},vne=function(e,t){var n=t.axes,r=t.graphicalItems,i=t.axisType,a=t.axisIdKey,s=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,d=e.children,u=e.stackOffset,h=V1(c,i);return n.reduce(function(t,n){var p,m=void 0!==n.type.defaultProps?sne(sne({},n.type.defaultProps),n.props):n.props,f=m.type,g=m.dataKey,v=m.allowDataOverflow,x=m.allowDuplicatedCategory,y=m.scale,b=m.ticks,w=m.includeHidden,j=m[a];if(t[j])return t;var N,_,S,C=pne(e.data,{graphicalItems:r.filter(function(e){var t;return(a in e.props?e.props[a]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[a])===j}),dataStartIndex:o,dataEndIndex:l}),A=C.length;(function(e,t,n){if("number"===n&&!0===t&&Array.isArray(e)){var r=null==e?void 0:e[0],i=null==e?void 0:e[1];if(r&&i&&OF(r)&&OF(i))return!0}return!1})(m.domain,v,f)&&(N=a2(m.domain,null,v),!h||"number"!==f&&"auto"===y||(S=F1(C,g,"category")));var M=mne(f);if(!N||0===N.length){var E,k=null!==(E=m.domain)&&void 0!==E?E:M;if(g){if(N=F1(C,g,f),"category"===f&&h){var T=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++){if(n[e[r]])return!0;n[e[r]]=!0}return!1}(N);x&&T?(_=N,N=d8(0,A)):x||(N=o2(k,N,n).reduce(function(e,t){return e.indexOf(t)>=0?e:[].concat(nne(e),[t])},[]))}else if("category"===f)N=x?N.filter(function(e){return""!==e&&!tF(e)}):o2(k,N,n).reduce(function(e,t){return e.indexOf(t)>=0||""===t||tF(t)?e:[].concat(nne(e),[t])},[]);else if("number"===f){var P=function(e,t,n,r,i){var a=t.map(function(t){return z1(e,t,n,i,r)}).filter(function(e){return!tF(e)});return a&&a.length?a.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]):null}(C,r.filter(function(e){var t,n,r=a in e.props?e.props[a]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[a],i="hide"in e.props?e.props.hide:null===(n=e.type.defaultProps)||void 0===n?void 0:n.hide;return r===j&&(w||!i)}),g,i,c);P&&(N=P)}!h||"number"!==f&&"auto"===y||(S=F1(C,g,"category"))}else N=h?d8(0,A):s&&s[j]&&s[j].hasStack&&"number"===f?"expand"===u?[0,1]:n2(s[j].stackGroups,o,l):H1(C,r.filter(function(e){var t=a in e.props?e.props[a]:e.type.defaultProps[a],n="hide"in e.props?e.props.hide:e.type.defaultProps.hide;return t===j&&(w||!n)}),f,c,!0);if("number"===f)N=Ete(d,N,j,i,b),k&&(N=a2(k,N,v));else if("category"===f&&k){var O=k;N.every(function(e){return O.indexOf(e)>=0})&&(N=O)}}return sne(sne({},t),{},one({},j,sne(sne({},m),{},{axisType:i,domain:N,categoricalDomain:S,duplicateDomain:_,originalDomain:null!==(p=m.domain)&&void 0!==p?p:M,isCategorical:h,layout:c})))},{})},xne=function(e,t){var n=t.axisType,r=void 0===n?"xAxis":n,i=t.AxisComp,a=t.graphicalItems,s=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.children,d="".concat(r,"Id"),u=aU(c,i),h={};return u&&u.length?h=vne(e,{axes:u,graphicalItems:a,axisType:r,axisIdKey:d,stackGroups:s,dataStartIndex:o,dataEndIndex:l}):a&&a.length&&(h=function(e,t){var n=t.graphicalItems,r=t.Axis,i=t.axisType,a=t.axisIdKey,s=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,d=e.children,u=pne(e.data,{graphicalItems:n,dataStartIndex:o,dataEndIndex:l}),h=u.length,p=V1(c,i),m=-1;return n.reduce(function(e,t){var f,g=(void 0!==t.type.defaultProps?sne(sne({},t.type.defaultProps),t.props):t.props)[a],v=mne("number");return e[g]?e:(m++,p?f=d8(0,h):s&&s[g]&&s[g].hasStack?(f=n2(s[g].stackGroups,o,l),f=Ete(d,f,g,i)):(f=a2(v,H1(u,n.filter(function(e){var t,n,r=a in e.props?e.props[a]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[a],i="hide"in e.props?e.props.hide:null===(n=e.type.defaultProps)||void 0===n?void 0:n.hide;return r===g&&!i}),"number",c),r.defaultProps.allowDataOverflow),f=Ete(d,f,g,i)),sne(sne({},e),{},one({},g,sne(sne({axisType:i},r.defaultProps),{},{hide:!0,orientation:eF(cne,"".concat(i,".").concat(m%2),null),domain:f,originalDomain:v,isCategorical:p,layout:c}))))},{})}(e,{Axis:i,graphicalItems:a,axisType:r,axisIdKey:d,stackGroups:s,dataStartIndex:o,dataEndIndex:l})),h},yne=function(e){var t=e.children,n=e.defaultShowTooltip,r=sU(t,M8),i=0,a=0;return e.data&&0!==e.data.length&&(a=e.data.length-1),r&&r.props&&(r.props.startIndex>=0&&(i=r.props.startIndex),r.props.endIndex>=0&&(a=r.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:Boolean(n)}},bne=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},wne=function(e,t){var n=e.props,r=(e.graphicalItems,e.xAxisMap),i=void 0===r?{}:r,a=e.yAxisMap,s=void 0===a?{}:a,o=n.width,l=n.height,c=n.children,d=n.margin||{},u=sU(c,M8),h=sU(c,pK),p=Object.keys(s).reduce(function(e,t){var n=s[t],r=n.orientation;return n.mirror||n.hide?e:sne(sne({},e),{},one({},r,e[r]+n.width))},{left:d.left||0,right:d.right||0}),m=Object.keys(i).reduce(function(e,t){var n=i[t],r=n.orientation;return n.mirror||n.hide?e:sne(sne({},e),{},one({},r,eF(e,"".concat(r))+n.height))},{top:d.top||0,bottom:d.bottom||0}),f=sne(sne({},m),p),g=f.bottom;u&&(f.bottom+=u.props.height||M8.defaultProps.height),h&&t&&(f=function(e,t,n,r){var i=n.children,a=n.width,s=n.margin,o=a-(s.left||0)-(s.right||0),l=T1({children:i,legendWidth:o});if(l){var c=r||{},d=c.width,u=c.height,h=l.align,p=l.verticalAlign,m=l.layout;if(("vertical"===m||"horizontal"===m&&"middle"===p)&&"center"!==h&&OF(e[h]))return D1(D1({},e),{},L1({},h,e[h]+(d||0)));if(("horizontal"===m||"vertical"===m&&"center"===h)&&"middle"!==p&&OF(e[p]))return D1(D1({},e),{},L1({},p,e[p]+(u||0)))}return e}(f,0,n,t));var v=o-f.left-f.right,x=l-f.top-f.bottom;return sne(sne({brushBottom:g},f),{},{width:Math.max(v,0),height:Math.max(x,0)})},jne=function(e,t){return"xAxis"===t?e[t].width:"yAxis"===t?e[t].height:void 0},Nne=function(e){var t=e.chartName,n=e.GraphicalChild,r=e.defaultTooltipEventType,i=void 0===r?"axis":r,a=e.validateTooltipEventTypes,s=void 0===a?["axis"]:a,o=e.axisComponents,l=e.legendContent,c=e.formatAxisMap,d=e.defaultProps,u=function(e,t){var n=t.graphicalItems,r=t.stackGroups,i=t.offset,a=t.updateId,s=t.dataStartIndex,l=t.dataEndIndex,c=e.barSize,d=e.layout,u=e.barGap,h=e.barCategoryGap,p=e.maxBarSize,m=bne(d),f=m.numericAxisName,g=m.cateAxisName,v=function(e){return!(!e||!e.length)&&e.some(function(e){var t=tU(e&&e.type);return t&&t.indexOf("Bar")>=0})}(n),x=[];return n.forEach(function(n,m){var y=pne(e.data,{graphicalItems:[n],dataStartIndex:s,dataEndIndex:l}),b=void 0!==n.type.defaultProps?sne(sne({},n.type.defaultProps),n.props):n.props,w=b.dataKey,j=b.maxBarSize,N=b["".concat(f,"Id")],_=b["".concat(g,"Id")],S=o.reduce(function(e,n){var r=t["".concat(n.axisType,"Map")],i=b["".concat(n.axisType,"Id")];r&&r[i]||"zAxis"===n.axisType||h1();var a=r[i];return sne(sne({},e),{},one(one({},n.axisType,a),"".concat(n.axisType,"Ticks"),W1(a)))},{}),C=S[g],A=S["".concat(g,"Ticks")],M=r&&r[N]&&r[N].hasStack&&function(e,t){var n,r=(null!==(n=e.type)&&void 0!==n&&n.defaultProps?D1(D1({},e.type.defaultProps),e.props):e.props).stackId;if(RF(r)){var i=t[r];if(i){var a=i.items.indexOf(e);return a>=0?i.stackedData[a]:null}}return null}(n,r[N].stackGroups),E=tU(n.type).indexOf("Bar")>=0,k=s2(C,A),T=[],P=v&&function(e){var t=e.barSize,n=e.totalSize,r=e.stackGroups,i=void 0===r?{}:r;if(!i)return{};for(var a={},s=Object.keys(i),o=0,l=s.length;o<l;o++)for(var c=i[s[o]].stackGroups,d=Object.keys(c),u=0,h=d.length;u<h;u++){var p=c[d[u]],m=p.items,f=p.cateAxisId,g=m.filter(function(e){return tU(e.type).indexOf("Bar")>=0});if(g&&g.length){var v=g[0].type.defaultProps,x=void 0!==v?D1(D1({},v),g[0].props):g[0].props,y=x.barSize,b=x[f];a[b]||(a[b]=[]);var w=tF(y)?t:y;a[b].push({item:g[0],stackList:g.slice(1),barSize:tF(w)?void 0:LF(w,n,0)})}}return a}({barSize:c,stackGroups:r,totalSize:jne(S,g)});if(E){var O,R,I=tF(j)?p:j,D=null!==(O=null!==(R=s2(C,A,!0))&&void 0!==R?R:I)&&void 0!==O?O:0;T=function(e){var t=e.barGap,n=e.barCategoryGap,r=e.bandSize,i=e.sizeList,a=void 0===i?[]:i,s=e.maxBarSize,o=a.length;if(o<1)return null;var l,c=LF(t,r,0,!0),d=[];if(a[0].barSize===+a[0].barSize){var u=!1,h=r/o,p=a.reduce(function(e,t){return e+t.barSize||0},0);(p+=(o-1)*c)>=r&&(p-=(o-1)*c,c=0),p>=r&&h>0&&(u=!0,p=o*(h*=.9));var m={offset:((r-p)/2|0)-c,size:0};l=a.reduce(function(e,t){var n={item:t.item,position:{offset:m.offset+m.size+c,size:u?h:t.barSize}},r=[].concat(O1(e),[n]);return m=r[r.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){r.push({item:e,position:m})}),r},d)}else{var f=LF(n,r,0,!0);r-2*f-(o-1)*c<=0&&(c=0);var g=(r-2*f-(o-1)*c)/o;g>1&&(g>>=0);var v=s===+s?Math.min(g,s):g;l=a.reduce(function(e,t,n){var r=[].concat(O1(e),[{item:t.item,position:{offset:f+(g+c)*n+(g-v)/2,size:v}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){r.push({item:e,position:r[r.length-1].position})}),r},d)}return l}({barGap:u,barCategoryGap:h,bandSize:D!==k?D:k,sizeList:P[_],maxBarSize:I}),D!==k&&(T=T.map(function(e){return sne(sne({},e),{},{position:sne(sne({},e.position),{},{offset:e.position.offset-D/2})})}))}var L,B,F=n&&n.type&&n.type.getComposedData;F&&x.push({props:sne(sne({},F(sne(sne({},S),{},{displayedData:y,props:e,dataKey:w,item:n,bandSize:k,barPosition:T,offset:i,stackedData:M,layout:d,dataStartIndex:s,dataEndIndex:l}))),{},one(one(one({key:n.key||"item-".concat(m)},f,S[f]),g,S[g]),"animationId",a)),childIndex:(L=n,B=e.children,iU(B).indexOf(L)),item:n})}),x},h=function(e,r){var i=e.props,a=e.dataStartIndex,s=e.dataEndIndex,l=e.updateId;if(!oU({props:i}))return null;var d=i.children,h=i.layout,p=i.stackOffset,m=i.data,f=i.reverseStackOrder,g=bne(h),v=g.numericAxisName,x=g.cateAxisName,y=aU(d,n),b=function(e,t,n,r,i,a){if(!e)return null;var s=(a?t.reverse():t).reduce(function(e,t){var i,a=null!==(i=t.type)&&void 0!==i&&i.defaultProps?D1(D1({},t.type.defaultProps),t.props):t.props,s=a.stackId;if(a.hide)return e;var o=a[n],l=e[o]||{hasStack:!1,stackGroups:{}};if(RF(s)){var c=l.stackGroups[s]||{numericAxisId:n,cateAxisId:r,items:[]};c.items.push(t),l.hasStack=!0,l.stackGroups[s]=c}else l.stackGroups[DF("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[t]};return D1(D1({},e),{},L1({},o,l))},{});return Object.keys(s).reduce(function(t,a){var o=s[a];return o.hasStack&&(o.stackGroups=Object.keys(o.stackGroups).reduce(function(t,a){var s=o.stackGroups[a];return D1(D1({},t),{},L1({},a,{numericAxisId:n,cateAxisId:r,items:s.items,stackedData:Z1(e,s.items,i)}))},{})),D1(D1({},t),{},L1({},a,o))},{})}(m,y,"".concat(v,"Id"),"".concat(x,"Id"),p,f),w=o.reduce(function(e,t){var n="".concat(t.axisType,"Map");return sne(sne({},e),{},one({},n,xne(i,sne(sne({},t),{},{graphicalItems:y,stackGroups:t.axisType===v&&b,dataStartIndex:a,dataEndIndex:s}))))},{}),j=wne(sne(sne({},w),{},{props:i,graphicalItems:y}),null==r?void 0:r.legendBBox);Object.keys(w).forEach(function(e){w[e]=c(i,w[e],j,e.replace("Map",""),t)});var N,_,S=w["".concat(x,"Map")],C=(N=BF(S),{tooltipTicks:_=W1(N,!1,!0),orderedTooltipTicks:cq(_,function(e){return e.coordinate}),tooltipAxis:N,tooltipAxisBandSize:s2(N,_)}),A=u(i,sne(sne({},w),{},{dataStartIndex:a,dataEndIndex:s,updateId:l,graphicalItems:y,stackGroups:b,offset:j}));return sne(sne({formattedGraphicalItems:A,graphicalItems:y,offset:j,stackGroups:b},C),w)},p=function(){function e(n){var r,i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),one(a=Zte(this,e,[n]),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),one(a,"accessibilityManager",new Lte),one(a,"handleLegendBBoxUpdate",function(e){if(e){var t=a.state,n=t.dataStartIndex,r=t.dataEndIndex,i=t.updateId;a.setState(sne({legendBBox:e},h({props:a.props,dataStartIndex:n,dataEndIndex:r,updateId:i},sne(sne({},a.state),{},{legendBBox:e}))))}}),one(a,"handleReceiveSyncEvent",function(e,t,n){if(a.props.syncId===e){if(n===a.eventEmitterSymbol&&"function"!=typeof a.props.syncMethod)return;a.applySyncEvent(t)}}),one(a,"handleBrushChange",function(e){var t=e.startIndex,n=e.endIndex;if(t!==a.state.dataStartIndex||n!==a.state.dataEndIndex){var r=a.state.updateId;a.setState(function(){return sne({dataStartIndex:t,dataEndIndex:n},h({props:a.props,dataStartIndex:t,dataEndIndex:n,updateId:r},a.state))}),a.triggerSyncEvent({dataStartIndex:t,dataEndIndex:n})}}),one(a,"handleMouseEnter",function(e){var t=a.getMouseInfo(e);if(t){var n=sne(sne({},t),{},{isTooltipActive:!0});a.setState(n),a.triggerSyncEvent(n);var r=a.props.onMouseEnter;cL(r)&&r(n,e)}}),one(a,"triggeredAfterMouseMove",function(e){var t=a.getMouseInfo(e),n=t?sne(sne({},t),{},{isTooltipActive:!0}):{isTooltipActive:!1};a.setState(n),a.triggerSyncEvent(n);var r=a.props.onMouseMove;cL(r)&&r(n,e)}),one(a,"handleItemMouseEnter",function(e){a.setState(function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}})}),one(a,"handleItemMouseLeave",function(){a.setState(function(){return{isTooltipActive:!1}})}),one(a,"handleMouseMove",function(e){e.persist(),a.throttleTriggeredAfterMouseMove(e)}),one(a,"handleMouseLeave",function(e){a.throttleTriggeredAfterMouseMove.cancel();var t={isTooltipActive:!1};a.setState(t),a.triggerSyncEvent(t);var n=a.props.onMouseLeave;cL(n)&&n(t,e)}),one(a,"handleOuterEvent",function(e){var t,n=function(e){var t=e&&e.type;return t&&eU[t]?eU[t]:null}(e),r=eF(a.props,"".concat(n));n&&cL(r)&&r(null!==(t=/.*touch.*/i.test(n)?a.getMouseInfo(e.changedTouches[0]):a.getMouseInfo(e))&&void 0!==t?t:{},e)}),one(a,"handleClick",function(e){var t=a.getMouseInfo(e);if(t){var n=sne(sne({},t),{},{isTooltipActive:!0});a.setState(n),a.triggerSyncEvent(n);var r=a.props.onClick;cL(r)&&r(n,e)}}),one(a,"handleMouseDown",function(e){var t=a.props.onMouseDown;cL(t)&&t(a.getMouseInfo(e),e)}),one(a,"handleMouseUp",function(e){var t=a.props.onMouseUp;cL(t)&&t(a.getMouseInfo(e),e)}),one(a,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&a.throttleTriggeredAfterMouseMove(e.changedTouches[0])}),one(a,"handleTouchStart",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&a.handleMouseDown(e.changedTouches[0])}),one(a,"handleTouchEnd",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&a.handleMouseUp(e.changedTouches[0])}),one(a,"handleDoubleClick",function(e){var t=a.props.onDoubleClick;cL(t)&&t(a.getMouseInfo(e),e)}),one(a,"handleContextMenu",function(e){var t=a.props.onContextMenu;cL(t)&&t(a.getMouseInfo(e),e)}),one(a,"triggerSyncEvent",function(e){void 0!==a.props.syncId&&Tte.emit(Pte,a.props.syncId,e,a.eventEmitterSymbol)}),one(a,"applySyncEvent",function(e){var t=a.props,n=t.layout,r=t.syncMethod,i=a.state.updateId,s=e.dataStartIndex,o=e.dataEndIndex;if(void 0!==e.dataStartIndex||void 0!==e.dataEndIndex)a.setState(sne({dataStartIndex:s,dataEndIndex:o},h({props:a.props,dataStartIndex:s,dataEndIndex:o,updateId:i},a.state)));else if(void 0!==e.activeTooltipIndex){var l=e.chartX,c=e.chartY,d=e.activeTooltipIndex,u=a.state,p=u.offset,m=u.tooltipTicks;if(!p)return;if("function"==typeof r)d=r(m,e);else if("value"===r){d=-1;for(var f=0;f<m.length;f++)if(m[f].value===e.activeLabel){d=f;break}}var g=sne(sne({},p),{},{x:p.left,y:p.top}),v=Math.min(l,g.x+g.width),x=Math.min(c,g.y+g.height),y=m[d]&&m[d].value,b=fne(a.state,a.props.data,d),w=m[d]?{x:"horizontal"===n?m[d].coordinate:v,y:"horizontal"===n?x:m[d].coordinate}:une;a.setState(sne(sne({},e),{},{activeLabel:y,activeCoordinate:w,activePayload:b,activeTooltipIndex:d}))}else a.setState(e)}),one(a,"renderCursor",function(e){var n,r=a.state,i=r.isTooltipActive,s=r.activeCoordinate,o=r.activePayload,l=r.offset,c=r.activeTooltipIndex,d=r.tooltipAxisBandSize,u=a.getTooltipEventType(),h=null!==(n=e.props.active)&&void 0!==n?n:i,p=a.props.layout,m=e.key||"_recharts-cursor";return Ge.createElement(Gte,{key:m,activeCoordinate:s,activePayload:o,activeTooltipIndex:c,chartName:t,element:e,isActive:h,layout:p,offset:l,tooltipAxisBandSize:d,tooltipEventType:u})}),one(a,"renderPolarAxis",function(e,t,n){var r=eF(e,"type.axisType"),i=eF(a.state,"".concat(r,"Map")),s=e.type.defaultProps,o=void 0!==s?sne(sne({},s),e.props):e.props,l=i&&i[o["".concat(r,"Id")]];return Ve.cloneElement(e,sne(sne({},l),{},{className:Up(r,l.className),key:e.key||"".concat(t,"-").concat(n),ticks:W1(l,!0)}))}),one(a,"renderPolarGrid",function(e){var t=e.props,n=t.radialLines,r=t.polarAngles,i=t.polarRadius,s=a.state,o=s.radiusAxisMap,l=s.angleAxisMap,c=BF(o),d=BF(l),u=d.cx,h=d.cy,p=d.innerRadius,m=d.outerRadius;return Ve.cloneElement(e,{polarAngles:Array.isArray(r)?r:W1(d,!0).map(function(e){return e.coordinate}),polarRadius:Array.isArray(i)?i:W1(c,!0).map(function(e){return e.coordinate}),cx:u,cy:h,innerRadius:p,outerRadius:m,key:e.key||"polar-grid",radialLines:n})}),one(a,"renderLegend",function(){var e=a.state.formattedGraphicalItems,t=a.props,n=t.children,r=t.width,i=t.height,s=a.props.margin||{},o=r-(s.left||0)-(s.right||0),c=T1({children:n,formattedGraphicalItems:e,legendWidth:o,legendContent:l});if(!c)return null;var d=c.item,u=Yte(c,Wte);return Ve.cloneElement(d,sne(sne({},u),{},{chartWidth:r,chartHeight:i,margin:s,onBBoxUpdate:a.handleLegendBBoxUpdate}))}),one(a,"renderTooltip",function(){var e,t=a.props,n=t.children,r=t.accessibilityLayer,i=sU(n,Xq);if(!i)return null;var s=a.state,o=s.isTooltipActive,l=s.activeCoordinate,c=s.activePayload,d=s.activeLabel,u=s.offset,h=null!==(e=i.props.active)&&void 0!==e?e:o;return Ve.cloneElement(i,{viewBox:sne(sne({},u),{},{x:u.left,y:u.top}),active:h,label:d,payload:h?c:[],coordinate:l,accessibilityLayer:r})}),one(a,"renderBrush",function(e){var t=a.props,n=t.margin,r=t.data,i=a.state,s=i.offset,o=i.dataStartIndex,l=i.dataEndIndex,c=i.updateId;return Ve.cloneElement(e,{key:e.key||"_recharts-brush",onChange:q1(a.handleBrushChange,e.props.onChange),data:r,x:OF(e.props.x)?e.props.x:s.left,y:OF(e.props.y)?e.props.y:s.top+s.height+s.brushBottom-(n.bottom||0),width:OF(e.props.width)?e.props.width:s.width,startIndex:o,endIndex:l,updateId:"brush-".concat(c)})}),one(a,"renderReferenceElement",function(e,t,n){if(!e)return null;var r=a.clipPathId,i=a.state,s=i.xAxisMap,o=i.yAxisMap,l=i.offset,c=e.type.defaultProps||{},d=e.props,u=d.xAxisId,h=void 0===u?c.xAxisId:u,p=d.yAxisId,m=void 0===p?c.yAxisId:p;return Ve.cloneElement(e,{key:e.key||"".concat(t,"-").concat(n),xAxis:s[h],yAxis:o[m],viewBox:{x:l.left,y:l.top,width:l.width,height:l.height},clipPathId:r})}),one(a,"renderActivePoints",function(t){var n=t.item,r=t.activePoint,i=t.basePoint,a=t.childIndex,s=t.isRange,o=[],l=n.props.key,c=void 0!==n.item.type.defaultProps?sne(sne({},n.item.type.defaultProps),n.item.props):n.item.props,d=c.activeDot,u=sne(sne({index:a,dataKey:c.dataKey,cx:r.x,cy:r.y,r:4,fill:U1(n.item),strokeWidth:2,stroke:"#fff",payload:r.payload,value:r.value},dU(d,!1)),XF(d));return o.push(e.renderActiveDot(d,u,"".concat(l,"-activePoint-").concat(a))),i?o.push(e.renderActiveDot(d,sne(sne({},u),{},{cx:i.x,cy:i.y}),"".concat(l,"-basePoint-").concat(a))):s&&o.push(null),o}),one(a,"renderGraphicChild",function(e,t,n){var r=a.filterFormatItem(e,t,n);if(!r)return null;var i=a.getTooltipEventType(),s=a.state,o=s.isTooltipActive,l=s.tooltipAxis,c=s.activeTooltipIndex,d=s.activeLabel,u=sU(a.props.children,Xq),h=r.props,p=h.points,m=h.isRange,f=h.baseLine,g=void 0!==r.item.type.defaultProps?sne(sne({},r.item.type.defaultProps),r.item.props):r.item.props,v=g.activeDot,x=g.hide,y=g.activeBar,b=g.activeShape,w=Boolean(!x&&o&&u&&(v||y||b)),j={};"axis"!==i&&u&&"click"===u.props.trigger?j={onClick:q1(a.handleItemMouseEnter,e.props.onClick)}:"axis"!==i&&(j={onMouseLeave:q1(a.handleItemMouseLeave,e.props.onMouseLeave),onMouseEnter:q1(a.handleItemMouseEnter,e.props.onMouseEnter)});var N=Ve.cloneElement(e,sne(sne({},r.props),j));if(w){if(!(c>=0)){var _,S=(null!==(_=a.getItemByXY(a.state.activeCoordinate))&&void 0!==_?_:{graphicalItem:N}).graphicalItem,C=S.item,A=void 0===C?e:C,M=S.childIndex,E=sne(sne(sne({},r.props),j),{},{activeIndex:M});return[Ve.cloneElement(A,E),null,null]}var k,T;if(l.dataKey&&!l.allowDuplicatedCategory){var P="function"==typeof l.dataKey?function(e){return"function"==typeof l.dataKey?l.dataKey(e.payload):null}:"payload.".concat(l.dataKey.toString());k=UF(p,P,d),T=m&&f&&UF(f,P,d)}else k=null==p?void 0:p[c],T=m&&f&&f[c];if(b||y){var O=void 0!==e.props.activeIndex?e.props.activeIndex:c;return[Ve.cloneElement(e,sne(sne(sne({},r.props),j),{},{activeIndex:O})),null,null]}if(!tF(k))return[N].concat(nne(a.renderActivePoints({item:r,activePoint:k,basePoint:T,childIndex:c,isRange:m})))}return m?[N,null,null]:[N,null]}),one(a,"renderCustomized",function(e,t,n){return Ve.cloneElement(e,sne(sne({key:"recharts-customized-".concat(n)},a.props),a.state))}),one(a,"renderMap",{CartesianGrid:{handler:hne,once:!0},ReferenceArea:{handler:a.renderReferenceElement},ReferenceLine:{handler:hne},ReferenceDot:{handler:a.renderReferenceElement},XAxis:{handler:hne},YAxis:{handler:hne},Brush:{handler:a.renderBrush,once:!0},Bar:{handler:a.renderGraphicChild},Line:{handler:a.renderGraphicChild},Area:{handler:a.renderGraphicChild},Radar:{handler:a.renderGraphicChild},RadialBar:{handler:a.renderGraphicChild},Scatter:{handler:a.renderGraphicChild},Pie:{handler:a.renderGraphicChild},Funnel:{handler:a.renderGraphicChild},Tooltip:{handler:a.renderCursor,once:!0},PolarGrid:{handler:a.renderPolarGrid,once:!0},PolarAngleAxis:{handler:a.renderPolarAxis},PolarRadiusAxis:{handler:a.renderPolarAxis},Customized:{handler:a.renderCustomized}}),a.clipPathId="".concat(null!==(r=n.id)&&void 0!==r?r:DF("recharts"),"-clip"),a.throttleTriggeredAfterMouseMove=gX(a.triggeredAfterMouseMove,null!==(i=n.throttleDelay)&&void 0!==i?i:1e3/60),a.state={},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tne(e,t)}(e,Ve.Component),Jte(e,[{key:"componentDidMount",value:function(){var e,t;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(e=this.props.margin.left)&&void 0!==e?e:0,top:null!==(t=this.props.margin.top)&&void 0!==t?t:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var e=this.props,t=e.children,n=e.data,r=e.height,i=e.layout,a=sU(t,Xq);if(a){var s=a.props.defaultIndex;if(!("number"!=typeof s||s<0||s>this.state.tooltipTicks.length-1)){var o=this.state.tooltipTicks[s]&&this.state.tooltipTicks[s].value,l=fne(this.state,n,s,o),c=this.state.tooltipTicks[s].coordinate,d=(this.state.offset.top+r)/2,u="horizontal"===i?{x:c,y:d}:{y:c,x:d},h=this.state.formattedGraphicalItems.find(function(e){return"Scatter"===e.item.type.name});h&&(u=sne(sne({},u),h.props.points[s].tooltipPosition),l=h.props.points[s].tooltipPayload);var p={activeTooltipIndex:s,isTooltipActive:!0,activeLabel:o,activePayload:l,activeCoordinate:u};this.setState(p),this.renderCursor(a),this.accessibilityManager.setIndex(s)}}}},{key:"getSnapshotBeforeUpdate",value:function(e,t){if(!this.props.accessibilityLayer)return null;var n,r;(this.state.tooltipTicks!==t.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==e.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==e.margin)&&this.accessibilityManager.setDetails({offset:{left:null!==(n=this.props.margin.left)&&void 0!==n?n:0,top:null!==(r=this.props.margin.top)&&void 0!==r?r:0}});return null}},{key:"componentDidUpdate",value:function(e){uU([sU(e.children,Xq)],[sU(this.props.children,Xq)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=sU(this.props.children,Xq);if(e&&"boolean"==typeof e.props.shared){var t=e.props.shared?"axis":"item";return s.indexOf(t)>=0?t:i}return i}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t,n=this.container,r=n.getBoundingClientRect(),i={top:(t=r).top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft},a={chartX:Math.round(e.pageX-i.left),chartY:Math.round(e.pageY-i.top)},s=r.width/n.offsetWidth||1,o=this.inRange(a.chartX,a.chartY,s);if(!o)return null;var l=this.state,c=l.xAxisMap,d=l.yAxisMap,u=this.getTooltipEventType(),h=gne(this.state,this.props.data,this.props.layout,o);if("axis"!==u&&c&&d){var p=BF(c).scale,m=BF(d).scale,f=p&&p.invert?p.invert(a.chartX):null,g=m&&m.invert?m.invert(a.chartY):null;return sne(sne({},a),{},{xValue:f,yValue:g},h)}return h?sne(sne({},a),h):null}},{key:"inRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.props.layout,i=e/n,a=t/n;if("horizontal"===r||"vertical"===r){var s=this.state.offset;return i>=s.left&&i<=s.left+s.width&&a>=s.top&&a<=s.top+s.height?{x:i,y:a}:null}var o=this.state,l=o.angleAxisMap,c=o.radiusAxisMap;if(l&&c){var d=BF(l);return w2({x:i,y:a},d)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),n=sU(e,Xq),r={};return n&&"axis"===t&&(r="click"===n.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu}),sne(sne({},XF(this.props,this.handleOuterEvent)),r)}},{key:"addListener",value:function(){Tte.on(Pte,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Tte.removeListener(Pte,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(e,t,n){for(var r=this.state.formattedGraphicalItems,i=0,a=r.length;i<a;i++){var s=r[i];if(s.item===e||s.props.key===e.key||t===tU(s.item.type)&&n===s.childIndex)return s}return null}},{key:"renderClipPath",value:function(){var e=this.clipPathId,t=this.state.offset,n=t.left,r=t.top,i=t.height,a=t.width;return Ge.createElement("defs",null,Ge.createElement("clipPath",{id:e},Ge.createElement("rect",{x:n,y:r,height:i,width:a})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce(function(e,t){var n=$te(t,2),r=n[0],i=n[1];return sne(sne({},e),{},one({},r,i.scale))},{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce(function(e,t){var n=$te(t,2),r=n[0],i=n[1];return sne(sne({},e),{},one({},r,i.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(e){var t;return null===(t=this.state.xAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getYScaleByAxisId",value:function(e){var t;return null===(t=this.state.yAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getItemByXY",value:function(e){var t=this.state,n=t.formattedGraphicalItems,r=t.activeItem;if(n&&n.length)for(var i=0,a=n.length;i<a;i++){var s=n[i],o=s.props,l=s.item,c=void 0!==l.type.defaultProps?sne(sne({},l.type.defaultProps),l.props):l.props,d=tU(l.type);if("Bar"===d){var u=(o.data||[]).find(function(t){return e4(e,t)});if(u)return{graphicalItem:s,payload:u}}else if("RadialBar"===d){var h=(o.data||[]).find(function(t){return w2(e,t)});if(h)return{graphicalItem:s,payload:h}}else if(L6(s,r)||B6(s,r)||F6(s,r)){var p=V6({graphicalItem:s,activeTooltipItem:r,itemData:c.data}),m=void 0===c.activeIndex?p:c.activeIndex;return{graphicalItem:sne(sne({},s),{},{childIndex:m}),payload:F6(s,r)?c.data[p]:s.props.data[p]}}}return null}},{key:"render",value:function(){var e=this;if(!oU(this))return null;var t,n,r=this.props,i=r.children,a=r.className,s=r.width,o=r.height,l=r.style,c=r.compact,d=r.title,u=r.desc,h=Yte(r,Kte),p=dU(h,!1);if(c)return Ge.createElement(X9,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ge.createElement(vU,Xte({},p,{width:s,height:o,title:d,desc:u}),this.renderClipPath(),pU(i,this.renderMap)));this.props.accessibilityLayer&&(p.tabIndex=null!==(t=this.props.tabIndex)&&void 0!==t?t:0,p.role=null!==(n=this.props.role)&&void 0!==n?n:"application",p.onKeyDown=function(t){e.accessibilityManager.keyboardEvent(t)},p.onFocus=function(){e.accessibilityManager.focus()});var m=this.parseEventsOfWrapper();return Ge.createElement(X9,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ge.createElement("div",Xte({className:Up("recharts-wrapper",a),style:sne({position:"relative",cursor:"default",width:s,height:o},l)},m,{ref:function(t){e.container=t}}),Ge.createElement(vU,Xte({},p,{width:s,height:o,title:d,desc:u,style:dne}),this.renderClipPath(),pU(i,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}();one(p,"displayName",t),one(p,"defaultProps",sne({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),one(p,"getDerivedStateFromProps",function(e,t){var n=e.dataKey,r=e.data,i=e.children,a=e.width,s=e.height,o=e.layout,l=e.stackOffset,c=e.margin,d=t.dataStartIndex,u=t.dataEndIndex;if(void 0===t.updateId){var p=yne(e);return sne(sne(sne({},p),{},{updateId:0},h(sne(sne({props:e},p),{},{updateId:0}),t)),{},{prevDataKey:n,prevData:r,prevWidth:a,prevHeight:s,prevLayout:o,prevStackOffset:l,prevMargin:c,prevChildren:i})}if(n!==t.prevDataKey||r!==t.prevData||a!==t.prevWidth||s!==t.prevHeight||o!==t.prevLayout||l!==t.prevStackOffset||!HF(c,t.prevMargin)){var m=yne(e),f={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},g=sne(sne({},gne(t,r,o)),{},{updateId:t.updateId+1}),v=sne(sne(sne({},m),f),g);return sne(sne(sne({},v),h(sne({props:e},v),t)),{},{prevDataKey:n,prevData:r,prevWidth:a,prevHeight:s,prevLayout:o,prevStackOffset:l,prevMargin:c,prevChildren:i})}if(!uU(i,t.prevChildren)){var x,y,b,w,j=sU(i,M8),N=j&&null!==(x=null===(y=j.props)||void 0===y?void 0:y.startIndex)&&void 0!==x?x:d,_=j&&null!==(b=null===(w=j.props)||void 0===w?void 0:w.endIndex)&&void 0!==b?b:u,S=N!==d||_!==u,C=!tF(r)&&!S?t.updateId:t.updateId+1;return sne(sne({updateId:C},h(sne(sne({props:e},t),{},{updateId:C,dataStartIndex:N,dataEndIndex:_}),t)),{},{prevChildren:i,dataStartIndex:N,dataEndIndex:_})}return null}),one(p,"renderActiveDot",function(e,t,n){var r;return r=Ve.isValidElement(e)?Ve.cloneElement(e,t):cL(e)?e(t):Ge.createElement(h4,t),Ge.createElement(wU,{className:"recharts-active-dot",key:n},r)});var m=Ve.forwardRef(function(e,t){return Ge.createElement(p,Xte({},e,{ref:t}))});return m.displayName=p.displayName,m},_ne=Nne({chartName:"LineChart",GraphicalChild:Hee,axisComponents:[{axisType:"xAxis",AxisComp:fte},{axisType:"yAxis",AxisComp:Cte}],formatAxisMap:C9}),Sne=Nne({chartName:"BarChart",GraphicalChild:y9,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:fte},{axisType:"yAxis",AxisComp:Cte}],formatAxisMap:C9}),Cne=Nne({chartName:"PieChart",GraphicalChild:t8,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:r6},{axisType:"radiusAxis",AxisComp:V4}],formatAxisMap:function(e,t,n,r,i){var a=e.width,s=e.height,o=e.startAngle,l=e.endAngle,c=LF(e.cx,a,a/2),d=LF(e.cy,s,s/2),u=x2(a,s,n),h=LF(e.innerRadius,u,0),p=LF(e.outerRadius,u,.8*u);return Object.keys(t).reduce(function(e,n){var a,s=t[n],u=s.domain,m=s.reversed;if(tF(s.range))"angleAxis"===r?a=[o,l]:"radiusAxis"===r&&(a=[h,p]),m&&(a=[a[1],a[0]]);else{var f=p2(a=s.range,2);o=f[0],l=f[1]}var g=X1(s,i),v=g.realScaleType,x=g.scale;x.domain(u).range(a),Y1(x);var y=Q1(x,u2(u2({},s),{},{realScaleType:v})),b=u2(u2(u2({},s),y),{},{range:a,radius:p,realScaleType:v,scale:x,cx:c,cy:d,innerRadius:h,outerRadius:p,startAngle:o,endAngle:l});return u2(u2({},e),{},h2({},n,b))},{})},defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),Ane=Nne({chartName:"AreaChart",GraphicalChild:ite,axisComponents:[{axisType:"xAxis",AxisComp:fte},{axisType:"yAxis",AxisComp:Cte}],formatAxisMap:C9});const Mne={light:"",dark:".dark"},Ene=Ve.createContext(null);function kne(){const e=Ve.useContext(Ene);if(!e)throw new Error("useChart must be used within a <ChartContainer />");return e}const Tne=Ve.forwardRef(({id:e,className:t,children:n,config:r,...i},a)=>{const s=Ve.useId(),o=`chart-${e||s.replace(/:/g,"")}`;return Qe.jsx(Ene.Provider,{value:{config:r},children:Qe.jsxs("div",{"data-chart":o,ref:a,className:Rv("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",t),...i,children:[Qe.jsx(Pne,{id:o,config:r}),Qe.jsx(NX,{children:n})]})})});Tne.displayName="Chart";const Pne=({id:e,config:t})=>{const n=Object.entries(t).filter(([e,t])=>t.theme||t.color);return n.length?Qe.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(Mne).map(([t,r])=>`\n${r} [data-chart=${e}] {\n${n.map(([e,n])=>{var r;const i=(null==(r=n.theme)?void 0:r[t])||n.color;return i?`  --color-${e}: ${i};`:null}).join("\n")}\n}\n`).join("\n")}}):null},One=Xq,Rne=Ve.forwardRef(({active:e,payload:t,className:n,indicator:r="dot",hideLabel:i=!1,hideIndicator:a=!1,label:s,labelFormatter:o,labelClassName:l,formatter:c,color:d,nameKey:u,labelKey:h},p)=>{const{config:m}=kne(),f=Ve.useMemo(()=>{var e;if(i||!(null==t?void 0:t.length))return null;const[n]=t,r=`${h||n.dataKey||n.name||"value"}`,a=Ine(m,n,r),c=h||"string"!=typeof s?null==a?void 0:a.label:(null==(e=m[s])?void 0:e.label)||s;return o?Qe.jsx("div",{className:Rv("font-medium",l),children:o(c,t)}):c?Qe.jsx("div",{className:Rv("font-medium",l),children:c}):null},[s,o,t,i,l,m,h]);if(!e||!(null==t?void 0:t.length))return null;const g=1===t.length&&"dot"!==r;return Qe.jsxs("div",{ref:p,className:Rv("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[g?null:f,Qe.jsx("div",{className:"grid gap-1.5",children:t.map((e,t)=>{const n=`${u||e.name||e.dataKey||"value"}`,i=Ine(m,e,n),s=d||e.payload.fill||e.color;return Qe.jsx("div",{className:Rv("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===r&&"items-center"),children:c&&void 0!==(null==e?void 0:e.value)&&e.name?c(e.value,e.name,e,t,e.payload):Qe.jsxs(Qe.Fragment,{children:[(null==i?void 0:i.icon)?Qe.jsx(i.icon,{}):!a&&Qe.jsx("div",{className:Rv("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===r,"w-1":"line"===r,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===r,"my-0.5":g&&"dashed"===r}),style:{"--color-bg":s,"--color-border":s}}),Qe.jsxs("div",{className:Rv("flex flex-1 justify-between leading-none",g?"items-end":"items-center"),children:[Qe.jsxs("div",{className:"grid gap-1.5",children:[g?f:null,Qe.jsx("span",{className:"text-muted-foreground",children:(null==i?void 0:i.label)||e.name})]}),e.value&&Qe.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});Rne.displayName="ChartTooltip";function Ine(e,t,n){if("object"!=typeof t||null===t)return;const r="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0;let i=n;return n in t&&"string"==typeof t[n]?i=t[n]:r&&n in r&&"string"==typeof r[n]&&(i=r[n]),i in e?e[i]:e[n]}Ve.forwardRef(({className:e,hideIcon:t=!1,payload:n,verticalAlign:r="bottom",nameKey:i},a)=>{const{config:s}=kne();return(null==n?void 0:n.length)?Qe.jsx("div",{ref:a,className:Rv("flex items-center justify-center gap-4","top"===r?"pb-3":"pt-3",e),children:n.map(e=>{const n=`${i||e.dataKey||"value"}`,r=Ine(s,e,n);return Qe.jsxs("div",{className:Rv("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==r?void 0:r.icon)&&!t?Qe.jsx(r.icon,{}):Qe.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==r?void 0:r.label]},e.value)})}):null}).displayName="ChartLegend";const Dne=[{year:"2020",products:12500},{year:"2021",products:28300},{year:"2022",products:45600},{year:"2023",products:67800},{year:"2024",products:89200}],Lne=[{year:"2020",members:5200},{year:"2021",members:15800},{year:"2022",members:32400},{year:"2023",members:58600},{year:"2024",members:95300}],Bne={products:{label:"Sn phm",color:"hsl(var(--primary))"},members:{label:"Thnh vin",color:"hsl(var(--primary))"}},Fne=()=>{const e=((Dne[4].products-Dne[3].products)/Dne[3].products*100).toFixed(1),t=((Lne[4].members-Lne[3].members)/Lne[3].members*100).toFixed(1),n=[{icon:Rf,label:"Tng sn phm",value:"89.2K+",growth:`+${e}%`,color:"from-blue-500 to-cyan-500",bgColor:"bg-blue-500/10"},{icon:Og,label:"Thnh vin",value:"95.3K+",growth:`+${t}%`,color:"from-purple-500 to-pink-500",bgColor:"bg-purple-500/10"},{icon:lg,label:"Giao dch",value:"150K+",growth:"+45.2%",color:"from-green-500 to-emerald-500",bgColor:"bg-green-500/10"},{icon:Ag,label:"nh gi 5",value:"98.5%",growth:"+2.1%",color:"from-amber-500 to-orange-500",bgColor:"bg-amber-500/10"}];return Qe.jsxs("section",{className:"py-20 lg:py-28 bg-gradient-to-b from-background via-muted/20 to-background relative overflow-hidden",children:[Qe.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[Qe.jsx(QT.div,{className:"absolute top-20 right-20 w-96 h-96 bg-primary/10 rounded-full blur-3xl",animate:{scale:[1,1.2,1],opacity:[.3,.5,.3]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),Qe.jsx(QT.div,{className:"absolute bottom-20 left-20 w-80 h-80 bg-purple-500/10 rounded-full blur-3xl",animate:{scale:[1.2,1,1.2],opacity:[.2,.4,.2]},transition:{duration:10,repeat:1/0,ease:"easeInOut"}}),Qe.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(var(--primary),0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(var(--primary),0.03)_1px,transparent_1px)] bg-[size:64px_64px]"})]}),Qe.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[Qe.jsx(QT.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"text-center mb-16",children:Qe.jsxs("div",{className:"flex flex-col items-center justify-center mb-6",children:[Qe.jsxs(QT.div,{initial:{scale:0,rotate:-180},whileInView:{scale:1,rotate:0},viewport:{once:!0},transition:{type:"spring",duration:.8},className:"relative mb-4",children:[Qe.jsx(QT.div,{className:"absolute inset-0 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-2xl blur-xl opacity-50",animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),Qe.jsx("div",{className:"relative w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center shadow-2xl",children:Qe.jsx(Sg,{className:"w-8 h-8 text-white"})})]}),Qe.jsxs("h2",{className:"text-4xl lg:text-5xl font-extrabold mb-6",children:["Thng k"," ",Qe.jsx("span",{className:"bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:"n tng"})]}),Qe.jsxs(QT.div,{className:"flex items-center justify-center gap-2 mb-6",initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{delay:.3,duration:.5},children:[Qe.jsx(QT.div,{className:"h-1 w-16 bg-gradient-to-r from-primary/30 to-purple-600/30 rounded-full",initial:{width:0},whileInView:{width:"4rem"},viewport:{once:!0},transition:{delay:.4,duration:.6}}),Qe.jsx(QT.div,{className:"h-1.5 w-8 bg-gradient-to-r from-primary to-purple-600 rounded-full",initial:{scale:0},whileInView:{scale:1},viewport:{once:!0},transition:{delay:.5,duration:.4,type:"spring"}}),Qe.jsx(QT.div,{className:"h-1 w-16 bg-gradient-to-r from-primary/30 to-purple-600/30 rounded-full",initial:{width:0},whileInView:{width:"4rem"},viewport:{once:!0},transition:{delay:.4,duration:.6}})]}),Qe.jsx("p",{className:"text-muted-foreground text-lg lg:text-xl max-w-2xl mx-auto",children:"Chng kin s pht trin vt bc ca nn tng v cng ng qua tng nm"}),Qe.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 mt-6",children:[Qe.jsxs(EP,{className:"bg-gradient-to-r from-blue-500 to-cyan-500 text-white border-0 shadow-lg px-4 py-2",children:[Qe.jsx(fg,{className:"w-4 h-4 mr-2"}),"Top #1 Vit Nam"]}),Qe.jsxs(EP,{className:"bg-gradient-to-r from-primary to-purple-600 text-white border-0 shadow-lg px-4 py-2",children:[Qe.jsx(pg,{className:"w-4 h-4 mr-2"}),"Tng trng nhanh"]})]})]})}),Qe.jsx(QT.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2},viewport:{once:!0},className:"grid grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6 mb-12",children:n.map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{delay:.1*t},whileHover:{scale:1.05,y:-5},className:"group",children:Qe.jsxs(DP,{className:"relative overflow-hidden border-2 border-border/50 hover:border-primary/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm shadow-lg hover:shadow-2xl transition-all duration-300 h-full",children:[Qe.jsx("div",{className:`absolute top-0 left-0 right-0 h-1 bg-gradient-to-r ${e.color}`}),Qe.jsx(QT.div,{className:`absolute inset-0 bg-gradient-to-br ${e.color} opacity-0 group-hover:opacity-10 blur-xl transition-opacity duration-300`,animate:{scale:[1,1.1,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),Qe.jsxs(UP,{className:"p-4 lg:p-6 relative",children:[Qe.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Qe.jsx(QT.div,{whileHover:{rotate:[0,-10,10,0]},transition:{duration:.5},className:`p-2.5 lg:p-3 rounded-xl ${e.bgColor} shadow-lg group-hover:shadow-xl transition-shadow`,children:Qe.jsx(e.icon,{className:"w-5 h-5 lg:w-6 lg:h-6 text-primary"})}),Qe.jsxs(EP,{className:`bg-gradient-to-r ${e.color} text-white border-0 shadow-md text-xs px-2 py-1`,children:[Qe.jsx(em,{className:"w-3 h-3 mr-1"}),e.growth]})]}),Qe.jsx("div",{className:"text-2xl lg:text-3xl font-bold mb-1 bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-transparent",children:e.value}),Qe.jsx("div",{className:"text-xs lg:text-sm text-muted-foreground font-medium",children:e.label})]})]})},e.label))}),Qe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8",children:[Qe.jsx(QT.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.6,delay:.3},viewport:{once:!0},className:"group",children:Qe.jsxs(DP,{className:"h-full border-2 border-border/50 hover:border-primary/30 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden",children:[Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary to-purple-600"}),Qe.jsx(QT.div,{className:"absolute inset-0 bg-gradient-to-br from-primary/10 to-purple-600/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500",animate:{scale:[1,1.05,1]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}}),Qe.jsx(LP,{className:"relative",children:Qe.jsxs("div",{className:"flex items-start justify-between",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx(QT.div,{whileHover:{rotate:360},transition:{duration:.6},className:"p-3 bg-gradient-to-br from-primary to-purple-600 rounded-xl shadow-lg",children:Qe.jsx(Rf,{className:"h-6 w-6 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx(BP,{className:"text-xl lg:text-2xl font-bold mb-1",children:"Sn phm theo nm"}),Qe.jsx(FP,{className:"text-sm",children:"Tng s sn phm c ng bn trn nn tng"})]})]}),Qe.jsxs(EP,{className:"bg-gradient-to-r from-primary to-purple-600 text-white border-0 shadow-lg",children:[Qe.jsx(Sg,{className:"w-3 h-3 mr-1"}),"+",e,"%"]})]})}),Qe.jsxs(UP,{className:"relative",children:[Qe.jsx(Tne,{config:Bne,className:"h-[280px] lg:h-[320px] w-full",children:Qe.jsx(NX,{width:"100%",height:"100%",children:Qe.jsxs(Sne,{data:Dne,children:[Qe.jsx("defs",{children:Qe.jsxs("linearGradient",{id:"productGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[Qe.jsx("stop",{offset:"0%",stopColor:"hsl(var(--primary))",stopOpacity:.8}),Qe.jsx("stop",{offset:"100%",stopColor:"hsl(var(--primary))",stopOpacity:.3})]})}),Qe.jsx(fte,{dataKey:"year",tick:{fontSize:12,fill:"hsl(var(--muted-foreground))"},axisLine:{stroke:"hsl(var(--border))"},tickLine:{stroke:"hsl(var(--border))"}}),Qe.jsx(Cte,{tick:{fontSize:12,fill:"hsl(var(--muted-foreground))"},axisLine:{stroke:"hsl(var(--border))"},tickLine:{stroke:"hsl(var(--border))"},tickFormatter:e=>e/1e3+"K"}),Qe.jsx(One,{content:Qe.jsx(Rne,{formatter:e=>[`${e.toLocaleString()} sn phm`,"Sn phm"]})}),Qe.jsx(y9,{dataKey:"products",fill:"url(#productGradient)",radius:[8,8,0,0],className:"drop-shadow-lg"})]})})}),Qe.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-4 pt-6 border-t border-border/50",children:[Qe.jsxs("div",{className:"text-center",children:[Qe.jsx("div",{className:"text-lg lg:text-xl font-bold bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:"12.5K"}),Qe.jsx("div",{className:"text-xs text-muted-foreground",children:"Nm 2020"})]}),Qe.jsxs("div",{className:"text-center",children:[Qe.jsx("div",{className:"text-lg lg:text-xl font-bold bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:"89.2K"}),Qe.jsx("div",{className:"text-xs text-muted-foreground",children:"Nm 2024"})]}),Qe.jsxs("div",{className:"text-center",children:[Qe.jsx("div",{className:"text-lg lg:text-xl font-bold text-primary",children:"7.1x"}),Qe.jsx("div",{className:"text-xs text-muted-foreground",children:"Tng trng"})]})]})]})]})}),Qe.jsx(QT.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{duration:.6,delay:.4},viewport:{once:!0},className:"group",children:Qe.jsxs(DP,{className:"h-full border-2 border-border/50 hover:border-primary/30 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden",children:[Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary to-purple-600"}),Qe.jsx(QT.div,{className:"absolute inset-0 bg-gradient-to-br from-primary/10 to-purple-600/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500",animate:{scale:[1,1.05,1]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}}),Qe.jsx(LP,{className:"relative",children:Qe.jsxs("div",{className:"flex items-start justify-between",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx(QT.div,{whileHover:{rotate:360},transition:{duration:.6},className:"p-3 bg-gradient-to-br from-primary to-purple-600 rounded-xl shadow-lg",children:Qe.jsx(Og,{className:"h-6 w-6 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx(BP,{className:"text-xl lg:text-2xl font-bold mb-1",children:"Cng ng theo nm"}),Qe.jsx(FP,{className:"text-sm",children:"S lng thnh vin tham gia cng ng VibeMarket"})]})]}),Qe.jsxs(EP,{className:"bg-gradient-to-r from-primary to-purple-600 text-white border-0 shadow-lg",children:[Qe.jsx(Sg,{className:"w-3 h-3 mr-1"}),"+",t,"%"]})]})}),Qe.jsxs(UP,{className:"relative",children:[Qe.jsx(Tne,{config:Bne,className:"h-[280px] lg:h-[320px] w-full",children:Qe.jsx(NX,{width:"100%",height:"100%",children:Qe.jsxs(Ane,{data:Lne,children:[Qe.jsx("defs",{children:Qe.jsxs("linearGradient",{id:"memberGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[Qe.jsx("stop",{offset:"0%",stopColor:"hsl(var(--primary))",stopOpacity:.4}),Qe.jsx("stop",{offset:"100%",stopColor:"hsl(var(--primary))",stopOpacity:.05})]})}),Qe.jsx(fte,{dataKey:"year",tick:{fontSize:12,fill:"hsl(var(--muted-foreground))"},axisLine:{stroke:"hsl(var(--border))"},tickLine:{stroke:"hsl(var(--border))"}}),Qe.jsx(Cte,{tick:{fontSize:12,fill:"hsl(var(--muted-foreground))"},axisLine:{stroke:"hsl(var(--border))"},tickLine:{stroke:"hsl(var(--border))"},tickFormatter:e=>e/1e3+"K"}),Qe.jsx(One,{content:Qe.jsx(Rne,{formatter:e=>[`${e.toLocaleString()} thnh vin`,"Thnh vin"]})}),Qe.jsx(ite,{type:"monotone",dataKey:"members",stroke:"hsl(var(--primary))",strokeWidth:3,fill:"url(#memberGradient)",className:"drop-shadow-lg"}),Qe.jsx(Hee,{type:"monotone",dataKey:"members",stroke:"hsl(var(--primary))",strokeWidth:3,dot:{fill:"hsl(var(--primary))",strokeWidth:2,r:6},activeDot:{r:8,stroke:"hsl(var(--primary))",strokeWidth:3},className:"drop-shadow-sm"})]})})}),Qe.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-4 pt-6 border-t border-border/50",children:[Qe.jsxs("div",{className:"text-center",children:[Qe.jsx("div",{className:"text-lg lg:text-xl font-bold bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:"5.2K"}),Qe.jsx("div",{className:"text-xs text-muted-foreground",children:"Nm 2020"})]}),Qe.jsxs("div",{className:"text-center",children:[Qe.jsx("div",{className:"text-lg lg:text-xl font-bold bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:"95.3K"}),Qe.jsx("div",{className:"text-xs text-muted-foreground",children:"Nm 2024"})]}),Qe.jsxs("div",{className:"text-center",children:[Qe.jsx("div",{className:"text-lg lg:text-xl font-bold text-primary",children:"18.3x"}),Qe.jsx("div",{className:"text-xs text-muted-foreground",children:"Tng trng"})]})]})]})]})})]}),Qe.jsx(QT.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.6},viewport:{once:!0},className:"mt-12",children:Qe.jsxs(DP,{className:"border-border/50 bg-gradient-to-r from-card/80 via-card/60 to-card/80 backdrop-blur-sm shadow-xl overflow-hidden",children:[Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary to-purple-600"}),Qe.jsxs(UP,{className:"p-8 text-center",children:[Qe.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[Qe.jsx(pg,{className:"w-6 h-6 text-primary"}),Qe.jsx("h3",{className:"text-xl font-bold",children:"Ct mc n tng nm 2024"}),Qe.jsx(Ag,{className:"w-6 h-6 text-amber-500"})]}),Qe.jsxs("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:["Vi ",Qe.jsx("span",{className:"font-bold text-foreground",children:"89,200+ sn phm"})," v"," ",Qe.jsx("span",{className:"font-bold text-foreground",children:"95,300+ thnh vin"})," tch cc, VibeMarket ang tr thnh nn tng thng mi in t hng u Vit Nam! "]})]})]})})]})]})},Une=()=>Qe.jsx(QT.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"min-h-screen bg-background",children:Qe.jsxs("main",{children:[Qe.jsx(IP,{}),Qe.jsx(zP,{}),Qe.jsx(Fne,{}),Qe.jsx(tD,{}),Qe.jsx(TD,{}),Qe.jsx(kD,{})]})}),zne=()=>{const e=Zj(),{addToCart:t}=GP(),[n,r]=Ve.useState(!1),[i,a]=Ve.useState([]),[s,o]=Ve.useState(!0),[l,c]=Ve.useState([]),d=[{name:"Thi trang",count:2450,color:"from-pink-500 to-rose-500",bgColor:"bg-pink-500/20",icon:Qe.jsx(og,{className:"w-7 h-7"})},{name:"in t",count:1890,color:"from-blue-500 to-cyan-500",bgColor:"bg-blue-500/20",icon:Qe.jsx(Pf,{className:"w-7 h-7"})},{name:"Gia dng",count:1250,color:"from-green-500 to-emerald-500",bgColor:"bg-green-500/20",icon:Qe.jsx(lf,{className:"w-7 h-7"})},{name:"Lm p",count:890,color:"from-amber-500 to-orange-500",bgColor:"bg-amber-500/20",icon:Qe.jsx(pg,{className:"w-7 h-7"})}],[u,h]=Ve.useState(!1),[p,m]=Ve.useState(!1),[f,g]=Ve.useState("grid"),[v,x]=Ve.useState([]),[y,b]=Ve.useState("Mc nh"),[w,j]=Ve.useState(null),[N,_]=Ve.useState(""),[S,C]=Ve.useState(!1),[A,M]=Ve.useState(-1),E=Ve.useRef(null),k=N.length>0?["giy th thao nam","giy chy b n","giy sneaker","giy li","giy da cng s","giy sandal","giy tr em"].filter(e=>e.toLowerCase().includes(N.toLowerCase())):[];Ve.useEffect(()=>{fetch("http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/product/list.php").then(e=>e.json()).then(e=>{e.success&&a(e.products),o(!1)}).catch(()=>o(!1))},[]);const T=e=>{c(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},P=e=>{x(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},O=e=>{t({id:e.id,name:e.name,price:e.price,originalPrice:e.originalPrice,image:e.image,quantity:1,seller_id:e.seller_id}),r(!0),gh({title:" thm vo gi hng!",description:e.name,duration:2e3})};let R=i.filter(e=>(!w||e.category===w)&&(""===N||e.name.toLowerCase().includes(N.toLowerCase())));"Gi tng dn"===y?R=[...R].sort((e,t)=>e.price-t.price):"Gi gim dn"===y?R=[...R].sort((e,t)=>t.price-e.price):"Bn chy"===y?R=[...R].sort((e,t)=>t.sold-e.sold):"Mi nht"===y&&(R=[...R].sort((e,t)=>t.id-e.id));const I=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),D=e=>e||"/images/avatars/default-shop-avatar.png",L={hidden:{},visible:{transition:{staggerChildren:.06}}},B={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:100,damping:15}}};return Qe.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background via-muted/20 to-background relative overflow-hidden",children:[Qe.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[Qe.jsx(QT.div,{className:"absolute top-20 left-20 w-96 h-96 bg-primary/10 rounded-full blur-3xl",animate:{scale:[1,1.2,1],opacity:[.3,.5,.3]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),Qe.jsx(QT.div,{className:"absolute bottom-20 right-20 w-80 h-80 bg-purple-500/10 rounded-full blur-3xl",animate:{scale:[1.2,1,1.2],opacity:[.2,.4,.2]},transition:{duration:10,repeat:1/0,ease:"easeInOut"}})]}),Qe.jsx(eM,{children:u&&Qe.jsx(QT.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:()=>h(!1),children:Qe.jsxs(QT.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-card/95 to-card/90 backdrop-blur-xl rounded-2xl p-6 w-full max-w-md shadow-2xl relative border-2 border-border/50",onClick:e=>e.stopPropagation(),children:[Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary via-purple-500 to-pink-500"}),Qe.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 bg-primary/20 rounded-lg",children:Qe.jsx(dg,{className:"w-5 h-5 text-primary"})}),Qe.jsx("h2",{className:"text-xl font-bold",children:"B lc"})]}),Qe.jsx(AP,{variant:"ghost",size:"icon",onClick:()=>h(!1),children:Qe.jsx(Fg,{className:"w-5 h-5"})})]}),Qe.jsx("div",{className:"space-y-4 mb-6",children:Qe.jsxs("div",{children:[Qe.jsx("h3",{className:"text-sm font-semibold mb-3 text-muted-foreground",children:"Lc theo tiu ch"}),Qe.jsx("div",{className:"flex flex-wrap gap-2",children:["Gi r","Bn chy","C gim gi","nh gi cao"].map(e=>Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(AP,{variant:v.includes(e)?"default":"outline",size:"sm",onClick:()=>P(e),className:v.includes(e)?"bg-gradient-to-r from-primary to-purple-600":"",children:[v.includes(e)&&Qe.jsx(_m,{className:"w-3 h-3 mr-1"}),e]})},e))})]})}),Qe.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-border/50",children:[Qe.jsx(AP,{variant:"outline",onClick:()=>h(!1),children:"ng"}),Qe.jsxs(AP,{onClick:()=>h(!1),className:"bg-gradient-to-r from-primary to-purple-600",children:["p dng (",v.length,")"]})]})]})})}),Qe.jsx(eM,{children:p&&Qe.jsx(QT.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:()=>m(!1),children:Qe.jsxs(QT.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-card/95 to-card/90 backdrop-blur-xl rounded-2xl p-6 w-full max-w-md shadow-2xl relative border-2 border-border/50",onClick:e=>e.stopPropagation(),children:[Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-cyan-500 to-teal-500"}),Qe.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:Qe.jsx(Km,{className:"w-5 h-5 text-blue-500"})}),Qe.jsx("h2",{className:"text-xl font-bold",children:"Sp xp"})]}),Qe.jsx(AP,{variant:"ghost",size:"icon",onClick:()=>m(!1),children:Qe.jsx(Fg,{className:"w-5 h-5"})})]}),Qe.jsx("div",{className:"space-y-2 mb-6",children:["Mc nh","Gi tng dn","Gi gim dn","Bn chy","Mi nht"].map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},whileHover:{x:5},children:Qe.jsxs(AP,{variant:y===e?"default":"ghost",className:"w-full justify-start "+(y===e?"bg-gradient-to-r from-primary to-purple-600":""),onClick:()=>(e=>{b(e),m(!1)})(e),children:[y===e&&Qe.jsx(_m,{className:"w-4 h-4 mr-2"}),e]})},e))}),Qe.jsx("div",{className:"flex justify-end pt-4 border-t border-border/50",children:Qe.jsx(AP,{variant:"outline",onClick:()=>m(!1),children:"ng"})})]})})}),Qe.jsx("main",{className:"mx-auto px-4 py-8 relative z-10",children:Qe.jsxs(QT.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"space-y-8",children:[Qe.jsx("div",{className:"space-y-4",children:Qe.jsxs("div",{className:"flex items-center gap-4",children:[Qe.jsxs(QT.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",duration:.8},className:"relative flex-shrink-0",children:[Qe.jsx(QT.div,{className:"absolute inset-0 bg-gradient-to-r from-primary to-purple-600 rounded-2xl blur-xl opacity-50",animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),Qe.jsx("div",{className:"relative w-14 h-14 lg:w-16 lg:h-16 rounded-2xl bg-gradient-to-br from-primary to-purple-600 flex items-center justify-center shadow-2xl",children:Qe.jsx(lg,{className:"w-7 h-7 lg:w-8 lg:h-8 text-white"})})]}),Qe.jsxs("div",{className:"text-left",children:[Qe.jsxs(QT.h1,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"text-3xl lg:text-4xl font-extrabold mb-2",children:["Mua sm"," ",Qe.jsx("span",{className:"bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:"Thng minh"})]}),Qe.jsx(QT.p,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"text-muted-foreground text-base lg:text-lg",children:"Khm ph hng nghn sn phm cht lng vi gi tt nht"})]})]})}),Qe.jsx(QT.div,{variants:L,initial:"hidden",animate:"visible",className:"grid grid-cols-2 md:grid-cols-4 gap-4 lg:gap-6",children:d.map((e,t)=>Qe.jsx(QT.div,{variants:B,whileHover:{scale:1.05,y:-5},whileTap:{scale:.98},children:Qe.jsxs(DP,{className:"relative overflow-hidden cursor-pointer bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm border-2 transition-all duration-300 "+(w===e.name?"border-primary shadow-2xl shadow-primary/20":"border-border/50 hover:border-primary/50 shadow-lg hover:shadow-xl"),onClick:()=>{return t=e.name,void j(t===w?null:t);var t},children:[Qe.jsx("div",{className:`absolute top-0 left-0 right-0 h-1 bg-gradient-to-r ${e.color}`}),Qe.jsx(QT.div,{className:`absolute inset-0 bg-gradient-to-br ${e.color} opacity-0 ${w===e.name?"opacity-10":"group-hover:opacity-10"} transition-opacity duration-300`}),Qe.jsxs(UP,{className:"p-6 text-center relative",children:[Qe.jsx(QT.div,{whileHover:{rotate:[0,-10,10,0]},transition:{duration:.5},className:"relative mb-4",children:Qe.jsx("div",{className:`w-16 h-16 mx-auto rounded-2xl bg-gradient-to-br ${e.color} flex items-center justify-center shadow-lg text-white`,children:e.icon})}),Qe.jsx("h3",{className:"font-bold text-lg mb-2 transition-colors "+(w===e.name?"text-primary":""),children:e.name}),Qe.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.count," sn phm"]}),w===e.name&&Qe.jsx(QT.div,{initial:{scale:0},animate:{scale:1},className:"absolute top-3 right-3",children:Qe.jsx(_m,{className:"w-5 h-5 text-primary"})})]})]})},e.name))}),Qe.jsxs(DP,{className:"border-2 border-border/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm shadow-lg overflow-hidden",children:[Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary to-purple-600"}),Qe.jsxs(UP,{className:"p-4 lg:p-6",children:[Qe.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-stretch lg:items-center",children:[Qe.jsxs("div",{className:"relative flex-1",children:[Qe.jsx(eg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5"}),Qe.jsx("input",{ref:E,type:"text",placeholder:"Tm kim sn phm...",value:N,onChange:e=>{_(e.target.value),C(!0),M(-1)},onFocus:()=>{N.length>0&&C(!0)},onBlur:()=>{setTimeout(()=>C(!1),100)},onKeyDown:e=>{S&&0!==k.length&&("ArrowDown"===e.key?M(e=>(e+1)%k.length):"ArrowUp"===e.key?M(e=>(e-1+k.length)%k.length):"Enter"===e.key&&A>=0&&(_(k[A]),C(!1),E.current&&E.current.blur()))},className:"w-full pl-11 pr-4 py-3 bg-background/50 border-2 border-border/50 rounded-xl focus:ring-2 focus:ring-primary transition-all text-sm font-medium",autoComplete:"off"}),S&&k.length>0&&Qe.jsx(QT.ul,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"absolute left-0 right-0 mt-2 bg-card border-2 border-border/50 rounded-xl shadow-2xl z-20 max-h-56 overflow-auto backdrop-blur-xl",children:k.map((e,t)=>Qe.jsx(QT.li,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"px-4 py-3 cursor-pointer transition-colors "+(A===t?"bg-primary/20 text-primary":"hover:bg-primary/10"),onMouseDown:()=>(_(e),C(!1),void(E.current&&E.current.blur())),onMouseEnter:()=>M(t),children:Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary/20 to-purple-500/20 flex items-center justify-center",children:Qe.jsx(eg,{className:"w-4 h-4 text-primary"})}),Qe.jsx("span",{className:"font-medium",children:e})]})},e))})]}),Qe.jsxs("div",{className:"flex gap-2",children:[Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(AP,{variant:"outline",className:"gap-2 border-2",onClick:()=>h(!0),children:[Qe.jsx(dg,{className:"w-4 h-4"}),"B lc",v.length>0&&Qe.jsx(EP,{className:"ml-1 bg-primary text-white px-1.5 py-0.5 text-xs",children:v.length})]})}),Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(AP,{variant:"outline",className:"gap-2 border-2",onClick:()=>m(!0),children:[Qe.jsx(Km,{className:"w-4 h-4"}),y]})})]}),Qe.jsxs("div",{className:"flex gap-2 p-1 bg-muted/50 rounded-lg border border-border/50",children:[Qe.jsx(AP,{variant:"grid"===f?"default":"ghost",size:"sm",onClick:()=>g("grid"),className:"grid"===f?"bg-gradient-to-r from-primary to-purple-600":"",children:Qe.jsx(tf,{className:"w-4 h-4"})}),Qe.jsx(AP,{variant:"list"===f?"default":"ghost",size:"sm",onClick:()=>g("list"),className:"list"===f?"bg-gradient-to-r from-primary to-purple-600":"",children:Qe.jsx(gf,{className:"w-4 h-4"})})]})]}),(v.length>0||"Mc nh"!==y)&&Qe.jsxs(QT.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-border/50",children:[v.map(e=>Qe.jsxs(EP,{className:"bg-primary/10 text-primary border border-primary/20 px-3 py-1",children:[e,Qe.jsx(Fg,{className:"w-3 h-3 ml-2 cursor-pointer",onClick:()=>P(e)})]},e)),"Mc nh"!==y&&Qe.jsx(EP,{className:"bg-blue-500/10 text-blue-500 border border-blue-500/20 px-3 py-1",children:y})]})]})]}),s?Qe.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[Qe.jsx(QT.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full"}),Qe.jsx("p",{className:"mt-4 text-muted-foreground",children:"ang ti sn phm..."})]}):0===R.length?Qe.jsxs(QT.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex flex-col items-center justify-center py-20",children:[Qe.jsx("div",{className:"w-24 h-24 rounded-full bg-muted/50 flex items-center justify-center mb-6",children:Qe.jsx(lg,{className:"w-12 h-12 text-muted-foreground"})}),Qe.jsx("p",{className:"text-xl font-semibold text-foreground mb-2",children:"Khng tm thy sn phm"}),Qe.jsx("p",{className:"text-muted-foreground",children:"Th thay i b lc hoc tm kim khc"})]}):"grid"===f?Qe.jsx(QT.div,{variants:L,initial:"hidden",animate:"visible",className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:R.map((t,n)=>Qe.jsx(QT.div,{variants:B,whileHover:{y:-8,scale:1.02},className:"group",children:Qe.jsxs(DP,{className:"relative overflow-hidden border-2 border-border/50 hover:border-primary/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm shadow-lg hover:shadow-2xl transition-all duration-300 h-full",children:[Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-orange-500 via-pink-500 to-purple-500"}),Qe.jsx(QT.div,{className:"absolute inset-0 bg-gradient-to-br from-primary/10 to-purple-500/10 opacity-0 group-hover:opacity-100 blur-xl transition-opacity duration-300",animate:{scale:[1,1.05,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),Qe.jsxs("div",{className:"relative overflow-hidden bg-white",children:[Qe.jsx(QT.img,{src:t.image,alt:t.name,className:"w-full h-64 object-contain",whileHover:{scale:1.1},transition:{duration:.6}}),Qe.jsxs("div",{className:"absolute top-3 left-3 flex flex-col gap-2",children:[t.discount>0&&Qe.jsxs(EP,{className:"bg-gradient-to-r from-red-500 to-orange-500 text-white border-0 shadow-lg animate-pulse",children:[Qe.jsx(zg,{className:"w-3 h-3 mr-1"}),"-",t.discount,"%"]}),t.isLive&&Qe.jsxs(EP,{className:"bg-gradient-to-r from-red-600 to-pink-600 text-white border-0 shadow-lg",children:[Qe.jsx(QT.span,{animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0},className:"w-2 h-2 bg-white rounded-full mr-2 inline-block"}),"LIVE"]})]}),Qe.jsx(QT.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:Qe.jsx(AP,{size:"icon",variant:"ghost",className:"absolute top-3 right-3 w-10 h-10 rounded-full backdrop-blur-md shadow-lg transition-all "+(l.includes(t.id)?"bg-red-500/90 hover:bg-red-500 text-white":"bg-background"),onClick:e=>{e.stopPropagation(),T(t.id)},children:Qe.jsx(sf,{className:"w-5 h-5 transition-all "+(l.includes(t.id)?"fill-white":"")})})}),Qe.jsxs(QT.div,{initial:{opacity:0,y:20},whileHover:{opacity:1,y:0},className:"absolute inset-x-0 bottom-0 p-4 flex items-center justify-center gap-3",children:[Qe.jsx(QT.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:Qe.jsxs(AP,{size:"sm",variant:"secondary",className:"backdrop-blur-md bg-background shadow-lg",onClick:n=>{n.stopPropagation(),e(`/product/${t.id}`)},children:[Qe.jsx(Vm,{className:"w-4 h-4 mr-2"}),"Xem"]})}),Qe.jsx(QT.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:Qe.jsxs(AP,{size:"sm",className:"bg-gradient-to-r from-primary to-purple-600 hover:opacity-90 shadow-lg",onClick:e=>{e.stopPropagation(),O(t)},children:[Qe.jsx(cg,{className:"w-4 h-4 mr-2"}),"Thm"]})})]}),Qe.jsx(QT.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent opacity-0 group-hover:opacity-100",initial:{x:"-100%"},whileHover:{x:"200%"},transition:{duration:.6}})]}),Qe.jsxs(UP,{className:"p-5 relative",children:[Qe.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Qe.jsxs("div",{className:"relative",children:[Qe.jsx("img",{src:D(t.seller.avatar),alt:t.seller.name,className:"w-8 h-8 rounded-full object-cover border-2 border-primary/20",onError:e=>{e.target.src="/images/avatars/default-shop-avatar.png"}}),t.seller.verified&&Qe.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center border-2 border-card",children:Qe.jsx(Im,{className:"w-2.5 h-2.5 text-white"})})]}),Qe.jsx("span",{className:"text-sm font-semibold text-primary",children:t.seller.name})]}),Qe.jsx("h3",{className:"font-bold text-lg text-foreground group-hover:text-primary transition-colors mb-2 line-clamp-2",children:t.name}),Qe.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Qe.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((e,n)=>Qe.jsx(fg,{className:"w-4 h-4 "+(n<Math.floor(t.rating)?"fill-amber-500 text-amber-500":"fill-gray-300 text-gray-300")},n))}),Qe.jsx("span",{className:"text-sm font-semibold",children:t.rating}),Qe.jsxs("span",{className:"text-xs text-muted-foreground",children:[" bn ",t.sold]})]}),Qe.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border/50",children:[Qe.jsxs("div",{className:"flex flex-col",children:[Qe.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:I(t.price)}),t.originalPrice&&Qe.jsx("span",{className:"text-sm text-muted-foreground line-through",children:I(t.originalPrice)})]}),Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"lg:hidden",children:Qe.jsx(AP,{size:"icon",className:"w-12 h-12 rounded-full bg-gradient-to-r from-primary to-purple-600 hover:opacity-90 shadow-lg",onClick:()=>O(t),children:Qe.jsx(cg,{className:"w-5 h-5"})})})]})]})]})},t.id))}):Qe.jsx(QT.div,{variants:L,initial:"hidden",animate:"visible",className:"space-y-6",children:R.map((t,n)=>Qe.jsx(QT.div,{variants:B,whileHover:{y:-4},className:"group",children:Qe.jsxs(DP,{className:"flex flex-col md:flex-row overflow-hidden border-2 border-border/50 hover:border-primary/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm shadow-lg hover:shadow-2xl transition-all duration-300",children:[Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-orange-500 via-pink-500 to-purple-500"}),Qe.jsxs("div",{className:"relative md:w-1/3 bg-white",children:[Qe.jsx(QT.img,{src:t.image,alt:t.name,className:"w-full h-48 md:h-full object-contain",whileHover:{scale:1.05},transition:{duration:.4}}),Qe.jsx("div",{className:"absolute top-3 left-3 flex flex-col gap-2",children:t.discount>0&&Qe.jsxs(EP,{className:"bg-gradient-to-r from-red-500 to-orange-500 text-white border-0 shadow-lg animate-pulse",children:[Qe.jsx(zg,{className:"w-3 h-3 mr-1"}),"-",t.discount,"%"]})}),Qe.jsx(QT.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:Qe.jsx(AP,{size:"icon",variant:"ghost",className:"absolute top-3 right-3 w-10 h-10 rounded-full backdrop-blur-md shadow-lg transition-all "+(l.includes(t.id)?"bg-red-500/90 hover:bg-red-500 text-white":"bg-background"),onClick:e=>{e.stopPropagation(),T(t.id)},children:Qe.jsx(sf,{className:"w-5 h-5 "+(l.includes(t.id)?"fill-white text-white":"")})})})]}),Qe.jsxs("div",{className:"p-6 flex-1 flex flex-col justify-between relative",children:[Qe.jsxs("div",{children:[Qe.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Qe.jsx("img",{src:D(t.seller.avatar),alt:t.seller.name,className:"w-8 h-8 rounded-full object-cover border-2 border-primary/20",onError:e=>{e.target.src="/images/avatars/default-shop-avatar.png"}}),Qe.jsx("span",{className:"text-sm font-semibold text-primary",children:t.seller.name})]}),Qe.jsx("h3",{className:"font-bold text-xl text-foreground group-hover:text-primary transition-colors mb-3",children:t.name}),Qe.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[Qe.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((e,n)=>Qe.jsx(fg,{className:"w-4 h-4 "+(n<Math.floor(t.rating)?"fill-amber-500 text-amber-500":"fill-gray-300 text-gray-300")},n))}),Qe.jsx("span",{className:"text-sm font-semibold",children:t.rating}),Qe.jsxs("span",{className:"text-sm text-muted-foreground",children:[" bn ",t.sold]})]}),Qe.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Qe.jsx("span",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:I(t.price)}),t.originalPrice&&Qe.jsx("span",{className:"text-lg text-muted-foreground line-through",children:I(t.originalPrice)})]})]}),Qe.jsxs("div",{className:"flex gap-3",children:[Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex-1",children:Qe.jsxs(AP,{variant:"outline",className:"w-full border-2",onClick:()=>e(`/product/${t.id}`),children:[Qe.jsx(Vm,{className:"w-4 h-4 mr-2"}),"Xem chi tit"]})}),Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex-1",children:Qe.jsxs(AP,{className:"w-full bg-gradient-to-r from-primary to-purple-600 hover:opacity-90",onClick:()=>O(t),children:[Qe.jsx(cg,{className:"w-4 h-4 mr-2"}),"Thm vo gi"]})})]})]})]})},t.id))})]})}),Qe.jsx(eD,{open:n,onOpenChange:r})]})},Hne=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx("textarea",{className:Rv("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Hne.displayName="Textarea";const Vne=Ve.forwardRef(({className:e,type:t,...n},r)=>Qe.jsx("input",{type:t,className:Rv("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));Vne.displayName="Input";const Gne=[{id:"1",name:"Glow Serum Vitamin C",description:"Serum vitamin C gip lm sng da v chng lo ha",price:299e3,image:"https://images.unsplash.com/photo-1556228578-dd75ca7b38b9?w=300&h=300&fit=crop",category:"Beauty",brand:"GlowLab",rating:4.8,reviews:1234,availability:"in-stock",affiliateLink:"https://example.com/glow-serum"},{id:"2",name:"Wireless Headphones Pro",description:"Tai nghe khng dy vi cht lng m thanh cao cp",price:2999e3,image:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=300&h=300&fit=crop",category:"Tech",brand:"AudioMax",rating:4.6,reviews:892,availability:"in-stock",affiliateLink:"https://example.com/wireless-headphones"},{id:"3",name:"Trendy Sneakers",description:"Giy sneaker thi trang phi mu c o",price:1599e3,image:"https://images.unsplash.com/photo-1549298916-b41d501d3772?w=300&h=300&fit=crop",category:"Fashion",brand:"StyleWalk",rating:4.5,reviews:567,availability:"in-stock",affiliateLink:"https://example.com/trendy-sneakers"},{id:"4",name:"Smart Home Speaker",description:"Loa thng minh iu khin bng ging ni",price:1299e3,image:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=300&h=300&fit=crop",category:"Tech",brand:"SmartLife",rating:4.7,reviews:445,availability:"in-stock",affiliateLink:"https://example.com/smart-speaker"},{id:"5",name:"Organic Green Tea",description:"Tr xanh hu c cao cp gip th gin",price:189e3,image:"https://images.unsplash.com/photo-1556679343-c7306c1976bc?w=300&h=300&fit=crop",category:"Food",brand:"TeaHouse",rating:4.9,reviews:234,availability:"in-stock",affiliateLink:"https://example.com/organic-tea"},{id:"6",name:"Yoga Mat Premium",description:"Thm yoga cao cp chng trt v thn thin mi trng",price:899e3,image:"https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?w=300&h=300&fit=crop",category:"Fitness",brand:"YogaLife",rating:4.8,reviews:678,availability:"in-stock",affiliateLink:"https://example.com/yoga-mat"}],Wne=({open:e,onOpenChange:t,onProductSelect:n,selectedProducts:r=[]})=>{const[i,a]=Ve.useState(""),[s,o]=Ve.useState(""),[l,c]=Ve.useState(""),[d,u]=Ve.useState(r),h=Gne.filter(e=>{const t=e.name.toLowerCase().includes(i.toLowerCase())||e.description.toLowerCase().includes(i.toLowerCase()),n=""===s||e.price>=Number(s),r=""===l||e.price<=Number(l);return t&&n&&r});return Qe.jsx(FR,{open:e,onOpenChange:t,children:Qe.jsxs(VR,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[Qe.jsx(GR,{children:Qe.jsx(KR,{children:"Chn sn phm  gn th"})}),Qe.jsxs("div",{className:"space-y-4",children:[Qe.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-stretch lg:items-center",children:[Qe.jsxs("div",{className:"relative flex-1",children:[Qe.jsx(eg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),Qe.jsx(Vne,{placeholder:"Tm kim sn phm...",value:i,onChange:e=>a(e.target.value),className:"pl-10 rounded-lg"})]}),Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsxs("div",{className:"flex flex-col",children:[Qe.jsx("label",{className:"text-xs text-muted-foreground mb-1",children:"Gi t"}),Qe.jsx(Vne,{type:"number",min:0,value:s,onChange:e=>o(""===e.target.value?"":Number(e.target.value)),placeholder:"0",className:"w-28 rounded-lg"})]}),Qe.jsx("span",{className:"text-muted-foreground pt-6",children:"-"}),Qe.jsxs("div",{className:"flex flex-col",children:[Qe.jsx("label",{className:"text-xs text-muted-foreground mb-1",children:"n"}),Qe.jsx(Vne,{type:"number",min:0,value:l,onChange:e=>c(""===e.target.value?"":Number(e.target.value)),placeholder:"1,000,000",className:"w-28 rounded-lg"})]})]})]}),d.length>0&&Qe.jsxs("div",{className:"text-sm text-muted-foreground",children:[" chn ",d.length," sn phm"]}),Qe.jsxs("div",{className:"overflow-y-auto max-h-[50vh]",children:[Qe.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(e=>{const t=d.some(t=>t.id===e.id);return Qe.jsxs(DP,{className:"p-4 cursor-pointer transition-all duration-200 "+(t?"ring-2 ring-primary bg-primary/5":"hover:shadow-md"),onClick:()=>(e=>{const t=d.some(t=>t.id===e.id);u(t?d.filter(t=>t.id!==e.id):[...d,e])})(e),children:[Qe.jsxs("div",{className:"relative",children:[Qe.jsx("img",{src:e.image,alt:e.name,className:"w-full h-32 object-cover rounded-md"}),t&&Qe.jsx("div",{className:"absolute top-2 right-2 bg-primary text-primary-foreground rounded-full p-1",children:Qe.jsx(gm,{className:"h-3 w-3"})})]}),Qe.jsxs("div",{className:"mt-3 space-y-2",children:[Qe.jsx("h3",{className:"font-medium text-sm line-clamp-2",children:e.name}),Qe.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:e.description}),Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsx("span",{className:"font-semibold text-primary",children:(n=e.price,new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(n))}),Qe.jsxs("div",{className:"flex items-center gap-1",children:[Qe.jsx(fg,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),Qe.jsx("span",{className:"text-xs",children:e.rating})]})]}),Qe.jsx(EP,{variant:"secondary",className:"text-xs",children:e.category})]})]},e.id);var n})}),0===h.length&&Qe.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-muted-foreground",children:[Qe.jsx(Qf,{className:"h-12 w-12 mb-3 text-muted-foreground/70"}),Qe.jsx("p",{className:"text-lg font-medium",children:"Khng tm thy sn phm no"}),Qe.jsx("span",{className:"text-sm",children:"Hy th t kha hoc b lc khc"})]})]})]}),Qe.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[Qe.jsx(AP,{variant:"outline",onClick:()=>t(!1),children:"Hy"}),Qe.jsxs(AP,{onClick:()=>{n(d),t(!1)},disabled:0===d.length,className:"flex-1",children:["Xc nhn (",d.length,")"]})]})]})})},Kne=({isOpen:e,onClose:t,onPostCreated:n})=>{const[r,i]=Ve.useState(""),[a,s]=Ve.useState([]),[o,l]=Ve.useState([]),[c,d]=Ve.useState(!1),[u,h]=Ve.useState(!1),[p,m]=Ve.useState(null),{toast:f}=vh(),g=()=>{if(!r.trim())return void f({title:"Li",description:"Vui lng nhp ni dung bi vit",variant:"destructive"});const e={id:Date.now(),user:{name:"K V",avatar:"/images/avatars/Avt-Vy.jpg",verified:!1},content:r.trim(),images:a,likes:0,comments:0,shares:0,time:"Va xong",tags:o,featuredProduct:p||void 0};n(e),v(),f({title:"Thnh cng!",description:"Bi vit  c ng thnh cng"}),t()},v=()=>{i(""),s([]),l([]),m(null),d(!1)},x=()=>{return Qe.jsxs(DP,{className:"p-6 bg-gradient-card border-border",children:[Qe.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Qe.jsxs(AD,{children:[Qe.jsx(MD,{src:"/placeholder.svg"}),Qe.jsx(ED,{children:"B"})]}),Qe.jsxs("div",{className:"flex-1",children:[Qe.jsx("h4",{className:"font-semibold text-card-foreground",children:"Bn"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Va xong"})]})]}),Qe.jsxs("div",{className:"space-y-4",children:[Qe.jsx("p",{className:"text-card-foreground leading-relaxed",children:r}),a.length>0&&Qe.jsx("div",{className:`grid gap-2 ${1===a.length?"":"grid-cols-2"} ${3===a.length?"md:grid-cols-3":""}`,children:a.map((e,t)=>Qe.jsx("img",{src:e,alt:`Preview ${t+1}`,className:"w-full h-48 object-cover rounded-lg"},t))}),o.length>0&&Qe.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(e=>Qe.jsx(EP,{variant:"secondary",className:"text-xs",children:e},e))}),p&&Qe.jsxs("div",{className:"bg-neutral-900 rounded-lg p-4 mb-4",children:[Qe.jsxs("div",{className:"flex items-center mb-3",children:[Qe.jsx(xg,{className:"h-4 w-4 text-primary mr-2"}),Qe.jsx("span",{className:"text-sm font-medium text-white",children:"Sn phm ni bt"})]}),Qe.jsx("div",{className:"flex flex-col sm:flex-row items-center sm:justify-between bg-neutral-900 rounded-lg p-3 gap-3",children:Qe.jsxs("div",{className:"flex items-center w-full sm:w-auto justify-center sm:justify-start",children:[Qe.jsx("img",{src:p.image,alt:p.name,className:"w-16 h-16 sm:w-12 sm:h-12 rounded-lg object-cover mr-0 sm:mr-3 border border-white/10"}),Qe.jsxs("div",{className:"text-center sm:text-left",children:[Qe.jsx("p",{className:"text-sm font-medium text-white line-clamp-1",children:p.name}),Qe.jsx("p",{className:"text-lg font-bold text-primary",children:(e=p.price,new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e))})]})]})})]})]})]});var e};return Qe.jsx(FR,{open:e,onOpenChange:()=>{t(),v()},children:Qe.jsxs(VR,{className:"max-w-2xl max-h-[90vh] overflow-y-auto bg-gradient-card border-border",children:[Qe.jsx(GR,{children:Qe.jsx(KR,{className:"text-card-foreground flex items-center justify-between",children:c?"Xem trc bi vit":"To bi vit mi"})}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:c?Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(x,{}),Qe.jsxs("div",{className:"flex gap-3",children:[Qe.jsx(AP,{onClick:()=>d(!1),variant:"outline",className:"flex-1",children:"Chnh sa"}),Qe.jsx(AP,{onClick:g,className:"flex-1 bg-gradient-primary",children:"ng bi"})]})]}):Qe.jsxs(Qe.Fragment,{children:[Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx("label",{className:"text-sm font-medium text-card-foreground",children:"Ni dung bi vit"}),Qe.jsx(Hne,{placeholder:"Chia s suy ngh ca bn...",value:r,onChange:e=>i(e.target.value),className:"min-h-[120px] resize-none bg-background/50 border-border text-card-foreground",maxLength:1e3}),Qe.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[r.length,"/1000"]})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx("label",{className:"text-sm font-medium text-card-foreground",children:"Hnh nh (ti a 3)"}),Qe.jsxs("div",{className:"flex gap-3",children:[Qe.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{const t=Array.from(e.target.files||[]);if(t.length>0){const e=t.slice(0,3-a.length).map(e=>URL.createObjectURL(e));s(t=>[...t,...e].slice(0,3))}},className:"hidden",id:"image-upload",disabled:a.length>=3}),Qe.jsx("label",{htmlFor:"image-upload",className:"flex-1 cursor-pointer "+(a.length>=3?"opacity-50 pointer-events-none":""),children:Qe.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-6 text-center hover:border-accent transition-smooth",children:[Qe.jsx(df,{className:"w-8 h-8 mx-auto mb-2 text-muted-foreground"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:a.length<3?"Nhn  ti nh ln":"  3 nh"})]})})]}),a.length>0&&Qe.jsx("div",{className:`grid gap-2 ${1===a.length?"":"grid-cols-2"} ${3===a.length?"md:grid-cols-3":""}`,children:a.map((e,t)=>Qe.jsxs("div",{className:"relative",children:[Qe.jsx("img",{src:e,alt:`Selected ${t+1}`,className:"w-full h-48 object-cover rounded-lg"}),Qe.jsx("button",{type:"button",onClick:()=>s(a.filter((e,n)=>n!==t)),className:"absolute top-2 right-2 w-8 h-8 flex items-center justify-center rounded-full bg-black/60 border-2 border-white/70 shadow-lg transition-all hover:bg-red-600 hover:border-red-400 hover:scale-110","aria-label":"Xo nh",children:Qe.jsx(Fg,{className:"w-5 h-5 text-white"})})]},t))})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs("label",{className:"text-sm font-medium text-card-foreground flex items-center gap-2",children:[Qe.jsx(nf,{className:"w-4 h-4"}),"Th (chn ti a 3)"]}),Qe.jsx("div",{className:"flex flex-wrap gap-2",children:["#ReviewSnPhm","#TipsMuaSm","#LocalBrand","#FlashSale","#ThoiTrang","#CongNghe","#LamDep","#AnUong","#DuLich"].map(e=>Qe.jsx(EP,{variant:o.includes(e)?"default":"outline",className:"cursor-pointer transition-smooth "+(o.includes(e)?"bg-gradient-primary":"hover:bg-accent/20"),onClick:()=>o.length<3||o.includes(e)?(e=>{l(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(e):null,children:e},e))}),o.length>0&&Qe.jsxs("div",{className:"text-xs text-muted-foreground",children:[" chn: ",o.length,"/3"]})]}),Qe.jsxs("div",{className:"flex gap-3 flex-wrap",children:[Qe.jsx(AP,{onClick:()=>{v()},variant:"outline",className:"flex-1",children:"Hy"}),Qe.jsx(AP,{onClick:()=>d(!0),variant:"outline",className:"flex-1",disabled:!r.trim(),children:"Xem trc"}),Qe.jsxs(AP,{type:"button",variant:"outline",className:"flex-1",onClick:()=>h(!0),children:[Qe.jsx(xg,{className:"w-4 h-4 mr-1"}),"Chn sn phm ni bt"]}),Qe.jsx(AP,{onClick:g,className:"flex-1 bg-gradient-primary",disabled:!r.trim(),children:"ng ngay"}),p&&Qe.jsxs("div",{className:"flex items-center gap-2 mt-2 w-full",children:[Qe.jsx("img",{src:p.image,alt:p.name,className:"w-8 h-8 rounded-lg object-cover"}),Qe.jsx("span",{className:"text-xs text-primary font-semibold",children:p.name}),Qe.jsx("button",{type:"button",onClick:()=>m(null),className:"w-7 h-7 flex items-center justify-center rounded-full bg-black/60 border-2 border-white/70 shadow-lg transition-all hover:bg-red-600 hover:border-red-400 hover:scale-110","aria-label":"Xo sn phm ni bt",children:Qe.jsx(Fg,{className:"w-4 h-4 text-white"})})]})]}),Qe.jsx(Wne,{open:u,onOpenChange:h,onProductSelect:e=>{e.length>0?m(e[0]):m(null)},selectedProducts:p?[p]:[]})]})})]})})};function qne(e,[t,n]){return Math.min(n,Math.max(t,e))}var Xne=Ve.createContext(void 0);function $ne(e){const t=Ve.useContext(Xne);return e||t||"ltr"}function Yne(e){const t=Ve.useRef({value:e,previous:e});return Ve.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Jne=[" ","Enter","ArrowUp","ArrowDown"],Zne=[" ","Enter"],Qne="Select",[ere,tre,nre]=kh(Qne),[rre]=jh(Qne,[nre,bb]),ire=bb(),[are,sre]=rre(Qne),[ore,lre]=rre(Qne),cre=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:i,onOpenChange:a,value:s,defaultValue:o,onValueChange:l,dir:c,name:d,autoComplete:u,disabled:h,required:p,form:m}=e,f=ire(t),[g,v]=Ve.useState(null),[x,y]=Ve.useState(null),[b,w]=Ve.useState(!1),j=$ne(c),[N,_]=Yh({prop:r,defaultProp:i??!1,onChange:a,caller:Qne}),[S,C]=Yh({prop:s,defaultProp:o,onChange:l,caller:Qne}),A=Ve.useRef(null),M=!g||(m||!!g.closest("form")),[E,k]=Ve.useState(new Set),T=Array.from(E).map(e=>e.props.value).join(";");return Qe.jsx(Db,{...f,children:Qe.jsxs(are,{required:p,scope:t,trigger:g,onTriggerChange:v,valueNode:x,onValueNodeChange:y,valueNodeHasChildren:b,onValueNodeHasChildrenChange:w,contentId:Sx(),value:S,onValueChange:C,open:N,onOpenChange:_,dir:j,triggerPointerDownPosRef:A,disabled:h,children:[Qe.jsx(ere.Provider,{scope:t,children:Qe.jsx(ore,{scope:e.__scopeSelect,onNativeOptionAdd:Ve.useCallback(e=>{k(t=>new Set(t).add(e))},[]),onNativeOptionRemove:Ve.useCallback(e=>{k(t=>{const n=new Set(t);return n.delete(e),n})},[]),children:n})}),M?Qe.jsxs($re,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:u,value:S,onChange:e=>C(e.target.value),disabled:h,form:m,children:[void 0===S?Qe.jsx("option",{value:""}):null,Array.from(E)]},T):null]})})};cre.displayName=Qne;var dre="SelectTrigger",ure=Ve.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...i}=e,a=ire(n),s=sre(dre,n),o=s.disabled||r,l=wh(t,s.onTriggerChange),c=tre(n),d=Ve.useRef("touch"),[u,h,p]=Jre(e=>{const t=c().filter(e=>!e.disabled),n=t.find(e=>e.value===s.value),r=Zre(t,e,n);void 0!==r&&s.onValueChange(r.value)}),m=e=>{o||(s.onOpenChange(!0),p()),e&&(s.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return Qe.jsx(Lb,{asChild:!0,...a,children:Qe.jsx(Th.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":Yre(s.value)?"":void 0,...i,ref:l,onClick:xh(i.onClick,e=>{e.currentTarget.focus(),"mouse"!==d.current&&m(e)}),onPointerDown:xh(i.onPointerDown,e=>{d.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(m(e),e.preventDefault())}),onKeyDown:xh(i.onKeyDown,e=>{const t=""!==u.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||h(e.key),t&&" "===e.key||Jne.includes(e.key)&&(m(),e.preventDefault())})})})});ure.displayName=dre;var hre="SelectValue",pre=Ve.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,children:a,placeholder:s="",...o}=e,l=sre(hre,n),{onValueNodeHasChildrenChange:c}=l,d=void 0!==a,u=wh(t,l.onValueNodeChange);return Wh(()=>{c(d)},[c,d]),Qe.jsx(Th.span,{...o,ref:u,style:{pointerEvents:"none"},children:Yre(l.value)?Qe.jsx(Qe.Fragment,{children:s}):a})});pre.displayName=hre;var mre=Ve.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...i}=e;return Qe.jsx(Th.span,{"aria-hidden":!0,...i,ref:t,children:r||""})});mre.displayName="SelectIcon";var fre=e=>Qe.jsx(Kh,{asChild:!0,...e});fre.displayName="SelectPortal";var gre="SelectContent",vre=Ve.forwardRef((e,t)=>{const n=sre(gre,e.__scopeSelect),[r,i]=Ve.useState();if(Wh(()=>{i(new DocumentFragment)},[]),!n.open){const t=r;return t?ah.createPortal(Qe.jsx(yre,{scope:e.__scopeSelect,children:Qe.jsx(ere.Slot,{scope:e.__scopeSelect,children:Qe.jsx("div",{children:e.children})})}),t):null}return Qe.jsx(jre,{...e,ref:t})});vre.displayName=gre;var xre=10,[yre,bre]=rre(gre),wre=_h("SelectContent.RemoveScroll"),jre=Ve.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:s,side:o,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:h,collisionPadding:p,sticky:m,hideWhenDetached:f,avoidCollisions:g,...v}=e,x=sre(gre,n),[y,b]=Ve.useState(null),[w,j]=Ve.useState(null),N=wh(t,e=>b(e)),[_,S]=Ve.useState(null),[C,A]=Ve.useState(null),M=tre(n),[E,k]=Ve.useState(!1),T=Ve.useRef(!1);Ve.useEffect(()=>{if(y)return JO(y)},[y]),nO();const P=Ve.useCallback(e=>{const[t,...n]=M().map(e=>e.ref.current),[r]=n.slice(-1),i=document.activeElement;for(const a of e){if(a===i)return;if(null==a||a.scrollIntoView({block:"nearest"}),a===t&&w&&(w.scrollTop=0),a===r&&w&&(w.scrollTop=w.scrollHeight),null==a||a.focus(),document.activeElement!==i)return}},[M,w]),O=Ve.useCallback(()=>P([_,y]),[P,_,y]);Ve.useEffect(()=>{E&&O()},[E,O]);const{onOpenChange:R,triggerPointerDownPosRef:I}=x;Ve.useEffect(()=>{if(y){let e={x:0,y:0};const t=t=>{var n,r;e={x:Math.abs(Math.round(t.pageX)-((null==(n=I.current)?void 0:n.x)??0)),y:Math.abs(Math.round(t.pageY)-((null==(r=I.current)?void 0:r.y)??0))}},n=n=>{e.x<=10&&e.y<=10?n.preventDefault():y.contains(n.target)||R(!1),document.removeEventListener("pointermove",t),I.current=null};return null!==I.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",n,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",n,{capture:!0})}}},[y,R,I]),Ve.useEffect(()=>{const e=()=>R(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[R]);const[D,L]=Jre(e=>{const t=M().filter(e=>!e.disabled),n=t.find(e=>e.ref.current===document.activeElement),r=Zre(t,e,n);r&&setTimeout(()=>r.ref.current.focus())}),B=Ve.useCallback((e,t,n)=>{const r=!T.current&&!n;(void 0!==x.value&&x.value===t||r)&&(S(e),r&&(T.current=!0))},[x.value]),F=Ve.useCallback(()=>null==y?void 0:y.focus(),[y]),U=Ve.useCallback((e,t,n)=>{const r=!T.current&&!n;(void 0!==x.value&&x.value===t||r)&&A(e)},[x.value]),z="popper"===r?_re:Nre,H=z===_re?{side:o,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:h,collisionPadding:p,sticky:m,hideWhenDetached:f,avoidCollisions:g}:{};return Qe.jsx(yre,{scope:n,content:y,viewport:w,onViewportChange:j,itemRefCallback:B,selectedItem:_,onItemLeave:F,itemTextRefCallback:U,focusSelectedItem:O,selectedItemText:C,position:r,isPositioned:E,searchRef:D,children:Qe.jsx(GO,{as:wre,allowPinchZoom:!0,children:Qe.jsx(XP,{asChild:!0,trapped:x.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:xh(i,e=>{var t;null==(t=x.trigger)||t.focus({preventScroll:!0}),e.preventDefault()}),children:Qe.jsx(Fh,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:Qe.jsx(z,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:e=>e.preventDefault(),...v,...H,onPlaced:()=>k(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:xh(v.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||L(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=M().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const n=e.target,r=t.indexOf(n);t=t.slice(r+1)}setTimeout(()=>P(t)),e.preventDefault()}})})})})})})});jre.displayName="SelectContentImpl";var Nre=Ve.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...i}=e,a=sre(gre,n),s=bre(gre,n),[o,l]=Ve.useState(null),[c,d]=Ve.useState(null),u=wh(t,e=>d(e)),h=tre(n),p=Ve.useRef(!1),m=Ve.useRef(!0),{viewport:f,selectedItem:g,selectedItemText:v,focusSelectedItem:x}=s,y=Ve.useCallback(()=>{if(a.trigger&&a.valueNode&&o&&c&&f&&g&&v){const e=a.trigger.getBoundingClientRect(),t=c.getBoundingClientRect(),n=a.valueNode.getBoundingClientRect(),i=v.getBoundingClientRect();if("rtl"!==a.dir){const r=i.left-t.left,a=n.left-r,s=e.left-a,l=e.width+s,c=Math.max(l,t.width),d=window.innerWidth-xre,u=qne(a,[xre,Math.max(xre,d-c)]);o.style.minWidth=l+"px",o.style.left=u+"px"}else{const r=t.right-i.right,a=window.innerWidth-n.right-r,s=window.innerWidth-e.right-a,l=e.width+s,c=Math.max(l,t.width),d=window.innerWidth-xre,u=qne(a,[xre,Math.max(xre,d-c)]);o.style.minWidth=l+"px",o.style.right=u+"px"}const s=h(),l=window.innerHeight-2*xre,d=f.scrollHeight,u=window.getComputedStyle(c),m=parseInt(u.borderTopWidth,10),x=parseInt(u.paddingTop,10),y=parseInt(u.borderBottomWidth,10),b=m+x+d+parseInt(u.paddingBottom,10)+y,w=Math.min(5*g.offsetHeight,b),j=window.getComputedStyle(f),N=parseInt(j.paddingTop,10),_=parseInt(j.paddingBottom,10),S=e.top+e.height/2-xre,C=l-S,A=g.offsetHeight/2,M=m+x+(g.offsetTop+A),E=b-M;if(M<=S){const e=s.length>0&&g===s[s.length-1].ref.current;o.style.bottom="0px";const t=c.clientHeight-f.offsetTop-f.offsetHeight,n=M+Math.max(C,A+(e?_:0)+t+y);o.style.height=n+"px"}else{const e=s.length>0&&g===s[0].ref.current;o.style.top="0px";const t=Math.max(S,m+f.offsetTop+(e?N:0)+A)+E;o.style.height=t+"px",f.scrollTop=M-S+f.offsetTop}o.style.margin=`${xre}px 0`,o.style.minHeight=w+"px",o.style.maxHeight=l+"px",null==r||r(),requestAnimationFrame(()=>p.current=!0)}},[h,a.trigger,a.valueNode,o,c,f,g,v,a.dir,r]);Wh(()=>y(),[y]);const[b,w]=Ve.useState();Wh(()=>{c&&w(window.getComputedStyle(c).zIndex)},[c]);const j=Ve.useCallback(e=>{e&&!0===m.current&&(y(),null==x||x(),m.current=!1)},[y,x]);return Qe.jsx(Sre,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:p,onScrollButtonChange:j,children:Qe.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:Qe.jsx(Th.div,{...i,ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});Nre.displayName="SelectItemAlignedPosition";var _re=Ve.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=xre,...a}=e,s=ire(n);return Qe.jsx(Bb,{...s,...a,ref:t,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});_re.displayName="SelectPopperPosition";var[Sre,Cre]=rre(gre,{}),Are="SelectViewport",Mre=Ve.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...i}=e,a=bre(Are,n),s=Cre(Are,n),o=wh(t,a.onViewportChange),l=Ve.useRef(0);return Qe.jsxs(Qe.Fragment,{children:[Qe.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),Qe.jsx(ere.Slot,{scope:n,children:Qe.jsx(Th.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:xh(i.onScroll,e=>{const t=e.currentTarget,{contentWrapper:n,shouldExpandOnScrollRef:r}=s;if((null==r?void 0:r.current)&&n){const e=Math.abs(l.current-t.scrollTop);if(e>0){const r=window.innerHeight-2*xre,i=parseFloat(n.style.minHeight),a=parseFloat(n.style.height),s=Math.max(i,a);if(s<r){const i=s+e,a=Math.min(r,i),o=i-a;n.style.height=a+"px","0px"===n.style.bottom&&(t.scrollTop=o>0?o:0,n.style.justifyContent="flex-end")}}}l.current=t.scrollTop})})})]})});Mre.displayName=Are;var Ere="SelectGroup",[kre,Tre]=rre(Ere);Ve.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=Sx();return Qe.jsx(kre,{scope:n,id:i,children:Qe.jsx(Th.div,{role:"group","aria-labelledby":i,...r,ref:t})})}).displayName=Ere;var Pre="SelectLabel",Ore=Ve.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=Tre(Pre,n);return Qe.jsx(Th.div,{id:i.id,...r,ref:t})});Ore.displayName=Pre;var Rre="SelectItem",[Ire,Dre]=rre(Rre),Lre=Ve.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:a,...s}=e,o=sre(Rre,n),l=bre(Rre,n),c=o.value===r,[d,u]=Ve.useState(a??""),[h,p]=Ve.useState(!1),m=wh(t,e=>{var t;return null==(t=l.itemRefCallback)?void 0:t.call(l,e,r,i)}),f=Sx(),g=Ve.useRef("touch"),v=()=>{i||(o.onValueChange(r),o.onOpenChange(!1))};if(""===r)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return Qe.jsx(Ire,{scope:n,value:r,disabled:i,textId:f,isSelected:c,onItemTextChange:Ve.useCallback(e=>{u(t=>t||((null==e?void 0:e.textContent)??"").trim())},[]),children:Qe.jsx(ere.ItemSlot,{scope:n,value:r,disabled:i,textValue:d,children:Qe.jsx(Th.div,{role:"option","aria-labelledby":f,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...s,ref:m,onFocus:xh(s.onFocus,()=>p(!0)),onBlur:xh(s.onBlur,()=>p(!1)),onClick:xh(s.onClick,()=>{"mouse"!==g.current&&v()}),onPointerUp:xh(s.onPointerUp,()=>{"mouse"===g.current&&v()}),onPointerDown:xh(s.onPointerDown,e=>{g.current=e.pointerType}),onPointerMove:xh(s.onPointerMove,e=>{var t;g.current=e.pointerType,i?null==(t=l.onItemLeave)||t.call(l):"mouse"===g.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:xh(s.onPointerLeave,e=>{var t;e.currentTarget===document.activeElement&&(null==(t=l.onItemLeave)||t.call(l))}),onKeyDown:xh(s.onKeyDown,e=>{var t;""!==(null==(t=l.searchRef)?void 0:t.current)&&" "===e.key||(Zne.includes(e.key)&&v()," "===e.key&&e.preventDefault())})})})})});Lre.displayName=Rre;var Bre="SelectItemText",Fre=Ve.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,...a}=e,s=sre(Bre,n),o=bre(Bre,n),l=Dre(Bre,n),c=lre(Bre,n),[d,u]=Ve.useState(null),h=wh(t,e=>u(e),l.onItemTextChange,e=>{var t;return null==(t=o.itemTextRefCallback)?void 0:t.call(o,e,l.value,l.disabled)}),p=null==d?void 0:d.textContent,m=Ve.useMemo(()=>Qe.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:f,onNativeOptionRemove:g}=c;return Wh(()=>(f(m),()=>g(m)),[f,g,m]),Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(Th.span,{id:l.textId,...a,ref:h}),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?ah.createPortal(a.children,s.valueNode):null]})});Fre.displayName=Bre;var Ure="SelectItemIndicator",zre=Ve.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return Dre(Ure,n).isSelected?Qe.jsx(Th.span,{"aria-hidden":!0,...r,ref:t}):null});zre.displayName=Ure;var Hre="SelectScrollUpButton",Vre=Ve.forwardRef((e,t)=>{const n=bre(Hre,e.__scopeSelect),r=Cre(Hre,e.__scopeSelect),[i,a]=Ve.useState(!1),s=wh(t,r.onScrollButtonChange);return Wh(()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollTop>0;a(e)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[n.viewport,n.isPositioned]),i?Qe.jsx(Kre,{...e,ref:s,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});Vre.displayName=Hre;var Gre="SelectScrollDownButton",Wre=Ve.forwardRef((e,t)=>{const n=bre(Gre,e.__scopeSelect),r=Cre(Gre,e.__scopeSelect),[i,a]=Ve.useState(!1),s=wh(t,r.onScrollButtonChange);return Wh(()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,n=Math.ceil(t.scrollTop)<e;a(n)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[n.viewport,n.isPositioned]),i?Qe.jsx(Kre,{...e,ref:s,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});Wre.displayName=Gre;var Kre=Ve.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=e,a=bre("SelectScrollButton",n),s=Ve.useRef(null),o=tre(n),l=Ve.useCallback(()=>{null!==s.current&&(window.clearInterval(s.current),s.current=null)},[]);return Ve.useEffect(()=>()=>l(),[l]),Wh(()=>{var e;const t=o().find(e=>e.ref.current===document.activeElement);null==(e=null==t?void 0:t.ref.current)||e.scrollIntoView({block:"nearest"})},[o]),Qe.jsx(Th.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:xh(i.onPointerDown,()=>{null===s.current&&(s.current=window.setInterval(r,50))}),onPointerMove:xh(i.onPointerMove,()=>{var e;null==(e=a.onItemLeave)||e.call(a),null===s.current&&(s.current=window.setInterval(r,50))}),onPointerLeave:xh(i.onPointerLeave,()=>{l()})})}),qre=Ve.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return Qe.jsx(Th.div,{"aria-hidden":!0,...r,ref:t})});qre.displayName="SelectSeparator";var Xre="SelectArrow";Ve.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=ire(n),a=sre(Xre,n),s=bre(Xre,n);return a.open&&"popper"===s.position?Qe.jsx(Fb,{...i,...r,ref:t}):null}).displayName=Xre;var $re=Ve.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const i=Ve.useRef(null),a=wh(r,i),s=Yne(t);return Ve.useEffect(()=>{const e=i.current;if(!e)return;const n=window.HTMLSelectElement.prototype,r=Object.getOwnPropertyDescriptor(n,"value").set;if(s!==t&&r){const n=new Event("change",{bubbles:!0});r.call(e,t),e.dispatchEvent(n)}},[s,t]),Qe.jsx(Th.select,{...n,style:{...Jh,...n.style},ref:a,defaultValue:t})});function Yre(e){return""===e||void 0===e}function Jre(e){const t=Oh(e),n=Ve.useRef(""),r=Ve.useRef(0),i=Ve.useCallback(e=>{const i=n.current+e;t(i),function e(t){n.current=t,window.clearTimeout(r.current),""!==t&&(r.current=window.setTimeout(()=>e(""),1e3))}(i)},[t]),a=Ve.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return Ve.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,a]}function Zre(e,t,n){const r=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let a=(s=e,o=Math.max(i,0),s.map((e,t)=>s[(o+t)%s.length]));var s,o;1===r.length&&(a=a.filter(e=>e!==n));const l=a.find(e=>e.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}$re.displayName="SelectBubbleInput";var Qre=ure,eie=mre,tie=fre,nie=vre,rie=Mre,iie=Ore,aie=Lre,sie=Fre,oie=zre,lie=Vre,cie=Wre,die=qre;const uie=cre,hie=pre,pie=Ve.forwardRef(({className:e,children:t,...n},r)=>Qe.jsxs(Qre,{ref:r,className:Rv("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,Qe.jsx(eie,{asChild:!0,children:Qe.jsx(vm,{className:"h-4 w-4 opacity-50"})})]}));pie.displayName=Qre.displayName;const mie=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(lie,{ref:n,className:Rv("flex cursor-default items-center justify-center py-1",e),...t,children:Qe.jsx(bm,{className:"h-4 w-4"})}));mie.displayName=lie.displayName;const fie=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(cie,{ref:n,className:Rv("flex cursor-default items-center justify-center py-1",e),...t,children:Qe.jsx(vm,{className:"h-4 w-4"})}));fie.displayName=cie.displayName;const gie=Ve.forwardRef(({className:e,children:t,position:n="popper",...r},i)=>Qe.jsx(tie,{children:Qe.jsxs(nie,{ref:i,className:Rv("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[Qe.jsx(mie,{}),Qe.jsx(rie,{className:Rv("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),Qe.jsx(fie,{})]})}));gie.displayName=nie.displayName;Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(iie,{ref:n,className:Rv("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=iie.displayName;const vie=Ve.forwardRef(({className:e,children:t,...n},r)=>Qe.jsxs(aie,{ref:r,className:Rv("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[Qe.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Qe.jsx(oie,{children:Qe.jsx(gm,{className:"h-4 w-4"})})}),Qe.jsx(sie,{children:t})]}));vie.displayName=aie.displayName;Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(die,{ref:n,className:Rv("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=die.displayName;const xie=({isOpen:e,onClose:t,onQuestionCreated:n})=>{const[r,i]=Ve.useState(""),[a,s]=Ve.useState(""),[o,l]=Ve.useState(""),[c,d]=Ve.useState([]),[u,h]=Ve.useState([]),[p,m]=Ve.useState(!1),{toast:f}=vh(),g=[{value:"shopping",label:"Mua sm"},{value:"tech",label:"Cng ngh"},{value:"beauty",label:"Lm p"},{value:"fashion",label:"Thi trang"},{value:"food",label:"n ung"},{value:"travel",label:"Du lch"},{value:"other",label:"Khc"}],v=()=>{var e;if(!r.trim()||!a.trim()||!o)return void f({title:"Li",description:"Vui lng in y  thng tin cu hi",variant:"destructive"});const i={id:Date.now(),type:"question",user:{name:"K V",avatar:"/images/avatars/Avt-Vy.jpg",verified:!1},title:r.trim(),content:a.trim(),images:u,category:(null==(e=g.find(e=>e.value===o))?void 0:e.label)||"Khc",likes:0,comments:0,shares:0,time:"Va xong",tags:c,answers:0};n(i),x(),f({title:"Thnh cng!",description:"Cu hi  c ng thnh cng"}),t()},x=()=>{i(""),s(""),l(""),d([]),h([]),m(!1)},y=()=>{var e;return Qe.jsxs(DP,{className:"p-6 bg-gradient-card border-border",children:[Qe.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Qe.jsxs(AD,{children:[Qe.jsx(MD,{src:"/placeholder.svg"}),Qe.jsx(ED,{children:"B"})]}),Qe.jsxs("div",{className:"flex-1",children:[Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx("h4",{className:"font-semibold text-card-foreground",children:"Bn"}),Qe.jsx(EP,{variant:"outline",className:"text-xs",children:null==(e=g.find(e=>e.value===o))?void 0:e.label})]}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Va xong"})]}),Qe.jsx(Sm,{className:"w-5 h-5 text-accent"})]}),Qe.jsxs("div",{className:"space-y-4",children:[Qe.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:r}),Qe.jsx("p",{className:"text-card-foreground leading-relaxed",children:a}),u.length>0&&Qe.jsx("div",{className:`grid gap-2 ${1===u.length?"":"grid-cols-2"} ${3===u.length?"md:grid-cols-3":""}`,children:u.map((e,t)=>Qe.jsx("img",{src:e,alt:`Preview ${t+1}`,className:"w-full h-64 object-cover rounded-lg"},t))}),c.length>0&&Qe.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(e=>Qe.jsx(EP,{variant:"secondary",className:"text-xs",children:e},e))}),Qe.jsx("div",{className:"text-sm text-muted-foreground",children:"0 cu tr li  0 lt thch"})]})]})};return Qe.jsx(FR,{open:e,onOpenChange:()=>{t(),x()},children:Qe.jsxs(VR,{className:"max-w-2xl max-h-[90vh] overflow-y-auto bg-gradient-card border-border",children:[Qe.jsx(GR,{children:Qe.jsx(KR,{className:"text-card-foreground flex items-center justify-between",children:Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx(Sm,{className:"w-5 h-5 text-accent"}),p?"Xem trc cu hi":"t cu hi mi"]})})}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:p?Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(y,{}),Qe.jsxs("div",{className:"flex gap-3",children:[Qe.jsx(AP,{onClick:()=>m(!1),variant:"outline",className:"flex-1",children:"Chnh sa"}),Qe.jsx(AP,{onClick:v,className:"flex-1 bg-gradient-accent",children:"ng cu hi"})]})]}):Qe.jsxs(Qe.Fragment,{children:[Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx("label",{className:"text-sm font-medium text-card-foreground",children:"Tiu  cu hi *"}),Qe.jsx(Vne,{placeholder:"V d: Nn mua iPhone hay Samsung trong tm gi 20 triu?",value:r,onChange:e=>i(e.target.value),className:"bg-background/50 border-border text-card-foreground",maxLength:200}),Qe.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[r.length,"/200"]})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx("label",{className:"text-sm font-medium text-card-foreground",children:"Danh mc *"}),Qe.jsxs(uie,{value:o,onValueChange:l,children:[Qe.jsx(pie,{className:"bg-background/50 border-border text-card-foreground",children:Qe.jsx(hie,{placeholder:"Chn danh mc ph hp"})}),Qe.jsx(gie,{className:"bg-popover border-border",children:g.map(e=>Qe.jsx(vie,{value:e.value,className:"text-popover-foreground",children:e.label},e.value))})]})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx("label",{className:"text-sm font-medium text-card-foreground",children:"M t chi tit *"}),Qe.jsx(Hne,{placeholder:"M t chi tit cu hi ca bn, bao gm ng cnh v nhng g bn  th...",value:a,onChange:e=>s(e.target.value),className:"min-h-[120px] resize-none bg-background/50 border-border text-card-foreground",maxLength:1500}),Qe.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[a.length,"/1500"]})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx("label",{className:"text-sm font-medium text-card-foreground",children:"Hnh nh minh ha (ti a 3, ty chn)"}),Qe.jsxs("div",{className:"flex gap-3",children:[Qe.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{const t=Array.from(e.target.files||[]);if(t.length>0){const e=t.slice(0,3-u.length).map(e=>URL.createObjectURL(e));h(t=>[...t,...e].slice(0,3))}},className:"hidden",id:"question-image-upload",disabled:u.length>=3}),Qe.jsx("label",{htmlFor:"question-image-upload",className:"flex-1 cursor-pointer "+(u.length>=3?"opacity-50 pointer-events-none":""),children:Qe.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-6 text-center hover:border-accent transition-smooth",children:[Qe.jsx(df,{className:"w-8 h-8 mx-auto mb-2 text-muted-foreground"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:u.length<3?"Nhn  ti nh minh ha":"  3 nh"})]})})]}),u.length>0&&Qe.jsx("div",{className:`grid gap-2 ${1===u.length?"":"grid-cols-2"} ${3===u.length?"md:grid-cols-3":""}`,children:u.map((e,t)=>Qe.jsxs("div",{className:"relative",children:[Qe.jsx("img",{src:e,alt:`Selected ${t+1}`,className:"w-full h-48 object-cover rounded-lg"}),Qe.jsx("button",{type:"button",onClick:()=>h(u.filter((e,n)=>n!==t)),className:"absolute top-2 right-2 w-8 h-8 flex items-center justify-center rounded-full bg-black/60 border-2 border-white/70 shadow-lg transition-all hover:bg-red-600 hover:border-red-400 hover:scale-110","aria-label":"Xo nh",children:Qe.jsx(Fg,{className:"w-5 h-5 text-white"})})]},t))})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs("label",{className:"text-sm font-medium text-card-foreground flex items-center gap-2",children:[Qe.jsx(xg,{className:"w-4 h-4"}),"Th (chn ti a 4)"]}),Qe.jsx("div",{className:"flex flex-wrap gap-2",children:["#CnTuVn","#KinhNghim","#Review","#SoSnh","#GiC","#ChtLng","#ThuongHieu","#TipHay"].map(e=>Qe.jsx(EP,{variant:c.includes(e)?"default":"outline",className:"cursor-pointer transition-smooth "+(c.includes(e)?"bg-gradient-accent":"hover:bg-accent/20"),onClick:()=>c.length<4||c.includes(e)?(e=>{d(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(e):null,children:e},e))}),c.length>0&&Qe.jsxs("div",{className:"text-xs text-muted-foreground",children:[" chn: ",c.length,"/4"]})]}),Qe.jsxs("div",{className:"flex gap-3",children:[Qe.jsx(AP,{onClick:()=>{x()},variant:"outline",className:"flex-1",children:"Hy"}),Qe.jsx(AP,{onClick:()=>m(!0),variant:"outline",className:"flex-1",disabled:!r.trim()||!a.trim()||!o,children:"Xem trc"}),Qe.jsx(AP,{onClick:v,className:"flex-1 bg-gradient-accent",disabled:!r.trim()||!a.trim()||!o,children:"ng cu hi"})]})]})})]})})},yie=()=>{const[e,t]=Ve.useState([{id:1,type:"review",user:{name:"Minh Anh",avatar:"https://randomuser.me/api/portraits/women/68.jpg",verified:!0,followers:2400},content:"Va mua c chic o s mi t local brand ABC, cht lng qu tuyt vi! Vi cotton mm mi, form dng chun p. Recommend cho mi ngi nh! ",image:"https://images.unsplash.com/photo-1512436991641-6745cdb1723f?auto=format&fit=crop&w=600&q=80",likes:124,comments:23,shares:12,views:1203,time:"2 gi trc",tags:["#ReviewSnPhm","#LocalBrand"],featuredProduct:{name:"o s mi Local Brand ABC",price:"349000",image:"https://images.unsplash.com/photo-1512436991641-6745cdb1723f?w=80&h=80&fit=crop"}},{id:2,type:"question",user:{name:"Thu Linh",avatar:"https://randomuser.me/api/portraits/women/65.jpg",verified:!1,followers:156},title:"Tm son lu tri gi hc sinh",content:"Ai bit shop no bn son lu tri m gi hc sinh khng? Em ang tm mu nude nh nhng ph hp i hc ",image:"https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=600&q=80",likes:89,comments:45,shares:8,views:892,time:"4 gi trc",tags:["#TipsMuaSm","#CnTuVn"],answers:12},{id:3,type:"sharing",user:{name:"c Anh",avatar:"https://randomuser.me/api/portraits/men/32.jpg",verified:!0,followers:5200},content:"Flash sale hm nay c qu nhiu deal hot! Va sn c in thoi gim 30%, my tnh bng gim 25%. Ae nhanh tay ln! ",image:"https://images.unsplash.com/photo-1519125323398-675f0ddb6308?auto=format&fit=crop&w=600&q=80",likes:267,comments:56,shares:34,views:3421,time:"6 gi trc",tags:["#FlashSale","#TipsMuaSm"],featuredProduct:{name:"in thoi Flash Sale",price:"5990000",image:"https://images.unsplash.com/photo-1519125323398-675f0ddb6308?w=80&h=80&fit=crop"}},{id:4,type:"livestream",user:{name:"Shop Thi Trang Kim",avatar:"https://randomuser.me/api/portraits/women/12.jpg",verified:!0,followers:8900},content:" LIVE: ang livestream review b su tp ma ng mi! C voucher gim 50% cho 50 khch hng u tin! ",image:"https://images.unsplash.com/photo-1517841905240-472988babdf9?auto=format&fit=crop&w=600&q=80",likes:445,comments:128,shares:67,views:2156,time:"ang live",tags:["#Livestream","#ThoiTrang","#GiamGia"],isLive:!0},{id:5,type:"tutorial",user:{name:"Beauty Guru Linh",avatar:"https://randomuser.me/api/portraits/women/44.jpg",verified:!0,followers:15600},title:"Cch chn kem chng nng ph hp vi tng loi da",content:"Hm nay mnh s chia s tips chn kem chng nng da trn loi da v budget ca mi ngi. T da kh, da du n da hn hp u c cch chn ring nh! ",image:"https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=600&q=80",likes:678,comments:234,shares:156,views:4567,time:"1 ngy trc",tags:["#LamDep","#Tutorial","#KemChongNang"]}]),[n,r]=Ve.useState(!1),[i,a]=Ve.useState(!1),s=[{label:"Thnh vin",value:"2.4M+",icon:Og},{label:"Bi vit",value:"156K+",icon:im},{label:"Cu hi",value:"45K+",icon:Sm}],o=e=>{switch(e){case"question":return Qe.jsx(Sm,{className:"w-4 h-4 text-accent"});case"livestream":return Qe.jsx("div",{className:"w-4 h-4 bg-red-500 rounded-full animate-pulse"});case"tutorial":return Qe.jsx(im,{className:"w-4 h-4 text-success"});default:return null}},l=e=>"question"===e.type?Qe.jsx(EP,{variant:"outline",className:"text-xs border-accent text-accent",children:"Cu hi"}):"livestream"===e.type&&e.isLive?Qe.jsx(EP,{className:"text-xs bg-red-500 animate-pulse",children:" LIVE"}):"tutorial"===e.type?Qe.jsx(EP,{variant:"outline",className:"text-xs border-success text-success",children:"Hng dn"}):null;return Qe.jsxs("div",{className:"min-h-screen bg-background",children:[Qe.jsx("main",{className:"container mx-auto px-4 py-8",children:Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:[Qe.jsxs("div",{className:"text-left space-y-3 max-w-3xl",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center shadow-lg",children:Qe.jsx(Og,{className:"w-6 h-6 text-white"})}),Qe.jsx("h1",{className:"md:text-4xl text-2xl font-bold bg-gradient-hero bg-clip-text text-transparent",children:"Cng ng VibeMarket"})]}),Qe.jsx("p",{className:"text-muted-foreground md:text-lg text-base",children:"Chia s, tho lun v kt ni vi hng triu ngi dng"}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex flex-wrap gap-6 justify-center md:justify-start",children:s.map(e=>Qe.jsxs("div",{className:"text-center min-w-[100px]",children:[Qe.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[Qe.jsx(e.icon,{className:"w-5 h-5 text-accent"}),Qe.jsx("span",{className:"text-xl md:text-2xl font-bold text-accent",children:e.value})]}),Qe.jsx("span",{className:"text-sm text-muted-foreground",children:e.label})]},e.label))})]}),Qe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[Qe.jsxs("div",{className:"w-full lg:col-span-1 space-y-6 mt-6 lg:mt-0",children:[Qe.jsxs(DP,{className:"p-4 sm:p-6 bg-gradient-card border-border",children:[Qe.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[Qe.jsx(Sg,{className:"w-5 h-5 text-accent"}),Qe.jsx("h3",{className:"font-semibold text-card-foreground",children:"Xu hng"})]}),Qe.jsx("div",{className:"space-y-2 sm:space-y-3",children:[{name:"#ReviewSnPhm",posts:1250},{name:"#TipsMuaSm",posts:890},{name:"#LocalBrand",posts:650},{name:"#FlashSale",posts:450}].map((e,t)=>Qe.jsxs(QT.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center justify-between cursor-pointer hover:bg-accent/10 p-2 rounded-lg transition-smooth",children:[Qe.jsx("span",{className:"text-sm font-medium text-card-foreground",children:e.name}),Qe.jsx(EP,{variant:"secondary",className:"text-xs",children:e.posts})]},e.name))})]}),Qe.jsxs(DP,{className:"p-4 sm:p-6 bg-gradient-card border-border",children:[Qe.jsxs("h3",{className:"font-semibold text-card-foreground mb-4 flex items-center gap-2",children:[Qe.jsx(pg,{className:"w-4 h-4 text-accent"}),"Hnh ng nhanh"]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs(AP,{className:"w-full gap-3 text-sm sm:text-base",variant:"outline",onClick:()=>r(!0),children:[Qe.jsx(Wf,{className:"w-4 h-4"}),"To bi vit"]}),Qe.jsxs(AP,{className:"w-full gap-3 text-sm sm:text-base",variant:"outline",onClick:()=>a(!0),children:[Qe.jsx(Cf,{className:"w-4 h-4"}),"t cu hi"]})]})]})]}),Qe.jsx("div",{className:"lg:col-span-3 space-y-6",children:e.map((e,t)=>{return Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:Qe.jsxs(DP,{className:"p-6 bg-gradient-card border-border hover-lift group",children:[Qe.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Qe.jsxs("div",{className:"relative",children:[Qe.jsxs(AD,{className:"w-12 h-12",children:[Qe.jsx(MD,{src:e.user.avatar}),Qe.jsx(ED,{children:e.user.name[0]})]}),"livestream"===e.type&&e.isLive&&Qe.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full animate-pulse border-2 border-card"})]}),Qe.jsxs("div",{className:"flex-1",children:[Qe.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Qe.jsx("h4",{className:"font-semibold text-card-foreground",children:e.user.name}),e.user.verified&&Qe.jsx("div",{className:"w-4 h-4 bg-accent rounded-full flex items-center justify-center",children:Qe.jsx("span",{className:"text-xs text-accent-foreground",children:""})}),o(e.type),l(e)]}),Qe.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[Qe.jsx("span",{children:e.time}),Qe.jsx("span",{children:""}),Qe.jsxs("span",{children:[e.user.followers," ngi theo di"]})]})]})]}),Qe.jsxs("div",{className:"space-y-4",children:[e.title&&Qe.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:e.title}),Qe.jsx("p",{className:"text-card-foreground leading-relaxed",children:e.content}),e.image&&Qe.jsxs("div",{className:"relative overflow-hidden rounded-lg",children:[Qe.jsx("img",{src:e.image,alt:"Post content",className:"w-full object-contain bg-white group-hover:scale-105 transition-smooth"}),"livestream"===e.type&&e.isLive&&Qe.jsx("div",{className:"absolute top-4 left-4 bg-red-500 text-white px-2 py-1 rounded text-xs font-medium animate-pulse",children:" LIVE"})]}),Qe.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map(e=>Qe.jsx(EP,{variant:"secondary",className:"text-xs hover:bg-accent/20 cursor-pointer transition-smooth",children:e},e))}),e.featuredProduct&&Qe.jsxs("div",{className:"bg-neutral-900 rounded-lg p-4 mb-4",children:[Qe.jsxs("div",{className:"flex items-center mb-3",children:[Qe.jsx(xg,{className:"h-4 w-4 text-primary mr-2"}),Qe.jsx("span",{className:"text-sm font-medium text-white",children:"Sn phm ni bt"})]}),Qe.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-stretch sm:justify-between bg-neutral-900 rounded-lg p-4 gap-4",children:[Qe.jsxs("div",{className:"flex items-center w-full sm:w-auto justify-center sm:justify-start",children:[Qe.jsx("img",{src:e.featuredProduct.image,alt:e.featuredProduct.name,className:"w-16 h-16 sm:w-14 sm:h-14 rounded-lg object-cover border border-white/10"}),Qe.jsxs("div",{className:"ml-3 text-center sm:text-left flex-1 sm:flex-initial",children:[Qe.jsx("p",{className:"text-sm font-medium text-white line-clamp-1",children:e.featuredProduct.name}),Qe.jsx("p",{className:"text-lg font-bold text-primary",children:(n=e.featuredProduct.price,new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(n))})]})]}),Qe.jsxs(AP,{size:"sm",className:"bg-primary text-white hover:bg-primary/80 w-full sm:w-auto flex items-center justify-center",children:[Qe.jsx(cg,{className:"h-4 w-4 mr-1"}),"Thm vo gi"]})]})]}),Qe.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between pt-4 border-t border-border gap-3 sm:gap-0",children:[Qe.jsxs("div",{className:"flex justify-between sm:justify-start sm:gap-6 w-full sm:w-auto",children:[Qe.jsxs(AP,{variant:"ghost",size:"sm",className:"gap-2 text-muted-foreground hover:text-red-500 hover:bg-red-500/10 transition-smooth flex-1 sm:flex-none justify-center",children:[Qe.jsx(sf,{className:"w-4 h-4"}),e.likes]}),Qe.jsxs(AP,{variant:"ghost",size:"sm",className:"gap-2 text-muted-foreground hover:text-accent hover:bg-accent/10 transition-smooth flex-1 sm:flex-none justify-center",children:[Qe.jsx(Cf,{className:"w-4 h-4"}),"question"===e.type?`${e.answers} tr li`:`${e.comments} bnh lun`]}),Qe.jsxs(AP,{variant:"ghost",size:"sm",className:"gap-2 text-muted-foreground hover:text-primary hover:bg-primary/10 transition-smooth flex-1 sm:flex-none justify-center",children:[Qe.jsx(ig,{className:"w-4 h-4"}),e.shares]})]}),Qe.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-4 text-xs text-muted-foreground w-full sm:w-auto",children:[Qe.jsxs("div",{className:"flex items-center gap-1",children:[Qe.jsx(Vm,{className:"w-3 h-3"}),e.views]}),Qe.jsx(AP,{variant:"ghost",size:"sm",className:"p-1 hover:text-accent",children:Qe.jsx(sm,{className:"w-4 h-4"})})]})]})]})]})},e.id);var n})})]})]})}),Qe.jsx(Kne,{isOpen:n,onClose:()=>r(!1),onPostCreated:e=>{t(t=>[e,...t])}}),Qe.jsx(xie,{isOpen:i,onClose:()=>a(!1),onQuestionCreated:e=>{t(t=>[e,...t])}})]})};var bie="rovingFocusGroup.onEntryFocus",wie={bubbles:!1,cancelable:!0},jie="RovingFocusGroup",[Nie,_ie,Sie]=kh(jie),[Cie,Aie]=jh(jie,[Sie]),[Mie,Eie]=Cie(jie),kie=Ve.forwardRef((e,t)=>Qe.jsx(Nie.Provider,{scope:e.__scopeRovingFocusGroup,children:Qe.jsx(Nie.Slot,{scope:e.__scopeRovingFocusGroup,children:Qe.jsx(Tie,{...e,ref:t})})}));kie.displayName=jie;var Tie=Ve.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:a,currentTabStopId:s,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:d=!1,...u}=e,h=Ve.useRef(null),p=wh(t,h),m=$ne(a),[f,g]=Yh({prop:s,defaultProp:o??null,onChange:l,caller:jie}),[v,x]=Ve.useState(!1),y=Oh(c),b=_ie(n),w=Ve.useRef(!1),[j,N]=Ve.useState(0);return Ve.useEffect(()=>{const e=h.current;if(e)return e.addEventListener(bie,y),()=>e.removeEventListener(bie,y)},[y]),Qe.jsx(Mie,{scope:n,orientation:r,dir:m,loop:i,currentTabStopId:f,onItemFocus:Ve.useCallback(e=>g(e),[g]),onItemShiftTab:Ve.useCallback(()=>x(!0),[]),onFocusableItemAdd:Ve.useCallback(()=>N(e=>e+1),[]),onFocusableItemRemove:Ve.useCallback(()=>N(e=>e-1),[]),children:Qe.jsx(Th.div,{tabIndex:v||0===j?-1:0,"data-orientation":r,...u,ref:p,style:{outline:"none",...e.style},onMouseDown:xh(e.onMouseDown,()=>{w.current=!0}),onFocus:xh(e.onFocus,e=>{const t=!w.current;if(e.target===e.currentTarget&&t&&!v){const t=new CustomEvent(bie,wie);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=b().filter(e=>e.focusable);Iie([e.find(e=>e.active),e.find(e=>e.id===f),...e].filter(Boolean).map(e=>e.ref.current),d)}}w.current=!1}),onBlur:xh(e.onBlur,()=>x(!1))})})}),Pie="RovingFocusGroupItem",Oie=Ve.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:a,children:s,...o}=e,l=Sx(),c=a||l,d=Eie(Pie,n),u=d.currentTabStopId===c,h=_ie(n),{onFocusableItemAdd:p,onFocusableItemRemove:m,currentTabStopId:f}=d;return Ve.useEffect(()=>{if(r)return p(),()=>m()},[r,p,m]),Qe.jsx(Nie.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:Qe.jsx(Th.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...o,ref:t,onMouseDown:xh(e.onMouseDown,e=>{r?d.onItemFocus(c):e.preventDefault()}),onFocus:xh(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:xh(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void d.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,n){const r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:Rie[r]}(e,d.orientation,d.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let i=h().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)i.reverse();else if("prev"===t||"next"===t){"prev"===t&&i.reverse();const a=i.indexOf(e.currentTarget);i=d.loop?(r=a+1,(n=i).map((e,t)=>n[(r+t)%n.length])):i.slice(a+1)}setTimeout(()=>Iie(i))}var n,r}),children:"function"==typeof s?s({isCurrentTabStop:u,hasTabStop:null!=f}):s})})});Oie.displayName=Pie;var Rie={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Iie(e,t=!1){const n=document.activeElement;for(const r of e){if(r===n)return;if(r.focus({preventScroll:t}),document.activeElement!==n)return}}var Die=kie,Lie=Oie,Bie="Tabs",[Fie]=jh(Bie,[Aie]),Uie=Aie(),[zie,Hie]=Fie(Bie),Vie=Ve.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:a,orientation:s="horizontal",dir:o,activationMode:l="automatic",...c}=e,d=$ne(o),[u,h]=Yh({prop:r,onChange:i,defaultProp:a??"",caller:Bie});return Qe.jsx(zie,{scope:n,baseId:Sx(),value:u,onValueChange:h,orientation:s,dir:d,activationMode:l,children:Qe.jsx(Th.div,{dir:d,"data-orientation":s,...c,ref:t})})});Vie.displayName=Bie;var Gie="TabsList",Wie=Ve.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...i}=e,a=Hie(Gie,n),s=Uie(n);return Qe.jsx(Die,{asChild:!0,...s,orientation:a.orientation,dir:a.dir,loop:r,children:Qe.jsx(Th.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:t})})});Wie.displayName=Gie;var Kie="TabsTrigger",qie=Ve.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...a}=e,s=Hie(Kie,n),o=Uie(n),l=Yie(s.baseId,r),c=Jie(s.baseId,r),d=r===s.value;return Qe.jsx(Lie,{asChild:!0,...o,focusable:!i,active:d,children:Qe.jsx(Th.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...a,ref:t,onMouseDown:xh(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():s.onValueChange(r)}),onKeyDown:xh(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&s.onValueChange(r)}),onFocus:xh(e.onFocus,()=>{const e="manual"!==s.activationMode;d||i||!e||s.onValueChange(r)})})})});qie.displayName=Kie;var Xie="TabsContent",$ie=Ve.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:i,children:a,...s}=e,o=Hie(Xie,n),l=Yie(o.baseId,r),c=Jie(o.baseId,r),d=r===o.value,u=Ve.useRef(d);return Ve.useEffect(()=>{const e=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(e)},[]),Qe.jsx(qh,{present:i||d,children:({present:n})=>Qe.jsx(Th.div,{"data-state":d?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!n,id:c,tabIndex:0,...s,ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0},children:n&&a})})});function Yie(e,t){return`${e}-trigger-${t}`}function Jie(e,t){return`${e}-content-${t}`}$ie.displayName=Xie;var Zie=Wie,Qie=qie,eae=$ie;const tae=Vie,nae=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(Zie,{ref:n,className:Rv("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));nae.displayName=Zie.displayName;const rae=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(Qie,{ref:n,className:Rv("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));rae.displayName=Qie.displayName;const iae=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(eae,{ref:n,className:Rv("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));iae.displayName=eae.displayName;const aae=()=>{const e=Zj(),[t,n]=Ve.useState("all"),[r,i]=Ve.useState(new Set),a=[{id:1,name:"Flash Sale",count:1250,icon:zg,gradient:"from-yellow-500 to-orange-500"},{id:2,name:"Thi trang",count:890,icon:pg,gradient:"from-pink-500 to-rose-500"},{id:3,name:"Cng ngh",count:756,icon:Ag,gradient:"from-blue-500 to-cyan-500"},{id:4,name:"Local Brand",count:634,icon:yg,gradient:"from-green-500 to-emerald-500"}],s=e=>{i(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})};return Qe.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-purple-50 to-pink-50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-950",children:Qe.jsx("main",{className:"container mx-auto px-4 py-8",children:Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:[Qe.jsx("div",{className:"relative",children:Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center space-y-6",children:[Qe.jsxs("div",{className:"flex items-center justify-center gap-4 flex-wrap",children:[Qe.jsx(QT.div,{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-purple-500 via-pink-500 to-rose-500 flex items-center justify-center shadow-2xl",animate:{rotate:[0,10,-10,0],scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,repeatDelay:1},children:Qe.jsx(Om,{className:"w-8 h-8 text-white"})}),Qe.jsx("h1",{className:"text-4xl md:text-6xl font-black bg-gradient-to-r from-purple-600 via-pink-600 to-rose-600 bg-clip-text text-transparent",children:"Khm ph iu mi"}),Qe.jsx(QT.div,{animate:{rotate:[0,360]},transition:{duration:3,repeat:1/0,ease:"linear"},children:Qe.jsx(pg,{className:"w-8 h-8 text-pink-500"})})]}),Qe.jsx("p",{className:"text-lg md:text-xl text-muted-foreground max-w-2xl mx-auto",children:" Cp nht xu hng, s kin hot v nhng deal khng th b l"}),Qe.jsx(QT.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"max-w-2xl mx-auto",children:Qe.jsxs("div",{className:"relative",children:[Qe.jsx(eg,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),Qe.jsx(Vne,{placeholder:"Tm kim ni dung, s kin, deal hot...",className:"pl-12 pr-12 h-14 rounded-2xl border-2 shadow-lg"}),Qe.jsx(AP,{size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500",children:Qe.jsx(Km,{className:"w-5 h-5"})})]})}),Qe.jsxs(QT.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex items-center justify-center gap-3 flex-wrap",children:[Qe.jsx("span",{className:"text-sm text-muted-foreground font-medium",children:"Xu hng:"}),a.map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.4+.1*t},whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(EP,{className:`bg-gradient-to-r ${e.gradient} text-white cursor-pointer px-4 py-2 text-sm gap-2 shadow-lg hover:opacity-90`,children:[Qe.jsx(e.icon,{className:"w-4 h-4"}),e.name,Qe.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded-full text-xs",children:e.count})]})},e.id))]})]})}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:Qe.jsxs(tae,{defaultValue:"all",className:"w-full",children:[Qe.jsx(nae,{className:"w-full grid grid-cols-4 h-auto p-2 bg-gradient-to-r from-muted/50 to-muted/30 rounded-2xl",children:[{value:"all",label:"Tt c",icon:Om},{value:"content",label:"Ni dung",icon:im},{value:"events",label:"S kin",icon:um},{value:"deals",label:"Deal hot",icon:zg}].map(e=>Qe.jsxs(rae,{value:e.value,className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-500 data-[state=active]:to-pink-500 data-[state=active]:text-white rounded-xl px-4 py-3",children:[Qe.jsx(e.icon,{className:"w-4 h-4 mr-2"}),Qe.jsx("span",{className:"hidden sm:inline",children:e.label})]},e.value))}),Qe.jsxs(iae,{value:"all",className:"space-y-8 mt-8",children:[Qe.jsxs("section",{children:[Qe.jsxs(QT.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center justify-between mb-6",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-r from-orange-500 to-red-500 flex items-center justify-center",children:Qe.jsx(qm,{className:"w-6 h-6 text-white"})}),Qe.jsx("h2",{className:"text-2xl md:text-3xl font-bold",children:"Ni dung ni bt"})]}),Qe.jsxs(AP,{variant:"outline",className:"hidden md:flex items-center gap-2 border-2",children:["Xem tt c",Qe.jsx(Qp,{className:"w-4 h-4"})]})]}),Qe.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{id:1,title:"Xu hng thi trang Thu/ng 2024",description:"Khm ph nhng xu hng hot nht cho ma lnh sp ti",image:"https://i.ibb.co/NnHFp7Vr/download.jpg",category:"Thi trang",trending:!0,views:12500,likes:890,comments:234,author:{name:"Fashion Insider",avatar:"https://images.unsplash.com/photo-1517841905240-472988babdf9?w=60&h=60&fit=crop",verified:!0},readTime:"5 pht c"},{id:2,title:"Top 10 gadget cng ngh khng th b qua",description:"Nhng sn phm cng ngh t ph ang lm ma lm gi",image:"https://i.ibb.co/ycwsRm3K/qua-tang-cong-nghe-695c822c80.webp",category:"Cng ngh",trending:!0,views:8900,likes:654,comments:189,author:{name:"Tech Review VN",avatar:"https://images.unsplash.com/photo-1511367461989-f85a21fda167?w=60&h=60&fit=crop",verified:!0},readTime:"8 pht c"},{id:3,title:"Local brand Vit ang hot nht hin ti",description:"T ho vi nhng thng hiu made in Vietnam cht lng cao",image:"/placeholder.svg",category:"Local Brand",trending:!1,views:6700,likes:423,comments:156,author:{name:"VibeMarket Team",avatar:"https://images.unsplash.com/photo-1508214751196-bcfd4ca60f91?w=60&h=60&fit=crop",verified:!0},readTime:"6 pht c"}].map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1*t},whileHover:{y:-8},className:"group",children:Qe.jsxs(DP,{className:"overflow-hidden border-none shadow-xl hover:shadow-2xl transition-all bg-gradient-to-br from-background to-background/80 backdrop-blur-sm cursor-pointer",children:[Qe.jsxs("div",{className:"relative h-48 overflow-hidden",children:[Qe.jsx(QT.img,{src:e.image,alt:e.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),Qe.jsxs("div",{className:"absolute top-3 left-3 flex gap-2",children:[Qe.jsx(EP,{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white",children:e.category}),e.trending&&Qe.jsxs(EP,{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white gap-1 animate-pulse",children:[Qe.jsx(Sg,{className:"w-3 h-3"}),"Hot"]})]}),Qe.jsx(QT.button,{className:"absolute top-3 right-3 w-10 h-10 rounded-full bg-white/90 dark:bg-slate-900/90 backdrop-blur-sm shadow-lg flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>s(e.id),children:Qe.jsx(sm,{className:"w-5 h-5 "+(r.has(e.id)?"fill-primary text-primary":"")})}),Qe.jsxs("div",{className:"absolute bottom-3 left-3 right-3 flex items-center gap-2",children:[Qe.jsx("img",{src:e.author.avatar,alt:e.author.name,className:"w-8 h-8 rounded-full border-2 border-white shadow-lg"}),Qe.jsx("div",{className:"flex-1 min-w-0",children:Qe.jsxs("div",{className:"flex items-center gap-1",children:[Qe.jsx("span",{className:"text-sm font-semibold text-white truncate",children:e.author.name}),e.author.verified&&Qe.jsx(fg,{className:"w-3.5 h-3.5 fill-blue-500 text-blue-500"})]})}),Qe.jsxs(EP,{variant:"secondary",className:"text-xs",children:[Qe.jsx(Em,{className:"w-3 h-3 mr-1"}),e.readTime]})]})]}),Qe.jsxs(UP,{className:"p-5 space-y-3",children:[Qe.jsx("h3",{className:"font-bold text-lg line-clamp-2 group-hover:text-primary transition-colors",children:e.title}),Qe.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description}),Qe.jsxs("div",{className:"flex items-center justify-between pt-3 border-t",children:[Qe.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[Qe.jsxs("div",{className:"flex items-center gap-1",children:[Qe.jsx(Vm,{className:"w-4 h-4"}),Qe.jsx("span",{children:e.views.toLocaleString()})]}),Qe.jsxs("div",{className:"flex items-center gap-1",children:[Qe.jsx(sf,{className:"w-4 h-4"}),Qe.jsx("span",{children:e.likes})]}),Qe.jsxs("div",{className:"flex items-center gap-1",children:[Qe.jsx(Cf,{className:"w-4 h-4"}),Qe.jsx("span",{children:e.comments})]})]}),Qe.jsx(AP,{size:"sm",variant:"ghost",className:"group-hover:text-primary",children:Qe.jsx(ym,{className:"w-4 h-4"})})]})]})]})},e.id))})]}),Qe.jsxs("section",{children:[Qe.jsxs(QT.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center justify-between mb-6",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 flex items-center justify-center",children:Qe.jsx(Zm,{className:"w-6 h-6 text-white"})}),Qe.jsx("h2",{className:"text-2xl md:text-3xl font-bold",children:"S kin c bit"})]}),Qe.jsxs(AP,{variant:"outline",className:"hidden md:flex items-center gap-2 border-2",children:["Xem tt c",Qe.jsx(Qp,{className:"w-4 h-4"})]})]}),Qe.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:[{id:1,title:"L hi mua sm 12.12",description:"Siu sale cui nm vi hng triu deal hp dn",date:"12/12/2024",discount:"Gim n 70%",participants:25e3,color:"from-orange-500 to-red-500",image:"https://images.unsplash.com/photo-1607082348824-0a96f2a4b9da?w=600&h=400&fit=crop",location:"Ton quc",status:"Sp din ra"},{id:2,title:"Festival Local Brand 2024",description:"Tn vinh v qung b cc thng hiu Vit Nam",date:"20/12/2024",discount:"u i c quyn",participants:15e3,color:"from-green-500 to-emerald-500",image:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=600&h=400&fit=crop",location:"H Ni & TP.HCM",status:"ang m ng k"}].map((t,n)=>Qe.jsx(QT.div,{initial:{opacity:0,x:n%2==0?-20:20},animate:{opacity:1,x:0},transition:{delay:.2*n},whileHover:{y:-8},className:"group",children:Qe.jsxs(DP,{className:"overflow-hidden border-none shadow-xl hover:shadow-2xl transition-all bg-gradient-to-br from-background to-background/80 backdrop-blur-sm cursor-pointer",children:[Qe.jsxs("div",{className:"relative h-56 overflow-hidden",children:[Qe.jsx(QT.img,{src:t.image,alt:t.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),Qe.jsx("div",{className:`absolute inset-0 bg-gradient-to-t ${t.color} opacity-40`}),Qe.jsxs(EP,{className:"absolute top-3 right-3 bg-white/90 dark:bg-slate-900/90 backdrop-blur-sm text-foreground gap-1.5 shadow-lg",children:[Qe.jsx(Gf,{className:"w-3.5 h-3.5 fill-green-500 text-green-500"}),t.status]})]}),Qe.jsxs(UP,{className:"p-6 space-y-4",children:[Qe.jsxs("div",{className:"flex items-start gap-4",children:[Qe.jsx("div",{className:`w-14 h-14 rounded-2xl bg-gradient-to-r ${t.color} flex items-center justify-center flex-shrink-0 shadow-lg`,children:Qe.jsx(Zm,{className:"w-7 h-7 text-white"})}),Qe.jsxs("div",{className:"flex-1 space-y-2",children:[Qe.jsx("h3",{className:"font-bold text-xl group-hover:text-primary transition-colors",children:t.title}),Qe.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:t.description})]})]}),Qe.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[Qe.jsxs("div",{className:"flex items-center gap-2 text-sm p-3 rounded-xl bg-muted/50",children:[Qe.jsx(um,{className:"w-4 h-4 text-primary flex-shrink-0"}),Qe.jsx("span",{className:"font-medium",children:t.date})]}),Qe.jsxs("div",{className:"flex items-center gap-2 text-sm p-3 rounded-xl bg-muted/50",children:[Qe.jsx(jf,{className:"w-4 h-4 text-primary flex-shrink-0"}),Qe.jsx("span",{className:"font-medium truncate",children:t.location})]})]}),Qe.jsxs(EP,{className:`bg-gradient-to-r ${t.color} text-white text-base px-4 py-2 w-full justify-center shadow-lg`,children:[Qe.jsx(zg,{className:"w-4 h-4 mr-2"}),t.discount]}),Qe.jsx("div",{className:"flex items-center justify-between pt-3 border-t",children:Qe.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[Qe.jsx(Og,{className:"w-4 h-4"}),Qe.jsxs("span",{children:[t.participants.toLocaleString()," ngi tham gia"]})]})}),Qe.jsx(QT.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:Qe.jsxs(AP,{className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:opacity-90 shadow-lg",onClick:()=>e(`/events/${t.id}`),children:[Qe.jsx(Zf,{className:"w-4 h-4 mr-2"}),"Xem chi tit"]})})]})]})},t.id))})]}),Qe.jsxs("section",{children:[Qe.jsxs(QT.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center justify-between mb-6",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-r from-yellow-500 to-orange-500 flex items-center justify-center",children:Qe.jsx(zg,{className:"w-6 h-6 text-white"})}),Qe.jsx("h2",{className:"text-2xl md:text-3xl font-bold",children:"Deal hot trong ngy"}),Qe.jsxs(EP,{className:"bg-gradient-to-r from-red-500 to-pink-500 text-white animate-pulse",children:[Qe.jsx(qm,{className:"w-3.5 h-3.5 mr-1"}),"HOT"]})]}),Qe.jsxs(AP,{variant:"outline",className:"hidden md:flex items-center gap-2 border-2",children:["Xem tt c",Qe.jsx(Qp,{className:"w-4 h-4"})]})]}),Qe.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[{id:1,title:"iPhone 17 Pro Max",originalPrice:"65.490.000",salePrice:"63.490.000",discount:17,timeLeft:"2h 30m",image:"https://i.ibb.co/4ZK1RRgY/shopping.webp",seller:{name:"AppleStoreVN",avatar:"https://images.unsplash.com/photo-1465101046530-73398c7f28ca?w=60&h=60&fit=crop",verified:!0,rating:4.9},sold:234,stock:50},{id:2,title:"MacBook Air M2",originalPrice:"32.990.000",salePrice:"27.990.000",discount:15,timeLeft:"4h 15m",image:"https://i.ibb.co/xqLp6YHx/download.jpg",seller:{name:"MacShop",avatar:"https://images.unsplash.com/photo-1517841905240-472988babdf9?w=60&h=60&fit=crop",verified:!0,rating:4.8},sold:156,stock:30},{id:3,title:"Samsung Galaxy S24",originalPrice:"22.990.000",salePrice:"18.990.000",discount:17,timeLeft:"1h 45m",image:"https://i.ibb.co/svyfTbr9/shopping.webp",seller:{name:"SamsungStore",avatar:"https://images.unsplash.com/photo-1511367461989-f85a21fda167?w=60&h=60&fit=crop",verified:!0,rating:4.7},sold:189,stock:20}].map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},whileHover:{y:-8},className:"group",children:Qe.jsxs(DP,{className:"overflow-hidden border-none shadow-xl hover:shadow-2xl transition-all bg-gradient-to-br from-background to-background/80 backdrop-blur-sm relative",children:[Qe.jsx(QT.div,{className:"absolute top-3 right-3 z-10",whileHover:{scale:1.1,rotate:5},children:Qe.jsxs(EP,{className:"bg-gradient-to-r from-red-500 to-pink-500 text-white text-lg px-4 py-2 shadow-lg border-2 border-white",children:[Qe.jsx(zg,{className:"w-4 h-4 mr-1"}),"-",e.discount,"%"]})}),Qe.jsx(QT.button,{className:"absolute top-3 left-3 z-10 w-10 h-10 rounded-full bg-white/90 dark:bg-slate-900/90 backdrop-blur-sm shadow-lg flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>s(e.id),children:Qe.jsx(sf,{className:"w-5 h-5 "+(r.has(e.id)?"fill-red-500 text-red-500":"")})}),Qe.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-800 dark:to-slate-900 overflow-hidden",children:[Qe.jsx(QT.img,{src:e.image,alt:e.title,className:"w-full h-full object-contain p-4 group-hover:scale-110 transition-transform duration-500"}),e.stock<=20&&Qe.jsx(QT.div,{className:"absolute bottom-3 left-3 right-3",initial:{y:20,opacity:0},animate:{y:0,opacity:1},children:Qe.jsxs(EP,{className:"bg-red-500/90 backdrop-blur-sm text-white w-full justify-center py-1.5 shadow-lg",children:[Qe.jsx(qm,{className:"w-3.5 h-3.5 mr-1 animate-pulse"}),"Ch cn ",e.stock," sn phm!"]})})]}),Qe.jsxs(UP,{className:"p-5 space-y-3",children:[Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx("img",{src:e.seller.avatar,alt:e.seller.name,className:"w-8 h-8 rounded-full border-2 border-primary shadow-md"}),Qe.jsxs("div",{className:"flex-1 min-w-0",children:[Qe.jsxs("div",{className:"flex items-center gap-1",children:[Qe.jsx("span",{className:"text-sm font-semibold truncate",children:e.seller.name}),e.seller.verified&&Qe.jsx(fg,{className:"w-3.5 h-3.5 fill-blue-500 text-blue-500 flex-shrink-0"})]}),Qe.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[Qe.jsx(fg,{className:"w-3 h-3 fill-yellow-400 text-yellow-400"}),Qe.jsx("span",{children:e.seller.rating})]})]})]}),Qe.jsx("h3",{className:"font-bold text-base line-clamp-2 min-h-[3rem] group-hover:text-primary transition-colors",children:e.title}),Qe.jsx("div",{className:"space-y-1",children:Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx("span",{className:"text-2xl font-black bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:e.salePrice}),Qe.jsx("span",{className:"text-sm text-muted-foreground line-through",children:e.originalPrice})]})}),Qe.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Qe.jsxs("div",{className:"flex items-center gap-1.5 text-red-600 dark:text-red-400 font-semibold",children:[Qe.jsx(Em,{className:"w-4 h-4"}),Qe.jsxs("span",{children:["Cn ",e.timeLeft]})]}),Qe.jsxs("div",{className:"flex items-center gap-1.5 text-muted-foreground",children:[Qe.jsx(Sg,{className:"w-4 h-4 text-green-600"}),Qe.jsxs("span",{children:[" bn ",e.sold]})]})]}),Qe.jsx(QT.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"pt-2",children:Qe.jsxs(AP,{className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:opacity-90 shadow-lg",children:[Qe.jsx(lg,{className:"w-4 h-4 mr-2"}),"Mua ngay"]})})]})]})},e.id))})]})]}),Qe.jsx(iae,{value:"content",className:"mt-8",children:Qe.jsxs("div",{className:"text-center py-12",children:[Qe.jsx(im,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),Qe.jsx("h3",{className:"text-xl font-semibold mb-2",children:"ang pht trin"}),Qe.jsx("p",{className:"text-muted-foreground",children:"Ni dung chi tit s sm c cp nht"})]})}),Qe.jsx(iae,{value:"events",className:"mt-8",children:Qe.jsxs("div",{className:"text-center py-12",children:[Qe.jsx(um,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),Qe.jsx("h3",{className:"text-xl font-semibold mb-2",children:"ang pht trin"}),Qe.jsx("p",{className:"text-muted-foreground",children:"Danh sch s kin s sm c cp nht"})]})}),Qe.jsx(iae,{value:"deals",className:"mt-8",children:Qe.jsxs("div",{className:"text-center py-12",children:[Qe.jsx(zg,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),Qe.jsx("h3",{className:"text-xl font-semibold mb-2",children:"ang pht trin"}),Qe.jsx("p",{className:"text-muted-foreground",children:"Danh sch deal hot s sm c cp nht"})]})})]})})]})})})};var sae="Progress",[oae]=jh(sae),[lae,cae]=oae(sae),dae=Ve.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:a=pae,...s}=e;(i||0===i)&&gae(i);const o=gae(i)?i:100;null!==r&&vae(r,o);const l=vae(r,o)?r:null,c=fae(l)?a(l,o):void 0;return Qe.jsx(lae,{scope:n,value:l,max:o,children:Qe.jsx(Th.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":fae(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":mae(l,o),"data-value":l??void 0,"data-max":o,...s,ref:t})})});dae.displayName=sae;var uae="ProgressIndicator",hae=Ve.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,i=cae(uae,n);return Qe.jsx(Th.div,{"data-state":mae(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:t})});function pae(e,t){return`${Math.round(e/t*100)}%`}function mae(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function fae(e){return"number"==typeof e}function gae(e){return fae(e)&&!isNaN(e)&&e>0}function vae(e,t){return fae(e)&&!isNaN(e)&&e<=t&&e>=0}hae.displayName=uae;var xae=dae,yae=hae;const bae=Ve.forwardRef(({className:e,value:t,...n},r)=>Qe.jsx(xae,{ref:r,className:Rv("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:Qe.jsx(yae,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));bae.displayName=xae.displayName;const wae=()=>{const e=Zj(),[t,n]=Ve.useState({hours:2,minutes:30,seconds:45}),[r,i]=Ve.useState([]),[a,s]=Ve.useState(!0),[o,l]=Ve.useState(new Set),c=[{time:"14:00",title:"Thi trang nam",discount:"Gim 50%",icon:xg,color:"from-blue-500 to-cyan-500",items:150},{time:"16:00",title:"M phm cao cp",discount:"Gim 40%",icon:pg,color:"from-pink-500 to-rose-500",items:200},{time:"18:00",title:" gia dng",discount:"Gim 60%",icon:Zm,color:"from-purple-500 to-indigo-500",items:180},{time:"20:00",title:"Ph kin in t",discount:"Gim 35%",icon:zg,color:"from-orange-500 to-red-500",items:120}];Ve.useEffect(()=>{fetch("http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/product/flash_sale.php").then(e=>e.json()).then(e=>{e.success&&i(e.products),s(!1)}).catch(()=>{s(!1),px.error("Khng th ti sn phm Flash Sale")})},[]),Ve.useEffect(()=>{const e=setInterval(()=>{n(e=>e.seconds>0?{...e,seconds:e.seconds-1}:e.minutes>0?{...e,minutes:e.minutes-1,seconds:59}:e.hours>0?{hours:e.hours-1,minutes:59,seconds:59}:e)},1e3);return()=>clearInterval(e)},[]);return Qe.jsx("div",{className:"min-h-screen bg-background",children:Qe.jsx("main",{className:"container mx-auto px-4 py-8",children:Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:[Qe.jsx("div",{className:"relative",children:Qe.jsxs("div",{className:"flex items-center gap-4",children:[Qe.jsxs(QT.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",duration:.8},className:"relative flex-shrink-0",children:[Qe.jsx(QT.div,{className:"absolute inset-0 bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 rounded-2xl blur-xl opacity-50",animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),Qe.jsx("div",{className:"relative w-14 h-14 lg:w-16 lg:h-16 rounded-2xl bg-gradient-to-r from-primary to-purple-600 flex items-center justify-center shadow-2xl",children:Qe.jsx(zg,{className:"w-7 h-7 lg:w-10 lg:h-10 text-white"})})]}),Qe.jsxs("div",{className:"text-left flex-1",children:[Qe.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[Qe.jsx(QT.h1,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"text-3xl lg:text-5xl font-black",children:Qe.jsx("span",{className:"bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:"FLASH SALE"})}),Qe.jsx(QT.div,{animate:{scale:[1,1.2,1],rotate:[0,10,-10,0]},transition:{duration:1.5,repeat:1/0},children:Qe.jsx(qm,{className:"w-8 h-8 lg:w-10 lg:h-10 text-red-500"})})]}),Qe.jsx(QT.p,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"text-base lg:text-lg text-muted-foreground",children:" Sn deal siu hot - Gi sc ch trong thi gian c hn! "})]})]})}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:Qe.jsxs(DP,{className:"overflow-hidden border-none shadow-2xl bg-gradient-to-r from-primary via-purple-600 to-primary relative",children:[Qe.jsx(QT.div,{className:"absolute inset-0 opacity-20",animate:{backgroundPosition:["0% 0%","100% 100%"]},transition:{duration:20,repeat:1/0,repeatType:"reverse"},style:{backgroundImage:"radial-gradient(circle, white 1px, transparent 1px)",backgroundSize:"30px 30px"}}),Qe.jsx(QT.div,{className:"absolute inset-0 bg-gradient-to-br from-transparent via-white/10 to-transparent",animate:{opacity:[.3,.6,.3]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),Qe.jsx(QT.div,{className:"absolute inset-0 opacity-30",animate:{background:["radial-gradient(circle at 20% 50%, rgba(255,255,255,0.3) 0%, transparent 50%)","radial-gradient(circle at 80% 50%, rgba(255,255,255,0.3) 0%, transparent 50%)","radial-gradient(circle at 20% 50%, rgba(255,255,255,0.3) 0%, transparent 50%)"]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}}),Qe.jsx(UP,{className:"py-8 relative z-10",children:Qe.jsxs("div",{className:"flex flex-col items-center gap-6",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx(QT.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:Qe.jsx(jg,{className:"w-8 h-8 text-white drop-shadow-lg"})}),Qe.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white drop-shadow-lg",children:"Kt thc trong:"})]}),Qe.jsx("div",{className:"flex items-center gap-3 md:gap-6",children:[{value:t.hours,label:"Gi"},{value:t.minutes,label:"Pht"},{value:t.seconds,label:"Giy"}].map((e,t)=>Qe.jsxs(Qe.Fragment,{children:[Qe.jsxs(QT.div,{className:"bg-white/20 backdrop-blur-xl rounded-2xl p-4 md:p-6 min-w-[80px] md:min-w-[100px] shadow-2xl border-2 border-white/30 relative overflow-hidden",whileHover:{scale:1.05},animate:"Giy"===e.label?{scale:[1,1.05,1]}:{},transition:{duration:1,repeat:"Giy"===e.label?1/0:0},children:[Qe.jsx(QT.div,{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent",animate:{opacity:[.5,.8,.5]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),Qe.jsxs("div",{className:"relative z-10",children:[Qe.jsx("div",{className:"text-4xl md:text-5xl font-black text-white drop-shadow-lg",children:e.value.toString().padStart(2,"0")}),Qe.jsx("div",{className:"text-xs md:text-sm text-white/90 font-semibold mt-2",children:e.label})]})]},e.label),t<2&&Qe.jsx(QT.div,{className:"text-3xl md:text-4xl text-white font-bold drop-shadow-lg",animate:{opacity:[1,.3,1]},transition:{duration:1,repeat:1/0},children:":"})]}))}),Qe.jsxs(QT.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"flex gap-3",children:[Qe.jsxs(AP,{className:"bg-white text-primary hover:bg-white/90 font-bold shadow-lg hover:shadow-xl transition-all",size:"lg",children:[Qe.jsx(rm,{className:"w-4 h-4 mr-2"}),"t nhc nh"]}),Qe.jsxs(AP,{variant:"outline",className:"border-2 border-white bg-background hover:bg-white/20 font-bold backdrop-blur-sm",size:"lg",children:[Qe.jsx(ig,{className:"w-4 h-4 mr-2"}),"Chia s"]})]})]})})]})}),Qe.jsxs("section",{children:[Qe.jsxs(QT.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center justify-between mb-6",children:[Qe.jsxs("h2",{className:"text-2xl md:text-3xl font-bold flex items-center gap-3",children:[Qe.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-r from-primary to-purple-600 flex items-center justify-center shadow-lg",children:Qe.jsx(qm,{className:"w-6 h-6 text-white"})}),"Sn phm Flash Sale",Qe.jsx(QT.div,{animate:{scale:[1,1.1,1]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:Qe.jsxs(EP,{className:"bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500 text-white text-lg px-3 py-1 shadow-lg border-2 border-white/30",children:[Qe.jsx(qm,{className:"w-4 h-4 mr-1 inline-block"}),"HOT"]})})]}),Qe.jsxs(AP,{variant:"outline",className:"hidden md:flex items-center gap-2 border-2 border-primary/50 hover:border-primary hover:bg-primary/5",children:["Xem tt c",Qe.jsx(Qp,{className:"w-4 h-4"})]})]}),a?Qe.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,t)=>Qe.jsxs(DP,{className:"overflow-hidden animate-pulse",children:[Qe.jsx("div",{className:"h-64 bg-muted"}),Qe.jsxs("div",{className:"p-4 space-y-3",children:[Qe.jsx("div",{className:"h-4 bg-muted rounded"}),Qe.jsx("div",{className:"h-4 bg-muted rounded w-2/3"}),Qe.jsx("div",{className:"h-8 bg-muted rounded"})]})]},t))}):0===r.length?Qe.jsx(DP,{className:"p-12 text-center border-none shadow-xl bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm",children:Qe.jsxs(QT.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"space-y-4",children:[Qe.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-br from-primary/20 to-purple-600/20 rounded-full flex items-center justify-center",children:Qe.jsx(jm,{className:"w-10 h-10 text-primary"})}),Qe.jsx("h3",{className:"text-xl font-semibold",children:"Cha c sn phm Flash Sale"}),Qe.jsx("p",{className:"text-muted-foreground",children:"Hy quay li sau  khng b l cc deal hot!"}),Qe.jsxs(AP,{className:"bg-gradient-to-r from-primary to-purple-600 hover:opacity-90 shadow-lg",children:[Qe.jsx(rm,{className:"w-4 h-4 mr-2"}),"Nhn thng bo"]})]})}):Qe.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Qe.jsx(eM,{children:r.map((t,n)=>Qe.jsx(QT.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{delay:.1*n},whileHover:{y:-8},className:"group",children:Qe.jsxs(DP,{className:"overflow-hidden border-2 border-border/50 hover:border-primary/50 shadow-xl hover:shadow-2xl transition-all duration-300 relative bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm",children:[Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary to-purple-600"}),Qe.jsxs(QT.div,{className:"absolute top-3 right-3 z-20",whileHover:{scale:1.1,rotate:5},children:[Qe.jsx(QT.div,{className:"absolute inset-0 bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500 rounded-full blur-md opacity-50",animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:2,repeat:1/0}}),Qe.jsxs(EP,{className:"relative bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500 text-white text-base px-4 py-2 shadow-xl border-2 border-white/40",children:[Qe.jsx(QT.span,{animate:{rotate:[0,-15,15,0]},transition:{duration:.5,repeat:1/0,repeatDelay:2},className:"inline-block",children:Qe.jsx(zg,{className:"w-4 h-4 mr-1"})}),"-",t.discount,"%"]})]}),Qe.jsx(QT.button,{className:"absolute top-3 left-3 z-20 w-10 h-10 rounded-full bg-white/90 dark:bg-slate-900/90 backdrop-blur-sm shadow-lg flex items-center justify-center hover:bg-primary/10",whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{return e=t.id,void l(t=>{const n=new Set(t);return n.has(e)?(n.delete(e),px.success(" xa khi yu thch")):(n.add(e),px.success(" thm vo yu thch")),n});var e},children:Qe.jsx(sf,{className:"w-5 h-5 "+(o.has(t.id)?"fill-primary text-primary":"text-muted-foreground")})}),Qe.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-muted/50 to-muted/30",children:[Qe.jsx(QT.img,{src:t.image,alt:t.name,className:"w-full h-64 object-contain p-4 group-hover:scale-110 transition-transform duration-500",whileHover:{scale:1.05}}),Qe.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:Qe.jsxs(QT.div,{className:"bg-card/95 backdrop-blur-md rounded-xl p-3 shadow-lg border border-border/50",initial:{y:20,opacity:0},animate:{y:0,opacity:1},children:[Qe.jsxs("div",{className:"flex items-center justify-between text-xs font-semibold mb-2",children:[Qe.jsxs("span",{className:"flex items-center gap-1",children:[Qe.jsx(Sg,{className:"w-3.5 h-3.5 text-primary"})," bn: ",t.sold,"/",t.quantity]}),Qe.jsxs("span",{className:"bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent font-bold",children:[t.quantity>0?Math.round(t.sold/t.quantity*100):0,"%"]})]}),Qe.jsx(bae,{value:t.quantity>0?t.sold/t.quantity*100:0,className:"h-2 [&>div]:bg-gradient-to-r [&>div]:from-primary [&>div]:to-purple-600"}),t.quantity-t.sold<=10&&Qe.jsxs(QT.p,{className:"text-xs text-primary font-bold mt-2 flex items-center gap-1",animate:{opacity:[1,.5,1]},transition:{duration:1,repeat:1/0},children:[Qe.jsx(qm,{className:"w-3 h-3"}),"Ch cn ",t.quantity-t.sold," sn phm!"]})]})})]}),Qe.jsxs(UP,{className:"p-5 space-y-3",children:[Qe.jsx("h3",{className:"font-semibold text-base line-clamp-2 min-h-[3rem] group-hover:bg-gradient-to-r group-hover:from-primary group-hover:to-purple-600 group-hover:bg-clip-text group-hover:text-transparent transition-all",children:t.name}),Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((e,n)=>Qe.jsx(fg,{className:"w-4 h-4 "+(n<Math.floor(t.rating)?"fill-yellow-400 text-yellow-400":"fill-muted text-muted")},n))}),Qe.jsx("span",{className:"text-sm font-semibold",children:t.rating}),Qe.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",t.reviews," nh gi)"]})]}),Qe.jsxs("div",{className:"space-y-1",children:[Qe.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[Qe.jsxs("span",{className:"text-2xl font-black bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:[t.price.toLocaleString(),""]}),Qe.jsxs("span",{className:"text-sm text-muted-foreground line-through",children:[t.originalPrice.toLocaleString(),""]})]}),Qe.jsxs("div",{className:"flex items-center gap-2 text-xs text-green-600 dark:text-green-400 font-medium",children:[Qe.jsx(pg,{className:"w-3.5 h-3.5"}),"Tit kim ",(t.originalPrice-t.price).toLocaleString(),""]})]}),Qe.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2",children:[Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(AP,{variant:"outline",className:"w-full border-2 border-primary/50 hover:border-primary hover:bg-primary/5",onClick:()=>e(`/product/${t.id}`),children:[Qe.jsx(Vm,{className:"w-4 h-4 mr-2"}),"Xem"]})}),Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(AP,{className:"w-full bg-gradient-to-r from-primary to-purple-600 hover:opacity-90 shadow-lg hover:shadow-xl transition-all",onClick:()=>{return e=t,void px.success(` thm ${e.name} vo gi hng!`);var e},children:[Qe.jsx(cg,{className:"w-4 h-4 mr-2"}),"Mua ngay"]})})]})]})]})},t.id))})})]}),Qe.jsxs("section",{children:[Qe.jsxs(QT.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"mb-6",children:[Qe.jsxs("h2",{className:"text-2xl md:text-3xl font-bold flex items-center gap-3",children:[Qe.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center",children:Qe.jsx(Em,{className:"w-6 h-6 text-white"})}),"Flash Sale sp ti"]}),Qe.jsx("p",{className:"text-muted-foreground mt-2",children:"t nhc nh  khng b l!"})]}),Qe.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:c.map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},whileHover:{y:-8},children:Qe.jsxs(DP,{className:"overflow-hidden border-none shadow-xl hover:shadow-2xl transition-all cursor-pointer group",children:[Qe.jsx("div",{className:`h-2 bg-gradient-to-r ${e.color}`}),Qe.jsxs(UP,{className:"p-6 text-center space-y-4",children:[Qe.jsx(QT.div,{className:`w-16 h-16 mx-auto rounded-2xl bg-gradient-to-r ${e.color} flex items-center justify-center shadow-lg`,whileHover:{rotate:360},transition:{duration:.6},children:Qe.jsx(e.icon,{className:"w-8 h-8 text-white"})}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx("div",{className:`text-3xl font-black bg-gradient-to-r ${e.color} bg-clip-text text-transparent`,children:e.time}),Qe.jsx("h3",{className:"font-bold text-lg",children:e.title}),Qe.jsx(EP,{className:`bg-gradient-to-r ${e.color} text-white text-sm px-3 py-1`,children:e.discount}),Qe.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.items,"+ sn phm"]})]}),Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(AP,{variant:"outline",className:"w-full border-2 group-hover:border-primary",children:[Qe.jsx(rm,{className:"w-4 h-4 mr-2"}),"t nhc nh"]})})]})]})},e.time))})]}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:Qe.jsx(DP,{className:"border-none shadow-xl bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10 backdrop-blur-sm",children:Qe.jsx(UP,{className:"p-8",children:Qe.jsxs("div",{className:"flex items-start gap-6",children:[Qe.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center flex-shrink-0",children:Qe.jsx(pg,{className:"w-6 h-6 text-white"})}),Qe.jsxs("div",{className:"space-y-3",children:[Qe.jsx("h3",{className:"text-xl font-bold",children:" Mo sn Flash Sale thnh cng"}),Qe.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[Qe.jsxs("li",{className:"flex items-start gap-2",children:[Qe.jsx("span",{className:"text-primary mt-0.5",children:""}),Qe.jsx("span",{children:"ng nhp trc gi Flash Sale  thanh ton nhanh chng"})]}),Qe.jsxs("li",{className:"flex items-start gap-2",children:[Qe.jsx("span",{className:"text-primary mt-0.5",children:""}),Qe.jsx("span",{children:"Thm sn phm yu thch vo gi hng trc  khng b l"})]}),Qe.jsxs("li",{className:"flex items-start gap-2",children:[Qe.jsx("span",{className:"text-primary mt-0.5",children:""}),Qe.jsx("span",{children:"Bt thng bo  nhn tin v Flash Sale mi nht"})]}),Qe.jsxs("li",{className:"flex items-start gap-2",children:[Qe.jsx("span",{className:"text-primary mt-0.5",children:""}),Qe.jsx("span",{children:"Hy nhanh tay v s lng c hn!"})]})]})]})]})})})})]})})})},jae=()=>{const[e,t]=Ve.useState(new Set),[n,r]=Ve.useState("all"),i=[{name:"Tt c",count:714,color:"from-slate-500 to-slate-600",icon:gg,value:"all"},{name:"Thi trang",count:156,color:"from-blue-500 to-cyan-500",icon:lg,value:"fashion"},{name:"M phm",count:89,color:"from-pink-500 to-rose-500",icon:pg,value:"beauty"},{name:"m thc",count:234,color:"from-orange-500 to-red-500",icon:Rf,value:"food"},{name:"Th cng",count:67,color:"from-purple-500 to-indigo-500",icon:tm,value:"craft"},{name:"Cng ngh",count:45,color:"from-green-500 to-emerald-500",icon:Sg,value:"tech"},{name:"Nng sn",count:123,color:"from-yellow-500 to-orange-500",icon:ef,value:"agriculture"}],a=e=>{t(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},s=[{label:"Thng hiu",value:"500+",icon:gg,gradient:"from-blue-500 to-cyan-500"},{label:"Sn phm",value:"10K+",icon:Rf,gradient:"from-purple-500 to-pink-500"},{label:"Khch hng",value:"1M+",icon:Og,gradient:"from-green-500 to-emerald-500"},{label:"nh gi 5 sao",value:"98%",icon:fg,gradient:"from-yellow-500 to-orange-500"}];return Qe.jsx("div",{className:"min-h-screen bg-background",children:Qe.jsx("main",{className:"container mx-auto px-4 py-8",children:Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:[Qe.jsxs("div",{className:"relative",children:[Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center space-y-6",children:[Qe.jsxs("div",{className:"flex items-center justify-center gap-4",children:[Qe.jsx(QT.div,{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-primary via-purple-500 to-pink-500 flex items-center justify-center shadow-lg border border-border",animate:{rotate:[0,10,-10,0],scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,repeatDelay:1},children:Qe.jsx(tm,{className:"w-8 h-8 text-white"})}),Qe.jsx("h1",{className:"text-4xl md:text-6xl font-black bg-gradient-to-r from-primary via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Local Brand Vit Nam"}),Qe.jsx(QT.div,{animate:{rotate:[0,360]},transition:{duration:3,repeat:1/0,ease:"linear"},children:Qe.jsx(pg,{className:"w-8 h-8 text-primary"})})]}),Qe.jsx("p",{className:"text-lg md:text-xl text-muted-foreground max-w-2xl mx-auto",children:" T ho vi nhng thng hiu Vit cht lng cao, mang m bn sc dn tc"}),Qe.jsx(QT.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"max-w-2xl mx-auto",children:Qe.jsxs("div",{className:"relative",children:[Qe.jsx(eg,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),Qe.jsx(Vne,{placeholder:"Tm kim thng hiu, sn phm...",className:"pl-12 pr-12 h-14 rounded-2xl border-2 border-border focus:border-primary shadow-sm bg-card"}),Qe.jsx(AP,{size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2 rounded-xl bg-gradient-to-r from-primary to-purple-600 hover:opacity-90",children:Qe.jsx(Km,{className:"w-5 h-5"})})]})})]}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-8",children:s.map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.4+.1*t},whileHover:{y:-4},children:Qe.jsx(DP,{className:"border border-border shadow-sm hover:shadow-md transition-all duration-300 bg-card",children:Qe.jsxs(UP,{className:"p-6 text-center space-y-2",children:[Qe.jsx("div",{className:`w-12 h-12 mx-auto rounded-xl bg-gradient-to-r ${e.gradient} flex items-center justify-center shadow-sm`,children:Qe.jsx(e.icon,{className:"w-6 h-6 text-white"})}),Qe.jsx("div",{className:"text-3xl font-black bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:e.value}),Qe.jsx("div",{className:"text-sm text-muted-foreground font-medium",children:e.label})]})})},e.label))})]}),Qe.jsxs("section",{children:[Qe.jsx(QT.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"mb-6",children:Qe.jsxs("h2",{className:"text-2xl md:text-3xl font-bold flex items-center gap-3 text-foreground",children:[Qe.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-r from-primary to-purple-600 flex items-center justify-center",children:Qe.jsx(gg,{className:"w-6 h-6 text-white"})}),"Danh mc thng hiu"]})}),Qe.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:i.map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.05*t},whileHover:{y:-4},onClick:()=>r(e.value),children:Qe.jsx(DP,{className:`cursor-pointer border-2 transition-all duration-300 ${n===e.value?"border-primary shadow-lg bg-primary/5":"border-border hover:border-primary/50 hover:shadow-md"} bg-card`,children:Qe.jsxs(UP,{className:"p-6 text-center space-y-3",children:[Qe.jsx("div",{className:`w-14 h-14 mx-auto rounded-2xl bg-gradient-to-r ${e.color} flex items-center justify-center shadow-sm`,children:Qe.jsx(e.icon,{className:"w-7 h-7 text-white"})}),Qe.jsx("h3",{className:"font-bold text-base text-foreground",children:e.name}),Qe.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.count," thng hiu"]})]})})},e.value))})]}),Qe.jsxs("section",{children:[Qe.jsxs(QT.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center justify-between mb-6",children:[Qe.jsxs("h2",{className:"text-2xl md:text-3xl font-bold flex items-center gap-3 text-foreground",children:[Qe.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-r from-yellow-500 to-orange-500 flex items-center justify-center",children:Qe.jsx(fg,{className:"w-6 h-6 text-white"})}),"Thng hiu ni bt"]}),Qe.jsxs(AP,{variant:"outline",className:"hidden md:flex items-center gap-2 border-border",children:["Xem tt c",Qe.jsx(Qp,{className:"w-4 h-4"})]})]}),Qe.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:[{id:1,name:"Canifa",category:"Thi trang",description:"Thng hiu thi trang Vit Nam vi 20 nm kinh nghim, mang n nhng sn phm cht lng cao vi gi c phi chng.",image:"https://images.unsplash.com/photo-1512436991641-6745cdb1723f?w=600&h=400&fit=crop",logo:"https://images.unsplash.com/photo-1517841905240-472988babdf9?w=100&h=100&fit=crop",location:"H Ni",followers:125e3,products:1500,rating:4.8,established:"2001",verified:!0,gradient:"from-blue-500 to-cyan-500",phone:"1900 1234",email:"contact@canifa.vn",website:"canifa.vn"},{id:2,name:"Biti's",category:"Giy dp",description:"Thng hiu giy Vit Nam hng u, tin phong trong vic ng dng cng ngh vo sn xut giy th thao.",image:"https://laforce.vn/wp-content/uploads/2024/03/local-brand-giay-viet-nam.jpg",logo:"https://images.unsplash.com/photo-1465101046530-73398c7f28ca?w=100&h=100&fit=crop",location:"TP.HCM",followers:98e3,products:850,rating:4.7,established:"1982",verified:!0,gradient:"from-orange-500 to-red-500",phone:"1900 5678",email:"info@bitis.vn",website:"bitis.vn"},{id:3,name:"Saigon Skirt",category:"Thi trang n",description:"Thng hiu vy o n hin i, kt hp gia phong cch truyn thng v xu hng th gii.",image:"https://images.unsplash.com/photo-1512436991641-6745cdb1723f?w=600&h=400&fit=crop",logo:"https://images.unsplash.com/photo-1511367461989-f85a21fda167?w=100&h=100&fit=crop",location:"TP.HCM",followers:45e3,products:320,rating:4.9,established:"2015",verified:!0,gradient:"from-pink-500 to-rose-500",phone:"0909 123 456",email:"hello@saigonskit.vn",website:"saigonskit.vn"},{id:4,name:"Cu Tre Vit",category:"Th cng m ngh",description:"Chuyn sn xut cc sn phm th cng t tre na, thn thin vi mi trng v mang m bn sc Vit.",image:"https://images.unsplash.com/photo-1506744038136-46273834b3fb?w=600&h=400&fit=crop",logo:"https://images.unsplash.com/photo-1508214751196-bcfd4ca60f91?w=100&h=100&fit=crop",location:"Hng Yn",followers:23e3,products:180,rating:4.6,established:"2018",verified:!1,gradient:"from-green-500 to-emerald-500",phone:"0912 345 678",email:"contact@cautreviet.vn",website:"cautreviet.vn"}].map((t,n)=>Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*n},whileHover:{y:-8},className:"group",children:Qe.jsxs(DP,{className:"overflow-hidden border border-border shadow-sm hover:shadow-lg transition-all duration-300 bg-card",children:[Qe.jsxs("div",{className:"relative h-56 overflow-hidden bg-muted",children:[Qe.jsx(QT.img,{src:t.image,alt:t.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),Qe.jsx("div",{className:`absolute inset-0 bg-gradient-to-t ${t.gradient} opacity-20 group-hover:opacity-30 transition-opacity`}),Qe.jsx(QT.div,{className:"absolute bottom-4 left-4",whileHover:{scale:1.1},children:Qe.jsx("div",{className:"w-20 h-20 rounded-2xl bg-background border-4 border-background shadow-lg overflow-hidden",children:Qe.jsx("img",{src:t.logo,alt:`${t.name} logo`,className:"w-full h-full object-cover"})})}),t.verified&&Qe.jsx(QT.div,{initial:{scale:0},animate:{scale:1},className:"absolute top-4 right-4",children:Qe.jsxs(EP,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white gap-1.5 px-3 py-1.5 shadow-sm",children:[Qe.jsx(Nm,{className:"w-4 h-4"}),"Xc thc"]})}),Qe.jsxs("div",{className:"absolute bottom-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[Qe.jsx(QT.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"w-10 h-10 rounded-full bg-background/90 backdrop-blur-sm shadow-sm border border-border flex items-center justify-center",onClick:()=>a(t.id),children:Qe.jsx(sf,{className:"w-5 h-5 "+(e.has(t.id)?"fill-red-500 text-red-500":"text-muted-foreground")})}),Qe.jsx(QT.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"w-10 h-10 rounded-full bg-background/90 backdrop-blur-sm shadow-sm border border-border flex items-center justify-center",children:Qe.jsx(ig,{className:"w-5 h-5 text-muted-foreground"})})]})]}),Qe.jsxs(UP,{className:"p-6 space-y-4",children:[Qe.jsx("div",{className:"space-y-2",children:Qe.jsxs("div",{className:"flex items-start justify-between",children:[Qe.jsxs("div",{children:[Qe.jsx("h3",{className:"text-2xl font-bold mb-1 text-foreground",children:t.name}),Qe.jsx(EP,{variant:"secondary",className:"text-xs",children:t.category})]}),Qe.jsxs("div",{className:"flex items-center gap-1 bg-yellow-50 dark:bg-yellow-950/20 px-3 py-1.5 rounded-full border border-border",children:[Qe.jsx(fg,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),Qe.jsx("span",{className:"font-bold text-sm text-foreground",children:t.rating})]})]})}),Qe.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed line-clamp-2",children:t.description}),Qe.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{icon:jf,label:t.location},{icon:Og,label:`${(t.followers/1e3).toFixed(0)}K followers`},{icon:Rf,label:`${t.products} sn phm`},{icon:Em,label:`T ${t.established}`}].map((e,t)=>Qe.jsxs("div",{className:"flex items-center gap-2 text-sm p-2 rounded-lg bg-muted border border-border",children:[Qe.jsx(e.icon,{className:"w-4 h-4 text-muted-foreground flex-shrink-0"}),Qe.jsx("span",{className:"truncate text-foreground",children:e.label})]},t))}),Qe.jsxs("div",{className:"space-y-2 pt-2 border-t border-border",children:[Qe.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[Qe.jsx(ef,{className:"w-3.5 h-3.5"}),Qe.jsx("span",{children:t.website})]}),Qe.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[Qe.jsx(Vf,{className:"w-3.5 h-3.5"}),Qe.jsx("span",{children:t.phone})]})]}),Qe.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2",children:[Qe.jsx(QT.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:Qe.jsx(AP,{variant:"outline",className:"w-full border-border",asChild:!0,children:Qe.jsxs(AN,{to:`/brand/${t.id}`,children:[Qe.jsx(Vm,{className:"w-4 h-4 mr-2"}),"Xem shop"]})})}),Qe.jsx(QT.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:Qe.jsxs(AP,{className:"w-full bg-gradient-to-r from-primary to-purple-600 hover:opacity-90",children:[Qe.jsx(lg,{className:"w-4 h-4 mr-2"}),"Mua ngay"]})})]})]})]})},t.id))})]}),Qe.jsxs("section",{children:[Qe.jsxs(QT.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center justify-between mb-6",children:[Qe.jsxs("h2",{className:"text-2xl md:text-3xl font-bold flex items-center gap-3 text-foreground",children:[Qe.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 flex items-center justify-center",children:Qe.jsx(Sg,{className:"w-6 h-6 text-white"})}),"Sn phm ni bt t Local Brand"]}),Qe.jsxs(AP,{variant:"outline",className:"hidden md:flex items-center gap-2 border-border",children:["Xem tt c",Qe.jsx(Qp,{className:"w-4 h-4"})]})]}),Qe.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[{id:1,name:"o s mi Canifa Premium",brand:"Canifa",price:299e3,originalPrice:45e4,image:"https://2885371169.e.cdneverest.net/pub/media/Simiconnector/Somi_desk2x.webp",rating:4.8,sold:1250,discount:34,reviews:856},{id:2,name:"Giy th thao Biti's Hunter",brand:"Biti's",price:85e4,originalPrice:12e5,image:"https://file.hstatic.net/1000230642/collection/1920x750_bannerweb_hunter_effortless_ee530ac3a6c8448ba199233f03068946_master.png",rating:4.9,sold:890,discount:29,reviews:1234},{id:3,name:"Vy midi Saigon Skirt",brand:"Saigon Skirt",price:45e4,originalPrice:65e4,image:"https://dallavn.com/cdn/shop/files/SHIRTS_4.png?v=1747989902&width=713",rating:4.7,sold:567,discount:31,reviews:432}].map((t,n)=>Qe.jsx(QT.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1*n},whileHover:{y:-8},className:"group",children:Qe.jsxs(DP,{className:"overflow-hidden border border-border shadow-sm hover:shadow-lg transition-all duration-300 bg-card relative",children:[Qe.jsx("div",{className:"absolute top-3 right-3 z-10",children:Qe.jsxs(EP,{className:"bg-gradient-to-r from-red-500 to-pink-500 text-white text-base px-3 py-1.5 shadow-sm",children:["-",t.discount,"%"]})}),Qe.jsx(QT.button,{className:"absolute top-3 left-3 z-10 w-10 h-10 rounded-full bg-background/90 backdrop-blur-sm shadow-sm border border-border flex items-center justify-center",whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>a(t.id),children:Qe.jsx(sf,{className:"w-5 h-5 "+(e.has(t.id)?"fill-red-500 text-red-500":"text-muted-foreground")})}),Qe.jsx("div",{className:"relative h-64 bg-muted overflow-hidden",children:Qe.jsx(QT.img,{src:t.image,alt:t.name,className:"w-full h-full object-contain p-4 group-hover:scale-110 transition-transform duration-500"})}),Qe.jsxs(UP,{className:"p-5 space-y-3",children:[Qe.jsx(EP,{variant:"secondary",className:"text-xs",children:t.brand}),Qe.jsx("h3",{className:"font-semibold text-base line-clamp-2 min-h-[3rem] group-hover:text-primary transition-colors text-foreground",children:t.name}),Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((e,n)=>Qe.jsx(fg,{className:"w-4 h-4 "+(n<Math.floor(t.rating)?"fill-yellow-400 text-yellow-400":"fill-muted text-muted")},n))}),Qe.jsx("span",{className:"text-sm font-semibold text-foreground",children:t.rating}),Qe.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",t.reviews,")"]})]}),Qe.jsxs("div",{className:"space-y-1",children:[Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsxs("span",{className:"text-2xl font-black bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:[t.price.toLocaleString(),""]}),Qe.jsxs("span",{className:"text-sm text-muted-foreground line-through",children:[t.originalPrice.toLocaleString(),""]})]}),Qe.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[Qe.jsx(Sg,{className:"w-3.5 h-3.5 text-green-600"}),Qe.jsxs("span",{className:"text-muted-foreground",children:[" bn ",t.sold]})]})]}),Qe.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2",children:[Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsx(AP,{variant:"outline",className:"w-full border-border",asChild:!0,children:Qe.jsxs(AN,{to:`/product/${t.id}`,children:[Qe.jsx(Vm,{className:"w-4 h-4 mr-2"}),"Xem"]})})}),Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(AP,{className:"w-full bg-gradient-to-r from-primary to-purple-600 hover:opacity-90",children:[Qe.jsx(lg,{className:"w-4 h-4 mr-2"}),"Mua"]})})]})]})]})},t.id))})]}),Qe.jsx(QT.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:Qe.jsx(DP,{className:"border border-border shadow-sm bg-gradient-to-r from-primary/5 via-purple-500/5 to-pink-500/5 overflow-hidden",children:Qe.jsx(UP,{className:"p-8",children:Qe.jsxs("div",{className:"flex items-start gap-6",children:[Qe.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r from-primary to-purple-600 flex items-center justify-center flex-shrink-0",children:Qe.jsx(tm,{className:"w-6 h-6 text-white"})}),Qe.jsxs("div",{className:"space-y-3",children:[Qe.jsx("h3",{className:"text-2xl font-bold text-foreground",children:"Ti sao chn Local Brand Vit Nam?"}),Qe.jsx("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-muted-foreground",children:[" Sn phm cht lng cao, gi c hp l"," H tr pht trin kinh t trong nc"," Mang m bn sc vn ha Vit Nam"," Cam kt cht lng v bo hnh tt"," a dng mu m, lin tc cp nht"," Dch v chm sc khch hng tn tm"].map((e,t)=>Qe.jsxs(QT.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.6+.1*t},className:"flex items-center gap-2",children:[Qe.jsx(Nm,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),Qe.jsx("span",{children:e})]},t))})]})]})})})})]})})})},Nae=()=>{const e=Yj(),[t,n]=Ve.useState({x:0,y:0}),r=Ve.useRef(null);Ve.useEffect(()=>{},[e.pathname]),Ve.useEffect(()=>{const e=e=>{if(r.current){const t=r.current.getBoundingClientRect(),i=t.left+t.width/2,a=t.top+t.height/2;n({x:e.clientX-i,y:e.clientY-a})}};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)},[]);const i=((e=8)=>{const n=Math.sqrt(t.x**2+t.y**2),r=Math.min(n/500,1),i=Math.atan2(t.y,t.x);return{x:Math.cos(i)*e*r,y:Math.sin(i)*e*r}})();return Qe.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-background via-card/80 to-accent/10",children:Qe.jsxs(QT.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"text-center bg-card/80 border border-border rounded-2xl shadow-2xl px-10 py-14 max-w-lg mx-auto backdrop-blur-md",children:[Qe.jsx(QT.div,{ref:r,initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:15},className:"flex justify-center mb-8 relative",children:Qe.jsxs("div",{className:"relative w-40 h-40",children:[Qe.jsx(QT.div,{animate:{rotate:[0,-10,0]},transition:{duration:2,repeat:1/0},className:"absolute -top-4 left-6 w-16 h-16 bg-gradient-to-br from-amber-700 to-amber-800 rounded-full shadow-lg"}),Qe.jsx(QT.div,{animate:{rotate:[0,10,0]},transition:{duration:2,repeat:1/0,delay:.2},className:"absolute -top-4 right-6 w-16 h-16 bg-gradient-to-br from-amber-700 to-amber-800 rounded-full shadow-lg"}),Qe.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-600 to-amber-700 rounded-full shadow-2xl border-4 border-amber-800/30",children:[Qe.jsx("div",{className:"absolute top-12 left-8 w-10 h-12 bg-white rounded-full shadow-inner",children:Qe.jsx(QT.div,{animate:{x:i.x,y:i.y},transition:{type:"spring",stiffness:500,damping:30},className:"absolute top-2 left-2 w-5 h-5 bg-gradient-to-br from-gray-900 to-black rounded-full",children:Qe.jsx("div",{className:"absolute top-1 left-1 w-2 h-2 bg-white rounded-full opacity-80"})})}),Qe.jsx("div",{className:"absolute top-12 right-8 w-10 h-12 bg-white rounded-full shadow-inner",children:Qe.jsx(QT.div,{animate:{x:i.x,y:i.y},transition:{type:"spring",stiffness:500,damping:30},className:"absolute top-2 left-2 w-5 h-5 bg-gradient-to-br from-gray-900 to-black rounded-full",children:Qe.jsx("div",{className:"absolute top-1 left-1 w-2 h-2 bg-white rounded-full opacity-80"})})}),Qe.jsx(QT.div,{animate:{scale:[1,1.1,1]},transition:{duration:1.5,repeat:1/0},className:"absolute bottom-12 left-1/2 -translate-x-1/2 w-8 h-6 bg-gradient-to-br from-gray-900 to-black rounded-full"}),Qe.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 w-16 h-8",children:Qe.jsx(QT.svg,{animate:{d:["M 0 0 Q 8 8 16 0","M 0 0 Q 8 4 16 0","M 0 0 Q 8 8 16 0"]},transition:{duration:2,repeat:1/0},width:"64",height:"32",viewBox:"0 0 16 8",className:"fill-none stroke-gray-900 stroke-2",children:Qe.jsx("path",{d:"M 0 0 Q 8 8 16 0"})})})]})]})}),Qe.jsx(QT.div,{animate:{scale:[1,1.05,1]},transition:{repeat:1/0,duration:2},className:"text-6xl font-extrabold bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent mb-4",children:"404"}),Qe.jsx("h1",{className:"mb-2 text-3xl font-bold text-foreground",children:"Khng tm thy trang"}),Qe.jsx("p",{className:"mb-8 text-lg text-muted-foreground",children:"Oops! ng dn bn truy cp khng tn ti hoc  b thay i."}),Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(AN,{to:"/",className:"inline-flex items-center gap-2 px-7 py-3 bg-gradient-to-r from-primary to-purple-600 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300",children:[Qe.jsx(lf,{className:"w-5 h-5"}),"Quay v trang ch"]})})]})})},_ae=TR,Sae=PR,Cae=OR,Aae=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(RR,{className:Rv("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));Aae.displayName=RR.displayName;const Mae=Vp("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Eae=Ve.forwardRef(({side:e="right",className:t,children:n,...r},i)=>Qe.jsxs(Cae,{children:[Qe.jsx(Aae,{}),Qe.jsxs(IR,{ref:i,className:Rv(Mae({side:e}),t),...r,children:[n,Qe.jsxs(BR,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[Qe.jsx(Fg,{className:"h-4 w-4"}),Qe.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Eae.displayName=IR.displayName;const kae=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(DR,{ref:n,className:Rv("text-lg font-semibold text-foreground",e),...t}));kae.displayName=DR.displayName;Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(LR,{ref:n,className:Rv("text-sm text-muted-foreground",e),...t})).displayName=LR.displayName;const Tae=Ve.createContext(void 0),Pae=()=>{const e=Ve.useContext(Tae);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},Oae="http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE",Rae=({children:e})=>{const[t,n]=Ve.useState(null),[r,i]=Ve.useState(!1);Ve.useEffect(()=>{const e=localStorage.getItem("vibeventure_user"),t=localStorage.getItem("vibeventure_token");if(e&&t)try{n(JSON.parse(e))}catch(r){localStorage.removeItem("vibeventure_user"),localStorage.removeItem("vibeventure_token")}},[]);const a={user:t,login:async(e,t,r=!1)=>{i(!0);try{const r=await fetch(`${Oae}/api/auth/login.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),a=await r.json();return a.success?(n(a.user),localStorage.setItem("vibeventure_user",JSON.stringify(a.user)),localStorage.setItem("vibeventure_token",a.token),gh({title:"ng nhp thnh cng!",description:`Cho mng ${a.user.name}`}),i(!1),!0):(gh({title:"ng nhp tht bi",description:a.error||"Email hoc mt khu khng ng",variant:"destructive"}),i(!1),!1)}catch(c$e){return gh({title:"Li h thng",description:"Khng th kt ni my ch",variant:"destructive"}),i(!1),!1}},register:async(e,t,r)=>{i(!0);try{const a=await fetch(`${Oae}/api/auth/register.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:r})}),s=await a.json();return s.success?(n(s.user),localStorage.setItem("vibeventure_user",JSON.stringify(s.user)),localStorage.setItem("vibeventure_token",s.token),gh({title:"ng k thnh cng!",description:`Cho mng ${s.user.name}`}),i(!1),!0):(gh({title:"ng k tht bi",description:s.error||" c li xy ra",variant:"destructive"}),i(!1),!1)}catch(c$e){return gh({title:"Li h thng",description:"Khng th kt ni my ch",variant:"destructive"}),i(!1),!1}},googleLogin:async(e,t="id_token")=>{i(!0);try{const r=await fetch(`${Oae}/api/auth/google.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify("id_token"===t?{googleToken:e}:{code:e})}),a=await r.json();return a.success?(n(a.user),localStorage.setItem("vibeventure_user",JSON.stringify(a.user)),localStorage.setItem("vibeventure_token",a.token),gh({title:"ng nhp Google thnh cng!",description:`Cho mng ${a.user.name}`}),i(!1),!0):(gh({title:"ng nhp Google tht bi",description:a.message||"C li xy ra",variant:"destructive"}),i(!1),!1)}catch(c$e){return gh({title:"Li h thng",description:"Khng th kt ni my ch",variant:"destructive"}),i(!1),!1}},facebookLogin:async e=>{var t;i(!0);try{const r="1128491382189315",a="4b8ee3da28c003a0ce6b6043afd26943",s=`${window.location.origin}/callback/facebook`,o=await fetch(`https://graph.facebook.com/v19.0/oauth/access_token?client_id=${r}&redirect_uri=${encodeURIComponent(s)}&client_secret=${a}&code=${e}`),l=await o.json();if(!l.access_token)return gh({title:"ng nhp Facebook tht bi",description:(null==(t=l.error)?void 0:t.message)||"Khng ly c access token",variant:"destructive"}),i(!1),!1;const c=await fetch(`${Oae}/api/auth/facebook.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accessToken:l.access_token})}),d=await c.json();return d.success?(n(d.user),localStorage.setItem("vibeventure_user",JSON.stringify(d.user)),localStorage.setItem("vibeventure_token",d.token),gh({title:"ng nhp Facebook thnh cng!",description:`Cho mng ${d.user.name}`}),i(!1),!0):(gh({title:"ng nhp Facebook tht bi",description:d.message||"C li xy ra",variant:"destructive"}),i(!1),!1)}catch(c$e){return gh({title:"Li h thng",description:"Khng th kt ni my ch",variant:"destructive"}),i(!1),!1}},zaloLogin:async e=>{i(!0);try{const t=await fetch(`${Oae}/api/auth/zalo.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({zaloToken:e})}),r=await t.json();return r.success?(n(r.user),localStorage.setItem("vibeventure_user",JSON.stringify(r.user)),localStorage.setItem("vibeventure_token",r.token),gh({title:"ng nhp Zalo thnh cng!",description:`Cho mng ${r.user.name}`}),i(!1),!0):(gh({title:"ng nhp Zalo tht bi",description:r.message||"C li xy ra",variant:"destructive"}),i(!1),!1)}catch(c$e){return gh({title:"Li h thng",description:"Khng th kt ni my ch",variant:"destructive"}),i(!1),!1}},logout:()=>{n(null),localStorage.removeItem("vibeventure_user"),localStorage.removeItem("vibeventure_token"),gh({title:" ng xut",description:"Hn gp li bn!"})},isLoading:r};return Qe.jsx(Tae.Provider,{value:a,children:e})};function Iae(){const{theme:e,setTheme:t}=Xv(),[n,r]=Ve.useState(!1);return Ve.useEffect(()=>{r(!0)},[]),n?Qe.jsx(AP,{variant:"ghost",size:"icon",onClick:()=>t("dark"===e?"light":"dark"),className:"relative w-9 h-9","aria-label":"Chuyn i giao din",children:Qe.jsx(eM,{mode:"wait",initial:!1,children:"dark"===e?Qe.jsx(QT.div,{initial:{y:-20,opacity:0,rotate:-90},animate:{y:0,opacity:1,rotate:0},exit:{y:20,opacity:0,rotate:90},transition:{duration:.2},children:Qe.jsx(Of,{className:"h-5 w-5"})},"moon"):Qe.jsx(QT.div,{initial:{y:-20,opacity:0,rotate:90},animate:{y:0,opacity:1,rotate:0},exit:{y:20,opacity:0,rotate:-90},transition:{duration:.2},children:Qe.jsx(vg,{className:"h-5 w-5"})},"sun")})}):Qe.jsx(AP,{variant:"ghost",size:"icon",className:"w-9 h-9",disabled:!0})}var Dae="ScrollArea",[Lae]=jh(Dae),[Bae,Fae]=Lae(Dae),Uae=Ve.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:a=600,...s}=e,[o,l]=Ve.useState(null),[c,d]=Ve.useState(null),[u,h]=Ve.useState(null),[p,m]=Ve.useState(null),[f,g]=Ve.useState(null),[v,x]=Ve.useState(0),[y,b]=Ve.useState(0),[w,j]=Ve.useState(!1),[N,_]=Ve.useState(!1),S=wh(t,e=>l(e)),C=$ne(i);return Qe.jsx(Bae,{scope:n,type:r,dir:C,scrollHideDelay:a,scrollArea:o,viewport:c,onViewportChange:d,content:u,onContentChange:h,scrollbarX:p,onScrollbarXChange:m,scrollbarXEnabled:w,onScrollbarXEnabledChange:j,scrollbarY:f,onScrollbarYChange:g,scrollbarYEnabled:N,onScrollbarYEnabledChange:_,onCornerWidthChange:x,onCornerHeightChange:b,children:Qe.jsx(Th.div,{dir:C,...s,ref:S,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":y+"px",...e.style}})})});Uae.displayName=Dae;var zae="ScrollAreaViewport",Hae=Ve.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:i,...a}=e,s=Fae(zae,n),o=wh(t,Ve.useRef(null),s.onViewportChange);return Qe.jsxs(Qe.Fragment,{children:[Qe.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),Qe.jsx(Th.div,{"data-radix-scroll-area-viewport":"",...a,ref:o,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e.style},children:Qe.jsx("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Hae.displayName=zae;var Vae="ScrollAreaScrollbar",Gae=Ve.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Fae(Vae,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:s}=i,o="horizontal"===e.orientation;return Ve.useEffect(()=>(o?a(!0):s(!0),()=>{o?a(!1):s(!1)}),[o,a,s]),"hover"===i.type?Qe.jsx(Wae,{...r,ref:t,forceMount:n}):"scroll"===i.type?Qe.jsx(Kae,{...r,ref:t,forceMount:n}):"auto"===i.type?Qe.jsx(qae,{...r,ref:t,forceMount:n}):"always"===i.type?Qe.jsx(Xae,{...r,ref:t}):null});Gae.displayName=Vae;var Wae=Ve.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Fae(Vae,e.__scopeScrollArea),[a,s]=Ve.useState(!1);return Ve.useEffect(()=>{const e=i.scrollArea;let t=0;if(e){const n=()=>{window.clearTimeout(t),s(!0)},r=()=>{t=window.setTimeout(()=>s(!1),i.scrollHideDelay)};return e.addEventListener("pointerenter",n),e.addEventListener("pointerleave",r),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",n),e.removeEventListener("pointerleave",r)}}},[i.scrollArea,i.scrollHideDelay]),Qe.jsx(qh,{present:n||a,children:Qe.jsx(qae,{"data-state":a?"visible":"hidden",...r,ref:t})})}),Kae=Ve.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Fae(Vae,e.__scopeScrollArea),a="horizontal"===e.orientation,s=pse(()=>l("SCROLL_END"),100),[o,l]=(c="hidden",d={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},Ve.useReducer((e,t)=>d[e][t]??e,c));var c,d;return Ve.useEffect(()=>{if("idle"===o){const e=window.setTimeout(()=>l("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(e)}},[o,i.scrollHideDelay,l]),Ve.useEffect(()=>{const e=i.viewport,t=a?"scrollLeft":"scrollTop";if(e){let n=e[t];const r=()=>{const r=e[t];n!==r&&(l("SCROLL"),s()),n=r};return e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)}},[i.viewport,a,l,s]),Qe.jsx(qh,{present:n||"hidden"!==o,children:Qe.jsx(Xae,{"data-state":"hidden"===o?"hidden":"visible",...r,ref:t,onPointerEnter:xh(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:xh(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),qae=Ve.forwardRef((e,t)=>{const n=Fae(Vae,e.__scopeScrollArea),{forceMount:r,...i}=e,[a,s]=Ve.useState(!1),o="horizontal"===e.orientation,l=pse(()=>{if(n.viewport){const e=n.viewport.offsetWidth<n.viewport.scrollWidth,t=n.viewport.offsetHeight<n.viewport.scrollHeight;s(o?e:t)}},10);return mse(n.viewport,l),mse(n.content,l),Qe.jsx(qh,{present:r||a,children:Qe.jsx(Xae,{"data-state":a?"visible":"hidden",...i,ref:t})})}),Xae=Ve.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,i=Fae(Vae,e.__scopeScrollArea),a=Ve.useRef(null),s=Ve.useRef(0),[o,l]=Ve.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=ose(o.viewport,o.content),d={...r,sizes:o,onSizesChange:l,hasThumb:Boolean(c>0&&c<1),onThumbChange:e=>a.current=e,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:e=>s.current=e};function u(e,t){return function(e,t,n,r="ltr"){const i=lse(n),a=i/2,s=t||a,o=i-s,l=n.scrollbar.paddingStart+s,c=n.scrollbar.size-n.scrollbar.paddingEnd-o,d=n.content-n.viewport,u="ltr"===r?[0,d]:[-1*d,0];return dse([l,c],u)(e)}(e,s.current,o,t)}return"horizontal"===n?Qe.jsx($ae,{...d,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const e=cse(i.viewport.scrollLeft,o,i.dir);a.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{i.viewport&&(i.viewport.scrollLeft=e)},onDragScroll:e=>{i.viewport&&(i.viewport.scrollLeft=u(e,i.dir))}}):"vertical"===n?Qe.jsx(Yae,{...d,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const e=cse(i.viewport.scrollTop,o);a.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{i.viewport&&(i.viewport.scrollTop=e)},onDragScroll:e=>{i.viewport&&(i.viewport.scrollTop=u(e))}}):null}),$ae=Ve.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,a=Fae(Vae,e.__scopeScrollArea),[s,o]=Ve.useState(),l=Ve.useRef(null),c=wh(t,l,a.onScrollbarXChange);return Ve.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),Qe.jsx(Qae,{"data-orientation":"horizontal",...i,ref:c,sizes:n,style:{bottom:0,left:"rtl"===a.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===a.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":lse(n)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,n)=>{if(a.viewport){const r=a.viewport.scrollLeft+t.deltaX;e.onWheelScroll(r),use(r,n)&&t.preventDefault()}},onResize:()=>{l.current&&a.viewport&&s&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:sse(s.paddingLeft),paddingEnd:sse(s.paddingRight)}})}})}),Yae=Ve.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,a=Fae(Vae,e.__scopeScrollArea),[s,o]=Ve.useState(),l=Ve.useRef(null),c=wh(t,l,a.onScrollbarYChange);return Ve.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),Qe.jsx(Qae,{"data-orientation":"vertical",...i,ref:c,sizes:n,style:{top:0,right:"ltr"===a.dir?0:void 0,left:"rtl"===a.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":lse(n)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,n)=>{if(a.viewport){const r=a.viewport.scrollTop+t.deltaY;e.onWheelScroll(r),use(r,n)&&t.preventDefault()}},onResize:()=>{l.current&&a.viewport&&s&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:sse(s.paddingTop),paddingEnd:sse(s.paddingBottom)}})}})}),[Jae,Zae]=Lae(Vae),Qae=Ve.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:a,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:d,onResize:u,...h}=e,p=Fae(Vae,n),[m,f]=Ve.useState(null),g=wh(t,e=>f(e)),v=Ve.useRef(null),x=Ve.useRef(""),y=p.viewport,b=r.content-r.viewport,w=Oh(d),j=Oh(l),N=pse(u,10);function _(e){if(v.current){const t=e.clientX-v.current.left,n=e.clientY-v.current.top;c({x:t,y:n})}}return Ve.useEffect(()=>{const e=e=>{const t=e.target;(null==m?void 0:m.contains(t))&&w(e,b)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[y,m,b,w]),Ve.useEffect(j,[r,j]),mse(m,N),mse(p.content,N),Qe.jsx(Jae,{scope:n,scrollbar:m,hasThumb:i,onThumbChange:Oh(a),onThumbPointerUp:Oh(s),onThumbPositionChange:j,onThumbPointerDown:Oh(o),children:Qe.jsx(Th.div,{...h,ref:g,style:{position:"absolute",...h.style},onPointerDown:xh(e.onPointerDown,e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),v.current=m.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),_(e)}}),onPointerMove:xh(e.onPointerMove,_),onPointerUp:xh(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=x.current,p.viewport&&(p.viewport.style.scrollBehavior=""),v.current=null})})})}),ese="ScrollAreaThumb",tse=Ve.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Zae(ese,e.__scopeScrollArea);return Qe.jsx(qh,{present:n||i.hasThumb,children:Qe.jsx(nse,{ref:t,...r})})}),nse=Ve.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...i}=e,a=Fae(ese,n),s=Zae(ese,n),{onThumbPositionChange:o}=s,l=wh(t,e=>s.onThumbChange(e)),c=Ve.useRef(void 0),d=pse(()=>{c.current&&(c.current(),c.current=void 0)},100);return Ve.useEffect(()=>{const e=a.viewport;if(e){const t=()=>{if(d(),!c.current){const t=hse(e,o);c.current=t,o()}};return o(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[a.viewport,d,o]),Qe.jsx(Th.div,{"data-state":s.hasThumb?"visible":"hidden",...i,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:xh(e.onPointerDownCapture,e=>{const t=e.target.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top;s.onThumbPointerDown({x:n,y:r})}),onPointerUp:xh(e.onPointerUp,s.onThumbPointerUp)})});tse.displayName=ese;var rse="ScrollAreaCorner",ise=Ve.forwardRef((e,t)=>{const n=Fae(rse,e.__scopeScrollArea),r=Boolean(n.scrollbarX&&n.scrollbarY);return"scroll"!==n.type&&r?Qe.jsx(ase,{...e,ref:t}):null});ise.displayName=rse;var ase=Ve.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,i=Fae(rse,n),[a,s]=Ve.useState(0),[o,l]=Ve.useState(0),c=Boolean(a&&o);return mse(i.scrollbarX,()=>{var e;const t=(null==(e=i.scrollbarX)?void 0:e.offsetHeight)||0;i.onCornerHeightChange(t),l(t)}),mse(i.scrollbarY,()=>{var e;const t=(null==(e=i.scrollbarY)?void 0:e.offsetWidth)||0;i.onCornerWidthChange(t),s(t)}),c?Qe.jsx(Th.div,{...r,ref:t,style:{width:a,height:o,position:"absolute",right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:0,...e.style}}):null});function sse(e){return e?parseInt(e,10):0}function ose(e,t){const n=e/t;return isNaN(n)?0:n}function lse(e){const t=ose(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function cse(e,t,n="ltr"){const r=lse(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-i,s=t.content-t.viewport,o=a-r,l=qne(e,"ltr"===n?[0,s]:[-1*s,0]);return dse([0,s],[0,o])(l)}function dse(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function use(e,t){return e>0&&e<t}var hse=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const a={left:e.scrollLeft,top:e.scrollTop},s=n.left!==a.left,o=n.top!==a.top;(s||o)&&t(),n=a,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function pse(e,t){const n=Oh(e),r=Ve.useRef(0);return Ve.useEffect(()=>()=>window.clearTimeout(r.current),[]),Ve.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function mse(e,t){const n=Oh(t);Wh(()=>{let t=0;if(e){const r=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(n)});return r.observe(e),()=>{window.cancelAnimationFrame(t),r.unobserve(e)}}},[e,n])}var fse=Uae,gse=Hae,vse=ise;const xse=Ve.forwardRef(({className:e,children:t,...n},r)=>Qe.jsxs(fse,{ref:r,className:Rv("relative overflow-hidden",e),...n,children:[Qe.jsx(gse,{className:"h-full w-full rounded-[inherit]",children:t}),Qe.jsx(yse,{}),Qe.jsx(vse,{})]}));xse.displayName=fse.displayName;const yse=Ve.forwardRef(({className:e,orientation:t="vertical",...n},r)=>Qe.jsx(Gae,{ref:r,orientation:t,className:Rv("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:Qe.jsx(tse,{className:"relative flex-1 rounded-full bg-border"})}));yse.displayName=Gae.displayName;var bse=["Enter"," "],wse=["ArrowUp","PageDown","End"],jse=["ArrowDown","PageUp","Home",...wse],Nse={ltr:[...bse,"ArrowRight"],rtl:[...bse,"ArrowLeft"]},_se={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Sse="Menu",[Cse,Ase,Mse]=kh(Sse),[Ese,kse]=jh(Sse,[Mse,bb,Aie]),Tse=bb(),Pse=Aie(),[Ose,Rse]=Ese(Sse),[Ise,Dse]=Ese(Sse),Lse=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:i,onOpenChange:a,modal:s=!0}=e,o=Tse(t),[l,c]=Ve.useState(null),d=Ve.useRef(!1),u=Oh(a),h=$ne(i);return Ve.useEffect(()=>{const e=()=>{d.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>d.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),Qe.jsx(Db,{...o,children:Qe.jsx(Ose,{scope:t,open:n,onOpenChange:u,content:l,onContentChange:c,children:Qe.jsx(Ise,{scope:t,onClose:Ve.useCallback(()=>u(!1),[u]),isUsingKeyboardRef:d,dir:h,modal:s,children:r})})})};Lse.displayName=Sse;var Bse=Ve.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,i=Tse(n);return Qe.jsx(Lb,{...i,...r,ref:t})});Bse.displayName="MenuAnchor";var Fse="MenuPortal",[Use,zse]=Ese(Fse,{forceMount:void 0}),Hse=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:i}=e,a=Rse(Fse,t);return Qe.jsx(Use,{scope:t,forceMount:n,children:Qe.jsx(qh,{present:n||a.open,children:Qe.jsx(Kh,{asChild:!0,container:i,children:r})})})};Hse.displayName=Fse;var Vse="MenuContent",[Gse,Wse]=Ese(Vse),Kse=Ve.forwardRef((e,t)=>{const n=zse(Vse,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,a=Rse(Vse,e.__scopeMenu),s=Dse(Vse,e.__scopeMenu);return Qe.jsx(Cse.Provider,{scope:e.__scopeMenu,children:Qe.jsx(qh,{present:r||a.open,children:Qe.jsx(Cse.Slot,{scope:e.__scopeMenu,children:s.modal?Qe.jsx(qse,{...i,ref:t}):Qe.jsx(Xse,{...i,ref:t})})})})}),qse=Ve.forwardRef((e,t)=>{const n=Rse(Vse,e.__scopeMenu),r=Ve.useRef(null),i=wh(t,r);return Ve.useEffect(()=>{const e=r.current;if(e)return JO(e)},[]),Qe.jsx(Yse,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:xh(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Xse=Ve.forwardRef((e,t)=>{const n=Rse(Vse,e.__scopeMenu);return Qe.jsx(Yse,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),$se=_h("MenuContent.ScrollLock"),Yse=Ve.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:h,onDismiss:p,disableOutsideScroll:m,...f}=e,g=Rse(Vse,n),v=Dse(Vse,n),x=Tse(n),y=Pse(n),b=Ase(n),[w,j]=Ve.useState(null),N=Ve.useRef(null),_=wh(t,N,g.onContentChange),S=Ve.useRef(0),C=Ve.useRef(""),A=Ve.useRef(0),M=Ve.useRef(null),E=Ve.useRef("right"),k=Ve.useRef(0),T=m?GO:Ve.Fragment,P=m?{as:$se,allowPinchZoom:!0}:void 0,O=e=>{var t,n;const r=C.current+e,i=b().filter(e=>!e.disabled),a=document.activeElement,s=null==(t=i.find(e=>e.ref.current===a))?void 0:t.textValue,o=function(e,t,n){const r=t.length>1&&Array.from(t).every(e=>e===t[0]),i=r?t[0]:t,a=n?e.indexOf(n):-1;let s=(o=e,l=Math.max(a,0),o.map((e,t)=>o[(l+t)%o.length]));var o,l;1===i.length&&(s=s.filter(e=>e!==n));const c=s.find(e=>e.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}(i.map(e=>e.textValue),r,s),l=null==(n=i.find(e=>e.textValue===o))?void 0:n.ref.current;!function e(t){C.current=t,window.clearTimeout(S.current),""!==t&&(S.current=window.setTimeout(()=>e(""),1e3))}(r),l&&setTimeout(()=>l.focus())};Ve.useEffect(()=>()=>window.clearTimeout(S.current),[]),nO();const R=Ve.useCallback(e=>{var t,n;return E.current===(null==(t=M.current)?void 0:t.side)&&function(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return function(e,t){const{x:n,y:r}=e;let i=!1;for(let a=0,s=t.length-1;a<t.length;s=a++){const e=t[a],o=t[s],l=e.x,c=e.y,d=o.x,u=o.y;c>r!=u>r&&n<(d-l)*(r-c)/(u-c)+l&&(i=!i)}return i}(n,t)}(e,null==(n=M.current)?void 0:n.area)},[]);return Qe.jsx(Gse,{scope:n,searchRef:C,onItemEnter:Ve.useCallback(e=>{R(e)&&e.preventDefault()},[R]),onItemLeave:Ve.useCallback(e=>{var t;R(e)||(null==(t=N.current)||t.focus(),j(null))},[R]),onTriggerLeave:Ve.useCallback(e=>{R(e)&&e.preventDefault()},[R]),pointerGraceTimerRef:A,onPointerGraceIntentChange:Ve.useCallback(e=>{M.current=e},[]),children:Qe.jsx(T,{...P,children:Qe.jsx(XP,{asChild:!0,trapped:i,onMountAutoFocus:xh(a,e=>{var t;e.preventDefault(),null==(t=N.current)||t.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:Qe.jsx(Fh,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:h,onDismiss:p,children:Qe.jsx(Die,{asChild:!0,...y,dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:w,onCurrentTabStopIdChange:j,onEntryFocus:xh(l,e=>{v.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:Qe.jsx(Bb,{role:"menu","aria-orientation":"vertical","data-state":joe(g.open),"data-radix-menu-content":"",dir:v.dir,...x,...f,ref:_,style:{outline:"none",...f.style},onKeyDown:xh(f.onKeyDown,e=>{const t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,n=e.ctrlKey||e.altKey||e.metaKey,r=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!n&&r&&O(e.key));const i=N.current;if(e.target!==i)return;if(!jse.includes(e.key))return;e.preventDefault();const a=b().filter(e=>!e.disabled).map(e=>e.ref.current);wse.includes(e.key)&&a.reverse(),function(e){const t=document.activeElement;for(const n of e){if(n===t)return;if(n.focus(),document.activeElement!==t)return}}(a)}),onBlur:xh(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(S.current),C.current="")}),onPointerMove:xh(e.onPointerMove,Soe(e=>{const t=e.target,n=k.current!==e.clientX;if(e.currentTarget.contains(t)&&n){const t=e.clientX>k.current?"right":"left";E.current=t,k.current=e.clientX}}))})})})})})})});Kse.displayName=Vse;var Jse=Ve.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return Qe.jsx(Th.div,{role:"group",...r,ref:t})});Jse.displayName="MenuGroup";var Zse=Ve.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return Qe.jsx(Th.div,{...r,ref:t})});Zse.displayName="MenuLabel";var Qse="MenuItem",eoe="menu.itemSelect",toe=Ve.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...i}=e,a=Ve.useRef(null),s=Dse(Qse,e.__scopeMenu),o=Wse(Qse,e.__scopeMenu),l=wh(t,a),c=Ve.useRef(!1);return Qe.jsx(noe,{...i,ref:l,disabled:n,onClick:xh(e.onClick,()=>{const e=a.current;if(!n&&e){const t=new CustomEvent(eoe,{bubbles:!0,cancelable:!0});e.addEventListener(eoe,e=>null==r?void 0:r(e),{once:!0}),Ph(e,t),t.defaultPrevented?c.current=!1:s.onClose()}}),onPointerDown:t=>{var n;null==(n=e.onPointerDown)||n.call(e,t),c.current=!0},onPointerUp:xh(e.onPointerUp,e=>{var t;c.current||null==(t=e.currentTarget)||t.click()}),onKeyDown:xh(e.onKeyDown,e=>{const t=""!==o.searchRef.current;n||t&&" "===e.key||bse.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});toe.displayName=Qse;var noe=Ve.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...a}=e,s=Wse(Qse,n),o=Pse(n),l=Ve.useRef(null),c=wh(t,l),[d,u]=Ve.useState(!1),[h,p]=Ve.useState("");return Ve.useEffect(()=>{const e=l.current;e&&p((e.textContent??"").trim())},[a.children]),Qe.jsx(Cse.ItemSlot,{scope:n,disabled:r,textValue:i??h,children:Qe.jsx(Lie,{asChild:!0,...o,focusable:!r,children:Qe.jsx(Th.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:c,onPointerMove:xh(e.onPointerMove,Soe(e=>{if(r)s.onItemLeave(e);else if(s.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}})),onPointerLeave:xh(e.onPointerLeave,Soe(e=>s.onItemLeave(e))),onFocus:xh(e.onFocus,()=>u(!0)),onBlur:xh(e.onBlur,()=>u(!1))})})})}),roe=Ve.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...i}=e;return Qe.jsx(uoe,{scope:e.__scopeMenu,checked:n,children:Qe.jsx(toe,{role:"menuitemcheckbox","aria-checked":Noe(n)?"mixed":n,...i,ref:t,"data-state":_oe(n),onSelect:xh(i.onSelect,()=>null==r?void 0:r(!!Noe(n)||!n),{checkForDefaultPrevented:!1})})})});roe.displayName="MenuCheckboxItem";var ioe="MenuRadioGroup",[aoe,soe]=Ese(ioe,{value:void 0,onValueChange:()=>{}}),ooe=Ve.forwardRef((e,t)=>{const{value:n,onValueChange:r,...i}=e,a=Oh(r);return Qe.jsx(aoe,{scope:e.__scopeMenu,value:n,onValueChange:a,children:Qe.jsx(Jse,{...i,ref:t})})});ooe.displayName=ioe;var loe="MenuRadioItem",coe=Ve.forwardRef((e,t)=>{const{value:n,...r}=e,i=soe(loe,e.__scopeMenu),a=n===i.value;return Qe.jsx(uoe,{scope:e.__scopeMenu,checked:a,children:Qe.jsx(toe,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":_oe(a),onSelect:xh(r.onSelect,()=>{var e;return null==(e=i.onValueChange)?void 0:e.call(i,n)},{checkForDefaultPrevented:!1})})})});coe.displayName=loe;var doe="MenuItemIndicator",[uoe,hoe]=Ese(doe,{checked:!1}),poe=Ve.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...i}=e,a=hoe(doe,n);return Qe.jsx(qh,{present:r||Noe(a.checked)||!0===a.checked,children:Qe.jsx(Th.span,{...i,ref:t,"data-state":_oe(a.checked)})})});poe.displayName=doe;var moe=Ve.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return Qe.jsx(Th.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});moe.displayName="MenuSeparator";var foe=Ve.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,i=Tse(n);return Qe.jsx(Fb,{...i,...r,ref:t})});foe.displayName="MenuArrow";var[goe,voe]=Ese("MenuSub"),xoe="MenuSubTrigger",yoe=Ve.forwardRef((e,t)=>{const n=Rse(xoe,e.__scopeMenu),r=Dse(xoe,e.__scopeMenu),i=voe(xoe,e.__scopeMenu),a=Wse(xoe,e.__scopeMenu),s=Ve.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=a,c={__scopeMenu:e.__scopeMenu},d=Ve.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return Ve.useEffect(()=>d,[d]),Ve.useEffect(()=>{const e=o.current;return()=>{window.clearTimeout(e),l(null)}},[o,l]),Qe.jsx(Bse,{asChild:!0,...c,children:Qe.jsx(noe,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":joe(n.open),...e,ref:bh(t,i.onTriggerChange),onClick:t=>{var r;null==(r=e.onClick)||r.call(e,t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:xh(e.onPointerMove,Soe(t=>{a.onItemEnter(t),t.defaultPrevented||e.disabled||n.open||s.current||(a.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:xh(e.onPointerLeave,Soe(e=>{var t,r;d();const i=null==(t=n.content)?void 0:t.getBoundingClientRect();if(i){const t=null==(r=n.content)?void 0:r.dataset.side,s="right"===t,l=s?-5:5,c=i[s?"left":"right"],d=i[s?"right":"left"];a.onPointerGraceIntentChange({area:[{x:e.clientX+l,y:e.clientY},{x:c,y:i.top},{x:d,y:i.top},{x:d,y:i.bottom},{x:c,y:i.bottom}],side:t}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(e),e.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:xh(e.onKeyDown,t=>{var i;const s=""!==a.searchRef.current;e.disabled||s&&" "===t.key||Nse[r.dir].includes(t.key)&&(n.onOpenChange(!0),null==(i=n.content)||i.focus(),t.preventDefault())})})})});yoe.displayName=xoe;var boe="MenuSubContent",woe=Ve.forwardRef((e,t)=>{const n=zse(Vse,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,a=Rse(Vse,e.__scopeMenu),s=Dse(Vse,e.__scopeMenu),o=voe(boe,e.__scopeMenu),l=Ve.useRef(null),c=wh(t,l);return Qe.jsx(Cse.Provider,{scope:e.__scopeMenu,children:Qe.jsx(qh,{present:r||a.open,children:Qe.jsx(Cse.Slot,{scope:e.__scopeMenu,children:Qe.jsx(Yse,{id:o.contentId,"aria-labelledby":o.triggerId,...i,ref:c,align:"start",side:"rtl"===s.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{var t;s.isUsingKeyboardRef.current&&(null==(t=l.current)||t.focus()),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:xh(e.onFocusOutside,e=>{e.target!==o.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:xh(e.onEscapeKeyDown,e=>{s.onClose(),e.preventDefault()}),onKeyDown:xh(e.onKeyDown,e=>{var t;const n=e.currentTarget.contains(e.target),r=_se[s.dir].includes(e.key);n&&r&&(a.onOpenChange(!1),null==(t=o.trigger)||t.focus(),e.preventDefault())})})})})})});function joe(e){return e?"open":"closed"}function Noe(e){return"indeterminate"===e}function _oe(e){return Noe(e)?"indeterminate":e?"checked":"unchecked"}function Soe(e){return t=>"mouse"===t.pointerType?e(t):void 0}woe.displayName=boe;var Coe=Lse,Aoe=Bse,Moe=Hse,Eoe=Kse,koe=Jse,Toe=Zse,Poe=toe,Ooe=roe,Roe=ooe,Ioe=coe,Doe=poe,Loe=moe,Boe=foe,Foe=yoe,Uoe=woe,zoe="DropdownMenu",[Hoe]=jh(zoe,[kse]),Voe=kse(),[Goe,Woe]=Hoe(zoe),Koe=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:i,defaultOpen:a,onOpenChange:s,modal:o=!0}=e,l=Voe(t),c=Ve.useRef(null),[d,u]=Yh({prop:i,defaultProp:a??!1,onChange:s,caller:zoe});return Qe.jsx(Goe,{scope:t,triggerId:Sx(),triggerRef:c,contentId:Sx(),open:d,onOpenChange:u,onOpenToggle:Ve.useCallback(()=>u(e=>!e),[u]),modal:o,children:Qe.jsx(Coe,{...l,open:d,onOpenChange:u,dir:r,modal:o,children:n})})};Koe.displayName=zoe;var qoe="DropdownMenuTrigger",Xoe=Ve.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=e,a=Woe(qoe,n),s=Voe(n);return Qe.jsx(Aoe,{asChild:!0,...s,children:Qe.jsx(Th.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:bh(t,a.triggerRef),onPointerDown:xh(e.onPointerDown,e=>{r||0!==e.button||!1!==e.ctrlKey||(a.onOpenToggle(),a.open||e.preventDefault())}),onKeyDown:xh(e.onKeyDown,e=>{r||(["Enter"," "].includes(e.key)&&a.onOpenToggle(),"ArrowDown"===e.key&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});Xoe.displayName=qoe;var $oe=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Voe(t);return Qe.jsx(Moe,{...r,...n})};$oe.displayName="DropdownMenuPortal";var Yoe="DropdownMenuContent",Joe=Ve.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Woe(Yoe,n),a=Voe(n),s=Ve.useRef(!1);return Qe.jsx(Eoe,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...r,ref:t,onCloseAutoFocus:xh(e.onCloseAutoFocus,e=>{var t;s.current||null==(t=i.triggerRef.current)||t.focus(),s.current=!1,e.preventDefault()}),onInteractOutside:xh(e.onInteractOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;i.modal&&!r||(s.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Joe.displayName=Yoe;Ve.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Voe(n);return Qe.jsx(koe,{...i,...r,ref:t})}).displayName="DropdownMenuGroup";var Zoe=Ve.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Voe(n);return Qe.jsx(Toe,{...i,...r,ref:t})});Zoe.displayName="DropdownMenuLabel";var Qoe=Ve.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Voe(n);return Qe.jsx(Poe,{...i,...r,ref:t})});Qoe.displayName="DropdownMenuItem";var ele=Ve.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Voe(n);return Qe.jsx(Ooe,{...i,...r,ref:t})});ele.displayName="DropdownMenuCheckboxItem";Ve.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Voe(n);return Qe.jsx(Roe,{...i,...r,ref:t})}).displayName="DropdownMenuRadioGroup";var tle=Ve.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Voe(n);return Qe.jsx(Ioe,{...i,...r,ref:t})});tle.displayName="DropdownMenuRadioItem";var nle=Ve.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Voe(n);return Qe.jsx(Doe,{...i,...r,ref:t})});nle.displayName="DropdownMenuItemIndicator";var rle=Ve.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Voe(n);return Qe.jsx(Loe,{...i,...r,ref:t})});rle.displayName="DropdownMenuSeparator";Ve.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Voe(n);return Qe.jsx(Boe,{...i,...r,ref:t})}).displayName="DropdownMenuArrow";var ile=Ve.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Voe(n);return Qe.jsx(Foe,{...i,...r,ref:t})});ile.displayName="DropdownMenuSubTrigger";var ale=Ve.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Voe(n);return Qe.jsx(Uoe,{...i,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ale.displayName="DropdownMenuSubContent";var sle=$oe,ole=Joe,lle=Zoe,cle=Qoe,dle=ele,ule=tle,hle=nle,ple=rle,mle=ile,fle=ale;const gle=Koe,vle=Xoe;Ve.forwardRef(({className:e,inset:t,children:n,...r},i)=>Qe.jsxs(mle,{ref:i,className:Rv("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",t&&"pl-8",e),...r,children:[n,Qe.jsx(ym,{className:"ml-auto h-4 w-4"})]})).displayName=mle.displayName;Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(fle,{ref:n,className:Rv("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=fle.displayName;const xle=Ve.forwardRef(({className:e,sideOffset:t=4,...n},r)=>Qe.jsx(sle,{children:Qe.jsx(ole,{ref:r,sideOffset:t,className:Rv("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));xle.displayName=ole.displayName;const yle=Ve.forwardRef(({className:e,inset:t,...n},r)=>Qe.jsx(cle,{ref:r,className:Rv("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t&&"pl-8",e),...n}));yle.displayName=cle.displayName;Ve.forwardRef(({className:e,children:t,checked:n,...r},i)=>Qe.jsxs(dle,{ref:i,className:Rv("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),checked:n,...r,children:[Qe.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Qe.jsx(hle,{children:Qe.jsx(gm,{className:"h-4 w-4"})})}),t]})).displayName=dle.displayName;Ve.forwardRef(({className:e,children:t,...n},r)=>Qe.jsxs(ule,{ref:r,className:Rv("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[Qe.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Qe.jsx(hle,{children:Qe.jsx(Mm,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=ule.displayName;const ble=Ve.forwardRef(({className:e,inset:t,...n},r)=>Qe.jsx(lle,{ref:r,className:Rv("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));ble.displayName=lle.displayName;const wle=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(ple,{ref:n,className:Rv("-mx-1 my-1 h-px bg-muted",e),...t}));wle.displayName=ple.displayName;const jle=[{id:"1",type:"order",title:"n hng  c giao",message:"n hng #12345  c giao thnh cng",time:"5 pht trc",isRead:!1},{id:"2",type:"promotion",title:"Flash Sale sp bt u",message:"Gim gi ln n 50% cho danh mc thi trang",time:"1 gi trc",isRead:!1},{id:"3",type:"community",title:"Bi vit mi t ngi bn theo di",message:"Nguyn Vn A va ng bi vit mi",time:"2 gi trc",isRead:!1},{id:"4",type:"system",title:"Cp nht h thng",message:"Chng ti  thm tnh nng AI Stylist mi",time:"1 ngy trc",isRead:!0},{id:"5",type:"order",title:"n hng ang c vn chuyn",message:"n hng #12344 ang trn ng giao n bn",time:"2 ngy trc",isRead:!0},{id:"6",type:"promotion",title:"Nhn voucher 100K",message:"Bn c voucher gim gi 100K cho n hng tip theo",time:"3 ngy trc",isRead:!0}],Nle=e=>{switch(e){case"order":return Qe.jsx(lg,{className:"w-5 h-5 text-primary"});case"promotion":return Qe.jsx(xg,{className:"w-5 h-5 text-accent"});case"community":return Qe.jsx(Og,{className:"w-5 h-5 text-success"});case"system":return Qe.jsx(fg,{className:"w-5 h-5 text-warning"});default:return Qe.jsx(rm,{className:"w-5 h-5"})}},_le=()=>{const[e,t]=Ve.useState(jle),[n,r]=Ve.useState(!1),i=e.filter(e=>!e.isRead).length;return Qe.jsxs(gle,{open:n,onOpenChange:r,children:[Qe.jsx(vle,{asChild:!0,children:Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(AP,{variant:"ghost",size:"icon",className:"relative group",children:[Qe.jsx(QT.div,{animate:i>0?{rotate:[0,-15,15,-15,0]}:{},transition:{duration:.5,repeat:1/0,repeatDelay:3},children:Qe.jsx(rm,{className:"w-5 h-5 group-hover:text-primary transition-colors"})}),i>0&&Qe.jsx(QT.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1",children:Qe.jsx(EP,{className:"w-5 h-5 p-0 flex items-center justify-center bg-gradient-to-br from-red-500 to-pink-600 text-white text-xs font-bold border-2 border-background shadow-lg",children:i>9?"9+":i})})]})})}),Qe.jsxs(xle,{className:"w-[420px] p-0 overflow-hidden",align:"end",children:[Qe.jsx("div",{className:"bg-gradient-to-br from-primary/10 via-purple-500/5 to-pink-500/5 backdrop-blur-sm border-b border-border/50",children:Qe.jsxs("div",{className:"flex items-center justify-between p-4",children:[Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary to-purple-600 flex items-center justify-center",children:Qe.jsx(rm,{className:"w-4 h-4 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx("h3",{className:"font-bold text-base bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:"Thng bo"}),i>0&&Qe.jsxs("p",{className:"text-xs text-muted-foreground",children:[i," thng bo cha c"]})]})]}),Qe.jsxs("div",{className:"flex gap-1",children:[i>0&&Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(AP,{variant:"ghost",size:"sm",onClick:()=>{t(e=>e.map(e=>({...e,isRead:!0})))},className:"text-xs h-8 hover:bg-primary/10",children:[Qe.jsx(gm,{className:"w-3 h-3 mr-1"}),"c tt c"]})}),e.length>0&&Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(AP,{variant:"ghost",size:"sm",onClick:()=>{t([])},className:"text-xs h-8 text-destructive hover:text-destructive hover:bg-destructive/10",children:[Qe.jsx(Ng,{className:"w-3 h-3 mr-1"}),"Xa"]})})]})]})}),Qe.jsx(xse,{className:"h-[450px]",children:Qe.jsx(eM,{mode:"popLayout",children:0===e.length?Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex flex-col items-center justify-center py-16 px-4",children:[Qe.jsx(QT.div,{animate:{scale:[1,1.1,1],rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,repeatDelay:1},className:"w-20 h-20 rounded-full bg-gradient-to-br from-primary/20 to-purple-500/20 flex items-center justify-center mb-4 shadow-lg",children:Qe.jsx(rm,{className:"w-10 h-10 text-primary"})}),Qe.jsx("p",{className:"text-muted-foreground text-center font-medium",children:"Khng c thng bo no"}),Qe.jsx("p",{className:"text-xs text-muted-foreground/70 text-center mt-1",children:"Cc thng bo mi s xut hin  y"})]}):e.map((n,r)=>Qe.jsxs(QT.div,{layout:!0,initial:{opacity:0,x:-20,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:20,scale:.95},transition:{delay:.03*r,type:"spring",stiffness:500,damping:30},children:[Qe.jsx(QT.div,{whileHover:{x:4},className:Rv("p-4 transition-all cursor-pointer relative group border-l-4",n.isRead?"border-l-transparent hover:bg-accent/30":"bg-gradient-to-r from-primary/10 via-transparent to-transparent border-l-primary hover:from-primary/15"),onClick:()=>{return e=n.id,void t(t=>t.map(t=>t.id===e?{...t,isRead:!0}:t));var e},children:Qe.jsxs("div",{className:"flex gap-3",children:[Qe.jsx(QT.div,{whileHover:{rotate:360,scale:1.1},transition:{duration:.5},className:Rv("w-11 h-11 rounded-xl flex items-center justify-center flex-shrink-0 shadow-md","order"===n.type&&"bg-gradient-to-br from-blue-500/20 to-blue-600/30","promotion"===n.type&&"bg-gradient-to-br from-orange-500/20 to-red-600/30","community"===n.type&&"bg-gradient-to-br from-green-500/20 to-emerald-600/30","system"===n.type&&"bg-gradient-to-br from-purple-500/20 to-pink-600/30"),children:Nle(n.type)}),Qe.jsxs("div",{className:"flex-1 min-w-0",children:[Qe.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[Qe.jsx("h4",{className:Rv("font-medium text-sm line-clamp-1",!n.isRead&&"text-foreground font-bold"),children:n.title}),!n.isRead&&Qe.jsx(QT.div,{initial:{scale:0},animate:{scale:1},className:"w-2.5 h-2.5 rounded-full bg-gradient-to-br from-primary to-purple-600 flex-shrink-0 mt-1 shadow-lg shadow-primary/50"})]}),Qe.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 leading-relaxed",children:n.message}),Qe.jsx("div",{className:"flex items-center gap-2 mt-2",children:Qe.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground/80",children:[Qe.jsx("div",{className:"w-1 h-1 rounded-full bg-muted-foreground/50"}),n.time]})})]}),Qe.jsx(QT.div,{initial:{opacity:0,scale:.8},whileHover:{opacity:1,scale:1},className:"opacity-0 group-hover:opacity-100 transition-opacity",children:Qe.jsx(AP,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0 hover:bg-destructive/10",onClick:e=>{var r;e.stopPropagation(),r=n.id,t(e=>e.filter(e=>e.id!==r))},children:Qe.jsx(Ng,{className:"w-4 h-4 text-muted-foreground hover:text-destructive transition-colors"})})})]})}),r<e.length-1&&Qe.jsx(ZR,{className:"opacity-50"})]},n.id))})}),e.length>0&&Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(ZR,{className:"opacity-50"}),Qe.jsx("div",{className:"p-3 bg-gradient-to-r from-transparent via-primary/5 to-transparent",children:Qe.jsx(QT.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:Qe.jsx(AP,{variant:"ghost",className:"w-full text-sm font-semibold bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent hover:from-primary hover:to-purple-600 hover:bg-primary/5",children:"Xem tt c thng bo"})})})]})]})]})},Sle=[{label:"Mua sm & Khm ph",icon:gg,hasSubmenu:!0,submenu:[{to:"/shop",label:"Mua sm",icon:lg},{to:"/discover",label:"Khm ph",icon:pg},{to:"/flash-sale",label:"Flash Sale",icon:zf},{to:"/local-brand",label:"Local Brand",icon:gg}]},{to:"/community",label:"Cng ng",icon:Og,hasSubmenu:!1},{label:"AI & C nhn ha",icon:pg,hasSubmenu:!0,submenu:[{to:"/ai-stylist",label:"AI Stylist",icon:Zm},{to:"/ai-shopping",label:"AI tr l mua sm",icon:Cm}]},{label:"Tin ch & Dch v",icon:om,hasSubmenu:!0,submenu:[{to:"/wallet",label:"V & im thng",icon:Lg},{to:"/lucky-wheel",label:"Vng quay nhn qu",icon:Ym}]},{to:"/about",label:"Gii thiu",icon:uf,hasSubmenu:!1}],Cle=()=>{const[e,t]=Ve.useState(!1),[n,r]=Ve.useState(!1),[i,a]=Ve.useState(!1),{user:s,logout:o}=Pae(),[l,c]=Ve.useState("none"),{items:d}=GP(),u=Yj(),h=u.pathname,[p,m]=Ve.useState(!1),[f,g]=Ve.useState(null),[v,x]=Ve.useState(null),[y,b]=Ve.useState(!1),w=Ve.useRef(null),j=Ve.useRef(null),[N,_]=Ve.useState(!1);return Ve.useEffect(()=>{const e=e=>{w.current&&!w.current.contains(e.target)&&t(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),Ve.useEffect(()=>{s?fetch(`http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/vendor/status.php?user_id=${s.id}`).then(e=>e.json()).then(e=>{"approved"===e.status?c("approved"):"pending"===e.status?c("pending"):c("none")}):c("none")},[s]),Ve.useEffect(()=>{const e=()=>{window.innerWidth>=768&&N&&_(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[N]),Qe.jsxs(QT.nav,{initial:{y:-100},animate:{y:0},className:"sticky top-0 z-50 bg-card/80 backdrop-blur-xl border-b border-border",children:[Qe.jsxs("div",{className:"mx-auto px-6 py-4",children:[Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsx(AN,{to:"/",children:Qe.jsxs(QT.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex items-center gap-3",children:[Qe.jsxs("div",{className:"relative group",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/40 via-accent/40 to-primary/40 rounded-full blur-2xl group-hover:blur-3xl transition-all duration-500 opacity-60 group-hover:opacity-80"}),Qe.jsx("div",{className:"relative w-12 h-12 rounded-full bg-gradient-to-br from-primary via-accent to-emerald-600 p-0.5 shadow-xl shadow-primary/30 group-hover:shadow-2xl group-hover:shadow-primary/40 transition-all duration-300",children:Qe.jsx("div",{className:"w-full h-full rounded-full bg-white dark:bg-gray-900 flex items-center justify-center overflow-hidden",children:Qe.jsx("img",{src:"/logo-2.png",alt:"VibeMarket Logo",className:"w-9 h-9 object-contain transform group-hover:scale-110 transition-transform duration-300",onError:e=>{e.currentTarget.style.display="none";const t=e.currentTarget.parentElement;if(t){t.classList.remove("bg-white","dark:bg-gray-900"),t.classList.add("bg-gradient-to-br","from-primary","via-accent","to-emerald-600");const e=document.createElement("span");e.className="text-white font-black text-2xl",e.textContent="V",t.appendChild(e)}}})})})]}),Qe.jsxs("div",{className:"hidden sm:flex flex-col -space-y-1",children:[Qe.jsx("span",{className:"text-xl font-black bg-gradient-to-r from-purple-600 via-violet-500 to-fuchsia-600 bg-clip-text text-transparent tracking-tight",children:"VibeMarket"}),Qe.jsx("span",{className:"text-[8px] text-muted-foreground/80 font-bold tracking-[0.25em] uppercase pl-0.5",children:"Fashion & Lifestyle"})]})]})}),Qe.jsx("nav",{className:"hidden lg:flex space-x-1 xl:space-x-2 mx-8",ref:j,children:Sle.map(e=>{var t,n;return Qe.jsx("div",{className:"relative",children:e.hasSubmenu?Qe.jsxs("div",{className:"relative",onMouseEnter:()=>g(e.label),onMouseLeave:()=>g(null),children:[Qe.jsxs("button",{className:"flex items-center px-2 xl:px-3 py-2 rounded-lg font-medium transition-all text-sm xl:text-base "+((null==(t=e.submenu)?void 0:t.some(e=>u.pathname===e.to))?"text-primary":"hover:text-primary"),children:[e.label,Qe.jsx(vm,{size:16,className:"ml-1 transition-transform duration-200 "+(f===e.label?"rotate-180":"")}),Qe.jsx("span",{className:"absolute left-0 right-0 -bottom-1 h-0.5 bg-primary rounded-full transition-transform duration-300 origin-left scale-x-0 group-hover:scale-x-100"})]}),Qe.jsx(eM,{children:f===e.label&&Qe.jsx(QT.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.2},className:"absolute top-full left-0 mt-2 w-44 lg:w-48 bg-white rounded-xl shadow-xl border border-gray-100 py-2 z-50",children:null==(n=e.submenu)?void 0:n.map(e=>Qe.jsxs(MN,{to:e.to,className:({isActive:e})=>"relative flex items-center px-3 lg:px-4 py-2.5 text-xs lg:text-sm font-medium transition-all "+(e?"text-primary":"text-black hover:text-primary"),onClick:()=>g(null),children:[Qe.jsx(e.icon,{size:16,className:"mr-3"}),e.label,Qe.jsx("span",{className:"absolute left-0 right-0 -bottom-1 h-0.5 bg-primary rounded-full transition-transform duration-300 origin-left scale-x-0 group-hover:scale-x-100"})]},e.to))})})]}):Qe.jsx(MN,{to:e.to,className:({isActive:e})=>"relative flex items-center px-2 xl:px-3 py-2 group rounded-lg font-medium transition-all text-sm xl:text-base "+(e?"text-primary":"hover:text-primary"),children:({isActive:t})=>Qe.jsxs(Qe.Fragment,{children:[e.label,t&&Qe.jsx(QT.span,{className:"absolute -bottom-1 left-0 h-0.5 bg-primary w-full rounded-full",layoutId:"navbar-indicator",transition:{type:"spring",damping:20,stiffness:300}}),Qe.jsx("span",{className:"absolute left-0 right-0 -bottom-1 h-0.5 bg-primary rounded-full transition-transform duration-300 origin-left scale-x-0 group-hover:scale-x-100"})]})})},e.label)})}),Qe.jsxs("div",{className:"flex items-center space-x-2",children:[Qe.jsx(AN,{to:"/messages",className:"hidden md:inline-flex",children:Qe.jsx(AP,{variant:"ghost",size:"icon",className:"relative",children:Qe.jsx(Cf,{className:"w-5 h-5"})})}),Qe.jsx("div",{className:"",children:Qe.jsx(_le,{})}),Qe.jsx(Iae,{}),Qe.jsxs(AP,{variant:"ghost",size:"icon",className:"relative hidden md:inline-flex",onClick:()=>a(!0),children:[Qe.jsx(cg,{className:"w-5 h-5"}),d.length>0&&Qe.jsx("span",{className:"absolute -top-1 -right-1 bg-destructive text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center border-2 border-card shadow",children:d.length})]}),s?Qe.jsxs("div",{className:"relative hidden md:block",ref:w,children:[Qe.jsxs(QT.button,{onClick:()=>t(!e),className:"flex items-center space-x-2 p-1 rounded-xl hover:bg-card/50 transition-all duration-300",whileHover:{scale:1.05},whileTap:{scale:.95},children:[s.avatar?Qe.jsx("img",{src:s.avatar||"/images/avatars/Avt-Default.png",alt:s.name,className:"w-10 h-10 rounded-full object-cover ring-2 ring-primary/20 hover:ring-primary/50 transition-all duration-300"}):Qe.jsx("img",{src:"/images/avatars/Avt-Default.png",alt:s.name,className:"w-10 h-10 rounded-full object-cover ring-2 ring-primary/20 hover:ring-primary/50 transition-all duration-300"}),Qe.jsxs("div",{className:"hidden md:block text-left",children:[Qe.jsx("p",{className:"text-sm font-medium text-foreground",children:s.name}),void 0!==s.points&&Qe.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.points," im"]})]})]}),e&&Qe.jsxs(QT.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},className:"absolute right-0 top-full mt-2 w-72 bg-card/95 backdrop-blur-xl border border-border rounded-2xl shadow-xl z-[100] overflow-hidden",children:[Qe.jsx("div",{className:"hidden md:block p-4 bg-gradient-primary/10 border-b border-border",children:Qe.jsxs("div",{className:"flex items-center space-x-3",children:[s.avatar?Qe.jsx("img",{src:s.avatar,alt:s.name,className:"w-10 h-10 rounded-xl object-cover ring-2 ring-primary/20 hover:ring-primary/50 transition-all duration-300"}):Qe.jsx("img",{src:"/images/avatars/Avt-Default.png",alt:s.name,className:"w-10 h-10 rounded-full object-cover ring-2 ring-primary/20 hover:ring-primary/50 transition-all duration-300"}),Qe.jsxs("div",{children:[Qe.jsx("h3",{className:"font-semibold text-foreground",children:s.name}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:s.email}),Qe.jsx(EP,{className:"mt-1 bg-gradient-primary text-xs",children:s.role})]})]})}),Qe.jsxs("div",{className:"py-2",children:[[{icon:Pg,label:"H s c nhn",href:"/profile"},{icon:Rf,label:"n hng ca ti",href:"/orders"},{icon:sf,label:"Sn phm yu thch",href:"/wishlist"},{icon:Rm,label:"V & Thanh ton",href:"/wallet"}].map((e,n)=>Qe.jsxs(QT.a,{href:e.href,initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.2,delay:.05*n},className:"flex items-center space-x-3 px-4 py-3 hover:bg-primary/5 transition-all duration-200 group",onClick:()=>t(!1),children:[Qe.jsx(e.icon,{className:"w-5 h-5 text-muted-foreground group-hover:text-primary transition-colors"}),Qe.jsx("span",{className:"text-sm text-foreground group-hover:text-primary transition-colors",children:e.label})]},e.label)),s&&"user"===s.role&&"approved"!==l&&Qe.jsxs(QT.a,{href:"/vendor-registration",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.2,delay:.3},className:"flex items-center space-x-3 px-4 py-3 hover:bg-primary/5 transition-all duration-200 group",onClick:()=>t(!1),children:[Qe.jsx(gg,{className:"w-5 h-5 text-muted-foreground group-hover:text-primary transition-colors"}),Qe.jsx("span",{className:"text-sm text-foreground group-hover:text-primary transition-colors",children:"ng k Vendor"})]},"vendor-register"),s&&("seller"===s.role||"approved"===l)&&Qe.jsxs(QT.a,{href:"/vendor-management",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.2,delay:.3},className:"flex items-center space-x-3 px-4 py-3 hover:bg-primary/5 transition-all duration-200 group",onClick:()=>t(!1),children:[Qe.jsx(gg,{className:"w-5 h-5 text-muted-foreground group-hover:text-primary transition-colors"}),Qe.jsx("span",{className:"text-sm text-foreground group-hover:text-primary transition-colors",children:"Qun l ca hng"})]},"vendor-dashboard"),Qe.jsxs(QT.a,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.2,delay:.4},className:"flex items-center space-x-3 px-4 py-3 hover:bg-destructive/10 text-destructive transition-all duration-200 group",onClick:o,children:[Qe.jsx(bf,{className:"w-5 h-5"}),Qe.jsx("span",{className:"text-sm",children:"ng xut"})]},"logout")]})]})]}):Qe.jsx(AN,{to:"/login",className:"hidden md:inline-flex",children:Qe.jsx(AP,{variant:"ghost",size:"icon",className:"relative","aria-label":"ng nhp",children:Qe.jsx(Pg,{className:"w-7 h-7"})})}),Qe.jsxs(_ae,{open:N,onOpenChange:_,children:[Qe.jsx(Sae,{asChild:!0,children:Qe.jsx(AP,{variant:"ghost",size:"icon",className:"md:hidden",children:Qe.jsx(Sf,{className:"w-5 h-5"})})}),Qe.jsxs(Eae,{side:"bottom",className:Rv("p-0 bg-black text-white w-full h-full border-none","animate-in slide-in-from-bottom duration-300 ease-out"),children:[Qe.jsx(Zh,{children:Qe.jsx(kae,{children:"Navigation Menu"})}),Qe.jsxs("div",{className:"flex flex-col h-full",children:[Qe.jsxs("div",{className:"px-6 py-6 border-b border-white/10 space-y-4",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsxs("div",{className:"relative group",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/50 via-accent/50 to-primary/50 rounded-full blur-2xl group-hover:blur-3xl transition-all duration-500 opacity-70"}),Qe.jsx("div",{className:"relative w-12 h-12 rounded-full bg-gradient-to-br from-primary via-accent to-emerald-600 p-0.5 shadow-xl shadow-primary/40",children:Qe.jsx("div",{className:"w-full h-full rounded-full bg-gray-900 flex items-center justify-center overflow-hidden",children:Qe.jsx("img",{src:"/logo.png",alt:"VibeMarket Logo",className:"w-9 h-9 object-contain",onError:e=>{e.currentTarget.style.display="none";const t=e.currentTarget.parentElement;if(t){t.classList.remove("bg-gray-900"),t.classList.add("bg-gradient-to-br","from-primary","via-accent","to-emerald-600");const e=document.createElement("span");e.className="text-white font-black text-2xl",e.textContent="V",t.appendChild(e)}}})})})]}),Qe.jsxs("div",{className:"flex flex-col -space-y-1",children:[Qe.jsx("span",{className:"text-2xl font-black bg-gradient-to-r from-purple-600 via-violet-500 to-fuchsia-600 bg-clip-text text-transparent tracking-tight",children:"VibeMarket"}),Qe.jsx("span",{className:"text-[9px] text-white/60 font-bold tracking-[0.25em] uppercase pl-0.5",children:"Fashion & Lifestyle"})]})]}),Qe.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Qe.jsx(AN,{to:"/messages",onClick:()=>_(!1),className:"block",children:Qe.jsxs("div",{className:"flex flex-col items-center gap-2 py-3 px-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:[Qe.jsx(Cf,{className:"w-5 h-5 text-white"}),Qe.jsx("span",{className:"text-xs font-medium text-white",children:"Tin nhn"})]})}),Qe.jsxs("button",{className:"relative flex flex-col items-center gap-2 py-3 px-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",onClick:()=>{a(!0),_(!1)},children:[Qe.jsxs("div",{className:"relative",children:[Qe.jsx(cg,{className:"w-5 h-5 text-white"}),d.length>0&&Qe.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full w-4 h-4 flex items-center justify-center",children:d.length})]}),Qe.jsx("span",{className:"text-xs font-medium text-white",children:"Gi hng"})]})]})]}),Qe.jsx("nav",{className:"flex-1 overflow-y-auto px-4 py-4",children:Sle.map(e=>{var t;return Qe.jsx("div",{className:"mb-6",children:e.hasSubmenu?Qe.jsxs(Qe.Fragment,{children:[Qe.jsxs("button",{onClick:()=>x(v===e.label?null:e.label),className:"w-full flex items-center justify-between px-3 py-2 mb-2 text-xs font-semibold text-white/50 uppercase tracking-wider hover:text-white/70 transition-colors",children:[Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx(e.icon,{className:"w-4 h-4"}),Qe.jsx("span",{children:e.label})]}),Qe.jsx(vm,{className:Rv("w-4 h-4 transition-transform duration-200",v===e.label&&"rotate-180")})]}),Qe.jsx(eM,{children:v===e.label&&Qe.jsx(QT.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"space-y-1 overflow-hidden",children:null==(t=e.submenu)?void 0:t.map(e=>Qe.jsxs(AN,{to:e.to,onClick:()=>_(!1),className:Rv("flex items-center gap-3 py-2.5 px-3 pl-6 rounded-lg transition-all",h===e.to?"bg-gradient-to-r from-primary/20 to-purple-600/20 text-white font-medium":"text-white/80 hover:bg-white/10 hover:text-white"),children:[Qe.jsx(e.icon,{className:"w-5 h-5"}),Qe.jsx("span",{className:"text-sm",children:e.label}),h===e.to&&Qe.jsx(QT.div,{layoutId:"mobile-active-pill",className:"ml-auto w-1.5 h-1.5 bg-primary rounded-full"})]},e.to))})})]}):Qe.jsxs(Qe.Fragment,{children:[Qe.jsx("h3",{className:"text-xs font-semibold text-white/50 uppercase tracking-wider mb-3 px-3",children:e.label}),Qe.jsx("div",{className:"space-y-1",children:Qe.jsxs(AN,{to:e.to,onClick:()=>_(!1),className:Rv("flex items-center gap-3 py-2.5 px-3 rounded-lg transition-all",h===e.to?"bg-gradient-to-r from-primary/20 to-purple-600/20 text-white font-medium":"text-white/80 hover:bg-white/10 hover:text-white"),children:[Qe.jsx(e.icon,{className:"w-5 h-5"}),Qe.jsx("span",{className:"text-sm",children:e.label}),h===e.to&&Qe.jsx(QT.div,{layoutId:"mobile-active-pill",className:"ml-auto w-1.5 h-1.5 bg-primary rounded-full"})]})})]})},e.label)})}),Qe.jsx("div",{className:"border-t border-white/10 px-4 py-4 bg-white/5",children:s?Qe.jsxs("div",{className:"space-y-3",children:[Qe.jsx("button",{onClick:()=>b(!y),className:"w-full bg-gradient-to-br from-primary/20 to-purple-600/20 rounded-xl p-3 border border-white/10 hover:from-primary/30 hover:to-purple-600/30 transition-all",children:Qe.jsxs("div",{className:"flex items-center gap-3",children:[s.avatar?Qe.jsx("img",{src:s.avatar,alt:s.name,className:"w-12 h-12 rounded-full object-cover ring-2 ring-primary/50"}):Qe.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-primary to-purple-600 flex items-center justify-center text-white font-bold text-lg",children:s.name[0].toUpperCase()}),Qe.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[Qe.jsx("div",{className:"font-semibold text-white truncate",children:s.name}),Qe.jsx("div",{className:"text-xs text-white/70 truncate",children:s.email}),Qe.jsxs(EP,{className:"mt-1 bg-gradient-to-r from-yellow-400 to-orange-500 text-black text-xs border-0",children:[Qe.jsx(fg,{className:"w-3 h-3 mr-1"}),s.role]})]}),Qe.jsx(vm,{className:Rv("w-5 h-5 text-white/70 transition-transform duration-200 flex-shrink-0",y&&"rotate-180")})]})}),Qe.jsx(eM,{children:y&&Qe.jsxs(QT.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"space-y-2 overflow-hidden",children:[Qe.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Qe.jsxs(AN,{to:"/profile",onClick:()=>_(!1),className:"flex flex-col items-center gap-2 py-3 px-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:[Qe.jsx(Pg,{className:"w-5 h-5"}),Qe.jsx("span",{className:"text-xs font-medium",children:"H s"})]}),Qe.jsxs(AN,{to:"/orders",onClick:()=>_(!1),className:"flex flex-col items-center gap-2 py-3 px-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:[Qe.jsx(Rf,{className:"w-5 h-5"}),Qe.jsx("span",{className:"text-xs font-medium",children:"n hng"})]}),Qe.jsxs(AN,{to:"/wishlist",onClick:()=>_(!1),className:"flex flex-col items-center gap-2 py-3 px-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:[Qe.jsx(sf,{className:"w-5 h-5"}),Qe.jsx("span",{className:"text-xs font-medium",children:"Yu thch"})]}),Qe.jsxs(AN,{to:"/wallet",onClick:()=>_(!1),className:"flex flex-col items-center gap-2 py-3 px-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:[Qe.jsx(Lg,{className:"w-5 h-5"}),Qe.jsx("span",{className:"text-xs font-medium",children:"V"})]})]}),s&&"user"===s.role&&"approved"!==l&&Qe.jsxs(AN,{to:"/vendor-registration",onClick:()=>_(!1),className:"flex items-center gap-3 py-2.5 px-3 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:[Qe.jsx(gg,{className:"w-5 h-5"}),Qe.jsx("span",{className:"text-sm font-medium",children:"ng k Vendor"})]}),s&&("seller"===s.role||"approved"===l)&&Qe.jsxs(AN,{to:"/vendor-management",onClick:()=>_(!1),className:"flex items-center gap-3 py-2.5 px-3 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:[Qe.jsx(gg,{className:"w-5 h-5"}),Qe.jsx("span",{className:"text-sm font-medium",children:"Qun l ca hng"})]})]})}),Qe.jsxs(AP,{onClick:()=>{o(),_(!1)},variant:"outline",className:"w-full border-red-500/50 text-red-400 hover:bg-red-500/10 hover:text-red-300 hover:border-red-500",children:[Qe.jsx(bf,{className:"w-4 h-4 mr-2"}),"ng xut"]})]}):Qe.jsxs(AN,{to:"/login",onClick:()=>_(!1),className:"flex items-center justify-center gap-2 w-full py-3 bg-gradient-to-r from-primary to-purple-600 rounded-xl font-semibold hover:shadow-lg hover:shadow-primary/50 transition-all",children:[Qe.jsx(Pg,{className:"w-5 h-5"}),"ng nhp"]})})]})]})]})]})]}),Qe.jsx("div",{className:"md:hidden mt-4",children:Qe.jsxs("div",{className:"relative",children:[Qe.jsx(eg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),Qe.jsx("input",{type:"text",placeholder:"Tm kim sn phm...",className:"w-full pl-10 pr-4 py-2 bg-input border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-smooth"})]})})]}),Qe.jsx(eD,{open:i,onOpenChange:a})]})},Ale=()=>Qe.jsxs("footer",{className:"relative bg-gradient-card border-t border-border/30 py-16 overflow-hidden",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-accent/5"}),Qe.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-primary/10 rounded-full blur-3xl opacity-20"}),Qe.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-accent/10 rounded-full blur-3xl opacity-20"}),Qe.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[Qe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-12",children:[Qe.jsxs("div",{className:"md:col-span-1",children:[Qe.jsxs(QT.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},className:"flex items-center gap-3 mb-6",children:[Qe.jsxs("div",{className:"relative group",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/40 via-accent/40 to-primary/40 rounded-full blur-2xl group-hover:blur-3xl transition-all duration-500 opacity-60 group-hover:opacity-80"}),Qe.jsx("div",{className:"relative w-12 h-12 rounded-full bg-gradient-to-br from-primary via-accent to-emerald-600 p-0.5 shadow-xl shadow-primary/30 group-hover:shadow-2xl group-hover:shadow-primary/40 transition-all duration-300",children:Qe.jsx("div",{className:"w-full h-full rounded-full bg-white dark:bg-gray-900 flex items-center justify-center overflow-hidden",children:Qe.jsx("img",{src:"/logo-2.png",alt:"VibeMarket Logo",className:"w-9 h-9 object-contain transform group-hover:scale-110 transition-transform duration-300",onError:e=>{e.currentTarget.style.display="none";const t=e.currentTarget.parentElement;if(t){t.classList.remove("bg-white","dark:bg-gray-900"),t.classList.add("bg-gradient-to-br","from-primary","via-accent","to-emerald-600");const e=document.createElement("span");e.className="text-white font-black text-2xl",e.textContent="V",t.appendChild(e)}}})})})]}),Qe.jsxs("div",{className:"flex flex-col -space-y-1",children:[Qe.jsx("span",{className:"text-2xl font-black bg-gradient-to-r from-purple-600 via-violet-500 to-fuchsia-600 bg-clip-text text-transparent tracking-tight",children:"VibeMarket"}),Qe.jsx("span",{className:"text-[9px] text-muted-foreground/60 font-bold tracking-[0.25em] uppercase pl-0.5",children:"Fashion & Lifestyle"})]})]}),Qe.jsx(QT.p,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"text-muted-foreground text-sm leading-relaxed mb-6",children:"Nn tng thng mi in t v cng ng hng u Vit Nam, kt ni ngi mua v ngi bn trong mt cng ng si ng."}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"flex space-x-3",children:[{name:"Facebook",icon:Gm,href:"#"},{name:"Instagram",icon:hf,href:"#"},{name:"Twitter",icon:Eg,href:"#"},{name:"YouTube",icon:Ug,href:"#"}].map(({name:e,icon:t,href:n})=>Qe.jsx("a",{href:n,"aria-label":e,className:"w-10 h-10 bg-card border border-border rounded-xl flex items-center justify-center bg-gradient-to-r hover:from-primary hover:to-purple-600 hover:text-background transition-all duration-300 hover:-translate-y-1 hover:shadow-lg",children:Qe.jsx(t,{className:"w-5 h-5"})},e))})]}),[{title:"Mua sm",links:["Flash Sale","Thi trang","in t","Local Brand","Gia dng","Lm p"]},{title:"Cng ng",links:["Din n","Review","Livestream","Nhm","S kin","Blog"]},{title:"H tr",links:["Trung tm tr gip","Chnh sch","Lin h","V chng ti","Tuyn dng","i tc"]}].map((e,t)=>Qe.jsxs(QT.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1*(t+1)},children:[Qe.jsxs("h4",{className:"font-bold text-foreground mb-6 text-lg relative",children:[e.title,Qe.jsx("div",{className:"absolute -bottom-2 left-0 w-8 h-0.5 bg-gradient-primary rounded-full"})]}),Qe.jsx("ul",{className:"space-y-3",children:e.links.map((e,t)=>Qe.jsx(QT.li,{initial:{opacity:0,x:-10},whileInView:{opacity:1,x:0},transition:{duration:.4,delay:.05*t},children:Qe.jsxs("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-all duration-300 hover:translate-x-1 inline-block relative group",children:[e,Qe.jsx("span",{className:"absolute inset-x-0 -bottom-1 h-0.5 bg-primary scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"})]})},e))})]},e.title))]}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mt-16 pt-8 border-t border-border/30",children:Qe.jsxs("div",{className:"max-w-2xl mx-auto text-center",children:[Qe.jsx("h3",{className:"text-xl font-bold text-foreground mb-4",children:"ng k nhn thng tin u i"}),Qe.jsx("p",{className:"text-muted-foreground mb-6",children:"Nhn ngay thng tin v cc chng trnh khuyn mi v sn phm mi nht"}),Qe.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 max-w-md mx-auto",children:[Qe.jsx("input",{type:"email",placeholder:"Nhp email ca bn",className:"flex-1 px-4 py-3 bg-card border border-border rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-300"}),Qe.jsx("button",{className:"px-6 py-3 bg-gradient-to-r from-primary to-purple-600 rounded-xl font-medium hover:shadow-lg hover:-translate-y-0.5 transition-all duration-300 glow-primary",children:"ng k"})]})]})}),Qe.jsxs(QT.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6,delay:.5},className:"border-t border-border/30 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center gap-4",children:[Qe.jsxs("p",{className:"text-sm text-muted-foreground",children:[" ",(new Date).getFullYear()," VibeMarket. Tt c quyn c bo lu."]}),Qe.jsxs("div",{className:"flex items-center space-x-6 text-sm text-muted-foreground",children:[Qe.jsx("a",{href:"#",className:"hover:text-primary transition-colors",children:"iu khon s dng"}),Qe.jsx("a",{href:"#",className:"hover:text-primary transition-colors",children:"Chnh sch bo mt"}),Qe.jsx("a",{href:"#",className:"hover:text-primary transition-colors",children:"Cookie"})]})]})]})]}),Mle=["/chat","/call"],Ele=()=>{const{pathname:e}=Yj(),t=Mle.some(t=>e.startsWith(t));return Qe.jsxs("div",{className:"flex flex-col min-h-screen relative",children:[!t&&Qe.jsx(Cle,{}),Qe.jsx("main",{children:Qe.jsx(hN,{})}),!t&&Qe.jsx(Ale,{})]})},kle=()=>{const{id:e}=eN(),t=Zj(),[n,r]=Ve.useState(0),{addToCart:i}=GP(),[a,s]=Ve.useState(!1),[o,l]=Ve.useState(1),[c,d]=Ve.useState(""),[u,h]=Ve.useState(""),[p,m]=Ve.useState(!1),[f,g]=Ve.useState(null),[v,x]=Ve.useState(!0),[y,b]=Ve.useState([]),[w,j]=Ve.useState(null),[N,_]=Ve.useState(!1),[S,C]=Ve.useState(null),{toast:A}=vh();Ve.useEffect(()=>{x(!0),fetch(`http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/product/detail.php?id=${e}`).then(e=>e.json()).then(e=>{e.success&&(g(e.product),M()),x(!1)}).catch(e=>{x(!1)})},[e]);const M=async()=>{if(e){_(!0);try{const t=await fetch(`http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/review/get_product_reviews.php?product_id=${e}`),n=await t.json();n.success&&(b(n.reviews),j(n.stats))}catch(t){}finally{_(!1)}}};Ve.useEffect(()=>{var e,t;f&&(d((null==(e=f.sizes)?void 0:e[0])||""),h((null==(t=f.colors)?void 0:t[0])||""))},[f]);const E=e=>Array.from({length:5},(t,n)=>Qe.jsx(fg,{className:"w-4 h-4 "+(n<e?"fill-yellow-400 text-yellow-400":"text-gray-300")},n)),k=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e);return v?Qe.jsx("div",{className:"flex min-h-[100vh] items-center justify-center bg-gradient-to-br from-background via-primary/5 to-background",children:Qe.jsxs(QT.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex flex-col items-center",children:[Qe.jsxs("div",{className:"relative w-24 h-24 mb-6",children:[Qe.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Qe.jsx(QT.img,{src:"/logo.png",alt:"Logo",className:"w-14 h-14",animate:{scale:[1,1.1,1]},transition:{repeat:1/0,duration:2}})}),Qe.jsx(QT.div,{className:"absolute inset-0 rounded-full border-4 border-primary/30 border-t-primary",animate:{rotate:360},transition:{repeat:1/0,duration:1,ease:"linear"}})]}),Qe.jsx(QT.span,{className:"text-lg font-medium text-primary animate-pulse",initial:{opacity:0},animate:{opacity:1},children:"ang ti sn phm..."})]})}):f?Qe.jsxs("div",{className:"min-h-screen bg-background",children:[Qe.jsx("div",{className:"z-50 bg-background/95",children:Qe.jsx("div",{className:"container mx-auto px-4 py-3",children:Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsx(AP,{variant:"ghost",size:"icon",onClick:()=>t(-1),className:"hover:bg-accent",children:Qe.jsx(Zp,{className:"w-5 h-5"})}),Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx(AP,{variant:"ghost",size:"icon",onClick:()=>m(!p),className:"hover:bg-accent "+(p?"text-red-500":""),children:Qe.jsx(sf,{className:"w-5 h-5 "+(p?"fill-current":"")})}),Qe.jsx(AP,{variant:"ghost",size:"icon",className:"hover:bg-accent",children:Qe.jsx(ig,{className:"w-5 h-5"})})]})]})})}),Qe.jsxs("div",{className:"container mx-auto px-4 py-8",children:[Qe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12",children:[Qe.jsxs(QT.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},className:"space-y-4",children:[Qe.jsxs("div",{className:"relative bg-white rounded-2xl overflow-hidden shadow-2xl aspect-square group",children:[Qe.jsx(eM,{mode:"wait",children:Qe.jsx(QT.img,{src:f.images[n],alt:f.name,className:"w-full h-full object-cover",initial:{opacity:0,scale:1.1},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3}},n)}),f.discount>0&&Qe.jsx(QT.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},className:"absolute top-4 left-4",children:Qe.jsxs(EP,{className:"bg-gradient-to-r from-red-500 to-pink-500 text-white text-lg px-4 py-2 shadow-lg",children:[Qe.jsx(pg,{className:"w-4 h-4 mr-1"}),"-",f.discount,"%"]})}),1===f.flash_sale&&Qe.jsx(QT.div,{animate:{scale:[1,1.05,1]},transition:{repeat:1/0,duration:1.5},className:"absolute top-4 right-4",children:Qe.jsx(EP,{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white text-sm px-3 py-1.5 shadow-lg",children:" Flash Sale"})}),Qe.jsx(AP,{variant:"ghost",size:"icon",onClick:()=>{r(e=>(e-1+f.images.length)%f.images.length)},className:"absolute left-4 top-1/2 -translate-y-1/2 bg-background hover:bg-background/90 shadow-lg opacity-0 group-hover:opacity-100 transition-all rounded-full",children:Qe.jsx(xm,{className:"w-6 h-6"})}),Qe.jsx(AP,{variant:"ghost",size:"icon",onClick:()=>{r(e=>(e+1)%f.images.length)},className:"absolute right-4 top-1/2 -translate-y-1/2 bg-background hover:bg-background/90 shadow-lg opacity-0 group-hover:opacity-100 transition-all rounded-full",children:Qe.jsx(ym,{className:"w-6 h-6"})}),Qe.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/70 text-white px-3 py-1.5 rounded-full text-sm backdrop-blur-sm",children:[n+1," / ",f.images.length]})]}),Qe.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-hide",children:f.images.map((e,t)=>Qe.jsx(QT.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>r(t),className:"flex-shrink-0 w-20 h-20 rounded-xl overflow-hidden border-3 transition-all shadow-md "+(n===t?"border-primary ring-2 ring-primary/50":"border-transparent hover:border-primary/30"),children:Qe.jsx("img",{src:e,alt:`${f.name} ${t+1}`,className:"w-full h-full object-cover"})},t))})]}),Qe.jsxs(QT.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"space-y-6",children:[Qe.jsxs("div",{className:"space-y-3",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[f.brand&&Qe.jsxs(EP,{variant:"outline",className:"text-sm px-3 py-1",children:[Qe.jsx(gg,{className:"w-3 h-3 mr-1"}),f.brand]}),1===f.flash_sale&&Qe.jsxs(EP,{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white",children:[Qe.jsx(Sg,{className:"w-3 h-3 mr-1"}),"Best Seller"]})]}),Qe.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-foreground leading-tight",children:f.name}),Qe.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[Qe.jsxs("div",{className:"flex items-center gap-2 bg-yellow-50 dark:bg-yellow-900/20 px-3 py-1.5 rounded-lg",children:[Qe.jsx("div",{className:"flex items-center gap-1",children:E(Math.floor(f.rating))}),Qe.jsx("span",{className:"font-bold text-lg",children:f.rating})]}),Qe.jsx(ZR,{orientation:"vertical",className:"h-6"}),Qe.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[Qe.jsx(Cf,{className:"w-4 h-4"}),Qe.jsxs("span",{className:"font-medium",children:[(null==w?void 0:w.total_reviews)||0," nh gi"]})]}),Qe.jsx(ZR,{orientation:"vertical",className:"h-6"}),Qe.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[Qe.jsx(Rf,{className:"w-4 h-4"}),Qe.jsxs("span",{className:"font-medium",children:[" bn ",f.sold]})]})]})]}),Qe.jsx(DP,{className:"bg-gradient-to-r from-primary/5 to-primary/10 border-primary/20",children:Qe.jsxs(UP,{className:"p-6",children:[Qe.jsxs("div",{className:"flex items-baseline gap-4 mb-2",children:[Qe.jsx("span",{className:"text-4xl font-bold text-primary bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent",children:k(f.price)}),f.originalPrice&&Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx("span",{className:"text-xl text-muted-foreground line-through",children:k(f.originalPrice)}),Qe.jsxs(EP,{variant:"destructive",className:"animate-pulse",children:["Tit kim ",k(f.originalPrice-f.price)]})]})]}),Qe.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[Qe.jsx(Em,{className:"w-4 h-4"}),"Gi  bao gm VAT"]})]})}),f.sizes&&f.sizes.filter(e=>""!==e.trim()).length>0&&Qe.jsxs(QT.div,{initial:{opacity:0},animate:{opacity:1},children:[Qe.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[Qe.jsx(tm,{className:"w-5 h-5 text-primary"}),"Kch thc"]}),Qe.jsx("div",{className:"flex gap-2 flex-wrap",children:f.sizes.filter(e=>""!==e.trim()).map(e=>Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsx(AP,{variant:c===e?"default":"outline",size:"lg",onClick:()=>d(e),className:"min-w-[60px] font-semibold "+(c===e?"bg-gradient-primary shadow-lg":"hover:border-primary"),children:e})},e))})]}),f.colors&&f.colors.filter(e=>""!==e.trim()).length>0&&Qe.jsxs(QT.div,{initial:{opacity:0},animate:{opacity:1},children:[Qe.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[Qe.jsx(pg,{className:"w-5 h-5 text-primary"}),"Mu sc"]}),Qe.jsx("div",{className:"flex gap-2 flex-wrap",children:f.colors.filter(e=>""!==e.trim()).map(e=>Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsx(AP,{variant:u===e?"default":"outline",size:"lg",onClick:()=>h(e),className:"font-semibold "+(u===e?"bg-gradient-primary shadow-lg":"hover:border-primary"),children:e})},e))})]}),Qe.jsxs("div",{children:[Qe.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[Qe.jsx(Rf,{className:"w-5 h-5 text-primary"}),"S lng"]}),Qe.jsxs("div",{className:"flex items-center gap-4",children:[Qe.jsxs("div",{className:"flex items-center border-2 border-primary/20 rounded-xl overflow-hidden bg-background shadow-sm",children:[Qe.jsx(AP,{variant:"ghost",size:"icon",onClick:()=>l(Math.max(1,o-1)),className:"h-12 w-12 hover:bg-primary/10 hover:text-primary rounded-none",children:Qe.jsx(Tf,{className:"w-5 h-5"})}),Qe.jsx("span",{className:"px-6 py-3 min-w-[80px] text-center font-bold text-lg",children:o}),Qe.jsx(AP,{variant:"ghost",size:"icon",onClick:()=>l(o+1),className:"h-12 w-12 hover:bg-primary/10 hover:text-primary rounded-none",children:Qe.jsx(Wf,{className:"w-5 h-5"})})]}),Qe.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground bg-muted/50 px-4 py-2 rounded-lg",children:[Qe.jsx(_m,{className:"w-4 h-4 text-green-500"}),Qe.jsxs("span",{className:"font-medium",children:["Cn li ",f.inStock," sn phm"]})]})]})]}),Qe.jsxs("div",{className:"space-y-3",children:[Qe.jsx(QT.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:Qe.jsxs(AP,{size:"lg",className:"w-full bg-gradient-primary hover:opacity-90 shadow-lg text-lg h-14",onClick:()=>{var e;o<1||o>f.inStock?A({title:"S lng khng hp l!",description:`Vui lng chn s lng t 1 n ${f.inStock}`,variant:"destructive"}):(i({id:f.id,name:f.name,price:f.price,originalPrice:f.originalPrice,image:(null==(e=f.images)?void 0:e[0])||"",quantity:o,seller_id:f.seller_id,size:c,color:u}),s(!0),A({title:" thm vo gi hng!",description:`${f.name} x${o}`,duration:2e3}))},children:[Qe.jsx(cg,{className:"w-5 h-5 mr-2"}),"Thm vo gi hng"]})}),Qe.jsx(QT.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:Qe.jsxs(AP,{variant:"outline",size:"lg",className:"w-full border-2 border-primary text-primary hover:bg-primary hover:text-white text-lg h-14 font-semibold",onClick:()=>{QI.loading("ang chuyn n trang thanh ton...",{duration:1500,position:"top-center"}),setTimeout(()=>{var e;t("/checkout",{state:{products:[{...f,seller_id:f.seller_id,image:(null==(e=f.images)?void 0:e[0])||f.image||"",selectedSize:c,selectedColor:u,quantity:o,shipping_fee:f.shipping_fee}]}})},1e3)},children:[Qe.jsx(_f,{className:"w-5 h-5 mr-2"}),"Mua ngay"]})})]}),Qe.jsx(DP,{className:"border-2 border-primary/20 shadow-lg",children:Qe.jsx(UP,{className:"p-5",children:Qe.jsxs("div",{className:"space-y-4",children:[Qe.jsxs("div",{className:"flex items-start gap-4 group hover:bg-green-50 dark:hover:bg-green-900/10 p-3 rounded-lg transition-all",children:[Qe.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/20 rounded-lg",children:Qe.jsx(Mg,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),Qe.jsxs("div",{className:"flex-1",children:[Qe.jsx("p",{className:"font-semibold text-foreground mb-1",children:"Min ph vn chuyn"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"n hng t 200.000  Giao hng trong 2-3 ngy"})]})]}),Qe.jsxs("div",{className:"flex items-start gap-4 group hover:bg-blue-50 dark:hover:bg-blue-900/10 p-3 rounded-lg transition-all",children:[Qe.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:Qe.jsx(Xf,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),Qe.jsxs("div",{className:"flex-1",children:[Qe.jsx("p",{className:"font-semibold text-foreground mb-1",children:"i tr trong 7 ngy"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Min ph i tr  Hon tin 100%"})]})]}),Qe.jsxs("div",{className:"flex items-start gap-4 group hover:bg-purple-50 dark:hover:bg-purple-900/10 p-3 rounded-lg transition-all",children:[Qe.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:Qe.jsx(sg,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),Qe.jsxs("div",{className:"flex-1",children:[Qe.jsx("p",{className:"font-semibold text-foreground mb-1",children:"Bo hnh cht lng"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Cam kt chnh hng 100%"})]})]})]})})})]})]}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-12",children:Qe.jsxs(tae,{defaultValue:"description",className:"w-full",children:[Qe.jsxs(nae,{className:"grid w-full grid-cols-4 h-14 bg-muted/50 p-1 rounded-xl",children:[Qe.jsx(rae,{value:"description",className:"text-base font-semibold data-[state=active]:bg-gradient-primary data-[state=active]:text-white rounded-lg",children:"M t"}),Qe.jsx(rae,{value:"specifications",className:"text-base font-semibold data-[state=active]:bg-gradient-primary data-[state=active]:text-white rounded-lg",children:"Thng s"}),Qe.jsxs(rae,{value:"reviews",className:"text-base font-semibold data-[state=active]:bg-gradient-primary data-[state=active]:text-white rounded-lg",children:["nh gi ",w&&w.total_reviews>0&&`(${w.total_reviews})`]}),Qe.jsx(rae,{value:"shipping",className:"text-base font-semibold data-[state=active]:bg-gradient-primary data-[state=active]:text-white rounded-lg",children:"Vn chuyn"})]}),Qe.jsx(iae,{value:"description",className:"mt-6",children:Qe.jsx(DP,{children:Qe.jsxs(UP,{className:"p-6",children:[Qe.jsx("p",{className:"text-muted-foreground mb-4",children:f.description}),f.features&&f.features.length>0&&Qe.jsxs(Qe.Fragment,{children:[Qe.jsx("h4",{className:"font-semibold mb-3",children:"c im ni bt:"}),Qe.jsx("ul",{className:"space-y-2",children:f.features.map((e,t)=>Qe.jsxs("li",{className:"flex items-start gap-2",children:[Qe.jsx("div",{className:"w-1.5 h-1.5 bg-primary rounded-full mt-2 flex-shrink-0"}),Qe.jsx("span",{className:"text-muted-foreground",children:e})]},t))})]})]})})}),Qe.jsx(iae,{value:"specifications",className:"mt-6",children:Qe.jsx(DP,{children:Qe.jsxs(UP,{className:"p-6",children:[f.specifications&&Object.keys(f.specifications).length>0?Qe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Qe.jsxs("div",{className:"space-y-4",children:[Qe.jsx("h4",{className:"font-semibold text-lg mb-4 text-primary border-b pb-2",children:"Thng tin c bn"}),f.sku&&Qe.jsxs("div",{className:"flex justify-between py-3 border-b border-border",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"M SKU"}),Qe.jsx("span",{className:"font-medium text-right",children:f.sku})]}),f.brand&&Qe.jsxs("div",{className:"flex justify-between py-3 border-b border-border",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"Thng hiu"}),Qe.jsx("span",{className:"font-medium text-right",children:f.brand})]}),f.category&&Qe.jsxs("div",{className:"flex justify-between py-3 border-b border-border",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"Danh mc"}),Qe.jsx("span",{className:"font-medium text-right",children:f.category})]}),f.material&&Qe.jsxs("div",{className:"flex justify-between py-3 border-b border-border",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"Cht liu"}),Qe.jsx("span",{className:"font-medium text-right",children:f.material})]}),f.origin&&Qe.jsxs("div",{className:"flex justify-between py-3 border-b border-border",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"Xut x"}),Qe.jsx("span",{className:"font-medium text-right",children:f.origin})]}),f.colors&&f.colors.length>0&&Qe.jsxs("div",{className:"flex justify-between py-3 border-b border-border",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"Mu sc"}),Qe.jsx("span",{className:"font-medium text-right",children:Array.isArray(f.colors)?f.colors.join(", "):f.colors})]}),f.sizes&&f.sizes.length>0&&Qe.jsxs("div",{className:"flex justify-between py-3 border-b border-border",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"Kch c"}),Qe.jsx("span",{className:"font-medium text-right",children:Array.isArray(f.sizes)?f.sizes.join(", "):f.sizes})]})]}),Qe.jsxs("div",{className:"space-y-4",children:[Qe.jsx("h4",{className:"font-semibold text-lg mb-4 text-primary border-b pb-2",children:"Kch thc & Vn chuyn"}),f.weight&&Qe.jsxs("div",{className:"flex justify-between py-3 border-b border-border",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"Trng lng"}),Qe.jsxs("span",{className:"font-medium text-right",children:[f.weight,"g"]})]}),(f.length||f.width||f.height)&&Qe.jsxs("div",{className:"flex justify-between py-3 border-b border-border",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"Kch thc (DRC)"}),Qe.jsxs("span",{className:"font-medium text-right",children:[f.length||"-","  ",f.width||"-","  ",f.height||"-"," cm"]})]}),null!==f.shipping_fee&&void 0!==f.shipping_fee&&Qe.jsxs("div",{className:"flex justify-between py-3 border-b border-border",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"Ph vn chuyn"}),Qe.jsx("span",{className:"font-medium text-right",children:0===f.shipping_fee?Qe.jsx(EP,{variant:"secondary",children:"Min ph"}):k(f.shipping_fee)})]}),null!==f.inStock&&void 0!==f.inStock&&Qe.jsxs("div",{className:"flex justify-between py-3 border-b border-border",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"Tn kho"}),Qe.jsxs("span",{className:"font-medium text-right",children:[f.inStock," sn phm"]})]}),f.status&&Qe.jsxs("div",{className:"flex justify-between py-3 border-b border-border",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"Trng thi"}),Qe.jsx(EP,{variant:"active"===f.status?"default":"secondary",children:"active"===f.status?" ang bn":"inactive"===f.status?"Tm ngng":" xa"})]}),1===f.flash_sale&&Qe.jsxs("div",{className:"flex justify-between py-3 border-b border-border",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"u i"}),Qe.jsx(EP,{variant:"destructive",className:"animate-pulse",children:" Flash Sale"})]}),f.tags&&Qe.jsxs("div",{className:"py-3 border-b border-border",children:[Qe.jsx("span",{className:"text-muted-foreground block mb-2",children:"Tags"}),Qe.jsx("div",{className:"flex flex-wrap gap-2",children:(()=>{let e=[];return Array.isArray(f.tags)?e=f.tags:"string"==typeof f.tags&&f.tags.trim()&&(e=f.tags.split(",")),e.map((e,t)=>Qe.jsx(EP,{variant:"outline",className:"text-xs",children:e.trim()},t))})()})]})]})]}):Qe.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Khng c thng s k thut"}),(f.seller_name||f.seller_id)&&Qe.jsxs("div",{className:"mt-8 pt-6 border-t border-border",children:[Qe.jsx("h4",{className:"font-semibold text-lg mb-4 text-primary",children:"Thng tin ngi bn"}),Qe.jsxs("div",{className:"flex items-center gap-4 bg-muted/30 p-4 rounded-lg",children:[f.seller_avatar&&Qe.jsxs(AD,{className:"w-16 h-16 border-2 border-primary",children:[Qe.jsx(MD,{src:f.seller_avatar}),Qe.jsx(ED,{className:"bg-primary/10",children:Qe.jsx(Pg,{className:"w-8 h-8 text-primary"})})]}),Qe.jsxs("div",{className:"flex-1",children:[f.seller_name&&Qe.jsx("p",{className:"font-semibold text-lg",children:f.seller_name}),f.seller_id&&Qe.jsxs("p",{className:"text-sm text-muted-foreground",children:["ID: ",f.seller_id]})]}),Qe.jsx(AP,{variant:"outline",size:"sm",onClick:()=>t(`/seller/${f.seller_id}`),children:"Xem shop"})]})]})]})})}),Qe.jsx(iae,{value:"reviews",className:"mt-6",children:Qe.jsx("div",{className:"space-y-6",children:N?Qe.jsx("div",{className:"flex justify-center py-12",children:Qe.jsx(vf,{className:"w-8 h-8 animate-spin text-primary"})}):w&&w.total_reviews>0?Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(DP,{children:Qe.jsx(UP,{className:"p-6",children:Qe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[Qe.jsxs("div",{className:"flex flex-col items-center justify-center text-center border-r",children:[Qe.jsx("div",{className:"text-5xl font-bold text-primary mb-2",children:w.avg_rating.toFixed(1)}),Qe.jsx("div",{className:"flex items-center justify-center gap-1 mb-2",children:E(Math.round(w.avg_rating))}),Qe.jsxs("p",{className:"text-sm text-muted-foreground",children:[w.total_reviews," nh gi"]})]}),Qe.jsx("div",{className:"space-y-3",children:w.rating_distribution.map(e=>Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsxs("div",{className:"flex items-center gap-1 w-16",children:[Qe.jsx("span",{className:"text-sm font-medium",children:e.stars}),Qe.jsx(fg,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"})]}),Qe.jsx(bae,{value:e.percentage,className:"flex-1 h-2"}),Qe.jsx("span",{className:"text-sm text-muted-foreground w-16 text-right",children:e.count})]},e.stars))})]})})}),Qe.jsx("div",{className:"space-y-4",children:y.map(e=>Qe.jsx(DP,{children:Qe.jsx(UP,{className:"p-6",children:Qe.jsxs("div",{className:"flex items-start gap-4",children:[Qe.jsxs(AD,{className:"w-12 h-12",children:[Qe.jsx(MD,{src:e.avatar_url,alt:e.user_name}),Qe.jsx(ED,{className:"bg-primary/10",children:Qe.jsx(Pg,{className:"w-6 h-6 text-primary"})})]}),Qe.jsxs("div",{className:"flex-1 space-y-3",children:[Qe.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[Qe.jsx("span",{className:"font-semibold text-foreground",children:e.user_name}),Qe.jsx("div",{className:"flex items-center gap-1",children:E(Math.round(e.rating))}),Qe.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",e.time_ago]})]}),e.comment&&Qe.jsx("p",{className:"text-sm text-foreground leading-relaxed",children:e.comment}),e.images&&e.images.length>0&&Qe.jsx("div",{className:"flex gap-2 flex-wrap",children:e.images.map((e,t)=>Qe.jsxs("div",{className:"relative group cursor-pointer overflow-hidden rounded-lg border-2 border-gray-200 hover:border-primary transition-colors",onClick:()=>C(e),children:[Qe.jsx("img",{src:e,alt:`Review ${t+1}`,className:"w-24 h-24 object-cover transition-transform group-hover:scale-110",onError:e=>{e.target.src="/placeholder-image.jpg"}}),Qe.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:Qe.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:Qe.jsx("div",{className:"w-8 h-8 rounded-full bg-white/90 flex items-center justify-center",children:Qe.jsx("svg",{className:"w-4 h-4 text-gray-800",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Qe.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})})})})]},t))}),Qe.jsxs("div",{className:"flex items-center gap-4 pt-2",children:[Qe.jsxs(AP,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-primary h-8 px-3",children:[Qe.jsx(bg,{className:"w-4 h-4 mr-1.5"}),"Hu ch (",e.likes,")"]}),Qe.jsxs(AP,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-primary h-8 px-3",children:[Qe.jsx(Cf,{className:"w-4 h-4 mr-1.5"}),"Tr li"]})]})]})]})})},e.id))})]}):Qe.jsx(DP,{children:Qe.jsx(UP,{className:"p-12 text-center",children:Qe.jsxs("div",{className:"flex flex-col items-center",children:[Qe.jsx(Cf,{className:"w-16 h-16 mb-4 text-muted-foreground opacity-50"}),Qe.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Cha c nh gi no"}),Qe.jsx("p",{className:"text-muted-foreground",children:"Hy l ngi u tin nh gi sn phm ny"})]})})})})}),Qe.jsx(iae,{value:"shipping",className:"mt-6",children:Qe.jsx(DP,{children:Qe.jsx(UP,{className:"p-6",children:Qe.jsxs("div",{className:"space-y-6",children:[Qe.jsxs("div",{children:[Qe.jsx("h4",{className:"font-semibold mb-3",children:"Chnh sch vn chuyn"}),Qe.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[Qe.jsx("li",{children:" Min ph vn chuyn cho n hng t 200.000"}),Qe.jsx("li",{children:" Giao hng trong 2-3 ngy lm vic"}),Qe.jsx("li",{children:" H tr giao hng ton quc"}),Qe.jsx("li",{children:" ng gi cn thn, m bo sn phm nguyn vn"})]})]}),Qe.jsx(ZR,{}),Qe.jsxs("div",{children:[Qe.jsx("h4",{className:"font-semibold mb-3",children:"Chnh sch i tr"}),Qe.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[Qe.jsx("li",{children:" i tr min ph trong 7 ngy"}),Qe.jsx("li",{children:" Sn phm cha qua s dng, cn nguyn tem mc"}),Qe.jsx("li",{children:" Hon tin 100% nu sn phm li t nh sn xut"}),Qe.jsx("li",{children:" H tr i size min ph"})]})]})]})})})})]})}),Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"mt-16",children:[Qe.jsxs("div",{className:"flex items-center justify-between mb-8",children:[Qe.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent",children:"Sn phm tng t"}),Qe.jsx(AP,{variant:"link",className:"text-primary font-semibold",children:"Xem tt c "})]}),Qe.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[{id:2,name:"o polo classic",price:"399.000",image:"https://images.unsplash.com/photo-1562157873-818bc0726f68?w=300&h=300&fit=crop",rating:4.7},{id:3,name:"Qun jean slim fit",price:"599.000",image:"https://images.unsplash.com/photo-1542272604-787c3835535d?w=300&h=300&fit=crop",rating:4.9},{id:4,name:"o hoodie unisex",price:"499.000",image:"https://images.unsplash.com/photo-1556821840-3a63f95609a7?w=300&h=300&fit=crop",rating:4.6}].map((e,n)=>Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*n},whileHover:{y:-8},className:"group cursor-pointer",onClick:()=>t(`/product/${e.id}`),children:Qe.jsxs(DP,{className:"bg-gradient-card border-border hover:shadow-2xl transition-all duration-300 overflow-hidden",children:[Qe.jsxs("div",{className:"relative aspect-square overflow-hidden bg-muted",children:[Qe.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]}),Qe.jsxs(UP,{className:"p-5",children:[Qe.jsx("h3",{className:"font-semibold text-foreground group-hover:text-primary transition-colors mb-3 line-clamp-2",children:e.name}),Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("span",{className:"text-xl font-bold text-primary",children:[e.price,""]}),Qe.jsxs("div",{className:"flex items-center gap-1 bg-yellow-50 dark:bg-yellow-900/20 px-2 py-1 rounded-lg",children:[Qe.jsx(fg,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),Qe.jsx("span",{className:"text-sm font-semibold",children:e.rating})]})]})]})]})},e.id))})]})]})]}):Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center min-h-[60vh]",children:Qe.jsxs("div",{className:"text-center max-w-md mx-auto p-8",children:[Qe.jsx(QT.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",duration:.5},children:Qe.jsx(Cg,{className:"w-20 h-20 mb-6 text-destructive mx-auto"})}),Qe.jsx("h2",{className:"text-3xl font-bold mb-3",children:"Khng tm thy sn phm"}),Qe.jsx("p",{className:"text-muted-foreground mb-8",children:"Sn phm ny khng tn ti hoc  b xa khi h thng."}),Qe.jsxs(AP,{onClick:()=>t(-1),className:"bg-gradient-primary hover:opacity-90",size:"lg",children:[Qe.jsx(Zp,{className:"w-4 h-4 mr-2"}),"Quay v trang trc"]})]})})};var Tle=Ve.forwardRef((e,t)=>Qe.jsx(Th.label,{...e,ref:t,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||(null==(n=e.onMouseDown)||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));Tle.displayName="Label";var Ple=Tle;const Ole=Vp("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Rle=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(Ple,{ref:n,className:Rv(Ole(),e),...t}));Rle.displayName=Ple.displayName;var Ile="Radio",[Dle,Lle]=jh(Ile),[Ble,Fle]=Dle(Ile),Ule=Ve.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:i=!1,required:a,disabled:s,value:o="on",onCheck:l,form:c,...d}=e,[u,h]=Ve.useState(null),p=wh(t,e=>h(e)),m=Ve.useRef(!1),f=!u||(c||!!u.closest("form"));return Qe.jsxs(Ble,{scope:n,checked:i,disabled:s,children:[Qe.jsx(Th.button,{type:"button",role:"radio","aria-checked":i,"data-state":Gle(i),"data-disabled":s?"":void 0,disabled:s,value:o,...d,ref:p,onClick:xh(e.onClick,e=>{i||null==l||l(),f&&(m.current=e.isPropagationStopped(),m.current||e.stopPropagation())})}),f&&Qe.jsx(Vle,{control:u,bubbles:!m.current,name:r,value:o,checked:i,required:a,disabled:s,form:c,style:{transform:"translateX(-100%)"}})]})});Ule.displayName=Ile;var zle="RadioIndicator",Hle=Ve.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...i}=e,a=Fle(zle,n);return Qe.jsx(qh,{present:r||a.checked,children:Qe.jsx(Th.span,{"data-state":Gle(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t})})});Hle.displayName=zle;var Vle=Ve.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...i},a)=>{const s=Ve.useRef(null),o=wh(s,a),l=Yne(n),c=vb(t);return Ve.useEffect(()=>{const e=s.current;if(!e)return;const t=window.HTMLInputElement.prototype,i=Object.getOwnPropertyDescriptor(t,"checked").set;if(l!==n&&i){const t=new Event("click",{bubbles:r});i.call(e,n),e.dispatchEvent(t)}},[l,n,r]),Qe.jsx(Th.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:o,style:{...i.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function Gle(e){return e?"checked":"unchecked"}Vle.displayName="RadioBubbleInput";var Wle=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Kle="RadioGroup",[qle]=jh(Kle,[Aie,Lle]),Xle=Aie(),$le=Lle(),[Yle,Jle]=qle(Kle),Zle=Ve.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:i,value:a,required:s=!1,disabled:o=!1,orientation:l,dir:c,loop:d=!0,onValueChange:u,...h}=e,p=Xle(n),m=$ne(c),[f,g]=Yh({prop:a,defaultProp:i??null,onChange:u,caller:Kle});return Qe.jsx(Yle,{scope:n,name:r,required:s,disabled:o,value:f,onValueChange:g,children:Qe.jsx(Die,{asChild:!0,...p,orientation:l,dir:m,loop:d,children:Qe.jsx(Th.div,{role:"radiogroup","aria-required":s,"aria-orientation":l,"data-disabled":o?"":void 0,dir:m,...h,ref:t})})})});Zle.displayName=Kle;var Qle="RadioGroupItem",ece=Ve.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...i}=e,a=Jle(Qle,n),s=a.disabled||r,o=Xle(n),l=$le(n),c=Ve.useRef(null),d=wh(t,c),u=a.value===i.value,h=Ve.useRef(!1);return Ve.useEffect(()=>{const e=e=>{Wle.includes(e.key)&&(h.current=!0)},t=()=>h.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),Qe.jsx(Lie,{asChild:!0,...o,focusable:!s,active:u,children:Qe.jsx(Ule,{disabled:s,required:a.required,checked:u,...l,...i,name:a.name,ref:d,onCheck:()=>a.onValueChange(i.value),onKeyDown:xh(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:xh(i.onFocus,()=>{var e;h.current&&(null==(e=c.current)||e.click())})})})});ece.displayName=Qle;var tce=Ve.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,i=$le(n);return Qe.jsx(Hle,{...i,...r,ref:t})});tce.displayName="RadioGroupIndicator";var nce=Zle,rce=ece,ice=tce;const ace=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(nce,{className:Rv("grid gap-2",e),...t,ref:n}));ace.displayName=nce.displayName;const sce=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(rce,{ref:n,className:Rv("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:Qe.jsx(ice,{className:"flex items-center justify-center",children:Qe.jsx(Mm,{className:"h-2.5 w-2.5 fill-current text-current"})})}));sce.displayName=rce.displayName;var oce=.999,lce=/[\\\/_+.#"@\[\(\{&]/,cce=/[\\\/_+.#"@\[\(\{&]/g,dce=/[\s-]/,uce=/[\s-]/g;function hce(e,t,n,r,i,a,s){if(a===t.length)return i===e.length?1:.99;var o=`${i},${a}`;if(void 0!==s[o])return s[o];for(var l,c,d,u,h=r.charAt(a),p=n.indexOf(h,i),m=0;p>=0;)(l=hce(e,t,n,r,p+1,a+1,s))>m&&(p===i?l*=1:lce.test(e.charAt(p-1))?(l*=.8,(d=e.slice(i,p-1).match(cce))&&i>0&&(l*=Math.pow(oce,d.length))):dce.test(e.charAt(p-1))?(l*=.9,(u=e.slice(i,p-1).match(uce))&&i>0&&(l*=Math.pow(oce,u.length))):(l*=.17,i>0&&(l*=Math.pow(oce,p-i))),e.charAt(p)!==t.charAt(a)&&(l*=.9999)),(l<.1&&n.charAt(p-1)===r.charAt(a+1)||r.charAt(a+1)===r.charAt(a)&&n.charAt(p-1)!==r.charAt(a))&&(.1*(c=hce(e,t,n,r,p+1,a+2,s))>l&&(l=.1*c)),l>m&&(m=l),p=n.indexOf(h,p+1);return s[o]=m,m}function pce(e){return e.toLowerCase().replace(uce," ")}function mce(e,t,n){return hce(e=n&&n.length>0?""+(e+" "+n.join(" ")):e,t,pce(e),pce(t),0,0,{})}var fce='[cmdk-group=""]',gce='[cmdk-group-items=""]',vce='[cmdk-item=""]',xce=`${vce}:not([aria-disabled="true"])`,yce="cmdk-item-select",bce="data-value",wce=(e,t,n)=>mce(e,t,n),jce=Ve.createContext(void 0),Nce=()=>Ve.useContext(jce),_ce=Ve.createContext(void 0),Sce=()=>Ve.useContext(_ce),Cce=Ve.createContext(void 0),Ace=Ve.forwardRef((e,t)=>{let n=zce(()=>{var t,n;return{search:"",value:null!=(n=null!=(t=e.value)?t:e.defaultValue)?n:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=zce(()=>new Set),i=zce(()=>new Map),a=zce(()=>new Map),s=zce(()=>new Set),o=Fce(e),{label:l,children:c,value:d,onValueChange:u,filter:h,shouldFilter:p,loop:m,disablePointerSelection:f=!1,vimBindings:g=!0,...v}=e,x=Sx(),y=Sx(),b=Sx(),w=Ve.useRef(null),j=Gce();Uce(()=>{if(void 0!==d){let e=d.trim();n.current.value=e,N.emit()}},[d]),Uce(()=>{j(6,E)},[]);let N=Ve.useMemo(()=>({subscribe:e=>(s.current.add(e),()=>s.current.delete(e)),snapshot:()=>n.current,setState:(e,t,r)=>{var i,a,s,l;if(!Object.is(n.current[e],t)){if(n.current[e]=t,"search"===e)M(),C(),j(1,A);else if("value"===e){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let e=document.getElementById(b);e?e.focus():null==(i=document.getElementById(x))||i.focus()}if(j(7,()=>{var e;n.current.selectedItemId=null==(e=k())?void 0:e.id,N.emit()}),r||j(5,E),void 0!==(null==(a=o.current)?void 0:a.value)){let e=null!=t?t:"";return void(null==(l=(s=o.current).onValueChange)||l.call(s,e))}}N.emit()}},emit:()=>{s.current.forEach(e=>e())}}),[]),_=Ve.useMemo(()=>({value:(e,t,r)=>{var i;t!==(null==(i=a.current.get(e))?void 0:i.value)&&(a.current.set(e,{value:t,keywords:r}),n.current.filtered.items.set(e,S(t,r)),j(2,()=>{C(),N.emit()}))},item:(e,t)=>(r.current.add(e),t&&(i.current.has(t)?i.current.get(t).add(e):i.current.set(t,new Set([e]))),j(3,()=>{M(),C(),n.current.value||A(),N.emit()}),()=>{a.current.delete(e),r.current.delete(e),n.current.filtered.items.delete(e);let t=k();j(4,()=>{M(),(null==t?void 0:t.getAttribute("id"))===e&&A(),N.emit()})}),group:e=>(i.current.has(e)||i.current.set(e,new Set),()=>{a.current.delete(e),i.current.delete(e)}),filter:()=>o.current.shouldFilter,label:l||e["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:x,inputId:b,labelId:y,listInnerRef:w}),[]);function S(e,t){var r,i;let a=null!=(i=null==(r=o.current)?void 0:r.filter)?i:wce;return e?a(e,n.current.search,t):0}function C(){if(!n.current.search||!1===o.current.shouldFilter)return;let e=n.current.filtered.items,t=[];n.current.filtered.groups.forEach(n=>{let r=i.current.get(n),a=0;r.forEach(t=>{let n=e.get(t);a=Math.max(n,a)}),t.push([n,a])});let r=w.current;T().sort((t,n)=>{var r,i;let a=t.getAttribute("id"),s=n.getAttribute("id");return(null!=(r=e.get(s))?r:0)-(null!=(i=e.get(a))?i:0)}).forEach(e=>{let t=e.closest(gce);t?t.appendChild(e.parentElement===t?e:e.closest(`${gce} > *`)):r.appendChild(e.parentElement===r?e:e.closest(`${gce} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{var t;let n=null==(t=w.current)?void 0:t.querySelector(`${fce}[${bce}="${encodeURIComponent(e[0])}"]`);null==n||n.parentElement.appendChild(n)})}function A(){let e=T().find(e=>"true"!==e.getAttribute("aria-disabled")),t=null==e?void 0:e.getAttribute(bce);N.setState("value",t||void 0)}function M(){var e,t,s,l;if(!n.current.search||!1===o.current.shouldFilter)return void(n.current.filtered.count=r.current.size);n.current.filtered.groups=new Set;let c=0;for(let i of r.current){let r=S(null!=(t=null==(e=a.current.get(i))?void 0:e.value)?t:"",null!=(l=null==(s=a.current.get(i))?void 0:s.keywords)?l:[]);n.current.filtered.items.set(i,r),r>0&&c++}for(let[r,a]of i.current)for(let e of a)if(n.current.filtered.items.get(e)>0){n.current.filtered.groups.add(r);break}n.current.filtered.count=c}function E(){var e,t,n;let r=k();r&&((null==(e=r.parentElement)?void 0:e.firstChild)===r&&(null==(n=null==(t=r.closest(fce))?void 0:t.querySelector('[cmdk-group-heading=""]'))||n.scrollIntoView({block:"nearest"})),r.scrollIntoView({block:"nearest"}))}function k(){var e;return null==(e=w.current)?void 0:e.querySelector(`${vce}[aria-selected="true"]`)}function T(){var e;return Array.from((null==(e=w.current)?void 0:e.querySelectorAll(xce))||[])}function P(e){let t=T()[e];t&&N.setState("value",t.getAttribute(bce))}function O(e){var t;let n=k(),r=T(),i=r.findIndex(e=>e===n),a=r[i+e];null!=(t=o.current)&&t.loop&&(a=i+e<0?r[r.length-1]:i+e===r.length?r[0]:r[i+e]),a&&N.setState("value",a.getAttribute(bce))}function R(e){let t,n=k(),r=null==n?void 0:n.closest(fce);for(;r&&!t;)r=e>0?Lce(r,fce):Bce(r,fce),t=null==r?void 0:r.querySelector(xce);t?N.setState("value",t.getAttribute(bce)):O(e)}let I=()=>P(T().length-1),D=e=>{e.preventDefault(),e.metaKey?I():e.altKey?R(1):O(1)},L=e=>{e.preventDefault(),e.metaKey?P(0):e.altKey?R(-1):O(-1)};return Ve.createElement(Th.div,{ref:t,tabIndex:-1,...v,"cmdk-root":"",onKeyDown:e=>{var t;null==(t=v.onKeyDown)||t.call(v,e);let n=e.nativeEvent.isComposing||229===e.keyCode;if(!e.defaultPrevented&&!n)switch(e.key){case"n":case"j":g&&e.ctrlKey&&D(e);break;case"ArrowDown":D(e);break;case"p":case"k":g&&e.ctrlKey&&L(e);break;case"ArrowUp":L(e);break;case"Home":e.preventDefault(),P(0);break;case"End":e.preventDefault(),I();break;case"Enter":{e.preventDefault();let t=k();if(t){let e=new Event(yce);t.dispatchEvent(e)}}}}},Ve.createElement("label",{"cmdk-label":"",htmlFor:_.inputId,id:_.labelId,style:Kce},l),Wce(e,e=>Ve.createElement(_ce.Provider,{value:N},Ve.createElement(jce.Provider,{value:_},e))))}),Mce=Ve.forwardRef((e,t)=>{var n,r;let i=Sx(),a=Ve.useRef(null),s=Ve.useContext(Cce),o=Nce(),l=Fce(e),c=null!=(r=null==(n=l.current)?void 0:n.forceMount)?r:null==s?void 0:s.forceMount;Uce(()=>{if(!c)return o.item(i,null==s?void 0:s.id)},[c]);let d=Vce(i,a,[e.value,e.children,a],e.keywords),u=Sce(),h=Hce(e=>e.value&&e.value===d.current),p=Hce(e=>!(!c&&!1!==o.filter())||(!e.search||e.filtered.items.get(i)>0));function m(){var e,t;f(),null==(t=(e=l.current).onSelect)||t.call(e,d.current)}function f(){u.setState("value",d.current,!0)}if(Ve.useEffect(()=>{let t=a.current;if(t&&!e.disabled)return t.addEventListener(yce,m),()=>t.removeEventListener(yce,m)},[p,e.onSelect,e.disabled]),!p)return null;let{disabled:g,value:v,onSelect:x,forceMount:y,keywords:b,...w}=e;return Ve.createElement(Th.div,{ref:bh(a,t),...w,id:i,"cmdk-item":"",role:"option","aria-disabled":!!g,"aria-selected":!!h,"data-disabled":!!g,"data-selected":!!h,onPointerMove:g||o.getDisablePointerSelection()?void 0:f,onClick:g?void 0:m},e.children)}),Ece=Ve.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:i,...a}=e,s=Sx(),o=Ve.useRef(null),l=Ve.useRef(null),c=Sx(),d=Nce(),u=Hce(e=>!(!i&&!1!==d.filter())||(!e.search||e.filtered.groups.has(s)));Uce(()=>d.group(s),[]),Vce(s,o,[e.value,e.heading,l]);let h=Ve.useMemo(()=>({id:s,forceMount:i}),[i]);return Ve.createElement(Th.div,{ref:bh(o,t),...a,"cmdk-group":"",role:"presentation",hidden:!u||void 0},n&&Ve.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),Wce(e,e=>Ve.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},Ve.createElement(Cce.Provider,{value:h},e))))}),kce=Ve.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,i=Ve.useRef(null),a=Hce(e=>!e.search);return n||a?Ve.createElement(Th.div,{ref:bh(i,t),...r,"cmdk-separator":"",role:"separator"}):null}),Tce=Ve.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,i=null!=e.value,a=Sce(),s=Hce(e=>e.search),o=Hce(e=>e.selectedItemId),l=Nce();return Ve.useEffect(()=>{null!=e.value&&a.setState("search",e.value)},[e.value]),Ve.createElement(Th.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":o,id:l.inputId,type:"text",value:i?e.value:s,onChange:e=>{i||a.setState("search",e.target.value),null==n||n(e.target.value)}})}),Pce=Ve.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...i}=e,a=Ve.useRef(null),s=Ve.useRef(null),o=Hce(e=>e.selectedItemId),l=Nce();return Ve.useEffect(()=>{if(s.current&&a.current){let e,t=s.current,n=a.current,r=new ResizeObserver(()=>{e=requestAnimationFrame(()=>{let e=t.offsetHeight;n.style.setProperty("--cmdk-list-height",e.toFixed(1)+"px")})});return r.observe(t),()=>{cancelAnimationFrame(e),r.unobserve(t)}}},[]),Ve.createElement(Th.div,{ref:bh(a,t),...i,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":r,id:l.listId},Wce(e,e=>Ve.createElement("div",{ref:bh(s,l.listInnerRef),"cmdk-list-sizer":""},e)))}),Oce=Ve.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:i,contentClassName:a,container:s,...o}=e;return Ve.createElement(TR,{open:n,onOpenChange:r},Ve.createElement(OR,{container:s},Ve.createElement(RR,{"cmdk-overlay":"",className:i}),Ve.createElement(IR,{"aria-label":e.label,"cmdk-dialog":"",className:a},Ve.createElement(Ace,{ref:t,...o}))))}),Rce=Ve.forwardRef((e,t)=>Hce(e=>0===e.filtered.count)?Ve.createElement(Th.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Ice=Ve.forwardRef((e,t)=>{let{progress:n,children:r,label:i="Loading...",...a}=e;return Ve.createElement(Th.div,{ref:t,...a,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},Wce(e,e=>Ve.createElement("div",{"aria-hidden":!0},e)))}),Dce=Object.assign(Ace,{List:Pce,Item:Mce,Input:Tce,Group:Ece,Separator:kce,Dialog:Oce,Empty:Rce,Loading:Ice});function Lce(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function Bce(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function Fce(e){let t=Ve.useRef(e);return Uce(()=>{t.current=e}),t}var Uce="undefined"==typeof window?Ve.useEffect:Ve.useLayoutEffect;function zce(e){let t=Ve.useRef();return void 0===t.current&&(t.current=e()),t}function Hce(e){let t=Sce(),n=()=>e(t.snapshot());return Ve.useSyncExternalStore(t.subscribe,n,n)}function Vce(e,t,n,r=[]){let i=Ve.useRef(),a=Nce();return Uce(()=>{var s;let o=(()=>{var e;for(let t of n){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():i.current}})(),l=r.map(e=>e.trim());a.value(e,o,l),null==(s=t.current)||s.setAttribute(bce,o),i.current=o}),i}var Gce=()=>{let[e,t]=Ve.useState(),n=zce(()=>new Map);return Uce(()=>{n.current.forEach(e=>e()),n.current=new Map},[e]),(e,r)=>{n.current.set(e,r),t({})}};function Wce({asChild:e,children:t},n){return e&&Ve.isValidElement(t)?Ve.cloneElement(function(e){let t=e.type;return"function"==typeof t?t(e.props):"render"in t?t.render(e.props):e}(t),{ref:t.ref},n(t.props.children)):n(t)}var Kce={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const qce=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(Dce,{ref:n,className:Rv("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));qce.displayName=Dce.displayName;const Xce=Ve.forwardRef(({className:e,...t},n)=>Qe.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[Qe.jsx(eg,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),Qe.jsx(Dce.Input,{ref:n,className:Rv("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));Xce.displayName=Dce.Input.displayName;const $ce=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(Dce.List,{ref:n,className:Rv("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));$ce.displayName=Dce.List.displayName;const Yce=Ve.forwardRef((e,t)=>Qe.jsx(Dce.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));Yce.displayName=Dce.Empty.displayName;const Jce=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(Dce.Group,{ref:n,className:Rv("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));Jce.displayName=Dce.Group.displayName;Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(Dce.Separator,{ref:n,className:Rv("-mx-1 h-px bg-border",e),...t})).displayName=Dce.Separator.displayName;const Zce=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(Dce.Item,{ref:n,className:Rv("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));Zce.displayName=Dce.Item.displayName;var Qce="Popover",[ede]=jh(Qce,[bb]),tde=bb(),[nde,rde]=ede(Qce),ide=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:s=!1}=e,o=tde(t),l=Ve.useRef(null),[c,d]=Ve.useState(!1),[u,h]=Yh({prop:r,defaultProp:i??!1,onChange:a,caller:Qce});return Qe.jsx(Db,{...o,children:Qe.jsx(nde,{scope:t,contentId:Sx(),triggerRef:l,open:u,onOpenChange:h,onOpenToggle:Ve.useCallback(()=>h(e=>!e),[h]),hasCustomAnchor:c,onCustomAnchorAdd:Ve.useCallback(()=>d(!0),[]),onCustomAnchorRemove:Ve.useCallback(()=>d(!1),[]),modal:s,children:n})})};ide.displayName=Qce;var ade="PopoverAnchor";Ve.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=rde(ade,n),a=tde(n),{onCustomAnchorAdd:s,onCustomAnchorRemove:o}=i;return Ve.useEffect(()=>(s(),()=>o()),[s,o]),Qe.jsx(Lb,{...a,...r,ref:t})}).displayName=ade;var sde="PopoverTrigger",ode=Ve.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=rde(sde,n),a=tde(n),s=wh(t,i.triggerRef),o=Qe.jsx(Th.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":yde(i.open),...r,ref:s,onClick:xh(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?o:Qe.jsx(Lb,{asChild:!0,...a,children:o})});ode.displayName=sde;var lde="PopoverPortal",[cde,dde]=ede(lde,{forceMount:void 0}),ude=e=>{const{__scopePopover:t,forceMount:n,children:r,container:i}=e,a=rde(lde,t);return Qe.jsx(cde,{scope:t,forceMount:n,children:Qe.jsx(qh,{present:n||a.open,children:Qe.jsx(Kh,{asChild:!0,container:i,children:r})})})};ude.displayName=lde;var hde="PopoverContent",pde=Ve.forwardRef((e,t)=>{const n=dde(hde,e.__scopePopover),{forceMount:r=n.forceMount,...i}=e,a=rde(hde,e.__scopePopover);return Qe.jsx(qh,{present:r||a.open,children:a.modal?Qe.jsx(fde,{...i,ref:t}):Qe.jsx(gde,{...i,ref:t})})});pde.displayName=hde;var mde=_h("PopoverContent.RemoveScroll"),fde=Ve.forwardRef((e,t)=>{const n=rde(hde,e.__scopePopover),r=Ve.useRef(null),i=wh(t,r),a=Ve.useRef(!1);return Ve.useEffect(()=>{const e=r.current;if(e)return JO(e)},[]),Qe.jsx(GO,{as:mde,allowPinchZoom:!0,children:Qe.jsx(vde,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:xh(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),a.current||null==(t=n.triggerRef.current)||t.focus()}),onPointerDownOutside:xh(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;a.current=r},{checkForDefaultPrevented:!1}),onFocusOutside:xh(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),gde=Ve.forwardRef((e,t)=>{const n=rde(hde,e.__scopePopover),r=Ve.useRef(!1),i=Ve.useRef(!1);return Qe.jsx(vde,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var a,s;null==(a=e.onCloseAutoFocus)||a.call(e,t),t.defaultPrevented||(r.current||null==(s=n.triggerRef.current)||s.focus(),t.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:t=>{var a,s;null==(a=e.onInteractOutside)||a.call(e,t),t.defaultPrevented||(r.current=!0,"pointerdown"===t.detail.originalEvent.type&&(i.current=!0));const o=t.target;(null==(s=n.triggerRef.current)?void 0:s.contains(o))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})}),vde=Ve.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:s,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:d,...u}=e,h=rde(hde,n),p=tde(n);return nO(),Qe.jsx(XP,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:Qe.jsx(Fh,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:d,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1),children:Qe.jsx(Bb,{"data-state":yde(h.open),role:"dialog",id:h.contentId,...p,...u,ref:t,style:{...u.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),xde="PopoverClose";Ve.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=rde(xde,n);return Qe.jsx(Th.button,{type:"button",...r,ref:t,onClick:xh(e.onClick,()=>i.onOpenChange(!1))})}).displayName=xde;function yde(e){return e?"open":"closed"}Ve.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=tde(n);return Qe.jsx(Fb,{...i,...r,ref:t})}).displayName="PopoverArrow";var bde=ude,wde=pde;const jde=ide,Nde=ode,_de=Ve.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},i)=>Qe.jsx(bde,{children:Qe.jsx(wde,{ref:i,align:t,sideOffset:n,className:Rv("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));_de.displayName=wde.displayName;const Sde=({isVisible:e})=>{var t,n,r,i;const[a,s]=Ve.useState(0),o=[{icon:lg,text:"ang x l n hng...",color:"from-blue-500 to-cyan-500",description:"Kim tra thng tin"},{icon:sg,text:"Xc thc thanh ton...",color:"from-purple-500 to-pink-500",description:"Bo mt giao dch"},{icon:Rf,text:"Chun b n hng...",color:"from-orange-500 to-amber-500",description:"ng gi sn phm"},{icon:gm,text:"Hon tt!",color:"from-green-500 to-emerald-500",description:"Thnh cng"}];Ve.useEffect(()=>{if(!e)return void s(0);const t=[];return o.forEach((e,n)=>{const r=setTimeout(()=>{s(n)},1e3*n);t.push(r)}),()=>t.forEach(e=>clearTimeout(e))},[e]);const l=(null==(t=o[a])?void 0:t.icon)||lg,c=(null==(n=o[a])?void 0:n.text)||"ang x l...",d=(null==(r=o[a])?void 0:r.color)||"from-blue-500 to-cyan-500",u=(null==(i=o[a])?void 0:i.description)||"";return Qe.jsx(eM,{children:e&&Qe.jsxs(QT.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/90 backdrop-blur-xl",style:{willChange:"opacity",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"},children:[Qe.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[Qe.jsx(QT.div,{animate:{scale:[1,1.3,1],x:[0,100,0],y:[0,-50,0],opacity:[.4,.6,.4]},transition:{duration:8,repeat:1/0,ease:"easeInOut"},className:"absolute top-1/4 left-1/4 w-96 h-96 bg-gradient-to-br from-primary/30 to-purple-600/30 rounded-full blur-3xl"}),Qe.jsx(QT.div,{animate:{scale:[1.3,1,1.3],x:[0,-100,0],y:[0,50,0],opacity:[.6,.4,.6]},transition:{duration:8,repeat:1/0,ease:"easeInOut"},className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-gradient-to-br from-blue-500/30 to-cyan-500/30 rounded-full blur-3xl"}),[...Array(20)].map((e,t)=>Qe.jsx(QT.div,{animate:{y:[0,-100,0],x:[0,100*Math.random()-50,0],opacity:[0,1,0]},transition:{duration:3+2*Math.random(),repeat:1/0,delay:2*Math.random()},className:"absolute w-1 h-1 bg-white/50 rounded-full",style:{left:100*Math.random()+"%",top:100*Math.random()+"%"}},t))]}),Qe.jsxs("div",{className:"relative z-10 flex flex-col items-center space-y-10 px-4",children:[Qe.jsxs("div",{className:"relative",children:[Qe.jsx(QT.div,{animate:{rotate:360},transition:{duration:4,repeat:1/0,ease:"linear"},className:"absolute inset-0 w-40 h-40 rounded-full",children:Qe.jsx("div",{className:"w-full h-full rounded-full border-4 border-transparent border-t-primary border-r-purple-600"})}),Qe.jsx(QT.div,{animate:{rotate:-360},transition:{duration:3,repeat:1/0,ease:"linear"},className:"absolute inset-3 w-34 h-34 rounded-full",children:Qe.jsx("div",{className:"w-full h-full rounded-full border-4 border-transparent border-b-blue-500 border-l-cyan-500"})}),Qe.jsx(QT.div,{animate:{scale:[1,1.1,1],opacity:[.5,.8,.5]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:`absolute inset-6 rounded-full bg-gradient-to-br ${d} opacity-20`}),Qe.jsxs(QT.div,{initial:{scale:0,rotate:-180,opacity:0},animate:{scale:1,rotate:0,opacity:1},transition:{type:"spring",stiffness:200,damping:20},className:"relative w-40 h-40 flex items-center justify-center",children:[Qe.jsx(QT.div,{animate:{boxShadow:["0 0 20px rgba(59, 130, 246, 0.5)","0 0 60px rgba(168, 85, 247, 0.8)","0 0 20px rgba(59, 130, 246, 0.5)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:`w-28 h-28 flex items-center justify-center rounded-full bg-gradient-to-br ${d} shadow-2xl`,children:Qe.jsx(l,{className:"w-14 h-14 text-white",strokeWidth:2})}),[...Array(8)].map((e,t)=>Qe.jsx(QT.div,{animate:{scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1.5,repeat:1/0,delay:.2*t},className:"absolute w-2 h-2 bg-white rounded-full",style:{top:50+45*Math.sin(t*Math.PI/4)+"%",left:50+45*Math.cos(t*Math.PI/4)+"%"}},t))]},a)]}),Qe.jsxs("div",{className:"flex flex-col items-center space-y-6 max-w-md",children:[Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"text-center space-y-2",children:[Qe.jsx("h3",{className:`text-3xl font-bold bg-gradient-to-r ${d} bg-clip-text text-transparent mb-2`,children:c}),Qe.jsx("p",{className:"text-base text-gray-300",children:u}),Qe.jsx("p",{className:"text-sm text-gray-500",children:"Vui lng khng tt trang ny"})]},a),Qe.jsx("div",{className:"w-80 h-2 bg-gray-800 rounded-full overflow-hidden",children:Qe.jsx(QT.div,{animate:{width:(a+1)/o.length*100+"%"},transition:{duration:.5,ease:"easeOut"},className:`h-full bg-gradient-to-r ${d} relative`,children:Qe.jsx(QT.div,{animate:{x:["-100%","100%"]},transition:{duration:1,repeat:1/0,ease:"linear"},className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent"})})}),Qe.jsx("div",{className:"flex items-center gap-4",children:o.map((e,t)=>{const n=e.icon;return Qe.jsxs(QT.div,{initial:{scale:.8,opacity:.3},animate:{scale:t===a?1.2:t<a?1:.8,opacity:t<=a?1:.3},transition:{duration:.3},className:"relative flex flex-col items-center gap-2",children:[Qe.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center transition-all "+(t<a?`bg-gradient-to-br ${e.color} shadow-lg`:t===a?`bg-gradient-to-br ${e.color} shadow-xl`:"bg-gray-800"),children:t<a?Qe.jsx(gm,{className:"w-6 h-6 text-white",strokeWidth:2.5}):Qe.jsx(n,{className:"w-6 h-6 text-white",strokeWidth:2})}),t===a&&Qe.jsx(QT.div,{animate:{scale:[1,1.5,1],opacity:[.5,0,.5]},transition:{duration:1.5,repeat:1/0},className:`absolute inset-0 rounded-full bg-gradient-to-br ${e.color}`})]},t)})}),Qe.jsxs(QT.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-green-500/10 to-emerald-500/10 border border-green-500/30 rounded-full",children:[Qe.jsx(yf,{className:"w-4 h-4 text-green-400"}),Qe.jsx("span",{className:"text-sm text-green-300 font-medium",children:"Giao dch c bo mt bi SSL 256-bit"}),Qe.jsx(pg,{className:"w-4 h-4 text-green-400"})]})]})]})]})})};function Cde(){var e,t,n,r;const i=Zj(),a=Yj(),[s,o]=Ve.useState(!1),l=null==(e=a.state)?void 0:e.product,c=(null==(t=a.state)?void 0:t.products)||[],{user:d}=Pae(),[u,h]=Ve.useState(1),[p,m]=Ve.useState({email:"",phone:"",fullName:"",address:"",city:"",ward:"",note:"",paymentMethod:"cod",shippingMethod:"standard"}),[f,g]=Ve.useState(l||null),[v,x]=Ve.useState([]),[y,b]=Ve.useState([]),[w,j]=Ve.useState(""),[N,_]=Ve.useState(""),[S,C]=Ve.useState(!1),[A,M]=Ve.useState(!1),E=c.reduce((e,t)=>e+t.price*t.quantity,0),k="express"===p.shippingMethod?5e4:25e3,T=E+k;Ve.useEffect(()=>{var e;!l&&(null==(e=a.state)?void 0:e.productId)?fetch(`http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/product/detail.php?id=${a.state.productId}`).then(e=>e.json()).then(e=>{e.success&&g(e.product)}):l&&g(l)},[l,a.state]),Ve.useEffect(()=>{fetch("https://provinces.open-api.vn/api/v2/p/").then(e=>e.json()).then(e=>x(e)).catch(e=>{})},[]),Ve.useEffect(()=>{w?fetch(`https://provinces.open-api.vn/api/v2/p/${w}?depth=2`).then(e=>e.json()).then(e=>{e.wards&&Array.isArray(e.wards)?b(e.wards):b([]),_(""),P("ward","")}).catch(e=>{}):(b([]),_(""))},[w]);const P=(e,t)=>{m(n=>({...n,[e]:t}))},O=[{id:1,title:"Thng tin giao hng",icon:jf,description:"in thng tin nhn hng"},{id:2,title:"Phng thc thanh ton",icon:Rm,description:"Chn cch thanh ton"},{id:3,title:"Xc nhn n hng",icon:Rf,description:"Kim tra v hon tt"}];return c.length?Qe.jsxs("div",{className:"min-h-screen bg-background",children:[Qe.jsx(Sde,{isVisible:s}),Qe.jsx("div",{className:"bg-background/80 backdrop-blur-xl border-b sticky top-0 z-40 shadow-sm",children:Qe.jsx("div",{className:"container mx-auto px-4 py-4",children:Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("div",{className:"flex items-center gap-4",children:[Qe.jsx(AP,{variant:"ghost",size:"icon",onClick:()=>i(-1),className:"shrink-0 hover:bg-primary/10",children:Qe.jsx(Zp,{className:"w-5 h-5"})}),Qe.jsxs("div",{children:[Qe.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:"Thanh ton"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Hon tt n hng ca bn"})]})]}),Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx(sg,{className:"w-5 h-5 text-green-500"}),Qe.jsx("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"Bo mt SSL"})]})]})})}),Qe.jsxs("div",{className:"container mx-auto px-4 py-8",children:[Qe.jsx("div",{className:"max-w-3xl mx-auto mb-12",children:Qe.jsxs("div",{className:"relative",children:[Qe.jsx("div",{className:"absolute top-5 left-0 w-full h-1 bg-gradient-to-r from-muted via-muted to-muted",children:Qe.jsx(QT.div,{className:"h-full bg-gradient-to-r from-primary via-purple-500 to-primary",initial:{width:"0%"},animate:{width:(u-1)/2*100+"%"},transition:{duration:.5,ease:"easeInOut"}})}),Qe.jsx("div",{className:"relative flex items-center justify-between",children:O.map((e,t)=>Qe.jsxs(QT.div,{className:"flex flex-col items-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:[Qe.jsxs(QT.div,{className:"relative flex items-center justify-center w-12 h-12 rounded-full border-2 transition-all duration-300 "+(u>=e.id?"bg-gradient-to-br from-primary to-purple-600 border-transparent text-white shadow-lg shadow-primary/50":"border-muted-foreground bg-background text-muted-foreground"),whileHover:{scale:1.05},animate:{scale:u===e.id?[1,1.1,1]:1,rotate:u===e.id?[0,5,-5,0]:0},transition:{duration:.5},children:[u>e.id?Qe.jsx(gm,{className:"w-6 h-6"}):Qe.jsx(e.icon,{className:"w-6 h-6"}),u===e.id&&Qe.jsx(QT.div,{className:"absolute inset-0 rounded-full border-2 border-primary",animate:{scale:[1,1.5],opacity:[.5,0]},transition:{duration:1.5,repeat:1/0}})]}),Qe.jsxs("div",{className:"mt-3 text-center",children:[Qe.jsx("p",{className:"text-sm font-semibold transition-colors "+(u>=e.id?"text-foreground":"text-muted-foreground"),children:e.title}),Qe.jsx("p",{className:"text-xs text-muted-foreground mt-1 hidden md:block",children:e.description})]})]},e.id))})]})}),Qe.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[Qe.jsxs("div",{className:"lg:col-span-2",children:[Qe.jsx(eM,{mode:"wait",children:Qe.jsxs(QT.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:[1===u&&Qe.jsxs(DP,{className:"overflow-hidden border-none shadow-xl",children:[Qe.jsx(LP,{className:"bg-gradient-to-r from-primary/10 to-purple-500/10 border-b",children:Qe.jsxs(BP,{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 bg-primary/20 rounded-lg",children:Qe.jsx(jf,{className:"w-5 h-5 text-primary"})}),Qe.jsxs("div",{children:[Qe.jsx("span",{className:"text-xl",children:"Thng tin giao hng"}),Qe.jsx("p",{className:"text-sm font-normal text-muted-foreground mt-1",children:"Vui lng in y  thng tin  nhn hng"})]})]})}),Qe.jsxs(UP,{className:"space-y-6 p-6",children:[Qe.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[Qe.jsxs(QT.div,{whileFocus:{scale:1.02},className:"space-y-2",children:[Qe.jsxs(Rle,{htmlFor:"fullName",className:"flex items-center gap-2",children:["H v tn ",Qe.jsx("span",{className:"text-destructive",children:"*"})]}),Qe.jsx(Vne,{id:"fullName",value:p.fullName,onChange:e=>P("fullName",e.target.value),placeholder:"Nguyn Vn A",className:"transition-all focus:ring-2 focus:ring-primary/20"})]}),Qe.jsxs(QT.div,{whileFocus:{scale:1.02},className:"space-y-2",children:[Qe.jsxs(Rle,{htmlFor:"phone",className:"flex items-center gap-2",children:["S in thoi ",Qe.jsx("span",{className:"text-destructive",children:"*"})]}),Qe.jsx(Vne,{id:"phone",value:p.phone,onChange:e=>P("phone",e.target.value),placeholder:"0123456789",className:"transition-all focus:ring-2 focus:ring-primary/20"})]})]}),Qe.jsxs(QT.div,{whileFocus:{scale:1.02},className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"email",children:"Email (ty chn)"}),Qe.jsx(Vne,{id:"email",type:"email",value:p.email,onChange:e=>P("email",e.target.value),placeholder:"email@example.com",className:"transition-all focus:ring-2 focus:ring-primary/20"})]}),Qe.jsx(ZR,{className:"my-6"}),Qe.jsxs(QT.div,{whileFocus:{scale:1.02},className:"space-y-2",children:[Qe.jsxs(Rle,{htmlFor:"address",className:"flex items-center gap-2",children:["a ch chi tit ",Qe.jsx("span",{className:"text-destructive",children:"*"})]}),Qe.jsx(Vne,{id:"address",value:p.address,onChange:e=>P("address",e.target.value),placeholder:"S nh, tn ng, khu vc...",className:"transition-all focus:ring-2 focus:ring-primary/20"})]}),Qe.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[Qe.jsxs(QT.div,{whileFocus:{scale:1.02},className:"space-y-2",children:[Qe.jsxs(Rle,{htmlFor:"city",className:"flex items-center gap-2",children:["Tnh/Thnh ph ",Qe.jsx("span",{className:"text-destructive",children:"*"})]}),Qe.jsxs(jde,{open:S,onOpenChange:C,children:[Qe.jsx(Nde,{asChild:!0,children:Qe.jsxs(AP,{variant:"outline",role:"combobox","aria-expanded":S,className:"w-full justify-between transition-all focus:ring-2 focus:ring-primary/20",children:[w?null==(n=v.find(e=>e.code.toString()===w))?void 0:n.name:"Chn tnh/thnh ph...",Qe.jsx(wm,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),Qe.jsx(_de,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",children:Qe.jsxs(qce,{children:[Qe.jsx(Xce,{placeholder:"Tm kim tnh/thnh ph..."}),Qe.jsxs($ce,{children:[Qe.jsx(Yce,{children:"Khng tm thy."}),Qe.jsx(Jce,{children:v.map(e=>Qe.jsxs(Zce,{value:e.name,onSelect:()=>{j(e.code.toString()),P("city",e.name),C(!1)},children:[Qe.jsx(gm,{className:"mr-2 h-4 w-4 "+(w===e.code.toString()?"opacity-100":"opacity-0")}),e.name]},e.code))})]})]})})]})]}),Qe.jsxs(QT.div,{whileFocus:{scale:1.02},className:"space-y-2",children:[Qe.jsxs(Rle,{htmlFor:"ward",className:"flex items-center gap-2",children:["X/Phng ",Qe.jsx("span",{className:"text-destructive",children:"*"})]}),Qe.jsxs(jde,{open:A,onOpenChange:M,children:[Qe.jsx(Nde,{asChild:!0,children:Qe.jsxs(AP,{variant:"outline",role:"combobox","aria-expanded":A,disabled:!w,className:"w-full justify-between transition-all focus:ring-2 focus:ring-primary/20",children:[N?null==(r=y.find(e=>e.code.toString()===N))?void 0:r.name:"Chn x/phng...",Qe.jsx(wm,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),Qe.jsx(_de,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",children:Qe.jsxs(qce,{children:[Qe.jsx(Xce,{placeholder:"Tm kim x/phng..."}),Qe.jsxs($ce,{className:"max-h-[300px]",children:[Qe.jsx(Yce,{children:"Khng tm thy."}),Qe.jsx(Jce,{children:y.map(e=>Qe.jsxs(Zce,{value:e.name,onSelect:()=>{_(e.code.toString()),P("ward",e.name),M(!1)},children:[Qe.jsx(gm,{className:"mr-2 h-4 w-4 "+(N===e.code.toString()?"opacity-100":"opacity-0")}),e.name]},e.code))})]})]})})]})]})]}),p.address&&p.ward&&p.city&&Qe.jsx(QT.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20 rounded-xl border border-blue-200 dark:border-blue-800",children:Qe.jsxs("div",{className:"flex items-start gap-3",children:[Qe.jsx(jf,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 shrink-0 mt-0.5"}),Qe.jsxs("div",{className:"flex-1",children:[Qe.jsx("p",{className:"text-xs font-semibold text-blue-600 dark:text-blue-400 mb-1",children:"a ch y :"}),Qe.jsxs("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:[p.address,", ",p.ward,", ",p.city]})]})]})}),Qe.jsxs(QT.div,{whileFocus:{scale:1.02},className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"note",children:"Ghi ch n hng"}),Qe.jsx(Hne,{id:"note",value:p.note,onChange:e=>P("note",e.target.value),placeholder:"Ghi ch v n hng, thi gian giao hng...",rows:3,className:"transition-all focus:ring-2 focus:ring-primary/20 resize-none"})]}),Qe.jsx(ZR,{className:"my-6"}),Qe.jsxs("div",{className:"space-y-3",children:[Qe.jsxs(Rle,{className:"flex items-center gap-2 text-base",children:[Qe.jsx(Mg,{className:"w-5 h-5"}),"Phng thc vn chuyn"]}),Qe.jsxs(ace,{value:p.shippingMethod,onValueChange:e=>P("shippingMethod",e),className:"space-y-3",children:[Qe.jsxs(QT.div,{whileHover:{scale:1.02},className:"relative flex items-center space-x-3 p-4 border-2 rounded-xl transition-all cursor-pointer "+("standard"===p.shippingMethod?"border-primary bg-primary/5 shadow-md":"border-border hover:border-primary/50 hover:bg-muted/50"),children:[Qe.jsx(sce,{value:"standard",id:"standard"}),Qe.jsx("div",{className:"flex-1",children:Qe.jsxs(Rle,{htmlFor:"standard",className:"flex items-center justify-between cursor-pointer",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:Qe.jsx(Mg,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"font-semibold",children:"Giao hng tiu chun"}),Qe.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[Qe.jsx(Em,{className:"w-3 h-3 text-muted-foreground"}),Qe.jsx("span",{className:"text-xs text-muted-foreground",children:"3-5 ngy lm vic"})]})]})]}),Qe.jsxs("div",{className:"text-right",children:[Qe.jsx("p",{className:"font-bold text-primary",children:"25.000"}),Qe.jsx(EP,{variant:"secondary",className:"mt-1",children:"Ph bin"})]})]})})]}),Qe.jsxs(QT.div,{whileHover:{scale:1.02},className:"relative flex items-center space-x-3 p-4 border-2 rounded-xl transition-all cursor-pointer "+("express"===p.shippingMethod?"border-orange-500 bg-orange-50 dark:bg-orange-950/30 shadow-md":"border-border hover:border-orange-400 hover:bg-muted/50"),children:[Qe.jsx(sce,{value:"express",id:"express"}),Qe.jsx("div",{className:"flex-1",children:Qe.jsxs(Rle,{htmlFor:"express",className:"flex items-center justify-between cursor-pointer",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:Qe.jsx(Mg,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),Qe.jsxs("div",{children:[Qe.jsxs("p",{className:"font-semibold flex items-center gap-2",children:["Giao hng nhanh",Qe.jsx(pg,{className:"w-4 h-4 text-orange-500"})]}),Qe.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[Qe.jsx(Em,{className:"w-3 h-3 text-muted-foreground"}),Qe.jsx("span",{className:"text-xs text-muted-foreground",children:"1-2 ngy lm vic"})]})]})]}),Qe.jsxs("div",{className:"text-right",children:[Qe.jsx("p",{className:"font-bold text-orange-600 dark:text-orange-400",children:"50.000"}),Qe.jsx(EP,{variant:"outline",className:"mt-1 border-orange-300 text-orange-600",children:"Nhanh"})]})]})})]})]})]})]})]}),2===u&&Qe.jsxs(DP,{className:"overflow-hidden border-none shadow-xl",children:[Qe.jsx(LP,{className:"bg-gradient-to-r from-primary/10 to-purple-500/10 border-b",children:Qe.jsxs(BP,{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 bg-primary/20 rounded-lg",children:Qe.jsx(Rm,{className:"w-5 h-5 text-primary"})}),Qe.jsxs("div",{children:[Qe.jsx("span",{className:"text-xl",children:"Phng thc thanh ton"}),Qe.jsx("p",{className:"text-sm font-normal text-muted-foreground mt-1",children:"Chn phng thc thanh ton ph hp"})]})]})}),Qe.jsxs(UP,{className:"p-6",children:[Qe.jsxs(ace,{value:p.paymentMethod,onValueChange:e=>P("paymentMethod",e),className:"space-y-4",children:[Qe.jsxs(QT.div,{whileHover:{scale:1.02,y:-2},className:"flex items-center space-x-3 p-5 border-2 rounded-xl transition-all cursor-pointer shadow-sm "+("cod"===p.paymentMethod?"border-green-500 bg-green-50 dark:bg-green-950/30 shadow-lg":"border-border hover:border-green-400 hover:bg-muted/50"),children:[Qe.jsx(sce,{value:"cod",id:"cod"}),Qe.jsx("div",{className:"flex-1",children:Qe.jsxs(Rle,{htmlFor:"cod",className:"flex items-center justify-between cursor-pointer",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-xl",children:Qe.jsx(Rf,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"font-semibold text-lg",children:"Thanh ton khi nhn hng (COD)"}),Qe.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Thanh ton bng tin mt khi nhn hng"})]})]}),Qe.jsx(EP,{className:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",children:"Ph bin nht"})]})})]}),Qe.jsxs(QT.div,{whileHover:{scale:1.02,y:-2},className:"flex items-center space-x-3 p-5 border-2 rounded-xl transition-all cursor-pointer shadow-sm "+("payos"===p.paymentMethod?"border-blue-500 bg-blue-50 dark:bg-blue-950/30 shadow-lg":"border-border hover:border-blue-400 hover:bg-muted/50"),children:[Qe.jsx(sce,{value:"payos",id:"payos"}),Qe.jsx("div",{className:"flex-1",children:Qe.jsxs(Rle,{htmlFor:"payos",className:"flex items-center gap-3 cursor-pointer",children:[Qe.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-xl",children:Qe.jsx(Rm,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"font-semibold text-lg",children:"Chuyn khon ngn hng"}),Qe.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Chuyn khon qua ATM, Internet Banking, QR Code"})]})]})})]}),Qe.jsxs(QT.div,{whileHover:{scale:1.02,y:-2},className:"flex items-center space-x-3 p-5 border-2 rounded-xl transition-all cursor-pointer shadow-sm "+("vnpay"===p.paymentMethod?"border-red-500 bg-red-50 dark:bg-red-950/30 shadow-lg":"border-border hover:border-red-400 hover:bg-muted/50"),children:[Qe.jsx(sce,{value:"vnpay",id:"vnpay"}),Qe.jsx("div",{className:"flex-1",children:Qe.jsxs(Rle,{htmlFor:"vnpay",className:"flex items-center gap-3 cursor-pointer",children:[Qe.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-xl",children:Qe.jsx("img",{src:"/images/icons/vnpay.png",alt:"VNPay",className:"w-6 h-6"})}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"font-semibold text-lg",children:"VNPay"}),Qe.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Thanh ton qua v VNPay, QR Code, ATM"})]})]})})]}),Qe.jsxs(QT.div,{whileHover:{scale:1.02,y:-2},className:"flex items-center space-x-3 p-5 border-2 rounded-xl transition-all cursor-pointer shadow-sm "+("momo"===p.paymentMethod?"border-pink-500 bg-pink-50 dark:bg-pink-950/30 shadow-lg":"border-border hover:border-pink-400 hover:bg-muted/50"),children:[Qe.jsx(sce,{value:"momo",id:"momo"}),Qe.jsx("div",{className:"flex-1",children:Qe.jsxs(Rle,{htmlFor:"momo",className:"flex items-center gap-3 cursor-pointer",children:[Qe.jsx("div",{className:"p-3 bg-pink-100 dark:bg-pink-900/30 rounded-xl",children:Qe.jsx("img",{src:"/images/icons/momo.png",alt:"MoMo",className:"w-6 h-6"})}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"font-semibold text-lg",children:"V MoMo"}),Qe.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Thanh ton nhanh chng qua v MoMo"})]})]})})]})]}),"banking"===p.paymentMethod&&Qe.jsxs(QT.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-6 p-5 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20 rounded-xl border border-blue-200 dark:border-blue-800",children:[Qe.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[Qe.jsx(uf,{className:"w-5 h-5 text-blue-600"}),"Thng tin chuyn khon:"]}),Qe.jsxs("div",{className:"space-y-2 text-sm bg-background/50 p-4 rounded-lg",children:[Qe.jsxs("div",{className:"flex justify-between",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"Ngn hng:"}),Qe.jsx("strong",{children:"Vietcombank"})]}),Qe.jsxs("div",{className:"flex justify-between",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"S ti khon:"}),Qe.jsx("strong",{className:"font-mono",children:"1234567890"})]}),Qe.jsxs("div",{className:"flex justify-between",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"Ch ti khon:"}),Qe.jsx("strong",{children:"CNG TY THNG MI ABC"})]}),Qe.jsx(ZR,{className:"my-2"}),Qe.jsxs("div",{className:"flex justify-between",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"Ni dung:"}),Qe.jsxs("strong",{className:"text-primary",children:[null==f?void 0:f.name," - ",p.fullName]})]})]})]})]})]}),3===u&&Qe.jsxs(DP,{className:"overflow-hidden border-none shadow-xl",children:[Qe.jsx(LP,{className:"bg-gradient-to-r from-primary/10 to-purple-500/10 border-b",children:Qe.jsxs(BP,{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 bg-primary/20 rounded-lg",children:Qe.jsx(Rf,{className:"w-5 h-5 text-primary"})}),Qe.jsxs("div",{children:[Qe.jsx("span",{className:"text-xl",children:"Xc nhn n hng"}),Qe.jsx("p",{className:"text-sm font-normal text-muted-foreground mt-1",children:"Kim tra thng tin trc khi t hng"})]})]})}),Qe.jsxs(UP,{className:"space-y-6 p-6",children:[Qe.jsxs("div",{className:"space-y-3",children:[Qe.jsxs("h4",{className:"font-semibold flex items-center gap-2 text-lg",children:[Qe.jsx(jf,{className:"w-5 h-5 text-primary"}),"Thng tin giao hng"]}),Qe.jsxs("div",{className:"bg-gradient-to-br from-muted/50 to-muted/30 p-5 rounded-xl border border-border/50 space-y-2",children:[Qe.jsxs("div",{className:"flex items-start gap-3",children:[Qe.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-1.5"}),Qe.jsxs("div",{className:"flex-1",children:[Qe.jsx("p",{className:"font-semibold text-lg",children:p.fullName}),Qe.jsx("p",{className:"text-muted-foreground mt-1",children:p.phone})]})]}),Qe.jsx(ZR,{className:"my-3"}),Qe.jsxs("div",{className:"flex items-start gap-3",children:[Qe.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-1.5"}),Qe.jsxs("p",{className:"flex-1 text-sm leading-relaxed",children:[p.address,", ",p.ward,", ",p.city]})]}),p.note&&Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(ZR,{className:"my-3"}),Qe.jsxs("div",{className:"flex items-start gap-3",children:[Qe.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mt-1.5"}),Qe.jsxs("div",{className:"flex-1",children:[Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Ghi ch:"}),Qe.jsx("p",{className:"text-sm mt-1",children:p.note})]})]})]})]})]}),Qe.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[Qe.jsxs("div",{className:"space-y-3",children:[Qe.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[Qe.jsx(Rm,{className:"w-5 h-5 text-primary"}),"Thanh ton"]}),Qe.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20 p-4 rounded-xl border border-blue-200 dark:border-blue-800",children:Qe.jsx("p",{className:"font-medium",children:"cod"===p.paymentMethod?" Thanh ton khi nhn hng":"payos"===p.paymentMethod?" Chuyn khon ngn hng":"vnpay"===p.paymentMethod?" VNPay":" V MoMo"})})]}),Qe.jsxs("div",{className:"space-y-3",children:[Qe.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[Qe.jsx(Mg,{className:"w-5 h-5 text-primary"}),"Vn chuyn"]}),Qe.jsx("div",{className:"bg-gradient-to-br from-green-50 to-blue-50 dark:from-green-950/20 dark:to-blue-950/20 p-4 rounded-xl border border-green-200 dark:border-green-800",children:Qe.jsx("p",{className:"font-medium",children:"standard"===p.shippingMethod?" Giao hng tiu chun":" Giao hng nhanh"})})]})]}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-5 bg-gradient-to-r from-blue-50 via-purple-50 to-pink-50 dark:from-blue-950/20 dark:via-purple-950/20 dark:to-pink-950/20 rounded-xl border border-blue-200 dark:border-blue-800",children:Qe.jsxs("div",{className:"flex items-start gap-3",children:[Qe.jsx(uf,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 shrink-0 mt-0.5"}),Qe.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300 leading-relaxed",children:["Bng cch t hng, bn ng  vi"," ",Qe.jsx("span",{className:"underline cursor-pointer font-semibold hover:text-primary transition-colors",children:"iu khon s dng"})," ","v"," ",Qe.jsx("span",{className:"underline cursor-pointer font-semibold hover:text-primary transition-colors",children:"Chnh sch bo mt"})," ","ca chng ti."]})]})})]})]})]},u)}),Qe.jsxs(QT.div,{className:"flex gap-3 mt-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[u>1&&Qe.jsxs(AP,{onClick:()=>h(u-1),variant:"outline",size:"lg",className:"flex-1 border-2",children:[Qe.jsx(Zp,{className:"w-4 h-4 mr-2"}),"Quay li"]}),Qe.jsx(AP,{onClick:async()=>{var e;if(s)return;if(u<3)return void h(u+1);["momo","vnpay","payos"].includes(p.paymentMethod)||o(!0);let t=!1;const n=c.map(e=>({id:e.id,seller_id:e.seller_id,quantity:e.quantity,price:e.price,size:e.selectedSize,color:e.selectedColor}));null==(e=c[0])||e.seller_id;const r=(null==d?void 0:d.id)||null,a=`${p.address}, ${p.ward}, ${p.city}`,l=c.reduce((e,t)=>e+t.price*t.quantity,0),m="express"===p.shippingMethod?5e4:25e3,f=l+m,g={customer_id:r,fullName:p.fullName,phone:p.phone,address:a,note:p.note,payment_method:p.paymentMethod,products:n,total:f,shipping_fee:m,email:p.email};try{const e=await fetch("http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/order/create.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}),n=await e.json();if(!n.success)return void px.error(n.message||"C li xy ra!");if("momo"===p.paymentMethod){const e=await fetch("http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/payment/momo/pay.php",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")||""}`},body:JSON.stringify({orderCode:n.code,orderInfo:`Thanh ton n hng #${n.code}`})}),r=await e.json();if(r.success&&r.payUrl)return t=!0,void(window.location.href=r.payUrl);px.error(r.error||"Khng th to thanh ton MoMo!")}else if("payos"===p.paymentMethod){const e=await fetch("http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/payment/payos/pay.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderCode:n.id,orderInfo:`Thanh ton n hng #${n.code}`})}),r=await e.json();if(r.success&&r.payUrl)return t=!0,void(window.location.href=r.payUrl);px.error(r.message||"Khng th to thanh ton PayOS!")}else if("vnpay"===p.paymentMethod)try{const e=await fetch("http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/payment/vnpay/pay.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderCode:n.code||n.id||n.order_code,orderInfo:`Thanh ton n hng #${n.code||n.id}`,amount:f})});if(!e.ok){const t=await e.text();return void px.error("Li khi to VNPay: "+e.status+" "+t)}const r=await e.json();if(r.success&&r.payUrl)return t=!0,void(window.location.href=r.payUrl);px.error(r.message||"Khng th to thanh ton VNPay!")}catch(c$e){px.error("Khng th kt ni my ch cho VNPay!")}else px.success("t hng thnh cng! M n: "+n.code),i("/")}catch(c$e){px.error("Khng th kt ni my ch!")}finally{t||o(!1)}},size:"lg",className:"flex-1 bg-gradient-to-r from-primary via-purple-600 to-primary hover:opacity-90 shadow-lg shadow-primary/30",children:u<3?Qe.jsxs(Qe.Fragment,{children:["Tip tc",Qe.jsx(ym,{className:"w-4 h-4 ml-2"})]}):Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(gm,{className:"w-4 h-4 mr-2"}),"Xc nhn t hng"]})})]})]}),Qe.jsx("div",{className:"lg:col-span-1",children:Qe.jsx(QT.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"sticky top-24",children:Qe.jsxs(DP,{className:"overflow-hidden border-none shadow-2xl",children:[Qe.jsx(LP,{className:"bg-gradient-to-r from-primary/10 to-purple-500/10 border-b",children:Qe.jsxs(BP,{className:"flex items-center justify-between",children:[Qe.jsx("span",{children:"n hng ca bn"}),Qe.jsxs(EP,{variant:"secondary",className:"text-xs",children:[c.length," sn phm"]})]})}),Qe.jsxs(UP,{className:"space-y-5 p-6",children:[Qe.jsx("div",{className:"max-h-[300px] overflow-y-auto space-y-4 pr-2 custom-scrollbar",children:c.map((e,t)=>Qe.jsxs(QT.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex gap-3 p-3 rounded-lg bg-muted/30 hover:bg-muted/50 transition-all group",children:[Qe.jsxs("div",{className:"relative",children:[Qe.jsx("img",{src:e.image,alt:e.name,className:"w-20 h-20 object-cover rounded-lg border-2 border-border group-hover:border-primary transition-all"}),Qe.jsx(EP,{className:"absolute -top-2 -right-2 w-6 h-6 p-0 flex items-center justify-center bg-primary text-xs",children:e.quantity})]}),Qe.jsxs("div",{className:"flex-1 min-w-0",children:[Qe.jsx("h4",{className:"font-semibold text-sm line-clamp-2 mb-1",children:e.name}),Qe.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-2",children:[Qe.jsx(EP,{variant:"outline",className:"text-xs px-2 py-0",children:e.selectedSize}),Qe.jsx("span",{children:""}),Qe.jsx(EP,{variant:"outline",className:"text-xs px-2 py-0",children:e.selectedColor})]}),Qe.jsxs("p",{className:"font-bold text-primary",children:[(e.price*e.quantity).toLocaleString(),""]})]})]},e.id+"-"+t))}),Qe.jsx(ZR,{}),Qe.jsxs("div",{className:"space-y-3 bg-muted/20 p-4 rounded-lg",children:[Qe.jsxs("div",{className:"flex justify-between text-sm",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"Tm tnh"}),Qe.jsxs("span",{className:"font-medium",children:[E.toLocaleString(),""]})]}),Qe.jsxs("div",{className:"flex justify-between text-sm",children:[Qe.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[Qe.jsx(Mg,{className:"w-4 h-4"}),"Ph vn chuyn"]}),Qe.jsxs("span",{className:"font-medium",children:[k.toLocaleString(),""]})]})]}),Qe.jsx(ZR,{}),Qe.jsxs("div",{className:"flex justify-between items-center p-4 bg-gradient-to-r from-primary/10 to-purple-500/10 rounded-lg",children:[Qe.jsx("span",{className:"font-bold text-lg",children:"Tng cng"}),Qe.jsxs("span",{className:"font-bold text-2xl bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:[T.toLocaleString(),""]})]}),Qe.jsxs("div",{className:"space-y-3 pt-2",children:[Qe.jsxs(QT.div,{whileHover:{x:5},className:"flex items-center gap-3 text-sm p-3 rounded-lg bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800",children:[Qe.jsx(sg,{className:"w-5 h-5 text-green-600 dark:text-green-400 shrink-0"}),Qe.jsx("span",{className:"font-medium text-green-700 dark:text-green-300",children:"Thanh ton an ton & bo mt"})]}),Qe.jsxs(QT.div,{whileHover:{x:5},className:"flex items-center gap-3 text-sm p-3 rounded-lg bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800",children:[Qe.jsx(fg,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 shrink-0"}),Qe.jsx("span",{className:"font-medium text-yellow-700 dark:text-yellow-300",children:"nh gi 4.8/5 t 10,000+ khch hng"})]}),Qe.jsxs(QT.div,{whileHover:{x:5},className:"flex items-center gap-3 text-sm p-3 rounded-lg bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800",children:[Qe.jsx(Mg,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 shrink-0"}),Qe.jsx("span",{className:"font-medium text-blue-700 dark:text-blue-300",children:"Min ph i tr trong 7 ngy"})]})]})]})]})})})]})]}),Qe.jsx("style",{children:"\n        .custom-scrollbar::-webkit-scrollbar {\n          width: 6px;\n        }\n        .custom-scrollbar::-webkit-scrollbar-track {\n          background: transparent;\n        }\n        .custom-scrollbar::-webkit-scrollbar-thumb {\n          background: hsl(var(--muted-foreground));\n          border-radius: 3px;\n        }\n        .custom-scrollbar::-webkit-scrollbar-thumb:hover {\n          background: hsl(var(--primary));\n        }\n      "})]}):Qe.jsx("div",{className:"min-h-screen flex items-center justify-center",children:Qe.jsxs(DP,{className:"p-8 text-center max-w-md",children:[Qe.jsx(Rf,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground"}),Qe.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Gi hng trng"}),Qe.jsx("p",{className:"text-muted-foreground mb-4",children:"Khng c sn phm no  thanh ton"}),Qe.jsx(AP,{onClick:()=>i("/"),variant:"outline",children:"Tip tc mua sm"})]})})}var Ade=e=>"checkbox"===e.type,Mde=e=>e instanceof Date,Ede=e=>null==e;const kde=e=>"object"==typeof e;var Tde=e=>!Ede(e)&&!Array.isArray(e)&&kde(e)&&!Mde(e),Pde=e=>Tde(e)&&e.target?Ade(e.target)?e.target.checked:e.target.value:e,Ode=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),Rde="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function Ide(e){let t;const n=Array.isArray(e),r="undefined"!=typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else{if(Rde&&(e instanceof Blob||r)||!n&&!Tde(e))return e;if(t=n?[]:Object.create(Object.getPrototypeOf(e)),n||(e=>{const t=e.constructor&&e.constructor.prototype;return Tde(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const n in e)e.hasOwnProperty(n)&&(t[n]=Ide(e[n]));else t=e}return t}var Dde=e=>/^\w*$/.test(e),Lde=e=>void 0===e,Bde=e=>Array.isArray(e)?e.filter(Boolean):[],Fde=e=>Bde(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Ude=(e,t,n)=>{if(!t||!Tde(e))return n;const r=(Dde(t)?[t]:Fde(t)).reduce((e,t)=>Ede(e)?e:e[t],e);return Lde(r)||r===e?Lde(e[t])?n:e[t]:r},zde=e=>"boolean"==typeof e,Hde=(e,t,n)=>{let r=-1;const i=Dde(t)?[t]:Fde(t),a=i.length,s=a-1;for(;++r<a;){const t=i[r];let a=n;if(r!==s){const n=e[t];a=Tde(n)||Array.isArray(n)?n:isNaN(+i[r+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=a,e=e[t]}};const Vde="blur",Gde="focusout",Wde="change",Kde="onBlur",qde="onChange",Xde="onSubmit",$de="onTouched",Yde="all",Jde="max",Zde="min",Qde="maxLength",eue="minLength",tue="pattern",nue="required",rue="validate",iue=Ge.createContext(null);iue.displayName="HookFormContext";const aue=()=>Ge.useContext(iue);var sue=(e,t,n,r=!0)=>{const i={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(i,a,{get:()=>{const i=a;return t._proxyFormState[i]!==Yde&&(t._proxyFormState[i]=!r||Yde),n&&(n[i]=!0),e[i]}});return i};const oue="undefined"!=typeof window?Ge.useLayoutEffect:Ge.useEffect;var lue=e=>"string"==typeof e,cue=(e,t,n,r,i)=>lue(e)?(r&&t.watch.add(e),Ude(n,e,i)):Array.isArray(e)?e.map(e=>(r&&t.watch.add(e),Ude(n,e))):(r&&(t.watchAll=!0),n),due=e=>Ede(e)||!kde(e);function uue(e,t,n=new WeakSet){if(due(e)||due(t))return e===t;if(Mde(e)&&Mde(t))return e.getTime()===t.getTime();const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const a of r){const r=e[a];if(!i.includes(a))return!1;if("ref"!==a){const e=t[a];if(Mde(r)&&Mde(e)||Tde(r)&&Tde(e)||Array.isArray(r)&&Array.isArray(e)?!uue(r,e,n):r!==e)return!1}}return!0}function hue(e){const t=aue(),{name:n,disabled:r,control:i=t.control,shouldUnregister:a,defaultValue:s}=e,o=Ode(i._names.array,n),l=Ge.useMemo(()=>Ude(i._formValues,n,Ude(i._defaultValues,n,s)),[i,n,s]),c=function(e){const t=aue(),{control:n=t.control,name:r,defaultValue:i,disabled:a,exact:s,compute:o}=e||{},l=Ge.useRef(i),c=Ge.useRef(o),d=Ge.useRef(void 0);c.current=o;const u=Ge.useMemo(()=>n._getWatch(r,l.current),[n,r]),[h,p]=Ge.useState(c.current?c.current(u):u);return oue(()=>n._subscribe({name:r,formState:{values:!0},exact:s,callback:e=>{if(!a){const t=cue(r,n._names,e.values||n._formValues,!1,l.current);if(c.current){const e=c.current(t);uue(e,d.current)||(p(e),d.current=e)}else p(t)}}}),[n,a,r,s]),Ge.useEffect(()=>n._removeUnmounted()),h}({control:i,name:n,defaultValue:l,exact:!0}),d=function(e){const t=aue(),{control:n=t.control,disabled:r,name:i,exact:a}=e||{},[s,o]=Ge.useState(n._formState),l=Ge.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return oue(()=>n._subscribe({name:i,formState:l.current,exact:a,callback:e=>{!r&&o({...n._formState,...e})}}),[i,r,a]),Ge.useEffect(()=>{l.current.isValid&&n._setValid(!0)},[n]),Ge.useMemo(()=>sue(s,n,l.current,!1),[s,n])}({control:i,name:n,exact:!0}),u=Ge.useRef(e),h=Ge.useRef(void 0),p=Ge.useRef(i.register(n,{...e.rules,value:c,...zde(e.disabled)?{disabled:e.disabled}:{}}));u.current=e;const m=Ge.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ude(d.errors,n)},isDirty:{enumerable:!0,get:()=>!!Ude(d.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Ude(d.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Ude(d.validatingFields,n)},error:{enumerable:!0,get:()=>Ude(d.errors,n)}}),[d,n]),f=Ge.useCallback(e=>p.current.onChange({target:{value:Pde(e),name:n},type:Wde}),[n]),g=Ge.useCallback(()=>p.current.onBlur({target:{value:Ude(i._formValues,n),name:n},type:Vde}),[n,i._formValues]),v=Ge.useCallback(e=>{const t=Ude(i._fields,n);t&&e&&(t._f.ref={focus:()=>e.focus&&e.focus(),select:()=>e.select&&e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})},[i._fields,n]),x=Ge.useMemo(()=>({name:n,value:c,...zde(r)||d.disabled?{disabled:d.disabled||r}:{},onChange:f,onBlur:g,ref:v}),[n,r,d.disabled,f,g,v,c]);return Ge.useEffect(()=>{const e=i._options.shouldUnregister||a,t=h.current;t&&t!==n&&!o&&i.unregister(t),i.register(n,{...u.current.rules,...zde(u.current.disabled)?{disabled:u.current.disabled}:{}});const r=(e,t)=>{const n=Ude(i._fields,e);n&&n._f&&(n._f.mount=t)};if(r(n,!0),e){const e=Ide(Ude(i._options.defaultValues,n));Hde(i._defaultValues,n,e),Lde(Ude(i._formValues,n))&&Hde(i._formValues,n,e)}return!o&&i.register(n),h.current=n,()=>{(o?e&&!i._state.action:e)?i.unregister(n):r(n,!1)}},[n,i,o,a]),Ge.useEffect(()=>{i._setDisabledField({disabled:r,name:n})},[r,n,i]),Ge.useMemo(()=>({field:x,formState:d,fieldState:m}),[x,d,m])}const pue=e=>e.render(hue(e));var mue=(e,t,n,r,i)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:i||!0}}:{},fue=e=>Array.isArray(e)?e:[e],gue=()=>{let e=[];return{get observers(){return e},next:t=>{for(const n of e)n.next&&n.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}};function vue(e,t){const n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r],a=t[r];if(i&&Tde(i)&&a){const e=vue(i,a);Tde(e)&&(n[r]=e)}else e[r]&&(n[r]=a)}return n}var xue=e=>Tde(e)&&!Object.keys(e).length,yue=e=>"file"===e.type,bue=e=>"function"==typeof e,wue=e=>{if(!Rde)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},jue=e=>"select-multiple"===e.type,Nue=e=>"radio"===e.type,_ue=e=>wue(e)&&e.isConnected;function Sue(e,t){const n=Array.isArray(t)?t:Dde(t)?[t]:Fde(t),r=1===n.length?e:function(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=Lde(e)?r++:e[t[r++]];return e}(e,n),i=n.length-1,a=n[i];return r&&delete r[a],0!==i&&(Tde(r)&&xue(r)||Array.isArray(r)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!Lde(e[t]))return!1;return!0}(r))&&Sue(e,n.slice(0,-1)),e}function Cue(e){return Array.isArray(e)||Tde(e)&&!(e=>{for(const t in e)if(bue(e[t]))return!0;return!1})(e)}function Aue(e,t={}){for(const n in e)Cue(e[n])?(t[n]=Array.isArray(e[n])?[]:{},Aue(e[n],t[n])):Ede(e[n])||(t[n]=!0);return t}function Mue(e,t,n){n||(n=Aue(t));for(const r in e)Cue(e[r])?Lde(t)||due(n[r])?n[r]=Aue(e[r],Array.isArray(e[r])?[]:{}):Mue(e[r],Ede(t)?{}:t[r],n[r]):n[r]=!uue(e[r],t[r]);return n}const Eue={value:!1,isValid:!1},kue={value:!0,isValid:!0};var Tue=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Lde(e[0].attributes.value)?Lde(e[0].value)||""===e[0].value?kue:{value:e[0].value,isValid:!0}:kue:Eue}return Eue},Pue=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>Lde(e)?e:t?""===e?NaN:e?+e:e:n&&lue(e)?new Date(e):r?r(e):e;const Oue={isValid:!1,value:null};var Rue=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,Oue):Oue;function Iue(e){const t=e.ref;return yue(t)?t.files:Nue(t)?Rue(e.refs).value:jue(t)?[...t.selectedOptions].map(({value:e})=>e):Ade(t)?Tue(e.refs).value:Pue(Lde(t.value)?e.ref.value:t.value,e)}var Due=e=>e instanceof RegExp,Lue=e=>Lde(e)?e:Due(e)?e.source:Tde(e)?Due(e.value)?e.value.source:e.value:e,Bue=e=>({isOnSubmit:!e||e===Xde,isOnBlur:e===Kde,isOnChange:e===qde,isOnAll:e===Yde,isOnTouch:e===$de});const Fue="AsyncFunction";var Uue=e=>!!e&&!!e.validate&&!!(bue(e.validate)&&e.validate.constructor.name===Fue||Tde(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===Fue)),zue=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));const Hue=(e,t,n,r)=>{for(const i of n||Object.keys(e)){const n=Ude(e,i);if(n){const{_f:e,...a}=n;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],i)&&!r)return!0;if(e.ref&&t(e.ref,e.name)&&!r)return!0;if(Hue(a,t))break}else if(Tde(a)&&Hue(a,t))break}}};function Vue(e,t,n){const r=Ude(e,n);if(r||Dde(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const r=i.join("."),a=Ude(t,r),s=Ude(e,r);if(a&&!Array.isArray(a)&&n!==r)return{name:n};if(s&&s.type)return{name:r,error:s};if(s&&s.root&&s.root.type)return{name:`${r}.root`,error:s.root};i.pop()}return{name:n}}var Gue=(e,t,n)=>{const r=fue(Ude(e,n));return Hde(r,"root",t[n]),Hde(e,n,r),e};function Wue(e,t,n="validate"){if(lue(e)||Array.isArray(e)&&e.every(lue)||zde(e)&&!e)return{type:n,message:lue(e)?e:"",ref:t}}var Kue=e=>Tde(e)&&!Due(e)?e:{value:e,message:""},que=async(e,t,n,r,i,a)=>{const{ref:s,refs:o,required:l,maxLength:c,minLength:d,min:u,max:h,pattern:p,validate:m,name:f,valueAsNumber:g,mount:v}=e._f,x=Ude(n,f);if(!v||t.has(f))return{};const y=o?o[0]:s,b=e=>{i&&y.reportValidity&&(y.setCustomValidity(zde(e)?"":e||""),y.reportValidity())},w={},j=Nue(s),N=Ade(s),_=j||N,S=(g||yue(s))&&Lde(s.value)&&Lde(x)||wue(s)&&""===s.value||""===x||Array.isArray(x)&&!x.length,C=mue.bind(null,f,r,w),A=(e,t,n,r=Qde,i=eue)=>{const a=e?t:n;w[f]={type:e?r:i,message:a,ref:s,...C(e?r:i,a)}};if(a?!Array.isArray(x)||!x.length:l&&(!_&&(S||Ede(x))||zde(x)&&!x||N&&!Tue(o).isValid||j&&!Rue(o).isValid)){const{value:e,message:t}=lue(l)?{value:!!l,message:l}:Kue(l);if(e&&(w[f]={type:nue,message:t,ref:y,...C(nue,t)},!r))return b(t),w}if(!(S||Ede(u)&&Ede(h))){let e,t;const n=Kue(h),i=Kue(u);if(Ede(x)||isNaN(x)){const r=s.valueAsDate||new Date(x),a=e=>new Date((new Date).toDateString()+" "+e),o="time"==s.type,l="week"==s.type;lue(n.value)&&x&&(e=o?a(x)>a(n.value):l?x>n.value:r>new Date(n.value)),lue(i.value)&&x&&(t=o?a(x)<a(i.value):l?x<i.value:r<new Date(i.value))}else{const r=s.valueAsNumber||(x?+x:x);Ede(n.value)||(e=r>n.value),Ede(i.value)||(t=r<i.value)}if((e||t)&&(A(!!e,n.message,i.message,Jde,Zde),!r))return b(w[f].message),w}if((c||d)&&!S&&(lue(x)||a&&Array.isArray(x))){const e=Kue(c),t=Kue(d),n=!Ede(e.value)&&x.length>+e.value,i=!Ede(t.value)&&x.length<+t.value;if((n||i)&&(A(n,e.message,t.message),!r))return b(w[f].message),w}if(p&&!S&&lue(x)){const{value:e,message:t}=Kue(p);if(Due(e)&&!x.match(e)&&(w[f]={type:tue,message:t,ref:s,...C(tue,t)},!r))return b(t),w}if(m)if(bue(m)){const e=Wue(await m(x,n),y);if(e&&(w[f]={...e,...C(rue,e.message)},!r))return b(e.message),w}else if(Tde(m)){let e={};for(const t in m){if(!xue(e)&&!r)break;const i=Wue(await m[t](x,n),y,t);i&&(e={...i,...C(t,i.message)},b(i.message),r&&(w[f]=e))}if(!xue(e)&&(w[f]={ref:y,...e},!r))return w}return b(!0),w};const Xue={mode:Xde,reValidateMode:qde,shouldFocusError:!0};function $ue(e={}){let t,n={...Xue,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:bue(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1},i={},a=(Tde(n.defaultValues)||Tde(n.values))&&Ide(n.defaultValues||n.values)||{},s=n.shouldUnregister?{}:Ide(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let u={...d};const h={array:gue(),state:gue()},p=n.criteriaMode===Yde,m=async e=>{if(!n.disabled&&(d.isValid||u.isValid||e)){const e=n.resolver?xue((await y()).errors):await b(i,!0);e!==r.isValid&&h.state.next({isValid:e})}},f=(e,t)=>{!n.disabled&&(d.isValidating||d.validatingFields||u.isValidating||u.validatingFields)&&((e||Array.from(l.mount)).forEach(e=>{e&&(t?Hde(r.validatingFields,e,t):Sue(r.validatingFields,e))}),h.state.next({validatingFields:r.validatingFields,isValidating:!xue(r.validatingFields)}))},g=(e,t,n,r)=>{const l=Ude(i,e);if(l){const i=Ude(s,e,Lde(n)?Ude(a,e):n);Lde(i)||r&&r.defaultChecked||t?Hde(s,e,t?i:Iue(l._f)):N(e,i),o.mount&&m()}},v=(e,t,i,s,o)=>{let l=!1,c=!1;const p={name:e};if(!n.disabled){if(!i||s){(d.isDirty||u.isDirty)&&(c=r.isDirty,r.isDirty=p.isDirty=w(),l=c!==p.isDirty);const n=uue(Ude(a,e),t);c=!!Ude(r.dirtyFields,e),n?Sue(r.dirtyFields,e):Hde(r.dirtyFields,e,!0),p.dirtyFields=r.dirtyFields,l=l||(d.dirtyFields||u.dirtyFields)&&c!==!n}if(i){const t=Ude(r.touchedFields,e);t||(Hde(r.touchedFields,e,i),p.touchedFields=r.touchedFields,l=l||(d.touchedFields||u.touchedFields)&&t!==i)}l&&o&&h.state.next(p)}return l?p:{}},x=(e,i,a,s)=>{const o=Ude(r.errors,e),l=(d.isValid||u.isValid)&&zde(i)&&r.isValid!==i;var p;if(n.delayError&&a?(p=()=>((e,t)=>{Hde(r.errors,e,t),h.state.next({errors:r.errors})})(e,a),t=e=>{clearTimeout(c),c=setTimeout(p,e)},t(n.delayError)):(clearTimeout(c),t=null,a?Hde(r.errors,e,a):Sue(r.errors,e)),(a?!uue(o,a):o)||!xue(s)||l){const t={...s,...l&&zde(i)?{isValid:i}:{},errors:r.errors,name:e};r={...r,...t},h.state.next(t)}},y=async e=>{f(e,!0);const t=await n.resolver(s,n.context,((e,t,n,r)=>{const i={};for(const a of e){const e=Ude(t,a);e&&Hde(i,a,e._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:r}})(e||l.mount,i,n.criteriaMode,n.shouldUseNativeValidation));return f(e),t},b=async(e,t,i={valid:!0})=>{for(const a in e){const o=e[a];if(o){const{_f:e,...a}=o;if(e){const a=l.array.has(e.name),c=o._f&&Uue(o._f);c&&d.validatingFields&&f([e.name],!0);const u=await que(o,l.disabled,s,p,n.shouldUseNativeValidation&&!t,a);if(c&&d.validatingFields&&f([e.name]),u[e.name]&&(i.valid=!1,t))break;!t&&(Ude(u,e.name)?a?Gue(r.errors,u,e.name):Hde(r.errors,e.name,u[e.name]):Sue(r.errors,e.name))}!xue(a)&&await b(a,t,i)}}return i.valid},w=(e,t)=>!n.disabled&&(e&&t&&Hde(s,e,t),!uue(E(),a)),j=(e,t,n)=>cue(e,l,{...o.mount?s:Lde(t)?a:lue(e)?{[e]:t}:t},n,t),N=(e,t,n={})=>{const r=Ude(i,e);let a=t;if(r){const n=r._f;n&&(!n.disabled&&Hde(s,e,Pue(t,n)),a=wue(n.ref)&&Ede(t)?"":t,jue(n.ref)?[...n.ref.options].forEach(e=>e.selected=a.includes(e.value)):n.refs?Ade(n.ref)?n.refs.forEach(e=>{e.defaultChecked&&e.disabled||(Array.isArray(a)?e.checked=!!a.find(t=>t===e.value):e.checked=a===e.value||!!a)}):n.refs.forEach(e=>e.checked=e.value===a):yue(n.ref)?n.ref.value="":(n.ref.value=a,n.ref.type||h.state.next({name:e,values:Ide(s)})))}(n.shouldDirty||n.shouldTouch)&&v(e,a,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&M(e)},_=(e,t,n)=>{for(const r in t){if(!t.hasOwnProperty(r))return;const a=t[r],s=e+"."+r,o=Ude(i,s);(l.array.has(e)||Tde(a)||o&&!o._f)&&!Mde(a)?_(s,a,n):N(s,a,n)}},S=(e,t,n={})=>{const c=Ude(i,e),p=l.array.has(e),m=Ide(t);Hde(s,e,m),p?(h.array.next({name:e,values:Ide(s)}),(d.isDirty||d.dirtyFields||u.isDirty||u.dirtyFields)&&n.shouldDirty&&h.state.next({name:e,dirtyFields:Mue(a,s),isDirty:w(e,m)})):!c||c._f||Ede(m)?N(e,m,n):_(e,m,n),zue(e,l)&&h.state.next({...r,name:e}),h.state.next({name:o.mount?e:void 0,values:Ide(s)})},C=async e=>{o.mount=!0;const a=e.target;let c=a.name,g=!0;const w=Ude(i,c),j=e=>{g=Number.isNaN(e)||Mde(e)&&isNaN(e.getTime())||uue(e,Ude(s,c,e))},N=Bue(n.mode),_=Bue(n.reValidateMode);if(w){let o,S;const C=a.type?Iue(w._f):Pde(e),A=e.type===Vde||e.type===Gde,E=!(e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate))(w._f)&&!n.resolver&&!Ude(r.errors,c)&&!w._f.deps||((e,t,n,r,i)=>!i.isOnAll&&(!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:!(n?r.isOnChange:i.isOnChange)||e))(A,Ude(r.touchedFields,c),r.isSubmitted,_,N),k=zue(c,l,A);Hde(s,c,C),A?a&&a.readOnly||(w._f.onBlur&&w._f.onBlur(e),t&&t(0)):w._f.onChange&&w._f.onChange(e);const T=v(c,C,A),P=!xue(T)||k;if(!A&&h.state.next({name:c,type:e.type,values:Ide(s)}),E)return(d.isValid||u.isValid)&&("onBlur"===n.mode?A&&m():A||m()),P&&h.state.next({name:c,...k?{}:T});if(!A&&k&&h.state.next({...r}),n.resolver){const{errors:e}=await y([c]);if(j(C),g){const t=Vue(r.errors,i,c),n=Vue(e,i,t.name||c);o=n.error,c=n.name,S=xue(e)}}else f([c],!0),o=(await que(w,l.disabled,s,p,n.shouldUseNativeValidation))[c],f([c]),j(C),g&&(o?S=!1:(d.isValid||u.isValid)&&(S=await b(i,!0)));g&&(w._f.deps&&(!Array.isArray(w._f.deps)||w._f.deps.length>0)&&M(w._f.deps),x(c,S,o,T))}},A=(e,t)=>{if(Ude(r.errors,t)&&e.focus)return e.focus(),1},M=async(e,t={})=>{let a,s;const o=fue(e);if(n.resolver){const t=await(async e=>{const{errors:t}=await y(e);if(e)for(const n of e){const e=Ude(t,n);e?Hde(r.errors,n,e):Sue(r.errors,n)}else r.errors=t;return t})(Lde(e)?e:o);a=xue(t),s=e?!o.some(e=>Ude(t,e)):a}else e?(s=(await Promise.all(o.map(async e=>{const t=Ude(i,e);return await b(t&&t._f?{[e]:t}:t)}))).every(Boolean),(s||r.isValid)&&m()):s=a=await b(i);return h.state.next({...!lue(e)||(d.isValid||u.isValid)&&a!==r.isValid?{}:{name:e},...n.resolver||!e?{isValid:a}:{},errors:r.errors}),t.shouldFocus&&!s&&Hue(i,A,e?o:l.mount),s},E=(e,t)=>{let n={...o.mount?s:a};return t&&(n=vue(t.dirtyFields?r.dirtyFields:r.touchedFields,n)),Lde(e)?n:lue(e)?Ude(n,e):e.map(e=>Ude(n,e))},k=(e,t)=>({invalid:!!Ude((t||r).errors,e),isDirty:!!Ude((t||r).dirtyFields,e),error:Ude((t||r).errors,e),isValidating:!!Ude(r.validatingFields,e),isTouched:!!Ude((t||r).touchedFields,e)}),T=(e,t,n)=>{const a=(Ude(i,e,{_f:{}})._f||{}).ref,s=Ude(r.errors,e)||{},{ref:o,message:l,type:c,...d}=s;Hde(r.errors,e,{...d,...t,ref:a}),h.state.next({name:e,errors:r.errors,isValid:!1}),n&&n.shouldFocus&&a&&a.focus&&a.focus()},P=e=>h.state.subscribe({next:t=>{var n,i,o;n=e.name,i=t.name,o=e.exact,n&&i&&n!==i&&!fue(n).some(e=>e&&(o?e===i:e.startsWith(i)||i.startsWith(e)))||!((e,t,n,r)=>{n(e);const{name:i,...a}=e;return xue(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(e=>t[e]===(!r||Yde))})(t,e.formState||d,U,e.reRenderRoot)||e.callback({values:{...s},...r,...t,defaultValues:a})}}).unsubscribe,O=(e,t={})=>{for(const o of e?fue(e):l.mount)l.mount.delete(o),l.array.delete(o),t.keepValue||(Sue(i,o),Sue(s,o)),!t.keepError&&Sue(r.errors,o),!t.keepDirty&&Sue(r.dirtyFields,o),!t.keepTouched&&Sue(r.touchedFields,o),!t.keepIsValidating&&Sue(r.validatingFields,o),!n.shouldUnregister&&!t.keepDefaultValue&&Sue(a,o);h.state.next({values:Ide(s)}),h.state.next({...r,...t.keepDirty?{isDirty:w()}:{}}),!t.keepIsValid&&m()},R=({disabled:e,name:t})=>{(zde(e)&&o.mount||e||l.disabled.has(t))&&(e?l.disabled.add(t):l.disabled.delete(t))},I=(e,t={})=>{let r=Ude(i,e);const s=zde(t.disabled)||zde(n.disabled);return Hde(i,e,{...r||{},_f:{...r&&r._f?r._f:{ref:{name:e}},name:e,mount:!0,...t}}),l.mount.add(e),r?R({disabled:zde(t.disabled)?t.disabled:n.disabled,name:e}):g(e,!0,t.value),{...s?{disabled:t.disabled||n.disabled}:{},...n.progressive?{required:!!t.required,min:Lue(t.min),max:Lue(t.max),minLength:Lue(t.minLength),maxLength:Lue(t.maxLength),pattern:Lue(t.pattern)}:{},name:e,onChange:C,onBlur:C,ref:s=>{if(s){I(e,t),r=Ude(i,e);const n=Lde(s.value)&&s.querySelectorAll&&s.querySelectorAll("input,select,textarea")[0]||s,o=(e=>Nue(e)||Ade(e))(n),l=r._f.refs||[];if(o?l.find(e=>e===n):n===r._f.ref)return;Hde(i,e,{_f:{...r._f,...o?{refs:[...l.filter(_ue),n,...Array.isArray(Ude(a,e))?[{}]:[]],ref:{type:n.type,name:e}}:{ref:n}}}),g(e,!1,void 0,n)}else r=Ude(i,e,{}),r._f&&(r._f.mount=!1),(n.shouldUnregister||t.shouldUnregister)&&(!Ode(l.array,e)||!o.action)&&l.unMount.add(e)}}},D=()=>n.shouldFocusError&&Hue(i,A,l.mount),L=(e,t)=>async a=>{let o;a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist());let c=Ide(s);if(h.state.next({isSubmitting:!0}),n.resolver){const{errors:e,values:t}=await y();r.errors=e,c=Ide(t)}else await b(i);if(l.disabled.size)for(const e of l.disabled)Sue(c,e);if(Sue(r.errors,"root"),xue(r.errors)){h.state.next({errors:{}});try{await e(c,a)}catch(d){o=d}}else t&&await t({...r.errors},a),D(),setTimeout(D);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:xue(r.errors)&&!o,submitCount:r.submitCount+1,errors:r.errors}),o)throw o},B=(e,t={})=>{const c=e?Ide(e):a,u=Ide(c),p=xue(e),m=p?a:u;if(t.keepDefaultValues||(a=c),!t.keepValues){if(t.keepDirtyValues){const e=new Set([...l.mount,...Object.keys(Mue(a,s))]);for(const t of Array.from(e))Ude(r.dirtyFields,t)?Hde(m,t,Ude(s,t)):S(t,Ude(m,t))}else{if(Rde&&Lde(e))for(const e of l.mount){const t=Ude(i,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(wue(e)){const t=e.closest("form");if(t){t.reset();break}}}}if(t.keepFieldsRef)for(const e of l.mount)S(e,Ude(m,e));else i={}}s=n.shouldUnregister?t.keepDefaultValues?Ide(a):{}:Ide(m),h.array.next({values:{...m}}),h.state.next({values:{...m}})}l={mount:t.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!t.keepIsValid||!!t.keepDirtyValues,o.watch=!!n.shouldUnregister,h.state.next({submitCount:t.keepSubmitCount?r.submitCount:0,isDirty:!p&&(t.keepDirty?r.isDirty:!(!t.keepDefaultValues||uue(e,a))),isSubmitted:!!t.keepIsSubmitted&&r.isSubmitted,dirtyFields:p?{}:t.keepDirtyValues?t.keepDefaultValues&&s?Mue(a,s):r.dirtyFields:t.keepDefaultValues&&e?Mue(a,e):t.keepDirty?r.dirtyFields:{},touchedFields:t.keepTouched?r.touchedFields:{},errors:t.keepErrors?r.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&r.isSubmitSuccessful,isSubmitting:!1,defaultValues:a})},F=(e,t)=>B(bue(e)?e(s):e,t),U=e=>{r={...r,...e}},z={control:{register:I,unregister:O,getFieldState:k,handleSubmit:L,setError:T,_subscribe:P,_runSchema:y,_focusError:D,_getWatch:j,_getDirty:w,_setValid:m,_setFieldArray:(e,t=[],l,c,p=!0,m=!0)=>{if(c&&l&&!n.disabled){if(o.action=!0,m&&Array.isArray(Ude(i,e))){const t=l(Ude(i,e),c.argA,c.argB);p&&Hde(i,e,t)}if(m&&Array.isArray(Ude(r.errors,e))){const t=l(Ude(r.errors,e),c.argA,c.argB);p&&Hde(r.errors,e,t),((e,t)=>{!Bde(Ude(e,t)).length&&Sue(e,t)})(r.errors,e)}if((d.touchedFields||u.touchedFields)&&m&&Array.isArray(Ude(r.touchedFields,e))){const t=l(Ude(r.touchedFields,e),c.argA,c.argB);p&&Hde(r.touchedFields,e,t)}(d.dirtyFields||u.dirtyFields)&&(r.dirtyFields=Mue(a,s)),h.state.next({name:e,isDirty:w(e,t),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Hde(s,e,t)},_setDisabledField:R,_setErrors:e=>{r.errors=e,h.state.next({errors:r.errors,isValid:!1})},_getFieldArray:e=>Bde(Ude(o.mount?s:a,e,n.shouldUnregister?Ude(a,e,[]):[])),_reset:B,_resetDefaultValues:()=>bue(n.defaultValues)&&n.defaultValues().then(e=>{F(e,n.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(const e of l.unMount){const t=Ude(i,e);t&&(t._f.refs?t._f.refs.every(e=>!_ue(e)):!_ue(t._f.ref))&&O(e)}l.unMount=new Set},_disableForm:e=>{zde(e)&&(h.state.next({disabled:e}),Hue(i,(t,n)=>{const r=Ude(i,n);r&&(t.disabled=r._f.disabled||e,Array.isArray(r._f.refs)&&r._f.refs.forEach(t=>{t.disabled=r._f.disabled||e}))},0,!1))},_subjects:h,_proxyFormState:d,get _fields(){return i},get _formValues(){return s},get _state(){return o},set _state(e){o=e},get _defaultValues(){return a},get _names(){return l},set _names(e){l=e},get _formState(){return r},get _options(){return n},set _options(e){n={...n,...e}}},subscribe:e=>(o.mount=!0,u={...u,...e.formState},P({...e,formState:u})),trigger:M,register:I,handleSubmit:L,watch:(e,t)=>bue(e)?h.state.subscribe({next:n=>"values"in n&&e(j(void 0,t),n)}):j(e,t,!0),setValue:S,getValues:E,reset:F,resetField:(e,t={})=>{Ude(i,e)&&(Lde(t.defaultValue)?S(e,Ide(Ude(a,e))):(S(e,t.defaultValue),Hde(a,e,Ide(t.defaultValue))),t.keepTouched||Sue(r.touchedFields,e),t.keepDirty||(Sue(r.dirtyFields,e),r.isDirty=t.defaultValue?w(e,Ide(Ude(a,e))):w()),t.keepError||(Sue(r.errors,e),d.isValid&&m()),h.state.next({...r}))},clearErrors:e=>{e&&fue(e).forEach(e=>Sue(r.errors,e)),h.state.next({errors:e?r.errors:{}})},unregister:O,setError:T,setFocus:(e,t={})=>{const n=Ude(i,e),r=n&&n._f;if(r){const e=r.refs?r.refs[0]:r.ref;e.focus&&(e.focus(),t.shouldSelect&&bue(e.select)&&e.select())}},getFieldState:k};return{...z,formControl:z}}function Yue(e={}){const t=Ge.useRef(void 0),n=Ge.useRef(void 0),[r,i]=Ge.useState({isDirty:!1,isValidating:!1,isLoading:bue(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:bue(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:r},e.defaultValues&&!bue(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:n,...i}=$ue(e);t.current={...i,formState:r}}const a=t.current.control;return a._options=e,oue(()=>{const e=a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0});return i(e=>({...e,isReady:!0})),a._formState.isReady=!0,e},[a]),Ge.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),Ge.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),Ge.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),Ge.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),Ge.useEffect(()=>{if(a._proxyFormState.isDirty){const e=a._getDirty();e!==r.isDirty&&a._subjects.state.next({isDirty:e})}},[a,r.isDirty]),Ge.useEffect(()=>{e.values&&!uue(e.values,n.current)?(a._reset(e.values,{keepFieldsRef:!0,...a._options.resetOptions}),n.current=e.values,i(e=>({...e}))):a._resetDefaultValues()},[a,e.values]),Ge.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),t.current.formState=sue(r,a),t.current}const Jue=(e,t,n)=>{if(e&&"reportValidity"in e){const r=Ude(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},Zue=(e,t)=>{for(const n in t.fields){const r=t.fields[n];r&&r.ref&&"reportValidity"in r.ref?Jue(r.ref,n,e):r.refs&&r.refs.forEach(t=>Jue(t,n,e))}},Que=(e,t)=>{t.shouldUseNativeValidation&&Zue(e,t);const n={};for(const r in e){const i=Ude(t.fields,r),a=Object.assign(e[r]||{},{ref:i&&i.ref});if(ehe(t.names||Object.keys(e),r)){const e=Object.assign({},Ude(n,r));Hde(e,"root",a),Hde(n,r,e)}else Hde(n,r,a)}return n},ehe=(e,t)=>e.some(e=>e.startsWith(t+"."));var the,nhe,rhe,ihe=function(e,t){for(var n={};e.length;){var r=e[0],i=r.code,a=r.message,s=r.path.join(".");if(!n[s])if("unionErrors"in r){var o=r.unionErrors[0].errors[0];n[s]={message:o.message,type:o.code}}else n[s]={message:a,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var l=n[s].types,c=l&&l[r.code];n[s]=mue(s,t,n,i,c?[].concat(c,r.message):r.message)}e.shift()}return n},ahe=function(e,t,n){return void 0===n&&(n={}),function(r,i,a){try{return Promise.resolve(function(i,s){try{var o=Promise.resolve(e["sync"===n.mode?"parse":"parseAsync"](r,t)).then(function(e){return a.shouldUseNativeValidation&&Zue({},a),{errors:{},values:n.raw?r:e}})}catch(MI){return s(MI)}return o&&o.then?o.then(void 0,s):o}(0,function(e){if(t=e,Array.isArray(null==t?void 0:t.errors))return{values:{},errors:Que(ihe(e.errors,!a.shouldUseNativeValidation&&"all"===a.criteriaMode),a)};var t;throw e}))}catch(MI){return Promise.reject(MI)}}};(nhe=the||(the={})).assertEqual=e=>{},nhe.assertIs=function(e){},nhe.assertNever=function(e){throw new Error},nhe.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},nhe.getValidEnumValues=e=>{const t=nhe.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),n={};for(const r of t)n[r]=e[r];return nhe.objectValues(n)},nhe.objectValues=e=>nhe.objectKeys(e).map(function(t){return e[t]}),nhe.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},nhe.find=(e,t)=>{for(const n of e)if(t(n))return n},nhe.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,nhe.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},nhe.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(rhe||(rhe={})).mergeShapes=(e,t)=>({...e,...t});const she=the.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ohe=e=>{switch(typeof e){case"undefined":return she.undefined;case"string":return she.string;case"number":return Number.isNaN(e)?she.nan:she.number;case"boolean":return she.boolean;case"function":return she.function;case"bigint":return she.bigint;case"symbol":return she.symbol;case"object":return Array.isArray(e)?she.array:null===e?she.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?she.promise:"undefined"!=typeof Map&&e instanceof Map?she.map:"undefined"!=typeof Set&&e instanceof Set?she.set:"undefined"!=typeof Date&&e instanceof Date?she.date:she.object;default:return she.unknown}},lhe=the.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class che extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(r);else if("invalid_return_type"===i.code)r(i.returnTypeError);else if("invalid_arguments"===i.code)r(i.argumentsError);else if(0===i.path.length)n._errors.push(t(i));else{let e=n,r=0;for(;r<i.path.length;){const n=i.path[r];r===i.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(i))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}static assert(e){if(!(e instanceof che))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,the.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},n=[];for(const r of this.issues)if(r.path.length>0){const n=r.path[0];t[n]=t[n]||[],t[n].push(e(r))}else n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}che.create=e=>new che(e);const dhe=(e,t)=>{let n;switch(e.code){case lhe.invalid_type:n=e.received===she.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case lhe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,the.jsonStringifyReplacer)}`;break;case lhe.unrecognized_keys:n=`Unrecognized key(s) in object: ${the.joinValues(e.keys,", ")}`;break;case lhe.invalid_union:n="Invalid input";break;case lhe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${the.joinValues(e.options)}`;break;case lhe.invalid_enum_value:n=`Invalid enum value. Expected ${the.joinValues(e.options)}, received '${e.received}'`;break;case lhe.invalid_arguments:n="Invalid function arguments";break;case lhe.invalid_return_type:n="Invalid function return type";break;case lhe.invalid_date:n="Invalid date";break;case lhe.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:the.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case lhe.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case lhe.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case lhe.custom:n="Invalid input";break;case lhe.invalid_intersection_types:n="Intersection results could not be merged";break;case lhe.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case lhe.not_finite:n="Number must be finite";break;default:n=t.defaultError,the.assertNever(e)}return{message:n}};let uhe=dhe;function hhe(e,t){const n=uhe,r=(e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,a=[...n,...i.path||[]],s={...i,path:a};if(void 0!==i.message)return{...i,path:a,message:i.message};let o="";const l=r.filter(e=>!!e).slice().reverse();for(const c of l)o=c(s,{data:t,defaultError:o}).message;return{...i,path:a,message:o}})({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===dhe?void 0:dhe].filter(e=>!!e)});e.common.issues.push(r)}class phe{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if("aborted"===r.status)return mhe;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const r of t){const e=await r.key,t=await r.value;n.push({key:e,value:t})}return phe.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:t,value:i}=r;if("aborted"===t.status)return mhe;if("aborted"===i.status)return mhe;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||void 0===i.value&&!r.alwaysSet||(n[t.value]=i.value)}return{status:e.value,value:n}}}const mhe=Object.freeze({status:"aborted"}),fhe=e=>({status:"dirty",value:e}),ghe=e=>({status:"valid",value:e}),vhe=e=>"aborted"===e.status,xhe=e=>"dirty"===e.status,yhe=e=>"valid"===e.status,bhe=e=>"undefined"!=typeof Promise&&e instanceof Promise;var whe,jhe;(jhe=whe||(whe={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},jhe.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;class Nhe{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const _he=(e,t)=>{if(yhe(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new che(e.common.issues);return this._error=t,this._error}}};function She(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:i};return{errorMap:(t,i)=>{const{message:a}=e;return"invalid_enum_value"===t.code?{message:a??i.defaultError}:void 0===i.data?{message:a??r??i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:a??n??i.defaultError}},description:i}}class Che{get description(){return this._def.description}_getType(e){return ohe(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:ohe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new phe,ctx:{common:e.parent.common,data:e.data,parsedType:ohe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(bhe(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){const n={common:{issues:[],async:(null==t?void 0:t.async)??!1,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ohe(e)},r=this._parseSync({data:e,path:n.path,parent:n});return _he(n,r)}"~validate"(e){var t,n;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ohe(e)};if(!this["~standard"].async)try{const t=this._parseSync({data:e,path:[],parent:r});return yhe(t)?{value:t.value}:{issues:r.common.issues}}catch(c$e){(null==(n=null==(t=null==c$e?void 0:c$e.message)?void 0:t.toLowerCase())?void 0:n.includes("encountered"))&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(e=>yhe(e)?{value:e.value}:{issues:r.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ohe(e)},r=this._parse({data:e,path:n.path,parent:n}),i=await(bhe(r)?r:Promise.resolve(r));return _he(n,i)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,r)=>{const i=e(t),a=()=>r.addIssue({code:lhe.custom,...n(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then(e=>!!e||(a(),!1)):!!i||(a(),!1)})}refinement(e,t){return this._refinement((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1))}_refinement(e){return new _pe({schema:this,typeName:Ope.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return Spe.create(this,this._def)}nullable(){return Cpe.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return cpe.create(this)}promise(){return Npe.create(this,this._def)}or(e){return hpe.create([this,e],this._def)}and(e){return mpe.create(this,e,this._def)}transform(e){return new _pe({...She(this._def),schema:this,typeName:Ope.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new Ape({...She(this._def),innerType:this,defaultValue:t,typeName:Ope.ZodDefault})}brand(){return new kpe({typeName:Ope.ZodBranded,type:this,...She(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new Mpe({...She(this._def),innerType:this,catchValue:t,typeName:Ope.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Tpe.create(this,e)}readonly(){return Ppe.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Ahe=/^c[^\s-]{8,}$/i,Mhe=/^[0-9a-z]+$/,Ehe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,khe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,The=/^[a-z0-9_-]{21}$/i,Phe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Ohe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Rhe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let Ihe;const Dhe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Lhe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Bhe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Fhe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Uhe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,zhe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Hhe="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Vhe=new RegExp(`^${Hhe}$`);function Ghe(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function Whe(e){return new RegExp(`^${Ghe(e)}$`)}function Khe(e){let t=`${Hhe}T${Ghe(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function qhe(e,t){return!("v4"!==t&&t||!Dhe.test(e))||!("v6"!==t&&t||!Bhe.test(e))}function Xhe(e,t){if(!Phe.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return"object"==typeof i&&null!==i&&((!("typ"in i)||"JWT"===(null==i?void 0:i.typ))&&(!!i.alg&&(!t||i.alg===t)))}catch{return!1}}function $he(e,t){return!("v4"!==t&&t||!Lhe.test(e))||!("v6"!==t&&t||!Fhe.test(e))}class Yhe extends Che{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==she.string){const t=this._getOrReturnCtx(e);return hhe(t,{code:lhe.invalid_type,expected:she.string,received:t.parsedType}),mhe}const t=new phe;let n;for(const r of this._def.checks)if("min"===r.kind)e.data.length<r.value&&(n=this._getOrReturnCtx(e,n),hhe(n,{code:lhe.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("max"===r.kind)e.data.length>r.value&&(n=this._getOrReturnCtx(e,n),hhe(n,{code:lhe.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("length"===r.kind){const i=e.data.length>r.value,a=e.data.length<r.value;(i||a)&&(n=this._getOrReturnCtx(e,n),i?hhe(n,{code:lhe.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):a&&hhe(n,{code:lhe.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),t.dirty())}else if("email"===r.kind)Rhe.test(e.data)||(n=this._getOrReturnCtx(e,n),hhe(n,{validation:"email",code:lhe.invalid_string,message:r.message}),t.dirty());else if("emoji"===r.kind)Ihe||(Ihe=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Ihe.test(e.data)||(n=this._getOrReturnCtx(e,n),hhe(n,{validation:"emoji",code:lhe.invalid_string,message:r.message}),t.dirty());else if("uuid"===r.kind)khe.test(e.data)||(n=this._getOrReturnCtx(e,n),hhe(n,{validation:"uuid",code:lhe.invalid_string,message:r.message}),t.dirty());else if("nanoid"===r.kind)The.test(e.data)||(n=this._getOrReturnCtx(e,n),hhe(n,{validation:"nanoid",code:lhe.invalid_string,message:r.message}),t.dirty());else if("cuid"===r.kind)Ahe.test(e.data)||(n=this._getOrReturnCtx(e,n),hhe(n,{validation:"cuid",code:lhe.invalid_string,message:r.message}),t.dirty());else if("cuid2"===r.kind)Mhe.test(e.data)||(n=this._getOrReturnCtx(e,n),hhe(n,{validation:"cuid2",code:lhe.invalid_string,message:r.message}),t.dirty());else if("ulid"===r.kind)Ehe.test(e.data)||(n=this._getOrReturnCtx(e,n),hhe(n,{validation:"ulid",code:lhe.invalid_string,message:r.message}),t.dirty());else if("url"===r.kind)try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),hhe(n,{validation:"url",code:lhe.invalid_string,message:r.message}),t.dirty()}else if("regex"===r.kind){r.regex.lastIndex=0;r.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),hhe(n,{validation:"regex",code:lhe.invalid_string,message:r.message}),t.dirty())}else if("trim"===r.kind)e.data=e.data.trim();else if("includes"===r.kind)e.data.includes(r.value,r.position)||(n=this._getOrReturnCtx(e,n),hhe(n,{code:lhe.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),t.dirty());else if("toLowerCase"===r.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===r.kind)e.data=e.data.toUpperCase();else if("startsWith"===r.kind)e.data.startsWith(r.value)||(n=this._getOrReturnCtx(e,n),hhe(n,{code:lhe.invalid_string,validation:{startsWith:r.value},message:r.message}),t.dirty());else if("endsWith"===r.kind)e.data.endsWith(r.value)||(n=this._getOrReturnCtx(e,n),hhe(n,{code:lhe.invalid_string,validation:{endsWith:r.value},message:r.message}),t.dirty());else if("datetime"===r.kind){Khe(r).test(e.data)||(n=this._getOrReturnCtx(e,n),hhe(n,{code:lhe.invalid_string,validation:"datetime",message:r.message}),t.dirty())}else if("date"===r.kind){Vhe.test(e.data)||(n=this._getOrReturnCtx(e,n),hhe(n,{code:lhe.invalid_string,validation:"date",message:r.message}),t.dirty())}else if("time"===r.kind){Whe(r).test(e.data)||(n=this._getOrReturnCtx(e,n),hhe(n,{code:lhe.invalid_string,validation:"time",message:r.message}),t.dirty())}else"duration"===r.kind?Ohe.test(e.data)||(n=this._getOrReturnCtx(e,n),hhe(n,{validation:"duration",code:lhe.invalid_string,message:r.message}),t.dirty()):"ip"===r.kind?qhe(e.data,r.version)||(n=this._getOrReturnCtx(e,n),hhe(n,{validation:"ip",code:lhe.invalid_string,message:r.message}),t.dirty()):"jwt"===r.kind?Xhe(e.data,r.alg)||(n=this._getOrReturnCtx(e,n),hhe(n,{validation:"jwt",code:lhe.invalid_string,message:r.message}),t.dirty()):"cidr"===r.kind?$he(e.data,r.version)||(n=this._getOrReturnCtx(e,n),hhe(n,{validation:"cidr",code:lhe.invalid_string,message:r.message}),t.dirty()):"base64"===r.kind?Uhe.test(e.data)||(n=this._getOrReturnCtx(e,n),hhe(n,{validation:"base64",code:lhe.invalid_string,message:r.message}),t.dirty()):"base64url"===r.kind?zhe.test(e.data)||(n=this._getOrReturnCtx(e,n),hhe(n,{validation:"base64url",code:lhe.invalid_string,message:r.message}),t.dirty()):the.assertNever(r);return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement(t=>e.test(t),{validation:t,code:lhe.invalid_string,...whe.errToObj(n)})}_addCheck(e){return new Yhe({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...whe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...whe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...whe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...whe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...whe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...whe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...whe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...whe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...whe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...whe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...whe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...whe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...whe.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:(null==e?void 0:e.offset)??!1,local:(null==e?void 0:e.local)??!1,...whe.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...whe.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...whe.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...whe.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...whe.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...whe.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...whe.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...whe.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...whe.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...whe.errToObj(t)})}nonempty(e){return this.min(1,whe.errToObj(e))}trim(){return new Yhe({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Yhe({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Yhe({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Jhe(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}Yhe.create=e=>new Yhe({checks:[],typeName:Ope.ZodString,coerce:(null==e?void 0:e.coerce)??!1,...She(e)});class Zhe extends Che{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==she.number){const t=this._getOrReturnCtx(e);return hhe(t,{code:lhe.invalid_type,expected:she.number,received:t.parsedType}),mhe}let t;const n=new phe;for(const r of this._def.checks)if("int"===r.kind)the.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),hhe(t,{code:lhe.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty());else if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),hhe(t,{code:lhe.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),hhe(t,{code:lhe.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else"multipleOf"===r.kind?0!==Jhe(e.data,r.value)&&(t=this._getOrReturnCtx(e,t),hhe(t,{code:lhe.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),hhe(t,{code:lhe.not_finite,message:r.message}),n.dirty()):the.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,whe.toString(t))}gt(e,t){return this.setLimit("min",e,!1,whe.toString(t))}lte(e,t){return this.setLimit("max",e,!0,whe.toString(t))}lt(e,t){return this.setLimit("max",e,!1,whe.toString(t))}setLimit(e,t,n,r){return new Zhe({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:whe.toString(r)}]})}_addCheck(e){return new Zhe({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:whe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:whe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:whe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:whe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:whe.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:whe.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:whe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:whe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:whe.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&the.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Zhe.create=e=>new Zhe({checks:[],typeName:Ope.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...She(e)});class Qhe extends Che{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==she.bigint)return this._getInvalidInput(e);let t;const n=new phe;for(const r of this._def.checks)if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),hhe(t,{code:lhe.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),hhe(t,{code:lhe.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),hhe(t,{code:lhe.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):the.assertNever(r);return{status:n.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return hhe(t,{code:lhe.invalid_type,expected:she.bigint,received:t.parsedType}),mhe}gte(e,t){return this.setLimit("min",e,!0,whe.toString(t))}gt(e,t){return this.setLimit("min",e,!1,whe.toString(t))}lte(e,t){return this.setLimit("max",e,!0,whe.toString(t))}lt(e,t){return this.setLimit("max",e,!1,whe.toString(t))}setLimit(e,t,n,r){return new Qhe({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:whe.toString(r)}]})}_addCheck(e){return new Qhe({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:whe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:whe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:whe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:whe.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:whe.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Qhe.create=e=>new Qhe({checks:[],typeName:Ope.ZodBigInt,coerce:(null==e?void 0:e.coerce)??!1,...She(e)});class epe extends Che{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==she.boolean){const t=this._getOrReturnCtx(e);return hhe(t,{code:lhe.invalid_type,expected:she.boolean,received:t.parsedType}),mhe}return ghe(e.data)}}epe.create=e=>new epe({typeName:Ope.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...She(e)});class tpe extends Che{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==she.date){const t=this._getOrReturnCtx(e);return hhe(t,{code:lhe.invalid_type,expected:she.date,received:t.parsedType}),mhe}if(Number.isNaN(e.data.getTime())){return hhe(this._getOrReturnCtx(e),{code:lhe.invalid_date}),mhe}const t=new phe;let n;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(n=this._getOrReturnCtx(e,n),hhe(n,{code:lhe.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(n=this._getOrReturnCtx(e,n),hhe(n,{code:lhe.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):the.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new tpe({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:whe.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:whe.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}tpe.create=e=>new tpe({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:Ope.ZodDate,...She(e)});class npe extends Che{_parse(e){if(this._getType(e)!==she.symbol){const t=this._getOrReturnCtx(e);return hhe(t,{code:lhe.invalid_type,expected:she.symbol,received:t.parsedType}),mhe}return ghe(e.data)}}npe.create=e=>new npe({typeName:Ope.ZodSymbol,...She(e)});class rpe extends Che{_parse(e){if(this._getType(e)!==she.undefined){const t=this._getOrReturnCtx(e);return hhe(t,{code:lhe.invalid_type,expected:she.undefined,received:t.parsedType}),mhe}return ghe(e.data)}}rpe.create=e=>new rpe({typeName:Ope.ZodUndefined,...She(e)});class ipe extends Che{_parse(e){if(this._getType(e)!==she.null){const t=this._getOrReturnCtx(e);return hhe(t,{code:lhe.invalid_type,expected:she.null,received:t.parsedType}),mhe}return ghe(e.data)}}ipe.create=e=>new ipe({typeName:Ope.ZodNull,...She(e)});class ape extends Che{constructor(){super(...arguments),this._any=!0}_parse(e){return ghe(e.data)}}ape.create=e=>new ape({typeName:Ope.ZodAny,...She(e)});class spe extends Che{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ghe(e.data)}}spe.create=e=>new spe({typeName:Ope.ZodUnknown,...She(e)});class ope extends Che{_parse(e){const t=this._getOrReturnCtx(e);return hhe(t,{code:lhe.invalid_type,expected:she.never,received:t.parsedType}),mhe}}ope.create=e=>new ope({typeName:Ope.ZodNever,...She(e)});class lpe extends Che{_parse(e){if(this._getType(e)!==she.undefined){const t=this._getOrReturnCtx(e);return hhe(t,{code:lhe.invalid_type,expected:she.void,received:t.parsedType}),mhe}return ghe(e.data)}}lpe.create=e=>new lpe({typeName:Ope.ZodVoid,...She(e)});class cpe extends Che{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==she.array)return hhe(t,{code:lhe.invalid_type,expected:she.array,received:t.parsedType}),mhe;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,i=t.data.length<r.exactLength.value;(e||i)&&(hhe(t,{code:e?lhe.too_big:lhe.too_small,minimum:i?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(hhe(t,{code:lhe.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(hhe(t,{code:lhe.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((e,n)=>r.type._parseAsync(new Nhe(t,e,t.path,n)))).then(e=>phe.mergeArray(n,e));const i=[...t.data].map((e,n)=>r.type._parseSync(new Nhe(t,e,t.path,n)));return phe.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new cpe({...this._def,minLength:{value:e,message:whe.toString(t)}})}max(e,t){return new cpe({...this._def,maxLength:{value:e,message:whe.toString(t)}})}length(e,t){return new cpe({...this._def,exactLength:{value:e,message:whe.toString(t)}})}nonempty(e){return this.min(1,e)}}function dpe(e){if(e instanceof upe){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Spe.create(dpe(r))}return new upe({...e._def,shape:()=>t})}return e instanceof cpe?new cpe({...e._def,type:dpe(e.element)}):e instanceof Spe?Spe.create(dpe(e.unwrap())):e instanceof Cpe?Cpe.create(dpe(e.unwrap())):e instanceof fpe?fpe.create(e.items.map(e=>dpe(e))):e}cpe.create=(e,t)=>new cpe({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Ope.ZodArray,...She(t)});class upe extends Che{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=the.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==she.object){const t=this._getOrReturnCtx(e);return hhe(t,{code:lhe.invalid_type,expected:she.object,received:t.parsedType}),mhe}const{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:i}=this._getCached(),a=[];if(!(this._def.catchall instanceof ope&&"strip"===this._def.unknownKeys))for(const o in n.data)i.includes(o)||a.push(o);const s=[];for(const o of i){const e=r[o],t=n.data[o];s.push({key:{status:"valid",value:o},value:e._parse(new Nhe(n,t,n.path,o)),alwaysSet:o in n.data})}if(this._def.catchall instanceof ope){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of a)s.push({key:{status:"valid",value:t},value:{status:"valid",value:n.data[t]}});else if("strict"===e)a.length>0&&(hhe(n,{code:lhe.unrecognized_keys,keys:a}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of a){const r=n.data[t];s.push({key:{status:"valid",value:t},value:e._parse(new Nhe(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const e=[];for(const t of s){const n=await t.key,r=await t.value;e.push({key:n,value:r,alwaysSet:t.alwaysSet})}return e}).then(e=>phe.mergeObjectSync(t,e)):phe.mergeObjectSync(t,s)}get shape(){return this._def.shape()}strict(e){return whe.errToObj,new upe({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var r,i;const a=(null==(i=(r=this._def).errorMap)?void 0:i.call(r,t,n).message)??n.defaultError;return"unrecognized_keys"===t.code?{message:whe.errToObj(e).message??a}:{message:a}}}:{}})}strip(){return new upe({...this._def,unknownKeys:"strip"})}passthrough(){return new upe({...this._def,unknownKeys:"passthrough"})}extend(e){return new upe({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new upe({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ope.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new upe({...this._def,catchall:e})}pick(e){const t={};for(const n of the.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new upe({...this._def,shape:()=>t})}omit(e){const t={};for(const n of the.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new upe({...this._def,shape:()=>t})}deepPartial(){return dpe(this)}partial(e){const t={};for(const n of the.objectKeys(this.shape)){const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()}return new upe({...this._def,shape:()=>t})}required(e){const t={};for(const n of the.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof Spe;)e=e._def.innerType;t[n]=e}return new upe({...this._def,shape:()=>t})}keyof(){return bpe(the.objectKeys(this.shape))}}upe.create=(e,t)=>new upe({shape:()=>e,unknownKeys:"strip",catchall:ope.create(),typeName:Ope.ZodObject,...She(t)}),upe.strictCreate=(e,t)=>new upe({shape:()=>e,unknownKeys:"strict",catchall:ope.create(),typeName:Ope.ZodObject,...She(t)}),upe.lazycreate=(e,t)=>new upe({shape:e,unknownKeys:"strip",catchall:ope.create(),typeName:Ope.ZodObject,...She(t)});class hpe extends Che{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map(async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const n=e.map(e=>new che(e.ctx.common.issues));return hhe(t,{code:lhe.invalid_union,unionErrors:n}),mhe});{let e;const r=[];for(const a of n){const n={...t,common:{...t.common,issues:[]},parent:null},i=a._parseSync({data:t.data,path:t.path,parent:n});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=r.map(e=>new che(e));return hhe(t,{code:lhe.invalid_union,unionErrors:i}),mhe}}get options(){return this._def.options}}function ppe(e,t){const n=ohe(e),r=ohe(t);if(e===t)return{valid:!0,data:e};if(n===she.object&&r===she.object){const n=the.objectKeys(t),r=the.objectKeys(e).filter(e=>-1!==n.indexOf(e)),i={...e,...t};for(const a of r){const n=ppe(e[a],t[a]);if(!n.valid)return{valid:!1};i[a]=n.data}return{valid:!0,data:i}}if(n===she.array&&r===she.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let r=0;r<e.length;r++){const i=ppe(e[r],t[r]);if(!i.valid)return{valid:!1};n.push(i.data)}return{valid:!0,data:n}}return n===she.date&&r===she.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}hpe.create=(e,t)=>new hpe({options:e,typeName:Ope.ZodUnion,...She(t)});class mpe extends Che{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(vhe(e)||vhe(r))return mhe;const i=ppe(e.value,r.value);return i.valid?((xhe(e)||xhe(r))&&t.dirty(),{status:t.value,value:i.data}):(hhe(n,{code:lhe.invalid_intersection_types}),mhe)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([e,t])=>r(e,t)):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}mpe.create=(e,t,n)=>new mpe({left:e,right:t,typeName:Ope.ZodIntersection,...She(n)});class fpe extends Che{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==she.array)return hhe(n,{code:lhe.invalid_type,expected:she.array,received:n.parsedType}),mhe;if(n.data.length<this._def.items.length)return hhe(n,{code:lhe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),mhe;!this._def.rest&&n.data.length>this._def.items.length&&(hhe(n,{code:lhe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new Nhe(n,e,n.path,t)):null}).filter(e=>!!e);return n.common.async?Promise.all(r).then(e=>phe.mergeArray(t,e)):phe.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new fpe({...this._def,rest:e})}}fpe.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new fpe({items:e,typeName:Ope.ZodTuple,rest:null,...She(t)})};class gpe extends Che{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==she.map)return hhe(n,{code:lhe.invalid_type,expected:she.map,received:n.parsedType}),mhe;const r=this._def.keyType,i=this._def.valueType,a=[...n.data.entries()].map(([e,t],a)=>({key:r._parse(new Nhe(n,e,n.path,[a,"key"])),value:i._parse(new Nhe(n,t,n.path,[a,"value"]))}));if(n.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const n of a){const r=await n.key,i=await n.value;if("aborted"===r.status||"aborted"===i.status)return mhe;"dirty"!==r.status&&"dirty"!==i.status||t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}})}{const e=new Map;for(const n of a){const r=n.key,i=n.value;if("aborted"===r.status||"aborted"===i.status)return mhe;"dirty"!==r.status&&"dirty"!==i.status||t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}}}}gpe.create=(e,t,n)=>new gpe({valueType:t,keyType:e,typeName:Ope.ZodMap,...She(n)});class vpe extends Che{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==she.set)return hhe(n,{code:lhe.invalid_type,expected:she.set,received:n.parsedType}),mhe;const r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(hhe(n,{code:lhe.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(hhe(n,{code:lhe.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const i=this._def.valueType;function a(e){const n=new Set;for(const r of e){if("aborted"===r.status)return mhe;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}const s=[...n.data.values()].map((e,t)=>i._parse(new Nhe(n,e,n.path,t)));return n.common.async?Promise.all(s).then(e=>a(e)):a(s)}min(e,t){return new vpe({...this._def,minSize:{value:e,message:whe.toString(t)}})}max(e,t){return new vpe({...this._def,maxSize:{value:e,message:whe.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}vpe.create=(e,t)=>new vpe({valueType:e,minSize:null,maxSize:null,typeName:Ope.ZodSet,...She(t)});class xpe extends Che{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}xpe.create=(e,t)=>new xpe({getter:e,typeName:Ope.ZodLazy,...She(t)});class ype extends Che{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return hhe(t,{received:t.data,code:lhe.invalid_literal,expected:this._def.value}),mhe}return{status:"valid",value:e.data}}get value(){return this._def.value}}function bpe(e,t){return new wpe({values:e,typeName:Ope.ZodEnum,...She(t)})}ype.create=(e,t)=>new ype({value:e,typeName:Ope.ZodLiteral,...She(t)});class wpe extends Che{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return hhe(t,{expected:the.joinValues(n),received:t.parsedType,code:lhe.invalid_type}),mhe}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return hhe(t,{received:t.data,code:lhe.invalid_enum_value,options:n}),mhe}return ghe(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return wpe.create(e,{...this._def,...t})}exclude(e,t=this._def){return wpe.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}wpe.create=bpe;class jpe extends Che{_parse(e){const t=the.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==she.string&&n.parsedType!==she.number){const e=the.objectValues(t);return hhe(n,{expected:the.joinValues(e),received:n.parsedType,code:lhe.invalid_type}),mhe}if(this._cache||(this._cache=new Set(the.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const e=the.objectValues(t);return hhe(n,{received:n.data,code:lhe.invalid_enum_value,options:e}),mhe}return ghe(e.data)}get enum(){return this._def.values}}jpe.create=(e,t)=>new jpe({values:e,typeName:Ope.ZodNativeEnum,...She(t)});class Npe extends Che{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==she.promise&&!1===t.common.async)return hhe(t,{code:lhe.invalid_type,expected:she.promise,received:t.parsedType}),mhe;const n=t.parsedType===she.promise?t.data:Promise.resolve(t.data);return ghe(n.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Npe.create=(e,t)=>new Npe({type:e,typeName:Ope.ZodPromise,...She(t)});class _pe extends Che{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ope.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,i={addIssue:e=>{hhe(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===r.type){const e=r.transform(n.data,i);if(n.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return mhe;const r=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===r.status?mhe:"dirty"===r.status||"dirty"===t.value?fhe(r.value):r});{if("aborted"===t.value)return mhe;const r=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===r.status?mhe:"dirty"===r.status||"dirty"===t.value?fhe(r.value):r}}if("refinement"===r.type){const e=e=>{const t=r.refinement(e,i);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?mhe:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(n=>"aborted"===n.status?mhe:("dirty"===n.status&&t.dirty(),e(n.value).then(()=>({status:t.value,value:n.value}))))}if("transform"===r.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!yhe(e))return mhe;const a=r.transform(e.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>yhe(e)?Promise.resolve(r.transform(e.value,i)).then(e=>({status:t.value,value:e})):mhe)}the.assertNever(r)}}_pe.create=(e,t,n)=>new _pe({schema:e,typeName:Ope.ZodEffects,effect:t,...She(n)}),_pe.createWithPreprocess=(e,t,n)=>new _pe({schema:t,effect:{type:"preprocess",transform:e},typeName:Ope.ZodEffects,...She(n)});class Spe extends Che{_parse(e){return this._getType(e)===she.undefined?ghe(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Spe.create=(e,t)=>new Spe({innerType:e,typeName:Ope.ZodOptional,...She(t)});class Cpe extends Che{_parse(e){return this._getType(e)===she.null?ghe(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Cpe.create=(e,t)=>new Cpe({innerType:e,typeName:Ope.ZodNullable,...She(t)});class Ape extends Che{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===she.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Ape.create=(e,t)=>new Ape({innerType:e,typeName:Ope.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...She(t)});class Mpe extends Che{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return bhe(r)?r.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new che(n.common.issues)},input:n.data})})):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new che(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Mpe.create=(e,t)=>new Mpe({innerType:e,typeName:Ope.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...She(t)});class Epe extends Che{_parse(e){if(this._getType(e)!==she.nan){const t=this._getOrReturnCtx(e);return hhe(t,{code:lhe.invalid_type,expected:she.nan,received:t.parsedType}),mhe}return{status:"valid",value:e.data}}}Epe.create=e=>new Epe({typeName:Ope.ZodNaN,...She(e)});class kpe extends Che{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Tpe extends Che{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?mhe:"dirty"===e.status?(t.dirty(),fhe(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?mhe:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new Tpe({in:e,out:t,typeName:Ope.ZodPipeline})}}class Ppe extends Che{_parse(e){const t=this._def.innerType._parse(e),n=e=>(yhe(e)&&(e.value=Object.freeze(e.value)),e);return bhe(t)?t.then(e=>n(e)):n(t)}unwrap(){return this._def.innerType}}var Ope,Rpe;Ppe.create=(e,t)=>new Ppe({innerType:e,typeName:Ope.ZodReadonly,...She(t)}),(Rpe=Ope||(Ope={})).ZodString="ZodString",Rpe.ZodNumber="ZodNumber",Rpe.ZodNaN="ZodNaN",Rpe.ZodBigInt="ZodBigInt",Rpe.ZodBoolean="ZodBoolean",Rpe.ZodDate="ZodDate",Rpe.ZodSymbol="ZodSymbol",Rpe.ZodUndefined="ZodUndefined",Rpe.ZodNull="ZodNull",Rpe.ZodAny="ZodAny",Rpe.ZodUnknown="ZodUnknown",Rpe.ZodNever="ZodNever",Rpe.ZodVoid="ZodVoid",Rpe.ZodArray="ZodArray",Rpe.ZodObject="ZodObject",Rpe.ZodUnion="ZodUnion",Rpe.ZodDiscriminatedUnion="ZodDiscriminatedUnion",Rpe.ZodIntersection="ZodIntersection",Rpe.ZodTuple="ZodTuple",Rpe.ZodRecord="ZodRecord",Rpe.ZodMap="ZodMap",Rpe.ZodSet="ZodSet",Rpe.ZodFunction="ZodFunction",Rpe.ZodLazy="ZodLazy",Rpe.ZodLiteral="ZodLiteral",Rpe.ZodEnum="ZodEnum",Rpe.ZodEffects="ZodEffects",Rpe.ZodNativeEnum="ZodNativeEnum",Rpe.ZodOptional="ZodOptional",Rpe.ZodNullable="ZodNullable",Rpe.ZodDefault="ZodDefault",Rpe.ZodCatch="ZodCatch",Rpe.ZodPromise="ZodPromise",Rpe.ZodBranded="ZodBranded",Rpe.ZodPipeline="ZodPipeline",Rpe.ZodReadonly="ZodReadonly";const Ipe=Yhe.create,Dpe=epe.create;ope.create,cpe.create;const Lpe=upe.create;hpe.create,mpe.create,fpe.create,wpe.create,Npe.create,Spe.create,Cpe.create;const Bpe=({children:e,title:t,subtitle:n})=>Qe.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 bg-black relative",children:[Qe.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[Qe.jsx("div",{className:"absolute -top-32 -right-32 w-72 h-72 bg-[#b983ff]/10 rounded-full blur-3xl"}),Qe.jsx("div",{className:"absolute -bottom-32 -left-32 w-72 h-72 bg-[#5f8fff]/10 rounded-full blur-3xl"}),Qe.jsx("div",{className:"absolute top-1/2 left-1/2 w-96 h-96 bg-[#3be8b0]/10 rounded-full blur-2xl -translate-x-1/2 -translate-y-1/2"})]}),Qe.jsx("div",{className:"relative w-full max-w-md z-10",children:Qe.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-3xl border border-white/20 p-8 shadow-2xl shadow-[#b983ff]/20",children:[Qe.jsxs("div",{className:"text-center mb-8",children:[Qe.jsx("h1",{className:"text-3xl font-bold text-white mb-2 drop-shadow-lg bg-gradient-to-r from-[#b983ff] via-[#5f8fff] to-[#3be8b0] bg-clip-text text-transparent font-dancing",children:t}),Qe.jsx("p",{className:"text-white/80 text-base font-medium",children:n})]}),e]})})]});var Fpe="Checkbox",[Upe]=jh(Fpe),[zpe,Hpe]=Upe(Fpe);function Vpe(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:i,disabled:a,form:s,name:o,onCheckedChange:l,required:c,value:d="on",internal_do_not_use_render:u}=e,[h,p]=Yh({prop:n,defaultProp:i??!1,onChange:l,caller:Fpe}),[m,f]=Ve.useState(null),[g,v]=Ve.useState(null),x=Ve.useRef(!1),y=!m||(!!s||!!m.closest("form")),b={checked:h,disabled:a,setChecked:p,control:m,setControl:f,name:o,form:s,value:d,hasConsumerStoppedPropagationRef:x,required:c,defaultChecked:!Zpe(i)&&i,isFormControl:y,bubbleInput:g,setBubbleInput:v};return Qe.jsx(zpe,{scope:t,...b,children:Jpe(u)?u(b):r})}var Gpe="CheckboxTrigger",Wpe=Ve.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},i)=>{const{control:a,value:s,disabled:o,checked:l,required:c,setControl:d,setChecked:u,hasConsumerStoppedPropagationRef:h,isFormControl:p,bubbleInput:m}=Hpe(Gpe,e),f=wh(i,d),g=Ve.useRef(l);return Ve.useEffect(()=>{const e=null==a?void 0:a.form;if(e){const t=()=>u(g.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[a,u]),Qe.jsx(Th.button,{type:"button",role:"checkbox","aria-checked":Zpe(l)?"mixed":l,"aria-required":c,"data-state":Qpe(l),"data-disabled":o?"":void 0,disabled:o,value:s,...r,ref:f,onKeyDown:xh(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:xh(n,e=>{u(e=>!!Zpe(e)||!e),m&&p&&(h.current=e.isPropagationStopped(),h.current||e.stopPropagation())})})});Wpe.displayName=Gpe;var Kpe=Ve.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:a,required:s,disabled:o,value:l,onCheckedChange:c,form:d,...u}=e;return Qe.jsx(Vpe,{__scopeCheckbox:n,checked:i,defaultChecked:a,disabled:o,required:s,onCheckedChange:c,name:r,form:d,value:l,internal_do_not_use_render:({isFormControl:e})=>Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(Wpe,{...u,ref:t,__scopeCheckbox:n}),e&&Qe.jsx(Ype,{__scopeCheckbox:n})]})})});Kpe.displayName=Fpe;var qpe="CheckboxIndicator",Xpe=Ve.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...i}=e,a=Hpe(qpe,n);return Qe.jsx(qh,{present:r||Zpe(a.checked)||!0===a.checked,children:Qe.jsx(Th.span,{"data-state":Qpe(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});Xpe.displayName=qpe;var $pe="CheckboxBubbleInput",Ype=Ve.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:a,defaultChecked:s,required:o,disabled:l,name:c,value:d,form:u,bubbleInput:h,setBubbleInput:p}=Hpe($pe,e),m=wh(n,p),f=Yne(a),g=vb(r);Ve.useEffect(()=>{const e=h;if(!e)return;const t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked").set,r=!i.current;if(f!==a&&n){const t=new Event("click",{bubbles:r});e.indeterminate=Zpe(a),n.call(e,!Zpe(a)&&a),e.dispatchEvent(t)}},[h,f,a,i]);const v=Ve.useRef(!Zpe(a)&&a);return Qe.jsx(Th.input,{type:"checkbox","aria-hidden":!0,defaultChecked:s??v.current,required:o,disabled:l,name:c,value:d,form:u,...t,tabIndex:-1,ref:m,style:{...t.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function Jpe(e){return"function"==typeof e}function Zpe(e){return"indeterminate"===e}function Qpe(e){return Zpe(e)?"indeterminate":e?"checked":"unchecked"}Ype.displayName=$pe;const eme=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(Kpe,{ref:n,className:Rv("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:Qe.jsx(Xpe,{className:Rv("flex items-center justify-center text-current"),children:Qe.jsx(gm,{className:"h-4 w-4"})})}));eme.displayName=Kpe.displayName;const tme=e=>{const{children:t,...n}=e;return Ge.createElement(iue.Provider,{value:n},t)},nme=Ve.createContext({}),rme=({...e})=>Qe.jsx(nme.Provider,{value:{name:e.name},children:Qe.jsx(pue,{...e})}),ime=()=>{const e=Ve.useContext(nme),t=Ve.useContext(ame),{getFieldState:n,formState:r}=aue(),i=n(e.name,r);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:a}=t;return{id:a,name:e.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...i}},ame=Ve.createContext({}),sme=Ve.forwardRef(({className:e,...t},n)=>{const r=Ve.useId();return Qe.jsx(ame.Provider,{value:{id:r},children:Qe.jsx("div",{ref:n,className:Rv("space-y-2",e),...t})})});sme.displayName="FormItem";const ome=Ve.forwardRef(({className:e,...t},n)=>{const{error:r,formItemId:i}=ime();return Qe.jsx(Rle,{ref:n,className:Rv(r&&"text-destructive",e),htmlFor:i,...t})});ome.displayName="FormLabel";const lme=Ve.forwardRef(({...e},t)=>{const{error:n,formItemId:r,formDescriptionId:i,formMessageId:a}=ime();return Qe.jsx(Sh,{ref:t,id:r,"aria-describedby":n?`${i} ${a}`:`${i}`,"aria-invalid":!!n,...e})});lme.displayName="FormControl";Ve.forwardRef(({className:e,...t},n)=>{const{formDescriptionId:r}=ime();return Qe.jsx("p",{ref:n,id:r,className:Rv("text-sm text-muted-foreground",e),...t})}).displayName="FormDescription";const cme=Ve.forwardRef(({className:e,children:t,...n},r)=>{const{error:i,formMessageId:a}=ime(),s=i?String(null==i?void 0:i.message):t;return s?Qe.jsx("p",{ref:r,id:a,className:Rv("text-sm font-medium text-destructive",e),...n,children:s}):null});cme.displayName="FormMessage";const dme=Lpe({email:Ipe().email("Email khng hp l"),password:Ipe().min(6,"Mt khu phi c t nht 6 k t"),rememberMe:Dpe().default(!1)}),ume=()=>{const[e,t]=Ge.useState(!1),[n,r]=Ge.useState({x:0,y:0}),i=Ge.useRef(null),{login:a,isLoading:s}=Pae(),o=Zj();Ge.useEffect(()=>{const e=e=>{if(i.current){const t=i.current.getBoundingClientRect(),n=t.left+t.width/2,a=t.top+t.height/2;r({x:e.clientX-n,y:e.clientY-a})}};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)},[]);const l=((e=6)=>{const t=Math.sqrt(n.x**2+n.y**2),r=Math.min(t/400,1),i=Math.atan2(n.y,n.x);return{x:Math.cos(i)*e*r,y:Math.sin(i)*e*r}})(),c=Yue({resolver:ahe(dme),defaultValues:{email:"",password:"",rememberMe:!1}}),d=`${window.location.origin}/callback/zalo`,u=`${window.location.origin}/callback/google`,h=`${window.location.origin}/callback/facebook`;return Qe.jsxs(Bpe,{title:"ng nhp",subtitle:"Cho mng bn quay tr li!",children:[Qe.jsx(QT.div,{ref:i,initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200,damping:15,delay:.2},className:"flex justify-center mb-6",children:Qe.jsxs("div",{className:"relative w-24 h-24",children:[Qe.jsx(QT.div,{animate:{rotate:[0,-8,0]},transition:{duration:2,repeat:1/0},className:"absolute -top-2 left-3 w-10 h-10 bg-gradient-to-br from-amber-600 to-amber-700 rounded-full shadow-lg"}),Qe.jsx(QT.div,{animate:{rotate:[0,8,0]},transition:{duration:2,repeat:1/0,delay:.2},className:"absolute -top-2 right-3 w-10 h-10 bg-gradient-to-br from-amber-600 to-amber-700 rounded-full shadow-lg"}),Qe.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500 to-amber-600 rounded-full shadow-xl border-2 border-amber-700/20",children:[Qe.jsx("div",{className:"absolute top-7 left-4 w-6 h-7 bg-white rounded-full shadow-inner",children:Qe.jsx(QT.div,{animate:{x:l.x,y:l.y},transition:{type:"spring",stiffness:500,damping:30},className:"absolute top-1 left-1 w-3 h-3 bg-gray-900 rounded-full",children:Qe.jsx("div",{className:"absolute top-0.5 left-0.5 w-1 h-1 bg-white rounded-full opacity-80"})})}),Qe.jsx("div",{className:"absolute top-7 right-4 w-6 h-7 bg-white rounded-full shadow-inner",children:Qe.jsx(QT.div,{animate:{x:l.x,y:l.y},transition:{type:"spring",stiffness:500,damping:30},className:"absolute top-1 left-1 w-3 h-3 bg-gray-900 rounded-full",children:Qe.jsx("div",{className:"absolute top-0.5 left-0.5 w-1 h-1 bg-white rounded-full opacity-80"})})}),Qe.jsx(QT.div,{animate:{scale:[1,1.1,1]},transition:{duration:1.5,repeat:1/0},className:"absolute bottom-7 left-1/2 -translate-x-1/2 w-5 h-4 bg-gray-900 rounded-full"})]})]})}),Qe.jsx(tme,{...c,children:Qe.jsxs("form",{onSubmit:c.handleSubmit(async e=>{await a(e.email,e.password,e.rememberMe)&&o("/")}),className:"space-y-6",children:[Qe.jsx(rme,{control:c.control,name:"email",render:({field:e})=>Qe.jsxs(sme,{children:[Qe.jsx(ome,{className:"text-white",children:"Email"}),Qe.jsx(lme,{children:Qe.jsxs("div",{className:"relative",children:[Qe.jsx(wf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/60 w-4 h-4"}),Qe.jsx(Vne,{...e,type:"email",placeholder:"Nhp email ca bn",className:"pl-10 bg-white/10 border-white/20 text-white placeholder:text-white/60 focus:border-white/40"})]})}),Qe.jsx(cme,{className:"text-red-300"})]})}),Qe.jsx(rme,{control:c.control,name:"password",render:({field:n})=>Qe.jsxs(sme,{children:[Qe.jsx(ome,{className:"text-white",children:"Mt khu"}),Qe.jsx(lme,{children:Qe.jsxs("div",{className:"relative",children:[Qe.jsx(yf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/60 w-4 h-4"}),Qe.jsx(Vne,{...n,type:e?"text":"password",placeholder:"Nhp mt khu",className:"pl-10 pr-10 bg-white/10 border-white/20 text-white placeholder:text-white/60 focus:border-white/40"}),Qe.jsx("button",{type:"button",onClick:()=>t(!e),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/60 hover:text-white",children:e?Qe.jsx(Hm,{className:"w-4 h-4"}):Qe.jsx(Vm,{className:"w-4 h-4"})})]})}),Qe.jsx(cme,{className:"text-red-300"})]})}),Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsx(rme,{control:c.control,name:"rememberMe",render:({field:e})=>Qe.jsxs(sme,{className:"flex items-center space-x-2 space-y-0",children:[Qe.jsx(lme,{children:Qe.jsx(eme,{checked:e.value,onCheckedChange:e.onChange,className:"border-white/20 data-[state=checked]:bg-white data-[state=checked]:text-primary"})}),Qe.jsx(ome,{className:"text-white/80 cursor-pointer",children:"Ghi nh ng nhp"})]})}),Qe.jsx(AN,{to:"/forgot-password",className:"text-white/80 hover:text-white text-sm",children:"Qun mt khu?"})]}),Qe.jsx(QT.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:Qe.jsx(AP,{type:"submit",className:"w-full py-6 bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90 text-white font-bold text-lg rounded-xl shadow-lg shadow-primary/30 transition-all group",disabled:s,children:s?Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"ang ng nhp..."]}):Qe.jsxs("div",{className:"flex items-center gap-2",children:["ng nhp",Qe.jsx(Qp,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})})}),Qe.jsxs(QT.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"flex items-center justify-center gap-2 px-4 py-2 bg-green-500/10 border border-green-500/30 rounded-lg",children:[Qe.jsx(ag,{className:"w-4 h-4 text-green-400"}),Qe.jsx("span",{className:"text-green-300 text-xs font-medium",children:"Kt ni c bo mt SSL"})]}),Qe.jsxs("div",{className:"relative",children:[Qe.jsx("div",{className:"absolute inset-0 flex items-center",children:Qe.jsx("span",{className:"w-full border-t border-white/20"})}),Qe.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:Qe.jsx("span",{className:"bg-transparent px-2 text-white/60",children:"Hoc ng nhp vi"})})]}),Qe.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[Qe.jsx(QT.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:Qe.jsxs(AP,{type:"button",variant:"outline",className:"w-full py-5 bg-white/10 border-white/20 text-white hover:bg-gradient-to-r hover:from-primary/20 hover:to-purple-600/20 rounded-xl transition-all group",onClick:()=>{const e=`https://accounts.google.com/o/oauth2/v2/auth?client_id=690084808144-mm016r153bdjg05p0pf4ft1rflt2nusa.apps.googleusercontent.com&redirect_uri=${encodeURIComponent(u)}&response_type=code&scope=openid email profile&state=google_oauth`;window.location.href=e},children:[Qe.jsx("img",{src:"/images/icons/google.png",alt:"Icon Google",className:"w-5 h-5 group-hover:scale-110 transition-transform"}),Qe.jsx("span",{className:"font-semibold",children:"ng nhp vi Google"})]})}),Qe.jsx(QT.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:Qe.jsxs(AP,{type:"button",variant:"outline",className:"w-full py-5 bg-white/10 border-white/20 text-white hover:bg-gradient-to-r hover:from-primary/20 hover:to-purple-600/20 rounded-xl transition-all group",onClick:()=>{const e=`https://www.facebook.com/v19.0/dialog/oauth?client_id=1128491382189315&redirect_uri=${encodeURIComponent(h)}&state=facebook_oauth&scope=email,public_profile`;window.location.href=e},children:[Qe.jsx("img",{src:"/images/icons/facebook.png",alt:"Icon Facebook",className:"w-5 h-5 group-hover:scale-110 transition-transform"}),Qe.jsx("span",{className:"font-semibold",children:"ng nhp vi Facebook"})]})}),Qe.jsx(QT.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:Qe.jsxs(AP,{type:"button",variant:"outline",className:"w-full py-5 bg-white/10 border-white/20 text-white hover:bg-gradient-to-r hover:from-primary/20 hover:to-purple-600/20 rounded-xl transition-all group",onClick:()=>{(()=>{const e=`https://oauth.zaloapp.com/v4/permission?app_id=1382038683045766552&redirect_uri=${encodeURIComponent(d)}&state=nguyenkyvy&scope=public_profile,email`;window.location.href=e})()},children:[Qe.jsx("img",{src:"/images/icons/zalo.png",alt:"Icon Zalo",className:"w-5 h-5 group-hover:scale-110 transition-transform"}),Qe.jsx("span",{className:"font-semibold",children:"ng nhp vi Zalo"})]})})]}),Qe.jsx("div",{className:"text-center",children:Qe.jsxs("p",{className:"text-white/80",children:["Cha c ti khon?"," ",Qe.jsx(AN,{to:"/register",className:"text-white hover:underline font-medium",children:"ng k ngay"})]})})]})})]})},hme=Lpe({name:Ipe().min(2,"Tn phi c t nht 2 k t"),email:Ipe().email("Email khng hp l"),password:Ipe().min(6,"Mt khu phi c t nht 6 k t"),confirmPassword:Ipe(),agreeToTerms:Dpe().refine(e=>!0===e,"Bn phi ng  vi iu khon")}).refine(e=>e.password===e.confirmPassword,{message:"Mt khu xc nhn khng khp",path:["confirmPassword"]}),pme=()=>{const[e,t]=Ge.useState(!1),[n,r]=Ge.useState(!1),[i,a]=Ge.useState({x:0,y:0}),s=Ge.useRef(null),{register:o,isLoading:l}=Pae(),c=Zj();Ge.useEffect(()=>{const e=e=>{if(s.current){const t=s.current.getBoundingClientRect(),n=t.left+t.width/2,r=t.top+t.height/2;a({x:e.clientX-n,y:e.clientY-r})}};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)},[]);const d=((e=6)=>{const t=Math.sqrt(i.x**2+i.y**2),n=Math.min(t/400,1),r=Math.atan2(i.y,i.x);return{x:Math.cos(r)*e*n,y:Math.sin(r)*e*n}})(),u=Yue({resolver:ahe(hme),defaultValues:{name:"",email:"",password:"",confirmPassword:"",agreeToTerms:!1}}),h=`${window.location.origin}/callback/zalo`,p=`${window.location.origin}/callback/google`,m=`${window.location.origin}/callback/facebook`;return Qe.jsxs(Bpe,{title:"ng k",subtitle:"To ti khon mi  bt u",children:[Qe.jsx(QT.div,{ref:s,initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200,damping:15,delay:.2},className:"flex justify-center mb-6",children:Qe.jsxs("div",{className:"relative w-24 h-24",children:[Qe.jsx(QT.div,{animate:{rotate:[0,-8,0]},transition:{duration:2,repeat:1/0},className:"absolute -top-2 left-3 w-10 h-10 bg-gradient-to-br from-amber-600 to-amber-700 rounded-full shadow-lg"}),Qe.jsx(QT.div,{animate:{rotate:[0,8,0]},transition:{duration:2,repeat:1/0,delay:.2},className:"absolute -top-2 right-3 w-10 h-10 bg-gradient-to-br from-amber-600 to-amber-700 rounded-full shadow-lg"}),Qe.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500 to-amber-600 rounded-full shadow-xl border-2 border-amber-700/20",children:[Qe.jsx("div",{className:"absolute top-7 left-4 w-6 h-7 bg-white rounded-full shadow-inner",children:Qe.jsx(QT.div,{animate:{x:d.x,y:d.y},transition:{type:"spring",stiffness:500,damping:30},className:"absolute top-1 left-1 w-3 h-3 bg-gray-900 rounded-full",children:Qe.jsx("div",{className:"absolute top-0.5 left-0.5 w-1 h-1 bg-white rounded-full opacity-80"})})}),Qe.jsx("div",{className:"absolute top-7 right-4 w-6 h-7 bg-white rounded-full shadow-inner",children:Qe.jsx(QT.div,{animate:{x:d.x,y:d.y},transition:{type:"spring",stiffness:500,damping:30},className:"absolute top-1 left-1 w-3 h-3 bg-gray-900 rounded-full",children:Qe.jsx("div",{className:"absolute top-0.5 left-0.5 w-1 h-1 bg-white rounded-full opacity-80"})})}),Qe.jsx(QT.div,{animate:{scale:[1,1.1,1]},transition:{duration:1.5,repeat:1/0},className:"absolute bottom-7 left-1/2 -translate-x-1/2 w-5 h-4 bg-gray-900 rounded-full"})]})]})}),Qe.jsx(tme,{...u,children:Qe.jsxs("form",{onSubmit:u.handleSubmit(async e=>{await o(e.email,e.password,e.name)&&c("/")}),className:"space-y-6",children:[Qe.jsx(rme,{control:u.control,name:"name",render:({field:e})=>Qe.jsxs(sme,{children:[Qe.jsx(ome,{className:"text-white",children:"H v tn"}),Qe.jsx(lme,{children:Qe.jsxs("div",{className:"relative",children:[Qe.jsx(Pg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/60 w-4 h-4"}),Qe.jsx(Vne,{...e,placeholder:"Nhp h v tn",className:"pl-10 bg-white/10 border-white/20 text-white placeholder:text-white/60 focus:border-white/40"})]})}),Qe.jsx(cme,{className:"text-red-300"})]})}),Qe.jsx(rme,{control:u.control,name:"email",render:({field:e})=>Qe.jsxs(sme,{children:[Qe.jsx(ome,{className:"text-white",children:"Email"}),Qe.jsx(lme,{children:Qe.jsxs("div",{className:"relative",children:[Qe.jsx(wf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/60 w-4 h-4"}),Qe.jsx(Vne,{...e,type:"email",placeholder:"Nhp email ca bn",className:"pl-10 bg-white/10 border-white/20 text-white placeholder:text-white/60 focus:border-white/40"})]})}),Qe.jsx(cme,{className:"text-red-300"})]})}),Qe.jsx(rme,{control:u.control,name:"password",render:({field:n})=>Qe.jsxs(sme,{children:[Qe.jsx(ome,{className:"text-white",children:"Mt khu"}),Qe.jsx(lme,{children:Qe.jsxs("div",{className:"relative",children:[Qe.jsx(yf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/60 w-4 h-4"}),Qe.jsx(Vne,{...n,type:e?"text":"password",placeholder:"Nhp mt khu",className:"pl-10 pr-10 bg-white/10 border-white/20 text-white placeholder:text-white/60 focus:border-white/40"}),Qe.jsx("button",{type:"button",onClick:()=>t(!e),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/60 hover:text-white",children:e?Qe.jsx(Hm,{className:"w-4 h-4"}):Qe.jsx(Vm,{className:"w-4 h-4"})})]})}),Qe.jsx(cme,{className:"text-red-300"})]})}),Qe.jsx(rme,{control:u.control,name:"confirmPassword",render:({field:e})=>Qe.jsxs(sme,{children:[Qe.jsx(ome,{className:"text-white",children:"Xc nhn mt khu"}),Qe.jsx(lme,{children:Qe.jsxs("div",{className:"relative",children:[Qe.jsx(yf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/60 w-4 h-4"}),Qe.jsx(Vne,{...e,type:n?"text":"password",placeholder:"Nhp li mt khu",className:"pl-10 pr-10 bg-white/10 border-white/20 text-white placeholder:text-white/60 focus:border-white/40"}),Qe.jsx("button",{type:"button",onClick:()=>r(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/60 hover:text-white",children:n?Qe.jsx(Hm,{className:"w-4 h-4"}):Qe.jsx(Vm,{className:"w-4 h-4"})})]})}),Qe.jsx(cme,{className:"text-red-300"})]})}),Qe.jsx(rme,{control:u.control,name:"agreeToTerms",render:({field:e})=>Qe.jsxs(sme,{className:"flex items-center space-x-2 space-y-0",children:[Qe.jsx(lme,{children:Qe.jsx(eme,{checked:e.value,onCheckedChange:e.onChange,className:"border-white/20 data-[state=checked]:bg-white data-[state=checked]:text-primary"})}),Qe.jsxs(ome,{className:"text-white/80 cursor-pointer text-sm",children:["Ti ng  vi"," ",Qe.jsx(AN,{to:"/terms",className:"text-white hover:underline",children:"iu khon s dng"})," ","v"," ",Qe.jsx(AN,{to:"/privacy",className:"text-white hover:underline",children:"Chnh sch bo mt"})]}),Qe.jsx(cme,{className:"text-red-300"})]})}),Qe.jsx(QT.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:Qe.jsx(AP,{type:"submit",className:"w-full py-6 bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90 text-white font-bold text-lg rounded-xl shadow-lg shadow-primary/30 transition-all group",disabled:l,children:l?Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"ang to ti khon..."]}):Qe.jsxs("div",{className:"flex items-center gap-2",children:["ng k",Qe.jsx(Qp,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})})}),Qe.jsxs(QT.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"flex items-center justify-center gap-2 px-4 py-2 bg-green-500/10 border border-green-500/30 rounded-lg",children:[Qe.jsx(ag,{className:"w-4 h-4 text-green-400"}),Qe.jsx("span",{className:"text-green-300 text-xs font-medium",children:"Kt ni c bo mt SSL"})]}),Qe.jsxs("div",{className:"relative",children:[Qe.jsx("div",{className:"absolute inset-0 flex items-center",children:Qe.jsx("span",{className:"w-full border-t border-white/20"})}),Qe.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:Qe.jsx("span",{className:"bg-transparent px-2 text-white/60",children:"Hoc ng k vi"})})]}),Qe.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[Qe.jsx(QT.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:Qe.jsxs(AP,{type:"button",variant:"outline",className:"w-full py-5 bg-white/10 border-white/20 text-white hover:bg-gradient-to-r hover:from-primary/20 hover:to-purple-600/20 rounded-xl transition-all group",onClick:()=>{const e=`https://accounts.google.com/o/oauth2/v2/auth?client_id=690084808144-mm016r153bdjg05p0pf4ft1rflt2nusa.apps.googleusercontent.com&redirect_uri=${encodeURIComponent(p)}&response_type=code&scope=openid email profile&state=google_oauth`;window.location.href=e},children:[Qe.jsx("img",{src:"/images/icons/google.png",alt:"Icon Google",className:"w-5 h-5 group-hover:scale-110 transition-transform"}),Qe.jsx("span",{className:"font-semibold",children:"ng k vi Google"})]})}),Qe.jsx(QT.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:Qe.jsxs(AP,{type:"button",variant:"outline",className:"w-full py-5 bg-white/10 border-white/20 text-white hover:bg-gradient-to-r hover:from-primary/20 hover:to-purple-600/20 rounded-xl transition-all group",onClick:()=>{const e=`https://www.facebook.com/v19.0/dialog/oauth?client_id=1128491382189315&redirect_uri=${encodeURIComponent(m)}&state=facebook_oauth&scope=email,public_profile`;window.location.href=e},children:[Qe.jsx("img",{src:"/images/icons/facebook.png",alt:"Icon Facebook",className:"w-5 h-5 group-hover:scale-110 transition-transform"}),Qe.jsx("span",{className:"font-semibold",children:"ng k vi Facebook"})]})}),Qe.jsx(QT.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:Qe.jsxs(AP,{type:"button",variant:"outline",className:"w-full py-5 bg-white/10 border-white/20 text-white hover:bg-gradient-to-r hover:from-primary/20 hover:to-purple-600/20 rounded-xl transition-all group",onClick:()=>{const e=`https://oauth.zaloapp.com/v4/permission?app_id=1382038683045766552&redirect_uri=${encodeURIComponent(h)}&state=nguyenkyvy&scope=public_profile,email`;window.location.href=e},children:[Qe.jsx("img",{src:"/images/icons/zalo.png",alt:"Icon Zalo",className:"w-5 h-5 group-hover:scale-110 transition-transform"}),Qe.jsx("span",{className:"font-semibold",children:"ng k vi Zalo"})]})})]}),Qe.jsx("div",{className:"text-center",children:Qe.jsxs("p",{className:"text-white/80",children:[" c ti khon?"," ",Qe.jsx(AN,{to:"/login",className:"text-white hover:underline font-medium",children:"ng nhp ngay"})]})})]})})]})},mme=()=>{const[e,t]=Ve.useState(!1),[n,r]=Ve.useState(!1),[i,a]=Ve.useState(null),s={name:"Nguyn K V",email:"kyvydev@gmail.com",phone:"0901234567",avatar:"/images/avatars/Avt-Vy.jpg",bio:"Yu thch mua sm v chia s nhng sn phm tuyt vi vi cng ng.",address:"C Thnh, Triu Phong, Qung Tr",joinDate:"Thng 3, 2023",points:1250,level:"Gold Member",stats:{totalOrders:45,reviews:23,followers:156,following:89}},o=[{name:"Lm p",value:35,amount:875e4,color:"hsl(var(--primary))"},{name:"Thi trang",value:25,amount:625e4,color:"hsl(var(--accent))"},{name:"in t",value:20,amount:5e6,color:"hsl(var(--success))"},{name:"Gia dng",value:12,amount:3e6,color:"hsl(var(--warning))"},{name:"Khc",value:8,amount:2e6,color:"hsl(var(--muted-foreground))"}],l=({active:e,payload:t})=>{if(!e||!t||!t.length)return null;const n=t[0].payload,r=t[0].value,i=n.color||"hsl(var(--primary))",a=n.amount??0;return Qe.jsxs("div",{style:{background:i,color:"background",padding:"8px 12px",borderRadius:8,boxShadow:"0 4px 12px rgba(0,0,0,0.12)",border:"1px solid rgba(255,255,255,0.08)",minWidth:140},children:[Qe.jsx("div",{style:{fontWeight:700,fontSize:13},children:n.name}),Qe.jsxs("div",{style:{fontSize:12,opacity:.95,marginTop:4},children:[r,"%  ",(a/1e6).toFixed(1),"M "]})]})},c=[{title:"Khch hng trung thnh",description:"Mua sm 12 thng lin tip",progress:100,icon:Ag,earned:!0,color:"hsl(var(--warning))"},{title:"Ngi nh hng",description:"C 100+ ngi theo di",progress:156,target:100,icon:Og,earned:!0,color:"hsl(var(--primary))"},{title:"Chuyn gia nh gi",description:"Vit 50 nh gi sn phm",progress:23,target:50,icon:fg,earned:!1,color:"hsl(var(--accent))"},{title:"Tn  mua sm",description:"Chi tiu 50 triu trong nm",progress:25,target:50,icon:yg,earned:!1,color:"hsl(var(--success))"}],d=[{name:"iPhone 15 Pro",price:289e5,image:"/placeholder.svg",category:"in t"},{name:"Ti Chanel Classic",price:89e6,image:"/placeholder.svg",category:"Thi trang"},{name:"Serum Vitamin C",price:12e5,image:"/placeholder.svg",category:"Lm p"},{name:"My pha c ph",price:15e6,image:"/placeholder.svg",category:"Gia dng"}],u=[{type:"review",content:"nh gi 5 sao cho Kem dng da Olay",time:"2 gi trc",icon:fg},{type:"order",content:"t hng thnh cng #DH001234",time:"1 ngy trc",icon:lg},{type:"follow",content:"Theo di ca hng Beauty World",time:"3 ngy trc",icon:sf},{type:"post",content:"Chia s bi vit v xu hng thi trang",time:"5 ngy trc",icon:Uf}];return Qe.jsx("div",{className:"min-h-screen bg-background",children:Qe.jsx("div",{className:"mx-auto px-4 py-6",children:Qe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[Qe.jsx(QT.aside,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"lg:col-span-1",children:Qe.jsxs("div",{className:"sticky top-6 space-y-4",children:[Qe.jsxs(DP,{className:"overflow-hidden border-none shadow-2xl",children:[Qe.jsx("div",{className:"h-32 bg-gradient-to-r from-primary via-purple-500 to-pink-500 relative overflow-hidden",children:Qe.jsx(QT.div,{className:"absolute inset-0 opacity-30",animate:{backgroundPosition:["0% 0%","100% 100%"]},transition:{duration:20,repeat:1/0,repeatType:"reverse"},style:{backgroundImage:"radial-gradient(circle, white 1px, transparent 1px)",backgroundSize:"20px 20px"}})}),Qe.jsxs(UP,{className:"relative pt-0 pb-6",children:[Qe.jsxs("div",{className:"flex flex-col items-center -mt-16",children:[Qe.jsxs(QT.div,{className:"relative",whileHover:{scale:1.05},transition:{type:"spring",stiffness:300},children:[Qe.jsxs(AD,{className:"w-32 h-32 border-4 border-background shadow-2xl ring-4 ring-primary/20",children:[Qe.jsx(MD,{src:i||s.avatar,alt:s.name}),Qe.jsx(ED,{className:"text-3xl bg-gradient-to-br from-primary to-purple-600 text-white",children:s.name[0]})]}),Qe.jsxs(FR,{open:n,onOpenChange:r,children:[Qe.jsx(UR,{asChild:!0,children:Qe.jsx(QT.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:Qe.jsx(AP,{size:"icon",className:"absolute -bottom-2 -right-2 w-10 h-10 rounded-full shadow-lg bg-gradient-to-r from-primary to-purple-600 hover:opacity-90",children:Qe.jsx(hm,{className:"w-5 h-5"})})})}),Qe.jsxs(VR,{className:"sm:max-w-md",children:[Qe.jsxs(GR,{children:[Qe.jsxs(KR,{className:"flex items-center gap-2",children:[Qe.jsx(hm,{className:"w-5 h-5 text-primary"}),"Thay i nh i din"]}),Qe.jsx(qR,{children:"Chn mt nh mi  lm nh i din ca bn"})]}),Qe.jsx("div",{className:"space-y-4 py-4",children:Qe.jsxs("div",{className:"flex flex-col items-center gap-4",children:[Qe.jsxs(AD,{className:"w-40 h-40 border-4 border-primary/20 shadow-2xl",children:[Qe.jsx(MD,{src:i||s.avatar,alt:"Preview"}),Qe.jsx(ED,{className:"text-5xl",children:s.name[0]})]}),Qe.jsxs("div",{className:"w-full space-y-2",children:[Qe.jsx(Rle,{htmlFor:"avatar-upload",className:"text-sm font-medium",children:"Chn nh t thit b ca bn"}),Qe.jsx(Vne,{id:"avatar-upload",type:"file",accept:"image/*",onChange:e=>{var t;const n=null==(t=e.target.files)?void 0:t[0];if(n){if(n.size>5242880)return void px.error("Kch thc nh khng c vt qu 5MB");const e=new FileReader;e.onloadend=()=>{a(e.result)},e.readAsDataURL(n)}},className:"cursor-pointer file:mr-4 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-primary-foreground hover:file:bg-primary/90"}),Qe.jsx("p",{className:"text-xs text-muted-foreground",children:"nh dng: JPG, PNG, GIF. Kch thc ti a: 5MB"})]})]})}),Qe.jsxs(WR,{className:"flex-col sm:flex-row gap-2",children:[Qe.jsx(AP,{variant:"outline",onClick:()=>{r(!1),a(null)},className:"w-full sm:w-auto",children:"Hy"}),Qe.jsxs(AP,{onClick:()=>{i&&(px.success("Avatar  c cp nht thnh cng!"),r(!1))},disabled:!i,className:"w-full sm:w-auto bg-gradient-to-r from-primary to-purple-600",children:[Qe.jsx(Jf,{className:"w-4 h-4 mr-2"}),"Lu nh i din"]})]})]})]}),Qe.jsx(QT.div,{className:"absolute -top-1 -right-1 w-8 h-8 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center shadow-lg",animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0},children:Qe.jsx(Im,{className:"w-4 h-4 text-white"})})]}),Qe.jsx(QT.h2,{className:"mt-4 text-2xl font-bold text-center bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:s.name}),Qe.jsx("p",{className:"text-sm text-muted-foreground text-center mt-2 px-4",children:s.bio}),Qe.jsxs("div",{className:"flex gap-2 mt-4 flex-wrap justify-center",children:[Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(EP,{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white border-none shadow-lg px-3 py-1.5",children:[Qe.jsx(Im,{className:"w-3.5 h-3.5 mr-1"}),s.level]})}),Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(EP,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white border-none shadow-lg px-3 py-1.5",children:[Qe.jsx(pg,{className:"w-3.5 h-3.5 mr-1"}),s.points," im"]})})]}),Qe.jsxs(FR,{open:e,onOpenChange:t,children:[Qe.jsx(UR,{asChild:!0,children:Qe.jsx(QT.div,{className:"w-full mt-4",whileHover:{scale:1.02},whileTap:{scale:.98},children:Qe.jsxs(AP,{className:"w-full bg-gradient-to-r from-primary to-purple-600 hover:opacity-90 shadow-lg",variant:"default",children:[Qe.jsx(Uf,{className:"w-4 h-4 mr-2"}),"Chnh sa h s"]})})}),Qe.jsxs(VR,{className:"sm:max-w-[500px]",children:[Qe.jsxs(GR,{children:[Qe.jsx(KR,{children:"Chnh sa thng tin c nhn"}),Qe.jsx(qR,{children:"Cp nht thng tin c nhn ca bn"})]}),Qe.jsxs("div",{className:"space-y-4 py-4",children:[Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"edit-name",children:"H v tn"}),Qe.jsx(Vne,{id:"edit-name",defaultValue:s.name})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"edit-email",children:"Email"}),Qe.jsx(Vne,{id:"edit-email",type:"email",defaultValue:s.email})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"edit-phone",children:"S in thoi"}),Qe.jsx(Vne,{id:"edit-phone",defaultValue:s.phone})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"edit-bio",children:"Gii thiu"}),Qe.jsx(Hne,{id:"edit-bio",defaultValue:s.bio,rows:3})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"edit-address",children:"a ch"}),Qe.jsx(Vne,{id:"edit-address",defaultValue:s.address})]})]}),Qe.jsxs("div",{className:"flex justify-end gap-3",children:[Qe.jsx(AP,{variant:"outline",onClick:()=>t(!1),children:"Hy"}),Qe.jsxs(AP,{onClick:()=>t(!1),className:"bg-gradient-to-r from-primary to-purple-600",children:[Qe.jsx(Jf,{className:"w-4 h-4 mr-2"}),"Lu thay i"]})]})]})]})]}),Qe.jsx("div",{className:"grid grid-cols-2 gap-3 mt-6 pt-6 border-t",children:[{icon:Rf,value:s.stats.totalOrders,label:"n hng",color:"from-blue-500 to-cyan-500"},{icon:fg,value:s.stats.reviews,label:"nh gi",color:"from-yellow-500 to-orange-500"},{icon:Og,value:s.stats.followers,label:"Followers",color:"from-green-500 to-emerald-500"},{icon:Tg,value:s.stats.following,label:"Following",color:"from-purple-500 to-pink-500"}].map((e,t)=>Qe.jsxs(QT.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.1*t},whileHover:{y:-4},className:"text-center p-4 rounded-xl bg-gradient-to-br from-muted/50 to-muted/30 hover:shadow-lg transition-shadow",children:[Qe.jsx("div",{className:`w-10 h-10 mx-auto mb-2 rounded-full bg-gradient-to-r ${e.color} flex items-center justify-center shadow-lg`,children:Qe.jsx(e.icon,{className:"w-5 h-5 text-white"})}),Qe.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:e.value}),Qe.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:e.label})]},t))})]})]}),Qe.jsxs(DP,{className:"border-none shadow-xl overflow-hidden",children:[Qe.jsx(LP,{className:"bg-gradient-to-r from-yellow-500/10 to-orange-500/10 border-b",children:Qe.jsxs(BP,{className:"flex items-center gap-2",children:[Qe.jsx("div",{className:"p-2 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-lg",children:Qe.jsx(tm,{className:"w-5 h-5 text-white"})}),"Thnh tch & Huy hiu"]})}),Qe.jsx(UP,{className:"pt-6",children:Qe.jsx("div",{className:"grid grid-cols-2 gap-4",children:c.map((e,t)=>Qe.jsxs(QT.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.1*t},whileHover:{y:-4,scale:1.05},className:"p-4 rounded-xl shadow-md flex flex-col items-center text-center border-2 transition-all "+(e.earned?"border-transparent bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-950/20 dark:to-orange-950/20":"border-dashed border-muted-foreground/20 bg-muted/30"),children:[Qe.jsx(QT.div,{className:"w-16 h-16 rounded-full flex items-center justify-center mb-3 "+(e.earned?"shadow-lg":""),style:{background:e.earned?`linear-gradient(135deg, ${e.color}, ${e.color}dd)`:`${e.color}20`},animate:e.earned?{rotate:[0,10,-10,0],scale:[1,1.1,1]}:{},transition:{duration:2,repeat:1/0,repeatDelay:3},children:Qe.jsx(e.icon,{className:"w-8 h-8 "+(e.earned,""),style:{color:e.earned?"":e.color}})}),Qe.jsx("h4",{className:"text-sm font-semibold mb-1 line-clamp-1",children:e.title}),Qe.jsx("p",{className:"text-xs text-muted-foreground mb-3 line-clamp-2",children:e.description}),e.earned?Qe.jsxs(EP,{className:"px-2 py-1 text-xs bg-gradient-to-r from-green-500 to-emerald-500 text-white border-none shadow-md",children:[Qe.jsx(Nm,{className:"w-3 h-3 mr-1"}),"Hon thnh"]}):null,!e.earned&&e.target&&Qe.jsxs("div",{className:"w-full mt-2",children:[Qe.jsxs("div",{className:"flex justify-between text-xs mb-2 font-medium",children:[Qe.jsx("span",{className:"text-primary",children:e.progress}),Qe.jsx("span",{className:"text-muted-foreground",children:e.target})]}),Qe.jsx(bae,{value:e.progress/e.target*100,className:"h-2 w-full"})]})]},t))})})]})]})}),Qe.jsx(QT.main,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"lg:col-span-2",children:Qe.jsxs(tae,{defaultValue:"dashboard",className:"space-y-6",children:[Qe.jsxs(nae,{className:"w-full grid grid-cols-4 h-auto p-1 bg-card shadow-md",children:[Qe.jsxs(rae,{value:"dashboard",className:"peer data-[state=active]:border-b-2 data-[state=active]:border-primary data-[state=active]:pb-2",children:[Qe.jsx(Sg,{className:"w-4 h-4 mr-2"}),"Dashboard"]}),Qe.jsxs(rae,{value:"activity",className:"peer data-[state=active]:border-b-2 data-[state=active]:border-primary data-[state=active]:pb-2",children:[Qe.jsx(Af,{className:"w-4 h-4 mr-2"}),"Hot ng"]}),Qe.jsxs(rae,{value:"wishlist",className:"peer data-[state=active]:border-b-2 data-[state=active]:border-primary data-[state=active]:pb-2",children:[Qe.jsx(sf,{className:"w-4 h-4 mr-2"}),"Wishlist"]}),Qe.jsxs(rae,{value:"info",className:"peer data-[state=active]:border-b-2 data-[state=active]:border-primary data-[state=active]:pb-2",children:[Qe.jsx(Pg,{className:"w-4 h-4 mr-2"}),"Thng tin"]})]}),Qe.jsxs(iae,{value:"dashboard",className:"space-y-6",children:[Qe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Qe.jsx(DP,{className:"border border-primary/20 bg-primary/10 rounded-lg shadow-sm hover:shadow-md",children:Qe.jsx(UP,{className:"p-6",children:Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("div",{children:[Qe.jsx("p",{className:"text-sm font-medium text-primary/80 mb-1",children:"Chi tiu thng ny"}),Qe.jsx("p",{className:"text-3xl font-bold text-primary",children:"2.5M"}),Qe.jsxs("p",{className:"text-xs text-primary mt-1 flex items-center gap-1",children:[Qe.jsx(Sg,{className:"w-3 h-3"}),"+12% so vi thng trc"]})]}),Qe.jsx("div",{className:"w-12 h-12 rounded-full bg-primary flex items-center justify-center",children:Qe.jsx(Lm,{className:"w-6 h-6 text-white"})})]})})}),Qe.jsx(DP,{className:"border border-accent/20 bg-accent/10 rounded-lg shadow-sm hover:shadow-md",children:Qe.jsx(UP,{className:"p-6",children:Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("div",{children:[Qe.jsx("p",{className:"text-sm font-medium text-blue-500 mb-1",children:"im thng"}),Qe.jsx("p",{className:"text-3xl font-bold text-blue-500",children:s.points}),Qe.jsx("p",{className:"text-xs text-blue-500 mt-1",children:"Cn 250 im ln VIP"})]}),Qe.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center",children:Qe.jsx(Zm,{className:"w-6 h-6 text-white"})})]})})}),Qe.jsx(DP,{className:"border border-success/20 bg-success/10 rounded-lg shadow-sm hover:shadow-md",children:Qe.jsx(UP,{className:"p-6",children:Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("div",{children:[Qe.jsx("p",{className:"text-sm font-medium text-success/80 mb-1",children:"Cng ng"}),Qe.jsx("p",{className:"text-3xl font-bold text-success",children:"156"}),Qe.jsx("p",{className:"text-xs text-success/80 mt-1",children:"Tng tc tun ny"})]}),Qe.jsx("div",{className:"w-12 h-12 rounded-full bg-success flex items-center justify-center",children:Qe.jsx(af,{className:"w-6 h-6 text-white"})})]})})}),Qe.jsx(DP,{className:"border border-warning/20 bg-warning/10 rounded-lg shadow-sm hover:shadow-md",children:Qe.jsx(UP,{className:"p-6",children:Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("div",{children:[Qe.jsx("p",{className:"text-sm font-medium text-warning/80 mb-1",children:"Th hng"}),Qe.jsx("p",{className:"text-3xl font-bold text-warning",children:"#47"}),Qe.jsx("p",{className:"text-xs text-warning/80 mt-1",children:"Top 5% ngi dng"})]}),Qe.jsx("div",{className:"w-12 h-12 rounded-full bg-warning flex items-center justify-center",children:Qe.jsx(Ag,{className:"w-6 h-6 text-white"})})]})})})]}),Qe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:Qe.jsxs(DP,{className:"border-0 shadow-md",children:[Qe.jsx(LP,{className:"bg-gradient-to-r from-green-500/10 to-emerald-500/10 border-b",children:Qe.jsxs(BP,{className:"flex items-center gap-2",children:[Qe.jsx("div",{className:"p-2 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg",children:Qe.jsx(Sg,{className:"w-5 h-5 text-white"})}),"Chi tiu 6 thng gn y"]})}),Qe.jsx(UP,{className:"pt-6",children:Qe.jsx(NX,{width:"100%",height:280,children:Qe.jsxs(_ne,{data:[{month:"T1",amount:12e5,orders:3},{month:"T2",amount:8e5,orders:2},{month:"T3",amount:15e5,orders:4},{month:"T4",amount:22e5,orders:6},{month:"T5",amount:18e5,orders:5},{month:"T6",amount:25e5,orders:7}],children:[Qe.jsx("defs",{children:Qe.jsxs("linearGradient",{id:"colorAmount",x1:"0",y1:"0",x2:"0",y2:"1",children:[Qe.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),Qe.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]})}),Qe.jsx(See,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),Qe.jsx(fte,{dataKey:"month",stroke:"hsl(var(--muted-foreground))",fontSize:12}),Qe.jsx(Cte,{stroke:"hsl(var(--muted-foreground))",fontSize:12}),Qe.jsx(Xq,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}}),Qe.jsx(Hee,{type:"monotone",dataKey:"amount",stroke:"hsl(var(--primary))",strokeWidth:3,dot:{fill:"hsl(var(--primary))",r:6,strokeWidth:2,stroke:"hsl(var(--background))"},activeDot:{r:8},fill:"url(#colorAmount)"})]})})})]})}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:Qe.jsxs(DP,{className:"border-0 shadow-md",children:[Qe.jsx(LP,{className:"bg-gradient-to-r from-green-500/10 to-emerald-500/10 border-b",children:Qe.jsxs(BP,{className:"flex items-center gap-2",children:[Qe.jsx("div",{className:"p-2 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg",children:Qe.jsx(yg,{className:"w-5 h-5 text-white"})}),"Danh mc yu thch"]})}),Qe.jsx(UP,{className:"pt-6",children:Qe.jsx(NX,{width:"100%",height:280,children:Qe.jsxs(Cne,{children:[Qe.jsx(t8,{data:o,cx:"50%",cy:"45%",innerRadius:60,outerRadius:90,paddingAngle:5,dataKey:"value",label:!1,children:o.map((e,t)=>Qe.jsx(_X,{fill:e.color},`cell-${t}`))}),Qe.jsx(Xq,{content:Qe.jsx(l,{})}),Qe.jsx("text",{x:"50%",y:"42%",textAnchor:"middle",dominantBaseline:"middle",className:"text-3xl font-bold fill-foreground",children:"100%"}),Qe.jsx("text",{x:"50%",y:"52%",textAnchor:"middle",dominantBaseline:"middle",className:"text-sm fill-muted-foreground",children:"Tng danh mc"}),Qe.jsx(pK,{verticalAlign:"bottom",height:36,iconType:"circle",formatter:e=>Qe.jsx("span",{className:"text-xs",children:e})})]})})})]})}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"lg:col-span-2",children:Qe.jsxs(DP,{className:"border-0 shadow-md",children:[Qe.jsx(LP,{className:"bg-gradient-to-r from-green-500/10 to-emerald-500/10 border-b",children:Qe.jsxs(BP,{className:"flex items-center gap-2",children:[Qe.jsx("div",{className:"p-2 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg",children:Qe.jsx(Af,{className:"w-5 h-5 text-white"})}),"Hot ng cng ng"]})}),Qe.jsx(UP,{className:"pt-6",children:Qe.jsx(NX,{width:"100%",height:280,children:Qe.jsxs(Sne,{data:[{month:"T7",posts:5,likes:45,comments:12},{month:"T8",posts:8,likes:67,comments:18},{month:"T9",posts:6,likes:52,comments:15},{month:"T10",posts:12,likes:98,comments:25},{month:"T11",posts:9,likes:76,comments:20},{month:"T12",posts:15,likes:124,comments:32}],children:[Qe.jsx(See,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),Qe.jsx(fte,{dataKey:"month",stroke:"hsl(var(--muted-foreground))"}),Qe.jsx(Cte,{stroke:"hsl(var(--muted-foreground))"}),Qe.jsx(Xq,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}}),Qe.jsx(pK,{}),Qe.jsx(y9,{dataKey:"posts",fill:"hsl(var(--primary))",name:"Bi vit",radius:[8,8,0,0]}),Qe.jsx(y9,{dataKey:"likes",fill:"hsl(var(--accent))",name:"Lt thch",radius:[8,8,0,0]}),Qe.jsx(y9,{dataKey:"comments",fill:"hsl(var(--success))",name:"Bnh lun",radius:[8,8,0,0]})]})})})]})})]})]}),Qe.jsx(iae,{value:"activity",className:"space-y-4",children:Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:Qe.jsxs(DP,{className:"border-none shadow-xl",children:[Qe.jsx(LP,{className:"bg-gradient-to-r from-primary/10 to-purple-500/10 border-b",children:Qe.jsxs(BP,{className:"flex items-center gap-2",children:[Qe.jsx(Em,{className:"w-5 h-5 text-primary"}),"Hot ng gn y"]})}),Qe.jsx(UP,{className:"pt-6",children:Qe.jsx("div",{className:"space-y-4",children:u.map((e,t)=>Qe.jsxs(QT.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},whileHover:{x:4},className:"flex items-start gap-4 p-4 rounded-xl border-2 border-transparent hover:border-primary/20 bg-gradient-to-r from-muted/50 to-muted/30 hover:shadow-lg transition-all group",children:[Qe.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-primary to-purple-600 flex items-center justify-center flex-shrink-0 shadow-lg group-hover:scale-110 transition-transform",children:Qe.jsx(e.icon,{className:"w-6 h-6 text-white"})}),Qe.jsxs("div",{className:"flex-1",children:[Qe.jsx("p",{className:"text-sm font-medium mb-1 group-hover:text-primary transition-colors",children:e.content}),Qe.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[Qe.jsx(Em,{className:"w-3 h-3"}),e.time]})]}),Qe.jsx(ym,{className:"w-5 h-5 text-muted-foreground group-hover:text-primary transition-colors"})]},t))})})]})})}),Qe.jsx(iae,{value:"wishlist",className:"space-y-4",children:Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:Qe.jsxs(DP,{className:"border-none shadow-xl",children:[Qe.jsx(LP,{className:"bg-gradient-to-r from-green-500/10 to-emerald-500/10 border-b",children:Qe.jsxs(BP,{className:"flex items-center justify-between",children:[Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx(sf,{className:"w-5 h-5 text-pink-500"}),"Danh sch yu thch"]}),Qe.jsxs(EP,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white",children:[d.length," sn phm"]})]})}),Qe.jsx(UP,{className:"pt-6",children:Qe.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map((e,t)=>Qe.jsxs(QT.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1*t},whileHover:{y:-4,scale:1.02},className:"flex items-center gap-4 p-4 rounded-xl border-2 border-transparent hover:border-primary/20 bg-gradient-to-r from-muted/50 to-muted/30 hover:shadow-xl transition-all group",children:[Qe.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-primary/20 to-purple-500/20 rounded-xl flex items-center justify-center flex-shrink-0 shadow-md group-hover:shadow-lg transition-shadow",children:Qe.jsx(Zm,{className:"w-10 h-10 text-primary"})}),Qe.jsxs("div",{className:"flex-1 min-w-0",children:[Qe.jsx("h4",{className:"font-semibold text-sm mb-1 line-clamp-2 group-hover:text-primary transition-colors",children:e.name}),Qe.jsx(EP,{variant:"outline",className:"text-xs mb-2",children:e.category}),Qe.jsxs("p",{className:"font-bold text-base bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:[e.price.toLocaleString("vi-VN"),""]})]}),Qe.jsx(QT.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:Qe.jsx(AP,{size:"sm",className:"flex-shrink-0 bg-gradient-to-r from-primary to-purple-600 hover:opacity-90 shadow-lg",children:Qe.jsx(lg,{className:"w-4 h-4"})})})]},t))})})]})})}),Qe.jsx(iae,{value:"info",className:"space-y-6",children:Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:Qe.jsxs(DP,{className:"border-none shadow-xl",children:[Qe.jsx(LP,{className:"bg-gradient-to-r from-primary/10 to-purple-500/10 border-b",children:Qe.jsxs(BP,{className:"flex items-center gap-2",children:[Qe.jsx(Pg,{className:"w-5 h-5 text-primary"}),"Thng tin c bn"]})}),Qe.jsxs(UP,{className:"space-y-6 pt-6",children:[Qe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Qe.jsxs(QT.div,{className:"space-y-2",whileFocus:{scale:1.02},children:[Qe.jsxs(Rle,{htmlFor:"name",className:"flex items-center gap-2 text-sm font-medium",children:[Qe.jsx(Pg,{className:"w-4 h-4 text-primary"}),"H v tn"]}),Qe.jsx(Vne,{id:"name",defaultValue:s.name,className:"border-2 focus:border-primary transition-all"})]}),Qe.jsxs(QT.div,{className:"space-y-2",whileFocus:{scale:1.02},children:[Qe.jsxs(Rle,{htmlFor:"email",className:"flex items-center gap-2 text-sm font-medium",children:[Qe.jsx(wf,{className:"w-4 h-4 text-primary"}),"Email"]}),Qe.jsx(Vne,{id:"email",type:"email",defaultValue:s.email,className:"border-2 focus:border-primary transition-all"})]}),Qe.jsxs(QT.div,{className:"space-y-2",whileFocus:{scale:1.02},children:[Qe.jsxs(Rle,{htmlFor:"phone",className:"flex items-center gap-2 text-sm font-medium",children:[Qe.jsx(Vf,{className:"w-4 h-4 text-primary"}),"S in thoi"]}),Qe.jsx(Vne,{id:"phone",defaultValue:s.phone,className:"border-2 focus:border-primary transition-all"})]}),Qe.jsxs(QT.div,{className:"space-y-2",whileFocus:{scale:1.02},children:[Qe.jsxs(Rle,{htmlFor:"joinDate",className:"flex items-center gap-2 text-sm font-medium",children:[Qe.jsx(um,{className:"w-4 h-4 text-primary"}),"Ngy tham gia"]}),Qe.jsx(Vne,{id:"joinDate",defaultValue:s.joinDate,disabled:!0,className:"border-2 bg-muted"})]})]}),Qe.jsx(ng,{}),Qe.jsxs(QT.div,{className:"space-y-2",whileFocus:{scale:1.02},children:[Qe.jsx(Rle,{htmlFor:"bio",className:"text-sm font-medium",children:"Gii thiu bn thn"}),Qe.jsx(Hne,{id:"bio",defaultValue:s.bio,rows:4,className:"border-2 focus:border-primary transition-all resize-none"})]}),Qe.jsxs(QT.div,{className:"space-y-2",whileFocus:{scale:1.02},children:[Qe.jsxs(Rle,{htmlFor:"address",className:"flex items-center gap-2 text-sm font-medium",children:[Qe.jsx(jf,{className:"w-4 h-4 text-primary"}),"a ch"]}),Qe.jsx(Vne,{id:"address",defaultValue:s.address,className:"border-2 focus:border-primary transition-all"})]}),Qe.jsx(QT.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:Qe.jsxs(AP,{className:"w-full md:w-auto bg-gradient-to-r from-primary to-purple-600 hover:opacity-90 shadow-lg",children:[Qe.jsx(Jf,{className:"w-4 h-4 mr-2"}),"Lu thay i"]})})]})]})})})]})})]})})})},fme=()=>{const{user:e}=Pae(),t=Zj(),[n,r]=Ve.useState([]),[i,a]=Ve.useState(!0),[s,o]=Ve.useState(""),[l,c]=Ve.useState(null);Ve.useEffect(()=>{(null==e?void 0:e.id)&&d()},[null==e?void 0:e.id]);const d=()=>{a(!0),fetch(`http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/order/user_orders.php?user_id=${e.id}`).then(e=>e.json()).then(e=>{e.success&&r(e.orders),a(!1)}).catch(()=>{px.error("Khng th ti danh sch n hng"),a(!1)})},u=e=>{let t=n;return e&&(t=t.filter(t=>t.status===e)),s&&(t=t.filter(e=>{var t;return e.code.toLowerCase().includes(s.toLowerCase())||(null==(t=e.items)?void 0:t.some(e=>e.name.toLowerCase().includes(s.toLowerCase())))})),t},h=({order:e})=>{const n=(e=>{const t={pending:{label:"Ch xc nhn",variant:"warning",gradient:"from-yellow-500 to-orange-500",bg:"bg-yellow-50 dark:bg-yellow-950/20",border:"border-yellow-200 dark:border-yellow-800",text:"text-yellow-700 dark:text-yellow-300",icon:Em},processing:{label:"ang x l",variant:"info",gradient:"from-blue-500 to-cyan-500",bg:"bg-blue-50 dark:bg-blue-950/20",border:"border-blue-200 dark:border-blue-800",text:"text-blue-700 dark:text-blue-300",icon:Rf},shipped:{label:"ang giao",variant:"primary",gradient:"from-purple-500 to-pink-500",bg:"bg-purple-50 dark:bg-purple-950/20",border:"border-purple-200 dark:border-purple-800",text:"text-purple-700 dark:text-purple-300",icon:Mg},delivered:{label:" giao",variant:"success",gradient:"from-green-500 to-emerald-500",bg:"bg-green-50 dark:bg-green-950/20",border:"border-green-200 dark:border-green-800",text:"text-green-700 dark:text-green-300",icon:Nm},cancelled:{label:" hy",variant:"destructive",gradient:"from-red-500 to-pink-500",bg:"bg-red-50 dark:bg-red-950/20",border:"border-red-200 dark:border-red-800",text:"text-red-700 dark:text-red-300",icon:Am}};return t[e]||t.pending})(e.status),r=n.icon;return Qe.jsx(QT.div,{whileHover:{y:-4},transition:{duration:.2},children:Qe.jsxs(DP,{className:"overflow-hidden border-none shadow-lg hover:shadow-2xl transition-all duration-300",children:[Qe.jsx("div",{className:`p-4 bg-gradient-to-r ${n.gradient}`,children:Qe.jsxs("div",{className:"flex justify-between items-start text-white",children:[Qe.jsxs("div",{className:"space-y-1",children:[Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx(lg,{className:"w-5 h-5"}),Qe.jsxs("h3",{className:"font-bold text-lg",children:["n hng #",e.code]})]}),Qe.jsxs("div",{className:"flex items-center gap-4 text-xs opacity-90",children:[Qe.jsxs("div",{className:"flex items-center gap-1",children:[Qe.jsx(um,{className:"w-3.5 h-3.5"}),new Date(e.date).toLocaleDateString("vi-VN")]}),e.vendor&&Qe.jsxs("div",{className:"flex items-center gap-1",children:[Qe.jsx(Rf,{className:"w-3.5 h-3.5"}),e.vendor]})]})]}),Qe.jsxs("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-full",children:[Qe.jsx(r,{className:"w-4 h-4"}),Qe.jsx("span",{className:"text-sm font-semibold",children:n.label})]})]})}),Qe.jsxs(UP,{className:"p-5 space-y-4",children:[Qe.jsx("div",{className:"space-y-3",children:(e.items||[]).map((e,t)=>Qe.jsxs(QT.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center gap-4 p-3 rounded-xl bg-gradient-to-r from-muted/50 to-muted/30 hover:from-muted/70 hover:to-muted/50 transition-all group",children:[Qe.jsxs("div",{className:"relative",children:[Qe.jsx("div",{className:"w-16 h-16 rounded-xl overflow-hidden border-2 border-border group-hover:border-primary transition-all shadow-sm",children:e.image?Qe.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover"}):Qe.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary/20 to-purple-500/20 flex items-center justify-center",children:Qe.jsx(Rf,{className:"w-8 h-8 text-primary"})})}),Qe.jsx(EP,{className:"absolute -top-2 -right-2 w-6 h-6 p-0 flex items-center justify-center bg-primary text-xs",children:e.quantity})]}),Qe.jsxs("div",{className:"flex-1 min-w-0",children:[Qe.jsx("p",{className:"font-semibold text-sm line-clamp-2 group-hover:text-primary transition-colors",children:e.name}),Qe.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[Qe.jsxs(EP,{variant:"outline",className:"text-xs px-2 py-0.5",children:["SL: ",e.quantity]}),Qe.jsx("span",{className:"text-xs text-muted-foreground",children:""}),Qe.jsxs("span",{className:"text-xs font-semibold text-primary",children:[e.price.toLocaleString("vi-VN"),""]})]})]})]},t))}),Qe.jsx(ZR,{}),Qe.jsxs("div",{className:"space-y-2",children:[e.address&&Qe.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[Qe.jsx(jf,{className:"w-4 h-4 text-muted-foreground shrink-0 mt-0.5"}),Qe.jsx("span",{className:"text-muted-foreground flex-1",children:e.address})]}),e.phone&&Qe.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Qe.jsx(Vf,{className:"w-4 h-4 text-muted-foreground"}),Qe.jsx("span",{className:"text-muted-foreground",children:e.phone})]})]}),Qe.jsx(ZR,{}),Qe.jsxs("div",{className:"flex justify-between items-center p-4 rounded-xl bg-gradient-to-r from-primary/10 to-purple-500/10",children:[Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx(Lm,{className:"w-5 h-5 text-primary"}),Qe.jsx("span",{className:"text-sm font-medium",children:"Tng thanh ton"})]}),Qe.jsxs("span",{className:"font-bold text-xl bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:[e.total.toLocaleString("vi-VN"),""]})]}),e.tracking&&Qe.jsx(QT.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-3 rounded-xl bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20 border border-blue-200 dark:border-blue-800",children:Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx(Mg,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),Qe.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"M vn n"})]}),Qe.jsx("code",{className:"text-sm font-mono font-bold text-blue-600 dark:text-blue-400",children:e.tracking})]})}),Qe.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2",children:[Qe.jsxs(AP,{variant:"outline",size:"sm",className:"border-2 hover:border-primary hover:bg-primary/5",onClick:()=>t(`/orders/${e.code}`),children:[Qe.jsx(Vm,{className:"w-4 h-4 mr-2"}),"Chi tit"]}),"shipped"===e.status&&Qe.jsxs(AP,{variant:"outline",size:"sm",className:"border-2 border-purple-300 hover:border-purple-500 hover:bg-purple-50 dark:hover:bg-purple-950/20",children:[Qe.jsx(Mg,{className:"w-4 h-4 mr-2"}),"Theo di"]}),"delivered"===e.status&&Qe.jsxs(AP,{variant:"outline",size:"sm",className:"border-2 border-green-300 hover:border-green-500 hover:bg-green-50 dark:hover:bg-green-950/20",onClick:()=>{return n=e.id,void t(`/orders/${n}/review`);var n},children:[Qe.jsx(Af,{className:"w-4 h-4 mr-2"}),"nh gi"]}),"processing"===e.status&&Qe.jsxs(AP,{variant:"destructive",size:"sm",className:"border-2",children:[Qe.jsx(Am,{className:"w-4 h-4 mr-2"}),"Hy n"]})]})]})]})})},p=()=>{const e=[{label:"Tng n hng",value:n.length,icon:lg,color:"text-blue-600",bg:"bg-blue-50 dark:bg-blue-950/20",gradient:"from-blue-500 to-cyan-500"},{label:"ang x l",value:u("processing").length,icon:Rf,color:"text-purple-600",bg:"bg-purple-50 dark:bg-purple-950/20",gradient:"from-purple-500 to-pink-500"},{label:" giao",value:u("delivered").length,icon:Nm,color:"text-green-600",bg:"bg-green-50 dark:bg-green-950/20",gradient:"from-green-500 to-emerald-500"},{label:" hy",value:u("cancelled").length,icon:Am,color:"text-red-600",bg:"bg-red-50 dark:bg-red-950/20",gradient:"from-red-500 to-pink-500"}];return Qe.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:e.map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},whileHover:{y:-4},children:Qe.jsx(DP,{className:"overflow-hidden border-none shadow-lg hover:shadow-xl transition-all",children:Qe.jsx(UP,{className:"p-5",children:Qe.jsxs("div",{className:"flex items-start justify-between",children:[Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx("p",{className:"text-sm text-muted-foreground",children:e.label}),Qe.jsx("p",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:e.value})]}),Qe.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${e.gradient} shadow-lg`,children:Qe.jsx(e.icon,{className:"w-6 h-6 text-white"})})]})})})},e.label))})};return i?Qe.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-950 flex items-center justify-center",children:Qe.jsxs("div",{className:"text-center space-y-4",children:[Qe.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto"}),Qe.jsx("p",{className:"text-muted-foreground",children:"ang ti n hng..."})]})}):Qe.jsx("div",{className:"min-h-screen bg-background/10",children:Qe.jsxs("div",{className:"container mx-auto px-4 py-8",children:[Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:Qe.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Qe.jsxs("div",{children:[Qe.jsxs("h1",{className:"text-4xl font-bold mb-2 flex items-center gap-3",children:[Qe.jsx("div",{className:"p-3 bg-gradient-to-br from-primary to-purple-600 rounded-2xl shadow-lg",children:Qe.jsx(Rf,{className:"w-8 h-8 text-white"})}),Qe.jsx("span",{className:"bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:"Qun l n hng"})]}),Qe.jsx("p",{className:"text-muted-foreground ml-14",children:"Theo di v qun l tt c n hng ca bn"})]}),Qe.jsxs(AP,{size:"lg",className:"bg-gradient-to-r from-primary to-purple-600 hover:opacity-90 shadow-lg",children:[Qe.jsx(Bm,{className:"w-4 h-4 mr-2"}),"Xut Excel"]})]})}),Qe.jsx(p,{}),Qe.jsx(DP,{className:"mb-6 border-none shadow-lg",children:Qe.jsx(UP,{className:"pt-6",children:Qe.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[Qe.jsxs("div",{className:"relative flex-1",children:[Qe.jsx(eg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5"}),Qe.jsx(Vne,{placeholder:"Tm kim theo m n hng, tn sn phm...",className:"pl-11 h-12 border-2",value:s,onChange:e=>o(e.target.value)})]}),Qe.jsxs(AP,{variant:"outline",size:"lg",className:"border-2",onClick:d,children:[Qe.jsx(qf,{className:"w-4 h-4 mr-2"}),"Lm mi"]}),Qe.jsxs(AP,{variant:"outline",size:"lg",className:"border-2",children:[Qe.jsx(Km,{className:"w-4 h-4 mr-2"}),"Lc"]})]})})}),Qe.jsxs(tae,{defaultValue:"all",className:"space-y-6",children:[Qe.jsx(DP,{className:"border-none shadow-lg overflow-hidden",children:Qe.jsxs(nae,{className:"w-full justify-start bg-gradient-to-r from-muted/50 to-muted/30 p-2 rounded-none flex-wrap h-auto gap-2",children:[Qe.jsxs(rae,{value:"all",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-primary data-[state=active]:to-purple-600 data-[state=active]:text-white rounded-lg px-4 py-2.5",children:[Qe.jsx(lg,{className:"w-4 h-4 mr-2"}),"Tt c (",n.length,")"]}),Qe.jsxs(rae,{value:"processing",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-500 data-[state=active]:to-cyan-500 data-[state=active]:text-white rounded-lg px-4 py-2.5",children:[Qe.jsx(Rf,{className:"w-4 h-4 mr-2"}),"ang x l (",u("processing").length,")"]}),Qe.jsxs(rae,{value:"shipped",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-500 data-[state=active]:to-pink-500 data-[state=active]:text-white rounded-lg px-4 py-2.5",children:[Qe.jsx(Mg,{className:"w-4 h-4 mr-2"}),"ang giao (",u("shipped").length,")"]}),Qe.jsxs(rae,{value:"delivered",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-green-500 data-[state=active]:to-emerald-500 data-[state=active]:text-white rounded-lg px-4 py-2.5",children:[Qe.jsx(Nm,{className:"w-4 h-4 mr-2"})," giao (",u("delivered").length,")"]}),Qe.jsxs(rae,{value:"cancelled",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-red-500 data-[state=active]:to-pink-500 data-[state=active]:text-white rounded-lg px-4 py-2.5",children:[Qe.jsx(Am,{className:"w-4 h-4 mr-2"})," hy (",u("cancelled").length,")"]})]})}),["all","processing","shipped","delivered","cancelled"].map(e=>Qe.jsx(iae,{value:e,className:"space-y-4",children:Qe.jsx(eM,{mode:"wait",children:0===u("all"===e?void 0:e).length?Qe.jsx(QT.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:Qe.jsxs(DP,{className:"p-12 text-center border-none shadow-lg",children:[Qe.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-muted to-muted/50 rounded-full flex items-center justify-center",children:Qe.jsx(Rf,{className:"w-12 h-12 text-muted-foreground"})}),Qe.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Cha c n hng"}),Qe.jsx("p",{className:"text-muted-foreground mb-6",children:"Bn cha c n hng no trong mc ny"}),Qe.jsxs(AP,{onClick:()=>t("/shop"),className:"bg-gradient-to-r from-primary to-purple-600 hover:opacity-90",children:["Mua sm ngay",Qe.jsx(ym,{className:"w-4 h-4 ml-2"})]})]})}):Qe.jsx("div",{className:"grid gap-4",children:u("all"===e?void 0:e).map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:Qe.jsx(h,{order:e})},e.id))})})},e))]})]})})},gme=()=>{const[e,t]=Ve.useState("none"),n=Zj(),{toast:r}=vh(),{user:i}=Pae(),[a,s]=Ve.useState({store_name:"",avatar:"",business_type:"",tax_id:"",establish_year:"",description:"",phone:"",email:"",business_address:"",license_image:"",idcard_image:""}),[o,l]=Ve.useState(!1),[c,d]=Ve.useState(null),[u,h]=Ve.useState({license_image:null,idcard_image:null}),[p,m]=Ve.useState({license_image:null,idcard_image:null});Ve.useEffect(()=>{(async()=>{if(!(null==i?void 0:i.id))return;const e=await fetch(`http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/vendor/status.php?user_id=${i.id}`),n=await e.json();if("pending"===n.status){t("pending");const e=await fetch(`http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/vendor/info.php?user_id=${i.id}`),n=await e.json();d(n)}else"approved"===n.status?t("approved"):"rejected"===n.status?t("rejected"):t("none")})()},[i]);const f=(e,t)=>{var n;const r=(null==(n=e.target.files)?void 0:n[0])||null;h(e=>({...e,[t]:r})),m(e=>({...e,[t]:r?URL.createObjectURL(r):null}))},g=e=>{const{id:t,value:n}=e.target;s(e=>({...e,[t]:n}))},v=({icon:e,title:t,description:n,completed:r=!1})=>Qe.jsxs("div",{className:"flex items-start gap-4 p-4 border border-border rounded-lg",children:[Qe.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center "+(r?"bg-green-100 text-green-600":"bg-muted text-muted-foreground"),children:r?Qe.jsx(Nm,{className:"w-5 h-5"}):Qe.jsx(e,{className:"w-5 h-5"})}),Qe.jsxs("div",{children:[Qe.jsx("h4",{className:"font-medium mb-1",children:t}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:n})]})]});return"pending"===e?Qe.jsx("div",{className:"min-h-screen bg-background",children:Qe.jsx("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:Qe.jsxs(DP,{children:[Qe.jsxs(LP,{className:"text-center",children:[Qe.jsx("div",{className:"w-16 h-16 bg-yellow-100 text-yellow-600 rounded-full flex items-center justify-center mx-auto mb-4",children:Qe.jsx(Em,{className:"w-8 h-8"})}),Qe.jsx(BP,{className:"text-2xl",children:"ng k ang c xem xt"}),Qe.jsx("p",{className:"text-muted-foreground mt-2",children:"Cm n bn  gi ng k tr thnh vendor. Chng ti ang xem xt h s ca bn."})]}),Qe.jsxs(UP,{className:"space-y-6",children:[Qe.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[Qe.jsx("h3",{className:"font-medium mb-3",children:"Thng tin  gi:"}),Qe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[Qe.jsxs("div",{children:[Qe.jsx("span",{className:"text-muted-foreground",children:"Tn doanh nghip:"}),Qe.jsx("p",{className:"font-medium",children:(null==c?void 0:c.store_name)||""})]}),Qe.jsxs("div",{children:[Qe.jsx("span",{className:"text-muted-foreground",children:"Loi hnh:"}),Qe.jsx("p",{className:"font-medium",children:(null==c?void 0:c.business_type)||""})]}),Qe.jsxs("div",{children:[Qe.jsx("span",{className:"text-muted-foreground",children:"M s thu:"}),Qe.jsx("p",{className:"font-medium",children:(null==c?void 0:c.tax_id)||""})]}),Qe.jsxs("div",{children:[Qe.jsx("span",{className:"text-muted-foreground",children:"Ngy gi:"}),Qe.jsx("p",{className:"font-medium",children:(null==c?void 0:c.created_at)?new Date(c.created_at).toLocaleDateString("vi-VN"):""})]}),Qe.jsxs("div",{children:[Qe.jsx("span",{className:"text-muted-foreground",children:"S in thoi:"}),Qe.jsx("p",{className:"font-medium",children:(null==c?void 0:c.phone)||""})]}),Qe.jsxs("div",{children:[Qe.jsx("span",{className:"text-muted-foreground",children:"Email:"}),Qe.jsx("p",{className:"font-medium",children:(null==c?void 0:c.email)||""})]}),Qe.jsxs("div",{className:"md:col-span-2",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"a ch:"}),Qe.jsx("p",{className:"font-medium",children:(null==c?void 0:c.business_address)||""})]}),Qe.jsxs("div",{className:"md:col-span-2",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"M t:"}),Qe.jsx("p",{className:"font-medium",children:(null==c?void 0:c.description)||""})]})]})]}),Qe.jsx(EP,{className:"w-fit mx-auto",variant:"outline",children:"Thi gian xem xt: 3-5 ngy lm vic"})]})]})})})}):"approved"===e?Qe.jsx("div",{className:"min-h-screen bg-background",children:Qe.jsx("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:Qe.jsxs(DP,{children:[Qe.jsxs(LP,{className:"text-center",children:[Qe.jsx("div",{className:"w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:Qe.jsx(Nm,{className:"w-8 h-8"})}),Qe.jsx(BP,{className:"text-2xl",children:"Chc mng! ng k  c duyt"}),Qe.jsx("p",{className:"text-muted-foreground mt-2",children:"Ti khon vendor ca bn  c kch hot. Bn c th bt u bn hng ngay by gi."})]}),Qe.jsxs(UP,{className:"space-y-6",children:[Qe.jsxs("div",{className:"bg-green-50 border border-green-200 p-4 rounded-lg",children:[Qe.jsx("h3",{className:"font-medium text-green-800 mb-2",children:"Quyn li vendor:"}),Qe.jsxs("ul",{className:"text-sm text-green-700 space-y-1",children:[Qe.jsx("li",{children:" ng bn sn phm khng gii hn"}),Qe.jsx("li",{children:" Qun l n hng v khch hng"}),Qe.jsx("li",{children:" Bo co doanh thu chi tit"}),Qe.jsx("li",{children:" H tr marketing v khuyn mi"})]})]}),Qe.jsxs(AP,{className:"w-full",size:"lg",onClick:()=>n("/vendor-management"),children:[Qe.jsx(gg,{className:"w-5 h-5 mr-2"}),"i n Dashboard Vendor"]})]})]})})})}):Qe.jsx("form",{onSubmit:async e=>{if(e.preventDefault(),!(a.store_name.trim()&&a.business_type.trim()&&a.description.trim()&&a.phone.trim()&&a.email.trim()&&a.business_address.trim()&&(a.license_image||u.license_image)&&(a.idcard_image||u.idcard_image)))return void r({title:"Thiu thng tin",description:"Vui lng nhp y  cc trng bt buc v ti ln y  hnh nh.",variant:"destructive"});l(!0);let n=a.license_image,s=a.idcard_image;if(u.license_image){const e=new FormData;e.append("file",u.license_image);const t=await fetch("http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/upload.php",{method:"POST",body:e}),i=await t.json();if(!i.url)return r({title:"Upload nh tht bi",description:"Khng th upload giy php kinh doanh.",variant:"destructive"}),void l(!1);n=i.url}if(u.idcard_image){const e=new FormData;e.append("file",u.idcard_image);const t=await fetch("http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/upload.php",{method:"POST",body:e}),n=await t.json();if(!n.url)return r({title:"Upload nh tht bi",description:"Khng th upload CMND/CCCD.",variant:"destructive"}),void l(!1);s=n.url}const o=await fetch("http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/vendor/register.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:i.id,...a,license_image:n,idcard_image:s})}),c=await o.json();l(!1),c.success?(r({title:"ng k thnh cng",description:"H s ca bn  c gi i v ang ch xt duyt.",variant:"success"}),t("pending")):r({title:"ng k tht bi",description:c.message||" c li xy ra. Vui lng th li.",variant:"destructive"})},children:Qe.jsx("div",{className:"min-h-screen bg-background",children:Qe.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[Qe.jsx("div",{className:"w-16 h-16 bg-gradient-hero rounded-full flex items-center justify-center mx-auto mb-4",children:Qe.jsx(gg,{className:"w-8 h-8 text-white"})}),Qe.jsx("h1",{className:"text-3xl font-bold mb-2",children:"ng k tr thnh Vendor"}),Qe.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Tham gia cng ng bn hng ca VibeMarket v tip cn hng triu khch hng tim nng"})]}),Qe.jsxs(DP,{className:"mb-8",children:[Qe.jsx(LP,{children:Qe.jsx(BP,{children:"Yu cu  tr thnh Vendor"})}),Qe.jsxs(UP,{className:"space-y-4",children:[Qe.jsx(v,{icon:cm,title:"Giy php kinh doanh",description:"Cn c giy php kinh doanh hp l hoc ng k h kinh doanh"}),Qe.jsx(v,{icon:Wm,title:"Chng minh th/CCCD",description:"Bn sao chng minh th hoc cn cc cng dn cn hiu lc"}),Qe.jsx(v,{icon:jf,title:"a ch kinh doanh",description:"C a ch ca hng/kho hng r rng, c th xc minh"}),Qe.jsx(v,{icon:Vf,title:"Thng tin lin h",description:"S in thoi v email  khch hng c th lin h"})]})]}),Qe.jsxs(DP,{children:[Qe.jsx(LP,{children:Qe.jsx(BP,{children:"Thng tin ng k"})}),Qe.jsxs(UP,{className:"space-y-6",children:[Qe.jsxs("div",{className:"space-y-4",children:[Qe.jsx("h3",{className:"font-medium text-lg",children:"Thng tin doanh nghip"}),Qe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Qe.jsxs("div",{children:[Qe.jsx(Rle,{htmlFor:"store_name",children:"Tn doanh nghip/Ca hng *"}),Qe.jsx(Vne,{id:"store_name",value:a.store_name,onChange:g,placeholder:"VD: Beauty World Store"})]}),Qe.jsxs("div",{children:[Qe.jsx(Rle,{htmlFor:"business_type",children:"Loi hnh kinh doanh *"}),Qe.jsx(Vne,{id:"business_type",value:a.business_type,onChange:g,placeholder:"VD: Ca hng m phm"})]}),Qe.jsxs("div",{children:[Qe.jsx(Rle,{htmlFor:"tax_id",children:"M s thu"}),Qe.jsx(Vne,{id:"tax_id",value:a.tax_id,onChange:g,placeholder:"VD: 0123456789"})]}),Qe.jsxs("div",{children:[Qe.jsx(Rle,{htmlFor:"establish_year",children:"Nm thnh lp"}),Qe.jsx(Vne,{id:"establish_year",value:a.establish_year,onChange:g,type:"number",placeholder:"VD: 2020"})]})]}),Qe.jsxs("div",{children:[Qe.jsx(Rle,{htmlFor:"description",children:"M t doanh nghip *"}),Qe.jsx(Hne,{id:"description",value:a.description,onChange:g,rows:4,placeholder:"M t v sn phm/dch v chnh ca ca hng..."})]})]}),Qe.jsxs("div",{className:"space-y-4",children:[Qe.jsx("h3",{className:"font-medium text-lg",children:"Thng tin lin h"}),Qe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Qe.jsxs("div",{children:[Qe.jsx(Rle,{htmlFor:"phone",children:"S in thoi *"}),Qe.jsx(Vne,{id:"phone",value:a.phone,onChange:g,placeholder:"VD: 0901234567"})]}),Qe.jsxs("div",{children:[Qe.jsx(Rle,{htmlFor:"email",children:"Email lin h *"}),Qe.jsx(Vne,{id:"email",value:a.email,onChange:g,type:"email",placeholder:"VD: contact@store.com"})]})]}),Qe.jsxs("div",{children:[Qe.jsx(Rle,{htmlFor:"business_address",children:"a ch kinh doanh *"}),Qe.jsx(Hne,{id:"business_address",value:a.business_address,onChange:g,rows:3,placeholder:"a ch c th ca ca hng/kho hng..."})]})]}),Qe.jsxs("div",{className:"space-y-4",children:[Qe.jsx("h3",{className:"font-medium text-lg",children:"Ti ln giy t"}),Qe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Qe.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-0 h-48 w-full flex items-center justify-center relative overflow-hidden",children:[Qe.jsx("input",{type:"file",accept:"image/*,application/pdf",style:{display:"none"},id:"license_image_upload",onChange:e=>f(e,"license_image")}),a.license_image?Qe.jsx("div",{className:"w-full h-full relative group",children:a.license_image.endsWith(".pdf")?Qe.jsx("div",{className:"flex flex-col items-center justify-center h-full w-full",children:Qe.jsx("a",{href:a.license_image,target:"_blank",rel:"noopener noreferrer",className:"text-primary underline",children:"Xem file PDF"})}):Qe.jsx("img",{src:a.license_image,alt:"Giy php kinh doanh",className:"object-contain w-full h-full"})}):u.license_image&&p.license_image?Qe.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center relative",children:[Qe.jsx("img",{src:p.license_image,alt:"Preview giy php kinh doanh",className:"object-contain w-full h-full"}),Qe.jsx(AP,{variant:"outline",size:"sm",type:"button",className:"absolute top-1 right-1 bg-red-500 text-white",onClick:()=>h(e=>({...e,license_image:null})),children:Qe.jsx(Fg,{className:"w-4 h-4"})})]}):Qe.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full cursor-pointer",onClick:()=>{var e;return null==(e=document.getElementById("license_image_upload"))?void 0:e.click()},children:[Qe.jsx(kg,{className:"w-8 h-8 text-muted-foreground mb-2"}),Qe.jsx("p",{className:"text-sm font-medium mb-1",children:"Giy php kinh doanh"}),Qe.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"PNG, JPG, PDF ti a 5MB"}),Qe.jsx(AP,{variant:"outline",size:"sm",type:"button",children:"Chn tp"})]})]}),Qe.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-0 h-48 w-full flex items-center justify-center relative overflow-hidden",children:[Qe.jsx("input",{type:"file",accept:"image/*,application/pdf",style:{display:"none"},id:"idcard_image_upload",onChange:e=>f(e,"idcard_image")}),a.idcard_image?Qe.jsx("div",{className:"w-full h-full relative group",children:a.idcard_image.endsWith(".pdf")?Qe.jsx("div",{className:"flex flex-col items-center justify-center h-full w-full",children:Qe.jsx("a",{href:a.idcard_image,target:"_blank",rel:"noopener noreferrer",className:"text-primary underline",children:"Xem file PDF"})}):Qe.jsx("img",{src:a.idcard_image,alt:"CMND/CCCD",className:"object-contain w-full h-full"})}):u.idcard_image&&p.idcard_image?Qe.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center relative",children:[Qe.jsx("img",{src:p.idcard_image,alt:"Preview CMND/CCCD",className:"object-contain w-full h-full"}),Qe.jsx(AP,{variant:"outline",size:"sm",type:"button",className:"absolute top-1 right-1 bg-red-500 text-white",onClick:()=>h(e=>({...e,idcard_image:null})),children:Qe.jsx(Fg,{className:"w-4 h-4"})})]}):Qe.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full cursor-pointer",onClick:()=>{var e;return null==(e=document.getElementById("idcard_image_upload"))?void 0:e.click()},children:[Qe.jsx(kg,{className:"w-8 h-8 text-muted-foreground mb-2"}),Qe.jsx("p",{className:"text-sm font-medium mb-1",children:"CMND/CCCD"}),Qe.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"PNG, JPG, PDF ti a 5MB"}),Qe.jsx(AP,{variant:"outline",size:"sm",type:"button",children:"Chn tp"})]})]})]})]}),Qe.jsx("div",{className:"bg-muted/50 p-4 rounded-lg",children:Qe.jsxs("div",{className:"flex items-start gap-3",children:[Qe.jsx("input",{type:"checkbox",id:"terms",className:"mt-1"}),Qe.jsxs("label",{htmlFor:"terms",className:"text-sm text-muted-foreground",children:["Ti ng  vi ",Qe.jsx("a",{href:"#",className:"text-primary underline",children:"iu khon dch v"})," v",Qe.jsx("a",{href:"#",className:"text-primary underline ml-1",children:"Chnh sch bn hng"})," ca VibeMarket"]})]})}),Qe.jsxs(AP,{type:"submit",disabled:o,className:"w-full",size:"lg",children:[Qe.jsx(Wm,{className:"w-5 h-5 mr-2"}),"Gi ng k"]})]})]})]})})})},vme=()=>{var e,t,n,r,i,a,s,o,l;const{code:c}=eN(),[d,u]=Ve.useState(null),[h,p]=Ve.useState(!0),m=Zj();if(Ve.useEffect(()=>{c&&(p(!0),fetch(`http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/order/order_detail.php?code=${c}`).then(e=>e.json()).then(e=>{e.success&&u(e.order),p(!1)}).catch(()=>p(!1)))},[c]),h)return Qe.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-950 flex items-center justify-center",children:Qe.jsxs("div",{className:"text-center space-y-4",children:[Qe.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto"}),Qe.jsx("p",{className:"text-muted-foreground",children:"ang ti chi tit n hng..."})]})});if(!d)return Qe.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-950 flex items-center justify-center",children:Qe.jsxs(QT.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-4",children:[Qe.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-br from-red-100 to-red-200 dark:from-red-900/30 dark:to-red-800/30 rounded-full flex items-center justify-center",children:Qe.jsx(jm,{className:"w-10 h-10 text-red-600 dark:text-red-400"})}),Qe.jsx("h2",{className:"text-2xl font-bold",children:"Khng tm thy n hng"}),Qe.jsxs(AP,{onClick:()=>m("/orders"),className:"bg-gradient-to-r from-primary to-purple-600",children:[Qe.jsx(Zp,{className:"mr-2 h-4 w-4"}),"Quay li danh sch"]})]})});const f=e=>{const t={pending:{label:"Ch xc nhn",gradient:"from-yellow-500 to-orange-500",bg:"bg-yellow-50 dark:bg-yellow-950/20",text:"text-yellow-700 dark:text-yellow-300",icon:Em},processing:{label:"ang chun b",gradient:"from-blue-500 to-cyan-500",bg:"bg-blue-50 dark:bg-blue-950/20",text:"text-blue-700 dark:text-blue-300",icon:Rf},shipped:{label:"ang giao hng",gradient:"from-purple-500 to-pink-500",bg:"bg-purple-50 dark:bg-purple-950/20",text:"text-purple-700 dark:text-purple-300",icon:Mg},delivered:{label:" giao hng",gradient:"from-green-500 to-emerald-500",bg:"bg-green-50 dark:bg-green-950/20",text:"text-green-700 dark:text-green-300",icon:Nm},cancelled:{label:" hy",gradient:"from-red-500 to-pink-500",bg:"bg-red-50 dark:bg-red-950/20",text:"text-red-700 dark:text-red-300",icon:Am}};return t[e]||t.pending},g=e=>{switch(e){case"pending":return"n hng  c t thnh cng";case"processing":return"n hng ang c chun b";case"shipped":return"n hng ang c giao n bn";case"delivered":return"n hng  giao thnh cng";case"cancelled":return"n hng  b hy";default:return""}},v=d.timeline&&Array.isArray(d.timeline)?d.timeline:[{status:"pending",label:"Ch xc nhn"},{status:"processing",label:"ang chun b"},{status:"shipped",label:"ang giao hng"},{status:"delivered",label:" giao hng"}],x=v.findIndex(e=>e.status===d.status),y=v.map((e,t)=>({...e,completed:"cancelled"!==d.status&&t<=x})),b=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),w=e=>e?new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e)):"Ch cp nht";return Qe.jsx("div",{className:"min-h-screen bg-background",children:Qe.jsxs("div",{className:"container mx-auto px-4 py-6 space-y-6",children:[Qe.jsxs(QT.nav,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center space-x-1 text-sm text-muted-foreground",children:[Qe.jsx(AN,{to:"/orders",className:"hover:text-primary transition-colors",children:"Qun l n hng"}),Qe.jsx(ym,{className:"h-4 w-4"}),Qe.jsxs("span",{className:"text-foreground font-medium",children:["Chi tit n hng #",d.code]})]}),Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[Qe.jsxs("div",{className:"flex items-center gap-4",children:[Qe.jsx(AP,{variant:"ghost",size:"icon",onClick:()=>m(-1),className:"shrink-0 hover:bg-primary/10",children:Qe.jsx(Zp,{className:"h-5 w-5"})}),Qe.jsxs("div",{children:[Qe.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[Qe.jsxs("h1",{className:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:["n hng #",d.code]}),(e=>{const t=f(e),n=t.icon;return Qe.jsxs(EP,{className:`bg-gradient-to-r ${t.gradient} text-white border-none px-3 py-1.5 flex items-center gap-1.5 shadow-lg`,children:[Qe.jsx(n,{className:"w-3.5 h-3.5"}),t.label]})})(d.status)]}),Qe.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[Qe.jsx(um,{className:"w-4 h-4"}),"t hng lc ",w(d.created_at)]})]})]}),Qe.jsxs("div",{className:"flex gap-2",children:[Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(AP,{variant:"outline",size:"sm",className:"border-2",children:[Qe.jsx(Kf,{className:"mr-2 h-4 w-4"}),"In ha n"]})}),Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(AP,{variant:"outline",size:"sm",className:"border-2",children:[Qe.jsx(ig,{className:"mr-2 h-4 w-4"}),"Chia s"]})})]})]}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:Qe.jsxs(DP,{className:"overflow-hidden border-none shadow-xl",children:[Qe.jsx(LP,{className:"bg-gradient-to-r from-primary/10 to-purple-500/10 border-b",children:Qe.jsxs(BP,{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 bg-primary/20 rounded-lg",children:Qe.jsx(pg,{className:"w-5 h-5 text-primary"})}),Qe.jsx("span",{children:"Trng thi n hng"})]})}),Qe.jsx(UP,{className:"pt-6",children:Qe.jsx("div",{className:"space-y-1",children:y.map((e,t)=>{const n=d.status===e.status,r=e.completed,i=f(e.status),a=i.icon;return Qe.jsxs(QT.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-start gap-4 relative group",children:[Qe.jsxs("div",{className:"flex flex-col items-center",children:[Qe.jsxs(QT.div,{className:`\n                                                        flex items-center justify-center rounded-full border-2\n                                                        ${n?`border-transparent bg-gradient-to-r ${i.gradient} shadow-lg`:r?"border-green-400 bg-green-50 dark:bg-green-900/30":"border-muted bg-muted"}\n                                                        w-10 h-10 relative\n                                                    `,whileHover:{scale:1.1},children:[Qe.jsx(a,{className:"w-5 h-5 "+(n?"text-white":r?"text-green-600 dark:text-green-400":"text-muted-foreground")}),n&&Qe.jsx(QT.div,{className:`absolute inset-0 rounded-full bg-gradient-to-r ${i.gradient}`,animate:{scale:[1,1.5],opacity:[.5,0]},transition:{duration:1.5,repeat:1/0}})]}),t<y.length-1&&Qe.jsx("div",{className:`\n                                                            w-0.5 flex-1 mx-auto transition-colors duration-500\n                                                            ${r?"bg-green-400":"bg-muted"}\n                                                        `,style:{minHeight:40}})]}),Qe.jsxs("div",{className:"flex-1 pb-8",children:[Qe.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Qe.jsx("span",{className:`\n                                                        text-base font-semibold\n                                                        ${n?i.text:r?"text-green-700 dark:text-green-300":"text-muted-foreground"}\n                                                    `,children:e.label}),n&&Qe.jsx(QT.span,{initial:{scale:0},animate:{scale:1},className:"px-2.5 py-0.5 rounded-full text-xs font-medium bg-gradient-to-r from-primary to-purple-600 text-white shadow-lg",children:"ang thc hin"}),r&&!n&&Qe.jsx(Nm,{className:"w-4 h-4 text-green-500"})]}),e.timestamp&&Qe.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[Qe.jsx(Em,{className:"w-3.5 h-3.5"}),w(e.timestamp)]}),n&&Qe.jsx(QT.p,{initial:{opacity:0},animate:{opacity:1},className:"text-sm text-muted-foreground mt-1",children:g(e.status)})]})]},e.status||t)})})})]})}),Qe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[Qe.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:Qe.jsxs(DP,{className:"overflow-hidden border-none shadow-xl",children:[Qe.jsx(LP,{className:"bg-gradient-to-r from-primary/10 to-purple-500/10 border-b",children:Qe.jsxs(BP,{className:"flex items-center gap-2",children:[Qe.jsx(Rf,{className:"w-5 h-5 text-primary"}),"Sn phm  t"]})}),Qe.jsxs(UP,{className:"pt-6",children:[Qe.jsx("div",{className:"space-y-4",children:(d.items||[]).map((e,t)=>Qe.jsxs(QT.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},whileHover:{x:4},className:"flex items-center gap-4 p-4 rounded-xl bg-gradient-to-r from-muted/50 to-muted/30 hover:from-muted/70 hover:to-muted/50 transition-all group border border-transparent hover:border-primary/20",children:[Qe.jsxs("div",{className:"relative",children:[Qe.jsx("div",{className:"w-20 h-20 rounded-xl overflow-hidden border-2 border-border group-hover:border-primary transition-all shadow-md",children:e.image?Qe.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover"}):Qe.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary/20 to-purple-500/20 flex items-center justify-center",children:Qe.jsx(Rf,{className:"w-10 h-10 text-primary"})})}),Qe.jsx(EP,{className:"absolute -top-2 -right-2 w-6 h-6 p-0 flex items-center justify-center bg-gradient-to-r from-primary to-purple-600",children:e.quantity})]}),Qe.jsxs("div",{className:"flex-1 min-w-0",children:[Qe.jsx("h4",{className:"font-semibold text-sm line-clamp-2 group-hover:text-primary transition-colors",children:e.name}),Qe.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.variant}),Qe.jsxs(EP,{variant:"outline",className:"mt-2 text-xs",children:["SKU: ",e.sku]})]}),Qe.jsxs("div",{className:"text-right",children:[Qe.jsx("p",{className:"text-sm text-muted-foreground",children:b(e.price)}),Qe.jsxs("p",{className:"text-xs text-muted-foreground",children:["x",e.quantity]}),Qe.jsx("p",{className:"font-bold text-lg mt-1 bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:b(e.price*e.quantity)})]})]},e.id||t))}),Qe.jsx(ZR,{className:"my-6"}),Qe.jsxs(QT.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"space-y-3",children:[Qe.jsxs("div",{className:"flex justify-between text-sm",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"Tm tnh:"}),Qe.jsx("span",{className:"font-medium",children:b((d.items||[]).reduce((e,t)=>e+t.price*t.quantity,0))})]}),Qe.jsxs("div",{className:"flex justify-between text-sm",children:[Qe.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[Qe.jsx(Mg,{className:"w-4 h-4"}),"Ph vn chuyn:"]}),Qe.jsx("span",{className:"font-medium",children:b(d.shipping_fee)})]}),d.discount>0&&Qe.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[Qe.jsx("span",{children:"Gim gi:"}),Qe.jsxs("span",{className:"font-medium",children:["-",b(d.discount??0)]})]}),Qe.jsx(ZR,{}),Qe.jsxs(QT.div,{className:"flex justify-between items-center p-4 rounded-xl bg-gradient-to-r from-primary/10 to-purple-500/10",whileHover:{scale:1.02},children:[Qe.jsx("span",{className:"font-bold text-lg",children:"Tng cng:"}),Qe.jsx("span",{className:"font-bold text-2xl bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:b(d.total)})]})]})]})]})}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:Qe.jsxs(DP,{className:"overflow-hidden border-none shadow-xl",children:[Qe.jsx(LP,{className:"bg-gradient-to-r from-primary/10 to-purple-500/10 border-b",children:Qe.jsx(BP,{children:"Thao tc"})}),Qe.jsx(UP,{className:"pt-6",children:(()=>{const e={initial:{opacity:0,y:10},animate:{opacity:1,y:0},whileHover:{scale:1.05},whileTap:{scale:.95}};switch(d.status){case"processing":return Qe.jsxs("div",{className:"flex gap-2 flex-wrap",children:[Qe.jsx(QT.div,{...e,children:Qe.jsxs(AP,{variant:"destructive",size:"sm",children:[Qe.jsx(Am,{className:"mr-2 h-4 w-4"}),"Hy n hng"]})}),Qe.jsx(QT.div,{...e,transition:{delay:.1},children:Qe.jsxs(AP,{variant:"outline",size:"sm",className:"border-2",children:[Qe.jsx(Cf,{className:"mr-2 h-4 w-4"}),"Lin h shop"]})})]});case"shipped":return Qe.jsxs("div",{className:"flex gap-2 flex-wrap",children:[Qe.jsx(QT.div,{...e,children:Qe.jsxs(AP,{variant:"outline",size:"sm",className:"border-2 border-purple-300 hover:border-purple-500",children:[Qe.jsx(Mg,{className:"mr-2 h-4 w-4"}),"Theo di vn n"]})}),Qe.jsx(QT.div,{...e,transition:{delay:.1},children:Qe.jsxs(AP,{variant:"outline",size:"sm",className:"border-2",children:[Qe.jsx(Vf,{className:"mr-2 h-4 w-4"}),"Lin h shipper"]})})]});case"delivered":return Qe.jsxs("div",{className:"flex gap-2 flex-wrap",children:[Qe.jsx(QT.div,{...e,children:Qe.jsxs(AP,{className:"bg-gradient-to-r from-primary to-purple-600",size:"sm",children:[Qe.jsx(fg,{className:"mr-2 h-4 w-4"}),"nh gi sn phm"]})}),Qe.jsx(QT.div,{...e,transition:{delay:.1},children:Qe.jsxs(AP,{variant:"outline",size:"sm",className:"border-2",children:[Qe.jsx(cg,{className:"mr-2 h-4 w-4"}),"Mua li"]})}),Qe.jsx(QT.div,{...e,transition:{delay:.2},children:Qe.jsxs(AP,{variant:"outline",size:"sm",className:"border-2",children:[Qe.jsx(qf,{className:"mr-2 h-4 w-4"}),"Yu cu tr hng"]})})]});case"cancelled":return Qe.jsx(QT.div,{...e,children:Qe.jsxs(AP,{variant:"outline",size:"sm",className:"border-2",children:[Qe.jsx(cg,{className:"mr-2 h-4 w-4"}),"Mua li"]})});default:return null}})()})]})})]}),Qe.jsxs("div",{className:"space-y-6",children:[Qe.jsx(QT.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},children:Qe.jsxs(DP,{className:"overflow-hidden border-none shadow-xl",children:[Qe.jsx(LP,{className:"bg-gradient-to-r from-blue-500/10 to-cyan-500/10 border-b",children:Qe.jsxs(BP,{className:"flex items-center gap-2",children:[Qe.jsx(jf,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),"Thng tin giao hng"]})}),Qe.jsxs(UP,{className:"pt-6 space-y-4",children:[Qe.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-r from-muted/50 to-muted/30",children:[Qe.jsx("p",{className:"font-semibold text-lg mb-2",children:(null==(e=d.customer)?void 0:e.name)||"Cha c tn"}),Qe.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx(Vf,{className:"w-4 h-4"}),d.customer.phone||"Cha c s in thoi"]}),d.customer.email&&Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx(wf,{className:"w-4 h-4"}),d.customer.email]})]})]}),Qe.jsx(ZR,{}),Qe.jsxs("div",{children:[Qe.jsxs("p",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[Qe.jsx(jf,{className:"w-4 h-4 text-primary"}),"a ch giao hng:"]}),Qe.jsx("p",{className:"text-sm text-muted-foreground p-3 bg-muted/50 rounded-lg",children:d.customer.address||"Cha c a ch"})]})]})]})}),Qe.jsx(QT.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},children:Qe.jsxs(DP,{className:"overflow-hidden border-none shadow-xl",children:[Qe.jsx(LP,{className:"bg-gradient-to-r from-purple-500/10 to-pink-500/10 border-b",children:Qe.jsxs(BP,{className:"flex items-center gap-2",children:[Qe.jsx(Mg,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"}),"Thng tin vn chuyn"]})}),Qe.jsxs(UP,{className:"pt-6 space-y-3",children:[Qe.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg bg-muted/50",children:[Qe.jsx("span",{className:"text-sm text-muted-foreground",children:"Phng thc:"}),Qe.jsx("span",{className:"text-sm font-semibold",children:(null==(t=d.shipping)?void 0:t.method)||"Cha c"})]}),Qe.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg bg-muted/50",children:[Qe.jsx("span",{className:"text-sm text-muted-foreground",children:"n v:"}),Qe.jsx("span",{className:"text-sm font-semibold",children:(null==(n=d.shipping)?void 0:n.carrier)||"Cha c"})]}),(null==(r=d.shipping)?void 0:r.trackingCode)&&Qe.jsxs("div",{className:"p-3 rounded-lg bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20 border border-blue-200 dark:border-blue-800",children:[Qe.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"M vn n:"}),Qe.jsx("code",{className:"text-sm font-mono font-bold text-blue-600 dark:text-blue-400",children:d.shipping.trackingCode})]}),Qe.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg bg-muted/50",children:[Qe.jsx("span",{className:"text-sm text-muted-foreground",children:"D kin:"}),Qe.jsx("span",{className:"text-sm font-semibold",children:(null==(i=d.shipping)?void 0:i.estimatedDays)||"Cha c"})]})]})]})}),Qe.jsx(QT.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},children:Qe.jsxs(DP,{className:"overflow-hidden border-none shadow-xl",children:[Qe.jsx(LP,{className:"bg-gradient-to-r from-green-500/10 to-emerald-500/10 border-b",children:Qe.jsxs(BP,{className:"flex items-center gap-2",children:[Qe.jsx(Rm,{className:"h-5 w-5 text-green-600 dark:text-green-400"}),"Thng tin thanh ton"]})}),Qe.jsxs(UP,{className:"pt-6 space-y-3",children:[Qe.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg bg-muted/50",children:[Qe.jsx("span",{className:"text-sm text-muted-foreground",children:"Phng thc:"}),Qe.jsx("span",{className:"text-sm font-semibold",children:"cod"===d.payment_method?" Tin mt":"momo"===d.payment_method?" MoMo":"payos"===d.payment_method?" VietQR":d.payment_method||"Cha c"})]}),Qe.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg bg-muted/50",children:[Qe.jsx("span",{className:"text-sm text-muted-foreground",children:"Trng thi:"}),Qe.jsx(EP,{className:"paid"===(null==(a=d.payment)?void 0:a.status)?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",children:"paid"===(null==(s=d.payment)?void 0:s.status)?"  thanh ton":" Cha thanh ton"})]}),(null==(o=d.payment)?void 0:o.transaction_id)&&Qe.jsxs("div",{className:"p-3 rounded-lg bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20 border border-green-200 dark:border-green-800",children:[Qe.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"M giao dch:"}),Qe.jsx("code",{className:"text-sm font-mono font-bold text-green-600 dark:text-green-400",children:d.payment.transaction_id})]}),(null==(l=d.payment)?void 0:l.paid_at)&&Qe.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg bg-muted/50",children:[Qe.jsx("span",{className:"text-sm text-muted-foreground",children:"Thi gian:"}),Qe.jsx("span",{className:"text-xs font-medium",children:w(d.payment.paid_at)})]})]})]})}),Qe.jsx(QT.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.5},children:Qe.jsxs(DP,{className:"overflow-hidden border-none shadow-xl",children:[Qe.jsx(LP,{className:"bg-gradient-to-r from-orange-500/10 to-red-500/10 border-b",children:Qe.jsxs(BP,{className:"flex items-center gap-2",children:[Qe.jsx(gg,{className:"h-5 w-5 text-orange-600 dark:text-orange-400"}),"Thng tin ca hng"]})}),Qe.jsx(UP,{className:"pt-6",children:(d.items||[]).map((e,t)=>Qe.jsxs("div",{className:"space-y-4",children:[Qe.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-r from-muted/50 to-muted/30",children:[Qe.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Qe.jsx("p",{className:"font-semibold text-lg",children:e.store_name||"Cha c tn shop"}),Qe.jsxs("div",{className:"flex items-center gap-1",children:[Qe.jsx(fg,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),Qe.jsx("span",{className:"text-sm font-semibold",children:"4.8"})]})]}),Qe.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx(Vf,{className:"w-4 h-4"}),e.store_phone||"Cha c ST"]}),e.store_email&&Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx(wf,{className:"w-4 h-4"}),e.store_email]})]})]}),Qe.jsx(ZR,{}),Qe.jsxs("div",{children:[Qe.jsxs("p",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[Qe.jsx(jf,{className:"w-4 h-4 text-primary"}),"a ch:"]}),Qe.jsx("p",{className:"text-sm text-muted-foreground p-3 bg-muted/50 rounded-lg",children:e.business_address||"Cha c a ch"})]}),Qe.jsx(ZR,{}),Qe.jsx("div",{className:"p-3 rounded-lg bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800",children:Qe.jsx("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:" i tr trong 7 ngy  Bo hnh 12 thng"})}),Qe.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(AP,{variant:"outline",size:"sm",className:"w-full border-2",children:[Qe.jsx(Cf,{className:"mr-2 h-4 w-4"}),"Chat"]})}),Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(AP,{variant:"outline",size:"sm",className:"w-full border-2",children:[Qe.jsx(gg,{className:"mr-2 h-4 w-4"}),"Xem shop"]})})]})]},e.id||t))})]})})]})]})]})})};var xme=Object.defineProperty,yme=(e,t,n)=>(((e,t,n)=>{t in e?xme(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);let bme=new class{constructor(){yme(this,"current",this.detect()),yme(this,"handoffState","pending"),yme(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}};function wme(e){var t;return bme.isServer?null:null==e?document:null!=(t=null==e?void 0:e.ownerDocument)?t:document}function jme(e){var t,n;return bme.isServer?null:null==e?document:null!=(n=null==(t=null==e?void 0:e.getRootNode)?void 0:t.call(e))?n:document}function Nme(e){var t,n;return null!=(n=null==(t=jme(e))?void 0:t.activeElement)?n:null}function _me(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch(e=>setTimeout(()=>{throw e}))}function Sme(){let e=[],t={addEventListener:(e,n,r,i)=>(e.addEventListener(n,r,i),t.add(()=>e.removeEventListener(n,r,i))),requestAnimationFrame(...e){let n=requestAnimationFrame(...e);return t.add(()=>cancelAnimationFrame(n))},nextFrame:(...e)=>t.requestAnimationFrame(()=>t.requestAnimationFrame(...e)),setTimeout(...e){let n=setTimeout(...e);return t.add(()=>clearTimeout(n))},microTask(...e){let n={current:!0};return _me(()=>{n.current&&e[0]()}),t.add(()=>{n.current=!1})},style(e,t,n){let r=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:n}),this.add(()=>{Object.assign(e.style,{[t]:r})})},group(e){let t=Sme();return e(t),this.add(()=>t.dispose())},add:t=>(e.includes(t)||e.push(t),()=>{let n=e.indexOf(t);if(n>=0)for(let t of e.splice(n,1))t()}),dispose(){for(let t of e.splice(0))t()}};return t}function Cme(){let[e]=Ve.useState(Sme);return Ve.useEffect(()=>()=>e.dispose(),[e]),e}let Ame=(e,t)=>{bme.isServer?Ve.useEffect(e,t):Ve.useLayoutEffect(e,t)};function Mme(e){let t=Ve.useRef(e);return Ame(()=>{t.current=e},[e]),t}let Eme=function(e){let t=Mme(e);return Ge.useCallback((...e)=>t.current(...e),[t])};function kme(e){return Ve.useMemo(()=>e,Object.values(e))}let Tme=Ve.createContext(void 0);function Pme(...e){return Array.from(new Set(e.flatMap(e=>"string"==typeof e?e.split(" "):[]))).filter(Boolean).join(" ")}function Ome(e,t,...n){if(e in t){let r=t[e];return"function"==typeof r?r(...n):r}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(e=>`"${e}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Ome),r}var Rme=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Rme||{}),Ime=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Ime||{});function Dme(){let e=function(){let e=Ve.useRef([]),t=Ve.useCallback(t=>{for(let n of e.current)null!=n&&("function"==typeof n?n(t):n.current=t)},[]);return(...n)=>{if(!n.every(e=>null==e))return e.current=n,t}}();return Ve.useCallback(t=>function({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:i,visible:a=!0,name:s,mergeRefs:o}){o=null!=o?o:Bme;let l=Fme(t,e);if(a)return Lme(l,n,r,s,o);let c=null!=i?i:0;if(2&c){let{static:e=!1,...t}=l;if(e)return Lme(t,n,r,s,o)}if(1&c){let{unmount:e=!0,...t}=l;return Ome(e?0:1,{0:()=>null,1:()=>Lme({...t,hidden:!0,style:{display:"none"}},n,r,s,o)})}return Lme(l,n,r,s,o)}({mergeRefs:e,...t}),[e])}function Lme(e,t={},n,r,i){let{as:a=n,children:s,refName:o="ref",...l}=Hme(e,["unmount","static"]),c=void 0!==e.ref?{[o]:e.ref}:{},d="function"==typeof s?s(t):s;"className"in l&&l.className&&"function"==typeof l.className&&(l.className=l.className(t)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let u={};if(t){let e=!1,n=[];for(let[r,i]of Object.entries(t))"boolean"==typeof i&&(e=!0),!0===i&&n.push(r.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`));if(e){u["data-headlessui-state"]=n.join(" ");for(let e of n)u[`data-${e}`]=""}}if(Gme(a)&&(Object.keys(zme(l)).length>0||Object.keys(zme(u)).length>0)){if(!(!Ve.isValidElement(d)||Array.isArray(d)&&d.length>1||function(e){return Gme(e.type)}(d))){let e=d.props,t=null==e?void 0:e.className,n="function"==typeof t?(...e)=>Pme(t(...e),l.className):Pme(t,l.className),r=n?{className:n}:{},a=Fme(d.props,zme(Hme(l,["ref"])));for(let i in u)i in a&&delete u[i];return Ve.cloneElement(d,Object.assign({},a,u,c,{ref:i(Vme(d),c.ref)},r))}if(Object.keys(zme(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(zme(l)).concat(Object.keys(zme(u))).map(e=>`  - ${e}`).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(e=>`  - ${e}`).join("\n")].join("\n"))}return Ve.createElement(a,Object.assign({},Hme(l,["ref"]),!Gme(a)&&c,!Gme(a)&&u),d)}function Bme(...e){return e.every(e=>null==e)?void 0:t=>{for(let n of e)null!=n&&("function"==typeof n?n(t):n.current=t)}}function Fme(...e){if(0===e.length)return{};if(1===e.length)return e[0];let t={},n={};for(let r of e)for(let e in r)e.startsWith("on")&&"function"==typeof r[e]?(null!=n[e]||(n[e]=[]),n[e].push(r[e])):t[e]=r[e];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[e=>{var t;return null==(t=null==e?void 0:e.preventDefault)?void 0:t.call(e)}]);for(let r in n)Object.assign(t,{[r](e,...t){let i=n[r];for(let n of i){if((e instanceof Event||(null==e?void 0:e.nativeEvent)instanceof Event)&&e.defaultPrevented)return;n(e,...t)}}});return t}function Ume(e){var t;return Object.assign(Ve.forwardRef(e),{displayName:null!=(t=e.displayName)?t:e.name})}function zme(e){let t=Object.assign({},e);for(let n in t)void 0===t[n]&&delete t[n];return t}function Hme(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function Vme(e){return Ge.version.split(".")[0]>="19"?e.props.ref:e.ref}function Gme(e){return e===Ve.Fragment||e===Symbol.for("react.fragment")}var Wme=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Wme||{});let Kme=Ume(function(e,t){var n;let{features:r=1,...i}=e,a={ref:t,"aria-hidden":!(2&~r)||(null!=(n=i["aria-hidden"])?n:void 0),hidden:!(4&~r)||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...!(4&~r)&&!!(2&~r)&&{display:"none"}}};return Dme()({ourProps:a,theirProps:i,slot:{},defaultTag:"span",name:"Hidden"})});function qme(e){return function(e){return"object"==typeof e&&null!==e&&"nodeType"in e}(e)&&"tagName"in e}function Xme(e){return qme(e)&&"accessKey"in e}function $me(e){return qme(e)&&"tabIndex"in e}let Yme=Symbol();function Jme(...e){let t=Ve.useRef(e);Ve.useEffect(()=>{t.current=e},[e]);let n=Eme(e=>{for(let n of t.current)null!=n&&("function"==typeof n?n(e):n.current=e)});return e.every(e=>null==e||(null==e?void 0:e[Yme]))?void 0:n}let Zme=Ve.createContext(null);function Qme(){let e=Ve.useContext(Zme);if(null===e){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,Qme),e}return e}Zme.displayName="DescriptionContext";let efe=Ume(function(e,t){let n=Ve.useId(),r=Ve.useContext(Tme),{id:i=`headlessui-description-${n}`,...a}=e,s=Qme(),o=Jme(t);Ame(()=>s.register(i),[i,s.register]);let l=kme({...s.slot,disabled:r||!1}),c={ref:o,...s.props,id:i};return Dme()({ourProps:c,theirProps:a,slot:l,defaultTag:"p",name:s.name||"Description"})}),tfe=Object.assign(efe,{});var nfe=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(nfe||{});let rfe=Ve.createContext(()=>{});function ife({value:e,children:t}){return Ge.createElement(rfe.Provider,{value:e},t)}let afe=class extends Map{constructor(e){super(),this.factory=e}get(e){let t=super.get(e);return void 0===t&&(t=this.factory(e),this.set(e,t)),t}};var sfe,ofe,lfe,cfe=Object.defineProperty,dfe=(e,t,n)=>(((e,t,n)=>{t in e?cfe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,t+"",n),n),ufe=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},hfe=(e,t,n)=>(ufe(e,t,"read from private field"),n?n.call(e):t.get(e)),pfe=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},mfe=(e,t,n,r)=>(ufe(e,t,"write to private field"),t.set(e,n),n);let ffe=class{constructor(e){pfe(this,sfe,{}),pfe(this,ofe,new afe(()=>new Set)),pfe(this,lfe,new Set),dfe(this,"disposables",Sme()),mfe(this,sfe,e),bme.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return hfe(this,sfe)}subscribe(e,t){if(bme.isServer)return()=>{};let n={selector:e,callback:t,current:e(hfe(this,sfe))};return hfe(this,lfe).add(n),this.disposables.add(()=>{hfe(this,lfe).delete(n)})}on(e,t){return bme.isServer?()=>{}:(hfe(this,ofe).get(e).add(t),this.disposables.add(()=>{hfe(this,ofe).get(e).delete(t)}))}send(e){let t=this.reduce(hfe(this,sfe),e);if(t!==hfe(this,sfe)){mfe(this,sfe,t);for(let e of hfe(this,lfe)){let t=e.selector(hfe(this,sfe));gfe(e.current,t)||(e.current=t,e.callback(t))}for(let t of hfe(this,ofe).get(e.type))t(hfe(this,sfe),e)}}};function gfe(e,t){return!!Object.is(e,t)||"object"==typeof e&&null!==e&&"object"==typeof t&&null!==t&&(Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&vfe(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size===t.size&&vfe(e.entries(),t.entries()):!(!xfe(e)||!xfe(t))&&vfe(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()))}function vfe(e,t){for(;;){let n=e.next(),r=t.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}}function xfe(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;let t=Object.getPrototypeOf(e);return null===t||null===Object.getPrototypeOf(t)}sfe=new WeakMap,ofe=new WeakMap,lfe=new WeakMap;var yfe=Object.defineProperty,bfe=(e,t,n)=>(((e,t,n)=>{t in e?yfe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),wfe=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(wfe||{});let jfe={0(e,t){let n=t.id,r=e.stack,i=e.stack.indexOf(n);if(-1!==i){let t=e.stack.slice();return t.splice(i,1),t.push(n),r=t,{...e,stack:r}}return{...e,stack:[...e.stack,n]}},1(e,t){let n=t.id,r=e.stack.indexOf(n);if(-1===r)return e;let i=e.stack.slice();return i.splice(r,1),{...e,stack:i}}},Nfe=class e extends ffe{constructor(){super(...arguments),bfe(this,"actions",{push:e=>this.send({type:0,id:e}),pop:e=>this.send({type:1,id:e})}),bfe(this,"selectors",{isTop:(e,t)=>e.stack[e.stack.length-1]===t,inStack:(e,t)=>e.stack.includes(t)})}static new(){return new e({stack:[]})}reduce(e,t){return Ome(t.type,jfe,e,t)}};const _fe=new afe(()=>Nfe.new());var Sfe={exports:{}},Cfe={},Afe=Ve;var Mfe="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Efe=Afe.useSyncExternalStore,kfe=Afe.useRef,Tfe=Afe.useEffect,Pfe=Afe.useMemo,Ofe=Afe.useDebugValue;Cfe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var a=kfe(null);if(null===a.current){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=Pfe(function(){function e(e){if(!l){if(l=!0,a=e,e=r(e),void 0!==i&&s.hasValue){var t=s.value;if(i(t,e))return o=t}return o=e}if(t=o,Mfe(a,e))return t;var n=r(e);return void 0!==i&&i(t,n)?(a=e,t):(a=e,o=n)}var a,o,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,i]);var o=Efe(e,a[0],a[1]);return Tfe(function(){s.hasValue=!0,s.value=o},[o]),Ofe(o),o},Sfe.exports=Cfe;var Rfe=Sfe.exports;function Ife(e,t,n=gfe){return Rfe.useSyncExternalStoreWithSelector(Eme(t=>e.subscribe(Dfe,t)),Eme(()=>e.state),Eme(()=>e.state),Eme(t),n)}function Dfe(e){return e}function Lfe(e,t){let n=Ve.useId(),r=_fe.get(t),[i,a]=Ife(r,Ve.useCallback(e=>[r.selectors.isTop(e,n),r.selectors.inStack(e,n)],[r,n]));return Ame(()=>{if(e)return r.actions.push(n),()=>r.actions.pop(n)},[r,e,n]),!!e&&(!a||i)}let Bfe=new Map,Ffe=new Map;function Ufe(e){var t;let n=null!=(t=Ffe.get(e))?t:0;return Ffe.set(e,n+1),0!==n||(Bfe.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0),()=>zfe(e)}function zfe(e){var t;let n=null!=(t=Ffe.get(e))?t:1;if(1===n?Ffe.delete(e):Ffe.set(e,n-1),1!==n)return;let r=Bfe.get(e);r&&(null===r["aria-hidden"]?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,Bfe.delete(e))}let Hfe=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),Vfe=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Gfe,Wfe,Kfe=((Wfe=Kfe||{})[Wfe.First=1]="First",Wfe[Wfe.Previous=2]="Previous",Wfe[Wfe.Next=4]="Next",Wfe[Wfe.Last=8]="Last",Wfe[Wfe.WrapAround=16]="WrapAround",Wfe[Wfe.NoScroll=32]="NoScroll",Wfe[Wfe.AutoFocus=64]="AutoFocus",Wfe),qfe=((Gfe=qfe||{})[Gfe.Error=0]="Error",Gfe[Gfe.Overflow=1]="Overflow",Gfe[Gfe.Success=2]="Success",Gfe[Gfe.Underflow=3]="Underflow",Gfe),Xfe=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Xfe||{});var $fe=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))($fe||{});var Yfe=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Yfe||{});function Jfe(e){null==e||e.focus({preventScroll:!0})}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{1===e.detail?delete document.documentElement.dataset.headlessuiFocusVisible:0===e.detail&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));let Zfe=["textarea","input"].join(",");function Qfe(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}={}){let a=Array.isArray(e)?e.length>0?jme(e[0]):document:jme(e),s=Array.isArray(e)?n?function(e,t=e=>e){return e.slice().sort((e,n)=>{let r=t(e),i=t(n);if(null===r||null===i)return 0;let a=r.compareDocumentPosition(i);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}(e):e:64&t?function(e=document.body){return null==e?[]:Array.from(e.querySelectorAll(Vfe)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}(e):function(e=document.body){return null==e?[]:Array.from(e.querySelectorAll(Hfe)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}(e);i.length>0&&s.length>1&&(s=s.filter(e=>!i.some(t=>null!=t&&"current"in t?(null==t?void 0:t.current)===e:t===e))),r=null!=r?r:null==a?void 0:a.activeElement;let o,l=(()=>{if(5&t)return 1;if(10&t)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,s.indexOf(r))-1;if(4&t)return Math.max(0,s.indexOf(r))+1;if(8&t)return s.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=32&t?{preventScroll:!0}:{},u=0,h=s.length;do{if(u>=h||u+h<=0)return 0;let e=c+u;if(16&t)e=(e+h)%h;else{if(e<0)return 3;if(e>=h)return 1}o=s[e],null==o||o.focus(d),u+=l}while(o!==Nme(o));return 6&t&&function(e){var t,n;return null!=(n=null==(t=null==e?void 0:e.matches)?void 0:t.call(e,Zfe))&&n}(o)&&o.select(),2}function ege(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function tge(){return ege()||/Android/gi.test(window.navigator.userAgent)}function nge(e,t,n,r){let i=Mme(n);Ve.useEffect(()=>{if(e)return document.addEventListener(t,n,r),()=>document.removeEventListener(t,n,r);function n(e){i.current(e)}},[e,t,r])}function rge(e,t,n,r){let i=Mme(n);Ve.useEffect(()=>{if(e)return window.addEventListener(t,n,r),()=>window.removeEventListener(t,n,r);function n(e){i.current(e)}},[e,t,r])}function ige(e,t,n){let r=Mme(n),i=Ve.useCallback(function(e,n){if(e.defaultPrevented)return;let i=n(e);if(null===i||!i.getRootNode().contains(i)||!i.isConnected)return;let a=function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(t);for(let t of a)if(null!==t&&(t.contains(i)||e.composed&&e.composedPath().includes(t)))return;return!function(e,t=0){var n;return e!==(null==(n=wme(e))?void 0:n.body)&&Ome(t,{0:()=>e.matches(Hfe),1(){let t=e;for(;null!==t;){if(t.matches(Hfe))return!0;t=t.parentElement}return!1}})}(i,$fe.Loose)&&-1!==i.tabIndex&&e.preventDefault(),r.current(e,i)},[r,t]),a=Ve.useRef(null);nge(e,"pointerdown",e=>{var t,n;tge()||(a.current=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target)},!0),nge(e,"pointerup",e=>{if(tge()||!a.current)return;let t=a.current;return a.current=null,i(e,()=>t)},!0);let s=Ve.useRef({x:0,y:0});nge(e,"touchstart",e=>{s.current.x=e.touches[0].clientX,s.current.y=e.touches[0].clientY},!0),nge(e,"touchend",e=>{let t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY;if(!(Math.abs(t-s.current.x)>=30||Math.abs(n-s.current.y)>=30))return i(e,()=>$me(e.target)?e.target:null)},!0),rge(e,"blur",e=>i(e,()=>function(e){return Xme(e)&&"IFRAME"===e.nodeName}(window.document.activeElement)?window.document.activeElement:null),!0)}function age(...e){return Ve.useMemo(()=>wme(...e),[...e])}function sge(e,t,n,r){let i=Mme(n);Ve.useEffect(()=>{function n(e){i.current(e)}return(e=null!=e?e:window).addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)},[e,t,r])}function oge(){let e;return{before({doc:t}){var n;let r=t.documentElement,i=null!=(n=t.defaultView)?n:window;e=Math.max(0,i.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,i=Math.max(0,r.clientWidth-r.offsetWidth),a=Math.max(0,e-i);n.style(r,"paddingRight",`${a}px`)}}}function lge(){return ege()?{before({doc:e,d:t,meta:n}){function r(e){for(let t of n().containers)for(let n of t())if(n.contains(e))return!0;return!1}t.microTask(()=>{var n;if("auto"!==window.getComputedStyle(e.documentElement).scrollBehavior){let n=Sme();n.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>n.dispose()))}let i=null!=(n=window.scrollY)?n:window.pageYOffset,a=null;t.addEventListener(e,"click",t=>{if($me(t.target))try{let n=t.target.closest("a");if(!n)return;let{hash:i}=new URL(n.href),s=e.querySelector(i);$me(s)&&!r(s)&&(a=s)}catch{}},!0),t.group(n=>{t.addEventListener(e,"touchstart",e=>{if(n.dispose(),$me(e.target)&&function(e){return qme(e)&&"style"in e}(e.target))if(r(e.target)){let t=e.target;for(;t.parentElement&&r(t.parentElement);)t=t.parentElement;n.style(t,"overscrollBehavior","contain")}else n.style(e.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",e=>{if($me(e.target)){if(function(e){return Xme(e)&&"INPUT"===e.nodeName}(e.target))return;if(r(e.target)){let t=e.target;for(;t.parentElement&&""!==t.dataset.headlessuiPortal&&!(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth);)t=t.parentElement;""===t.dataset.headlessuiPortal&&e.preventDefault()}else e.preventDefault()}},{passive:!1}),t.add(()=>{var e;let t=null!=(e=window.scrollY)?e:window.pageYOffset;i!==t&&window.scrollTo(0,i),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})})}}:{}}function cge(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let dge=function(e,t){let n=e(),r=new Set;return{getSnapshot:()=>n,subscribe:e=>(r.add(e),()=>r.delete(e)),dispatch(e,...i){let a=t[e].call(n,...i);a&&(n=a,r.forEach(e=>e()))}}}(()=>new Map,{PUSH(e,t){var n;let r=null!=(n=this.get(e))?n:{doc:e,count:0,d:Sme(),meta:new Set,computedMeta:{}};return r.count++,r.meta.add(t),r.computedMeta=cge(r.meta),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t),n.computedMeta=cge(n.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta:()=>e.computedMeta},n=[lge(),oge(),{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}];n.forEach(({before:e})=>null==e?void 0:e(t)),n.forEach(({after:e})=>null==e?void 0:e(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});function uge(e,t,n=()=>({containers:[]})){let r=function(e){return Ve.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}(dge),i=t?r.get(t):void 0,a=!!i&&i.count>0;return Ame(()=>{if(t&&e)return dge.dispatch("PUSH",t,n),()=>dge.dispatch("POP",t,n)},[e,t]),a}dge.subscribe(()=>{let e=dge.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let e="hidden"===t.get(n.doc),r=0!==n.count;(r&&!e||!r&&e)&&dge.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),0===n.count&&dge.dispatch("TEARDOWN",n)}});var hge,pge;"undefined"!=typeof process&&"undefined"!=typeof globalThis&&"undefined"!=typeof Element&&"test"===(null==(hge=null==process?void 0:{})?void 0:hge.NODE_ENV)&&void 0===(null==(pge=null==Element?void 0:Element.prototype)?void 0:pge.getAnimations)&&(Element.prototype.getAnimations=function(){return[]});var mge=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(mge||{});function fge(e){let t={};for(let n in e)!0===e[n]&&(t[`data-${n}`]="");return t}function gge(e,t,n,r){let[i,a]=Ve.useState(n),{hasFlag:s,addFlag:o,removeFlag:l}=function(e=0){let[t,n]=Ve.useState(e),r=Ve.useCallback(e=>n(e),[]),i=Ve.useCallback(e=>n(t=>t|e),[]),a=Ve.useCallback(e=>(t&e)===e,[t]),s=Ve.useCallback(e=>n(t=>t&~e),[]),o=Ve.useCallback(e=>n(t=>t^e),[]);return{flags:t,setFlag:r,addFlag:i,hasFlag:a,removeFlag:s,toggleFlag:o}}(e&&i?3:0),c=Ve.useRef(!1),d=Ve.useRef(!1),u=Cme();return Ame(()=>{var i;if(e)return n&&a(!0),t?(null==(i=null==r?void 0:r.start)||i.call(r,n),function(e,{prepare:t,run:n,done:r,inFlight:i}){let a=Sme();return function(e,{inFlight:t,prepare:n}){if(null!=t&&t.current)return void n();let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}(e,{prepare:t,inFlight:i}),a.nextFrame(()=>{n(),a.requestAnimationFrame(()=>{a.add(function(e,t){var n,r;let i=Sme();if(!e)return i.dispose;let a=!1;i.add(()=>{a=!0});let s=null!=(r=null==(n=e.getAnimations)?void 0:n.call(e).filter(e=>e instanceof CSSTransition))?r:[];return 0===s.length?(t(),i.dispose):(Promise.allSettled(s.map(e=>e.finished)).then(()=>{a||t()}),i.dispose)}(e,r))})}),a.dispose}(t,{inFlight:c,prepare(){d.current?d.current=!1:d.current=c.current,c.current=!0,!d.current&&(n?(o(3),l(4)):(o(4),l(2)))},run(){d.current?n?(l(3),o(4)):(l(4),o(3)):n?l(1):o(1)},done(){var e;d.current&&function(e){var t,n;return(null!=(n=null==(t=e.getAnimations)?void 0:t.call(e))?n:[]).some(e=>e instanceof CSSTransition&&"finished"!==e.playState)}(t)||(c.current=!1,l(7),n||a(!1),null==(e=null==r?void 0:r.end)||e.call(r,n))}})):void(n&&o(3))},[e,n,t,u]),e?[i,{closed:s(1),enter:s(2),leave:s(4),transition:s(2)||s(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function vge(e,t){let n=Ve.useRef([]),r=Eme(e);Ve.useEffect(()=>{let e=[...n.current];for(let[i,a]of t.entries())if(n.current[i]!==a){let i=r(t,e);return n.current=t,i}},[r,...t])}let xge=Ve.createContext(null);xge.displayName="OpenClosedContext";var yge=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(yge||{});function bge(){return Ve.useContext(xge)}function wge({value:e,children:t}){return Ge.createElement(xge.Provider,{value:e},t)}function jge({children:e}){return Ge.createElement(xge.Provider,{value:null},e)}let Nge=[];function _ge(e){let t=Eme(e),n=Ve.useRef(!1);Ve.useEffect(()=>(n.current=!1,()=>{n.current=!0,_me(()=>{n.current&&t()})}),[t])}!function(e){function t(){"loading"!==document.readyState&&(e(),document.removeEventListener("DOMContentLoaded",t))}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("DOMContentLoaded",t),t())}(()=>{function e(e){if(!$me(e.target)||e.target===document.body||Nge[0]===e.target)return;let t=e.target;t=t.closest(Hfe),Nge.unshift(null!=t?t:e.target),Nge=Nge.filter(e=>null!=e&&e.isConnected),Nge.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});let Sge=Ve.createContext(!1);function Cge(e){return Ge.createElement(Sge.Provider,{value:e.force},e.children)}function Age(e){let t=Ve.useContext(Sge),n=Ve.useContext(Tge),[r,i]=Ve.useState(()=>{var r;if(!t&&null!==n)return null!=(r=n.current)?r:null;if(bme.isServer)return null;let i=null==e?void 0:e.getElementById("headlessui-portal-root");if(i)return i;if(null===e)return null;let a=e.createElement("div");return a.setAttribute("id","headlessui-portal-root"),e.body.appendChild(a)});return Ve.useEffect(()=>{null!==r&&(null!=e&&e.body.contains(r)||null==e||e.body.appendChild(r))},[r,e]),Ve.useEffect(()=>{t||null!==n&&i(n.current)},[n,i,t]),r}let Mge=Ve.Fragment,Ege=Ume(function(e,t){let{ownerDocument:n=null,...r}=e,i=Ve.useRef(null),a=Jme(function(e,t=!0){return Object.assign(e,{[Yme]:t})}(e=>{i.current=e}),t),s=age(i.current),o=Age(null!=n?n:s),l=Ve.useContext(Pge),c=Cme(),d=Dme();return _ge(()=>{var e;o&&o.childNodes.length<=0&&(null==(e=o.parentElement)||e.removeChild(o))}),o?ah.createPortal(Ge.createElement("div",{"data-headlessui-portal":"",ref:e=>{c.dispose(),l&&e&&c.add(l.register(e))}},d({ourProps:{ref:a},theirProps:r,slot:{},defaultTag:Mge,name:"Portal"})),o):null});let kge=Ve.Fragment,Tge=Ve.createContext(null);let Pge=Ve.createContext(null);let Oge=Ume(function(e,t){let n=Jme(t),{enabled:r=!0,ownerDocument:i,...a}=e,s=Dme();return r?Ge.createElement(Ege,{...a,ownerDocument:i,ref:n}):s({ourProps:{ref:n},theirProps:a,slot:{},defaultTag:Mge,name:"Portal"})}),Rge=Ume(function(e,t){let{target:n,...r}=e,i={ref:Jme(t)},a=Dme();return Ge.createElement(Tge.Provider,{value:n},a({ourProps:i,theirProps:r,defaultTag:kge,name:"Popover.Group"}))}),Ige=Object.assign(Oge,{Group:Rge});let Dge=Ve.createContext(null);function Lge({children:e,node:t}){let[n,r]=Ve.useState(null),i=Bge(null!=t?t:n);return Ge.createElement(Dge.Provider,{value:i},e,null===i&&Ge.createElement(Kme,{features:Wme.Hidden,ref:e=>{var t,n;if(e)for(let i of null!=(n=null==(t=wme(e))?void 0:t.querySelectorAll("html > *, body > *"))?n:[])if(i!==document.body&&i!==document.head&&qme(i)&&null!=i&&i.contains(e)){r(i);break}}}))}function Bge(e=null){var t;return null!=(t=Ve.useContext(Dge))?t:e}function Fge(){let e=function(){let e="undefined"==typeof document;return"useSyncExternalStore"in We&&We.useSyncExternalStore(()=>()=>{},()=>!1,()=>!e)}(),[t,n]=Ve.useState(bme.isHandoffComplete);return t&&!1===bme.isHandoffComplete&&n(!1),Ve.useEffect(()=>{!0!==t&&n(!0)},[t]),Ve.useEffect(()=>bme.handoff(),[]),!e&&t}function Uge(){let e=Ve.useRef(!1);return Ame(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var zge=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(zge||{});function Hge(e){if(!e)return new Set;if("function"==typeof e)return new Set(e());let t=new Set;for(let n of e.current)qme(n.current)&&t.add(n.current);return t}var Vge=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(Vge||{});let Gge=Ume(function(e,t){let n=Ve.useRef(null),r=Jme(n,t),{initialFocus:i,initialFocusFallback:a,containers:s,features:o=15,...l}=e;Fge()||(o=0);let c=age(n.current);!function(e,{ownerDocument:t}){let n=!!(8&e),r=function(e=!0){let t=Ve.useRef(Nge.slice());return vge(([e],[n])=>{!0===n&&!1===e&&_me(()=>{t.current.splice(0)}),!1===n&&!0===e&&(t.current=Nge.slice())},[e,Nge,t]),Eme(()=>{var e;return null!=(e=t.current.find(e=>null!=e&&e.isConnected))?e:null})}(n);vge(()=>{n||function(e){return Nme(e)===e}(null==t?void 0:t.body)&&Jfe(r())},[n]),_ge(()=>{n&&Jfe(r())})}(o,{ownerDocument:c});let d=function(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:i}){let a=Ve.useRef(null),s=Lfe(!!(1&e),"focus-trap#initial-focus"),o=Uge();return vge(()=>{if(0===e)return;if(!s)return void(null!=i&&i.current&&Jfe(i.current));let l=n.current;l&&_me(()=>{if(!o.current)return;let n=null==t?void 0:t.activeElement;if(null!=r&&r.current){if((null==r?void 0:r.current)===n)return void(a.current=n)}else if(l.contains(n))return void(a.current=n);if(null!=r&&r.current)Jfe(r.current);else{if(16&e){if(Qfe(l,Kfe.First|Kfe.AutoFocus)!==qfe.Error)return}else if(Qfe(l,Kfe.First)!==qfe.Error)return;if(null!=i&&i.current&&(Jfe(i.current),(null==t?void 0:t.activeElement)===i.current))return}a.current=null==t?void 0:t.activeElement})},[i,s,e]),a}(o,{ownerDocument:c,container:n,initialFocus:i,initialFocusFallback:a});!function(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:i}){let a=Uge(),s=!!(4&e);sge(null==t?void 0:t.defaultView,"focus",e=>{if(!s||!a.current)return;let t=Hge(r);Xme(n.current)&&t.add(n.current);let o=i.current;if(!o)return;let l=e.target;Xme(l)?Kge(t,l)?(i.current=l,Jfe(l)):(e.preventDefault(),e.stopPropagation(),Jfe(o)):Jfe(i.current)},!0)}(o,{ownerDocument:c,container:n,containers:s,previousActiveElement:d});let u=function(){let e=Ve.useRef(0);return rge(!0,"keydown",t=>{"Tab"===t.key&&(e.current=t.shiftKey?1:0)},!0),e}(),h=Eme(e=>{if(!Xme(n.current))return;let t=n.current;Ome(u.current,{[zge.Forwards]:()=>{Qfe(t,Kfe.First,{skipElements:[e.relatedTarget,a]})},[zge.Backwards]:()=>{Qfe(t,Kfe.Last,{skipElements:[e.relatedTarget,a]})}})}),p=Lfe(!!(2&o),"focus-trap#tab-lock"),m=Cme(),f=Ve.useRef(!1),g={ref:r,onKeyDown(e){"Tab"==e.key&&(f.current=!0,m.requestAnimationFrame(()=>{f.current=!1}))},onBlur(e){if(!(4&o))return;let t=Hge(s);Xme(n.current)&&t.add(n.current);let r=e.relatedTarget;$me(r)&&"true"!==r.dataset.headlessuiFocusGuard&&(Kge(t,r)||(f.current?Qfe(n.current,Ome(u.current,{[zge.Forwards]:()=>Kfe.Next,[zge.Backwards]:()=>Kfe.Previous})|Kfe.WrapAround,{relativeTo:e.target}):$me(e.target)&&Jfe(e.target)))}},v=Dme();return Ge.createElement(Ge.Fragment,null,p&&Ge.createElement(Kme,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:Wme.Focusable}),v({ourProps:g,theirProps:l,defaultTag:"div",name:"FocusTrap"}),p&&Ge.createElement(Kme,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:Wme.Focusable}))}),Wge=Object.assign(Gge,{features:Vge});function Kge(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function qge(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!Gme(null!=(t=e.as)?t:Qge)||1===Ge.Children.count(e.children)}let Xge=Ve.createContext(null);Xge.displayName="TransitionContext";var $ge=(e=>(e.Visible="visible",e.Hidden="hidden",e))($ge||{});let Yge=Ve.createContext(null);function Jge(e){return"children"in e?Jge(e.children):e.current.filter(({el:e})=>null!==e.current).filter(({state:e})=>"visible"===e).length>0}function Zge(e,t){let n=Mme(e),r=Ve.useRef([]),i=Uge(),a=Cme(),s=Eme((e,t=Ime.Hidden)=>{let s=r.current.findIndex(({el:t})=>t===e);-1!==s&&(Ome(t,{[Ime.Unmount](){r.current.splice(s,1)},[Ime.Hidden](){r.current[s].state="hidden"}}),a.microTask(()=>{var e;!Jge(r)&&i.current&&(null==(e=n.current)||e.call(n))}))}),o=Eme(e=>{let t=r.current.find(({el:t})=>t===e);return t?"visible"!==t.state&&(t.state="visible"):r.current.push({el:e,state:"visible"}),()=>s(e,Ime.Unmount)}),l=Ve.useRef([]),c=Ve.useRef(Promise.resolve()),d=Ve.useRef({enter:[],leave:[]}),u=Eme((e,n,r)=>{l.current.splice(0),t&&(t.chains.current[n]=t.chains.current[n].filter(([t])=>t!==e)),null==t||t.chains.current[n].push([e,new Promise(e=>{l.current.push(e)})]),null==t||t.chains.current[n].push([e,new Promise(e=>{Promise.all(d.current[n].map(([e,t])=>t)).then(()=>e())})]),"enter"===n?c.current=c.current.then(()=>null==t?void 0:t.wait.current).then(()=>r(n)):r(n)}),h=Eme((e,t,n)=>{Promise.all(d.current[t].splice(0).map(([e,t])=>t)).then(()=>{var e;null==(e=l.current.shift())||e()}).then(()=>n(t))});return Ve.useMemo(()=>({children:r,register:o,unregister:s,onStart:u,onStop:h,wait:c,chains:d}),[o,s,r,u,h,d,c])}Yge.displayName="NestingContext";let Qge=Ve.Fragment,eve=Rme.RenderStrategy;let tve=Ume(function(e,t){let{show:n,appear:r=!1,unmount:i=!0,...a}=e,s=Ve.useRef(null),o=Jme(...qge(e)?[s,t]:null===t?[]:[t]);Fge();let l=bge();if(void 0===n&&null!==l&&(n=(l&yge.Open)===yge.Open),void 0===n)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[c,d]=Ve.useState(n?"visible":"hidden"),u=Zge(()=>{n||d("hidden")}),[h,p]=Ve.useState(!0),m=Ve.useRef([n]);Ame(()=>{!1!==h&&m.current[m.current.length-1]!==n&&(m.current.push(n),p(!1))},[m,n]);let f=Ve.useMemo(()=>({show:n,appear:r,initial:h}),[n,r,h]);Ame(()=>{n?d("visible"):!Jge(u)&&null!==s.current&&d("hidden")},[n,u]);let g={unmount:i},v=Eme(()=>{var t;h&&p(!1),null==(t=e.beforeEnter)||t.call(e)}),x=Eme(()=>{var t;h&&p(!1),null==(t=e.beforeLeave)||t.call(e)}),y=Dme();return Ge.createElement(Yge.Provider,{value:u},Ge.createElement(Xge.Provider,{value:f},y({ourProps:{...g,as:Ve.Fragment,children:Ge.createElement(nve,{ref:o,...g,...a,beforeEnter:v,beforeLeave:x})},theirProps:{},defaultTag:Ve.Fragment,features:eve,visible:"visible"===c,name:"Transition"})))}),nve=Ume(function(e,t){var n,r;let{transition:i=!0,beforeEnter:a,afterEnter:s,beforeLeave:o,afterLeave:l,enter:c,enterFrom:d,enterTo:u,entered:h,leave:p,leaveFrom:m,leaveTo:f,...g}=e,[v,x]=Ve.useState(null),y=Ve.useRef(null),b=qge(e),w=Jme(...b?[y,t,x]:null===t?[]:[t]),j=null==(n=g.unmount)||n?Ime.Unmount:Ime.Hidden,{show:N,appear:_,initial:S}=function(){let e=Ve.useContext(Xge);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),[C,A]=Ve.useState(N?"visible":"hidden"),M=function(){let e=Ve.useContext(Yge);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),{register:E,unregister:k}=M;Ame(()=>E(y),[E,y]),Ame(()=>{if(j===Ime.Hidden&&y.current)return N&&"visible"!==C?void A("visible"):Ome(C,{hidden:()=>k(y),visible:()=>E(y)})},[C,y,E,k,N,j]);let T=Fge();Ame(()=>{if(b&&T&&"visible"===C&&null===y.current)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[y,C,T,b]);let P=S&&!_,O=_&&N&&S,R=Ve.useRef(!1),I=Zge(()=>{R.current||(A("hidden"),k(y))},M),D=Eme(e=>{R.current=!0;let t=e?"enter":"leave";I.onStart(y,t,e=>{"enter"===e?null==a||a():"leave"===e&&(null==o||o())})}),L=Eme(e=>{let t=e?"enter":"leave";R.current=!1,I.onStop(y,t,e=>{"enter"===e?null==s||s():"leave"===e&&(null==l||l())}),"leave"===t&&!Jge(I)&&(A("hidden"),k(y))});Ve.useEffect(()=>{b&&i||(D(N),L(N))},[N,b,i]);let B=(()=>!(!i||!b||!T||P))(),[,F]=gge(B,v,N,{start:D,end:L}),U=zme({ref:w,className:(null==(r=Pme(g.className,O&&c,O&&d,F.enter&&c,F.enter&&F.closed&&d,F.enter&&!F.closed&&u,F.leave&&p,F.leave&&!F.closed&&m,F.leave&&F.closed&&f,!F.transition&&N&&h))?void 0:r.trim())||void 0,...fge(F)}),z=0;"visible"===C&&(z|=yge.Open),"hidden"===C&&(z|=yge.Closed),N&&"hidden"===C&&(z|=yge.Opening),!N&&"visible"===C&&(z|=yge.Closing);let H=Dme();return Ge.createElement(Yge.Provider,{value:I},Ge.createElement(wge,{value:z},H({ourProps:U,theirProps:g,defaultTag:Qge,features:eve,visible:"visible"===C,name:"Transition.Child"})))}),rve=Ume(function(e,t){let n=null!==Ve.useContext(Xge),r=null!==bge();return Ge.createElement(Ge.Fragment,null,!n&&r?Ge.createElement(tve,{ref:t,...e}):Ge.createElement(nve,{ref:t,...e}))}),ive=Object.assign(tve,{Child:rve,Root:tve});var ave=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ave||{}),sve=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(sve||{});let ove={0:(e,t)=>e.titleId===t.id?e:{...e,titleId:t.id}},lve=Ve.createContext(null);function cve(e){let t=Ve.useContext(lve);if(null===t){let t=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,cve),t}return t}function dve(e,t){return Ome(t.type,ove,e,t)}lve.displayName="DialogContext";let uve=Ume(function(e,t){let n=Ve.useId(),{id:r=`headlessui-dialog-${n}`,open:i,onClose:a,initialFocus:s,role:o="dialog",autoFocus:l=!0,__demoMode:c=!1,unmount:d=!1,...u}=e,h=Ve.useRef(!1);o="dialog"===o||"alertdialog"===o?o:(h.current||(h.current=!0),"dialog");let p=bge();void 0===i&&null!==p&&(i=(p&yge.Open)===yge.Open);let m=Ve.useRef(null),f=Jme(m,t),g=age(m.current),v=i?0:1,[x,y]=Ve.useReducer(dve,{titleId:null,descriptionId:null,panelRef:Ve.createRef()}),b=Eme(()=>a(!1)),w=Eme(e=>y({type:0,id:e})),j=!!Fge()&&0===v,[N,_]=function(){let e=Ve.useContext(Pge),t=Ve.useRef([]),n=Eme(n=>(t.current.push(n),e&&e.register(n),()=>r(n))),r=Eme(n=>{let r=t.current.indexOf(n);-1!==r&&t.current.splice(r,1),e&&e.unregister(n)}),i=Ve.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,Ve.useMemo(()=>function({children:e}){return Ge.createElement(Pge.Provider,{value:i},e)},[i])]}(),S={get current(){var e;return null!=(e=x.panelRef.current)?e:m.current}},C=Bge(),{resolveContainers:A}=function({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=Eme(()=>{var r,i;let a=wme(n),s=[];for(let t of e)null!==t&&(qme(t)?s.push(t):"current"in t&&qme(t.current)&&s.push(t.current));if(null!=t&&t.current)for(let e of t.current)s.push(e);for(let e of null!=(r=null==a?void 0:a.querySelectorAll("html > *, body > *"))?r:[])e!==document.body&&e!==document.head&&qme(e)&&"headlessui-portal-root"!==e.id&&(n&&(e.contains(n)||e.contains(null==(i=null==n?void 0:n.getRootNode())?void 0:i.host))||s.some(t=>e.contains(t))||s.push(e));return s});return{resolveContainers:r,contains:Eme(e=>r().some(t=>t.contains(e)))}}({mainTreeNode:C,portals:N,defaultContainers:[S]}),M=null!==p&&(p&yge.Closing)===yge.Closing;!function(e,{allowed:t,disallowed:n}={}){let r=Lfe(e,"inert-others");Ame(()=>{var e,i;if(!r)return;let a=Sme();for(let t of null!=(e=null==n?void 0:n())?e:[])t&&a.add(Ufe(t));let s=null!=(i=null==t?void 0:t())?i:[];for(let t of s){if(!t)continue;let e=wme(t);if(!e)continue;let n=t.parentElement;for(;n&&n!==e.body;){for(let e of n.children)s.some(t=>e.contains(t))||a.add(Ufe(e));n=n.parentElement}}return a.dispose},[r,t,n])}(!c&&!M&&j,{allowed:Eme(()=>{var e,t;return[null!=(t=null==(e=m.current)?void 0:e.closest("[data-headlessui-portal]"))?t:null]}),disallowed:Eme(()=>{var e;return[null!=(e=null==C?void 0:C.closest("body > *:not(#headlessui-portal-root)"))?e:null]})});let E=_fe.get(null);Ame(()=>{if(j)return E.actions.push(r),()=>E.actions.pop(r)},[E,r,j]);let k=Ife(E,Ve.useCallback(e=>E.selectors.isTop(e,r),[E,r]));ige(k,A,e=>{e.preventDefault(),b()}),function(e,t=("undefined"!=typeof document?document.defaultView:null),n){let r=Lfe(e,"escape");sge(t,"keydown",e=>{r&&(e.defaultPrevented||e.key===nfe.Escape&&n(e))})}(k,null==g?void 0:g.defaultView,e=>{e.preventDefault(),e.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur(),b()}),function(e,t,n=()=>[document.body]){uge(Lfe(e,"scroll-lock"),t,e=>{var t;return{containers:[...null!=(t=e.containers)?t:[],n]}})}(!c&&!M&&j,g,A),function(e,t,n){let r=Mme(e=>{let t=e.getBoundingClientRect();0===t.x&&0===t.y&&0===t.width&&0===t.height&&n()});Ve.useEffect(()=>{if(!e)return;let n=null===t?null:Xme(t)?t:t.current;if(!n)return;let i=Sme();if("undefined"!=typeof ResizeObserver){let e=new ResizeObserver(()=>r.current(n));e.observe(n),i.add(()=>e.disconnect())}if("undefined"!=typeof IntersectionObserver){let e=new IntersectionObserver(()=>r.current(n));e.observe(n),i.add(()=>e.disconnect())}return()=>i.dispose()},[t,r,e])}(j,m,b);let[T,P]=function(){let[e,t]=Ve.useState([]);return[e.length>0?e.join(" "):void 0,Ve.useMemo(()=>function(e){let n=Eme(e=>(t(t=>[...t,e]),()=>t(t=>{let n=t.slice(),r=n.indexOf(e);return-1!==r&&n.splice(r,1),n}))),r=Ve.useMemo(()=>({register:n,slot:e.slot,name:e.name,props:e.props,value:e.value}),[n,e.slot,e.name,e.props,e.value]);return Ge.createElement(Zme.Provider,{value:r},e.children)},[t])]}(),O=Ve.useMemo(()=>[{dialogState:v,close:b,setTitleId:w,unmount:d},x],[v,b,w,d,x]),R=kme({open:0===v}),I={ref:f,id:r,role:o,tabIndex:-1,"aria-modal":c?void 0:0===v||void 0,"aria-labelledby":x.titleId,"aria-describedby":T,unmount:d},D=!function(){var e;let[t]=Ve.useState(()=>"undefined"!=typeof window&&"function"==typeof window.matchMedia?window.matchMedia("(pointer: coarse)"):null),[n,r]=Ve.useState(null!=(e=null==t?void 0:t.matches)&&e);return Ame(()=>{if(t)return t.addEventListener("change",e),()=>t.removeEventListener("change",e);function e(e){r(e.matches)}},[t]),n}(),L=Vge.None;j&&!c&&(L|=Vge.RestoreFocus,L|=Vge.TabLock,l&&(L|=Vge.AutoFocus),D&&(L|=Vge.InitialFocus));let B=Dme();return Ge.createElement(jge,null,Ge.createElement(Cge,{force:!0},Ge.createElement(Ige,null,Ge.createElement(lve.Provider,{value:O},Ge.createElement(Rge,{target:m},Ge.createElement(Cge,{force:!1},Ge.createElement(P,{slot:R},Ge.createElement(_,null,Ge.createElement(Wge,{initialFocus:s,initialFocusFallback:m,containers:A,features:L},Ge.createElement(ife,{value:b},B({ourProps:I,theirProps:u,slot:R,defaultTag:hve,features:pve,visible:0===v,name:"Dialog"})))))))))))}),hve="div",pve=Rme.RenderStrategy|Rme.Static;let mve=Ume(function(e,t){let{transition:n=!1,open:r,...i}=e,a=bge(),s=e.hasOwnProperty("open")||null!==a,o=e.hasOwnProperty("onClose");if(!s&&!o)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!s)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!o)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!a&&"boolean"!=typeof e.open)throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if("function"!=typeof e.onClose)throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return void 0===r&&!n||i.static?Ge.createElement(Lge,null,Ge.createElement(uve,{ref:t,open:r,...i})):Ge.createElement(Lge,null,Ge.createElement(ive,{show:r,transition:n,unmount:i.unmount},Ge.createElement(uve,{ref:t,...i})))}),fve=Ume(function(e,t){let n=Ve.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:i=!1,...a}=e,[{dialogState:s,unmount:o},l]=cve("Dialog.Panel"),c=Jme(t,l.panelRef),d=kme({open:0===s}),u={ref:c,id:r,onClick:Eme(e=>{e.stopPropagation()})},h=i?rve:Ve.Fragment,p=i?{unmount:o}:{},m=Dme();return Ge.createElement(h,{...p},m({ourProps:u,theirProps:a,slot:d,defaultTag:"div",name:"Dialog.Panel"}))});Ume(function(e,t){let{transition:n=!1,...r}=e,[{dialogState:i,unmount:a}]=cve("Dialog.Backdrop"),s=kme({open:0===i}),o={ref:t,"aria-hidden":!0},l=n?rve:Ve.Fragment,c=n?{unmount:a}:{},d=Dme();return Ge.createElement(l,{...c},d({ourProps:o,theirProps:r,slot:s,defaultTag:"div",name:"Dialog.Backdrop"}))});let gve=Ume(function(e,t){let n=Ve.useId(),{id:r=`headlessui-dialog-title-${n}`,...i}=e,[{dialogState:a,setTitleId:s}]=cve("Dialog.Title"),o=Jme(t);Ve.useEffect(()=>(s(r),()=>s(null)),[r,s]);let l=kme({open:0===a}),c={ref:o,id:r};return Dme()({ourProps:c,theirProps:i,slot:l,defaultTag:"h2",name:"Dialog.Title"})}),vve=Object.assign(mve,{Panel:fve,Title:gve,Description:tfe});const xve=[{name:"Mc nh",value:"",gradient:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",preview:"#667eea",messageColor:"#667eea",messageTextColor:"#ffffff"},{name:"Hng tm",value:"#f093fb",gradient:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",preview:"#f093fb",messageColor:"#e879f9",messageTextColor:"#ffffff"},{name:"Xanh bin",value:"#4facfe",gradient:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",preview:"#4facfe",messageColor:"#3b82f6",messageTextColor:"#ffffff"},{name:"Xanh l",value:"#43e97b",gradient:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)",preview:"#43e97b",messageColor:"#22c55e",messageTextColor:"#ffffff"},{name:"Cam ",value:"#fa709a",gradient:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)",preview:"#fa709a",messageColor:"#f97316",messageTextColor:"#ffffff"},{name:"Vng nh",value:"#ffecd2",gradient:"linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)",preview:"#ffecd2",messageColor:"#f59e0b",messageTextColor:"#ffffff"},{name:"Xanh mint",value:"#a8edea",gradient:"linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)",preview:"#a8edea",messageColor:"#06b6d4",messageTextColor:"#ffffff"},{name:"Tm lavender",value:"#d299c2",gradient:"linear-gradient(135deg, #d299c2 0%, #fef9d7 100%)",preview:"#d299c2",messageColor:"#8b5cf6",messageTextColor:"#ffffff"}],yve=e=>{if(!e)return{messageColor:"#667eea",messageTextColor:"#ffffff",secondaryMessageColor:"#f1f5f9"};const t=xve.find(t=>t.value===e);return t?{messageColor:t.messageColor||t.value,messageTextColor:t.messageTextColor||"#ffffff",secondaryMessageColor:`${t.value}15`}:{messageColor:e,messageTextColor:"#ffffff",secondaryMessageColor:`${e}15`}},bve="http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE",wve=e=>{if(!e)return"";if(/^https?:\/\//i.test(e))return e;const t=bve.replace(/\/+$/,""),n=String(e).replace(/^\/+/,"");return t?`${t}/${n}`:`/${n}`},jve=({conversation:e,onClose:t,onLeave:n,onConversationUpdate:r})=>{var i,a,s;const[o,l]=Ve.useState([]),[c,d]=Ve.useState(!1),[u,h]=Ve.useState(!1),[p,m]=Ve.useState(!1),[f,g]=Ve.useState(e.background_color||""),v=()=>{const e=[localStorage.getItem("vibeventure_token"),localStorage.getItem("token"),sessionStorage.getItem("vibeventure_token"),sessionStorage.getItem("token")];for(const n of e)if(n)return n.startsWith("Bearer ")?n.slice(7):n;const t=document.cookie.match(/(?:^|; )(?:vibeventure_token|token)=([^;]+)/);return t?decodeURIComponent(t[1]).startsWith("Bearer ")?decodeURIComponent(t[1]).slice(7):decodeURIComponent(t[1]):null};Ve.useEffect(()=>{let t=!0;const n=new AbortController;return(async()=>{if(e){d(!0);try{const r=v(),i=await fetch(`${bve}/api/chat/media.php?conversation_id=${e.id}&limit=9`,{headers:r?{Authorization:`Bearer ${r}`}:void 0,signal:n.signal});if(!i.ok){if(401===i.status)return QI.error("Token ht hn. Vui lng ng nhp li."),void l([]);throw new Error(`HTTP ${i.status}`)}const a=await i.json();t&&a&&a.success&&Array.isArray(a.data)?l(a.data):l([])}catch(c$e){if("AbortError"===c$e.name)return;QI.error("Khng th ti file phng tin"),l([])}finally{t&&d(!1)}}})(),()=>{t=!1,n.abort()}},[e]);const x=e=>{const t=wve(e.file_url);if("image"===e.type)return Qe.jsx("a",{href:t,"data-fancybox":"chat-media","data-caption":e.original_name||"Hnh nh",className:"aspect-square rounded-lg overflow-hidden block",children:Qe.jsx("img",{src:t,alt:e.original_name||"image",className:"w-full h-full object-cover",loading:"lazy"})},e.id);if("video"===e.type){const n=e.thumbnail_url?wve(e.thumbnail_url):void 0;return Qe.jsx("a",{href:t,"data-fancybox":"chat-media","data-caption":e.original_name||"Video",className:"aspect-square rounded-lg overflow-hidden block",children:Qe.jsxs("div",{className:"relative w-full h-full bg-black/20",children:[n?Qe.jsx("img",{src:n,alt:e.original_name||"video",className:"w-full h-full object-cover",loading:"lazy"}):Qe.jsx("div",{className:"w-full h-full flex items-center justify-center text-white/80",children:Qe.jsx(Gf,{})}),Qe.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:Qe.jsx(Gf,{className:"w-10 h-10 text-white/90"})})]})},e.id)}return Qe.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"aspect-square rounded-lg overflow-hidden flex items-center justify-center bg-secondary/50 p-3 text-center",title:e.original_name||"File",children:Qe.jsxs("div",{className:"flex flex-col items-center gap-2",children:[Qe.jsx(Wm,{className:"text-muted-foreground"}),Qe.jsx("div",{className:"text-xs font-medium truncate max-w-[6rem]",children:e.original_name||"Tp nh km"}),e.file_size&&Qe.jsxs("div",{className:"text-xs text-muted-foreground",children:[(e.file_size/1024).toFixed(1)," KB"]})]})},e.id)},y=e=>Qe.jsxs("div",{className:"flex flex-col items-center gap-2 p-3 bg-white/5 rounded-lg",children:[Qe.jsxs("div",{className:"w-12 h-12 rounded-full border-2 border-gray-300 hover:scale-110 transition-transform relative overflow-hidden",style:{background:e.gradient},children:[f===e.value&&Qe.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Qe.jsx(gm,{size:16,className:"text-white drop-shadow-lg"})}),p&&f===e.value&&Qe.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Qe.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})})]}),Qe.jsxs("div",{className:"w-full space-y-1",children:[Qe.jsx("div",{className:"text-xs px-2 py-1 rounded-lg text-white text-center",style:{backgroundColor:e.messageColor||e.value,color:e.messageTextColor},children:"Tin nhn"}),Qe.jsx("div",{className:"text-xs px-2 py-1 rounded-lg bg-gray-200 text-gray-800 text-center",children:"Phn hi"})]}),Qe.jsx("span",{className:"text-xs font-medium text-center",children:e.name})]});return Qe.jsx(eM,{children:Qe.jsxs(QT.div,{initial:{x:300,opacity:0},animate:{x:0,opacity:1},exit:{x:300,opacity:0},className:"w-80 bg-card border-l border-border flex flex-col",children:[Qe.jsxs("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[Qe.jsx("h3",{className:"font-bold text-foreground",children:"Thng tin"}),Qe.jsx("button",{onClick:t,className:"p-2 hover:bg-secondary rounded-xl transition-colors",children:Qe.jsx(Fg,{size:20,className:"text-muted-foreground"})})]}),Qe.jsxs("div",{className:"flex-1 overflow-y-auto chat-scroll p-4 space-y-6",children:[Qe.jsxs("div",{className:"text-center",children:[Qe.jsx("img",{src:"group"===e.type?e.avatar||"/images/avatars/Avt-Group-Default.png":(null==(i=e.participants.find(e=>e.id))?void 0:i.avatar)||"/images/avatars/Avt-Default.png",alt:e.name,className:"w-24 h-24 rounded-full mx-auto mb-4 object-cover ring-4 ring-border"}),Qe.jsx("h2",{className:"text-xl font-bold text-foreground mb-1",children:"group"===e.type?e.name:null==(a=e.participants.find(e=>e.id))?void 0:a.name}),"group"===e.type&&Qe.jsxs("p",{className:"text-sm text-muted-foreground flex items-center justify-center gap-1",children:[Qe.jsx(Og,{size:14}),e.participants.length," thnh vin"]})]}),Qe.jsxs("div",{children:[Qe.jsxs("h4",{className:"font-semibold text-foreground mb-3 flex items-center gap-2",children:[Qe.jsx(If,{size:16,className:"text-primary"}),"Ty chnh giao din"]}),Qe.jsxs("div",{className:"space-y-3",children:[Qe.jsxs("button",{onClick:()=>h(!u),className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-secondary/50 transition-colors",children:[Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-gray-300",style:{background:f||"#667eea"}}),Qe.jsx("div",{className:"w-6 h-4 rounded text-xs flex items-center justify-center text-white font-bold",style:{backgroundColor:yve(f).messageColor,fontSize:"10px"},children:"Aa"})]}),Qe.jsxs("div",{className:"flex-1 text-left",children:[Qe.jsx("p",{className:"text-sm font-medium text-foreground",children:"Mu nn & tin nhn"}),Qe.jsx("p",{className:"text-xs text-muted-foreground",children:(null==(s=xve.find(e=>e.value===f))?void 0:s.name)||"Mc nh"})]}),Qe.jsx(QT.div,{animate:{rotate:u?180:0},transition:{duration:.2},children:Qe.jsx(Fg,{size:16,className:"text-muted-foreground"})})]}),Qe.jsx(eM,{children:u&&Qe.jsx(QT.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden",children:Qe.jsxs("div",{className:"p-4 bg-secondary/20 rounded-xl",children:[Qe.jsx("p",{className:"text-xs text-muted-foreground mb-3 text-center",children:"Chn mu ch  - Tin nhn s t ng iu chnh"}),Qe.jsx("div",{className:"grid grid-cols-2 gap-3",children:xve.map(t=>Qe.jsx("button",{onClick:()=>(async t=>{var n;m(!0);try{const i=v();if(!i)return void QI.error("Khng tm thy token. Vui lng ng nhp li.");const a=yve(t),s=await fetch(`${bve}/api/chat/update_conversation.php`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({conversation_id:e.id,background_color:t||null,message_color:a.messageColor,message_text_color:a.messageTextColor})}),o=await s.json();if(!s.ok||!o.success)throw new Error(o.message||"Khng th cp nht mu nn");g(t),r&&r({...e,background_color:t||void 0,message_color:a.messageColor,message_text_color:a.messageTextColor});const l=(null==(n=xve.find(e=>e.value===t))?void 0:n.name)||"Ty chnh";QI.success(` i mu nn thnh: ${l}`),h(!1)}catch(i){QI.error(i.message||"Khng th cp nht mu nn")}finally{m(!1)}})(t.value),disabled:p,className:"relative group hover:scale-105 transition-transform",title:t.name,children:y(t)},t.value))})]})})})]})]}),"group"===e.type&&Qe.jsxs("div",{children:[Qe.jsxs("h4",{className:"font-semibold text-foreground mb-3 flex items-center gap-2",children:[Qe.jsx(Og,{size:16,className:"text-primary"}),"Thnh vin"]}),Qe.jsx("div",{className:"space-y-2",children:e.participants.map(e=>Qe.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-xl hover:bg-secondary/50 transition-colors",children:[Qe.jsx("img",{src:e.avatar||"/images/avatars/Avt-Default.png",alt:e.name,className:"w-10 h-10 rounded-full object-cover"}),Qe.jsx("span",{className:"text-sm font-medium text-foreground",children:e.name})]},e.id))})]}),Qe.jsxs("div",{children:[Qe.jsxs("h4",{className:"font-semibold text-foreground mb-3 flex items-center gap-2",children:[Qe.jsx(df,{size:16,className:"text-primary"}),"File phng tin"]}),c?Qe.jsx("div",{className:"flex items-center justify-center py-6",children:Qe.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary border-t-transparent"})}):0===o.length?Qe.jsx("div",{className:"text-sm text-muted-foreground",children:"Cha c file phng tin no."}):Qe.jsxs(Qe.Fragment,{children:[Qe.jsx("div",{className:"grid grid-cols-3 gap-2",children:o.slice(0,9).map(e=>Qe.jsx("div",{className:"aspect-square",children:x(e)},e.id))}),o.length>9&&Qe.jsx("div",{className:"mt-3 text-right",children:Qe.jsxs("a",{href:`${bve}/chat/media-list.php?conversation_id=${e.id}`,className:"text-sm text-primary hover:underline flex items-center justify-end gap-2",target:"_blank",rel:"noopener noreferrer",children:["Xem tt c (",o.length,")",Qe.jsx(Bm,{size:14})]})})]})]})]}),"group"===e.type&&Qe.jsx("div",{className:"p-4 border-t border-border",children:Qe.jsxs("button",{onClick:()=>n(e.id),className:"w-full px-4 py-2.5 bg-destructive/10 hover:bg-destructive/20 text-destructive rounded-xl font-medium transition-colors flex items-center justify-center gap-2",children:[Qe.jsx(bf,{size:18}),"Ri khi nhm"]})})]})})},Nve=({isOpen:e,onClose:t,type:n,callData:r,onAccept:i,onReject:a,onCancel:s})=>{const o=Ve.useRef(null);Ve.useEffect(()=>{const e=new Audio("/sounds/incoming-call.mp3");e.loop=!0,e.preload="auto",e.muted=!1,e.volume=1,o.current=e;const t=async()=>{var e,t;try{const n=null==(e=o.current)?void 0:e.play();n&&(await n,null==(t=o.current)||t.pause(),o.current&&(o.current.currentTime=0))}catch{}};return document.addEventListener("pointerdown",t,{once:!0,capture:!0}),()=>{try{e.pause(),e.src=""}catch{}document.removeEventListener("pointerdown",t,{capture:!0}),o.current=null}},[]),Ve.useEffect(()=>{var t,r;if(e&&"incoming"===n)try{const e=null==(t=o.current)?void 0:t.play();e&&e.catch(()=>{})}catch{}else try{null==(r=o.current)||r.pause(),o.current&&(o.current.currentTime=0)}catch{}},[e,n]);const l=()=>{var e;try{null==(e=o.current)||e.pause(),o.current&&(o.current.currentTime=0)}catch{}};return Qe.jsx(ive.Root,{show:e,as:Ve.Fragment,children:Qe.jsxs(vve,{as:"div",className:"relative z-50",onClose:e=>{l(),t()},children:[Qe.jsx(ive.Child,{as:Ve.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Qe.jsx("div",{className:"fixed inset-0 bg-background/95 backdrop-blur-md"})}),Qe.jsx("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:Qe.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:Qe.jsx(ive.Child,{as:Ve.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:Qe.jsx(vve.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-3xl bg-card border border-border p-8 shadow-2xl transition-all",children:Qe.jsxs("div",{className:"text-center",children:[Qe.jsx(QT.div,{animate:{scale:[1,1.05,1]},transition:{repeat:1/0,duration:2},className:"mx-auto mb-6",children:Qe.jsxs("div",{className:"relative inline-block",children:[Qe.jsx("img",{src:r.callerAvatar||"/images/avatars/Avt-Default.png",alt:r.callerName,className:"w-32 h-32 rounded-full object-cover ring-4 ring-primary/20"}),Qe.jsx("div",{className:"absolute inset-0 rounded-full bg-primary/10 animate-ping"})]})}),Qe.jsx(vve.Title,{as:"h2",className:"text-2xl font-bold text-foreground mb-2",children:r.callerName||"Khng xc nh"}),Qe.jsxs("p",{className:"text-muted-foreground mb-8 flex items-center justify-center gap-2",children:["video"===r.callType?Qe.jsx(Ig,{size:18,className:"text-primary"}):Qe.jsx(Vf,{size:18,className:"text-primary"}),"incoming"===n?`Cuc gi ${"video"===r.callType?"video":"thoi"} n`:"ang gi..."]}),Qe.jsx("div",{className:"flex items-center justify-center gap-6",children:"incoming"===n?Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(QT.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{l(),a&&a()},className:"w-16 h-16 bg-destructive hover:bg-destructive/90 text-destructive-foreground rounded-full flex items-center justify-center shadow-lg transition-colors",children:Qe.jsx(Hf,{size:24})}),Qe.jsx(QT.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{l(),i&&i()},className:"w-16 h-16 bg-green-600 text-white rounded-full flex items-center justify-center shadow-glow transition-all",children:"video"===r.callType?Qe.jsx(Ig,{size:28}):Qe.jsx(Vf,{size:28})})]}):Qe.jsx(Qe.Fragment,{children:Qe.jsx(QT.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>{l(),s&&s()},className:"w-16 h-16 bg-destructive hover:bg-destructive/90 text-destructive-foreground rounded-full flex items-center justify-center shadow-lg transition-colors",children:Qe.jsx(Fg,{size:24})})})}),r.participants&&r.participants.length>1&&Qe.jsxs("div",{className:"mt-6 pt-6 border-t border-border",children:[Qe.jsxs("p",{className:"text-sm text-muted-foreground mb-3",children:[r.participants.length," ngi tham gia"]}),Qe.jsxs("div",{className:"flex items-center justify-center gap-2 flex-wrap",children:[r.participants.slice(0,5).map(e=>Qe.jsx("img",{src:e.avatar||"/images/avatars/Avt-Default.png",alt:e.name,className:"w-8 h-8 rounded-full object-cover ring-2 ring-border",title:e.name},e.id)),r.participants.length>5&&Qe.jsxs("div",{className:"w-8 h-8 rounded-full bg-secondary flex items-center justify-center text-xs font-semibold text-muted-foreground ring-2 ring-border",children:["+",r.participants.length-5]})]})]})]})})})})})]})})},_ve=e=>"string"==typeof e,Sve=e=>e&&null!==e&&e instanceof Element&&"nodeType"in e,Cve=function(e,t=void 0){return!e||e===document.body||t&&e===t?null:function(e){if(!(e&&e instanceof Element&&e.offsetParent))return!1;const t=e.scrollHeight>e.clientHeight,n=window.getComputedStyle(e).overflowY,r=-1!==n.indexOf("hidden"),i=-1!==n.indexOf("visible");return t&&!r&&!i}(e)?e:Cve(e.parentElement,t)},Ave=function(e){var t=(new DOMParser).parseFromString(e,"text/html").body;if(t.childElementCount>1){for(var n=document.createElement("div");t.firstChild;)n.appendChild(t.firstChild);return n}let r=t.firstChild;return!r||r instanceof HTMLElement?r:((n=document.createElement("div")).appendChild(r),n)},Mve=function(e=0,t=0,n=0){return Math.max(Math.min(t,n),e)},Eve=e=>"object"==typeof e&&null!==e&&e.constructor===Object&&"[object Object]"===Object.prototype.toString.call(e);function kve(e){return Eve(e)||Array.isArray(e)}function Tve(e,t){const n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every(n=>{const r=e[n],i=t[n];return"function"==typeof r?`${r}`==`${i}`:kve(r)&&kve(i)?Tve(r,i):r===i})}const Pve=function(e){for(const t of Dve)t.getState()===Ove.Running&&t.tick(Bve?e-Bve:0);Bve=e,Lve=window.requestAnimationFrame(Pve)};var Ove,Rve,Ive;!function(e){e[e.Initializing=0]="Initializing",e[e.Running=1]="Running",e[e.Paused=2]="Paused",e[e.Completed=3]="Completed",e[e.Destroyed=4]="Destroyed"}(Ove||(Ove={})),function(e){e[e.Spring=0]="Spring",e[e.Ease=1]="Ease"}(Rve||(Rve={})),function(e){e[e.Loop=0]="Loop",e[e.Reverse=1]="Reverse"}(Ive||(Ive={}));const Dve=new Set;let Lve=null,Bve=0;function Fve(){let e=Ove.Initializing,t=Rve.Ease,n=0,r=0,i=Fve.Easings.Linear,a=500,s=0,o=0,l=0,c=0,d=1/0,u=.01,h=.01,p=!1,m={},f=null,g={},v={},x={},y=0,b=0,w=Ive.Loop,j=Fve.Easings.Linear;const N=new Map;function _(e,...t){for(const n of N.get(e)||[])n(...t)}function S(e){return r=0,e?f=setTimeout(()=>{C()},e):C(),M}function C(){e=Ove.Running,_("start",g,v)}function A(){if(e=Ove.Completed,x={},_("end",g),e===Ove.Completed)if(n<y){if(n++,w===Ive.Reverse){const e=Object.assign({},m);m=Object.assign({},v),v=e}S(b)}else n=0;return M}const M={getState:function(){return e},easing:function(e){return i=e,t=Rve.Ease,x={},M},duration:function(e){return a=e,M},spring:function(e={}){t=Rve.Spring;const{velocity:n,mass:r,tension:i,friction:a,restDelta:m,restSpeed:f,maxSpeed:g,clamp:v}=Object.assign(Object.assign({},{velocity:0,mass:1,tension:170,friction:26,restDelta:.1,restSpeed:.1,maxSpeed:1/0,clamp:!0}),e);return s=n,o=r,l=i,c=a,h=m,u=f,d=g,p=v,x={},M},isRunning:function(){return e===Ove.Running},isSpring:function(){return t===Rve.Spring},from:function(e){return g=Object.assign({},e),M},to:function(e){return v=e,M},repeat:function(e,t=0,n=Ive.Loop,r){return y=e,b=t,w=n,j=r||i,M},on:function(e,t){var n,r;return n=e,r=t,N.set(n,[...N.get(n)||[],r]),M},off:function(e,t){var n,r;return n=e,r=t,N.has(n)&&N.set(n,N.get(n).filter(e=>e!==r)),M},start:function(t){return Tve(g,v)||(e=Ove.Initializing,m=Object.assign({},g),Dve.add(this),Lve||(Lve=window.requestAnimationFrame(Pve)),S(t)),M},pause:function(){return f&&(clearTimeout(f),f=null),e===Ove.Running&&(e=Ove.Paused,_("pause",g)),M},end:A,tick:function(n){n>50&&(n=50),r+=n;let f=0,y=!1;if(e!==Ove.Running)return M;if(t===Rve.Ease){f=Mve(0,r/a,1),y=1===f;const e=w===Ive.Reverse?j:i;for(const t in g)g[t]=m[t]+(v[t]-m[t])*e(f)}if(t===Rve.Spring){const e=.001*n;let t=0;for(const n in g){const r=v[n];let i=g[n];if("number"!=typeof r||isNaN(r)||"number"!=typeof i||isNaN(i))continue;if(Math.abs(r-i)<=h){g[n]=r,x[n]=0;continue}x[n]||("object"==typeof s&&"number"==typeof s[n]?x[n]=s[n]:x[n]="number"==typeof s?s:0);let a=x[n];a=Mve(-1*Math.abs(d),a,Math.abs(d));const m=a*o*c;a+=((i>r?-1:1)*(Math.abs(r-i)*l)-m)/o*e,i+=a*e;const f=g[n]>r?i<r:i>r;let y=Math.abs(a)<u&&Math.abs(r-i)<=h;p&&f&&(y=!0),y?(i=r,a=0):t++,g[n]=i,x[n]=a}y=!t}const b=Object.assign({},v);return _("step",g,m,v,f),y&&e===Ove.Running&&Tve(v,b)&&(e=Ove.Completed,A()),M},getStartValues:function(){return m},getCurrentValues:function(){return g},getCurrentVelocities:function(){return x},getEndValues:function(){return v},destroy:function(){e=Ove.Destroyed,f&&(clearTimeout(f),f=null),m=g=v={},Dve.delete(this)}};return M}function Uve(e){return"undefined"!=typeof TouchEvent&&e instanceof TouchEvent}function zve(e,t){const n=[],r=Uve(e)?e[t]:e instanceof MouseEvent&&("changedTouches"===t||"mouseup"!==e.type)?[e]:[];for(const i of r)n.push({x:i.clientX,y:i.clientY,ts:Date.now()});return n}function Hve(e){return zve(e,"touches")}function Vve(e){return zve(e,"targetTouches")}function Gve(e){return zve(e,"changedTouches")}function Wve(e){const t=e[0],n=e[1]||t;return{x:(t.x+n.x)/2,y:(t.y+n.y)/2,ts:n.ts}}function Kve(e){const t=e[0],n=e[1]||e[0];return t&&n?-1*Math.sqrt((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y)):0}Fve.destroy=()=>{for(const e of Dve)e.destroy();Lve&&(cancelAnimationFrame(Lve),Lve=null)},Fve.Easings={Linear:function(e){return e},EaseIn:function(e){return 0===e?0:Math.pow(2,10*e-10)},EaseOut:function(e){return 1===e?1:1-Math.pow(2,-10*e)},EaseInOut:function(e){return 0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}};const qve=e=>{e.cancelable&&e.preventDefault()},Xve={passive:!1},$ve={panThreshold:5,swipeThreshold:3,ignore:["textarea","input","select","[contenteditable]","[data-selectable]","[data-draggable]"]};let Yve=!1,Jve=!0;const Zve=(e,t)=>{let n,r,i,a=Object.assign(Object.assign({},$ve),t),s=[],o=[],l=[],c=!1,d=!1,u=!1,h=!1,p=0,m=0,f=0,g=0,v=0,x=0,y=0,b=0,w=0,j=[],N=0,_=0;const S=new Map;function C(e){const t=Kve(o),a=Kve(l),u=t&&a?t/a:0,h=Math.abs(y)>Math.abs(b)?y:b,p={srcEvent:n,isPanRecognized:c,isSwipeRecognized:d,firstTouch:s,previousTouch:l,currentTouch:o,deltaX:f,deltaY:g,offsetX:v,offsetY:x,velocityX:y,velocityY:b,velocity:h,angle:w,axis:i,scale:u,center:r};for(const n of S.get(e)||[])n(p)}function A(e){const t=Date.now();if(j=j.filter(e=>!e.ts||e.ts>t-100),e&&j.push(e),y=0,b=0,j.length>3){const e=j[0],t=j[j.length-1];if(e&&t){const n=t.x-e.x,r=t.y-e.y,i=e.ts&&t.ts?t.ts-e.ts:0;i>0&&(y=Math.abs(n)>3?n/(i/30):0,b=Math.abs(r)>3?r/(i/30):0)}}}function M(e){if("undefined"!=typeof MouseEvent&&e instanceof MouseEvent){if(Yve)return}else Yve=!0;const t=e.composedPath()[0],i=a.ignore.join(",");if(t.matches(i)||t.closest(i))return;if("undefined"!=typeof MouseEvent&&e instanceof MouseEvent){if(!e.buttons||0!==e.button)return;qve(e)}e instanceof MouseEvent&&(window.addEventListener("mousemove",E),window.addEventListener("mouseup",k)),window.addEventListener("blur",T),n=e,o=Vve(e),s=[...o],l=[],m=o.length,r=Wve(o),1===m&&(c=!1,d=!1,u=!1),m&&A(Wve(o));const f=Date.now(),g=f-(p||f);h=g>0&&g<=250&&1===m,p=f,clearTimeout(N),C("start")}function E(e){var t;if(!s.length)return;if(e.defaultPrevented)return;n=e,l=[...o],o=Hve(e);const d=Wve(l),h=Wve(Hve(e));if(A(h),m=o.length,r=h,l.length===o.length?(f=h.x-d.x,g=h.y-d.y):(f=0,g=0),s.length){const e=Wve(s);v=h.x-e.x,x=h.y-e.y}if(o.length>1){const e=Kve(o),t=Kve(l);Math.abs(e-t)>=.1&&(u=!0,C("pinch"))}c||(c=Math.abs(v)>a.panThreshold||Math.abs(x)>a.panThreshold,c&&(Jve=!1,clearTimeout(_),_=0,w=Math.abs(180*Math.atan2(x,v)/Math.PI),i=w>45&&w<135?"y":"x",s=[...o],l=[...o],v=0,x=0,f=0,g=0,null===(t=window.getSelection())||void 0===t||t.removeAllRanges(),C("panstart"))),c&&(f||g)&&C("pan"),C("move")}function k(e){if(n=e,!s.length)return;const t=Vve(e),i=Gve(e);if(m=t.length,r=Wve(i),i.length&&A(Wve(i)),l=[...o],o=[...t],s=[...t],m>0)C("end"),c=!1,d=!1,j=[];else{const e=a.swipeThreshold;(Math.abs(y)>e||Math.abs(b)>e)&&(d=!0),c&&C("panend"),d&&C("swipe"),c||d||u||(C("tap"),h?C("doubleTap"):N=setTimeout(function(){C("singleTap")},250)),C("end"),P()}}function T(){clearTimeout(N),P(),c&&C("panend"),C("end")}function P(){Yve=!1,c=!1,d=!1,h=!1,m=0,j=[],o=[],l=[],s=[],f=0,g=0,v=0,x=0,y=0,b=0,w=0,i=void 0,window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",k),window.removeEventListener("blur",T),Jve||_||(_=setTimeout(()=>{Jve=!0,_=0},100))}function O(e){const t=e.target;Yve=!1,t&&!e.defaultPrevented&&(Jve||(qve(e),e.stopPropagation()))}const R={init:function(){return e&&(e.addEventListener("click",O,Xve),e.addEventListener("mousedown",M,Xve),e.addEventListener("touchstart",M,Xve),e.addEventListener("touchmove",E,Xve),e.addEventListener("touchend",k),e.addEventListener("touchcancel",k)),R},on:function(e,t){return n=e,r=t,S.set(n,[...S.get(n)||[],r]),R;var n,r},off:function(e,t){return S.has(e)&&S.set(e,S.get(e).filter(e=>e!==t)),R},isPointerDown:()=>m>0,destroy:function(){clearTimeout(N),clearTimeout(_),_=0,e&&(e.removeEventListener("click",O,Xve),e.removeEventListener("mousedown",M,Xve),e.removeEventListener("touchstart",M,Xve),e.removeEventListener("touchmove",E,Xve),e.removeEventListener("touchend",k),e.removeEventListener("touchcancel",k)),e=null,P()}};return R};Zve.isClickAllowed=()=>Jve;const Qve={IMAGE_ERROR:"This image couldn't be loaded. <br /> Please try again later.",MOVE_UP:"Move up",MOVE_DOWN:"Move down",MOVE_LEFT:"Move left",MOVE_RIGHT:"Move right",ZOOM_IN:"Zoom in",ZOOM_OUT:"Zoom out",TOGGLE_FULL:"Toggle zoom level",TOGGLE_1TO1:"Toggle zoom level",ITERATE_ZOOM:"Toggle zoom level",ROTATE_CCW:"Rotate counterclockwise",ROTATE_CW:"Rotate clockwise",FLIP_X:"Flip horizontally",FLIP_Y:"Flip vertically",RESET:"Reset",TOGGLE_FS:"Toggle fullscreen"},exe=(e,t="")=>{e&&e.classList&&t.split(" ").forEach(t=>{t&&e.classList.add(t)})},txe=(e,t="")=>{e&&e.classList&&t.split(" ").forEach(t=>{t&&e.classList.remove(t)})},nxe=(e,t="",n)=>{e&&e.classList&&t.split(" ").forEach(t=>{t&&e.classList.toggle(t,n||!1)})},rxe=e=>{e.cancelable&&e.preventDefault()},ixe=(e,t=1e4)=>(e=parseFloat(e+"")||0,Math.round((e+Number.EPSILON)*t)/t),axe=e=>e instanceof HTMLImageElement;var sxe,oxe;!function(e){e.Reset="reset",e.Zoom="zoom",e.ZoomIn="zoomIn",e.ZoomOut="zoomOut",e.ZoomTo="zoomTo",e.ToggleCover="toggleCover",e.ToggleFull="toggleFull",e.ToggleMax="toggleMax",e.IterateZoom="iterateZoom",e.Pan="pan",e.Swipe="swipe",e.Move="move",e.MoveLeft="moveLeft",e.MoveRight="moveRight",e.MoveUp="moveUp",e.MoveDown="moveDown",e.RotateCCW="rotateCCW",e.RotateCW="rotateCW",e.FlipX="flipX",e.FlipY="flipY",e.ToggleFS="toggleFS"}(sxe||(sxe={})),function(e){e.Cover="cover",e.Full="full",e.Max="max"}(oxe||(oxe={}));const lxe={x:0,y:0,scale:1,angle:0,flipX:1,flipY:1},cxe={bounds:!0,classes:{container:"f-panzoom",wrapper:"f-panzoom__wrapper",content:"f-panzoom__content",viewport:"f-panzoom__viewport"},clickAction:sxe.ToggleFull,dblClickAction:!1,gestures:{},height:"auto",l10n:Qve,maxScale:4,minScale:1,mouseMoveFactor:1,panMode:"drag",protected:!1,singleClickAction:!1,spinnerTpl:'<div class="f-spinner"></div>',wheelAction:sxe.Zoom,width:"auto"};let dxe,uxe=0,hxe=0,pxe=0;const mxe=(e,t={},n={})=>{let r,i,a,s,o,l,c,d,u=0,h=Object.assign(Object.assign({},cxe),t),p={},m=Object.assign({},lxe),f=Object.assign({},lxe);const g=[];function v(e){let t=h[e];return t&&"function"==typeof t?t(te):t}function x(){return e&&e.parentElement&&r&&3===u}const y=new Map;function b(e,...t){const n=[...y.get(e)||[]];h.on&&n.push(h.on[e]);for(const r of n)r&&r instanceof Function&&r(te,...t);"*"!==e&&b("*",e,...t)}function w(e){if(!x())return;const t=e.target;if(Cve(t))return;const n=Date.now(),r=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(e,t){return Math.abs(t)>Math.abs(e)?t:e}),i=Mve(-1,r,1);b("wheel",e,i);const a=v("wheelAction");if(!a)return;if(e.defaultPrevented)return;const s=f.scale;let o=s*(i>0?1.5:.5);if(a===sxe.Zoom){const t=Math.abs(e.deltaY)<100&&Math.abs(e.deltaX)<100;if(n-hxe<(t?200:45))return void rxe(e);hxe=n;const r=O(),a=L();if(ixe(o)<ixe(r)&&ixe(s)<=ixe(r)?(pxe+=Math.abs(i),o=r):ixe(o)>ixe(a)&&ixe(s)>=ixe(a)?(pxe+=Math.abs(i),o=a):(pxe=0,o=Mve(r,o,a)),pxe>7)return}switch(rxe(e),a){case sxe.Pan:z(a,{srcEvent:e,deltaX:2*-e.deltaX,deltaY:2*-e.deltaY});break;case sxe.Zoom:z(sxe.ZoomTo,{srcEvent:e,scale:o,center:{x:e.clientX,y:e.clientY}});break;default:z(a,{srcEvent:e})}}function j(t){var n,i;const a=t.composedPath()[0];if(!Zve.isClickAllowed())return;if(!Sve(a)||t.defaultPrevented)return;if(!(null==e?void 0:e.contains(a)))return;if(a.hasAttribute("disabled")||a.hasAttribute("aria-disabled"))return;const s=a.closest("[data-panzoom-action]"),o=null===(n=null==s?void 0:s.dataset)||void 0===n?void 0:n.panzoomAction,l=(null===(i=null==s?void 0:s.dataset)||void 0===i?void 0:i.panzoomValue)||"";if(o){switch(rxe(t),o){case sxe.ZoomTo:case sxe.ZoomIn:case sxe.ZoomOut:z(o,{scale:parseFloat(l||"")||void 0});break;case sxe.MoveLeft:case sxe.MoveRight:z(o,{deltaX:parseFloat(l||"")||void 0});break;case sxe.MoveUp:case sxe.MoveDown:z(o,{deltaY:parseFloat(l||"")||void 0});break;case sxe.ToggleFS:Q();break;default:z(o)}return}if(!(null==r?void 0:r.contains(a)))return;const c={srcEvent:t};if(z(v("clickAction"),c),v("dblClickAction")){const e=Date.now(),t=e-(uxe||e);uxe=e,t>0&&t<=250?(dxe&&(clearTimeout(dxe),dxe=void 0),z(v("dblClickAction"),c)):dxe=setTimeout(()=>{z(v("singleClickAction"),c)},250)}}function N(e){if(d=e,!x()||!k())return;if(m.scale<=1||f.scale<=1)return;if(((null==r?void 0:r.dataset.animationName)||"").indexOf("zoom")>-1)return;const t=T(f.scale);if(!t)return;const{x:n,y:i}=t;z(sxe.Pan,{deltaX:n-f.x,deltaY:i-f.y})}function _(){var t;e&&(txe(e,"is-loading"),null===(t=e.querySelector(".f-spinner"))||void 0===t||t.remove())}function S(){if(!e||!i)return;if(_(),axe(i)&&(!i.complete||!i.naturalWidth))return u=2,null==r||r.classList.add("has-error"),void b("error");b("loaded");const{width:t,height:n}=M();axe(i)&&(i.setAttribute("width",t+""),i.setAttribute("height",n+"")),r&&(txe(r,"has-error"),axe(i)&&(r.setAttribute("width",t+""),r.setAttribute("height",n+""),r.style.aspectRatio=`${t/n||""}`)),l=Fve().on("start",(e,t)=>{void 0!==t.angle&&(t.angle=90*Math.round(t.angle/90)),void 0!==t.flipX&&(t.flipX=t.flipX>0?1:-1),void 0!==t.flipY&&(t.flipY=t.flipY>0?1:-1),f=Object.assign(Object.assign({},lxe),t),U(),b("animationStart")}).on("pause",e=>{f=Object.assign(Object.assign({},lxe),e)}).on("step",e=>{if(!x())return void(null==l||l.end());if(m=Object.assign(Object.assign({},lxe),e),k()||!v("bounds")||Y()||f.scale>m.scale||f.scale<R())return void H();const t=B(f.scale);let n=!1,r=!1,i=!1,a=!1;m.x<t.x[0]&&(n=!0),m.x>t.x[1]&&(r=!0),m.y<t.y[0]&&(a=!0),m.y>t.y[1]&&(i=!0);let s=!1,o=!1,c=!1,d=!1;f.x<t.x[0]&&(s=!0),f.x>t.x[1]&&(o=!0),f.y<t.y[0]&&(d=!0),f.y>t.y[1]&&(c=!0);let u=!1;(r&&o||n&&s)&&(f.x=Mve(t.x[0],f.x,t.x[1]),u=!0),(i&&c||a&&d)&&(f.y=Mve(t.y[0],f.y,t.y[1]),u=!0),u&&l&&l.spring({tension:94,friction:17,maxSpeed:555*f.scale,restDelta:.1,restSpeed:.1,velocity:l.getCurrentVelocities()}).from(m).to(f).start(),H()}).on("end",()=>{(null==o?void 0:o.isPointerDown())||F(),(null==l?void 0:l.isRunning())||(U(),b("animationEnd"))}),function(){const e=v("gestures");if(!e)return;if(!s||!i)return;let t=!1;o=Zve(s,e).on("start",e=>{if(!v("gestures"))return;if(!l)return;if(!x()||k())return;const n=e.srcEvent;(m.scale>1||e.currentTouch.length>1)&&(null==n||n.stopPropagation(),l.pause(),t=!0),1===e.currentTouch.length&&b("touchStart")}).on("move",e=>{var n;t&&(1!==f.scale||e.currentTouch.length>1)&&(rxe(e.srcEvent),null===(n=e.srcEvent)||void 0===n||n.stopPropagation())}).on("pan",e=>{if(!t)return;const n=e.srcEvent;(1!==f.scale||e.currentTouch.length>1)&&(rxe(n),z(sxe.Pan,e))}).on("swipe",e=>{t&&f.scale>1&&z(sxe.Swipe,e)}).on("tap",e=>{b("click",e)}).on("singleTap",e=>{b("singleClick",e)}).on("doubleTap",e=>{b("dblClick",e)}).on("pinch",e=>{t&&(e.scale>R()?z(sxe.ZoomIn,e):e.scale<R()?z(sxe.ZoomOut,e):z(sxe.Pan,e))}).on("end",e=>{t&&(e.currentTouch.length?(e.srcEvent.stopPropagation(),rxe(e.srcEvent),null==l||l.end()):(t=!1,U(),F(),b("touchEnd")))}).init()}(),s&&(s.addEventListener("wheel",w,{passive:!1}),g.push(()=>{null==s||s.removeEventListener("wheel",w,{passive:!1})})),null==e||e.addEventListener("click",j),null===document||void 0===document||document.addEventListener("mousemove",N),g.push(()=>{null==e||e.removeEventListener("click",j),null===document||void 0===document||document.removeEventListener("mousemove",N)});const a=C();m=Object.assign({},a),f=Object.assign({},a),u=3,H(),U(),b("ready"),requestAnimationFrame(()=>{_(),s&&(s.style.visibility="")})}function C(){const e=Object.assign({},v("startPos")||{});let t=e.scale,n=1;n="string"==typeof t?P(t):"number"==typeof t?t:R();const r=Object.assign(Object.assign(Object.assign({},lxe),e),{scale:n}),i=k()?T(n):void 0;if(i){const{x:e,y:t}=i;r.x=e,r.y=t}return r}function A(){const e={top:0,left:0,width:0,height:0};if(r){const t=r.getBoundingClientRect();f.angle%180==90?(e.top=t.top+.5*t.height-.5*t.width,e.left=t.left+.5*t.width-.5*t.height,e.width=t.height,e.height=t.width):(e.top=t.top,e.left=t.left,e.width=t.width,e.height=t.height)}return e}function M(){let e=v("width"),t=v("height");if(i&&"auto"===e){const t=i.getAttribute("width");e=t?parseFloat(t+""):void 0!==i.dataset.width?parseFloat(i.dataset.width+""):axe(s)?s.naturalWidth:axe(i)?i.naturalWidth:(null==r?void 0:r.getBoundingClientRect().width)||0}else e=_ve(e)?parseFloat(e):e;if(i&&"auto"===t){const e=i.getAttribute("height");t=e?parseFloat(e+""):void 0!==i.dataset.height?parseFloat(i.dataset.height+""):axe(s)?s.naturalHeight:axe(i)?i.naturalHeight:(null==r?void 0:r.getBoundingClientRect().height)||0}else t=_ve(t)?parseFloat(t):t;return{width:e,height:t}}function E(){const e=A();return{width:e.width,height:e.height}}function k(){return"mousemove"===v("panMode")&&matchMedia("(hover: hover)").matches}function T(e){const t=d||v("event"),n=null==r?void 0:r.getBoundingClientRect();if(!t||!n||e<=1)return{x:0,y:0};const i=(t.clientX||0)-n.left,a=(t.clientY||0)-n.top,{width:s,height:o}=E(),l=B(e);if(e>1){const t=v("mouseMoveFactor");t>1&&(e*=t)}let c=s*e,u=o*e,h=.5*(c-s)-i/s*100/100*(c-s),p=.5*(u-o)-a/o*100/100*(u-o);return h=Mve(l.x[0],h,l.x[1]),p=Mve(l.y[0],p,l.y[1]),{x:h,y:p}}function P(t="base"){if(!e)return 1;const n=e.getBoundingClientRect(),r=A(),{width:i,height:a}=M(),s=e=>{if("number"==typeof e)return e;switch(e){case"min":case"base":return 1;case"cover":return Math.max(n.height/r.height,n.width/r.width)||1;case"full":case"max":{const e=f.angle%180==90?a:i;return e&&r.width?e/r.width:1}}},o=v("minScale"),l=v("maxScale"),c=Math.min(s("full"),s(o)),d="number"==typeof l?s("full")*l:Math.min(s("full"),s(l));switch(t){case"min":return c;case"base":return Mve(c,1,d);case"cover":return s("cover");case"full":return Math.min(d,s("full"));case"max":return d}}function O(){return P("min")}function R(){return P("base")}function I(){return P("cover")}function D(){return P("full")}function L(){return P("max")}function B(t){const n={x:[0,0],y:[0,0]},r=null==e?void 0:e.getBoundingClientRect();if(!r)return n;const i=A(),a=r.width,s=r.height;let o=i.width,l=i.height,c=t=void 0===t?f.scale:t,d=t;if(k()&&t>1){const e=v("mouseMoveFactor");e>1&&(o*t>a+.01&&(c*=e),l*t>s+.01&&(d*=e))}return o*=c,l*=d,t>1&&(o>a&&(n.x[0]=.5*(a-o),n.x[1]=.5*(o-a)),n.x[0]-=.5*(i.left-r.left),n.x[1]-=.5*(i.left-r.left),n.x[0]-=.5*(i.left+i.width-r.right),n.x[1]-=.5*(i.left+i.width-r.right),l>s&&(n.y[0]=.5*(s-l),n.y[1]=.5*(l-s)),n.y[0]-=.5*(i.top-r.top),n.y[1]-=.5*(i.top-r.top),n.y[0]-=.5*(i.top+i.height-r.bottom),n.y[1]-=.5*(i.top+i.height-r.bottom)),n}function F(){if(!x())return;if(!v("bounds"))return;if(!l)return;const e=O(),t=L(),n=Mve(e,f.scale,t);if(f.scale<e-.01||f.scale>t+.01)return void z(sxe.ZoomTo,{scale:n});if(l.isRunning())return;if(Y())return;const r=B(n);f.x<r.x[0]||f.x>r.x[1]||f.y<r.y[0]||f.y>r.y[1]?(f.x=Mve(r.x[0],f.x,r.x[1]),f.y=Mve(r.y[0],f.y,r.y[1]),l.spring({tension:170,friction:17,restDelta:.001,restSpeed:.001,maxSpeed:1/0,velocity:l.getCurrentVelocities()}),l.from(m).to(f).start()):H()}function U(t){var n;if(!x())return;const i=$(),a=Y(),s=J(),o=Z(),l=G(),c=W();nxe(r,"is-fullsize",o),nxe(r,"is-expanded",s),nxe(r,"is-dragging",a),nxe(r,"can-drag",i),nxe(r,"will-zoom-in",l),nxe(r,"will-zoom-out",c);const d=q(),u=X(),h=K(),p=!x();for(const r of(null===(n=t||e)||void 0===n?void 0:n.querySelectorAll("[data-panzoom-action]"))||[]){const e=r.dataset.panzoomAction;let t=!1;if(p)t=!0;else switch(e){case sxe.ZoomIn:d||(t=!0);break;case sxe.ZoomOut:h||(t=!0);break;case sxe.ToggleFull:{u||h||(t=!0);const e=r.querySelector("g");e&&(e.style.display=o&&!t?"none":"");break}case sxe.IterateZoom:{d||h||(t=!0);const e=r.querySelector("g");e&&(e.style.display=d||t?"":"none");break}case sxe.ToggleCover:case sxe.ToggleMax:d||h||(t=!0)}t?(r.setAttribute("aria-disabled",""),r.setAttribute("tabindex","-1")):(r.removeAttribute("aria-disabled"),r.removeAttribute("tabindex"))}}function z(t,n){var r;if(!(t&&e&&i&&l&&x()))return;if(t===sxe.Swipe&&Math.abs(l.getCurrentVelocities().scale)>.01)return;const a=Object.assign({},f);let s=Object.assign({},f),o=B(k()?a.scale:m.scale);const c=l.getCurrentVelocities(),d=A(),u=((null===(r=(n=n||{}).currentTouch)||void 0===r?void 0:r.length)||0)>1,h=n.velocityX||0,p=n.velocityY||0;let g=n.center;n.srcEvent&&(g=Wve(Gve(n.srcEvent)));let y=n.deltaX||0,w=n.deltaY||0;switch(t){case sxe.MoveRight:y=n.deltaX||100;break;case sxe.MoveLeft:y=n.deltaX||-100;break;case sxe.MoveUp:w=n.deltaY||-100;break;case sxe.MoveDown:w=n.deltaY||100}let j=[];switch(t){case sxe.Reset:s=Object.assign({},lxe),s.scale=R();break;case sxe.Pan:case sxe.Move:case sxe.MoveLeft:case sxe.MoveRight:case sxe.MoveUp:case sxe.MoveDown:if(Y()){let e=1,t=1;s.x<=o.x[0]&&h<=0&&(e=Math.max(.01,1-Math.abs(1/d.width*Math.abs(s.x-o.x[0]))),e*=.2),s.x>=o.x[1]&&h>=0&&(e=Math.max(.01,1-Math.abs(1/d.width*Math.abs(s.x-o.x[1]))),e*=.2),s.y<=o.y[0]&&p<=0&&(t=Math.max(.01,1-Math.abs(1/d.height*Math.abs(s.y-o.y[0]))),t*=.2),s.y>=o.y[1]&&p>=0&&(t=Math.max(.01,1-Math.abs(1/d.height*Math.abs(s.y-o.y[1]))),t*=.2),s.x+=y*e,s.y+=w*t}else s.x=Mve(o.x[0],s.x+y,o.x[1]),s.y=Mve(o.y[0],s.y+w,o.y[1]);break;case sxe.Swipe:const e=(e=0)=>Math.sign(e)*Math.pow(Math.abs(e),1.5);s.x+=Mve(-1e3,e(h),1e3),s.y+=Mve(-1e3,e(p),1e3),p&&!h&&(s.x=Mve(o.x[0],s.x,o.x[1])),!p&&h&&(s.y=Mve(o.y[0],s.y,o.y[1])),c.x=h,c.y=p;break;case sxe.ZoomTo:s.scale=n.scale||1;break;case sxe.ZoomIn:s.scale=s.scale*(n.scale||2),u||(s.scale=Math.min(s.scale,L()));break;case sxe.ZoomOut:s.scale=s.scale*(n.scale||.5),u||(s.scale=Math.max(s.scale,O()));break;case sxe.ToggleCover:j=[R(),I()];break;case sxe.ToggleFull:j=[R(),D()];break;case sxe.ToggleMax:j=[R(),L()];break;case sxe.IterateZoom:j=[R(),D(),L()];break;case sxe.Zoom:const t=D();s.scale>=t-.05?s.scale=R():s.scale=Math.min(t,s.scale*(n.scale||2));break;case sxe.RotateCW:s.angle+=90;break;case sxe.RotateCCW:s.angle-=90;break;case sxe.FlipX:s.flipX*=-1;break;case sxe.FlipY:s.flipY*=-1}if(void 0!==m.angle&&Math.abs(m.angle)>=360&&(s.angle-=360*Math.floor(m.angle/360),m.angle-=360*Math.floor(m.angle/360)),j.length){const e=j.findIndex(e=>e>s.scale+1e-4);s.scale=j[e]||j[0]}if(u&&(s.scale=Mve(O()*(u?.8:1),s.scale,L()*(u?1.6:1))),k()){const e=T(s.scale);if(e){const{x:t,y:n}=e;s.x=t,s.y=n}}else if(Math.abs(s.scale-a.scale)>1e-4){let t=0,n=0;if(g)t=g.x,n=g.y;else{const r=e.getBoundingClientRect();t=r.x+.5*r.width,n=r.y+.5*r.height}let r=t-d.left,i=n-d.top;r-=.5*d.width,i-=.5*d.height;const l=(r-a.x)/a.scale,c=(i-a.y)/a.scale;s.x=r-l*s.scale,s.y=i-c*s.scale,!u&&v("bounds")&&(o=B(s.scale),s.x=Mve(o.x[0],s.x,o.x[1]),s.y=Mve(o.y[0],s.y,o.y[1]))}if(t===sxe.Swipe){let e=94,t=17,n=500*s.scale,r=c;l.spring({tension:e,friction:t,maxSpeed:n,restDelta:.1,restSpeed:.1,velocity:r})}else t===sxe.Pan||u?l.spring({tension:900,friction:17,restDelta:.01,restSpeed:.01,maxSpeed:1}):l.spring({tension:170,friction:17,restDelta:.001,restSpeed:.001,maxSpeed:1/0,velocity:c});if(0===n.velocity||Tve(m,s))m=Object.assign({},s),f=Object.assign({},s),l.end(),H(),U();else{if(Tve(f,s))return;l.from(m).to(s).start()}b("action",t)}function H(){if(!i||!r||!s)return;const{width:t,height:n}=M();Object.assign(r.style,{maxWidth:`min(${t}px, 100%)`,maxHeight:`min(${n}px, 100%)`});const a=function(){const{width:t,height:n}=M(),{width:r,height:i}=E();if(!e)return{x:0,y:0,width:0,height:0,scale:0,flipX:0,flipY:0,angle:0,fitWidth:r,fitHeight:i,fullWidth:t,fullHeight:n};let{x:a,y:s,scale:o,angle:l,flipX:c,flipY:d}=m,u=1/D(),h=t,p=n,g=m.scale*u,v=f.scale*u;const x=Math.max(r,i),y=Math.min(r,i);t>n?(h=x,p=y):(h=y,p=x),g=t>n?x*o/t||1:x*o/n||1;let b=h?t*v:0,w=p?n*v:0;return a=a+.5*h-.5*b,s=s+.5*p-.5*w,{x:a,y:s,width:b,height:w,scale:h&&p?t*g/b:0,flipX:c,flipY:d,angle:l,fitWidth:r,fitHeight:i,fullWidth:t,fullHeight:n}}(),{x:o,y:l,width:c,height:d,scale:u,angle:h,flipX:p,flipY:g}=a;let v=`translate(${ixe(o)}px, ${ixe(l)}px)`;v+=1!==p||1!==g?` scaleX(${ixe(u*p)}) scaleY(${ixe(u*g)})`:` scale(${ixe(u)})`,0!==h&&(v+=` rotate(${h}deg)`),s.style.width=`${ixe(c)}px`,s.style.height=`${ixe(d)}px`,s.style.transform=`${v}`,b("render")}function V(){let e=f.scale;const t=v("clickAction");let n=R();if(t){let r=[];switch(t){case sxe.ZoomIn:n=2*e;break;case sxe.ZoomOut:n=.5*e;break;case sxe.ToggleCover:r=[R(),I()];break;case sxe.ToggleFull:r=[R(),D()];break;case sxe.ToggleMax:r=[R(),L()];break;case sxe.IterateZoom:r=[R(),D(),L()];break;case sxe.Zoom:const t=D();n=e>=t-.05?R():Math.min(t,2*e)}if(r.length){const t=r.findIndex(t=>t>e+1e-4);n=r[t]||R()}}return n=Mve(O(),n,L()),n}function G(){return!!(x()&&V()>f.scale)}function W(){return!!(x()&&V()<f.scale)}function K(){return!!(x()&&f.scale>O())}function q(){return!!(x()&&f.scale<L())}function X(){return!!(x()&&f.scale<D())}function $(){return!(!(x()&&J()&&o)||k())}function Y(){return!(!x()||!(null==o?void 0:o.isPointerDown())||k())}function J(){return!!(x()&&f.scale>R())}function Z(){return!!(x()&&f.scale>=D())}function Q(){const t="in-fullscreen",n="with-panzoom-in-fullscreen";null==e||e.classList.toggle(t);const r=null==e?void 0:e.classList.contains(t);r?(document.documentElement.classList.add(n),document.addEventListener("keydown",ee,!0)):(document.documentElement.classList.remove(n),document.removeEventListener("keydown",ee,!0)),H(),b(r?"enterFS":"exitFS")}function ee(e){"Escape"!==e.key||e.defaultPrevented||Q()}const te={canDrag:$,canZoomIn:q,canZoomOut:K,canZoomToFull:X,destroy:function(){b("destroy");for(const e of Object.values(p))null==e||e.destroy(te);for(const e of g)e();return r&&(r.style.aspectRatio="",r.style.maxWidth="",r.style.maxHeight=""),s&&(s.style.width="",s.style.height="",s.style.transform=""),r=void 0,i=void 0,s=void 0,m=Object.assign({},lxe),f=Object.assign({},lxe),null==l||l.destroy(),l=void 0,null==o||o.destroy(),o=void 0,u=4,te},emit:b,execute:z,getBoundaries:B,getContainer:function(){return e},getContent:function(){return i},getFullDim:M,getGestures:function(){return o},getMousemovePos:T,getOptions:function(){return h},getPlugins:function(){return p},getScale:P,getStartPosition:C,getState:function(){return u},getTransform:function(e){return!0===e?f:m},getTween:function(){return l},getViewport:function(){return s},getWrapper:function(){return r},init:function(){return u=0,b("init"),function(){for(const[e,t]of Object.entries(Object.assign(Object.assign({},n),h.plugins||{})))if(e&&!p[e]&&t instanceof Function){const n=t();n.init(te),p[e]=n}b("initPlugins")}(),function(){const t=Object.assign(Object.assign({},cxe.classes),v("classes"));if(e&&(exe(e,t.container),i=e.querySelector("."+t.content),i)){if(i.setAttribute("draggable","false"),r=e.querySelector("."+t.wrapper),r||(r=document.createElement("div"),exe(r,t.wrapper),i.insertAdjacentElement("beforebegin",r),r.insertAdjacentElement("afterbegin",i)),s=e.querySelector("."+t.viewport),s||(s=document.createElement("div"),exe(s,t.viewport),s.insertAdjacentElement("afterbegin",i),r.insertAdjacentElement("beforeend",s)),a=i.cloneNode(!0),a.removeAttribute("id"),r.insertAdjacentElement("afterbegin",a),i instanceof HTMLPictureElement&&(i=i.querySelector("img")),a instanceof HTMLPictureElement&&(a=a.querySelector("img")),s instanceof HTMLPictureElement&&(s=s.querySelector("img")),s&&(s.style.visibility="hidden",v("protected"))){s.addEventListener("contextmenu",e=>{rxe(e)});const e=document.createElement("div");exe(e,"f-panzoom__protected"),s.appendChild(e)}b("initLayout")}}(),function(){if(e&&r&&!c){let e=null;c=new ResizeObserver(()=>{x()&&(e=e||requestAnimationFrame(()=>{x()&&(U(),F(),b("refresh")),e=null}))}),c.observe(r),g.push(()=>{null==c||c.disconnect(),c=void 0,e&&(cancelAnimationFrame(e),e=null)})}}(),function(){if(!e||!i)return;if(!axe(i)||!axe(a))return void S();const t=()=>{i&&axe(i)&&i.decode().then(()=>{S()}).catch(()=>{S()})};u=1,e.classList.add("is-loading"),b("loading"),a.src&&a.complete?t():(function(){if(!e)return;if(null==e?void 0:e.querySelector(".f-spinner"))return;const t=v("spinnerTpl"),n=Ave(t);n&&(n.classList.add("f-spinner"),e.classList.add("is-loading"),null==r||r.insertAdjacentElement("afterbegin",n))}(),a.addEventListener("load",t,!1),a.addEventListener("error",t,!1),g.push(()=>{null==a||a.removeEventListener("load",t,!1),null==a||a.removeEventListener("error",t,!1)}))}(),te},isDragging:Y,isExpanded:J,isFullsize:Z,isMousemoveMode:k,localize:function(e,t=[]){const n=v("l10n")||{};e=String(e).replace(/\{\{(\w+)\}\}/g,(e,t)=>n[t]||e);for(let r=0;r<t.length;r++)e=e.split(t[r][0]).join(t[r][1]);return e.replace(/\{\{(.*?)\}\}/g,(e,t)=>t)},off:function(e,t){for(const n of e instanceof Array?e:[e])y.has(n)&&y.set(n,y.get(n).filter(e=>e!==t));return te},on:function(e,t){for(const n of e instanceof Array?e:[e])y.set(n,[...y.get(n)||[],t]);return te},toggleFS:Q,updateControls:U,version:"6.1.2",willZoomIn:G,willZoomOut:W};return te};mxe.l10n={en_EN:Qve},mxe.getDefaults=()=>cxe;const fxe=(e,t)=>{let n=[];return e.childNodes.forEach(e=>{e.nodeType!==Node.ELEMENT_NODE||t&&!e.matches(t)||n.push(e)}),n},gxe=(e,...t)=>{const n=t.length;for(let r=0;r<n;r++){const n=t[r]||{};Object.entries(n).forEach(([t,n])=>{const r=Array.isArray(n)?[]:{};e[t]||Object.assign(e,{[t]:r}),Eve(n)?Object.assign(e[t],gxe(e[t],n)):Array.isArray(n)?Object.assign(e,{[t]:[...n]}):Object.assign(e,{[t]:n})})}return e},vxe=function(e=0,t=0,n=0,r=0,i=0,a=!1){const s=(e-t)/(n-t)*(i-r)+r;return a?r<i?Mve(r,s,i):Mve(i,s,r):s},xxe=Object.assign(Object.assign({},Qve),{ERROR:"Something went wrong. <br /> Please try again later.",NEXT:"Next page",PREV:"Previous page",GOTO:"Go to page #%d",DOWNLOAD:"Download",TOGGLE_FULLSCREEN:"Toggle full-screen mode",TOGGLE_EXPAND:"Toggle full-size mode",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_AUTOPLAY:"Toggle slideshow"}),yxe=e=>{e.cancelable&&e.preventDefault()},bxe={adaptiveHeight:!1,center:!0,classes:{container:"f-carousel",isEnabled:"is-enabled",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",hasAdaptiveHeight:"has-adaptive-height",viewport:"f-carousel__viewport",slide:"f-carousel__slide",isSelected:"is-selected"},dragFree:!1,enabled:!0,errorTpl:'<div class="f-html">{{ERROR}}</div>',fill:!1,infinite:!0,initialPage:0,l10n:xxe,rtl:!1,slides:[],slidesPerPage:"auto",spinnerTpl:'<div class="f-spinner"></div>',transition:"fade",tween:{clamp:!0,mass:1,tension:160,friction:25,restDelta:1,restSpeed:1,velocity:0},vertical:!1};let wxe,jxe=0;const Nxe=(e,t={},n={})=>{jxe++;let r,i,a,s,o,l=0,c=Object.assign({},bxe),d=Object.assign({},bxe),u={},h=null,p=null,m=!1,f=!1,g=!1,v=!1,x="height",y=0,b=!0,w=0,j=0,N=0,_=0,S="*",C=[],A=[];const M=new Set;let E=[],k=[],T=0,P=0,O=0;function R(e,...t){let n=d[e];return n&&n instanceof Function?n(ge,...t):n}function I(e,t=[]){const n=R("l10n")||{};e=String(e).replace(/\{\{(\w+)\}\}/g,(e,t)=>n[t]||e);for(let r=0;r<t.length;r++)e=e.split(t[r][0]).join(t[r][1]);return e.replace(/\{\{(.*?)\}\}/g,(e,t)=>t)}const D=new Map;function L(e,...t){const n=[...D.get(e)||[]];d.on&&n.push(d.on[e]);for(const r of n)r&&r instanceof Function&&r(ge,...t);"*"!==e&&L("*",e,...t)}function B(){var e,t;const s=gxe({},bxe,c);gxe(s,bxe,c);let m="";const g=c.breakpoints||{};if(g)for(const[n,r]of Object.entries(g))window.matchMedia(n).matches&&(m+=n,gxe(s,r));if(void 0===o||m!==o){if(o=m,0!==l){let n=null===(t=null===(e=k[w])||void 0===e?void 0:e.slides[0])||void 0===t?void 0:t.index;void 0===n&&(n=d.initialSlide),s.initialSlide=n,s.slides=[];for(const e of C)e.isVirtual&&s.slides.push(e)}pe(),d=s,!1!==R("enabled")&&(l=0,L("init"),function(){for(const[e,t]of Object.entries(Object.assign(Object.assign({},n),d.plugins||{})))if(e&&!u[e]&&t instanceof Function){const n=t();n.init(ge,Nxe),u[e]=n}L("initPlugins")}(),function(){if(!h)return;const e=R("classes")||{};exe(h,e.container);const t=R("style");if(t&&Eve(t))for(const[n,r]of Object.entries(t))h.style.setProperty(n,r);p=h.querySelector(`.${e.viewport}`),p||(p=document.createElement("div"),exe(p,e.viewport),p.append(...fxe(h,`.${e.slide}`)),h.insertAdjacentElement("afterbegin",p)),h.carousel=ge,L("initLayout")}(),function(){if(!p)return;const e=R("classes")||{};C=[],[...fxe(p,`.${e.slide}`)].forEach(e=>{if(e.parentElement){const t=J(Object.assign({el:e,isVirtual:!1},e.dataset||{}));L("createSlide",t),C.push(t)}}),te();for(const t of C)L("addSlide",t);Y(R("slides"));for(const t of C){const e=t.el;(null==e?void 0:e.parentElement)===p&&(exe(e,d.classes.slide),exe(e,t.class),ce(t),L("attachSlideEl",t))}L("initSlides")}(),ne(),l=1,exe(h,(R("classes")||{}).isEnabled||""),he(),V(),i=Fve().on("start",()=>{r&&r.isPointerDown()||(H(),he())}).on("step",e=>{const t=y;y=e.pos,y!==t&&(b=!1,he())}).on("end",e=>{(null==r?void 0:r.isPointerDown())||(y=e.pos,i&&!f&&(y<N||y>_)?i.spring({clamp:!0,mass:1,tension:200,friction:25,velocity:0,restDelta:1,restSpeed:1}).from({pos:y}).to({pos:Mve(N,y,_)}).start():b||(b=!0,L("settle")))}),U(),function(){if(h&&p&&(h.addEventListener("click",se,{passive:!1}),document.addEventListener("mousemove",F),!a)){let e=!0,t=null;a=new ResizeObserver(()=>{if(e){if(p){const e=p.getBoundingClientRect();T=e.height,P=e.width}e=!1}else t||(t=requestAnimationFrame(()=>{!function(){if(1!==l||!p)return;const e=k.length;ne(),U();const t=p.getBoundingClientRect(),n=t.height,i=t.width;e>1&&(v&&Math.abs(n-T)<.5||!v&&Math.abs(i-P)<.5)||(T=n,P=i,v&&!n||!v&&!i||h&&p&&(e===k.length&&(null==r?void 0:r.isPointerDown())||(R("dragFree")&&(f||y>N&&y<_)?(H(),he()):de(w,{transition:!1}))))}(),t=null}))}),a.observe(p)}}(),L("ready"))}}function F(e){wxe=e}function U(){!1===R("gestures")?r&&(r.destroy(),r=void 0):r||function(){const e=R("gestures");!r&&!1!==e&&p&&(r=Zve(p,e).on("start",e=>{var t,n;if(!i)return;const{srcEvent:r}=e;v&&Uve(r)&&!Cve(r.target)&&yxe(r),i.pause(),i.getCurrentVelocities().pos=0;const a=null===(t=k[w])||void 0===t?void 0:t.slides[0];a&&M.has(a.index)&&a.el&&(y=a.offset||0,y+=(function(e){const t=window.getComputedStyle(e),n=new DOMMatrixReadOnly(t.transform);return{width:n.m41||0,height:n.m42||0}}(a.el)[x]||0)*(g&&!v?1:-1)),ie(),f||(y<N||y>_)&&i.spring({clamp:!0,mass:1,tension:500,friction:25,velocity:(null===(n=i.getCurrentVelocities())||void 0===n?void 0:n.pos)||0,restDelta:1,restSpeed:1}).from({pos:y}).to({pos:Mve(N,y,_)}).start()}).on("move",e=>{var t,n;const{srcEvent:r,axis:a}=e,s=r.target;if(a||(yxe(r),r.stopPropagation(),r.stopImmediatePropagation()),("y"===a&&v||"x"===a&&!v)&&(yxe(r),r.stopPropagation()),!a)return;const{deltaX:o,deltaY:l}=e;if(!i)return;if(Uve(r)&&(null===(t=r.touches)||void 0===t?void 0:t.length)>1)return;if("y"===a&&!v||"x"===a&&v)return;if(s&&Cve(s)&&("x"!==a||v))return;const c=g&&!v?1:-1;let d=v?l:o,u=(null==i?void 0:i.isRunning())?i.getEndValues().pos:y,h=1;f||(u<=N&&d*c<0?(h=Math.max(.01,1-(Math.abs(1/q()*Math.abs(u-N))||0)),h*=.2):u>=_&&d*c>0&&(h=Math.max(.01,1-(Math.abs(1/q()*Math.abs(u-_))||0)),h*=.2)),u+=d*h*c,i.spring({clamp:!0,mass:1,tension:700,friction:25,velocity:(null===(n=i.getCurrentVelocities())||void 0===n?void 0:n.pos)||0,restDelta:1,restSpeed:1}).from({pos:y}).to({pos:u}).start()}).on("panstart",e=>{(null==e?void 0:e.axis)===(v?"y":"x")&&exe(p,"is-dragging")}).on("panend",()=>{txe(p,"is-dragging")}).on("end",e=>{var t,n;const{srcEvent:r,axis:a,velocityX:s,velocityY:o,currentTouch:l}=e;if(l.length>0||!i)return;const c=r.target,d=c&&Cve(c)&&!("x"===a&&!v);v&&Uve(r)&&!e.axis&&se(r);const h=k.length,p=R("dragFree");if(!h)return;const m=R("vertical")?o:s;let x=(null==i?void 0:i.isRunning())?i.getEndValues().pos:y;const j=g&&!v?1:-1;if(d||(x+=m*(p?5:1)*j),!f&&(m*j<=0&&x<N||m*j>=0&&x>_)){let e=0;return Math.abs(m)>0&&(e=2*Math.abs(m),e=Math.min(.3*q(),e)),x=Mve(N+-1*e,x,_+e),void i.spring({clamp:!0,mass:1,tension:380,friction:25,velocity:-1*m,restDelta:1,restSpeed:1}).from({pos:y}).to({pos:x}).start()}if(p||(null===(t=u.Autoscroll)||void 0===t?void 0:t.isEnabled()))return void(Math.abs(m)>10?i.spring({clamp:!0,mass:1,tension:150,friction:25,velocity:-1*m,restDelta:1,restSpeed:1}).from({pos:y}).to({pos:x}).start():i.isRunning()||b||(b=!0,L("settle")));if(!p&&!(null===(n=u.Autoscroll)||void 0===n?void 0:n.isEnabled())&&(!e.offsetX&&!e.offsetY||"y"===a&&!v||"x"===a&&v))return void de(w,{transition:"tween"});let S=W(x);Math.abs(m)>10&&S===w&&(S+=m>0?g&&!v?1:-1:g&&!v?-1:1),de(S,{transition:"tween",tween:{velocity:-1*m}})}).init())}(),nxe(p,"is-draggable",!!r&&k.length>0)}function z(e="*"){var t;const n=[];for(const r of C)("*"===e||r.class&&r.class.includes(e)||r.el&&(null===(t=r.el)||void 0===t?void 0:t.classList.contains(e)))&&n.push(r);s=void 0,S=e,A=[...n]}function H(){if(!i)return;const e=W((null==i?void 0:i.isRunning())?i.getEndValues().pos:y);e!==w&&(s=w,w=e,ce(),V(),G(),L("change",w,s))}function V(){var e,t;if(!h)return;for(const i of h.querySelectorAll("[data-carousel-index]"))i.innerHTML=w+"";for(const i of h.querySelectorAll("[data-carousel-page]"))i.innerHTML=w+1+"";for(const i of h.querySelectorAll("[data-carousel-pages]"))i.innerHTML=k.length+"";for(const i of h.querySelectorAll("[data-carousel-go-to]"))parseInt((null===(e=i.dataset)||void 0===e?void 0:e.carouselGoTo)||"-1",10)===w?i.setAttribute("aria-current","true"):i.removeAttribute("aria-current");for(const i of h.querySelectorAll("[data-carousel-go-prev]"))i.toggleAttribute("aria-disabled",!me()),me()?i.removeAttribute("tabindex"):i.setAttribute("tabindex","-1");for(const i of h.querySelectorAll("[data-carousel-go-next]"))i.toggleAttribute("aria-disabled",!fe()),fe()?i.removeAttribute("tabindex"):i.setAttribute("tabindex","-1");let n=!1;const r=null===(t=k[w])||void 0===t?void 0:t.slides[0];r&&(r.downloadSrc||"image"===r.type&&r.src)&&(n=!0);for(const i of h.querySelectorAll("[data-carousel-download]"))i.toggleAttribute("aria-disabled",!n)}function G(e){var t;e||(e=null===(t=k[w])||void 0===t?void 0:t.slides[0]);const n=null==e?void 0:e.el;if(n)for(const r of n.querySelectorAll("[data-slide-index]"))r.innerHTML=e.index+1+""}function W(e){var t,n,r;if(!k.length)return 0;const i=X();let a=e;f?a-=Math.floor((e-(null===(t=k[0])||void 0===t?void 0:t.pos))/i)*i||0:a=Mve(null===(n=k[0])||void 0===n?void 0:n.pos,e,null===(r=k[k.length-1])||void 0===r?void 0:r.pos);const s=new Map;let o=0;for(const c of k){const e=Math.abs(c.pos-a),t=Math.abs(c.pos-a-i),n=Math.abs(c.pos-a+i),r=Math.min(e,t,n);s.set(o,r),o++}const l=s.size>0?[...s.entries()].reduce((e,t)=>t[1]<e[1]?t:e):[w,0];return parseInt(l[0])}function K(){return O}function q(){let e=0;return p&&(p.childElementCount||(p.style.display="grid"),e=p.getBoundingClientRect()[x]||0,p.style.display=""),e}function X(e=!0){return A.length?A.reduce((e,t)=>e+t.dim,0)+(A.length-(f&&e?0:1))*O:0}function $(e){const t=X(),n=q();if(!t||!p||!n)return[];const r=[];e=void 0===e?y:e,f&&(e-=Math.floor(e/t)*t||0);let i=0,a=0;if(m){const e=p.getBoundingClientRect();i=Math.abs(e[v?"top":"left"]),a=Math.abs(window[v?"innerHeight":"innerWidth"]-e[v?"bottom":"right"])}let s=0;for(let o of A){const l=(t=0)=>{r.indexOf(o)>-1||(o.pos=s-e+t||0,o.offset+t>e-o.dim-i+.51&&o.offset+t<e+n+a-.51&&r.push(o))};o.offset=s,f&&(l(t),l(-1*t)),l(),s+=o.dim+O}return r}function Y(e,t){const n=[];for(const r of Array.isArray(e)?e:[e]){const e=J(Object.assign(Object.assign({},r),{isVirtual:!0}));e.el||(e.el=document.createElement("div")),L("createSlide",e),n.push(e)}C.splice(void 0===t?C.length:t,0,...n),te();for(const r of n)L("addSlide",r),Z(r);return z(S),n}function J(e){return(_ve(e)||e instanceof HTMLElement)&&(e={html:e}),Object.assign({index:-1,el:void 0,class:"",isVirtual:!0,dim:0,pos:0,offset:0,html:"",src:""},e)}function Z(e){let t=e.el;if(!e||!t)return;const n=e.html?e.html instanceof HTMLElement?e.html:Ave(e.html):void 0;n&&(exe(n,"f-html"),e.htmlEl=n,exe(t,"has-html"),t.append(n),L("contentReady",e))}function Q(e){if(!p||!e)return;let t=e.el;if(t){if(t.setAttribute("index",e.index+""),t.parentElement!==p){let n;exe(t,d.classes.slide),exe(t,e.class),ce(e);for(const t of C)if(t.index>e.index){n=t.el;break}p.insertBefore(t,n&&p.contains(n)?n:null),L("attachSlideEl",e)}return G(e),t}}function ee(e){const t=null==e?void 0:e.el;t&&(t.remove(),re(t),L("detachSlideEl",e))}function te(){for(let e=0;e<C.length;e++){const t=C[e],n=t.el;n&&(t.index!==e&&re(n),n.setAttribute("index",`${e}`)),t.index=e}}function ne(){var e,t,n,r,a;if(!h||!p)return;g=R("rtl"),v=R("vertical"),x=v?"height":"width";const o=R("classes");if(nxe(h,o.isLTR,!g),nxe(h,o.isRTL,g),nxe(h,o.isHorizontal,!v),nxe(h,o.isVertical,v),nxe(h,o.hasAdaptiveHeight,R("adaptiveHeight")),!q())return;const c=window.getComputedStyle(p);m="visible"===c.getPropertyValue("overflow-"+(v?"y":"x")),O=p&&parseFloat(c.getPropertyValue("--f-carousel-gap"))||0;const u=function(){let e=0;if(p){let t=document.createElement("div");t.style.display="block",exe(t,d.classes.slide),p.appendChild(t),e=t.getBoundingClientRect()[x],t.remove(),t=void 0}return e}();for(const i of A){const t=i.el;let n=0;if(!i.isVirtual&&t&&Sve(t)){let r=!1;t.parentElement&&t.parentElement===p||(p.appendChild(t),r=!0),n=t.getBoundingClientRect()[x],r&&(null===(e=t.parentElement)||void 0===e||e.removeChild(t))}else n=u;i.dim=n}if(f=!1,R("infinite")){f=!0;const e=X();let n=q();if(m){const e=p.getBoundingClientRect();n+=e.left,n+=e.right-e.width}for(let r=0;r<A.length;r++){const i=(null===(t=A[r])||void 0===t?void 0:t.dim)+O;if(e-i<n&&e-i-n<i){f=!1;break}}}if(function(){var e;if(!h)return;const t=q(),n=X(!1);let r=R("slidesPerPage");r="auto"===r?1/0:parseFloat(r+""),k=[];let i=0,a=0;for(const u of A)(!k.length||i+u.dim-t>.05||a>=r)&&(k.push({index:k.length,slides:[],dim:0,offset:0,pos:0}),i=0,a=0),null===(e=k[k.length-1])||void 0===e||e.slides.push(u),i+=u.dim+O,a++;const s=R("center"),o=R("fill");let l=0;for(const u of k){u.dim=(u.slides.length-1)*O;for(const e of u.slides)u.dim+=e.dim;u.offset=l,u.pos=l,!1!==s&&(u.pos-=.5*(t-u.dim)),o&&!f&&n>t&&(u.pos=Mve(0,u.pos,n-t)),l+=u.dim+O}const c=[];let d;for(const u of k){const e=Object.assign({},u);d&&Math.abs(e.pos-d.pos)<.1?(d.dim+=e.dim,d.slides=[...d.slides,...e.slides]):(d=e,e.index=c.length,c.push(e))}k=c,w=Mve(0,w,k.length-1)}(),N=(null===(n=k[0])||void 0===n?void 0:n.pos)||0,_=(null===(r=k[k.length-1])||void 0===r?void 0:r.pos)||0,0===l)!function(){var e;s=void 0,w=R("initialPage");const t=R("initialSlide")||void 0;void 0!==t&&(w=ge.getPageIndex(t)||0),w=Mve(0,w,k.length-1),y=(null===(e=k[w])||void 0===e?void 0:e.pos)||0,j=y}();else{const e=(null==i?void 0:i.isRunning())?i.getEndValues().pos:y;(e<N||e>_)&&(j=(null===(a=k[w||0])||void 0===a?void 0:a.pos)||0,y=Mve(N,y,_))}L("refresh"),V()}function re(e){if(!e||!Sve(e))return;const t=parseInt(e.getAttribute("index")||"-1");let n="";for(const i of Array.from(e.classList)){const e=i.match(/^f-(\w+)(Out|In)$/);e&&e[1]&&(n=e[1]+"")}if(!e||!n)return;const r=[`f-${n}Out`,`f-${n}In`,"to-prev","to-next","from-prev","from-next"];e.removeEventListener("animationend",ae),txe(e,r.join(" ")),M.delete(t)}function ie(){if(!p)return;const e=M.size>0;for(const t of A)re(t.el);M.clear(),e&&he()}function ae(e){var t;"f-"===(null===(t=e.animationName)||void 0===t?void 0:t.substring(0,2))&&(re(e.target),M.size||(txe(h,"in-transition"),!b&&Math.abs(ge.getPosition(!0)-j)<.5&&(b=!0,L("settle"))),he())}function se(e){var t;if(e.defaultPrevented)return;const n=e.composedPath()[0];if(n.closest("[data-carousel-go-prev]"))return yxe(e),void ge.prev();if(n.closest("[data-carousel-go-next]"))return yxe(e),void ge.next();const r=n.closest("[data-carousel-go-to]");if(r)return yxe(e),void ge.goTo(parseFloat(r.dataset.carouselGoTo||"")||0);if(n.closest("[data-carousel-download]")){yxe(e);const n=null===(t=k[w])||void 0===t?void 0:t.slides[0];if(n&&(n.downloadSrc||"image"===n.type&&n.src)){const e=n.downloadFilename,t=document.createElement("a"),r=n.downloadSrc||n.src||"";t.href=r,t.target="_blank",t.download=e||r,t.click()}}else L("click",e)}function oe(e){var t;const n=e.el;n&&(null===(t=n.querySelector(".f-spinner"))||void 0===t||t.remove())}function le(e){var t;const n=e.el;n&&(null===(t=n.querySelector(".f-html.is-error"))||void 0===t||t.remove(),txe(n,"has-error"))}function ce(e){var t;e||(e=null===(t=k[w])||void 0===t?void 0:t.slides[0]);const n=null==e?void 0:e.el;if(!n)return;let r=R("formatCaption",e);void 0===r&&(r=e.caption),r=r||"";const i=R("captionEl");if(i&&i instanceof HTMLElement){if(e.index!==w)return;if(_ve(r)&&(i.innerHTML=I(r+"")),r instanceof HTMLElement){if(r.parentElement===i)return;i.innerHTML="",r.parentElement&&(r=r.cloneNode(!0)),i.append(r)}return}if(!r)return;let a=e.captionEl||n.querySelector(".f-caption");!a&&r instanceof HTMLElement&&r.classList.contains("f-caption")&&(a=r),a||(a=document.createElement("div"),exe(a,"f-caption"),_ve(r)?a.innerHTML=I(r+""):r instanceof HTMLElement&&(r.parentElement&&(r=r.cloneNode(!0)),a.append(r)));const s=`f-caption-${jxe}_${e.index}`;a.setAttribute("id",s),a.dataset.selectable="true",exe(n,"has-caption"),n.setAttribute("aria-labelledby",s),e.captionEl=a,n.insertAdjacentElement("beforeend",a)}function de(e,t={}){var n,r;let{transition:a,tween:o}=Object.assign({transition:d.transition,tween:d.tween},t||{});if(!h||!i)return;const l=k.length;if(!l)return;if(function(e,t){var n,r,a,s;if(!(h&&i&&t&&_ve(t)&&"tween"!==t))return!1;if((null===(n=k[w])||void 0===n?void 0:n.slides.length)>1)return!1;const o=k.length;let l=e>w?1:-1;e=f?(e%o+o)%o:Mve(0,e,o-1),g&&(l*=-1);const c=null===(r=k[w])||void 0===r?void 0:r.slides[0],u=null==c?void 0:c.index,p=null===(a=k[e])||void 0===a?void 0:a.slides[0],m=null==p?void 0:p.index,v=null===(s=k[e])||void 0===s?void 0:s.pos;if(void 0===m||void 0===u||u===m||y===v||Math.abs(q()-((null==p?void 0:p.dim)||0))>1)return!1;b=!1,i.pause(),ie(),exe(h,"in-transition"),y=j=v;const x=Q(c),N=Q(p);return H(),x&&(M.add(u),x.style.transform="",x.addEventListener("animationend",ae),txe(x,d.classes.isSelected),x.inert=!1,exe(x,`f-${t}Out to-${l>0?"next":"prev"}`)),N&&(M.add(m),N.style.transform="",N.addEventListener("animationend",ae),exe(N,d.classes.isSelected),N.inert=!1,exe(N,`f-${t}In from-${l>0?"prev":"next"}`)),he(),!0}(e,a))return;e=f?(e%l+l)%l:Mve(0,e,l-1);const c=(null===(n=k[e||0])||void 0===n?void 0:n.pos)||0;j=c;const u=i.isRunning()?i.getEndValues().pos:y;if(Math.abs(j-u)<1)return y=j,w!==e&&(ce(),s=w,w=e,V(),G(),L("change",w,s)),he(),void(b||(b=!0,L("settle")));if(i.pause(),ie(),f){const e=X(),t=Math.floor((u-(null===(r=k[0])||void 0===r?void 0:r.pos))/e)||0,n=j+t*e;j=[n+e,n,n-e].reduce(function(e,t){return Math.abs(t-u)<Math.abs(e-u)?t:e})}!1!==a&&Eve(o)?i.spring(gxe({},d.tween,o)).from({pos:y}).to({pos:j}).start():(y=j,H(),he(),b||(b=!0,L("settle")))}function ue(e){var t;let n=y;if(f&&!0!==e){const e=X();n-=(Math.floor((y-(null===(t=k[0])||void 0===t?void 0:t.pos)||0)/e)||0)*e}return n}function he(){var e;if(!h||!p)return;E=$();const t=new Set,n=[],r=k[w],i=d.setTransform;let a;for(const s of A){const i=M.has(s.index),o=E.indexOf(s)>-1,l=(null===(e=null==r?void 0:r.slides)||void 0===e?void 0:e.indexOf(s))>-1;if(s.isVirtual&&!i&&!o)continue;let c=Q(s);if(c&&(n.push(s),l&&t.add(c),R("adaptiveHeight")&&l)){const e=(c.firstElementChild||c).getBoundingClientRect().height;a=null==a?e:Math.max(a,e)}}p&&a&&(p.style.height=`${a}px`),[...fxe(p,`.${d.classes.slide}`)].forEach(e=>{nxe(e,d.classes.isSelected,t.has(e));const n=C[parseInt(e.getAttribute("index")||"-1")];if(!n)return e.remove(),void re(e);const r=M.has(n.index),a=E.indexOf(n)>-1;if(n.isVirtual&&!r&&!a)return void ee(n);if(e.inert=!a,!1===i)return;let s=n.pos?Math.round(1e4*n.pos)/1e4:0,o=0,l=0,c=0,u=0;r||(o=v?0:g?-1*s:s,l=v?s:0,c=vxe(o,0,n.dim,0,100),u=vxe(l,0,n.dim,0,100)),i instanceof Function&&!r?i(ge,n,{x:o,y:l,xPercent:c,yPercent:u}):e.style.transform=o||l?`translate3d(${c}%, ${u}%,0)`:""}),L("render",n)}function pe(){null==h||h.removeEventListener("click",se),M.clear(),document.removeEventListener("mousemove",F),null==a||a.disconnect(),a=void 0;for(const e of C){let t=e.el;t&&Sve(t)&&(e.state=void 0,oe(e),le(e),e.isVirtual?(ee(e),e.el=void 0):(re(t),t.style.transform="",p&&!p.contains(t)&&p.appendChild(t)))}for(const e of Object.values(u))null==e||e.destroy();u={},null==r||r.destroy(),r=void 0,null==i||i.destroy(),i=void 0;for(const[e,t]of Object.entries(d.classes||{}))"container"!==e&&txe(h,t);txe(p,"is-draggable")}function me(){return f||w>0}function fe(){return f||w<k.length-1}const ge={add:function(e,t){var n,r;let a=y;const s=w,o=X(),l=(null==i?void 0:i.isRunning())?i.getEndValues().pos:y,c=o&&Math.floor((l-((null===(n=k[0])||void 0===n?void 0:n.pos)||0))/o)||0;return Y(e,t),z(S),ne(),i&&o&&(s===w&&(a-=c*o),j=(null===(r=k[w||0])||void 0===r?void 0:r.pos)||0,a===j?y=j:i.spring({clamp:!0,mass:1,tension:300,friction:25,restDelta:1,restSpeed:1}).from({pos:a}).to({pos:j}).start()),he(),ge},canGoPrev:me,canGoNext:fe,destroy:function(){return L("destroy"),window.removeEventListener("resize",B),pe(),D.clear(),h=null,k=[],C=[],d=Object.assign({},bxe),u={},A=[],o=void 0,S="*",l=2,ge},emit:L,filter:function(e="*"){return z(e),ne(),he(),L("filter",e),ge},getContainer:function(){return h},getGapDim:K,getGestures:function(){return r},getLastMouseMove:function(){return wxe},getOption:function(e){return R(e)},getOptions:function(){return d},getPage:function(){return k[w]},getPageIndex:function(e){if(void 0!==e){for(const t of k||[])for(const n of t.slides)if(n.index===e)return t.index;return-1}return w},getPageIndexFromPosition:W,getPageProgress:function(e,t){var n;void 0===e&&(e=w);const r=k[e];if(!r)return e>w?-1:1;const i=X(),a=K();let s=r.pos,o=ue();if(f&&!0!==t){const e=Math.floor((o-(null===(n=k[0])||void 0===n?void 0:n.pos))/i)||0;o-=e*i,s=[s+i,s,s-i].reduce(function(e,t){return Math.abs(t-o)<Math.abs(e-o)?t:e})}return(o-s)/(r.dim+a)||0},getPageVisibility:function(e){var t;void 0===e&&(e=w);const n=k[e];if(!n)return e>w?-1:1;const r=ue(),i=q();let a=n.pos;if(f){const e=X(),n=a+(Math.floor((r-(null===(t=k[0])||void 0===t?void 0:t.pos))/e)||0)*e;a=[n+e,n,n-e].reduce(function(e,t){return Math.abs(t-r)<Math.abs(e-r)?t:e})}return a>r&&a+n.dim<r+i?1:a<r?(a+n.dim-r)/n.dim||0:a+n.dim>r+i&&(r+i-a)/n.dim||0},getPages:function(){return k},getPlugins:function(){return u},getPosition:ue,getSlides:function(){return C},getState:function(){return l},getTotalSlideDim:X,getTween:function(){return i},getViewport:function(){return p},getViewportDim:q,getVisibleSlides:function(e){return void 0===e?E:$(e)},goTo:de,hasNavigated:function(){return void 0!==s},hideError:le,hideLoading:oe,init:function(){if(!e||!Sve(e))throw new Error("No Element found");return 0!==l&&(pe(),l=0),h=e,c=t,window.removeEventListener("resize",B),c.breakpoints&&window.addEventListener("resize",B),B(),ge},isInfinite:function(){return f},isInTransition:function(){return M.size>0},isRTL:function(){return g},isSettled:function(){return b},isVertical:function(){return v},localize:function(e,t=[]){return I(e,t)},next:function(e={}){return de(w+1,e),ge},off:function(e,t){for(const n of e instanceof Array?e:[e])D.has(n)&&D.set(n,D.get(n).filter(e=>e!==t));return ge},on:function(e,t){for(const n of e instanceof Array?e:[e])D.set(n,[...D.get(n)||[],t]);return ge},prev:function(e={}){return de(w-1,e),ge},reInit:function(e={},r={}){return pe(),l=0,o=void 0,S="*",t=e,c=e,n=r,B(),ge},remove:function(e){void 0===e&&(e=C.length-1);const t=C[e];return t&&(L("removeSlide",t),t.el&&(re(t.el),t.el.remove(),t.el=void 0),C.splice(e,1),z(S),ne(),he()),ge},setPosition:function(e){y=e,H(),he()},showError:function(e,t){oe(e),le(e);const n=e.el;if(n){const r=document.createElement("div");exe(r,"f-html"),exe(r,"is-error"),r.innerHTML=I(t||"<p>{{ERROR}}</p>"),e.htmlEl=r,exe(n,"has-html"),exe(n,"has-error"),n.insertAdjacentElement("afterbegin",r),L("contentReady",e)}return ge},showLoading:function(e){const t=e.el,n=null==t?void 0:t.querySelector(".f-spinner");if(!t||n)return ge;const r=R("spinnerTpl"),i=Ave(r);return i&&(exe(i,"f-spinner"),t.insertAdjacentElement("beforeend",i)),ge},version:"6.1.2"};return ge};Nxe.l10n={en_EN:xxe},Nxe.getDefaults=()=>bxe;const _xe=(e=!0,t="--f-scrollbar-compensate",n="--f-body-margin",r="hide-scrollbar")=>{const i=document,a=i.body,s=i.documentElement;if(e){if(a.classList.contains(r))return;let e=window.innerWidth-s.getBoundingClientRect().width;e<0&&(e=0),s.style.setProperty(t,`${e}px`);const i=parseFloat(window.getComputedStyle(a).marginRight);i&&a.style.setProperty(n,`${i}px`),a.classList.add(r)}else a.classList.remove(r),a.style.setProperty(n,""),i.documentElement.style.setProperty(t,"")};function Sxe(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}const Cxe=function(e="",t="",n=""){return e.split(t).join(n)},Axe={tpl:e=>`<img class="f-panzoom__content" \n    ${e.srcset?'data-lazy-srcset="{{srcset}}"':""} \n    ${e.sizes?'data-lazy-sizes="{{sizes}}"':""} \n    data-lazy-src="{{src}}" alt="{{alt}}" />`},Mxe=()=>{let e;function t(t,n){const r=null==e?void 0:e.getOptions().Zoomable;let i=(Eve(r)?Object.assign(Object.assign({},Axe),r):Axe)[t];return i&&"function"==typeof i&&n?i(n):i}function n(){e&&!1!==e.getOptions().Zoomable&&(e.on("addSlide",a),e.on("removeSlide",s),e.on("attachSlideEl",o),e.on("click",i),e.on("change",r),e.on("ready",r))}function r(){l();const t=(null==e?void 0:e.getVisibleSlides())||[];if(t.length>1||"slide"===(null==e?void 0:e.getOption("transition")))for(const n of t){const t=n.panzoomRef;t&&((null==e?void 0:e.getPage().slides)||[]).indexOf(n)<0&&t.execute(sxe.ZoomTo,Object.assign({},t.getStartPosition()))}}function i(e,t){const n=t.target;n&&!t.defaultPrevented&&n.dataset.panzoomAction&&c(n.dataset.panzoomAction)}function a(n,r){const i=r.el;if(!e||!i||r.panzoomRef)return;const a=r.src||r.lazySrc||"",s=r.alt||r.caption||`Image #${r.index}`,o=r.srcset||r.lazySrcset||"",c=r.sizes||r.lazySizes||"";if(a&&_ve(a)&&!r.html&&(!r.type||"image"===r.type)){r.type="image",r.thumbSrc=r.thumbSrc||a;let e=t("tpl",r);e=Cxe(e,"{{src}}",a+""),e=Cxe(e,"{{srcset}}",o+""),e=Cxe(e,"{{sizes}}",c+""),i.insertAdjacentHTML("afterbegin",e)}const d=i.querySelector(".f-panzoom__content");if(!d)return;d.setAttribute("alt",s+"");const u=r.width&&"auto"!==r.width?parseFloat(r.width+""):"auto",h=r.height&&"auto"!==r.height?parseFloat(r.height+""):"auto",p=mxe(i,Object.assign({width:u,height:h,classes:{container:"f-zoomable"},event:()=>null==e?void 0:e.getLastMouseMove(),spinnerTpl:()=>(null==e?void 0:e.getOption("spinnerTpl"))||""},t("Panzoom")));p.on("*",(t,n,...i)=>{e&&("loading"===n&&(r.state=0),"loaded"===n&&(r.state=1),"error"===n&&(r.state=2,null==e||e.showError(r,"{{IMAGE_ERROR}}")),e.emit(`panzoom:${n}`,r,...i),"ready"===n&&e.emit("contentReady",r),r.index===(null==e?void 0:e.getPageIndex())&&l())}),r.panzoomRef=p}function s(e,t){t.panzoomRef&&(t.panzoomRef.destroy(),t.panzoomRef=void 0)}function o(e,t){const n=t.panzoomRef;if(n)switch(n.getState()){case 0:n.init();break;case 3:n.execute(sxe.ZoomTo,Object.assign(Object.assign({},n.getStartPosition()),{velocity:0}))}}function l(){var t,n;const r=(null==e?void 0:e.getContainer())||void 0,i=null===(n=null===(t=null==e?void 0:e.getPage())||void 0===t?void 0:t.slides[0])||void 0===n?void 0:n.panzoomRef;if(r)if(i)i.updateControls(r);else for(const e of r.querySelectorAll("[data-panzoom-action]")||[])e.setAttribute("aria-disabled",""),e.setAttribute("tabindex","-1")}function c(t,...n){var r;null===(r=null==e?void 0:e.getPage().slides[0].panzoomRef)||void 0===r||r.execute(t,...n)}return{init:function(t){e=t,e.on("initPlugins",n)},destroy:function(){if(e){e.off("initPlugins",n),e.off("addSlide",a),e.off("removeSlide",s),e.off("attachSlideEl",o),e.off("click",i),e.off("change",r),e.off("ready",r);for(const t of e.getSlides())s(0,t)}e=void 0},execute:c}},Exe={syncOnChange:!1,syncOnClick:!0,syncOnHover:!1},kxe=()=>{let e,t;function n(){const t=null==e?void 0:e.getOptions().Sync;return Eve(t)?Object.assign(Object.assign({},Exe),t):Exe}function r(){const r=n().target;e&&r&&function(r){var u,h,p;e&&r&&(t=r,e.getOptions().classes=Object.assign(Object.assign({},e.getOptions().classes),{isSelected:""}),e.getOptions().initialSlide=(null===(h=null===(u=t.getPage())||void 0===u?void 0:u.slides[0])||void 0===h?void 0:h.index)||0,n().syncOnChange&&e.on("change",a),n().syncOnClick&&e.on("click",o),n().syncOnHover&&(null===(p=e.getViewport())||void 0===p||p.addEventListener("mouseover",l)),e&&t&&(e.on("ready",i),e.on("refresh",c),t.on("change",s),t.on("filter",d)))}(r)}function i(){u()}function a(){var n;if(e&&t){const r=(null===(n=e.getPage())||void 0===n?void 0:n.slides)||[],i=t.getPageIndex(r[0].index||0);i>-1&&t.goTo(i,e.hasNavigated()?void 0:{tween:!1,transition:!1}),u()}}function s(){var n;if(e&&t){const r=e.getPageIndex((null===(n=t.getPage())||void 0===n?void 0:n.slides[0].index)||0);r>-1&&e.goTo(r,t.hasNavigated()?void 0:{tween:!1,transition:!1}),u()}}function o(n,r){var i;if(!e||!t)return;if(null===(i=e.getTween())||void 0===i?void 0:i.isRunning())return;const a=null==e?void 0:e.getOptions().classes.slide;if(!a)return;const s=a?r.target.closest(`.${a}`):null;if(s){const e=parseInt(s.getAttribute("index")||"")||0,n=t.getPageIndex(e);t.goTo(n)}}function l(t){e&&o(0,t)}function c(){var n;if(e&&t){const r=e.getPageIndex((null===(n=t.getPage())||void 0===n?void 0:n.slides[0].index)||0);r>-1&&e.goTo(r,{tween:!1,transition:!1}),u()}}function d(n,r){e&&t&&(e.filter(r),s())}function u(){var n,r,i;if(!t)return;const a=(null===(r=null===(n=t.getPage())||void 0===n?void 0:n.slides[0])||void 0===r?void 0:r.index)||0;for(const t of(null==e?void 0:e.getSlides())||[])null===(i=t.el)||void 0===i||i.classList.toggle("is-selected",t.index===a)}return{init:function(t){e=t,e.on("initSlides",r)},destroy:function(){var n;null==e||e.off("ready",i),null==e||e.off("refresh",c),null==e||e.off("change",a),null==e||e.off("click",o),null===(n=null==e?void 0:e.getViewport())||void 0===n||n.removeEventListener("mouseover",l),null==t||t.off("change",s),null==t||t.off("filter",d),t=void 0,null==e||e.off("initSlides",r),e=void 0},getTarget:function(){return t}}},Txe={showLoading:!0,preload:1},Pxe="is-lazyloading",Oxe="is-lazyloaded",Rxe="has-lazyerror",Ixe=()=>{let e;function t(){const t=null==e?void 0:e.getOptions().Lazyload;return Eve(t)?Object.assign(Object.assign({},Txe),t):Txe}function n(n){var r;const i=n.el;if(!i)return;const a="[data-lazy-src],[data-lazy-srcset],[data-lazy-bg]",s=Array.from(i.querySelectorAll(a));i.matches(a)&&s.push(i);for(const o of s){const i=o.dataset.lazySrc,a=o.dataset.lazySrcset,s=o.dataset.lazySizes,l=o.dataset.lazyBg,c=(o instanceof HTMLImageElement||o instanceof HTMLSourceElement)&&(i||a),d=o instanceof HTMLElement&&l;if(!c&&!d)continue;const u=i||a||l;if(u){if(c&&u){const l=null===(r=o.parentElement)||void 0===r?void 0:r.classList.contains("f-panzoom__wrapper");t().showLoading&&(null==e||e.showLoading(n)),o.addEventListener("load",()=>{null==e||e.hideLoading(n),txe(o,Rxe),o instanceof HTMLImageElement?o.decode().then(()=>{txe(o,Pxe),exe(o,Oxe)}):(txe(o,Pxe),exe(o,Oxe)),l||null==e||e.emit("lazyLoad:loaded",n,o,u)}),o.addEventListener("error",()=>{null==e||e.hideLoading(n),txe(o,Pxe),exe(o,Rxe),l||null==e||e.emit("lazyLoad:error",n,o,u)}),o.classList.add("f-lazyload"),o.classList.add(Pxe),l||null==e||e.emit("lazyLoad:load",n,o,u),i&&(o.src=i),a&&(o.srcset=a),s&&(o.sizes=s)}else d&&(document.body.contains(o)||(document.createElement("img").src=l),o.style.backgroundImage=`url('${l}')`);delete o.dataset.lazySrc,delete o.dataset.lazySrcset,delete o.dataset.lazySizes,delete o.dataset.lazyBg}}}function r(){if(!e)return;const r=[...e.getVisibleSlides()],i=t().preload;if(i>0){const t=e.getPosition(),n=e.getViewportDim();r.push(...e.getVisibleSlides(t+n*i),...e.getVisibleSlides(t-n*i))}for(const e of r)n(e)}return{init:function(t){e=t,e.on("render",r)},destroy:function(){null==e||e.off("render",r),e=void 0}}},Dxe='tabindex="-1" width="24" height="24" viewBox="0 0 24 24"',Lxe={prevTpl:`<svg ${Dxe}><path d="M15 3l-9 9 9 9"></path></svg>`,nextTpl:`<svg ${Dxe}><path d="M9 3l9 9-9 9"></path></svg>`},Bxe=()=>{let e,t,n;function r(){const t=null==e?void 0:e.getOptions().Arrows;return Eve(t)?Object.assign(Object.assign({},Lxe),t):Lxe}function i(t){if(!e)return;const n=`<button data-carousel-go-${t} tabindex="0" class="f-button is-arrow is-${t}" title="{{${t.toUpperCase()}}}">`+r()[`${t}Tpl`]+"</button",i=Ave(e.localize(n))||void 0;return i&&exe(i,r()[`${t}Class`]),i}function a(){var r;null==t||t.remove(),t=void 0,null==n||n.remove(),n=void 0,null===(r=null==e?void 0:e.getContainer())||void 0===r||r.classList.remove("has-arrows")}function s(){e&&!1!==e.getOptions().Arrows&&e.getPages().length>1?(function(){if(!e)return;const r=e.getViewport();r&&(t||(t=i("prev"),t&&r.insertAdjacentElement("beforebegin",t)),n||(n=i("next"),n&&r.insertAdjacentElement("afterend",n)),nxe(e.getContainer(),"has-arrows",!(!t&&!n)))}(),e&&(null==t||t.toggleAttribute("aria-disabled",!e.canGoPrev()),null==n||n.toggleAttribute("aria-disabled",!e.canGoNext()))):a()}return{init:function(t){e=t.on(["change","refresh"],s)},destroy:function(){a(),null==e||e.off(["change","refresh"],s),e=void 0}}},Fxe='<circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/>',Uxe='<g><line x1="11" y1="8" x2="11" y2="14"></line></g>'+Fxe,zxe={moveLeft:["moveLeft","MOVE_LEFT",'<path d="M5 12h14M5 12l6 6M5 12l6-6"/>'],moveRight:["moveRight","MOVE_RIGHT",'<path d="M5 12h14M13 18l6-6M13 6l6 6"/>'],moveUp:["moveUp","MOVE_UP",'<path d="M12 5v14M18 11l-6-6M6 11l6-6"/>'],moveDown:["moveDown","MOVE_DOWN",'<path d="M12 5v14M18 13l-6 6M6 13l6 6"/>'],zoomOut:["zoomOut","ZOOM_OUT",Fxe],zoomIn:["zoomIn","ZOOM_IN",Uxe],toggleFull:["toggleFull","TOGGLE_FULL",Uxe],iterateZoom:["iterateZoom","ITERATE_ZOOM",Uxe],toggle1to1:["toggleFull","TOGGLE_FULL",'<path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/>'],rotateCCW:["rotateCCW","ROTATE_CCW",'<path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/>'],rotateCW:["rotateCW","ROTATE_CW",'<path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/>'],flipX:["flipX","FLIP_X",'<path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/>'],flipY:["flipY","FLIP_Y",'<path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/>'],reset:["reset","RESET",'<path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/>'],toggleFS:["toggleFS","TOGGLE_FS",'<g><path d="M14.5 9.5 21 3m0 0h-6m6 0v6M3 21l6.5-6.5M3 21v-6m0 6h6"/></g><g><path d="m14 10 7-7m-7 7h6m-6 0V4M3 21l7-7m0 0v6m0-6H4"/></g>']},Hxe={};for(const[d$e,u$e]of Object.entries(zxe))Hxe[d$e]={tpl:`<button data-panzoom-action="${u$e[0]}" class="f-button" title="{{${u$e[1]}}}"><svg>${u$e[2]}</svg></button>`};var Vxe;!function(e){e.Left="left",e.middle="middle",e.right="right"}(Vxe||(Vxe={}));const Gxe=Object.assign({counter:{tpl:'<div class="f-counter"><span data-carousel-page></span>/<span data-carousel-pages></span></div>'},download:{tpl:'<button data-carousel-download class="f-button" title="{{DOWNLOAD}}"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></button>'},autoplay:{tpl:'<button data-autoplay-action="toggle" class="f-button" title="{{TOGGLE_AUTOPLAY}}"><svg><g><path d="M5 3.5 19 12 5 20.5Z"/></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},thumbs:{tpl:'<button data-thumbs-action="toggle" class="f-button" title="{{TOGGLE_THUMBS}}"><svg><rect width="18" height="14" x="3" y="3" rx="2"/><path d="M4 21h1M9 21h1M14 21h1M19 21h1"/></svg></button>'}},Hxe),Wxe={absolute:!1,display:{left:[],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY","reset"],right:[]},enabled:"auto",items:{}},Kxe=()=>{let e,t;function n(t){const n=null==e?void 0:e.getOptions().Toolbar;let r=(Eve(n)?Object.assign(Object.assign({},Wxe),n):Wxe)[t];return r&&"function"==typeof r&&e?r(e):r}function r(){var r,i;if(!(null==e?void 0:e.getOptions().Toolbar))return;if(!e||t)return;const a=e.getContainer();if(!a)return;let s=n("enabled");if(!s)return;const o=n("absolute"),l=e.getSlides().length>1;let c=!1,d=!1;for(const t of e.getSlides())t.panzoomRef&&(c=!0),(t.downloadSrc||"image"===t.type&&t.src)&&(d=!0);const u=(null===(r=e.getPlugins().Thumbs)||void 0===r?void 0:r.isEnabled())||!1,h=l&&e.getPlugins().Autoplay||!1,p=e.getPlugins().Fullscreen&&(document.fullscreenEnabled||document.webkitFullscreenEnabled);if("auto"===s&&(s=c),!s)return;t=a.querySelector(".f-carousel__toolbar")||void 0,t||(t=document.createElement("div"),t.classList.add("f-carousel__toolbar"));const m=n("display"),f=gxe({},Gxe,n("items"));for(const n of["left","middle","right"]){const r=m[n]||[],i=document.createElement("div");i.classList.add("f-carousel__toolbar__column"),i.classList.add(`is-${n}`);for(const t of r){let n;if(_ve(t)){if("counter"===t&&!l)continue;if("autoplay"===t&&!h)continue;if(Hxe[t]&&!c)continue;if("fullscreen"===t&&!p)continue;if("thumbs"===t&&!u)continue;if("download"===t&&!d)continue;n=f[t]}if(Eve(t)&&(n=t),n&&n.tpl){let t=e.localize(n.tpl);t=t.split("<svg>").join('<svg tabindex="-1" width="24" height="24" viewBox="0 0 24 24">');const r=Ave(t);r&&("function"==typeof n.click&&e&&r.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),"function"==typeof n.click&&e&&n.click(e,t)}),i.append(r))}}t.append(i)}if(t.childElementCount){if(o&&t.classList.add("is-absolute"),!t.parentElement){const r=n("parentEl");r?r.insertAdjacentElement("afterbegin",t):null===(i=e.getViewport())||void 0===i||i.insertAdjacentElement("beforebegin",t)}a.contains(t)&&a.classList.add("has-toolbar")}}return{init:function(t){e=t,null==e||e.on("initSlides",r)},destroy:function(){var n;null==e||e.off("initSlides",r),null===(n=null==e?void 0:e.getContainer())||void 0===n||n.classList.remove("has-toolbar"),null==t||t.remove(),t=void 0},add:function(e,t){Gxe[e]=t},isEnabled:function(){return!!t}}},qxe={autoStart:!0,pauseOnHover:!0,showProgressbar:!0,timeout:2e3},Xxe=()=>{let e,t,n=!1,r=!1,i=!1,a=null;function s(t){const n=null==e?void 0:e.getOptions().Autoplay;let r=(Eve(n)?Object.assign(Object.assign({},qxe),n):qxe)[t];return r&&"function"==typeof r&&e?r(e):r}function o(){clearTimeout(t),t=void 0}function l(){if(!e||!n||i||r||t||!e.isSettled()||function(){var t;const n=(null===(t=null==e?void 0:e.getPage())||void 0===t?void 0:t.slides)||[];for(const e of n)if(0===e.state)return!0;return!1}())return;!function(){var t,n,r,i;if(!e)return;if(u(),!s("showProgressbar"))return;let o=s("progressbarParentEl");if(!o&&(null===(t=e.getPlugins().Toolbar)||void 0===t?void 0:t.isEnabled())&&(o=e.getContainer()),!o&&!0!==(null===(n=e.getPlugins().Toolbar)||void 0===n?void 0:n.isEnabled())){const t=(null===(r=e.getPages()[0])||void 0===r?void 0:r.slides)||[],n=(null===(i=e.getPage())||void 0===i?void 0:i.slides)||[];1===t.length&&1===n.length&&(o=n[0].el)}if(o||(o=e.getViewport()),!o)return;a=document.createElement("div"),a.classList.add("f-progressbar"),o.prepend(a);const l=s("timeout")||1e3;a.style.animationDuration=`${l}ms`}();const o=s("timeout");t=setTimeout(()=>{e&&n&&!r&&(e.isInfinite()||e.getPageIndex()!==e.getPages().length-1?e.next():e.goTo(0))},o)}function c(){var t,r;if(!e||e.getPages().length<2||!1===e.getOptions().Autoplay)return;if(n)return;n=!0,e.emit("autoplay:start",s("timeout")),null===(t=e.getContainer())||void 0===t||t.classList.add("has-autoplay"),null===(r=e.getTween())||void 0===r||r.on("start",v);const i=null==e?void 0:e.getContainer();i&&s("pauseOnHover")&&matchMedia("(hover: hover)").matches&&(i.addEventListener("mouseenter",x,!1),i.addEventListener("mouseleave",y,!1)),e.on("change",f),e.on("settle",g),e.on("contentReady",p),e.on("panzoom:touchStart",d),e.on("panzoom:wheel",d),e.isSettled()&&l()}function d(){var t,i;if(o(),u(),n&&e){e.emit("autoplay:end"),null===(t=e.getContainer())||void 0===t||t.classList.remove("has-autoplay"),null===(i=e.getTween())||void 0===i||i.off("start",v);const n=null==e?void 0:e.getContainer();n&&(n.removeEventListener("mouseenter",x,!1),n.removeEventListener("mouseleave",y,!1))}e&&(e.off("change",f),e.off("settle",g),e.off("contentReady",p),e.off("panzoom:touchStart",d),e.off("panzoom:wheel",d)),n=!1,r=!1}function u(){a&&(a.remove(),a=null)}function h(){e&&e.getPages().length>1&&s("autoStart")&&c()}function p(){l()}function m(e,t){const n=t.target;n&&!t.defaultPrevented&&"toggle"===n.dataset.autoplayAction&&b.toggle()}function f(){!e||!(null==e?void 0:e.isInfinite())&&e.getPageIndex()===e.getPages().length-1?d():(u(),o())}function g(){l()}function v(){o(),u()}function x(){i=!0,n&&(u(),o())}function y(){i=!1,n&&!r&&(null==e?void 0:e.isSettled())&&l()}const b={init:function(t){e=t,e.on("ready",h),e.on("click",m)},destroy:function(){d(),null==e||e.off("ready",h),null==e||e.off("click",m),e=void 0},isEnabled:()=>n,pause:function(){r=!0,o()},resume:function(){r=!1,n&&!i&&l()},start(){c()},stop(){d()},toggle(){n?d():c()}};return b},$xe={Carousel:{Lazyload:{showLoading:!1}},minCount:2,showOnStart:!0,thumbTpl:'<button aria-label="Slide to #{{page}}"><img draggable="false" alt="{{alt}}" data-lazy-src="{{src}}" /></button>',type:"modern"};let Yxe;const Jxe=()=>{let e,t,n,r,i,a=0,s=0,o=!0;function l(t){const n=null==e?void 0:e.getOptions().Thumbs;let r=(Eve(n)?Object.assign(Object.assign({},$xe),n):$xe)[t];return r&&"function"==typeof r&&e?r(e):r}function c(){if(!e)return!1;if(!1===(null==e?void 0:e.getOptions().Thumbs))return!1;let t=0;for(const n of e.getSlides())n.thumbSrc&&t++;return t>=l("minCount")}function d(){return"modern"===l("type")}function u(){return"scrollable"===l("type")}function h(){const t=[],n=(null==e?void 0:e.getSlides())||[];for(const e of n)t.push({index:e.index,html:p(e)});return t}function p(e){const t=e.thumb?e.thumb instanceof HTMLImageElement?e.thumb.src:e.thumb:e.thumbSrc||void 0,n=void 0===e.thumbAlt?`Thumbnail #${e.index}`:e.thumbAlt+"";let r=l("thumbTpl");return r=Cxe(r,"{{alt}}",n),r=Cxe(r,"{{src}}",t+""),r=Cxe(r,"{{index}}",`${e.index}`),r=Cxe(r,"{{page}}",`${e.index||1}`),r}function m(t=!1){var r;const i=null==e?void 0:e.getContainer();if(!e||!i||n)return;if(!c())return;const a=(null===(r=l("Carousel"))||void 0===r?void 0:r.classes)||{};if(a.container=a.container||"f-thumbs",!n){const e=i.nextElementSibling;(null==e?void 0:e.classList.contains(a.container))&&(n=e)}if(!n){n=document.createElement("div");const e=l("parentEl");e?e.insertAdjacentElement("beforeend",n):i.insertAdjacentElement("afterend",n)}exe(n,a.container),exe(n,"f-thumbs"),exe(n,`is-${l("type")}`),t&&exe(n,"is-hidden")}function f(){if(!n||!u())return;r=document.createElement("div"),exe(r,"f-thumbs__viewport");let t="";for(const e of h()){const n=e.html||"";"string"==typeof n&&(t+=`<div index="${e.index}" class="f-thumbs__slide">${n}</div>`)}r.innerHTML=t,n.append(r),n.addEventListener("click",t=>{t.preventDefault();const n=t.target.closest("[index]"),r=parseInt((null==n?void 0:n.getAttribute("index"))||"-1");e&&r>-1&&e.goTo(r)}),i=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.target instanceof HTMLImageElement&&(e.target.src=e.target.getAttribute("data-lazy-src")+"",e.target.removeAttribute("data-lazy-src"),null==i||i.unobserve(e.target))})},{root:r,rootMargin:"100px"}),n.querySelectorAll("[data-lazy-src]").forEach(e=>{null==i||i.observe(e)}),null==e||e.emit("thumbs:ready")}function g(){var r;if(!Yxe||!e||!n||u()||t)return;const i=h();if(!i.length)return;const c=gxe({},{Sync:{target:e},Lazyload:{preload:1},slides:i,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",slide:"f-thumbs__slide"},center:!0,fill:!d(),infinite:!1,dragFree:!0,rtl:e.getOptions().rtl||!1,slidesPerPage:e=>{let t=0;return d()&&(function(){if(!d())return;if(!n)return;const e=e=>n&&parseFloat(getComputedStyle(n).getPropertyValue("--f-thumb-"+e))||0;a=e("width"),s=e("clip-width")}(),t=4*(a-s)),e&&e.getTotalSlideDim()<=e.getViewportDim()-t?1/0:1}},$xe.Carousel||{},l("Carousel")||{});t=Yxe(n,c,{Sync:kxe,Lazyload:Ixe}),t.on("ready",()=>{exe(n,"is-syncing"),null==e||e.emit("thumbs:ready"),d()&&(null==e||e.on("render",b))}),t.on("destroy",()=>{null==e||e.emit("thumbs:destroy")}),t.init(),null===(r=t.getGestures())||void 0===r||r.on("start",()=>{o=!1}),t.on("click",(e,t)=>{const n=t.target;if(n){const e=n.matches("button")?n:n.firstElementChild;e&&e.matches("button")&&(t.preventDefault(),e.focus({preventScroll:!0}))}}),exe(e.getContainer(),"has-thumbs"),A()}function v(){c()&&l("showOnStart")&&(m(),f())}function x(){var t;c()&&(g(),null==e||e.on("addSlide",j),null==e||e.on("removeSlide",N),null==e||e.on("click",_),null==e||e.on("refresh",S),null===(t=null==e?void 0:e.getGestures())||void 0===t||t.on("start",y),C())}function y(){var e,t;o=!0,(null===(e=document.activeElement)||void 0===e?void 0:e.closest(".f-thumbs"))&&(null===(t=document.activeElement)||void 0===t||t.blur())}function b(){var r,i;null==n||n.classList.toggle("is-syncing",!1===(null==e?void 0:e.hasNavigated())||(null===(r=null==e?void 0:e.getTween())||void 0===r?void 0:r.isRunning())),A(),(null===(i=null==e?void 0:e.getGestures())||void 0===i?void 0:i.isPointerDown())&&function(){if(!d())return;if(!e||!t)return;if(!o)return;const n=t.getTween(),r=t.getPages(),i=e.getPageIndex()||0,l=e.getPageProgress()||0;if(!(e&&r&&r[i]&&n))return;const c=n.isRunning()?n.getCurrentValues().pos:t.getPosition();if(void 0===c)return;let u=r[i].pos+l*(a-s);u=Mve(r[0].pos,u,r[r.length-1].pos),n.from({pos:c}).to({pos:u}).start()}()}function w(){o=!0,C()}function j(e,n){if(t)t.add({html:p(n)},n.index);else if(r){const e=Ave(`<div index="${n.index}" class="f-thumbs__slide">${p(n)}</div>`);if(e){r.append(e);const t=e.querySelector("img");t&&(null==i||i.observe(t))}}}function N(e,n){var i;t?t.remove(n.index):r&&(null===(i=r.querySelector(`[index="${n.index}"]`))||void 0===i||i.remove())}function _(e,t){const r=t.target;r&&!t.defaultPrevented&&"toggle"===r.dataset.thumbsAction&&(n||(m(!0),f(),g()),n&&n.classList.toggle("is-hidden"))}function S(){C()}function C(){if(!e||!r||!u())return;const t=e.getPageIndex();r.querySelectorAll(".is-selected").forEach(e=>{e.classList.remove("is-selected")});const n=r.querySelector(`[index="${t}"]`);if(n){n.classList.add("is-selected");const e=r.getBoundingClientRect(),t=n.getBoundingClientRect(),i=n.offsetTop-r.offsetTop-.5*e.height+.5*t.height,a=n.scrollLeft-r.scrollLeft-.5*e.width+.5*t.width;r.scrollTo({top:i,left:a,behavior:"smooth"})}}function A(){if(!d())return;if(!e||!t)return;const n=(null==t?void 0:t.getSlides())||[];let r=-.5*a;for(const t of n){const n=t.el;if(!n)continue;let i=e.getPageProgress(t.index)||0;i=Math.max(-1,Math.min(1,i)),i>-1&&i<1&&(r+=.5*a*(1-Math.abs(i))),i=Math.round(1e4*i)/1e4,r=Math.round(1e4*r)/1e4,n.style.setProperty("--progress",`${Math.abs(i)}`),n.style.setProperty("--shift",`${(null==e?void 0:e.isRTL())?-1*r:r}px`),i>-1&&i<1&&(r+=.5*a*(1-Math.abs(i)))}}return{init:function(t,n){Yxe=n,e=t,e.on("ready",x),e.on("initSlides",v),e.on("change",w)},destroy:function(){var r,i;u()&&(null==e||e.emit("thumbs:destroy")),null==e||e.off("ready",x),null==e||e.off("initSlides",v),null==e||e.off("change",w),null==e||e.off("render",b),null==e||e.off("addSlide",j),null==e||e.off("click",_),null==e||e.off("refresh",S),null===(r=null==e?void 0:e.getGestures())||void 0===r||r.off("start",y),null===(i=null==e?void 0:e.getContainer())||void 0===i||i.classList.remove("has-thumbs"),e=void 0,null==t||t.destroy(),t=void 0,null==n||n.remove(),n=void 0},getCarousel:function(){return t},getContainer:function(){return n},getType:function(){return l("type")},isEnabled:c}},Zxe={iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto"}},Qxe=()=>{let e;function t(e,t){let n=t.src;if(!_ve(n))return;let r=t.type;if(!r){if(r||("#"===n.charAt(0)?r="inline":n.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.((a)?png|avif|gif|jp(g|eg)|pjp(eg)?|jfif|svg|webp|bmp|ico|tif(f)?)((\?|#).*)?$)/i)?r="image":n.match(/\.(pdf)((\?|#).*)?$/i)?r="pdf":n.match(/\.(html|php)((\?|#).*)?$/i)&&(r="iframe")),!r){const e=n.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i);e&&(n=`https://maps.google.${e[1]}/?ll=${(e[2]?e[2]+"&z="+Math.floor(parseFloat(e[3]))+(e[4]?e[4].replace(/^\//,"&"):""):e[4]+"").replace(/\?/,"&")}&output=${e[4]&&e[4].indexOf("layer=c")>0?"svembed":"embed"}`,r="gmap")}if(!r){const e=n.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i);e&&(n=`https://maps.google.${e[1]}/maps?q=${e[2].replace("query=","q=").replace("api=1","")}&output=embed`,r="gmap")}t.src=n,t.type=r}}function n(t,n){"iframe"!==n.type&&"pdf"!==n.type&&"gmap"!==n.type||function(t){if(!e||!t.el||!t.src)return;const n=document.createElement("iframe");n.classList.add("f-iframe");for(const[i,a]of Object.entries(function(){const t=null==e?void 0:e.getOptions().Html;return Eve(t)?Object.assign(Object.assign({},Zxe),t):Zxe}().iframeAttr||{}))n.setAttribute(i,a);n.onerror=()=>{e&&1===e.getState()&&e.showError(t,"{{IFRAME_ERROR}}")},n.src=t.src;const r=document.createElement("div");if(r.classList.add("f-html"),r.append(n),t.width){let e=`${t.width}`;e.match(/^\d+$/)&&(e+="px"),r.style.maxWidth=`${e}`}if(t.height){let e=`${t.height}`;e.match(/^\d+$/)&&(e+="px"),r.style.maxHeight=`${e}`}if(t.aspectRatio){const e=t.el.getBoundingClientRect();r.style.aspectRatio=`${t.aspectRatio}`,r.style[e.width>e.height?"width":"height"]="auto",r.style[e.width>e.height?"maxWidth":"maxHeight"]="none"}t.contentEl=n,t.htmlEl=r,t.el.classList.add("has-html"),t.el.classList.add("has-iframe"),t.el.classList.add(`has-${t.type}`),t.el.prepend(r),e.emit("contentReady",t)}(n)}function r(t,n){var r,i;"iframe"!==n.type&&"pdf"!==n.type&&"gmap"!==n.type||(null==e||e.hideError(n),null===(r=n.contentEl)||void 0===r||r.remove(),n.contentEl=void 0,null===(i=n.htmlEl)||void 0===i||i.remove(),n.htmlEl=void 0)}return{init:function(i){e=i,e.on("addSlide",t),e.on("attachSlideEl",n),e.on("detachSlideEl",r)},destroy:function(){null==e||e.off("addSlide",t),null==e||e.off("attachSlideEl",n),null==e||e.off("detachSlideEl",r),e=void 0}}},eye=(e,t={})=>{const n=new URL(e),r=new URLSearchParams(n.search),i=new URLSearchParams;for(const[o,l]of[...r,...Object.entries(t)]){let e=l+"";if("t"===o){let t=e.match(/((\d*)m)?(\d*)s?/);t&&i.set("start",60*parseInt(t[2]||"0")+parseInt(t[3]||"0")+"")}else i.set(o,e)}let a=i+"",s=e.match(/#t=((.*)?\d+s)/);return s&&(a+=`#t=${s[1]}`),a},tye={autoplay:!1,html5videoTpl:'<video class="f-html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">\n    <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn\'t support embedded videos.</video>',iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto",credentialless:""},vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}},nye=()=>{let e,t=!1;function n(){const t=null==e?void 0:e.getOptions().Video;return Eve(t)?Object.assign(Object.assign({},tye),t):tye}function r(){var t;return null===(t=null==e?void 0:e.getPage())||void 0===t?void 0:t.slides[0]}const i=t=>{var n;try{let r=JSON.parse(t.data);if("https://player.vimeo.com"===t.origin){if("ready"===r.event)for(let i of Array.from((null===(n=null==e?void 0:e.getContainer())||void 0===n?void 0:n.getElementsByClassName("f-iframe"))||[]))i instanceof HTMLIFrameElement&&i.contentWindow===t.source&&(i.dataset.ready="true")}else if(t.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)&&"onReady"===r.event){const e=document.getElementById(r.id);e&&(e.dataset.ready="true")}}catch(r){}};function a(e,t){const r=t.src;if(!_ve(r))return;let i=t.type;if(!i||"html5video"===i){const e=r.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i);e&&(i="html5video",t.html5videoFormat=t.html5videoFormat||"video/"+("ogv"===e[1]?"ogg":e[1]))}if(!i||"youtube"===i){const e=r.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|shorts\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i);if(e){const a=Object.assign(Object.assign({},n().youtube),t.youtube||{}),s=`www.youtube${a.nocookie?"-nocookie":""}.com`,o=eye(r,a),l=encodeURIComponent(e[2]);t.videoId=l,t.src=`https://${s}/embed/${l}?${o}`,t.thumb=t.thumb||`https://i.ytimg.com/vi/${l}/mqdefault.jpg`,i="youtube"}}if(!i||"vimeo"===i){const e=r.match(/^.+vimeo.com\/(?:\/)?(video\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/);if(e){const a=Object.assign(Object.assign({},n().vimeo),t.vimeo||{}),s=eye(r,a),o=encodeURIComponent(e[2]),l=e[5]||"";t.videoId=o,t.src=`https://player.vimeo.com/video/${o}?${l?`h=${l}${s?"&":""}`:""}${s}`,i="vimeo"}}t.type=i}function s(t,r){"html5video"===r.type&&function(t){if(!e||!t.el||!t.src)return;const{el:r,src:i}=t;if(!r||!i)return;const a=t.html5videoTpl||n().html5videoTpl,s=t.html5videoFormat||n().html5videoFormat;if(!a)return;const o=t.poster||(t.thumb&&_ve(t.thumb)?t.thumb:""),l=Ave(a.replace(/\{\{src\}\}/gi,i+"").replace(/\{\{format\}\}/gi,s||"").replace(/\{\{poster\}\}/gi,o+""));if(!l)return;const c=document.createElement("div");c.classList.add("f-html"),c.append(l),t.contentEl=l,t.htmlEl=c,r.classList.add(`has-${t.type}`),r.prepend(c),d(t),e.emit("contentReady",t)}(r),"youtube"!==r.type&&"vimeo"!==r.type||function(t){if(!e||!t.el||!t.src)return;const r=document.createElement("iframe");r.classList.add("f-iframe"),r.setAttribute("id",`f-iframe_${t.videoId}`);for(const[e,a]of Object.entries(n().iframeAttr||{}))r.setAttribute(e,a);r.onload=()=>{var n;e&&1===e.getState()&&"youtube"===t.type&&(null===(n=r.contentWindow)||void 0===n||n.postMessage(JSON.stringify({event:"listening",id:r.getAttribute("id")}),"*"))},r.onerror=()=>{e&&1===e.getState()&&(null==e||e.showError(t,"{{IFRAME_ERROR}}"))},r.src=t.src;const i=document.createElement("div");i.classList.add("f-html"),i.append(r),t.contentEl=r,t.htmlEl=i,t.el.classList.add("has-html"),t.el.classList.add("has-iframe"),t.el.classList.add(`has-${t.type}`),t.el.prepend(i),d(t),e.emit("contentReady",t)}(r)}function o(e,t){var n,r;"html5video"!==t.type&&"youtube"!==t.type&&"vimeo"!==t.type||(null===(n=t.contentEl)||void 0===n||n.remove(),t.contentEl=void 0,null===(r=t.htmlEl)||void 0===r||r.remove(),t.htmlEl=void 0),t.poller&&clearTimeout(t.poller)}function l(){t=!1}function c(){if(t)return;t=!0;const e=r();(e&&void 0!==e.autoplay?e.autoplay:n().autoplay)&&(function(){var e;const t=r(),n=null==t?void 0:t.el;if(n&&"html5video"===(null==t?void 0:t.type))try{const e=n.querySelector("video");if(e){const t=e.play();void 0!==t&&t.then(()=>{}).catch(t=>{e.muted=!0,e.play()})}}catch(a){}const i=null==t?void 0:t.htmlEl;i instanceof HTMLIFrameElement&&(null===(e=i.contentWindow)||void 0===e||e.postMessage('{"event":"command","func":"stopVideo","args":""}',"*"))}(),function(){const e=r(),t=null==e?void 0:e.type;if(!(null==e?void 0:e.el)||"youtube"!==t&&"vimeo"!==t)return;const n=()=>{if(e.contentEl&&e.contentEl instanceof HTMLIFrameElement&&e.contentEl.contentWindow){let t;if("true"===e.contentEl.dataset.ready)return t="youtube"===e.type?{event:"command",func:"playVideo"}:{method:"play",value:"true"},t&&e.contentEl.contentWindow.postMessage(JSON.stringify(t),"*"),void(e.poller=void 0);"youtube"===e.type&&(t={event:"listening",id:e.contentEl.getAttribute("id")},e.contentEl.contentWindow.postMessage(JSON.stringify(t),"*"))}e.poller=setTimeout(n,250)};n()}())}function d(e){const t=null==e?void 0:e.htmlEl;if(e&&t&&("html5video"===e.type||"youtube"===e.type||"vimeo"===e.type)){if(t.style.aspectRatio="",t.style.width="",t.style.height="",t.style.maxWidth="",t.style.maxHeight="",e.width){let n=`${e.width}`;n.match(/^\d+$/)&&(n+="px"),t.style.maxWidth=`${n}`}if(e.height){let n=`${e.height}`;n.match(/^\d+$/)&&(n+="px"),t.style.maxHeight=`${n}`}if(e.aspectRatio){const n=e.aspectRatio.split("/"),r=parseFloat(n[0].trim()),i=n[1]?parseFloat(n[1].trim()):0,a=r&&i?r/i:r;t.offsetHeight;const s=t.getBoundingClientRect(),o=a<(s.width||1)/(s.height||1);t.style.aspectRatio=`${e.aspectRatio}`,t.style.width=o?"auto":"",t.style.height=o?"":"auto"}}}function u(){d(r())}return{init:function(t){e=t,e.on("addSlide",a),e.on("attachSlideEl",s),e.on("detachSlideEl",o),e.on("ready",c),e.on("change",l),e.on("settle",c),e.on("refresh",u),window.addEventListener("message",i)},destroy:function(){null==e||e.off("addSlide",a),null==e||e.off("attachSlideEl",s),null==e||e.off("detachSlideEl",o),null==e||e.off("ready",c),null==e||e.off("change",l),null==e||e.off("settle",c),null==e||e.off("refresh",u),window.removeEventListener("message",i),e=void 0}}},rye={autoStart:!1,btnTpl:'<button data-fullscreen-action="toggle" class="f-button" title="{{TOGGLE_FULLSCREEN}}"><svg><g><path d="M8 3H5a2 2 0 0 0-2 2v3M21 8V5a2 2 0 0 0-2-2h-3M3 16v3a2 2 0 0 0 2 2h3M16 21h3a2 2 0 0 0 2-2v-3"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},iye="in-fullscreen-mode",aye=()=>{let e;function t(t){const n=null==e?void 0:e.getOptions().Fullscreen;let r=(Eve(n)?Object.assign(Object.assign({},rye),n):rye)[t];return r&&"function"==typeof r&&e?r(e):r}function n(){var n;null===(n=null==e?void 0:e.getPlugins().Toolbar)||void 0===n||n.add("fullscreen",{tpl:t("btnTpl")})}function r(){if(t("autoStart")){const e=a();e&&o(e)}}function i(e,t){const n=t.target;n&&!t.defaultPrevented&&"toggle"===n.dataset.fullscreenAction&&c()}function a(){return t("el")||(null==e?void 0:e.getContainer())||void 0}function s(){const e=document;return e.fullscreenEnabled?!!e.fullscreenElement:!!e.webkitFullscreenEnabled&&!!e.webkitFullscreenElement}function o(e){const t=document;let n;return e||(e=t.documentElement),t.fullscreenEnabled?n=e.requestFullscreen():t.webkitFullscreenEnabled&&(n=e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)),n&&n.then(()=>{e.classList.add(iye)}),n}function l(){const e=document;let t;return e.fullscreenEnabled?t=e.fullscreenElement&&e.exitFullscreen():e.webkitFullscreenEnabled&&(t=e.webkitFullscreenElement&&e.webkitExitFullscreen()),t&&t.then(()=>{var e;null===(e=a())||void 0===e||e.classList.remove(iye)}),t}function c(){if(s())l();else{const e=a();e&&o(e)}}return{init:function(t){e=t,e.on("initPlugins",n),e.on("ready",r),e.on("click",i)},destroy:function(){null==e||e.off("initPlugins",n),null==e||e.off("ready",r),null==e||e.off("click",i)},exit:l,inFullscreen:s,request:o,toggle:c}};let sye,oye=!1,lye=!1,cye=!1,dye=!1;const uye=()=>{const e=new URL(document.URL).hash,t=e.slice(1).split("-"),n=t[t.length-1],r=n&&/^\+?\d+$/.test(n)&&parseInt(t.pop()||"1",10)||1;return{urlHash:e,urlSlug:t.join("-"),urlIndex:r}},hye=()=>{const e=null==sye?void 0:sye.getInstance();return!(!e||1!=e.getState())},pye=()=>{if(!sye)return;if(hye())return;const{urlSlug:e,urlIndex:t}=uye();if(!e)return;let n=document.querySelector(`[data-slug="${e}"]`);if(n&&n.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),hye())return;const r=document.querySelectorAll(`[data-fancybox="${e}"]`);if(!r.length)return;const i=r[t-1];i&&i.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0}))},mye=()=>{if(!sye)return;if(cye)return;const e=null==sye?void 0:sye.getInstance(),t=null==e?void 0:e.getCarousel();if(!1===(null==e?void 0:e.getOptions().Hash))return;const{urlSlug:n,urlIndex:r}=uye();if(e&&t){const i=t.getSlides();for(const e of i||[])if(n===e.slug||n===e.fancybox&&e.index===r-1)return void t.goTo(e.index);dye=!0,e.close(),dye=!1}pye()},fye=()=>{sye&&setTimeout(()=>{oye=!0,pye(),oye=!1,window.addEventListener("hashchange",mye,!1)},300)},gye=()=>{let e,t="auto",n="";function r(){var r,a,s,o;if(!e||!e.isTopMost())return;if(!1===e.getOptions().Hash)return;const l=e.getCarousel();if(!l)return;const{urlHash:c,urlSlug:d}=uye(),u=e.getSlide();if(!u)return;let h=u.slug||u.fancybox||"",p=parseInt(u.index+"",10)+1;if(!h)return;let m=u.slug?`#${u.slug}`:`#${h}-${p}`;if(((null===(a=null===(r=e.getCarousel())||void 0===r?void 0:r.getPages())||void 0===a?void 0:a.length)||0)<2&&(m=`#${h}`),c!==m&&(n=c),history.scrollRestoration&&(t=history.scrollRestoration,history.scrollRestoration="manual"),l.on("change",i),oye)return void(null===(s=e.getOptions().sync)||void 0===s||s.goTo((null===(o=e.getCarousel())||void 0===o?void 0:o.getPageIndex())||0));const f=h!==d;try{window.history[f?"pushState":"replaceState"]({},document.title,window.location.pathname+window.location.search+m)}catch(g){}f&&(lye=!0)}function i(){if(!e||!e.isTopMost())return;if(!1===e.getOptions().Hash)return;const t=e.getSlide();if(!t)return;let n=t.slug||t.fancybox||"",r=t.index+1,i=t.slug?`#${t.slug}`:`#${n}-${r}`;cye=!0;try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+i)}catch(a){}cye=!1}function a(){if(dye)return;if(!e||!e.isTopMost())return;if(!1===e.getOptions().Hash)return;const t=e.getSlide();if(t&&t.fancybox){cye=!0;try{!lye||oye||function(){if(window.parent===window)return!1;try{var e=window.frameElement}catch(t){e=null}return null===e?"data:"===location.protocol:e.hasAttribute("sandbox")}()?window.history.replaceState({},document.title,window.location.pathname+window.location.search+n):window.history.back()}catch(r){}cye=!1}}return{init:function(t){e=t,e.on("ready",r),e.on("close",a)},destroy:function(){null==e||e.off("ready",r),null==e||e.off("close",a);const n=null==e?void 0:e.getCarousel();n&&n.off("change",i),e=void 0,history.scrollRestoration&&t&&(history.scrollRestoration=t)}}};gye.startFromUrl=pye,gye.setup=function(e){sye||(sye=e,Sxe()&&(/complete|interactive|loaded/.test(document.readyState)?fye():document.addEventListener("DOMContentLoaded",fye)))};const vye=Object.assign(Object.assign({},xxe),{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ELEMENT_NOT_FOUND:"HTML Element Not Found",IFRAME_ERROR:"Error Loading Page"}),xye='<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg tabindex="-1" width="24" height="24" viewBox="0 0 24 24"><path d="M19.286 4.714 4.714 19.286M4.714 4.714l14.572 14.572" /></svg></button>';Kxe().add("close",{tpl:xye});const yye=e=>{e.cancelable&&e.preventDefault()},bye=e=>{e&&e.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:e}))},wye=(e=null,t="",n)=>{if(!e||!e.parentElement||!t)return void(n&&n());bye(e);const r=i=>{i.target===e&&e.dataset.animationName&&(e.removeEventListener("animationend",r),delete e.dataset.animationName,n&&n(),e.classList.remove(t))};e.dataset.animationName=t,e.addEventListener("animationend",r),exe(e,t)};var jye;!function(e){e[e.Init=0]="Init",e[e.Ready=1]="Ready",e[e.Closing=2]="Closing",e[e.Destroyed=3]="Destroyed"}(jye||(jye={}));const Nye={ajax:null,backdropClick:"close",Carousel:{},closeButton:"auto",closeExisting:!1,delegateEl:void 0,dragToClose:!0,fadeEffect:!0,groupAll:!1,groupAttr:"data-fancybox",hideClass:"f-fadeOut",hideScrollbar:!0,id:void 0,idle:!1,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},l10n:vye,mainClass:"",mainStyle:{},mainTpl:'<dialog class="fancybox__dialog">\n    <div class="fancybox__container" tabindex="0" aria-label="{{MODAL}}">\n      <div class="fancybox__backdrop"></div>\n      <div class="fancybox__carousel"></div>\n    </div>\n  </dialog>',modal:!0,on:{},parentEl:void 0,placeFocusBack:!0,showClass:"f-zoomInUp",startIndex:0,sync:void 0,theme:"dark",triggerEl:void 0,triggerEvent:void 0,zoomEffect:!0},_ye=new Map;let Sye=0;const Cye="with-fancybox",Aye=()=>{let e,t,n,r,i,a,s,o=jye.Init,l=Object.assign({},Nye),c=-1,d={},u=[],h=!1,p=!0,m=0;function f(e,...t){let n=l[e];return n&&"function"==typeof n?n(X,...t):n}function g(e,t=[]){const n=f("l10n")||{};e=String(e).replace(/\{\{(\w+)\}\}/g,(e,t)=>n[t]||e);for(let r=0;r<t.length;r++)e=e.split(t[r][0]).join(t[r][1]);return e.replace(/\{\{(.*?)\}\}/g,(e,t)=>t)}const v=new Map;function x(e,...t){const n=[...v.get(e)||[]];for(const[r,i]of Object.entries(l.on||{}))(r===e||r.split(" ").indexOf(e)>-1)&&n.push(i);for(const r of n)r&&"function"==typeof r&&r(X,...t);"*"!==e&&x("*",e,...t)}function y(){txe(t,"is-revealing");try{document.activeElement===e&&((null==t?void 0:t.querySelector("[autofocus]"))||t).focus()}catch(CI){}}function b(e,t){var n;O(t),M(),null===(n=t.el)||void 0===n||n.addEventListener("click",j),"inline"!==t.type&&"clone"!==t.type||function(e){if(!r||!e||!e.el)return;let t=null;if(_ve(e.src)){const n=e.src.split("#",2).pop();t=n?document.getElementById(n):null}if(t){if(exe(t,"f-html"),"clone"===e.type||t.closest(".fancybox__carousel")){t=t.cloneNode(!0);const n=t.dataset.animationName;n&&(t.classList.remove(n),delete t.dataset.animationName);let r=t.getAttribute("id");r=r?`${r}--clone`:`clone-${c}-${e.index}`,t.setAttribute("id",r)}else if(t.parentNode){const n=document.createElement("div");n.inert=!0,t.parentNode.insertBefore(n,t),e.placeholderEl=n}e.htmlEl=t,exe(e.el,"has-html"),e.el.prepend(t),t.classList.remove("hidden"),"none"===t.style.display&&(t.style.display=""),"none"===getComputedStyle(t).getPropertyValue("display")&&(t.style.display=t.dataset.display||"flex"),null==r||r.emit("contentReady",e)}else null==r||r.showError(e,"{{ELEMENT_NOT_FOUND}}")}(t),"ajax"===t.type&&function(e){const t=e.el;if(!t)return;if(e.htmlEl||e.xhr)return;null==r||r.showLoading(e),e.state=0;const n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE&&o===jye.Ready)if(null==r||r.hideLoading(e),e.state=1,200===n.status){let i=n.responseText+"",a=null,s=null;if(e.filter){const t=document.createElement("div");t.innerHTML=i,s=t.querySelector(e.filter+"")}s&&s instanceof HTMLElement?a=s:(a=document.createElement("div"),a.innerHTML=i),a.classList.add("f-html"),e.htmlEl=a,t.classList.add("has-html"),t.classList.add("has-ajax"),t.prepend(a),null==r||r.emit("contentReady",e)}else null==r||r.showError(e)};const i=f("ajax")||null;n.open(i?"POST":"GET",e.src+""),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(i),e.xhr=n}(t)}function w(e,t){var n,r;(r=t).closeButtonEl&&(r.closeButtonEl.remove(),r.closeButtonEl=void 0),null===(n=t.el)||void 0===n||n.removeEventListener("click",j),"inline"!==t.type&&"clone"!==t.type||function(e){const t=e.htmlEl,n=e.placeholderEl;t&&("none"!==getComputedStyle(t).getPropertyValue("display")&&(t.style.display="none"),t.offsetHeight),n&&(t&&n.parentNode&&n.parentNode.insertBefore(t,n),n.remove()),e.htmlEl=void 0,e.placeholderEl=void 0}(t),t.xhr&&(t.xhr.abort(),t.xhr=void 0)}function j(e){if(!I())return;if(o!==jye.Ready)return yye(e),void e.stopPropagation();if(e.defaultPrevented)return;if(!Zve.isClickAllowed())return;const t=e.composedPath()[0];t.closest(".fancybox__carousel")&&t.classList.contains("fancybox__slide")&&E(e)}function N(){p=!1,t&&r&&t.classList.remove("is-revealing"),M();const e=f("sync");if(r&&e){const t=e.getPageIndex(r.getPageIndex())||0;e.goTo(t,{transition:!1})}}function _(){var e;!function(){const e=null==r?void 0:r.getViewport();if(!f("dragToClose")||!r||!e)return;if(i=Zve(e).init(),!i)return;let n=!1,s=0,l=0,c={},d=1;function u(){var e,t;null==a||a.spring({clamp:!0,mass:1,tension:0===l?140:960,friction:17,restDelta:.1,restSpeed:.1,maxSpeed:1/0}).from({y:s}).to({y:l}).start();const n=(null===(e=null==r?void 0:r.getViewport())||void 0===e?void 0:e.getBoundingClientRect().height)||0,i=null===(t=D())||void 0===t?void 0:t.panzoomRef;if(n&&i)if(0===l)i.execute(sxe.Reset);else{const e=vxe(Math.abs(s),0,.33*n,d,.75*d,!1);i.execute(sxe.ZoomTo,{scale:e})}}const h=e=>{var t;const n=e.srcEvent,i=n.target;return r&&!(Uve(n)&&(null===(t=n.touches)||void 0===t?void 0:t.length)>1)&&i&&!Cve(i)};a=Fve().on("step",n=>{if(t&&e&&o===jye.Ready){const r=e.getBoundingClientRect().height;s=Math.min(r,Math.max(-1*r,n.y));const i=vxe(Math.abs(s),0,.5*r,1,0,!0);t.style.setProperty("--f-drag-opacity",i+""),t.style.setProperty("--f-drag-offset",s+"px")}}),i.on("start",function(){n||(null==a||a.pause(),l=s)}).on("panstart",e=>{var t,i;if(!n&&h(e)&&"y"===e.axis){yye(e.srcEvent),n=!0,G(),null===(t=null==r?void 0:r.getViewport())||void 0===t||t.classList.add("is-dragging");const a=null===(i=D())||void 0===i?void 0:i.panzoomRef;if(a){d=a.getTransform().scale||1;const e=a.getOptions();c=Object.assign({},e),e.bounds=!1,e.gestures=!1}}else n=!1}).on("pan",function(e){n&&h(e)&&(yye(e.srcEvent),e.srcEvent.stopPropagation(),"y"===e.axis&&(l+=e.deltaY,u()))}).on("end",e=>{var t,i,a;if(null===(t=null==r?void 0:r.getViewport())||void 0===t||t.classList.remove("is-dragging"),n){const t=null===(i=D())||void 0===i?void 0:i.panzoomRef;if(t){null===(a=t.getTween())||void 0===a||a.end();const e=t.getOptions();e.bounds=c.bounds||!1,e.gestures=c.gestures||!1}h(e)&&"y"===e.axis&&(Math.abs(e.velocityY)>5||Math.abs(s)>50)&&W(e.srcEvent,"f-throwOut"+(e.velocityY>0?"Down":"Up"))}n=!1,o===jye.Ready&&0!==s&&(l=0,u())})}(),document.body.addEventListener("click",P),document.body.addEventListener("keydown",T,{passive:!1,capture:!0}),M(),U();const n=f("sync");n&&(null===(e=n.getTween())||void 0===e||e.start()),R(D())}function S(){(null==r?void 0:r.canGoNext())?U():V()}function C(e,t){O(t),R(t)}function A(){var e;const n=null==r?void 0:r.getPlugins().Thumbs;nxe(t,"has-thumbs",(null==n?void 0:n.isEnabled())||!1),nxe(t,"has-vertical-thumbs",!!n&&("scrollable"===n.getType()||!0===(null===(e=n.getCarousel())||void 0===e?void 0:e.isVertical())))}function M(){if(t){const e=(null==r?void 0:r.getPages())||[],n=(null==r?void 0:r.getPageIndex())||0;for(const r of t.querySelectorAll("[data-fancybox-index]"))r.innerHTML=n+"";for(const r of t.querySelectorAll("[data-fancybox-page]"))r.innerHTML=n+1+"";for(const r of t.querySelectorAll("[data-fancybox-pages]"))r.innerHTML=e.length+""}}function E(e){e.composedPath()[0].closest("[data-fancybox-close]")?W(e):(x("backdropClick",e),e.defaultPrevented||f("backdropClick")&&W(e))}function k(){H()}function T(e){if(!I())return;if(o!==jye.Ready)return;const t=e.key,n=f("keyboard");if(!n)return;if(e.ctrlKey||e.altKey||e.shiftKey)return;const i=e.composedPath()[0];if(!Sve(i))return;if("Escape"!==t&&(e=>{const t=["input","textarea","select","option","video","iframe","[contenteditable]","[data-selectable]","[data-draggable]"].join(",");return e.matches(t)||e.closest(t)})(i))return;if(x("keydown",e),e.defaultPrevented)return;const a=n[t];if(a)switch(a){case"close":W(e);break;case"next":yye(e),null==r||r.next();break;case"prev":yye(e),null==r||r.prev()}}function P(e){if(!I())return;if(o!==jye.Ready)return;if(H(),e.defaultPrevented)return;const t=e.composedPath()[0],n=!!t.closest("[data-fancybox-close]"),r=t.classList.contains("fancybox__backdrop");(n||r)&&E(e)}function O(e){var t;const{el:n,htmlEl:i,closeButtonEl:a}=e;if(!n||!i||a)return;let s=f("closeButton");if("auto"===s&&(s=!0!==(null===(t=null==r?void 0:r.getPlugins().Toolbar)||void 0===t?void 0:t.isEnabled())),s){const t=Ave(g(xye));t&&(exe(t,"is-close-button"),e.closeButtonEl=i.insertAdjacentElement("afterbegin",t),n.classList.add("has-close-btn"))}}function R(e){if(!(p&&r&&1===r.getState()&&e&&e.index===r.getOptions().initialPage&&e.el&&e.el.parentElement))return;if(void 0!==e.state&&1!==e.state)return;p=!1;const t=e.panzoomRef,n=null==t?void 0:t.getTween(),i=f("zoomEffect")&&n?B(e):void 0;if(t&&n&&i){const{x:e,y:r,scale:a}=t.getStartPosition();return void n.spring({tension:215,friction:25,restDelta:.001,restSpeed:.001,maxSpeed:1/0}).from(i).to({x:e,y:r,scale:a}).start()}const a=(null==t?void 0:t.getContent())||e.htmlEl;a&&wye(a,f("showClass",e))}function I(){var e;return(null===(e=Mye.getInstance())||void 0===e?void 0:e.getId())===c}function D(){var e;return null===(e=null==r?void 0:r.getPage())||void 0===e?void 0:e.slides[0]}function L(){const e=D();return e?e.triggerEl||f("triggerEl"):void 0}function B(e){var t,n;const r=e.thumbEl;if(!r||!(e=>{const t=e.getBoundingClientRect(),n=e.closest("[style]"),r=null==n?void 0:n.parentElement;if(n&&n.style.transform&&r){const e=r.getBoundingClientRect();if(t.left<e.left||t.left>e.left+e.width-t.width)return!1;if(t.top<e.top||t.top>e.top+e.height-t.height)return!1}const i=Math.max(document.documentElement.clientHeight,window.innerHeight),a=Math.max(document.documentElement.clientWidth,window.innerWidth);return!(t.bottom<0||t.top-i>=0||t.right<0||t.left-a>=0)})(r))return;const i=null===(n=null===(t=e.panzoomRef)||void 0===t?void 0:t.getWrapper())||void 0===n?void 0:n.getBoundingClientRect(),a=null==i?void 0:i.width,s=null==i?void 0:i.height;if(!a||!s)return;const o=r.getBoundingClientRect();let l=o.width,c=o.height,d=o.left,u=o.top;if(o&&l&&c){if(r instanceof HTMLImageElement){const e=window.getComputedStyle(r).getPropertyValue("object-fit");if("contain"===e||"scale-down"===e){const{width:t,height:n}=((e,t,n,r,i="contain")=>{if("contain"===i||e>n||t>r){const i=n/e,a=r/t,s=Math.min(i,a);e*=s,t*=s}return{width:e,height:t}})(r.naturalWidth,r.naturalHeight,l,c,e);d+=.5*(l-t),u+=.5*(c-n),l=t,c=n}}if(!(Math.abs(a/s-l/c)>.1))return{x:d+.5*l-(i.left+.5*a),y:u+.5*c-(i.top+.5*s),scale:l/a}}}function F(){s&&clearTimeout(s),s=void 0,document.removeEventListener("mousemove",k)}function U(){if(h)return;if(s)return;const e=f("idle");e&&(s=setTimeout(z,e))}function z(){t&&(F(),exe(t,"is-idle"),document.addEventListener("mousemove",k),h=!0)}function H(){h&&(V(),U())}function V(){F(),null==t||t.classList.remove("is-idle"),h=!1}function G(){if(f("placeFocusBack")){const t=L();!t||(e=t.getBoundingClientRect()).bottom>0&&e.right>0&&e.left<(window.innerWidth||document.documentElement.clientWidth)&&e.top<(window.innerHeight||document.documentElement.clientHeight)||t.scrollIntoView({behavior:"instant",block:"center",inline:"center"})}var e}function W(e,t){var n,s,l,c,d;if(o===jye.Closing||o===jye.Destroyed)return;const u=new Event("shouldClose",{bubbles:!0,cancelable:!0});if(x("shouldClose",u,e),u.defaultPrevented)return;if(F(),e){if(e.defaultPrevented)return;yye(e),e.stopPropagation(),e.stopImmediatePropagation()}if(o=jye.Closing,null==a||a.pause(),null==i||i.destroy(),r){null===(n=r.getGestures())||void 0===n||n.destroy(),null===(s=r.getTween())||void 0===s||s.pause();for(const e of r.getSlides()){const t=e.panzoomRef;t&&(gxe(t.getOptions(),{clickAction:!1,dblClickAction:!1,wheelAction:!1,bounds:!1,minScale:0,maxScale:1/0}),null===(l=t.getGestures())||void 0===l||l.destroy(),null===(c=t.getTween())||void 0===c||c.pause())}}const h=null==r?void 0:r.getPlugins();null===(d=null==h?void 0:h.Autoplay)||void 0===d||d.stop();const p=null==h?void 0:h.Fullscreen;p&&p.inFullscreen()?Promise.resolve(p.exit()).then(()=>{setTimeout(()=>{K(e,t)},150)}):K(e,t)}function K(e,n){var i,a;if(o!==jye.Closing)return;x("close",e),p=!1,document.body.removeEventListener("click",P),document.body.removeEventListener("keydown",T,{passive:!1,capture:!0}),G(),f("fadeEffect")&&(null==t||t.classList.remove("is-ready"),null==t||t.classList.add("is-hiding")),null==t||t.classList.add("is-closing");const s=D(),l=null==s?void 0:s.el,c=null==s?void 0:s.panzoomRef,d=null===(i=null==s?void 0:s.panzoomRef)||void 0===i?void 0:i.getTween(),u=n||f("hideClass");let h=!1,m=!1;if(r&&s&&l&&c&&d){let e;if(f("zoomEffect")&&1===s.state&&(e=B(s)),e){h=!0;const t=()=>{e=B(s),e&&d.to(Object.assign(Object.assign({},lxe),e))};c.on("refresh",()=>{t()}),d.easing(Fve.Easings.EaseOut).duration(350).from(Object.assign({},c.getTransform())).to(Object.assign(Object.assign({},lxe),e)).start(),(null==l?void 0:l.getAnimations())&&(l.style.animationPlayState="paused",requestAnimationFrame(()=>{t()}))}}const g=(null==s?void 0:s.htmlEl)||(null===(a=null==s?void 0:s.panzoomRef)||void 0===a?void 0:a.getWrapper());g&&bye(g),!h&&u&&g&&(m=!0,wye(g,u,()=>{q()})),h||m?setTimeout(()=>{q()},350):q()}function q(){var n,i,a,s,l;if(o===jye.Destroyed)return;o=jye.Destroyed;const u=L();x("destroy"),null===(i=null===(n=f("sync"))||void 0===n?void 0:n.getPlugins().Autoplay)||void 0===i||i.resume(),null===(s=null===(a=f("sync"))||void 0===a?void 0:a.getPlugins().Autoscroll)||void 0===s||s.resume(),e instanceof HTMLDialogElement&&e.close(),null===(l=null==r?void 0:r.getContainer())||void 0===l||l.classList.remove("is-idle"),null==r||r.destroy();for(const e of Object.values(d))null==e||e.destroy();if(d={},null==e||e.remove(),e=void 0,t=void 0,r=void 0,_ye.delete(c),!_ye.size&&(_xe(!1),document.documentElement.classList.remove(Cye),f("placeFocusBack")))try{null==u||u.focus({preventScroll:!0})}catch(h){}}const X={close:W,destroy:q,getCarousel:function(){return r},getContainer:function(){return t},getId:function(){return c},getOptions:function(){return l},getPlugins:function(){return d},getSlide:function(){return D()},getState:function(){return o},init:function(i=[],a={}){return function(i=[],a={}){o!==jye.Init&&(X.destroy(),o=jye.Init),l=gxe({},Nye,a),c=f("id")||"fancybox-"+ ++Sye;const s=_ye.get(c);if(s&&s.destroy(),_ye.set(c,X),x("init"),function(){for(const[e,t]of Object.entries(Object.assign(Object.assign({},Mye.Plugins),l.plugins||{})))if(e&&!d[e]&&t instanceof Function){const n=t();n.init(X),d[e]=n}x("initPlugins")}(),function(e=[]){x("initSlides",e),u=[...e]}(i),function(){const n=f("parentEl")||document.body;if(!(n&&n instanceof HTMLElement))return;const i=g(f("mainTpl")||"");if(e=Ave(i)||void 0,!e)return;if(t=e.querySelector(".fancybox__container"),!(t&&t instanceof HTMLElement))return;const a=f("mainClass");a&&exe(t,a);const s=f("mainStyle");if(s&&Eve(s))for(const[e,r]of Object.entries(s))t.style.setProperty(e,r);const o=f("theme"),l="auto"===o?window.matchMedia("(prefers-color-scheme:light)").matches:"light"===o;t.setAttribute("theme",l?"light":"dark"),e.setAttribute("id",`${c}`),e.addEventListener("keydown",e=>{"Escape"===e.key&&yye(e)}),e.addEventListener("wheel",e=>{const t=e.target;let n=f("wheel",e);t.closest(".f-thumbs")&&(n="slide");const i="slide"===n,a=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(e,t){return Math.abs(t)>Math.abs(e)?t:e}),s=Math.max(-1,Math.min(1,a)),o=Date.now();m&&o-m<300?i&&yye(e):(m=o,x("wheel",e,s),e.defaultPrevented||("close"===n?W(e):"slide"===n&&r&&!Cve(t)&&(yye(e),r[s>0?"prev":"next"]())))},{capture:!0,passive:!1}),e.addEventListener("cancel",e=>{W(e)}),n.append(e),1===_ye.size&&(f("hideScrollbar")&&_xe(!0),document.documentElement.classList.add(Cye)),e instanceof HTMLDialogElement&&(f("modal")?e.showModal():e.show()),x("initLayout")}(),function(){if(n=(null==e?void 0:e.querySelector(".fancybox__carousel"))||void 0,!n)return;n.fancybox=X;const i=gxe({},{Autoplay:{autoStart:!1,pauseOnHover:!1,progressbarParentEl:e=>{const t=e.getContainer();return(null==t?void 0:t.querySelector(".f-carousel__toolbar [data-autoplay-action]"))||t}},Fullscreen:{el:t},Toolbar:{absolute:!0,items:{counter:{tpl:'<div class="f-counter"><span data-fancybox-page></span>/<span data-fancybox-pages></span></div>'}},display:{left:["counter"],right:["toggleFull","autoplay","fullscreen","thumbs","close"]}},Video:{autoplay:!0},Thumbs:{minCount:2,Carousel:{classes:{container:"fancybox__thumbs"}}},classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",slide:"fancybox__slide"},spinnerTpl:'<div class="f-spinner" data-fancybox-close></div>',dragFree:!1,slidesPerPage:1,plugins:{Sync:kxe,Arrows:Bxe,Lazyload:Ixe,Zoomable:Mxe,Html:Qxe,Video:nye,Autoplay:Xxe,Fullscreen:aye,Thumbs:Jxe,Toolbar:Kxe}},f("Carousel")||{},{slides:u,enabled:!0,initialPage:f("startIndex")||0,l10n:f("l10n")});r=Nxe(n,i),x("initCarousel",r),r.on("*",(e,t,...n)=>{x(`Carousel.${t}`,e,...n)}),r.on("attachSlideEl",b),r.on("detachSlideEl",w),r.on("contentReady",C),r.on("ready",_),r.on("change",N),r.on("settle",S),r.on("thumbs:ready",A),r.on("thumbs:destroy",A),r.init()}(),e&&t){if(f("closeExisting"))for(const[e,t]of _ye.entries())e!==c&&t.close();f("fadeEffect")?(setTimeout(()=>{y()},500),exe(t,"is-revealing")):y(),t.classList.add("is-ready"),o=jye.Ready,x("ready")}}(i,a),X},isCurrentSlide:function(e){const t=D();return!(!e||!t)&&t.index===e.index},isTopMost:function(){return I()},off:function(e,t){return v.has(e)&&v.set(e,v.get(e).filter(e=>e!==t)),X},on:function(e,t){return v.set(e,[...v.get(e)||[],t]),X},toggleIdle(e){(h||!0===e)&&z(),h&&!1!==e||V()}};return X},Mye={Plugins:{Hash:gye},version:"6.1.2",openers:new Map,bind:function(e,t,n){if(!Sxe())return;let r=document.body,i="[data-fancybox]",a={};if(_ve(e)?(r=document.body,i=e,"object"==typeof t&&(a=t||{})):e instanceof Element&&(r=e,_ve(t)&&(i=t),"object"==typeof n&&(a=n||{})),!(r&&r instanceof Element&&i))return!1;const s=Mye.openers.get(r)||new Map;if(s.set(i,a),Mye.openers.set(r,s),1===s.size){r.addEventListener("click",Mye.fromEvent);for(const e of Object.values(Mye.Plugins)){const t=e.setup;"function"==typeof t&&t(Mye)}}return!0},close:function(e=!0,...t){if(e)for(const n of _ye.values())n.close(...t);else{const e=Mye.getInstance();e&&e.close(...t)}},destroy:function(){let e;for(;e=Mye.getInstance();)e.destroy();for(const t of Mye.openers.keys())t.removeEventListener("click",Mye.fromEvent);Mye.openers.clear()},fromEvent:function(e){var t,n,r;if(e.defaultPrevented)return;if(e.button&&0!==e.button)return;if(e.ctrlKey||e.metaKey||e.shiftKey)return;let i=e.composedPath()[0];if(i.closest(".fancybox__container.is-hiding"))return yye(e),void e.stopPropagation();const a=i.closest("[data-fancybox-delegate]")||void 0;if(a){const e=a.dataset.fancyboxDelegate||"",t=document.querySelectorAll(`[data-fancybox="${e}"]`);i=t[parseInt(a.dataset.fancyboxIndex||"",10)||0]||t[0]}if(!(i&&i instanceof Element))return;let s,o,l={};for(const[v,x]of Mye.openers)if(x&&v.contains(i))for(const[e,t]of x){let n=null;try{n=i.closest(e)}catch(g){}n&&(i=n,s=v,o=e,gxe(l,t||{}))}if(!s||!o)return;yye(e);const c=gxe({},Nye,{triggerEvent:e,triggerEl:i,delegateEl:a},l),d=c.groupAll,u=c.groupAttr,h=u&&i?i.getAttribute(`${u}`):"";let p=[];const m=null===(t=i.closest(".f-carousel"))||void 0===t?void 0:t.carousel;if(m){const e=[];for(const t of null==m?void 0:m.getSlides()){const n=t.el;n&&(n.matches(o)?e.push(n):e.push(...[].slice.call(n.querySelectorAll(o))))}e.length&&(p=[...e],null===(n=m.getPlugins().Autoplay)||void 0===n||n.pause(),null===(r=m.getPlugins().Autoscroll)||void 0===r||r.pause(),c.sync=m)}else(!i||h||d)&&(p=[].slice.call(s.querySelectorAll(o)));if(i&&!d&&(p=u&&h?p.filter(e=>e.getAttribute(`${u}`)===h):[i]),!p.length)return;const f=Mye.getInstance();if(f){const e=f.getOptions().triggerEl;if(e&&p.indexOf(e)>-1)return}return Object.assign({},c.Carousel||{}).rtl&&(p=p.reverse()),i&&(c.startIndex=p.indexOf(i)),Mye.fromNodes(p,c)},fromNodes:function(e,t){t=gxe({},Nye,t||{});const n=[],r=e=>e instanceof HTMLImageElement?e:e instanceof HTMLElement?e.querySelector("img:not([aria-hidden])"):void 0;for(const i of e){const a=i.dataset||{},s=t.delegateEl&&e.indexOf(i)===t.startIndex?t.delegateEl:void 0,o=r(s)||r(i)||void 0,l=a.src||i.getAttribute("href")||i.getAttribute("currentSrc")||i.getAttribute("src")||void 0,c=a.thumb||a.thumbSrc||(null==o?void 0:o.getAttribute("currentSrc"))||(null==o?void 0:o.getAttribute("src"))||(null==o?void 0:o.dataset.lazySrc)||void 0,d={src:l,alt:a.alt||(null==o?void 0:o.getAttribute("alt"))||void 0,thumbSrc:c,thumbEl:o,triggerEl:i,delegateEl:s};for(const e in a){let t=a[e]+"";t="false"!==t&&("true"===t||t),d[e]=t}n.push(d)}return Mye.show(n,t)},fromSelector:function(e,t,n){let r=document.body,i="",a={};if(_ve(e)?(i=e,"object"==typeof t&&(a=t||{})):e instanceof Element&&(r=e,_ve(t)&&(i=t),"object"==typeof n&&(a=n||{})),!(r&&r instanceof Element&&i))return;const s=Mye.openers.get(r);return s?(a=gxe({},s.get(i)||{},a),a?Mye.fromNodes(Array.from(r.querySelectorAll(i)),a):void 0):void 0},getCarousel:function(){var e;return(null===(e=Mye.getInstance())||void 0===e?void 0:e.getCarousel())||void 0},getDefaults:function(){return Nye},getInstance:function(e){if(e){const t=_ye.get(e);return t&&t.getState()!==jye.Destroyed?t:void 0}return Array.from(_ye.values()).reverse().find(e=>{if(e.getState()!==jye.Destroyed)return e})||void 0},getSlide:function(){var e;return(null===(e=Mye.getInstance())||void 0===e?void 0:e.getSlide())||void 0},show:function(e=[],t={}){return Aye().init(e,t)},unbind:function(e,t){let n=document.body,r="";if(_ve(e)?r=e:e instanceof Element&&(n=e,_ve(t)&&(r=t)),n){const e=Mye.openers.get(n);e&&r&&e.delete(r),(null==e?void 0:e.size)&&r||Mye.openers.delete(n),n.removeEventListener("click",Mye.fromEvent)}}},Eye=Object.create(null);Eye.open="0",Eye.close="1",Eye.ping="2",Eye.pong="3",Eye.message="4",Eye.upgrade="5",Eye.noop="6";const kye=Object.create(null);Object.keys(Eye).forEach(e=>{kye[Eye[e]]=e});const Tye={type:"error",data:"parser error"},Pye="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Oye="function"==typeof ArrayBuffer,Rye=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Iye=({type:e,data:t},n,r)=>Pye&&t instanceof Blob?n?r(t):Dye(t,r):Oye&&(t instanceof ArrayBuffer||Rye(t))?n?r(t):Dye(new Blob([t]),r):r(Eye[e]+(t||"")),Dye=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function Lye(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Bye;const Fye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Uye="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let d$e=0;d$e<64;d$e++)Uye[Fye.charCodeAt(d$e)]=d$e;const zye="function"==typeof ArrayBuffer,Hye=(e,t)=>{if("string"!=typeof e)return{type:"message",data:Gye(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:Vye(e.substring(1),t)};return kye[n]?e.length>1?{type:kye[n],data:e.substring(1)}:{type:kye[n]}:Tye},Vye=(e,t)=>{if(zye){const n=(e=>{let t,n,r,i,a,s=.75*e.length,o=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);const c=new ArrayBuffer(s),d=new Uint8Array(c);for(t=0;t<o;t+=4)n=Uye[e.charCodeAt(t)],r=Uye[e.charCodeAt(t+1)],i=Uye[e.charCodeAt(t+2)],a=Uye[e.charCodeAt(t+3)],d[l++]=n<<2|r>>4,d[l++]=(15&r)<<4|i>>2,d[l++]=(3&i)<<6|63&a;return c})(e);return Gye(n,t)}return{base64:!0,data:e}},Gye=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,Wye=String.fromCharCode(30);function Kye(){return new TransformStream({transform(e,t){!function(e,t){Pye&&e.data instanceof Blob?e.data.arrayBuffer().then(Lye).then(t):Oye&&(e.data instanceof ArrayBuffer||Rye(e.data))?t(Lye(e.data)):Iye(e,!1,e=>{Bye||(Bye=new TextEncoder),t(Bye.encode(e))})}(e,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const e=new DataView(i.buffer);e.setUint8(0,126),e.setUint16(1,r)}else{i=new Uint8Array(9);const e=new DataView(i.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(r))}e.data&&"string"!=typeof e.data&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}})}let qye;function Xye(e){return e.reduce((e,t)=>e+t.length,0)}function $ye(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function Yye(e){if(e)return function(e){for(var t in Yye.prototype)e[t]=Yye.prototype[t];return e}(e)}Yye.prototype.on=Yye.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Yye.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},Yye.prototype.off=Yye.prototype.removeListener=Yye.prototype.removeAllListeners=Yye.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},Yye.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},Yye.prototype.emitReserved=Yye.prototype.emit,Yye.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Yye.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Jye="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Zye="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function Qye(e,...t){return t.reduce((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t),{})}const ebe=Zye.setTimeout,tbe=Zye.clearTimeout;function nbe(e,t){t.useNativeTimers?(e.setTimeoutFn=ebe.bind(Zye),e.clearTimeoutFn=tbe.bind(Zye)):(e.setTimeoutFn=Zye.setTimeout.bind(Zye),e.clearTimeoutFn=Zye.clearTimeout.bind(Zye))}function rbe(e){return"string"==typeof e?function(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(e):Math.ceil(1.33*(e.byteLength||e.size))}function ibe(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class abe extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class sbe extends Yye{constructor(e){super(),this.writable=!1,nbe(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new abe(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Hye(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class obe extends sbe{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",function(){--e||t()})),this.writable||(e++,this.once("drain",function(){--e||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split(Wye),r=[];for(let i=0;i<n.length;i++){const e=Hye(n[i],t);if(r.push(e),"error"===e.type)break}return r})(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach((e,a)=>{Iye(e,!1,e=>{r[a]=e,++i===n&&t(r.join(Wye))})})})(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=ibe()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let lbe=!1;try{lbe="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(c$e){}const cbe=lbe;function dbe(){}class ube extends obe{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}let hbe=class e extends Yye{constructor(e,t,n){super(),this.createRequest=e,nbe(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var t;const n=Qye(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&r.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(CI){}if("POST"===this._method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(CI){}try{r.setRequestHeader("Accept","*/*")}catch(CI){}null===(t=this._opts.cookieJar)||void 0===t||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var e;3===r.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(r.getResponseHeader("set-cookie"))),4===r.readyState&&(200===r.status||1223===r.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof r.status?r.status:0)},0))},r.send(this._data)}catch(CI){return void this.setTimeoutFn(()=>{this._onError(CI)},0)}"undefined"!=typeof document&&(this._index=e.requestsCount++,e.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(t){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=dbe,t)try{this._xhr.abort()}catch(CI){}"undefined"!=typeof document&&delete e.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};if(hbe.requestsCount=0,hbe.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",pbe);else if("function"==typeof addEventListener){addEventListener("onpagehide"in Zye?"pagehide":"unload",pbe,!1)}function pbe(){for(let e in hbe.requests)hbe.requests.hasOwnProperty(e)&&hbe.requests[e].abort()}const mbe=function(){const e=fbe({xdomain:!1});return e&&null!==e.responseType}();function fbe(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||cbe))return new XMLHttpRequest}catch(CI){}if(!t)try{return new(Zye[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(CI){}}const gbe="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class vbe extends sbe{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=gbe?{}:Qye(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(c$e){return this.emitReserved("error",c$e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;Iye(n,this.supportsBinary,e=>{try{this.doWrite(n,e)}catch(CI){}r&&Jye(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=ibe()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const xbe=Zye.WebSocket||Zye.MozWebSocket;const ybe={websocket:class extends vbe{createSocket(e,t,n){return gbe?new xbe(e,t,n):t?new xbe(e,t):new xbe(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends sbe{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(c$e){return this.emitReserved("error",c$e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=function(e,t){qye||(qye=new TextDecoder);const n=[];let r=0,i=-1,a=!1;return new TransformStream({transform(s,o){for(n.push(s);;){if(0===r){if(Xye(n)<1)break;const e=$ye(n,1);a=!(128&~e[0]),i=127&e[0],r=i<126?3:126===i?1:2}else if(1===r){if(Xye(n)<2)break;const e=$ye(n,2);i=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),r=3}else if(2===r){if(Xye(n)<8)break;const e=$ye(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),a=t.getUint32(0);if(a>Math.pow(2,21)-1){o.enqueue(Tye);break}i=a*Math.pow(2,32)+t.getUint32(4),r=3}else{if(Xye(n)<i)break;const e=$ye(n,i);o.enqueue(Hye(a?e:qye.decode(e),t)),r=0}if(0===i||i>e){o.enqueue(Tye);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),r=Kye();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const i=()=>{n.read().then(({done:e,value:t})=>{e||(this.onPacket(t),i())}).catch(e=>{})};i();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;this._writer.write(n).then(()=>{r&&Jye(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends ube{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=mbe&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new hbe(fbe,this.uri(),e)}}},bbe=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,wbe=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function jbe(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=bbe.exec(e||""),a={},s=14;for(;s--;)a[wbe[s]]=i[s]||"";return-1!=n&&-1!=r&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=function(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1);"/"==t.slice(-1)&&r.splice(r.length-1,1);return r}(0,a.path),a.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,r){t&&(n[t]=r)}),n}(0,a.query),a}const Nbe="function"==typeof addEventListener&&"function"==typeof removeEventListener,_be=[];Nbe&&addEventListener("offline",()=>{_be.forEach(e=>e())},!1);class Sbe extends Yye{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){const n=jbe(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=jbe(t.host).host);nbe(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let r=0,i=n.length;r<i;r++){let e=n[r].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),Nbe&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},_be.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const e=this.opts.rememberUpgrade&&Sbe.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",Sbe.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){const n=this.writeBuffer[t].data;if(n&&(e+=rbe(n)),t>0&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Jye(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(Sbe.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Nbe&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=_be.indexOf(this._offlineEventListener);-1!==e&&_be.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}Sbe.protocol=4;class Cbe extends Sbe{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;Sbe.priorWebsocketSuccess=!1;const r=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Sbe.priorWebsocketSuccess="websocket"===t.name,this.transport.pause(()=>{n||"closed"!==this.readyState&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}}))};function i(){n||(n=!0,c(),t.close(),t=null)}const a=e=>{const n=new Error("probe error: "+e);n.transport=t.name,i(),this.emitReserved("upgradeError",n)};function s(){a("transport closed")}function o(){a("socket closed")}function l(e){t&&e.name!==t.name&&i()}const c=()=>{t.removeListener("open",r),t.removeListener("error",a),t.removeListener("close",s),this.off("close",o),this.off("upgrading",l)};t.once("open",r),t.once("error",a),t.once("close",s),this.once("close",o),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}let Abe=class extends Cbe{constructor(e,t={}){const n="object"==typeof e?e:t;(!n.transports||n.transports&&"string"==typeof n.transports[0])&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(e=>ybe[e]).filter(e=>!!e)),super(e,n)}};const Mbe="function"==typeof ArrayBuffer,Ebe=Object.prototype.toString,kbe="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Ebe.call(Blob),Tbe="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Ebe.call(File);function Pbe(e){return Mbe&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||kbe&&e instanceof Blob||Tbe&&e instanceof File}function Obe(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(Obe(e[t]))return!0;return!1}if(Pbe(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return Obe(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Obe(e[n]))return!0;return!1}function Rbe(e){const t=[],n=e.data,r=e;return r.data=Ibe(n,t),r.attachments=t.length,{packet:r,buffers:t}}function Ibe(e,t){if(!e)return e;if(Pbe(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=Ibe(e[r],t);return n}if("object"==typeof e&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=Ibe(e[r],t));return n}return e}function Dbe(e,t){return e.data=Lbe(e.data,t),delete e.attachments,e}function Lbe(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Lbe(e[n],t);else if("object"==typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Lbe(e[n],t));return e}const Bbe=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var Fbe,Ube;(Ube=Fbe||(Fbe={}))[Ube.CONNECT=0]="CONNECT",Ube[Ube.DISCONNECT=1]="DISCONNECT",Ube[Ube.EVENT=2]="EVENT",Ube[Ube.ACK=3]="ACK",Ube[Ube.CONNECT_ERROR=4]="CONNECT_ERROR",Ube[Ube.BINARY_EVENT=5]="BINARY_EVENT",Ube[Ube.BINARY_ACK=6]="BINARY_ACK";function zbe(e){return"[object Object]"===Object.prototype.toString.call(e)}class Hbe extends Yye{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===Fbe.BINARY_EVENT;n||t.type===Fbe.BINARY_ACK?(t.type=n?Fbe.EVENT:Fbe.ACK,this.reconstructor=new Vbe(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!Pbe(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===Fbe[n.type])throw new Error("unknown packet type "+n.type);if(n.type===Fbe.BINARY_EVENT||n.type===Fbe.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const i=e.substring(r,t);if(i!=Number(i)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(i)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(r,t)}else n.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(!Hbe.isPayloadValid(n.type,r))throw new Error("invalid payload");n.data=r}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(CI){return!1}}static isPayloadValid(e,t){switch(e){case Fbe.CONNECT:return zbe(t);case Fbe.DISCONNECT:return void 0===t;case Fbe.CONNECT_ERROR:return"string"==typeof t||zbe(t);case Fbe.EVENT:case Fbe.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===Bbe.indexOf(t[0]));case Fbe.ACK:case Fbe.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Vbe{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=Dbe(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Gbe=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Hbe,Encoder:class{constructor(e){this.replacer=e}encode(e){return e.type!==Fbe.EVENT&&e.type!==Fbe.ACK||!Obe(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===Fbe.EVENT?Fbe.BINARY_EVENT:Fbe.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==Fbe.BINARY_EVENT&&e.type!==Fbe.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=Rbe(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}},get PacketType(){return Fbe},protocol:5},Symbol.toStringTag,{value:"Module"}));function Wbe(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const Kbe=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class qbe extends Yye{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Wbe(e,"open",this.onopen.bind(this)),Wbe(e,"packet",this.onpacket.bind(this)),Wbe(e,"error",this.onerror.bind(this)),Wbe(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,r,i;if(Kbe.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const a={type:Fbe.EVENT,data:t,options:{}};if(a.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++,n=t.pop();this._registerAckCallback(e,n),a.id=e}const s=null===(r=null===(n=this.io.engine)||void 0===n?void 0:n.transport)||void 0===r?void 0:r.writable,o=this.connected&&!(null===(i=this.io.engine)||void 0===i?void 0:i._hasPingExpired());return this.flags.volatile&&!s||(o?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var n;const r=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===r)return void(this.acks[e]=t);const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))},r),a=(...e)=>{this.io.clearTimeoutFn(i),t.apply(this,e)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...t){return new Promise((n,r)=>{const i=(e,t)=>e?r(e):n(t);i.withError=!0,t.push(i),this.emit(e,...t)})}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((e,...r)=>{if(n!==this._queue[0])return;return null!==e?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...r)),n.pending=!1,this._drainQueue()}),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Fbe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Fbe.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Fbe.EVENT:case Fbe.BINARY_EVENT:this.onevent(e);break;case Fbe.ACK:case Fbe.BINARY_ACK:this.onack(e);break;case Fbe.DISCONNECT:this.ondisconnect();break;case Fbe.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...r){n||(n=!0,t.packet({type:Fbe.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Fbe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function Xbe(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Xbe.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=1&Math.floor(10*t)?e+n:e-n}return 0|Math.min(e,this.max)},Xbe.prototype.reset=function(){this.attempts=0},Xbe.prototype.setMin=function(e){this.ms=e},Xbe.prototype.setMax=function(e){this.max=e},Xbe.prototype.setJitter=function(e){this.jitter=e};class $be extends Yye{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,nbe(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=t.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new Xbe({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||Gbe;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Abe(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=Wbe(t,"open",function(){n.onopen(),e&&e()}),i=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},a=Wbe(t,"error",i);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn(()=>{r(),i(new Error("timeout")),t.close()},e);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}return this.subs.push(r),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Wbe(e,"ping",this.onping.bind(this)),Wbe(e,"data",this.ondata.bind(this)),Wbe(e,"error",this.onerror.bind(this)),Wbe(e,"close",this.onclose.bind(this)),Wbe(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(CI){this.onclose("parse error",CI)}}ondecoded(e){Jye(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new qbe(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t){if(this.nsps[n].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Ybe={};function Jbe(e,t){"object"==typeof e&&(t=e,e=void 0);const n=function(e,t="",n){let r=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),r=jbe(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),r=n.source,i=n.id,a=n.path,s=Ybe[i]&&a in Ybe[i].nsps;let o;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?o=new $be(r,t):(Ybe[i]||(Ybe[i]=new $be(r,t)),o=Ybe[i]),n.query&&!t.query&&(t.query=n.queryKey),o.socket(n.path,t)}Object.assign(Jbe,{Manager:$be,Socket:qbe,io:Jbe,connect:Jbe});const Zbe=()=>{const e=Zj(),{user:t}=Pae(),[n,r]=Ve.useState(!1),[i,a]=Ve.useState(!0),[s,o]=Ve.useState([]),[l,c]=Ve.useState(null),[d,u]=Ve.useState([]),[h,p]=Ve.useState(""),[m,f]=Ve.useState(""),[g,v]=Ve.useState(""),[x,y]=Ve.useState(!0),[b,w]=Ve.useState(!1),[j,N]=Ve.useState([]),[_,S]=Ve.useState(!1),[C,A]=Ve.useState("private"),[M,E]=Ve.useState(""),[k,T]=Ve.useState([]),[P,O]=Ve.useState([]),[R,I]=Ve.useState(!1),[D,L]=Ve.useState(""),[B,F]=Ve.useState(!1),[U,z]=Ve.useState(!1),[H,V]=Ve.useState(!1),[G,W]=Ve.useState("incoming"),[K,q]=Ve.useState(null),X=Ve.useRef(null),$=Ve.useRef(null),Y=Ve.useRef(null),J=Ve.useRef(new Map),Z=Ve.useRef(!0),Q=Ve.useRef(new Map),ee=Ve.useRef(null),te=Ve.useRef(null),ne=()=>{const e=[localStorage.getItem("vibeventure_token"),localStorage.getItem("token"),sessionStorage.getItem("vibeventure_token"),sessionStorage.getItem("token")];for(const n of e)if(n)return n.startsWith("Bearer ")?n.slice(7):n;const t=document.cookie.match(/(?:^|; )(?:vibeventure_token|token)=([^;]+)/);if(t){const e=decodeURIComponent(t[1]);return e.startsWith("Bearer ")?e.slice(7):e}return null},re=async()=>{try{const e=ne();if(!e)return;const t=await fetch("http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/chat/conversations.php",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to fetch conversations")}const n=await t.json();n.success&&o(n.data)}catch(e){QI.error(e.message||"Khng th ti cuc tr chuyn")}finally{y(!1)}};Ve.useEffect(()=>{if(!_)return;const e=new AbortController;return(async()=>{try{const n=ne();if(!n)return void T([]);const r=await fetch("http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/user/list.php",{headers:{Authorization:`Bearer ${n}`},signal:e.signal});if(429===r.status){const e=r.headers.get("Retry-After")||"5";return QI.error(`Qu nhiu yu cu, th li sau ${e}s`),void T([])}if(401===r.status)return QI.error("Token ht hn hoc khng hp l. Vui lng ng nhp li."),void T([]);const i=await r.json();i&&i.success&&Array.isArray(i.data)?T(i.data.filter(e=>e.id!==(null==t?void 0:t.id))):T([])}catch(c$e){if("AbortError"===c$e.name)return;QI.error("Khng th ti danh sch ngi dng"),T([])}})(),()=>e.abort()},[_,t]),Ve.useEffect(()=>{},[d,l]);const ie=Ve.useCallback(()=>{const n=ne();if(!n||!t)return;Y.current&&Y.current.disconnect(),Y.current=Jbe("http://localhost:3000/chat",{auth:{token:n},transports:["websocket"]});const r=Y.current;return r.on("connect",()=>{r.emit("get_online_users")}),r.on("disconnect",()=>{setTimeout(()=>{var e;(null==(e=Y.current)?void 0:e.connected)||ie()},3e3)}),r.on("incoming_call",e=>{const{callId:t,conversationId:n,initiator:r,callType:i,timestamp:a,conversation:s}=e;let o=r.avatar||"/images/avatars/Avt-Default.png",l=r.name||"Khng xc nh";"group"===(null==s?void 0:s.type)&&(o=s.avatar||"images/avatars/Avt-Group-Default.png",l=s.name||l),q({callId:t,conversationId:n,callerName:l,callerAvatar:o,callType:i,timestamp:a}),W("incoming"),V(!0),te.current&&te.current.play().catch(e=>{})}),r.on("call_initiated",e=>{var n,r;const{callId:i,conversationId:a,callType:s,participants:o,conversation:l}=e;let c=(null==(n=null==o?void 0:o.find(e=>e.id!==(null==t?void 0:t.id)))?void 0:n.name)||"Khng xc nh",d=(null==(r=null==o?void 0:o.find(e=>e.id!==(null==t?void 0:t.id)))?void 0:r.avatar)||"/images/avatars/Avt-Default.png";"group"===(null==l?void 0:l.type)&&(d=l.avatar||d,c=l.name||c),q({callId:i,conversationId:a,callType:s,participants:o,callerName:c,callerAvatar:d}),W("outgoing"),V(!0)}),r.on("call_error",e=>{QI.error(e.message||"C li xy ra khi thc hin cuc gi")}),r.on("new_message",e=>{try{const t={...e,fileUrl:e.file_url||e.fileUrl||null,id:e.id||null,tempId:e.tempId||e.temp_id||null},n=e.conversationId||e.conversation_id;if(n&&(null==l?void 0:l.id)&&n!==l.id&&n!==ee.current)return void re();if(t.tempId&&J.current.has(t.tempId))return u(e=>e.map(e=>e.tempId===t.tempId?{...t,isPending:!1}:e)),J.current.delete(t.tempId),void re();const r=e=>e.some(e=>e.id&&t.id&&e.id===t.id),i=e=>e.some(e=>e.tempId&&t.tempId&&e.tempId===t.tempId);u(e=>r(e)||i(e)?e:[...e,{...t,id:t.id||Date.now()}]),re()}catch(c$e){}}),r.on("user_accepted_call",t=>{e(`/call/${t.conversationId}/${t.callType}/${t.callId}`)}),r.on("user_rejected_call",e=>{e.allRejected&&(V(!1),q(null)),QI.error(`${e.user.name}  t chi cuc gi`)}),r.on("call_cancelled",e=>{var t;V(!1),q(null),te.current&&(te.current.pause(),te.current.currentTime=0);const n=(null==(t=e.user)?void 0:t.name)||"bn";QI.error(`Cuc gi  b hu bi ${n}`)}),r.on("message_saved",e=>{e.tempId&&J.current.has(e.tempId)?(u(t=>t.map(t=>t.tempId===e.tempId?{...e,isPending:!1,id:e.id||t.id,fileUrl:e.file_url||e.fileUrl}:t)),J.current.delete(e.tempId)):u(t=>t.some(t=>t.id===e.id||t.tempId===e.tempId)?t:[...t,{...e,isPending:!1,fileUrl:e.file_url||e.fileUrl}]),re()}),r.on("users_online",e=>N(e)),r.on("message_read",e=>{u(t=>t.map(t=>t.id===e.messageId?{...t,isRead:!0}:t))}),r.on("connect_error",e=>{QI.error("Li kt ni my ch. ang kt ni li...")}),r},[t]),ae=Ve.useCallback(async()=>{l&&t&&Y.current&&Y.current.emit("initiate_call_from_chat",{conversationId:l.id,callType:"video"})},[l,t]),se=Ve.useCallback(async()=>{l&&t&&Y.current&&Y.current.emit("initiate_call_from_chat",{conversationId:l.id,callType:"voice"})},[l,t]),oe=Ve.useCallback(()=>{K&&Y.current&&(te.current&&(te.current.pause(),te.current.currentTime=0),Y.current.emit("accept_call",{callId:K.callId,conversationId:K.conversationId,callType:K.callType}),V(!1),setTimeout(()=>{e(`/call/${K.conversationId}/${K.callType}/${K.callId}`)},100),q(null))},[K,e,G]),le=Ve.useCallback(()=>{K&&Y.current&&(te.current&&(te.current.pause(),te.current.currentTime=0),Y.current.emit("reject_call",{callId:K.callId,reason:"user_rejected",callType:K.callType}),V(!1),q(null))},[K]),ce=Ve.useCallback(()=>{K&&Y.current&&(Y.current.emit("cancel_call",{callId:K.callId,reason:"user_cancelled",callType:K.callType}),V(!1),q(null))},[K]),de=Ve.useCallback(()=>{te.current&&(te.current.pause(),te.current.currentTime=0),V(!1),q(null)},[]),ue=Ve.useRef(!1),he=Ve.useRef(null),pe=async(e,n="text",r)=>{if(!l||!t||!Y.current)return;const i=l.id,a=`temp_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,s={tempId:a,senderId:Number(t.id),conversationId:i,content:e,type:n,file_url:null==r?void 0:r.file_url,fileUrl:null==r?void 0:r.file_url,thumbnail_url:null==r?void 0:r.thumbnail_url,file_type:null==r?void 0:r.file_type,file_size:null==r?void 0:r.file_size,original_name:null==r?void 0:r.original_name,timestamp:(new Date).toISOString(),isPending:!0,isRead:!1,sender:{id:Number(t.id),name:t.name,avatar:t.avatar||"/images/avatars/Avt-Default.png"}};ee.current===i&&(u(e=>[...e,s]),J.current.set(a,s)),Y.current.emit("send_message",{conversationId:i,content:e,type:n,fileData:r,tempId:a});const o=e=>new Promise(t=>setTimeout(t,e)),c=Date.now(),d=Q.current.get(i)||0;if(c-d<700){const e=700-(c-d)+Math.floor(150*Math.random());await o(e)}let h=0;for(;h<3;){h++;try{const t=ne();if(!t)throw new Error("Missing auth token");const s=await fetch("http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/chat/messages.php",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({conversation_id:i,content:e,type:n,file_url:null==r?void 0:r.file_url,temp_id:a})}),l=s.headers.get("content-type")||"",c=await s.text();let d=null;if(l.includes("application/json")&&c)try{d=JSON.parse(c)}catch(p){throw new Error("Invalid JSON response from server")}if(!s.ok){let e=Number((null==d?void 0:d.retry_after)||(null==d?void 0:d.retry_after_seconds)||0);if(!e){const t=s.headers.get("Retry-After");e=t&&Number(t)||0}if(e<=0&&(e=Math.min(1+.8*h,4)+.6*Math.random()),h<3){QI(`Qu nhiu yu cu, th li sau ${Math.ceil(e)}s...`,{icon:"",duration:1500}),await o(1e3*Math.ceil(e));continue}throw new Error((null==d?void 0:d.message)||c||`HTTP ${s.status}`)}if(d&&!1===d.success){let e=Number(d.retry_after||d.retry_after_seconds||0);if(e<=0&&(e=Math.min(1+.8*h,4)+.6*Math.random()),h<3){QI(`Qu nhiu yu cu, th li sau ${Math.ceil(e)}s...`,{icon:"",duration:1500}),await o(1e3*Math.ceil(e));continue}throw new Error(d.message||"Gi tin nhn tht bi")}return Q.current.set(i,Date.now()),ee.current===i&&(d&&d.data?u(e=>e.map(e=>e.tempId===a?{...d.data,isPending:!1,tempId:void 0,fileUrl:d.data.file_url||d.data.fileUrl}:e)):u(e=>e.map(e=>e.tempId===a?{...e,isPending:!1}:e))),void J.current.delete(a)}catch(c$e){if(h>=3)return ee.current===i&&u(e=>e.filter(e=>e.tempId!==a)),J.current.delete(a),void QI.error("Khng th gi tin nhn: "+((null==c$e?void 0:c$e.message)||c$e));const t=Math.min(800*h,3e3)+Math.floor(200*Math.random());await o(t)}}},me=async e=>{try{const t=ne();if(!t||0===e.length)return;await fetch("http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/chat/read.php",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({message_ids:e})}),Y.current&&l&&e.forEach(e=>{var t;null==(t=Y.current)||t.emit("mark_read",{conversationId:l.id,messageId:e})})}catch(t){}},fe=async e=>{try{const t=ne();if(!t)return;await fetch("http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/chat/status.php",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({status:e})})}catch(t){}},ge=Ve.useCallback(e=>{Y.current&&Y.current.emit("join_conversation",e)},[]),ve=Ve.useCallback(e=>{Y.current&&Y.current.emit("leave_conversation",e)},[]),xe=Ve.useCallback((e=!1)=>{X.current&&(Z.current||e)&&X.current.scrollIntoView({behavior:e?"auto":"smooth",block:"end"})},[]),ye=e=>e?/^https?:\/\//i.test(e)?e:`http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/${e.replace(/^\/+/,"")}`:"",be=Ve.useCallback(()=>{if($.current){const{scrollTop:e,scrollHeight:t,clientHeight:n}=$.current,r=t-e-n<100;Z.current=r}},[]),we=()=>{S(!0)},je=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},Ne=e=>{switch(e){case"image":return Qe.jsx(df,{size:16,className:"text-primary"});case"video":return Qe.jsx(Gf,{size:16,className:"text-primary"});case"audio":return Qe.jsx(rf,{size:16,className:"text-primary"});case"document":return Qe.jsx(Wm,{size:16,className:"text-primary"});case"archive":return Qe.jsx($p,{size:16,className:"text-primary"});default:return Qe.jsx(Lf,{size:16,className:"text-muted-foreground"})}},_e=e=>{if(!e)return{messageColor:"#667eea",messageTextColor:"#ffffff",secondaryMessageColor:"#f1f5f9",backgroundStyle:void 0};const t=e.message_color||"#667eea",n=e.message_text_color||"#ffffff",r=e.background_color;return{messageColor:t,messageTextColor:n,secondaryMessageColor:"#f1f5f9",backgroundStyle:r?`linear-gradient(135deg, ${r} 0%, ${r}80 100%)`:void 0}};Ve.useEffect(()=>{const e=()=>{r(window.innerWidth<768),a(window.innerWidth>=768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),Ve.useEffect(()=>{Mye.bind("[data-fancybox]",{animated:!0,showClass:"fancybox-fadeIn",hideClass:"fancybox-fadeOut",Images:{zoom:!0,protect:!0},Html:{video:{tpl:'<video class="fancybox__html" playsinline controls controlsList="nodownload" poster="{{poster}}">\n                  <source src="{{src}}" type="{{format}}" />\n                  Sorry, your browser doesn\'t support embedded videos.\n                </video>',format:"video/mp4",autoSize:!0}},Toolbar:{display:{left:["infobar"],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY"],right:["slideshow","fullscreen","download","thumbs","close"]}}}),document.title="VibeMarket - Tr chuyn";const e=ne();return t&&e&&(re(),ie(),fe("online")),()=>{Se.current&&clearTimeout(Se.current),he.current&&he.current.abort(),Y.current&&Y.current.disconnect(),fe("offline"),Mye.unbind("[data-fancybox]"),Mye.close()}},[t,ie]),Ve.useEffect(()=>{const e=setTimeout(()=>xe(),100),t=setTimeout(()=>{Mye.unbind("[data-fancybox]"),Mye.bind("[data-fancybox]",{animated:!0,showClass:"fancybox-fadeIn",hideClass:"fancybox-fadeOut",Images:{zoom:!0,protect:!0},Html:{video:{tpl:'<video class="fancybox__html" playsinline controls controlsList="nodownload" poster="{{poster}}">\n                    <source src="{{src}}" type="{{format}}" />\n                    Sorry, your browser doesn\'t support embedded videos.\n                  </video>',format:"video/mp4",autoSize:!0}},Toolbar:{display:{left:["infobar"],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY"],right:["slideshow","fullscreen","download","thumbs","close"]}}})},200);return()=>{clearTimeout(e),clearTimeout(t)}},[d,xe]),Ve.useEffect(()=>{n&&l&&a(!1),n&&!l&&a(!0)},[l,n]);const Se=Ve.useRef(null),Ce=async e=>{Se.current&&clearTimeout(Se.current),u([]),w(!0),l&&Y.current&&ve(l.id),c(e),ee.current=e.id,n&&a(!1),Se.current=setTimeout(async()=>{try{await(async(e,t=1)=>{if(he.current&&he.current.abort(),!ue.current)try{ue.current=!0,u([]),w(!0),ee.current=e;const n=ne();if(!n)return w(!1),void(ue.current=!1);he.current=new AbortController;const r=await fetch(`http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/chat/messages.php?conversation_id=${e}&page=${t}&limit=50`,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},signal:he.current.signal});if(!r.ok){const e=await r.json();if(429===r.status){const t=parseInt(r.headers.get("Retry-After")||e.retry_after||"5");throw new Error(`Qu nhiu yu cu, th li sau: ${t} giy`)}throw new Error(e.message||"Failed to fetch messages")}const i=await r.json();if(ee.current===e&&i.success){u(i.data||[]);const e=i.data.map(e=>e.id).filter(e=>null!=e);e.length>0&&await me(e),setTimeout(()=>xe(!0),100)}}catch(n){if("AbortError"===n.name)return;QI.error("Khng th ti tin nhn: "+(n.message||n))}finally{ee.current===e&&w(!1),ue.current=!1,he.current=null}})(e.id),Y.current&&ge(e.id)}catch(t){QI.error("Khng th chuyn cuc tr chuyn")}},300)};Ve.useEffect(()=>(l&&(Y.current&&ge(l.id),Z.current=!0),()=>{l&&Y.current&&ve(l.id)}),[null==l?void 0:l.id,ge,ve]);const Ae=async e=>{e.preventDefault(),h.trim()&&l&&t&&(await pe(h.trim()),p(""))},Me=e=>{const t=new Date(e),n=(new Date).getTime()-t.getTime(),r=Math.floor(n/6e4),i=Math.floor(n/36e5),a=Math.floor(n/864e5);return r<1?"Va xong":r<60?`${r}p`:i<24?`${i}h`:a<7?`${a}d`:t.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit"})},Ee=e=>{if("image"===e.type){const t=ye(e.fileUrl||e.file_url);return Qe.jsxs("div",{className:"mb-2",children:[Qe.jsx("a",{href:t,"data-fancybox":"gallery","data-caption":e.original_name||"Hnh nh c chia s",className:"inline-block rounded-xl overflow-hidden",children:Qe.jsx("img",{src:t,alt:"Hnh nh c chia s",className:"max-w-full h-auto max-h-80 object-cover rounded-xl hover:opacity-90 transition-opacity",loading:"lazy"})}),e.original_name&&Qe.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:e.original_name})]})}if("file"===e.type){const t=ye(e.fileUrl||e.file_url);return Qe.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-secondary/50 rounded-xl max-w-sm",children:[Qe.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:Ne(e.file_type||"file")}),Qe.jsxs("div",{className:"flex-1 min-w-0",children:[Qe.jsx("p",{className:"text-sm font-medium truncate",children:e.original_name||e.content.split("/").pop()||"File"}),e.file_size&&Qe.jsx("p",{className:"text-xs text-muted-foreground",children:je(e.file_size)})]}),Qe.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 p-2 text-primary hover:bg-primary/10 rounded-lg transition-colors",title:"Ti xung",children:Qe.jsx(Bm,{size:16})})]})}if("video"===e.type){const t=ye(e.fileUrl||e.file_url),n=e.thumbnail_url?ye(e.thumbnail_url):void 0;return Qe.jsxs("div",{className:"mb-2",children:[Qe.jsx("div",{className:"relative max-w-full h-auto rounded-xl overflow-hidden",children:Qe.jsx("video",{src:t,controls:!0,className:"w-full h-auto max-h-60 rounded-xl",poster:n,preload:"metadata",children:"Trnh duyt ca bn khng h tr pht video."})}),e.original_name&&Qe.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:e.original_name})]})}return Qe.jsx("p",{className:"text-sm lg:text-base leading-relaxed break-words whitespace-pre-wrap",children:e.content})},ke=s.filter(e=>e.participants.some(e=>e.name.toLowerCase().includes(m.toLowerCase()))),Te=null==l?void 0:l.participants.find(e=>e.id!==(null==t?void 0:t.id)),Pe=e=>{const t=e.last_message||e.last_message_text||e.last_message_data||e.last_message_object||e.lastMessage||null;if(!t)return"Bt u cuc tr chuyn";if("object"==typeof t){const e=t.type||t.file_type||t.message_type||"",n=t.content||t.text||t.message||"";if(e){if("image"===e)return"Hnh nh";if("video"===e)return"Video";if("audio"===e)return"Audio";if("file"===e||"document"===e||"archive"===e)return t.original_name||n||"Tp nh km"}return n||(t.original_name||t.filename||"Tp nh km")}return"string"==typeof t?t:"Bt u cuc tr chuyn"};return Qe.jsxs("div",{className:"h-screen flex overflow-hidden gradient-subtle",children:[Qe.jsx(eM,{mode:"wait",children:i&&Qe.jsxs(QT.aside,{initial:!!n&&{x:-300,opacity:0},animate:{x:0,opacity:1},exit:n?{x:-300,opacity:0}:{},className:"w-full md:w-80 lg:w-96 bg-card border-r border-border flex flex-col",children:[Qe.jsxs("div",{className:"p-4 border-b border-white/10 \r\n                                       bg-gradient-to-r from-violet-500/15 via-fuchsia-500/15 to-sky-500/15 \r\n                                       backdrop-blur-lg rounded-t-xl shadow-sm",children:[Qe.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Qe.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-violet-600 via-fuchsia-500 to-sky-400 bg-clip-text text-transparent drop-shadow-sm",children:"Tin nhn"}),Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx("button",{onClick:()=>e("/"),className:"p-2 rounded-xl hover:bg-white/20 transition-colors shadow-inner backdrop-blur-sm",title:"V trang ch",children:Qe.jsx(lf,{size:20})}),Qe.jsx("button",{onClick:we,className:"p-2 rounded-xl bg-gradient-to-r from-violet-500 to-sky-500 text-white shadow-md hover:shadow-lg hover:scale-105 transition-all",title:"To cuc tr chuyn mi",children:Qe.jsx(Tg,{size:20})})]})]}),Qe.jsxs("div",{className:"relative",children:[Qe.jsx(eg,{className:"absolute left-3 top-1/2 -translate-y-1/2 ",size:18}),Qe.jsx("input",{type:"text",placeholder:"Tm kim cuc tr chuyn...",value:m,onChange:e=>f(e.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white/10 border border-white/10 rounded-xl \r\n                                               focus:ring-2 focus:ring-violet-400/40 focus:border-transparent \r\n                                               backdrop-blur-sm transition-all outline-none"})]})]}),Qe.jsx("div",{className:"flex-1 overflow-y-auto chat-scroll",children:x?Qe.jsx("div",{className:"flex items-center justify-center h-full",children:Qe.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary border-t-transparent"})}):0===ke.length?Qe.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-6",children:[Qe.jsx(Cf,{size:48,className:"text-muted-foreground mb-3 opacity-50"}),Qe.jsx("p",{className:"text-muted-foreground",children:"Cha c cuc tr chuyn no"})]}):ke.map(e=>{const n=e.participants.find(e=>e.id!==(null==t?void 0:t.id)),r=j.includes((null==n?void 0:n.id)||0),i=(null==l?void 0:l.id)===e.id,{messageColor:a}=_e(e);return Qe.jsxs(QT.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center gap-3 p-4 border-b border-border/50 cursor-pointer transition-colors "+(i?"bg-primary/10 border-l-4 border-l-primary":"hover:bg-[hsl(var(--chat-hover))]"),onClick:()=>Ce(e),style:{borderLeftColor:i?a:void 0},children:[Qe.jsxs("div",{className:"relative flex-shrink-0",children:[Qe.jsx("img",{src:"group"===e.type?e.avatar||"/images/avatars/Avt-Group-Default.png":(null==n?void 0:n.avatar)||"/images/avatars/Avt-Default.png",alt:"group"===e.type?e.name:null==n?void 0:n.name,className:"w-12 h-12 rounded-full object-cover ring-2 ring-border"}),e.background_color&&Qe.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-white",style:{backgroundColor:a}}),"private"===e.type&&r&&Qe.jsx("span",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-400 rounded-full border-2 border-card"})]}),Qe.jsxs("div",{className:"flex-1 min-w-0",children:[Qe.jsxs("div",{className:"flex items-center justify-between mb-1",children:[Qe.jsx("h3",{className:"font-semibold text-foreground truncate",children:"group"===e.type?e.name:null==n?void 0:n.name}),Qe.jsx("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:Me(e.last_message_at||(new Date).toISOString())})]}),Qe.jsx("p",{className:"text-sm text-muted-foreground truncate",children:Pe(e)})]}),e.unread_count>0&&Qe.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold text-white shadow-glow",style:{backgroundColor:a},children:e.unread_count})]},e.id)})})]})}),Qe.jsx("div",{className:"flex-1 flex flex-col",children:l?Qe.jsxs(Qe.Fragment,{children:[Qe.jsxs("div",{className:"p-4 border-b border-border bg-card/80 backdrop-blur-sm flex items-center justify-between",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[n&&Qe.jsx("button",{onClick:()=>{n&&(c(null),a(!0))},className:"p-2 hover:bg-secondary rounded-xl transition-colors",children:Qe.jsx(Zp,{size:20})}),Qe.jsxs("div",{className:"relative",children:[Qe.jsx("img",{src:"group"===l.type?l.avatar||"/images/avatars/Avt-Group-Default.png":(null==Te?void 0:Te.avatar)||"/images/avatars/Avt-Default.png",alt:"group"===l.type?l.name:null==Te?void 0:Te.name,className:"w-10 h-10 rounded-full object-cover ring-2 ring-border"}),"private"===l.type&&j.includes((null==Te?void 0:Te.id)||0)&&Qe.jsx("span",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-400 rounded-full border-2 border-card"})]}),Qe.jsxs("div",{children:[Qe.jsx("h2",{className:"font-semibold text-foreground",children:"group"===l.type?l.name:null==Te?void 0:Te.name}),"private"===l.type&&Qe.jsx("p",{className:"text-xs text-muted-foreground",children:j.includes((null==Te?void 0:Te.id)||0)?"ang hot ng":"Khng hot ng"})]})]}),Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx("button",{onClick:se,className:"p-2.5 hover:bg-secondary rounded-xl transition-colors",title:"Gi thoi",children:Qe.jsx(Vf,{size:20,className:"text-primary"})}),Qe.jsx("button",{onClick:ae,className:"p-2.5 hover:bg-secondary rounded-xl transition-colors",title:"Gi video",children:Qe.jsx(Ig,{size:20,className:"text-primary"})}),Qe.jsx("button",{onClick:()=>z(!U),className:"p-2.5 hover:bg-secondary rounded-xl transition-colors",title:"Thng tin",children:Qe.jsx(Fm,{size:20,className:"text-muted-foreground"})})]})]}),Qe.jsxs("div",{ref:$,onScroll:be,className:"flex-1 overflow-y-auto p-4 space-y-4 chat-scroll",style:{background:_e(l).backgroundStyle},children:[b?Qe.jsx("div",{className:"flex items-center justify-center h-full",children:Qe.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-2 border-primary border-t-transparent"})}):0===d.length?Qe.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[Qe.jsx(Cf,{size:64,className:"text-muted-foreground mb-4 opacity-30"}),Qe.jsx("p",{className:"text-muted-foreground",children:"Cha c tin nhn no"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Gi tin nhn u tin!"})]}):d.map((e,n)=>{var r,i,a,s;const o=`${l.id}_${e.id||e.tempId||n}`,c=e.senderId===Number(null==t?void 0:t.id),u=!c&&(0===n||(null==(r=d[n-1])?void 0:r.senderId)!==e.senderId),h="image"===e.type||"video"===e.type||"file"===e.type,{messageColor:p,messageTextColor:m,secondaryMessageColor:f}=_e(l);return Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex gap-2 "+(c?"justify-end":"justify-start"),children:[!c&&u&&Qe.jsx("img",{src:(null==(i=e.sender)?void 0:i.avatar)||"/images/avatars/Avt-Default.png",alt:null==(a=e.sender)?void 0:a.name,className:"w-8 h-8 rounded-full object-cover flex-shrink-0"}),!c&&!u&&Qe.jsx("div",{className:"w-8"}),Qe.jsxs("div",{className:`max-w-[70%] ${c?"items-end":"items-start"} flex flex-col`,children:[!c&&u&&Qe.jsx("span",{className:"text-xs font-semibold mb-1 px-1",children:null==(s=e.sender)?void 0:s.name}),h?Qe.jsx("div",{className:""+(e.isPending?"opacity-60":""),children:Ee(e)}):Qe.jsx("div",{className:`px-4 py-2 rounded-2xl min-w-0 max-w-full ${c?"rounded-br-sm":"rounded-bl-sm"} ${e.isPending?"opacity-60":""}`,style:{backgroundColor:c?p:f,color:c?m:"#374151",wordBreak:"break-word",overflowWrap:"break-word",hyphens:"auto"},children:Ee(e)}),Qe.jsxs("div",{className:"flex items-center gap-1 text-xs mt-1 px-1",children:[Qe.jsx("span",{children:(g=e.timestamp,new Date(g).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"}))}),c&&Qe.jsx(Qe.Fragment,{children:e.isPending?Qe.jsx("div",{className:"w-3 h-3 border-2 border-current border-t-transparent rounded-full animate-spin"}):e.isRead?Qe.jsx(fm,{size:14,style:{color:p}}):Qe.jsx(gm,{size:14})})]})]})]},o);var g}),Qe.jsx("div",{ref:X})]}),Qe.jsx("form",{onSubmit:Ae,className:"p-4 border-t border-border bg-card/80 backdrop-blur-sm",children:Qe.jsxs("div",{className:"flex items-end gap-2",children:[Qe.jsxs("label",{className:"flex-shrink-0 p-4 hover:bg-secondary rounded-xl cursor-pointer transition-colors",children:[Qe.jsx(Lf,{size:20,className:"text-muted-foreground"}),Qe.jsx("input",{type:"file",multiple:!0,onChange:async e=>{const t=e.target.files;if(!t||0===t.length||!l)return;const n=QI.loading(`ang ti ${t.length} file(s) ln...`);try{const e=await(async e=>{try{const t=ne();if(!t)throw new Error("No auth token");const n=new FormData;Array.from(e).forEach(e=>n.append("files[]",e));const r=await fetch("http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/chat/upload.php",{method:"POST",headers:{Authorization:`Bearer ${t}`},body:n}),i=await r.json();if(i.success&&i.data)return i.errors&&i.errors.length>0?QI.error(`${i.uploaded_count}/${i.total_count} files gi thnh cng. Mt s file tht bi.`):QI.success(`Gi thnh cng ${i.uploaded_count} files!`),i.data;throw new Error(i.message||"Gi tht bi")}catch(t){throw QI.error("Error uploading files: "+t),t}})(t);for(const t of e){let e;e="image"===t.file_type?"image":"video"===t.file_type?"video":"file";const n="image"===t.file_type?"Hnh nh":"video"===t.file_type?"Video":t.original_name;await pe(n,e,t)}QI.dismiss(n)}catch(r){QI.dismiss(n),QI.error("Khng th gi file(s): "+r)}e.target.value=""},className:"hidden"})]}),Qe.jsxs("div",{className:"flex-1 relative",children:[Qe.jsx("textarea",{value:h,onChange:e=>{p(e.target.value),e.target.style.height="auto",e.target.style.height=Math.min(e.target.scrollHeight,120)+"px"},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),Ae(e))},placeholder:"Nhp tin nhn... (Shift+Enter  xung dng)",className:"w-full px-4 py-2.5 pr-12 bg-secondary/50 border border-input rounded-2xl focus:ring-2 focus:ring-primary/30 focus:border-primary transition-all outline-none resize-none min-h-[44px] max-h-[120px] overflow-y-auto",rows:1,style:{height:"44px"}}),Qe.jsx("button",{type:"button",className:"absolute right-3 bottom-2.5 p-1.5 hover:bg-secondary/80 rounded-lg transition-colors",children:Qe.jsx(hg,{size:20,className:"text-muted-foreground"})})]}),Qe.jsx("button",{type:"submit",disabled:!h.trim(),className:"p-4 bg-primary hover:bg-primary/90 text-primary-foreground rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-glow self-end",children:Qe.jsx(tg,{size:20})})]})})]}):Qe.jsx("div",{className:"flex-1 flex items-center justify-center",children:Qe.jsxs("div",{className:"text-center",children:[Qe.jsx(Cf,{size:80,className:"mx-auto text-muted-foreground mb-6 opacity-20"}),Qe.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Cho mng n vi VibeMarket Chat"}),Qe.jsx("p",{className:"text-muted-foreground mb-6",children:"Chn mt cuc tr chuyn  bt u nhn tin"}),Qe.jsx("button",{onClick:we,className:"\r\n                                    px-6 py-3 rounded-xl font-medium text-white\r\n                                    bg-gradient-to-r from-violet-500 via-indigo-500 to-sky-400\r\n                                    shadow-md hover:shadow-lg hover:scale-[1.02] active:scale-[0.98]\r\n                                    transition-all duration-300\r\n                                    focus:outline-none focus:ring-2 focus:ring-violet-400 focus:ring-offset-2\r\n                                ",children:"To cuc tr chuyn mi"})]})})}),l&&U&&Qe.jsx(jve,{conversation:l,onClose:()=>z(!1),onLeave:async e=>{if(!e)return;if(!window.confirm("Bn c chc mun ri khi nhm ny?"))return;const t=QI.loading("ang ri khi nhm...");try{const n=ne();if(!n)return QI.dismiss(t),void QI.error("Khng tm thy token. Vui lng ng nhp li.");const r="http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/chat/conversations.php",i=async t=>await fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({conversation_id:e})});let a=await i(r);if(405!==a.status&&404!==a.status||(a=await fetch(`http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/chat/leave.php?conversation_id=${e}`,{method:"POST",headers:{Authorization:`Bearer ${n}`}})),401===a.status)return QI.dismiss(t),void QI.error("Token khng hp l hoc ht hn. Vui lng ng nhp li.");let s=null;try{s=await a.json()}catch{const e=await a.text();throw new Error(e||`HTTP ${a.status}`)}if(!a.ok||s&&!1===s.success)throw new Error((null==s?void 0:s.message)||`Khng th ri nhm (HTTP ${a.status})`);QI.dismiss(t),QI.success("Bn  ri nhm"),Y.current&&Y.current.emit("leave_conversation",e),(null==l?void 0:l.id)===e&&c(null),z(!1),re()}catch(c$e){QI.dismiss(),QI.error((null==c$e?void 0:c$e.message)||"Khng th ri nhm")}},onConversationUpdate:e=>{c(e),o(t=>t.map(t=>t.id===e.id?{...t,...e}:t))}}),H&&K&&Qe.jsx(Nve,{isOpen:H,onClose:de,type:G,callData:K,onAccept:oe,onReject:le,onCancel:ce}),Qe.jsx(ive.Root,{show:_,as:Ve.Fragment,children:Qe.jsxs(vve,{as:"div",className:"relative z-50",onClose:S,children:[Qe.jsx(ive.Child,{as:Ve.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Qe.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm"})}),Qe.jsx("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:Qe.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:Qe.jsx(ive.Child,{as:Ve.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:Qe.jsxs(vve.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-card border border-border p-6 shadow-xl transition-all",children:[Qe.jsx(vve.Title,{as:"h3",className:"text-lg font-bold mb-4 text-foreground",children:"To cuc tr chuyn mi"}),Qe.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),"private"!==C||1===P.length)if("group"!==C||!(P.length<1)&&M.trim()){I(!0);try{const e=ne(),n={type:C,participants:[t.id,...P.filter(e=>e!==t.id)]};"group"===C&&(n.name=M,D&&(n.avatar=D));const r=await fetch("http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/chat/conversations.php",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(n)}),i=await r.json();i.success?(QI.success("To cuc tr chuyn thnh cng!"),S(!1),E(""),O([]),re()):QI.error(i.message||"Khng th to cuc tr chuyn")}catch(c$e){QI.error("Li khi to cuc tr chuyn"+c$e)}finally{I(!1)}}else QI.error("Vui lng chn t nht 1 ngi v nhp tn nhm");else QI.error("Vui lng chn 1 ngi  tr chuyn ring t")},className:"space-y-4",children:[Qe.jsxs("div",{children:[Qe.jsx("label",{className:"block text-sm font-medium mb-2 text-foreground",children:"Loi chat"}),Qe.jsxs("select",{value:C,onChange:e=>{A(e.target.value),O([]),E("")},className:"w-full px-4 py-2.5 bg-background border border-input rounded-xl focus:ring-2 focus:ring-primary/30 focus:border-primary transition-all outline-none",children:[Qe.jsx("option",{value:"private",children:"Ring t"}),Qe.jsx("option",{value:"group",children:"Nhm"})]})]}),"group"===C&&Qe.jsxs(Qe.Fragment,{children:[Qe.jsxs("div",{children:[Qe.jsx("label",{className:"block text-sm font-medium mb-2 text-foreground",children:"Tn nhm"}),Qe.jsx("input",{type:"text",value:M,onChange:e=>E(e.target.value),className:"w-full px-4 py-2.5 bg-background border border-input rounded-xl focus:ring-2 focus:ring-primary/30 focus:border-primary transition-all outline-none",placeholder:"Nhp tn nhm...",required:!0})]}),Qe.jsxs("div",{children:[Qe.jsx("label",{className:"block text-sm font-medium mb-2 text-foreground",children:"Avatar nhm"}),Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx("input",{type:"text",value:D,onChange:e=>L(e.target.value),className:"flex-1 px-4 py-2.5 bg-background border border-input rounded-xl focus:ring-2 focus:ring-primary/30 focus:border-primary transition-all outline-none",placeholder:"Dn link nh (ty chn)"}),Qe.jsxs("label",{className:"p-2.5 bg-secondary hover:bg-secondary/80 rounded-xl cursor-pointer transition-colors",children:[Qe.jsx(df,{size:20,className:"text-muted-foreground"}),Qe.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:async e=>{var t;const n=null==(t=e.target.files)?void 0:t[0];if(!n)return;F(!0);const r=new FileReader;r.onloadend=async()=>{const e=r.result.split(",")[1];try{const t=new FormData;t.append("key","337a898f657d613ced6bc9681341319b"),t.append("image",e);const n=await fetch("https://api.imgbb.com/1/upload",{method:"POST",body:t}),r=await n.json();r.success?(L(r.data.url),QI.success("Ti nh thnh cng!")):QI.error("Ti nh tht bi!")}catch(c$e){QI.error("Li khi ti nh ln!"+c$e)}finally{F(!1)}},r.readAsDataURL(n)},disabled:B})]})]})]})]}),Qe.jsxs("div",{children:[Qe.jsx("label",{className:"block text-sm font-medium mb-2 text-foreground",children:"Tm kim ngi dng"}),Qe.jsxs("div",{className:"relative",children:[Qe.jsx(eg,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",size:18}),Qe.jsx("input",{type:"text",placeholder:"Nhp tn ngi dng...",value:g,onChange:e=>v(e.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-background border border-input rounded-xl focus:ring-2 focus:ring-primary/30 focus:border-primary transition-all outline-none"})]})]}),Qe.jsxs("div",{children:[Qe.jsx("label",{className:"block text-sm font-medium mb-2 text-foreground",children:"private"===C?"Chn 1 ngi":"Chn thnh vin"}),Qe.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto chat-scroll p-1",children:k.filter(e=>e.name.toLowerCase().includes(g.toLowerCase())).map(e=>Qe.jsxs("button",{type:"button",onClick:()=>{O("private"===C?[e.id]:t=>t.includes(e.id)?t.filter(t=>t!==e.id):[...t,e.id])},className:"flex items-center gap-2 p-2 rounded-xl border transition-all "+(P.includes(e.id)?"bg-primary/10 border-primary":"bg-background border-border hover:bg-secondary"),children:[Qe.jsx("img",{src:e.avatar||"/images/avatars/Avt-Default.png",alt:e.name,className:"w-8 h-8 rounded-full object-cover"}),Qe.jsx("span",{className:"text-sm truncate",children:e.name})]},e.id))})]}),Qe.jsxs("div",{className:"flex gap-3 pt-2",children:[Qe.jsx("button",{type:"button",onClick:()=>S(!1),className:"flex-1 px-4 py-2.5 bg-secondary hover:bg-secondary/80 text-foreground rounded-xl transition-colors",children:"Hy"}),Qe.jsx("button",{type:"submit",disabled:R,className:"\n                                                    flex-1 px-5 py-2.5 rounded-xl font-medium text-white transition-all\n                                                    bg-gradient-to-r from-indigo-500 via-violet-500 to-sky-500\n                                                    shadow-md hover:shadow-lg hover:scale-[1.02] active:scale-[0.98]\n                                                    disabled:opacity-50 disabled:cursor-not-allowed\n                                                    focus:outline-none focus:ring-2 focus:ring-violet-400 focus:ring-offset-2\n                                                ",children:R?"ang to...":"To"})]})]})]})})})})]})})]})},Qbe=()=>{const{toast:e}=vh(),[t,n]=Ve.useState(null),[r,i]=Ve.useState(!1),[a,s]=Ve.useState(!1),[o,l]=Ve.useState("outfit"),[c,d]=Ve.useState(null),[u,h]=Ve.useState([]),p=[{id:1,user:{name:"Minh Anh",avatar:"/placeholder.svg",verified:!0},image:"/placeholder.svg",category:"outfit",detectedStyle:"Vintage Chic",products:[{name:"Vy midi hoa",price:45e4,id:1},{name:"Ti xch da",price:89e4,id:2},{name:"Giy cao gt",price:65e4,id:3}],votes:234,comments:45,views:1234,time:"2 gi trc",tags:["#VintageStyle","#OutfitOfTheDay"],description:"Set  vintage cho ngy i chi cui tun "},{id:2,user:{name:"Thu Hng",avatar:"/placeholder.svg",verified:!0},image:"/placeholder.svg",category:"home",detectedStyle:"Scandinavian",products:[{name:"Gh sofa xm",price:89e5,id:4},{name:"Bn g thng",price:25e5,id:5},{name:"n cy",price:89e4,id:6}],votes:567,comments:89,views:3421,time:"5 gi trc",tags:["#HomeDecor","#Scandinavian"],description:"Gc phng khch ti gin m vn m cng "},{id:3,user:{name:"c Anh",avatar:"/placeholder.svg",verified:!1},image:"/placeholder.svg",category:"workspace",detectedStyle:"Modern Tech",products:[{name:"Bn lm vic in t",price:56e5,id:7},{name:"Gh gaming",price:32e5,id:8},{name:"n LED",price:45e4,id:9}],votes:345,comments:67,views:2156,time:"1 ngy trc",tags:["#WorkspaceSetup","#TechLife"],description:"Setup gc lm vic ti nh cho dev "}],m={favoriteStyles:[{name:"Modern",percentage:35},{name:"Minimalist",percentage:28},{name:"Vintage",percentage:20},{name:"Sporty",percentage:17}],colorPreferences:[{color:"#2C3E50",name:"Navy",count:45},{color:"#ECF0F1",name:"White",count:38},{color:"#95A5A6",name:"Gray",count:32},{color:"#E74C3C",name:"Red",count:25}],topCategories:[{name:"Thi trang",engagement:89},{name:"Trang tr nh",engagement:76},{name:"Workspace",engagement:65}]},f=[{id:"outfit",name:"Trang phc",icon:og},{id:"home",name:"Phng khch",icon:lf},{id:"workspace",name:"Bn lm vic",icon:pf},{id:"bedroom",name:"Phng ng",icon:lf}];return Qe.jsx("div",{className:"min-h-screen bg-background",children:Qe.jsx("main",{className:"container mx-auto px-4 py-8 ",children:Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:[Qe.jsxs("div",{className:"text-center lg:text-left space-y-4",children:[Qe.jsxs(QT.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center shadow-lg",children:Qe.jsx(pg,{className:"w-6 h-6 text-white"})}),Qe.jsx("h1",{className:"md:text-4xl text-2xl font-bold bg-gradient-hero bg-clip-text text-transparent",children:"AI Stylist & Lifestyle Coach"})]}),Qe.jsx("p",{className:"text-muted-foreground md:text-lg text-base",children:"Upload nh  AI phn tch phong cch v gi  sn phm ph hp t cng ng"})]}),Qe.jsxs(DP,{className:"bg-gradient-card border-border",children:[Qe.jsx(LP,{children:Qe.jsxs(BP,{className:"flex items-center gap-2",children:[Qe.jsx(kg,{className:"w-6 h-6 text-primary"}),"Ti ln & Phn tch"]})}),Qe.jsxs(UP,{className:"space-y-6",children:[Qe.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:f.map(e=>Qe.jsx(AP,{variant:o===e.id?"default":"outline",className:"h-20 "+(o===e.id?"bg-gradient-primary":""),onClick:()=>l(e.id),children:Qe.jsxs("div",{className:"flex flex-col items-center gap-2",children:[Qe.jsx(e.icon,{className:"w-6 h-6"}),Qe.jsx("span",{className:"text-sm",children:e.name})]})},e.id))}),Qe.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-8 text-center hover:border-primary transition-smooth cursor-pointer group",children:[Qe.jsx("input",{type:"file",id:"image-upload",accept:"image/*",className:"hidden",onChange:t=>{var r;const i=null==(r=t.target.files)?void 0:r[0];if(i){const t=new FileReader;t.onloadend=()=>{n(t.result),e({title:"nh  c ti ln",description:"Click 'Phn tch AI'  bt u!"})},t.readAsDataURL(i)}}}),Qe.jsx("label",{htmlFor:"image-upload",className:"cursor-pointer",children:t?Qe.jsxs("div",{className:"space-y-4",children:[Qe.jsx("img",{src:t,alt:"Uploaded",className:"max-h-64 mx-auto rounded-lg"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Click  ti nh khc"})]}):Qe.jsxs("div",{className:"space-y-4",children:[Qe.jsx(df,{className:"w-16 h-16 mx-auto text-muted-foreground group-hover:text-primary transition-smooth"}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"text-lg font-medium",children:"Ko th nh hoc click  ti ln"}),Qe.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"H tr JPG, PNG, WEBP (Ti a 10MB)"})]})]})})]}),t&&Qe.jsx(AP,{size:"lg",className:"w-full bg-gradient-primary hover:opacity-90",onClick:async()=>{if(t)try{i(!0),s(!1);const n=await fetch("http://localhost:8000/api/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image_base64:t})}),r=await n.json();if(!(null==r?void 0:r.success))throw new Error((null==r?void 0:r.error)||"Phn tch tht bi");const a=r.analysis,l=(null==a?void 0:a.detectedStyle)||"Modern Minimalist",c=(null==a?void 0:a.colorPalette)||["#2C3E50","#ECF0F1","#95A5A6","#E74C3C"],u=(null==a?void 0:a.mood)||"Professional & Clean",p=(null==a?void 0:a.confidence)??90,m=Array.isArray(null==a?void 0:a.suggestions)?a.suggestions:["blazer","trousers","loafers","watch"];d({id:1,imageUrl:t,category:o,detectedStyle:l,colorPalette:c,mood:u,confidence:p,suggestions:m});const f=Array.isArray(null==a?void 0:a.products)?a.products.map((e,t)=>({id:Number(e.id??t+1),name:String(e.name??m[t]??`Sn phm ${t+1}`),price:Number(e.price??0),image:String(e.image??"/placeholder.svg"),matchScore:Number(e.matchScore??Math.max(75,95-3*t)),reason:String(e.reason??`Gi  theo phong cch ${l}`),category:String(e.category??o),rating:Number(e.rating??4.7),shop:String(e.shop??"AI Stylist")})):null;if(f&&f.length>0)h(f);else{const e=m.map((e,t)=>({id:t+1,name:e,price:0,image:"/placeholder.svg",matchScore:Math.max(75,95-3*t),reason:`Gi  theo phong cch ${l}`,category:o,rating:4.7,shop:"AI Stylist"}));h(e)}s(!0),e({title:" Phn tch hon tt!",description:`AI  pht hin phong cch: ${l}`})}catch(c$e){e({title:"Khng th phn tch",description:(null==c$e?void 0:c$e.message)||"Vui lng th li sau",variant:"destructive"})}finally{i(!1)}},disabled:r,children:r?Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(pg,{className:"w-5 h-5 mr-2 animate-spin"}),"ang phn tch..."]}):Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(zg,{className:"w-5 h-5 mr-2"}),"Phn tch AI"]})}),a&&c&&Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4 p-6 bg-card rounded-lg border border-primary/20",children:[Qe.jsxs("h3",{className:"text-xl font-semibold flex items-center gap-2",children:[Qe.jsx(pg,{className:"w-5 h-5 text-primary"}),"Kt qu phn tch"]}),Qe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Qe.jsxs("div",{children:[Qe.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Phong cch pht hin"}),Qe.jsx(EP,{className:"text-lg px-4 py-2",children:null==c?void 0:c.detectedStyle})]}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:" t tin"}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(bae,{value:(null==c?void 0:c.confidence)||0,className:"h-2"}),Qe.jsxs("p",{className:"text-sm font-medium",children:[null==c?void 0:c.confidence,"% ph hp"]})]})]})]}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Bng mu chnh"}),Qe.jsx("div",{className:"flex gap-2",children:((null==c?void 0:c.colorPalette)||[]).map((e,t)=>Qe.jsx("div",{className:"w-12 h-12 rounded-lg border-2 border-border",style:{backgroundColor:e},title:e},t))})]}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Mood/Vibe"}),Qe.jsx("p",{className:"text-lg font-medium",children:null==c?void 0:c.mood})]})]})]})]}),a&&u.length>0&&Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("h2",{className:"md:text-3xl text-2xl font-bold flex items-center gap-2",children:[Qe.jsx(yg,{className:"md:w-8 md:h-8 w-6 h-6 text-accent"}),"Gi  sn phm AI"]}),Qe.jsxs(EP,{className:"bg-primary/10 text-primary text-sm px-3 py-1",children:[u.length," sn phm"]})]}),Qe.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:u.map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1*t},children:Qe.jsx(DP,{className:"group hover-lift hover-glow",children:Qe.jsxs(UP,{className:"p-0",children:[Qe.jsxs("div",{className:"relative",children:[Qe.jsx("img",{src:e.image,alt:e.name,className:"w-full h-48 object-cover rounded-t-lg"}),Qe.jsxs(EP,{className:"absolute top-2 right-2 bg-primary",children:[e.matchScore,"% ph hp"]})]}),Qe.jsxs("div",{className:"p-4 space-y-3",children:[Qe.jsxs("div",{children:[Qe.jsx("h3",{className:"font-semibold text-sm mb-1 line-clamp-2",children:e.name}),Qe.jsx("p",{className:"text-xs text-muted-foreground",children:e.shop})]}),Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("span",{className:"text-lg font-bold text-primary",children:[e.price.toLocaleString("vi-VN"),""]}),Qe.jsxs(EP,{variant:"outline",className:"text-xs",children:[" ",e.rating]})]}),Qe.jsx("div",{className:"p-2 bg-accent/10 rounded-lg",children:Qe.jsxs("p",{className:"text-xs text-accent font-medium flex items-center gap-1",children:[Qe.jsx(pg,{className:"w-3 h-3"}),e.reason]})}),Qe.jsxs("div",{className:"flex gap-2",children:[Qe.jsxs(AP,{size:"sm",className:"flex-1",children:[Qe.jsx(cg,{className:"w-4 h-4 mr-1"}),"Thm"]}),Qe.jsx(AP,{size:"sm",variant:"outline",children:Qe.jsx(sf,{className:"w-4 h-4"})}),Qe.jsx(AP,{size:"sm",variant:"outline",children:Qe.jsx(Wf,{className:"w-4 h-4"})})]})]})]})})},e.id))})]}),Qe.jsxs("div",{className:"space-y-6",children:[Qe.jsx("div",{className:"flex items-center justify-between",children:Qe.jsxs("h2",{className:"md:text-3xl text-2xl font-bold flex items-center gap-2",children:[Qe.jsx(Og,{className:"md:w-8 md:h-8 w-6 h-6 text-primary"}),"Cm hng t cng ng"]})}),Qe.jsxs(tae,{defaultValue:"outfit",className:"w-full",children:[Qe.jsxs(nae,{className:"grid w-full md:grid-cols-4 grid-cols-2 mb-6",children:[Qe.jsxs(rae,{value:"outfit",className:"gap-2",children:[Qe.jsx(og,{className:"w-4 h-4"}),"Outfit"]}),Qe.jsxs(rae,{value:"home",className:"gap-2",children:[Qe.jsx(lf,{className:"w-4 h-4"}),"Home Decor"]}),Qe.jsxs(rae,{value:"workspace",className:"gap-2",children:[Qe.jsx(pf,{className:"w-4 h-4"}),"Workspace"]}),Qe.jsxs(rae,{value:"trending",className:"gap-2",children:[Qe.jsx(Sg,{className:"w-4 h-4"}),"Trending"]})]}),Qe.jsx(iae,{value:"outfit",className:"space-y-6",children:p.filter(e=>"outfit"===e.category).map(e=>Qe.jsx(DP,{className:"bg-gradient-card hover-lift",children:Qe.jsxs(UP,{className:"p-6",children:[Qe.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Qe.jsxs(AD,{className:"w-12 h-12",children:[Qe.jsx(MD,{src:e.user.avatar}),Qe.jsx(ED,{children:e.user.name[0]})]}),Qe.jsxs("div",{className:"flex-1",children:[Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx("h4",{className:"font-semibold",children:e.user.name}),e.user.verified&&Qe.jsx("div",{className:"w-4 h-4 bg-accent rounded-full flex items-center justify-center",children:Qe.jsx("span",{className:"text-xs",children:""})}),Qe.jsx(EP,{variant:"outline",className:"text-xs",children:e.detectedStyle})]}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:e.time})]})]}),Qe.jsx("p",{className:"mb-4",children:e.description}),Qe.jsx("img",{src:e.image,alt:"Community post",className:"w-full h-64 object-cover rounded-lg mb-4"}),Qe.jsxs("div",{className:"mb-4 space-y-2",children:[Qe.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Sn phm trong nh:"}),Qe.jsx("div",{className:"flex flex-wrap gap-2",children:e.products.map(e=>Qe.jsxs(EP,{variant:"secondary",className:"cursor-pointer hover:bg-primary hover:text-primary-foreground transition-smooth",children:[e.name," -"," ",e.price.toLocaleString("vi-VN"),""]},e.id))})]}),Qe.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.tags.map(e=>Qe.jsx(EP,{variant:"outline",className:"text-xs",children:e},e))}),Qe.jsx(ZR,{className:"my-4"}),Qe.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[Qe.jsxs("div",{className:"flex items-center justify-between sm:justify-start w-full",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsxs(AP,{variant:"ghost",size:"sm",className:"gap-2 hover:text-red-500",children:[Qe.jsx(bg,{className:"w-4 h-4"}),e.votes]}),Qe.jsxs(AP,{variant:"ghost",size:"sm",className:"gap-2 hover:text-white",children:[Qe.jsx(Cf,{className:"w-4 h-4"}),e.comments]}),Qe.jsx(AP,{variant:"ghost",size:"sm",className:"gap-2 hover:text-primary",children:Qe.jsx(ig,{className:"w-4 h-4"})})]}),Qe.jsxs("div",{className:"flex items-center gap-3 md:ml-4",children:[Qe.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[Qe.jsx(Vm,{className:"w-3 h-3"}),e.views]}),Qe.jsx(AP,{variant:"ghost",size:"sm",children:Qe.jsx(am,{className:"w-4 h-4"})})]})]}),Qe.jsxs(AP,{size:"sm",className:"bg-gradient-accent w-full sm:w-auto sm:self-end",children:[Qe.jsx(Jf,{className:"w-4 h-4 mr-1"}),"To li look ny"]})]})]})},e.id))}),Qe.jsx(iae,{value:"home",className:"space-y-6",children:p.filter(e=>"home"===e.category).map(e=>Qe.jsx(DP,{className:"bg-gradient-card hover-lift",children:Qe.jsxs(UP,{className:"p-6",children:[Qe.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Qe.jsxs(AD,{className:"w-12 h-12",children:[Qe.jsx(MD,{src:e.user.avatar}),Qe.jsx(ED,{children:e.user.name[0]})]}),Qe.jsxs("div",{className:"flex-1",children:[Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx("h4",{className:"font-semibold",children:e.user.name}),e.user.verified&&Qe.jsx("div",{className:"w-4 h-4 bg-accent rounded-full flex items-center justify-center",children:Qe.jsx("span",{className:"text-xs",children:""})}),Qe.jsx(EP,{variant:"outline",className:"text-xs",children:e.detectedStyle})]}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:e.time})]})]}),Qe.jsx("p",{className:"mb-4",children:e.description}),Qe.jsx("img",{src:e.image,alt:"Community post",className:"w-full h-64 object-cover rounded-lg mb-4"}),Qe.jsxs("div",{className:"mb-4 space-y-2",children:[Qe.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Sn phm trong nh:"}),Qe.jsx("div",{className:"flex flex-wrap gap-2",children:e.products.map(e=>Qe.jsxs(EP,{variant:"secondary",className:"cursor-pointer hover:bg-primary hover:text-primary-foreground transition-smooth",children:[e.name," -"," ",e.price.toLocaleString("vi-VN"),""]},e.id))})]}),Qe.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.tags.map(e=>Qe.jsx(EP,{variant:"outline",className:"text-xs",children:e},e))}),Qe.jsx(ZR,{className:"my-4"}),Qe.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[Qe.jsxs("div",{className:"flex items-center justify-between sm:justify-start w-full",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsxs(AP,{variant:"ghost",size:"sm",className:"gap-2 hover:text-red-500",children:[Qe.jsx(bg,{className:"w-4 h-4"}),e.votes]}),Qe.jsxs(AP,{variant:"ghost",size:"sm",className:"gap-2 hover:text-white",children:[Qe.jsx(Cf,{className:"w-4 h-4"}),e.comments]}),Qe.jsx(AP,{variant:"ghost",size:"sm",className:"gap-2 hover:text-primary",children:Qe.jsx(ig,{className:"w-4 h-4"})})]}),Qe.jsxs("div",{className:"flex items-center gap-3 md:ml-4",children:[Qe.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[Qe.jsx(Vm,{className:"w-3 h-3"}),e.views]}),Qe.jsx(AP,{variant:"ghost",size:"sm",children:Qe.jsx(am,{className:"w-4 h-4"})})]})]}),Qe.jsxs(AP,{size:"sm",className:"bg-gradient-accent w-full sm:w-auto sm:self-end",children:[Qe.jsx(Jf,{className:"w-4 h-4 mr-1"}),"To li look ny"]})]})]})},e.id))}),Qe.jsx(iae,{value:"workspace",className:"space-y-6",children:p.filter(e=>"workspace"===e.category).map(e=>Qe.jsx(DP,{className:"bg-gradient-card hover-lift",children:Qe.jsxs(UP,{className:"p-6",children:[Qe.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Qe.jsxs(AD,{className:"w-12 h-12",children:[Qe.jsx(MD,{src:e.user.avatar}),Qe.jsx(ED,{children:e.user.name[0]})]}),Qe.jsxs("div",{className:"flex-1",children:[Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx("h4",{className:"font-semibold",children:e.user.name}),e.user.verified&&Qe.jsx("div",{className:"w-4 h-4 bg-accent rounded-full flex items-center justify-center",children:Qe.jsx("span",{className:"text-xs",children:""})}),Qe.jsx(EP,{variant:"outline",className:"text-xs",children:e.detectedStyle})]}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:e.time})]})]}),Qe.jsx("p",{className:"mb-4",children:e.description}),Qe.jsx("img",{src:e.image,alt:"Community post",className:"w-full h-64 object-cover rounded-lg mb-4"}),Qe.jsxs("div",{className:"mb-4 space-y-2",children:[Qe.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Sn phm trong nh:"}),Qe.jsx("div",{className:"flex flex-wrap gap-2",children:e.products.map(e=>Qe.jsxs(EP,{variant:"secondary",className:"cursor-pointer hover:bg-primary hover:text-primary-foreground transition-smooth",children:[e.name," -"," ",e.price.toLocaleString("vi-VN"),""]},e.id))})]}),Qe.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:e.tags.map(e=>Qe.jsx(EP,{variant:"outline",className:"text-xs",children:e},e))}),Qe.jsx(ZR,{className:"my-4"}),Qe.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[Qe.jsxs("div",{className:"flex items-center justify-between sm:justify-start w-full",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsxs(AP,{variant:"ghost",size:"sm",className:"gap-2 hover:text-red-500",children:[Qe.jsx(bg,{className:"w-4 h-4"}),e.votes]}),Qe.jsxs(AP,{variant:"ghost",size:"sm",className:"gap-2 hover:text-white",children:[Qe.jsx(Cf,{className:"w-4 h-4"}),e.comments]}),Qe.jsx(AP,{variant:"ghost",size:"sm",className:"gap-2 hover:text-primary",children:Qe.jsx(ig,{className:"w-4 h-4"})})]}),Qe.jsxs("div",{className:"flex items-center gap-3 md:ml-4",children:[Qe.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[Qe.jsx(Vm,{className:"w-3 h-3"}),e.views]}),Qe.jsx(AP,{variant:"ghost",size:"sm",children:Qe.jsx(am,{className:"w-4 h-4"})})]})]}),Qe.jsxs(AP,{size:"sm",className:"bg-gradient-accent w-full sm:w-auto sm:self-end",children:[Qe.jsx(Jf,{className:"w-4 h-4 mr-1"}),"To li look ny"]})]})]})},e.id))}),Qe.jsx(iae,{value:"trending",children:Qe.jsxs("div",{className:"text-center py-12",children:[Qe.jsx(Sg,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),Qe.jsx("p",{className:"text-muted-foreground",children:"Trending posts from all categories coming soon!"})]})})]})]}),Qe.jsxs("div",{className:"space-y-6",children:[Qe.jsxs("h2",{className:"md:text-3xl text-2xl font-bold flex items-center gap-2",children:[Qe.jsx(Sg,{className:"md:w-8 md:h-8 w-6 h-6 text-accent"}),"Thng k phong cch"]}),Qe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[Qe.jsxs(DP,{className:"bg-gradient-card",children:[Qe.jsx(LP,{children:Qe.jsx(BP,{className:"text-lg",children:"Phong cch yu thch"})}),Qe.jsx(UP,{className:"space-y-4",children:m.favoriteStyles.map(e=>Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs("div",{className:"flex justify-between text-sm",children:[Qe.jsx("span",{children:e.name}),Qe.jsxs("span",{className:"text-muted-foreground",children:[e.percentage,"%"]})]}),Qe.jsx(bae,{value:e.percentage,className:"h-2"})]},e.name))})]}),Qe.jsxs(DP,{className:"bg-gradient-card",children:[Qe.jsx(LP,{children:Qe.jsx(BP,{className:"text-lg",children:"Mu sc a thch"})}),Qe.jsx(UP,{className:"space-y-3",children:m.colorPreferences.map(e=>Qe.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-accent/10 transition-smooth",children:[Qe.jsx("div",{className:"w-10 h-10 rounded-lg border-2 border-border",style:{backgroundColor:e.color}}),Qe.jsxs("div",{className:"flex-1",children:[Qe.jsx("p",{className:"font-medium",children:e.name}),Qe.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.count," ln s dng"]})]})]},e.color))})]}),Qe.jsxs(DP,{className:"bg-gradient-card",children:[Qe.jsx(LP,{children:Qe.jsx(BP,{className:"text-lg",children:"Danh mc quan tm"})}),Qe.jsx(UP,{className:"space-y-4",children:m.topCategories.map(e=>Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs("div",{className:"flex justify-between text-sm",children:[Qe.jsx("span",{children:e.name}),Qe.jsxs("span",{className:"text-muted-foreground",children:[e.engagement,"%"]})]}),Qe.jsx(bae,{value:e.engagement,className:"h-2"})]},e.name))})]})]})]})]})})})},ewe=()=>Qe.jsx("div",{className:"min-h-screen bg-background",children:Qe.jsx("main",{className:"container mx-auto px-4 py-8 pt-24",children:Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[Qe.jsxs("div",{className:"mb-8",children:[Qe.jsxs("h1",{className:"text-3xl font-bold text-foreground mb-2 flex items-center gap-2",children:[Qe.jsx(lm,{className:"w-8 h-8 text-primary"}),"AI Gi  & Bn b"]}),Qe.jsx("p",{className:"text-muted-foreground",children:"Khm ph sn phm c AI  xut v hot ng ca bn b"})]}),Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-8",children:[Qe.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Qe.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[Qe.jsx(pg,{className:"w-6 h-6 text-primary"}),"Gi  dnh ring cho bn"]}),Qe.jsx(EP,{variant:"secondary",className:"bg-primary/10 text-primary",children:"AI Powered"})]}),Qe.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[{id:1,name:"o thun Uniqlo Premium",price:299e3,originalPrice:399e3,image:"/placeholder.svg",rating:4.8,reason:"Da trn lch s mua hng thi trang ca bn",confidence:95,category:"Thi trang"},{id:2,name:"iPhone 15 Pro Max",price:2899e4,image:"/placeholder.svg",rating:4.9,reason:"Ph hp vi s thch cng ngh cao cp",confidence:88,category:"in t"},{id:3,name:"Giy Nike Air Max",price:2199e3,originalPrice:2599e3,image:"/placeholder.svg",rating:4.7,reason:"Bn b cng s thch  mua sn phm ny",confidence:92,category:"Giy dp"}].map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1*t},children:Qe.jsx(DP,{className:"group hover:shadow-lg transition-all duration-300 hover:-translate-y-1",children:Qe.jsxs(UP,{className:"p-0",children:[Qe.jsxs("div",{className:"relative",children:[Qe.jsx("img",{src:e.image,alt:e.name,className:"w-full h-48 object-cover rounded-t-lg"}),Qe.jsxs(EP,{className:"absolute top-2 right-2 bg-primary text-primary-foreground",children:[e.confidence,"% ph hp"]}),e.originalPrice&&Qe.jsx(EP,{variant:"destructive",className:"absolute top-2 left-2",children:"Gim gi"})]}),Qe.jsxs("div",{className:"p-4",children:[Qe.jsx("h3",{className:"font-semibold text-lg mb-2",children:e.name}),Qe.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Qe.jsxs("div",{className:"flex items-center",children:[Qe.jsx(fg,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),Qe.jsx("span",{className:"text-sm ml-1",children:e.rating})]}),Qe.jsx(EP,{variant:"outline",children:e.category})]}),Qe.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Qe.jsxs("span",{className:"text-xl font-bold text-primary",children:[e.price.toLocaleString("vi-VN")," "]}),e.originalPrice&&Qe.jsxs("span",{className:"text-sm line-through text-muted-foreground",children:[e.originalPrice.toLocaleString("vi-VN")," "]})]}),Qe.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:[Qe.jsx(lm,{className:"w-4 h-4 inline mr-1"}),e.reason]}),Qe.jsxs("div",{className:"flex gap-2",children:[Qe.jsxs(AP,{className:"flex-1",children:[Qe.jsx(cg,{className:"w-4 h-4 mr-1"}),"Thm vo gi"]}),Qe.jsx(AP,{variant:"outline",size:"icon",children:Qe.jsx(sf,{className:"w-4 h-4"})})]})]})]})})},e.id))})]}),Qe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Qe.jsx(QT.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},children:Qe.jsxs(DP,{children:[Qe.jsx(LP,{children:Qe.jsxs(BP,{className:"flex items-center gap-2",children:[Qe.jsx(Og,{className:"w-5 h-5"}),"Bn b c cng s thch"]})}),Qe.jsx(UP,{children:Qe.jsx("div",{className:"space-y-4",children:[{id:1,name:"Minh Anh",avatar:"/placeholder.svg",mutualFriends:15,recentPurchase:"Ti xch Chanel",isOnline:!0,sharedInterests:["Thi trang","Lm p"]},{id:2,name:"c Thnh",avatar:"/placeholder.svg",mutualFriends:8,recentPurchase:"Gaming laptop ASUS",isOnline:!1,sharedInterests:["Cng ngh","Gaming"]},{id:3,name:"Thu Hng",avatar:"/placeholder.svg",mutualFriends:23,recentPurchase:"Nc hoa Dior",isOnline:!0,sharedInterests:["Lm p","Du lch"]}].map(e=>Qe.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsxs("div",{className:"relative",children:[Qe.jsxs(AD,{children:[Qe.jsx(MD,{src:e.avatar}),Qe.jsx(ED,{children:e.name.charAt(0)})]}),e.isOnline&&Qe.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-background"})]}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"font-medium text-sm",children:e.name}),Qe.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.mutualFriends," bn chung"]}),Qe.jsxs("p",{className:"text-xs text-muted-foreground",children:["Mua gn y: ",e.recentPurchase]}),Qe.jsx("div",{className:"flex gap-1 mt-1",children:e.sharedInterests.map(e=>Qe.jsx(EP,{variant:"secondary",className:"text-xs",children:e},e))})]})]}),Qe.jsxs(AP,{size:"sm",variant:"outline",children:[Qe.jsx(Tg,{className:"w-4 h-4 mr-1"}),"Kt bn"]})]},e.id))})})]})}),Qe.jsx(QT.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},children:Qe.jsxs(DP,{children:[Qe.jsx(LP,{children:Qe.jsxs(BP,{className:"flex items-center gap-2",children:[Qe.jsx(ig,{className:"w-5 h-5"}),"Hot ng ca bn b"]})}),Qe.jsxs(UP,{children:[Qe.jsx("div",{className:"space-y-4",children:[{id:1,friend:"Minh Anh",avatar:"/placeholder.svg",action:" thch",item:"Vy midi hoa nh",time:"2 gi trc",itemImage:"/placeholder.svg"},{id:2,friend:"c Thnh",avatar:"/placeholder.svg",action:" mua",item:"Tai nghe Sony WH-1000XM5",time:"5 gi trc",itemImage:"/placeholder.svg"},{id:3,friend:"Thu Hng",avatar:"/placeholder.svg",action:" nh gi 5 sao",item:"Kem dng Cetaphil",time:"1 ngy trc",itemImage:"/placeholder.svg"}].map(e=>Qe.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border",children:[Qe.jsxs(AD,{className:"w-8 h-8",children:[Qe.jsx(MD,{src:e.avatar}),Qe.jsx(ED,{children:e.friend.charAt(0)})]}),Qe.jsxs("div",{className:"flex-1",children:[Qe.jsxs("p",{className:"text-sm",children:[Qe.jsx("span",{className:"font-medium",children:e.friend})," ",Qe.jsx("span",{className:"text-muted-foreground",children:e.action})," ",Qe.jsx("span",{className:"font-medium",children:e.item})]}),Qe.jsx("p",{className:"text-xs text-muted-foreground",children:e.time})]}),Qe.jsx("img",{src:e.itemImage,alt:e.item,className:"w-10 h-10 rounded object-cover"})]},e.id))}),Qe.jsx(AP,{variant:"outline",className:"w-full mt-4",children:"Xem thm hot ng"})]})]})})]})]})})}),twe=()=>{const e=Zj(),[t,n]=Ve.useState(!0),[r,i]=Ve.useState("month"),a=Ve.useRef(null),{scrollYProgress:s}=bP({target:a,offset:["start start","end start"]}),o=jP(s,[0,1],[0,-50]),l=jP(s,[0,.5],[1,0]),c=850,d=1e3,u=12e5,h=[{label:"Chi tiu thng ny",value:u,change:"+15%",trend:"up",icon:lg,color:"text-blue-500"},{label:"Tit kim",value:18e4,change:"+8%",trend:"up",icon:Sg,color:"text-green-500"},{label:"Giao dch",value:"24",change:"+12%",trend:"up",icon:pm,color:"text-orange-500"},{label:"im tch ly",value:c,change:"+25%",trend:"up",icon:fg,color:"text-amber-500"}],p=e=>{switch(e){case"purchase":return"from-red-500 to-orange-500";case"topup":return"from-green-500 to-emerald-500";case"reward":return"from-purple-500 to-pink-500";case"refund":return"from-blue-500 to-cyan-500";default:return"from-gray-500 to-gray-600"}};return Qe.jsxs("div",{className:"min-h-screen bg-background",children:[Qe.jsxs("div",{className:"fixed inset-0 -z-10",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background via-primary/5 to-background"}),Qe.jsx(QT.div,{className:"absolute inset-0 bg-gradient-to-br from-primary via-purple-600 to-primary opacity-10 blur-3xl",animate:{scale:[1,1.2,1],opacity:[.05,.15,.05]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),Qe.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(var(--primary),0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(var(--primary),0.03)_1px,transparent_1px)] bg-[size:64px_64px]"})]}),Qe.jsx("main",{className:"container mx-auto px-4 py-8",children:Qe.jsxs(QT.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-8",children:[Qe.jsx(QT.div,{ref:a,initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{y:o,opacity:l},className:"space-y-3",children:Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx(QT.div,{whileHover:{rotate:360,scale:1.1},transition:{duration:.6},className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-primary to-purple-600 flex items-center justify-center shadow-xl shadow-primary/30",children:Qe.jsx(Lg,{className:"w-7 h-7 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx("h1",{className:"md:text-4xl text-2xl font-bold bg-gradient-to-r from-primary via-purple-600 to-primary bg-clip-text text-transparent",children:"V in t"}),Qe.jsx("p",{className:"text-muted-foreground md:text-base text-sm",children:"Qun l ti chnh thng minh"})]})]})}),Qe.jsx(QT.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1},children:Qe.jsxs(DP,{className:"relative overflow-hidden border-border/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-xl shadow-2xl",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 via-purple-600/10 to-primary/10"}),Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary via-purple-600 to-primary"}),Qe.jsx(QT.div,{className:"absolute -top-20 -right-20 w-64 h-64 bg-gradient-to-br from-primary/30 to-purple-600/30 rounded-full blur-3xl",animate:{scale:[1,1.2,1],opacity:[.3,.5,.3]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}}),Qe.jsxs(UP,{className:"relative p-8",children:[Qe.jsxs("div",{className:"flex items-start justify-between mb-8",children:[Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsxs(EP,{className:"bg-gradient-to-r from-primary to-purple-600 text-white border-0 shadow-lg",children:[Qe.jsx(tm,{className:"w-3 h-3 mr-1"}),"VIP Member"]}),Qe.jsxs(EP,{variant:"outline",className:"backdrop-blur-sm",children:[Qe.jsx(pg,{className:"w-3 h-3 mr-1"}),"Verified"]})]}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"S d kh dng"}),Qe.jsxs("div",{className:"flex items-center gap-3",children:[t?Qe.jsxs("h2",{className:"text-5xl font-bold bg-gradient-to-r from-primary via-purple-600 to-primary bg-clip-text text-transparent",children:[245e4.toLocaleString("vi-VN"),""]}):Qe.jsx("h2",{className:"text-5xl font-bold text-muted-foreground",children:""}),Qe.jsx(AP,{variant:"ghost",size:"icon",onClick:()=>n(!t),className:"hover:bg-primary/10",children:t?Qe.jsx(Hm,{className:"w-5 h-5"}):Qe.jsx(Vm,{className:"w-5 h-5"})})]})]}),Qe.jsx(QT.div,{whileHover:{rotate:360},transition:{duration:.6},className:"p-4 rounded-2xl bg-gradient-to-br from-primary to-purple-600 shadow-xl",children:Qe.jsx(Dg,{className:"w-8 h-8 text-white"})})]}),Qe.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[Qe.jsx(QT.div,{whileHover:{scale:1.02},children:Qe.jsxs(AP,{size:"lg",className:"w-full bg-gradient-to-r from-primary to-purple-600 hover:opacity-90 shadow-lg",children:[Qe.jsx(Wf,{className:"w-5 h-5 mr-2"}),"Np tin"]})}),Qe.jsx(QT.div,{whileHover:{scale:1.02},children:Qe.jsxs(AP,{size:"lg",variant:"outline",className:"w-full border-2 hover:border-primary hover:bg-primary/5",children:[Qe.jsx(em,{className:"w-5 h-5 mr-2"}),"Rt tin"]})})]}),Qe.jsx("div",{className:"grid grid-cols-3 gap-4 pt-6 border-t border-border/50",children:[{label:"Chi thng ny",value:1.2.toFixed(1)+"M",icon:_g},{label:"Giao dch",value:"24",icon:pm},{label:"im thng",value:c,icon:fg}].map((e,t)=>Qe.jsxs(QT.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2+.1*t},className:"text-center",children:[Qe.jsx("div",{className:"flex justify-center mb-2",children:Qe.jsx(e.icon,{className:"w-5 h-5 text-primary"})}),Qe.jsx("p",{className:"text-2xl font-bold",children:e.value}),Qe.jsx("p",{className:"text-xs text-muted-foreground",children:e.label})]},t))})]})]})}),Qe.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:h.map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2+.1*t},whileHover:{scale:1.05,y:-5},children:Qe.jsxs(DP,{className:"relative overflow-hidden border-border/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm hover:shadow-xl hover:shadow-primary/10 transition-all duration-500",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent opacity-0 hover:opacity-100 transition-opacity"}),Qe.jsxs(UP,{className:"p-6 relative",children:[Qe.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Qe.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br "+("up"===e.trend?"from-green-500/20 to-emerald-500/20":"from-red-500/20 to-orange-500/20"),children:Qe.jsx(e.icon,{className:`w-5 h-5 ${e.color}`})}),Qe.jsx(EP,{variant:"up"===e.trend?"default":"secondary",className:"up"===e.trend?"bg-green-500/20 text-green-600":"",children:e.change})]}),Qe.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:e.label}),Qe.jsx("p",{className:"text-2xl font-bold",children:"number"==typeof e.value?e.value.toLocaleString("vi-VN"):e.value})]})]})},t))}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:Qe.jsxs(DP,{className:"relative overflow-hidden border-border/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm",children:[Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-amber-500 via-orange-500 to-amber-500"}),Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500/5 to-orange-500/5"}),Qe.jsx(UP,{className:"p-8 relative",children:Qe.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-6",children:[Qe.jsxs("div",{className:"flex-1 space-y-4",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx(QT.div,{animate:{rotate:[0,360]},transition:{duration:3,repeat:1/0,ease:"linear"},className:"p-3 rounded-xl bg-gradient-to-br from-amber-500 to-orange-500 shadow-lg",children:Qe.jsx(fg,{className:"w-6 h-6 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx("h3",{className:"text-2xl font-bold",children:"im thng ca bn"}),Qe.jsx("p",{className:"text-muted-foreground text-sm",children:"Tch ly v i qu hp dn"})]})]}),Qe.jsxs("div",{className:"flex items-baseline gap-2",children:[Qe.jsx("span",{className:"text-5xl font-bold bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent",children:c}),Qe.jsx("span",{className:"text-2xl text-muted-foreground",children:"im"})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs("div",{className:"flex justify-between text-sm",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"n phn thng tip theo"}),Qe.jsxs("span",{className:"font-semibold",children:[c,"/",d," im"]})]}),Qe.jsx(bae,{value:c/d*100,className:"h-3"}),Qe.jsxs("p",{className:"text-xs text-muted-foreground",children:["Cn ",d-c," im na  nhn qu"]})]})]}),Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(AP,{size:"lg",onClick:()=>e("/rewards"),className:"bg-gradient-to-r from-amber-500 to-orange-500 hover:opacity-90 shadow-xl px-8",children:[Qe.jsx(Zm,{className:"w-5 h-5 mr-2"}),"i thng ngay",Qe.jsx(pg,{className:"w-5 h-5 ml-2"})]})})]})})]})}),Qe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[Qe.jsx(QT.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},className:"lg:col-span-2",children:Qe.jsxs(DP,{className:"border-border/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm",children:[Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary via-purple-600 to-primary"}),Qe.jsx(LP,{children:Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs(BP,{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-primary to-purple-600 shadow-lg",children:Qe.jsx(of,{className:"w-5 h-5 text-white"})}),"Lch s giao dch"]}),Qe.jsxs("div",{className:"flex gap-2",children:[Qe.jsxs(AP,{variant:"outline",size:"sm",children:[Qe.jsx(Km,{className:"w-4 h-4 mr-2"}),"Lc"]}),Qe.jsxs(AP,{variant:"outline",size:"sm",children:[Qe.jsx(Bm,{className:"w-4 h-4 mr-2"}),"Xut"]})]})]})}),Qe.jsx(UP,{className:"space-y-3",children:[{id:1,type:"purchase",amount:-15e4,description:"Mua o thun Basic Tee",date:"2024-01-15",time:"14:30",points:15,status:"completed",category:"fashion"},{id:2,type:"topup",amount:5e5,description:"Np tin t Vietcombank",date:"2024-01-14",time:"09:15",points:0,status:"completed",category:"wallet"},{id:3,type:"reward",amount:5e4,description:"Phn thng sinh nht",date:"2024-01-10",time:"00:00",points:50,status:"completed",category:"reward"},{id:4,type:"purchase",amount:-25e4,description:"Mua giy sneaker Nike",date:"2024-01-08",time:"16:45",points:25,status:"completed",category:"fashion"},{id:5,type:"refund",amount:8e4,description:"Hon tin n hng #1234",date:"2024-01-05",time:"11:20",points:0,status:"completed",category:"refund"}].map((e,t)=>{const n=(e=>{switch(e){case"purchase":return lg;case"topup":return Yp;case"reward":return Zm;case"refund":return em;default:return Rm}})(e.type);return Qe.jsx(QT.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5+.1*t},whileHover:{scale:1.02,x:4},className:"group",children:Qe.jsx(DP,{className:"border-border/50 bg-gradient-to-br from-background/50 to-card/30 hover:shadow-lg transition-all cursor-pointer",children:Qe.jsx(UP,{className:"p-4",children:Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[Qe.jsx(QT.div,{whileHover:{rotate:360},transition:{duration:.6},className:`p-3 rounded-xl bg-gradient-to-br ${p(e.type)} shadow-lg`,children:Qe.jsx(n,{className:"w-5 h-5 text-white"})}),Qe.jsxs("div",{className:"flex-1",children:[Qe.jsx("p",{className:"font-semibold mb-1 group-hover:text-primary transition-colors",children:e.description}),Qe.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[Qe.jsxs("span",{className:"flex items-center gap-1",children:[Qe.jsx(um,{className:"w-3 h-3"}),e.date]}),Qe.jsxs("span",{className:"flex items-center gap-1",children:[Qe.jsx(Em,{className:"w-3 h-3"}),e.time]}),Qe.jsx(EP,{variant:"secondary",className:"text-xs",children:e.status})]})]})]}),Qe.jsxs("div",{className:"text-right",children:[Qe.jsxs("p",{className:"text-xl font-bold mb-1 "+(e.amount>0?"text-green-600":"text-red-600"),children:[e.amount>0?"+":"",e.amount.toLocaleString("vi-VN"),""]}),e.points>0&&Qe.jsxs(EP,{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white border-0",children:[Qe.jsx(fg,{className:"w-3 h-3 mr-1"}),"+",e.points]})]})]})})})},e.id)})})]})}),Qe.jsx(QT.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.5},children:Qe.jsxs(DP,{className:"border-border/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm sticky top-24",children:[Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-amber-500 via-orange-500 to-amber-500"}),Qe.jsx(LP,{children:Qe.jsxs(BP,{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-amber-500 to-orange-500 shadow-lg",children:Qe.jsx(Zm,{className:"w-5 h-5 text-white"})}),"i thng"]})}),Qe.jsx(UP,{className:"space-y-3 max-h-[600px] overflow-y-auto",children:[{id:1,title:"Gim 10%",points:100,description:"Cho n hng t 500K",icon:"discount",color:"from-blue-500 to-cyan-500",available:!0},{id:2,title:"Min ph ship",points:50,description:"p dng ton quc",icon:"shipping",color:"from-green-500 to-emerald-500",available:!0},{id:3,title:"Gim 50K",points:200,description:"Cho n hng t 1M",icon:"voucher",color:"from-orange-500 to-red-500",available:!0},{id:4,title:"Qu tng VIP",points:500,description:"Ti canvas cao cp",icon:"gift",color:"from-purple-500 to-pink-500",available:!0},{id:5,title:"Tng 100K",points:1e3,description:"Voucher mua sm",icon:"cash",color:"from-primary to-purple-600",available:!1}].map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.6+.1*t},whileHover:{scale:1.05,y:-2},children:Qe.jsx(DP,{className:"border-border/50 bg-gradient-to-br from-background/50 to-card/30 hover:shadow-lg transition-all cursor-pointer "+(e.available?"":"opacity-50"),children:Qe.jsxs(UP,{className:"p-4",children:[Qe.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[Qe.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${e.color} shadow-lg`,children:Qe.jsx(zg,{className:"w-5 h-5 text-white"})}),Qe.jsxs("div",{className:"flex-1",children:[Qe.jsx("h4",{className:"font-bold text-lg",children:e.title}),Qe.jsx("p",{className:"text-xs text-muted-foreground",children:e.description})]})]}),Qe.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-border/50",children:[Qe.jsxs(EP,{className:`bg-gradient-to-r ${e.color} text-white border-0 shadow-md`,children:[Qe.jsx(Pm,{className:"w-3 h-3 mr-1"}),e.points," im"]}),Qe.jsx(AP,{size:"sm",disabled:!e.available||c<e.points,className:e.available&&c>=e.points?`bg-gradient-to-r ${e.color} hover:opacity-90`:"",children:e.available?"i ngay":"Sp c"})]})]})})},e.id))})]})})]})]})})]})},nwe=[{id:"1",title:"L hi mua sm 12.12",description:"Siu sale cui nm vi hng triu deal hp dn, c hi nhn voucher khng v qu tng c quyn.",fullDescription:"Siu sale cui nm vi hng triu deal hp dn, c hi nhn voucher khng v qu tng c quyn.",date:"2025-12-12",time:"08:00 - 21:00",location:"Online & Ton quc",category:"Gim n 70%",image:"https://dienmaythiennamhoa.vn/static/images/Cover%20Zalo%20LHMS-01-01.jpg",price:"Min ph",attendees:25e3,organizer:{name:"VibeMarket",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100",description:"T chc s kin l hi hng u Vit Nam"},agenda:[{time:"08:00 - 09:00",title:"Khai mc & Check-in",description:"Check-in online, nhn m u i u ngy"},{time:"09:00 - 12:00",title:"M bn deal sc",description:"Sn deal gii hn, voucher gim gi cc su"},{time:"12:00 - 14:00",title:"Livestream cng KOLs",description:"Giao lu, minigame, nhn qu tng"},{time:"15:00 - 18:00",title:"Flash Sale gi vng",description:"Deal chp nhong, gi sc mi gi"},{time:"19:00 - 20:00",title:"Bc thm trng thng",description:"Cng b ngi thng gii, trao qu tng"},{time:"20:00 - 21:00",title:"B mc & tng kt",description:"Tng kt s kin, cm n khch hng"}],gallery:["https://images.unsplash.com/photo-1505373877841-8d25f7d46678?w=800","https://images.unsplash.com/photo-1475721027785-f74eccf877e2?w=800","https://images.unsplash.com/photo-1591115765373-5207764f72e7?w=800"],reviews:[{id:"1",user:"Nguyn Vn A",avatar:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=50",rating:5,comment:"S kin tuyt vi! Hc c rt nhiu iu mi.",date:"2024-09-20"},{id:"2",user:"Trn Th B",avatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=50",rating:4,comment:"Ni dung cht lng, t chc tt.",date:"2024-09-18"}],locationMap:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3724.0969439132675!2d105.8019274!3d21.0285582!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3135ab86cece9ac5%3A0x8a3daa2a04e9e8e2!2zVHJ1bmcgdMOibSBI4buZaSBuZ2jhu4sgUXXhu5FjIGdpYQ!5e0!3m2!1svi!2s!4v1234567890123!5m2!1svi!2s"},{id:"2",title:"Festival Local Brand 2024",description:"Tn vinh v qung b cc thng hiu Vit Nam, tri nghim sn phm mi v nhn u i c quyn.",fullDescription:"S kin quy t cc local brand ni bt, trnh din BST mi, workshop, giao lu cng KOLs v nhn u i c quyn.",date:"2024-06-20",time:"09:00 - 18:00",location:"TP.HCM, H Ni,  Nng",category:"u i c quyn",image:"https://ik.imagekit.io/goodid/gnfi/uploads/articles/large-local-brand-festival-2024-ajang-mahasiswa-binus-memperkenalkan-inovasi-produk-UaNZb1M0rA.jpg?tr=w-730,h-486,fo-center",price:"300.000 VN",attendees:15e3,organizer:{name:"Local Brand Community",avatar:"https://randomuser.me/api/portraits/men/32.jpg",description:"Cng ng local brand ln nht Vit Nam"},agenda:[{time:"09:00 - 10:00",title:"Khai mc & check-in",description:"n khch, check-in nhn qu"},{time:"10:00 - 12:00",title:"Workshop Local Brand",description:"Chia s kinh nghim xy dng thng hiu"},{time:"14:00 - 16:00",title:"Trnh din BST mi",description:"Show thi trang cc local brand ni bt"},{time:"16:00 - 17:00",title:"Giao lu cng KOLs",description:"Giao lu, chp nh cng khch mi ni ting"},{time:"17:00 - 18:00",title:"Bc thm & b mc",description:"Bc thm trng thng, tng kt s kin"}],gallery:["https://images.unsplash.com/photo-1506744038136-46273834b3fb?w=800","https://images.unsplash.com/photo-1519125323398-675f0ddb6308?w=800","https://images.unsplash.com/photo-1465101046530-73398c7f28ca?w=800"],reviews:[{id:"1",user:"L Th Hoa",avatar:"https://randomuser.me/api/portraits/women/44.jpg",rating:5,comment:"Khng kh rt si ng, nhiu u i hp dn!",date:"2024-06-21"},{id:"2",user:"Nguyn Minh Tun",avatar:"https://randomuser.me/api/portraits/men/45.jpg",rating:4,comment:"Nhiu thng hiu mi, tri nghim tuyt vi.",date:"2024-06-21"}],locationMap:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3919.123456789!2d106.7000000!3d10.7765300!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31752f1b1b1b1b1b%3A0x123456789abcdef!2zQ8O0bmcgdmnDqm4gTG9jYWwgQnJhbmQ!5e0!3m2!1svi!2s!4v1234567890123!5m2!1svi!2s"}],rwe=()=>{const{id:e}=eN(),t=Zj(),n=nwe.find(t=>t.id===e),[r,i]=Ve.useState(!1),[a,s]=Ve.useState({name:"",email:"",phone:""});if(!n)return Qe.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:Qe.jsxs("div",{className:"text-center",children:[Qe.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Khng tm thy s kin"}),Qe.jsx(AP,{onClick:()=>t("/"),children:"Quay v trang ch"})]})});const o=nwe.filter(e=>e.category===n.category&&e.id!==n.id).slice(0,3);return Qe.jsxs("div",{className:"min-h-screen bg-background",children:[Qe.jsxs(QT.div,{initial:{opacity:0},animate:{opacity:1},className:"relative h-[500px] overflow-hidden",children:[Qe.jsx("img",{src:n.image,alt:n.title,className:"w-full h-full object-cover"}),Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/60 to-transparent"}),Qe.jsxs("div",{className:"absolute top-8 left-8 right-8 flex justify-between items-start",children:[Qe.jsx(AP,{variant:"secondary",size:"icon",onClick:()=>t(-1),className:"backdrop-blur-sm",children:Qe.jsx(Zp,{className:"h-5 w-5"})}),Qe.jsxs("div",{className:"flex gap-2",children:[Qe.jsx(AP,{variant:"secondary",size:"icon",onClick:()=>{i(!r),gh({title:r?" b yu thch":" thm vo yu thch"})},className:"backdrop-blur-sm",children:Qe.jsx(sf,{className:"h-5 w-5 "+(r?"fill-primary text-primary":"")})}),Qe.jsx(AP,{variant:"secondary",size:"icon",onClick:()=>{gh({title:" sao chp link!",description:"Link s kin  c copy vo clipboard"})},className:"backdrop-blur-sm",children:Qe.jsx(ig,{className:"h-5 w-5"})})]})]}),Qe.jsx("div",{className:"absolute bottom-8 md:left-8 right-8",children:Qe.jsxs("div",{className:"container mx-auto",children:[Qe.jsx(EP,{className:"mb-4",children:n.category}),Qe.jsx("h1",{className:"md:text-5xl text-4xl font-bold text-white mb-4",children:n.title})]})})]}),Qe.jsx("div",{className:"container mx-auto px-4 py-12",children:Qe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[Qe.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[Qe.jsxs(QT.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[Qe.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-3",children:[Qe.jsx(Bf,{className:"w-6 h-6 text-primary"}),"V s kin"]}),Qe.jsx("p",{className:"text-muted-foreground leading-relaxed",children:n.fullDescription||n.description})]}),n.organizer&&Qe.jsxs(QT.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[Qe.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-3",children:[Qe.jsx(Og,{className:"w-6 h-6 text-primary"}),"Ban t chc"]}),Qe.jsx(DP,{className:"p-6",children:Qe.jsxs("div",{className:"flex items-center gap-4",children:[Qe.jsx(AD,{className:"h-16 w-16",children:Qe.jsx("img",{src:n.organizer.avatar,alt:n.organizer.name})}),Qe.jsxs("div",{children:[Qe.jsx("h3",{className:"font-bold text-lg",children:n.organizer.name}),Qe.jsx("p",{className:"text-muted-foreground",children:n.organizer.description})]})]})})]}),n.agenda&&n.agenda.length>0&&Qe.jsxs(QT.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[Qe.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-3",children:[Qe.jsx(Em,{className:"w-6 h-6 text-primary"}),"Lch trnh"]}),Qe.jsx(DP,{className:"p-6",children:Qe.jsx("div",{className:"space-y-6",children:n.agenda.map((e,t)=>Qe.jsxs("div",{className:"flex gap-4",children:[Qe.jsx("div",{className:"flex-shrink-0 w-24 text-primary font-semibold",children:e.time}),Qe.jsxs("div",{className:"flex-1",children:[Qe.jsx("h4",{className:"font-bold mb-1",children:e.title}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]})]},t))})})]}),n.gallery&&n.gallery.length>0&&Qe.jsxs(QT.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[Qe.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-3",children:[Qe.jsx(Xm,{className:"w-6 h-6 text-primary"}),"Hnh nh"]}),Qe.jsx("div",{className:"grid grid-cols-3 gap-4",children:n.gallery.map((e,t)=>Qe.jsx(QT.img,{src:e,alt:`Gallery ${t+1}`,className:"w-full h-48 object-cover rounded-lg cursor-pointer hover:scale-105 transition-transform",whileHover:{scale:1.05}},t))})]}),n.locationMap&&Qe.jsxs(QT.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[Qe.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-3",children:[Qe.jsx(jf,{className:"w-6 h-6 text-primary"}),"a im"]}),Qe.jsx("div",{className:"rounded-lg overflow-hidden h-[400px]",children:Qe.jsx("iframe",{src:n.locationMap,width:"100%",height:"100%",style:{border:0},allowFullScreen:!0,loading:"lazy"})})]}),n.reviews&&n.reviews.length>0&&Qe.jsxs(QT.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:[Qe.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-3",children:[Qe.jsx(Mf,{className:"w-6 h-6 text-primary"}),"nh gi"]}),Qe.jsx("div",{className:"space-y-4",children:n.reviews.map(e=>Qe.jsx(DP,{className:"p-6",children:Qe.jsxs("div",{className:"flex items-start gap-4",children:[Qe.jsx(AD,{children:Qe.jsx("img",{src:e.avatar,alt:e.user})}),Qe.jsxs("div",{className:"flex-1",children:[Qe.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Qe.jsx("h4",{className:"font-bold",children:e.user}),Qe.jsx("span",{className:"text-sm text-muted-foreground",children:e.date})]}),Qe.jsx("div",{className:"flex gap-1 mb-2",children:[...Array(5)].map((t,n)=>Qe.jsx(fg,{className:"h-4 w-4 "+(n<e.rating?"fill-primary text-primary":"text-muted")},n))}),Qe.jsx("p",{className:"text-muted-foreground",children:e.comment})]})]})},e.id))})]})]}),Qe.jsx("div",{className:"space-y-6",children:Qe.jsxs(QT.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"sticky top-8",children:[Qe.jsxs(DP,{className:"p-6 space-y-4",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx(um,{className:"h-5 w-5 text-primary"}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Ngy"}),Qe.jsx("p",{className:"font-semibold",children:new Date(n.date).toLocaleDateString("vi-VN")})]})]}),Qe.jsx(ZR,{}),Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx(Em,{className:"h-5 w-5 text-primary"}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Thi gian"}),Qe.jsx("p",{className:"font-semibold",children:n.time})]})]}),Qe.jsx(ZR,{}),Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx(jf,{className:"h-5 w-5 text-primary"}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"a im"}),Qe.jsx("p",{className:"font-semibold",children:n.location})]})]}),Qe.jsx(ZR,{}),Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx(Og,{className:"h-5 w-5 text-primary"}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Ngi tham gia"}),Qe.jsxs("p",{className:"font-semibold",children:[n.attendees," ngi"]})]})]}),Qe.jsx(ZR,{}),Qe.jsxs("div",{className:"pt-2",children:[Qe.jsx("p",{className:"text-2xl font-bold text-primary mb-4",children:n.price}),Qe.jsxs("form",{onSubmit:e=>{e.preventDefault(),gh({title:"ng k thnh cng!",description:"Chng ti s gi xc nhn qua email"}),s({name:"",email:"",phone:""})},className:"space-y-3",children:[Qe.jsx("div",{children:Qe.jsx("input",{type:"text",placeholder:"H v tn",value:a.name,onChange:e=>s({...a,name:e.target.value}),className:"w-full px-4 py-2 rounded-md border bg-background",required:!0})}),Qe.jsx("div",{children:Qe.jsx("input",{type:"email",placeholder:"Email",value:a.email,onChange:e=>s({...a,email:e.target.value}),className:"w-full px-4 py-2 rounded-md border bg-background",required:!0})}),Qe.jsx("div",{children:Qe.jsx("input",{type:"tel",placeholder:"S in thoi",value:a.phone,onChange:e=>s({...a,phone:e.target.value}),className:"w-full px-4 py-2 rounded-md border bg-background",required:!0})}),Qe.jsx(AP,{type:"submit",className:"w-full",size:"lg",children:"ng k ngay"})]})]})]}),o.length>0&&Qe.jsxs(DP,{className:"p-6 mt-6",children:[Qe.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-3",children:[Qe.jsx(dm,{className:"w-5 h-5 text-primary"}),"S kin lin quan"]}),Qe.jsx("div",{className:"space-y-4",children:o.map(e=>Qe.jsx(AN,{to:`/event/${e.id}`,children:Qe.jsxs("div",{className:"flex gap-3 hover:bg-accent/50 p-2 rounded-lg transition-colors cursor-pointer",children:[Qe.jsx("img",{src:e.image,alt:e.title,className:"w-20 h-20 object-cover rounded-md"}),Qe.jsxs("div",{className:"flex-1",children:[Qe.jsx("h4",{className:"font-semibold text-sm line-clamp-2 mb-1",children:e.title}),Qe.jsx("p",{className:"text-xs text-muted-foreground",children:e.date})]})]})},e.id))})]})]})})]})})]})},iwe=()=>{const[e]=ON(),{zaloLogin:t}=Pae(),n=Zj(),[r,i]=Ve.useState(!0),[a,s]=Ve.useState("");return Ve.useEffect(()=>{const r=e.get("code");r?t(r).then(e=>{n(e?"/":"/login")}):n("/login")},[]),Qe.jsxs("div",{className:"flex min-h-[100vh] items-center justify-center",children:[r&&Qe.jsx("div",{className:"flex items-center justify-center min-h-screen",children:Qe.jsxs("div",{className:"flex flex-col items-center",children:[Qe.jsxs("div",{className:"relative w-20 h-20",children:[Qe.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Qe.jsx("img",{src:"/images/icons/zalo.png",alt:"Logo",className:"w-10 h-10"})}),Qe.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-gray-300 border-t-transparent animate-spin"})]}),Qe.jsx("span",{className:"mt-4 text-sm text-gray-500 animate-pulse",children:"ang xc thc vi Zalo..."})]})}),!r&&a&&Qe.jsxs("div",{className:"flex flex-col items-center",children:[Qe.jsx("div",{className:"mb-4 p-4 bg-error-50 text-error-700 rounded-lg text-sm",children:a}),Qe.jsx("button",{onClick:()=>n("/login",{replace:!0}),className:"mt-4 px-4 py-2 bg-primary-600 text-white rounded-lg",children:"Th li"})]})]})},awe=()=>{const[e]=ON(),{googleLogin:t}=Pae(),n=Zj(),[r,i]=Ve.useState(""),[a,s]=Ve.useState(!0);return Ve.useEffect(()=>{const r=e.get("code");r?t(r,"code").then(e=>{n(e?"/":"/login")}):n("/login")},[]),Qe.jsxs("div",{className:"flex min-h-[100vh] items-center justify-center",children:[a&&Qe.jsx("div",{className:"flex items-center justify-center min-h-screen",children:Qe.jsxs("div",{className:"flex flex-col items-center",children:[Qe.jsxs("div",{className:"relative w-20 h-20",children:[Qe.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Qe.jsx("img",{src:"/images/icons/google.png",alt:"Logo",className:"w-10 h-10"})}),Qe.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-gray-300 border-t-transparent animate-spin"})]}),Qe.jsx("span",{className:"mt-4 text-sm text-gray-500 animate-pulse",children:"ang xc thc vi Google..."})]})}),!a&&r&&Qe.jsxs("div",{className:"flex flex-col items-center",children:[Qe.jsx("div",{className:"mb-4 p-4 bg-error-50 text-error-700 rounded-lg text-sm",children:r}),Qe.jsx("button",{onClick:()=>n("/login",{replace:!0}),className:"mt-4 px-4 py-2 bg-primary-600 text-white rounded-lg",children:"Th li"})]})]})},swe=()=>{const[e]=ON(),{facebookLogin:t}=Pae(),n=Zj(),[r,i]=Ve.useState(""),[a,s]=Ve.useState(!0);return Ve.useEffect(()=>{const r=e.get("code");r?t(r).then(e=>{n(e?"/":"/login")}):(i("Khng nhn c m xc thc t Facebook"),s(!1))},[]),Qe.jsxs("div",{className:"flex min-h-[100vh] items-center justify-center",children:[a&&Qe.jsx("div",{className:"flex items-center justify-center min-h-screen",children:Qe.jsxs("div",{className:"flex flex-col items-center",children:[Qe.jsxs("div",{className:"relative w-20 h-20",children:[Qe.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Qe.jsx("img",{src:"/images/icons/facebook.png",alt:"Logo",className:"w-10 h-10"})}),Qe.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-gray-300 border-t-transparent animate-spin"})]}),Qe.jsx("span",{className:"mt-4 text-sm text-gray-500 animate-pulse",children:"ang xc thc vi Facebook..."})]})}),!a&&r&&Qe.jsxs("div",{className:"flex flex-col items-center",children:[Qe.jsx("div",{className:"mb-4 p-4 bg-error-50 text-error-700 rounded-lg text-sm",children:r}),Qe.jsx("button",{onClick:()=>n("/login",{replace:!0}),className:"mt-4 px-4 py-2 bg-primary-600 text-white rounded-lg",children:"Th li"})]})]})},owe=()=>{const{brandId:e}=eN(),t=Zj(),{addToCart:n}=GP(),[r,i]=Ve.useState("all"),[a,s]=Ve.useState("popular"),[o,l]=Ve.useState("grid"),[c,d]=Ve.useState(!1),u=Ve.useRef(null),{scrollYProgress:h}=bP({target:u,offset:["start start","end start"]}),p=jP(h,[0,1],[0,-50]),m="from-primary via-purple-600 to-primary",f={1:{id:1,name:"Canifa",category:"Thi trang",description:"Thng hiu thi trang Vit Nam vi 20 nm kinh nghim, mang n nhng sn phm cht lng cao vi gi c phi chng.",coverImage:"/placeholder.svg",logo:"/placeholder.svg",location:"H Ni",followers:125e3,products:1500,rating:4.8,established:"2001",verified:!0},2:{id:2,name:"Biti's",category:"Giy dp",description:"Thng hiu giy Vit Nam hng u, tin phong trong vic ng dng cng ngh vo sn xut giy th thao.",coverImage:"/placeholder.svg",logo:"/placeholder.svg",location:"TP.HCM",followers:98e3,products:850,rating:4.7,established:"1982",verified:!0},3:{id:3,name:"Saigon Skirt",category:"Thi trang n",description:"Thng hiu vy o n hin i, kt hp gia phong cch truyn thng v xu hng th gii.",coverImage:"/placeholder.svg",logo:"/placeholder.svg",location:"TP.HCM",followers:45e3,products:320,rating:4.9,established:"2015",verified:!1},4:{id:4,name:"Cu Tre Vit",category:"Th cng m ngh",description:"Chuyn sn xut cc sn phm th cng t tre na, thn thin vi mi trng v mang m bn sc Vit.",coverImage:"/placeholder.svg",logo:"/placeholder.svg",location:"Hng Yn",followers:23e3,products:180,rating:4.6,established:"2018",verified:!1}}[e],g={1:[{id:101,name:"o s mi Premium",category:"o",price:299e3,image:"/placeholder.svg",rating:4.8,sold:1250,discount:20,inStock:!0},{id:102,name:"Qun jean slim fit",category:"Qun",price:45e4,image:"/placeholder.svg",rating:4.7,sold:890,discount:0,inStock:!0},{id:103,name:"o thun cotton basic",category:"o",price:199e3,image:"/placeholder.svg",rating:4.9,sold:2100,discount:15,inStock:!0},{id:104,name:"o khoc hoodie",category:"o khoc",price:55e4,image:"/placeholder.svg",rating:4.6,sold:560,discount:0,inStock:!0},{id:105,name:"Qun jogger",category:"Qun",price:399e3,image:"/placeholder.svg",rating:4.8,sold:780,discount:10,inStock:!1},{id:106,name:"o polo nam",category:"o",price:349e3,image:"/placeholder.svg",rating:4.7,sold:920,discount:0,inStock:!0},{id:107,name:"Qun short kaki",category:"Qun",price:279e3,image:"/placeholder.svg",rating:4.5,sold:670,discount:25,inStock:!0},{id:108,name:"o cardigan",category:"o khoc",price:489e3,image:"/placeholder.svg",rating:4.9,sold:430,discount:0,inStock:!0}],2:[{id:201,name:"Giy th thao Hunter",category:"Giy th thao",price:85e4,image:"/placeholder.svg",rating:4.9,sold:890,discount:0,inStock:!0},{id:202,name:"Dp sandal quai ngang",category:"Dp",price:32e4,image:"/placeholder.svg",rating:4.6,sold:1200,discount:15,inStock:!0},{id:203,name:"Giy cao gt n",category:"Giy cao gt",price:65e4,image:"/placeholder.svg",rating:4.8,sold:540,discount:0,inStock:!0},{id:204,name:"Giy li nam",category:"Giy li",price:59e4,image:"/placeholder.svg",rating:4.7,sold:720,discount:20,inStock:!0},{id:205,name:"Giy chy b",category:"Giy th thao",price:92e4,image:"/placeholder.svg",rating:4.9,sold:680,discount:0,inStock:!0},{id:206,name:"Dp x ngn",category:"Dp",price:28e4,image:"/placeholder.svg",rating:4.5,sold:950,discount:10,inStock:!0}],3:[{id:301,name:"Vy midi hoa nh",category:"Vy",price:45e4,image:"/placeholder.svg",rating:4.9,sold:567,discount:0,inStock:!0},{id:302,name:"o croptop trng",category:"o",price:25e4,image:"/placeholder.svg",rating:4.7,sold:830,discount:15,inStock:!0},{id:303,name:"Vy maxi d tic",category:"Vy",price:68e4,image:"/placeholder.svg",rating:4.8,sold:340,discount:0,inStock:!0},{id:304,name:"Set o vy cng s",category:"Set ",price:79e4,image:"/placeholder.svg",rating:4.9,sold:420,discount:20,inStock:!0},{id:305,name:"Chn vy xp ly",category:"Vy",price:38e4,image:"/placeholder.svg",rating:4.6,sold:610,discount:0,inStock:!0}],4:[{id:401,name:"Gi tre an tay",category:"Gi",price:18e4,image:"/placeholder.svg",rating:4.8,sold:320,discount:0,inStock:!0},{id:402,name:"Khay tre decor",category:"Khay",price:12e4,image:"/placeholder.svg",rating:4.7,sold:450,discount:10,inStock:!0},{id:403,name:"Lng n tre",category:"n",price:35e4,image:"/placeholder.svg",rating:4.9,sold:280,discount:0,inStock:!0},{id:404,name:"R tre mini",category:"Gi",price:95e3,image:"/placeholder.svg",rating:4.6,sold:670,discount:15,inStock:!0},{id:405,name:"B a tre cao cp",category:" dng",price:15e4,image:"/placeholder.svg",rating:4.8,sold:540,discount:0,inStock:!0}]}[e]||[],v=["all",...Array.from(new Set(g.map(e=>e.category)))],x=g.filter(e=>"all"===r||e.category===r).sort((e,t)=>"popular"===a?t.sold-e.sold:"price-asc"===a?e.price-t.price:"price-desc"===a?t.price-e.price:"rating"===a?t.rating-e.rating:0);return f?Qe.jsxs("div",{className:"min-h-screen bg-background",children:[Qe.jsxs("div",{className:"fixed inset-0 -z-10",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background via-primary/5 to-background"}),Qe.jsx(QT.div,{className:`absolute inset-0 bg-gradient-to-br ${m} opacity-10 blur-3xl`,animate:{scale:[1,1.2,1],opacity:[.05,.15,.05]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}})]}),Qe.jsx("main",{className:"container mx-auto px-4 py-6",children:Qe.jsxs(QT.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-8",children:[Qe.jsx(QT.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:Qe.jsxs(AP,{variant:"ghost",onClick:()=>t("/local-brand"),className:"gap-2 hover:bg-primary/10",children:[Qe.jsx(Zp,{className:"w-4 h-4"}),"Quay li"]})}),Qe.jsx(QT.div,{ref:u,initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},children:Qe.jsxs(DP,{className:"relative overflow-hidden border-border/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-xl shadow-2xl",children:[Qe.jsxs("div",{className:"relative h-64 md:h-80 overflow-hidden",children:[Qe.jsx(QT.img,{src:f.coverImage,alt:f.name,className:"w-full h-full object-cover",style:{y:p}}),Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/50 to-transparent"}),Qe.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${m} opacity-30 mix-blend-overlay`}),f.verified&&Qe.jsx(QT.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.5,type:"spring"},className:"absolute top-6 right-6",children:Qe.jsxs(EP,{className:`bg-gradient-to-r ${m} text-white border-0 shadow-lg gap-2 px-4 py-2`,children:[Qe.jsx(tm,{className:"w-4 h-4"}),"Xc thc"]})})]}),Qe.jsx(UP,{className:"p-6 md:p-8",children:Qe.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[Qe.jsxs(QT.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",duration:.8},className:"relative -mt-20 md:-mt-24",children:[Qe.jsx("div",{className:`absolute -inset-2 bg-gradient-to-r ${m} opacity-30 blur-xl rounded-full`}),Qe.jsxs(AD,{className:"relative w-32 h-32 md:w-40 md:h-40 border-8 border-card shadow-2xl",children:[Qe.jsx(MD,{src:f.logo,alt:f.name}),Qe.jsx(ED,{className:`text-4xl font-bold text-white bg-gradient-to-br ${m}`,children:f.name[0]})]})]}),Qe.jsxs("div",{className:"flex-1 space-y-4",children:[Qe.jsxs("div",{children:[Qe.jsx("div",{className:"flex items-center gap-3 mb-2",children:Qe.jsx("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-transparent",children:f.name})}),Qe.jsx(EP,{variant:"secondary",className:"text-sm",children:f.category})]}),Qe.jsx("p",{className:"text-muted-foreground leading-relaxed max-w-3xl",children:f.description}),Qe.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{icon:Og,label:"Ngi theo di",value:f.followers.toLocaleString(),color:"text-primary"},{icon:Rf,label:"Sn phm",value:f.products.toLocaleString(),color:"text-primary"},{icon:fg,label:"nh gi",value:f.rating+"/5",color:"text-primary"},{icon:um,label:"Thnh lp",value:f.established,color:"text-primary"}].map((e,t)=>Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+.1*t},className:"p-4 rounded-xl bg-gradient-to-br from-background/50 to-card/30 border border-border/50 backdrop-blur-sm",children:[Qe.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Qe.jsx(e.icon,{className:`w-4 h-4 ${e.color}`}),Qe.jsx("span",{className:"text-xs text-muted-foreground",children:e.label})]}),Qe.jsx("div",{className:"text-xl font-bold",children:e.value})]},t))}),Qe.jsxs("div",{className:"flex flex-wrap gap-3 pt-2",children:[Qe.jsx(AP,{size:"lg",className:"gap-2 "+(c?"bg-muted hover:bg-muted/80":`bg-gradient-to-r ${m} hover:opacity-90`),onClick:()=>{d(!c),px.success(c?" b theo di":" theo di thng hiu")},children:c?Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(_m,{className:"w-5 h-5"}),"ang theo di"]}):Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(sf,{className:"w-5 h-5"}),"Theo di"]})}),Qe.jsxs(AP,{variant:"outline",size:"lg",className:"gap-2",children:[Qe.jsx(ig,{className:"w-5 h-5"}),"Chia s"]}),Qe.jsxs(AP,{variant:"outline",size:"lg",className:"gap-2",children:[Qe.jsx(jf,{className:"w-5 h-5"}),f.location]})]})]})]})})]})}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:Qe.jsx(DP,{className:"border-border/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm",children:Qe.jsxs(UP,{className:"p-6",children:[Qe.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-start lg:items-center justify-between",children:[Qe.jsxs("div",{className:"flex-1",children:[Qe.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Qe.jsx(Km,{className:"w-4 h-4 text-muted-foreground"}),Qe.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Danh mc"})]}),Qe.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(e=>Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsx(AP,{variant:r===e?"default":"outline",size:"sm",onClick:()=>i(e),className:r===e?`bg-gradient-to-r ${m}`:"",children:"all"===e?"Tt c":e})},e))})]}),Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsxs("select",{value:a,onChange:e=>s(e.target.value),className:"px-4 py-2 rounded-lg border border-input bg-background/50 backdrop-blur-sm text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-primary",children:[Qe.jsx("option",{value:"popular",children:" Ph bin nht"}),Qe.jsx("option",{value:"price-asc",children:" Gi thp  cao"}),Qe.jsx("option",{value:"price-desc",children:" Gi cao  thp"}),Qe.jsx("option",{value:"rating",children:" nh gi cao"})]}),Qe.jsxs("div",{className:"flex gap-1 p-1 rounded-lg bg-muted",children:[Qe.jsx(AP,{variant:"grid"===o?"default":"ghost",size:"icon",onClick:()=>l("grid"),className:"h-8 w-8",children:Qe.jsx(tf,{className:"w-4 h-4"})}),Qe.jsx(AP,{variant:"list"===o?"default":"ghost",size:"icon",onClick:()=>l("list"),className:"h-8 w-8",children:Qe.jsx(gf,{className:"w-4 h-4"})})]})]})]}),Qe.jsxs("div",{className:"mt-4 pt-4 border-t border-border/50 flex items-center justify-between text-sm text-muted-foreground",children:[Qe.jsxs("span",{children:["Hin th ",x.length," sn phm"]}),Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx(Sg,{className:"w-4 h-4"}),Qe.jsxs("span",{children:[g.reduce((e,t)=>e+t.sold,0).toLocaleString()," sn phm  bn"]})]})]})]})})}),Qe.jsx("div",{className:"grid gap-6 "+("grid"===o?"grid-cols-2 md:grid-cols-3 lg:grid-cols-4":"grid-cols-1"),children:x.map((e,r)=>Qe.jsx(QT.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.05*r},whileHover:{y:-8},children:Qe.jsxs(DP,{className:"group relative overflow-hidden border-border/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm hover:shadow-2xl hover:shadow-primary/10 transition-all duration-500 h-full flex flex-col",children:[Qe.jsxs("div",{className:"relative overflow-hidden",children:[Qe.jsxs("div",{className:"aspect-square relative",children:[Qe.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),Qe.jsx("div",{className:`absolute inset-0 bg-gradient-to-t ${m} opacity-0 group-hover:opacity-20 transition-opacity duration-500`}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},whileHover:{opacity:1,y:0},className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:Qe.jsxs(AP,{size:"sm",variant:"secondary",className:"gap-2 backdrop-blur-md bg-background/80",onClick:()=>t(`/product/${e.id}`),children:[Qe.jsx(Vm,{className:"w-4 h-4"}),"Xem nhanh"]})})]}),Qe.jsxs("div",{className:"absolute top-3 left-3 flex flex-col gap-2",children:[e.discount>0&&Qe.jsxs(EP,{className:"bg-gradient-to-r from-red-500 to-orange-500 text-white border-0 shadow-lg",children:["-",e.discount,"%"]}),!e.inStock&&Qe.jsx(EP,{variant:"secondary",className:"backdrop-blur-md bg-background/80",children:"Ht hng"}),e.sold>1e3&&Qe.jsxs(EP,{className:`bg-gradient-to-r ${m} text-white border-0`,children:[Qe.jsx(pg,{className:"w-3 h-3 mr-1"}),"Hot"]})]}),Qe.jsx(QT.div,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"absolute top-3 right-3",children:Qe.jsx(AP,{size:"icon",variant:"secondary",className:"rounded-full backdrop-blur-md bg-background/80 hover:bg-primary hover:text-primary-foreground",children:Qe.jsx(sf,{className:"w-4 h-4"})})})]}),Qe.jsxs(UP,{className:"p-4 space-y-3 flex-1 flex flex-col",children:[Qe.jsxs("div",{className:"flex-1 space-y-2",children:[Qe.jsx(EP,{variant:"secondary",className:"text-xs",children:e.category}),Qe.jsx("h3",{className:"font-semibold text-foreground line-clamp-2 group-hover:text-primary transition-colors",children:e.name})]}),Qe.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[Qe.jsxs("div",{className:"flex items-center gap-1",children:[Qe.jsx(fg,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),Qe.jsx("span",{className:"font-medium",children:e.rating})]}),Qe.jsxs("div",{className:"text-muted-foreground",children:[" bn ",e.sold]})]}),Qe.jsx("div",{className:"space-y-1",children:e.discount>0?Qe.jsxs("div",{className:"flex items-baseline gap-2",children:[Qe.jsxs("span",{className:`text-2xl font-bold bg-gradient-to-r ${m} bg-clip-text text-transparent`,children:[(e.price*(1-e.discount/100)).toLocaleString(),""]}),Qe.jsxs("span",{className:"text-sm text-muted-foreground line-through",children:[e.price.toLocaleString(),""]})]}):Qe.jsxs("span",{className:`text-2xl font-bold bg-gradient-to-r ${m} bg-clip-text text-transparent`,children:[e.price.toLocaleString(),""]})}),Qe.jsxs(AP,{className:"w-full gap-2 "+(e.inStock?`bg-gradient-to-r ${m} hover:opacity-90`:""),onClick:()=>(e=>{const t=e.discount>0?e.price*(1-e.discount/100):e.price;n({id:e.id,name:e.name,price:t.toLocaleString(),image:e.image,quantity:1}),px.success(` thm ${e.name} vo gi hng`)})(e),disabled:!e.inStock,children:[Qe.jsx(cg,{className:"w-4 h-4"}),e.inStock?"Thm vo gi":"Ht hng"]})]})]})},e.id))}),0===x.length&&Qe.jsx(QT.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center py-20",children:Qe.jsx(DP,{className:"max-w-md mx-auto border-border/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm",children:Qe.jsxs(UP,{className:"p-12",children:[Qe.jsx(Rf,{className:"w-20 h-20 mx-auto mb-4 text-muted-foreground opacity-50"}),Qe.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Khng tm thy sn phm"}),Qe.jsx("p",{className:"text-muted-foreground mb-6",children:"Th chn danh mc khc hoc iu chnh b lc"}),Qe.jsx(AP,{onClick:()=>i("all"),children:"Xem tt c sn phm"})]})})})]})})]}):Qe.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:Qe.jsxs("div",{className:"text-center space-y-4",children:[Qe.jsx("h1",{className:"text-2xl font-bold",children:"Khng tm thy thng hiu"}),Qe.jsxs(AP,{onClick:()=>t("/local-brand"),children:[Qe.jsx(Zp,{className:"w-4 h-4 mr-2"}),"Quay li danh sch"]})]})})},lwe=()=>{const e=Zj(),[t,n]=Ve.useState("all"),[r]=Ve.useState(2580),[i,a]=Ve.useState("grid"),[s,o]=Ve.useState(""),[l,c]=Ve.useState("trending"),d=Ve.useRef(null),{scrollYProgress:u}=bP({target:d,offset:["start start","end start"]}),h=jP(u,[0,1],[0,-50]),p=jP(u,[0,.5],[1,0]),m=[{id:"all",name:"Tt c",icon:Zm,color:"from-purple-500 to-pink-500"},{id:"voucher",name:"Voucher",icon:wg,color:"from-purple-500 to-pink-500"},{id:"product",name:"Sn phm",icon:lg,color:"from-purple-500 to-pink-500"},{id:"service",name:"Dch v",icon:Tm,color:"from-purple-500 to-pink-500"},{id:"tech",name:"Cng ngh",icon:ug,color:"from-purple-500 to-pink-500"}],f=[{id:1,name:"Voucher Gim 100K",description:"p dng cho n hng t 500K",points:500,image:"/placeholder.svg",category:"voucher",stock:50,trending:!0,discount:"100.000",expiry:"30 ngy",type:"M gim gi",popularity:98},{id:2,name:"Voucher Gim 50K",description:"p dng cho n hng t 200K",points:250,image:"/placeholder.svg",category:"voucher",stock:100,trending:!0,discount:"50.000",expiry:"30 ngy",type:"M gim gi",popularity:95},{id:3,name:"Tai nghe Bluetooth",description:"Tai nghe khng dy cht lng cao",points:1200,image:"/placeholder.svg",category:"tech",stock:20,trending:!0,originalPrice:"899.000",type:"in t",popularity:92},{id:4,name:"Balo thi trang",description:"Balo canvas phong cch Hn Quc",points:800,image:"/placeholder.svg",category:"product",stock:35,trending:!1,originalPrice:"599.000",type:"Thi trang",popularity:78},{id:5,name:"Free Ship 30K",description:"Min ph vn chuyn cho mi n hng",points:150,image:"/placeholder.svg",category:"service",stock:200,trending:!0,discount:"30.000",expiry:"15 ngy",type:"Dch v",popularity:88},{id:6,name:"C ph min ph",description:"1 ly c ph bt k ti Highland Coffee",points:300,image:"/placeholder.svg",category:"service",stock:80,trending:!1,discount:"Min ph",expiry:"30 ngy",type:"F&B",popularity:75},{id:7,name:"Chut khng dy",description:"Chut wireless cao cp, pin 12 thng",points:600,image:"/placeholder.svg",category:"tech",stock:25,trending:!1,originalPrice:"449.000",type:"in t",popularity:70},{id:8,name:"o thun Premium",description:"o thun cotton 100% cao cp",points:450,image:"/placeholder.svg",category:"product",stock:60,trending:!1,originalPrice:"299.000",type:"Thi trang",popularity:68},{id:9,name:"Voucher Gim 200K",description:"p dng cho n hng t 1.000K",points:900,image:"/placeholder.svg",category:"voucher",stock:30,trending:!0,discount:"200.000",expiry:"30 ngy",type:"M gim gi",popularity:90},{id:10,name:"Sc d phng 10000mAh",description:"Pin d phng sc nhanh 2 cng",points:1e3,image:"/placeholder.svg",category:"tech",stock:15,trending:!0,originalPrice:"699.000",type:"in t",popularity:85},{id:11,name:"M li trai",description:"M cap thu logo thi trang",points:350,image:"/placeholder.svg",category:"product",stock:45,trending:!1,originalPrice:"249.000",type:"Ph kin",popularity:65},{id:12,name:"Massage 60 pht",description:"Voucher massage body ton thn",points:1500,image:"/placeholder.svg",category:"service",stock:10,trending:!1,discount:"Min ph",expiry:"60 ngy",type:"Spa & Wellness",popularity:80}].filter(e=>"all"===t||e.category===t).filter(e=>e.name.toLowerCase().includes(s.toLowerCase())||e.description.toLowerCase().includes(s.toLowerCase())).sort((e,t)=>"trending"===l?t.popularity-e.popularity:"points-asc"===l?e.points-t.points:"points-desc"===l?t.points-e.points:"stock"===l?t.stock-e.stock:0),g=3e3,v=r/g*100;return Qe.jsxs("div",{className:"min-h-screen bg-background",children:[Qe.jsxs("div",{className:"fixed inset-0 -z-10",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background via-primary/5 to-background"}),Qe.jsx(QT.div,{className:"absolute inset-0 bg-gradient-to-br from-primary via-purple-600 to-primary opacity-10 blur-3xl",animate:{scale:[1,1.2,1],opacity:[.05,.15,.05]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),Qe.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(var(--primary),0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(var(--primary),0.03)_1px,transparent_1px)] bg-[size:64px_64px]"})]}),Qe.jsx("main",{className:"container mx-auto px-4 py-8",children:Qe.jsxs(QT.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-8",children:[Qe.jsx(QT.div,{ref:d,initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{y:h,opacity:p},children:Qe.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsx(AP,{variant:"ghost",size:"icon",onClick:()=>e(-1),className:"hover:bg-primary/10",children:Qe.jsx(Zp,{className:"w-5 h-5"})})}),Qe.jsx("div",{className:"flex-1",children:Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx(QT.div,{whileHover:{rotate:360,scale:1.1},transition:{duration:.6},className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-primary to-purple-600 flex items-center justify-center shadow-xl shadow-primary/30",children:Qe.jsx(Zm,{className:"w-6 h-6 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary via-purple-600 to-primary bg-clip-text text-transparent",children:"i thng"}),Qe.jsx("p",{className:"text-muted-foreground text-sm",children:"S dng im tch ly  i qu tng hp dn"})]})]})})]})}),Qe.jsx(QT.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.1},children:Qe.jsxs(DP,{className:"relative overflow-hidden border-border/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-xl shadow-2xl",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500/10 via-orange-500/10 to-amber-500/10"}),Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-amber-500 via-orange-500 to-amber-500"}),Qe.jsx(QT.div,{className:"absolute -top-20 -right-20 w-64 h-64 bg-gradient-to-br from-amber-500/30 to-orange-500/30 rounded-full blur-3xl",animate:{scale:[1,1.2,1],opacity:[.3,.5,.3]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}}),Qe.jsx(UP,{className:"p-8 relative",children:Qe.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center gap-6",children:[Qe.jsxs("div",{className:"flex-1 space-y-4",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsxs(EP,{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white border-0 shadow-lg",children:[Qe.jsx(Im,{className:"w-3 h-3 mr-1"}),"VIP Member"]}),Qe.jsxs(EP,{variant:"outline",className:"backdrop-blur-sm",children:[Qe.jsx(pg,{className:"w-3 h-3 mr-1"}),r.toLocaleString()," im"]})]}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"im thng hin c"}),Qe.jsxs("div",{className:"flex items-baseline gap-3",children:[Qe.jsx(QT.div,{animate:{rotate:[0,360]},transition:{duration:3,repeat:1/0,ease:"linear"},className:"inline-block",children:Qe.jsx(fg,{className:"w-8 h-8 text-amber-500 fill-amber-500"})}),Qe.jsx("h2",{className:"text-5xl font-bold bg-gradient-to-r from-amber-500 via-orange-500 to-amber-500 bg-clip-text text-transparent",children:r.toLocaleString()}),Qe.jsx("span",{className:"text-2xl text-muted-foreground",children:"im"})]})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs("div",{className:"flex justify-between text-sm",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"n hng tip theo"}),Qe.jsxs("span",{className:"font-semibold",children:[r,"/",g," im"]})]}),Qe.jsx(bae,{value:v,className:"h-3"}),Qe.jsxs("p",{className:"text-xs text-muted-foreground",children:["Cn ",g-r," im na  ln hng Diamond"]})]})]}),Qe.jsxs("div",{className:"flex flex-col gap-3 min-w-[200px]",children:[Qe.jsxs(AP,{size:"lg",onClick:()=>e("/vi-dien-tu"),className:"bg-gradient-to-r from-amber-500 to-orange-500 hover:opacity-90 shadow-xl",children:[Qe.jsx(zg,{className:"w-5 h-5 mr-2"}),"Np im"]}),Qe.jsxs(AP,{size:"lg",variant:"outline",onClick:()=>e("/vi-dien-tu"),className:"border-2 hover:border-primary hover:bg-primary/5",children:[Qe.jsx(Rf,{className:"w-5 h-5 mr-2"}),"Lch s i qu"]})]})]})})]})}),Qe.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Phn qu",value:f.length,icon:Zm,color:"from-blue-500 to-cyan-500",bgColor:"from-blue-500/10 to-cyan-500/10"},{label:"ang hot",value:f.filter(e=>e.trending).length,icon:qm,color:"from-orange-500 to-red-500",bgColor:"from-orange-500/10 to-red-500/10"},{label:"C th i",value:f.filter(e=>e.points<=r).length,icon:_m,color:"from-green-500 to-emerald-500",bgColor:"from-green-500/10 to-emerald-500/10"},{label:"Sp ht",value:f.filter(e=>e.stock<20).length,icon:Em,color:"from-purple-500 to-pink-500",bgColor:"from-purple-500/10 to-pink-500/10"}].map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2+.1*t},whileHover:{scale:1.05,y:-5},children:Qe.jsxs(DP,{className:"relative overflow-hidden border-border/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm hover:shadow-xl hover:shadow-primary/10 transition-all duration-500",children:[Qe.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${e.bgColor}`}),Qe.jsx(UP,{className:"p-6 relative",children:Qe.jsxs("div",{className:"flex items-center gap-4",children:[Qe.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${e.color} shadow-lg`,children:Qe.jsx(e.icon,{className:"w-6 h-6 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"text-3xl font-bold",children:e.value}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:e.label})]})]})})]})},t))}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:Qe.jsx(DP,{className:"border-border/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm",children:Qe.jsxs(UP,{className:"p-6 space-y-6",children:[Qe.jsxs("div",{className:"relative",children:[Qe.jsx(eg,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5"}),Qe.jsx(Vne,{placeholder:"Tm kim phn qu...",value:s,onChange:e=>o(e.target.value),className:"pl-12 pr-12 h-12 border-border/50 focus:border-primary"}),s&&Qe.jsx(AP,{variant:"ghost",size:"icon",onClick:()=>o(""),className:"absolute right-2 top-1/2 -translate-y-1/2 hover:bg-primary/10",children:Qe.jsx(Fg,{className:"w-4 h-4"})})]}),Qe.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between",children:[Qe.jsxs("div",{className:"flex-1 w-full",children:[Qe.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Qe.jsx(Km,{className:"w-4 h-4 text-muted-foreground"}),Qe.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Danh mc"})]}),Qe.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(e=>{const r=e.icon;return Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(AP,{variant:t===e.id?"default":"outline",size:"sm",onClick:()=>n(e.id),className:t===e.id?`bg-gradient-to-r ${e.color}`:"",children:[Qe.jsx(r,{className:"w-4 h-4 mr-2"}),e.name]})},e.id)})})]}),Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsxs("select",{value:l,onChange:e=>c(e.target.value),className:"px-4 py-2 rounded-lg border border-input bg-background/50 backdrop-blur-sm text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-primary",children:[Qe.jsx("option",{value:"trending",children:" Ph bin nht"}),Qe.jsx("option",{value:"points-asc",children:" im thp  cao"}),Qe.jsx("option",{value:"points-desc",children:" im cao  thp"}),Qe.jsx("option",{value:"stock",children:" Cn nhiu nht"})]}),Qe.jsxs("div",{className:"flex gap-1 p-1 rounded-lg bg-muted",children:[Qe.jsx(AP,{variant:"grid"===i?"default":"ghost",size:"icon",onClick:()=>a("grid"),className:"h-8 w-8",children:Qe.jsx(tf,{className:"w-4 h-4"})}),Qe.jsx(AP,{variant:"list"===i?"default":"ghost",size:"icon",onClick:()=>a("list"),className:"h-8 w-8",children:Qe.jsx(gf,{className:"w-4 h-4"})})]})]})]}),Qe.jsxs("div",{className:"pt-4 border-t border-border/50 flex items-center justify-between text-sm text-muted-foreground",children:[Qe.jsxs("span",{children:["Hin th ",f.length," phn qu"]}),Qe.jsxs("span",{children:[f.filter(e=>e.points<=r).length," c th i ngay"]})]})]})})}),Qe.jsx("div",{className:"grid gap-6 "+("grid"===i?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"),children:f.map((e,t)=>{const n=r>=e.points,i=e.stock<20,a=m.find(t=>t.id===e.category);return Qe.jsx(QT.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.05*t},whileHover:{y:-8},children:Qe.jsxs(DP,{className:"group relative overflow-hidden border-border/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm hover:shadow-2xl hover:shadow-primary/10 transition-all duration-500 h-full flex flex-col",children:[Qe.jsxs("div",{className:"relative overflow-hidden",children:[Qe.jsxs("div",{className:"aspect-square relative",children:[Qe.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),Qe.jsx("div",{className:`absolute inset-0 bg-gradient-to-t ${null==a?void 0:a.color} opacity-0 group-hover:opacity-20 transition-opacity duration-500`})]}),Qe.jsxs("div",{className:"absolute top-3 left-3 flex flex-col gap-2",children:[e.trending&&Qe.jsxs(EP,{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white border-0 shadow-lg gap-1",children:[Qe.jsx(qm,{className:"w-3 h-3"}),"Hot"]}),i&&Qe.jsxs(EP,{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white border-0 shadow-lg gap-1",children:[Qe.jsx(Em,{className:"w-3 h-3"}),"Sp ht"]}),n&&Qe.jsxs(EP,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white border-0 shadow-lg gap-1",children:[Qe.jsx(_m,{className:"w-3 h-3"})," im"]})]}),Qe.jsx("div",{className:"absolute bottom-3 right-3",children:Qe.jsxs(QT.div,{whileHover:{scale:1.1},className:"px-4 py-2 rounded-full backdrop-blur-md shadow-xl font-bold text-sm flex items-center gap-2 "+(n?"bg-gradient-to-r from-amber-500 to-orange-500 text-white":"bg-background/90 text-muted-foreground"),children:[Qe.jsx(fg,{className:"w-4 h-4"}),e.points.toLocaleString()]})})]}),Qe.jsxs(UP,{className:"p-5 space-y-4 flex-1 flex flex-col",children:[Qe.jsxs("div",{className:"flex-1 space-y-2",children:[Qe.jsx(EP,{variant:"secondary",className:"text-xs",children:e.type}),Qe.jsx("h3",{className:"font-bold text-lg line-clamp-1 group-hover:text-primary transition-colors",children:e.name}),Qe.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description})]}),Qe.jsxs("div",{className:"space-y-2 pt-4 border-t border-border/50",children:[e.discount&&Qe.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"Gi tr:"}),Qe.jsx("span",{className:"font-bold text-green-600",children:e.discount})]}),e.originalPrice&&Qe.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"Gi gc:"}),Qe.jsx("span",{className:"font-bold",children:e.originalPrice})]}),e.expiry&&Qe.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Qe.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[Qe.jsx(Em,{className:"w-3 h-3"}),"Hn dng:"]}),Qe.jsx("span",{className:"font-medium",children:e.expiry})]}),Qe.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Qe.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[Qe.jsx(Rf,{className:"w-3 h-3"}),"Cn li:"]}),Qe.jsxs("span",{className:"font-bold "+(i?"text-orange-600":""),children:[e.stock," phn"]})]}),Qe.jsxs("div",{className:"pt-2",children:[Qe.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground mb-1",children:[Qe.jsx("span",{children:" ph bin"}),Qe.jsxs("span",{className:"font-semibold",children:[e.popularity,"%"]})]}),Qe.jsx(bae,{value:e.popularity,className:"h-1.5"})]})]}),Qe.jsxs(AP,{className:"w-full gap-2 "+(n?`bg-gradient-to-r ${null==a?void 0:a.color} hover:opacity-90 shadow-lg`:""),onClick:()=>(e=>{r>=e.points?px.success("i thng thnh cng!",{description:`${e.name}  c thm vo v ca bn`}):px.error(`Bn cn thm ${e.points-r} im  i phn qu ny`)})(e),disabled:!n,size:"lg",children:[Qe.jsx(Zm,{className:"w-5 h-5"}),n?"i ngay":`Cn ${(e.points-r).toLocaleString()} im na`]})]})]})},e.id)})}),0===f.length&&Qe.jsx(QT.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center py-20",children:Qe.jsx(DP,{className:"max-w-md mx-auto border-border/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm",children:Qe.jsxs(UP,{className:"p-12",children:[Qe.jsx(Zm,{className:"w-20 h-20 mx-auto mb-4 text-muted-foreground opacity-50"}),Qe.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Khng tm thy phn qu"}),Qe.jsx("p",{className:"text-muted-foreground mb-6",children:s?`Khng c kt qu cho "${s}"`:"Khng tm thy phn qu trong danh mc ny"}),Qe.jsxs("div",{className:"flex gap-3 justify-center",children:[s&&Qe.jsx(AP,{onClick:()=>o(""),variant:"outline",children:"Xa tm kim"}),Qe.jsx(AP,{onClick:()=>n("all"),children:"Xem tt c"})]})]})})})]})})]})};function cwe({className:e,...t}){return Qe.jsx("div",{className:Rv("animate-pulse rounded-md bg-muted",e),...t})}const dwe=Ve.createContext(null);function uwe(){const e=Ve.useContext(dwe);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}const hwe=Ve.forwardRef(({defaultOpen:e=!0,open:t,onOpenChange:n,className:r,style:i,children:a,...s},o)=>{const l=function(){const[e,t]=Ve.useState(void 0);return Ve.useEffect(()=>{const e=window.matchMedia("(max-width: 767px)"),n=()=>{t(window.innerWidth<768)};return e.addEventListener("change",n),t(window.innerWidth<768),()=>e.removeEventListener("change",n)},[]),!!e}(),[c,d]=Ve.useState(!1),[u,h]=Ve.useState(e),p=t??u,m=Ve.useCallback(e=>{const t="function"==typeof e?e(p):e;n?n(t):h(t),document.cookie=`sidebar:state=${t}; path=/; max-age=604800`},[n,p]),f=Ve.useCallback(()=>l?d(e=>!e):m(e=>!e),[l,m,d]);Ve.useEffect(()=>{const e=e=>{"b"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),f())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[f]);const g=p?"expanded":"collapsed",v=Ve.useMemo(()=>({state:g,open:p,setOpen:m,isMobile:l,openMobile:c,setOpenMobile:d,toggleSidebar:f}),[g,p,m,l,c,d,f]);return Qe.jsx(dwe.Provider,{value:v,children:Qe.jsx(uw,{delayDuration:0,children:Qe.jsx("div",{style:{"--sidebar-width":"16rem","--sidebar-width-icon":"3rem",...i},className:Rv("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:o,...s,children:a})})})});hwe.displayName="SidebarProvider";const pwe=Ve.forwardRef(({side:e="left",variant:t="sidebar",collapsible:n="offcanvas",className:r,children:i,...a},s)=>{const{isMobile:o,state:l,openMobile:c,setOpenMobile:d}=uwe();return"none"===n?Qe.jsx("div",{className:Rv("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:s,...a,children:i}):o?Qe.jsx(_ae,{open:c,onOpenChange:d,...a,children:Qe.jsx(Eae,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":"18rem"},side:e,children:Qe.jsx("div",{className:"flex h-full w-full flex-col",children:i})})}):Qe.jsxs("div",{ref:s,className:"group peer hidden text-sidebar-foreground md:block","data-state":l,"data-collapsible":"collapsed"===l?n:"","data-variant":t,"data-side":e,children:[Qe.jsx("div",{className:Rv("relative h-svh w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180","floating"===t||"inset"===t?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),Qe.jsx("div",{className:Rv("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex","left"===e?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]","floating"===t||"inset"===t?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...a,children:Qe.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:i})})]})});pwe.displayName="Sidebar";const mwe=Ve.forwardRef(({className:e,onClick:t,...n},r)=>{const{toggleSidebar:i}=uwe();return Qe.jsxs(AP,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:Rv("h-7 w-7",e),onClick:e=>{null==t||t(e),i()},...n,children:[Qe.jsx(Df,{}),Qe.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});mwe.displayName="SidebarTrigger";Ve.forwardRef(({className:e,...t},n)=>{const{toggleSidebar:r}=uwe();return Qe.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:Rv("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] group-data-[side=left]:-right-4 group-data-[side=right]:left-0 hover:after:bg-sidebar-border sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...t})}).displayName="SidebarRail";Ve.forwardRef(({className:e,...t},n)=>Qe.jsx("main",{ref:n,className:Rv("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...t})).displayName="SidebarInset";Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(Vne,{ref:n,"data-sidebar":"input",className:Rv("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...t})).displayName="SidebarInput";Ve.forwardRef(({className:e,...t},n)=>Qe.jsx("div",{ref:n,"data-sidebar":"header",className:Rv("flex flex-col gap-2 p-2",e),...t})).displayName="SidebarHeader";Ve.forwardRef(({className:e,...t},n)=>Qe.jsx("div",{ref:n,"data-sidebar":"footer",className:Rv("flex flex-col gap-2 p-2",e),...t})).displayName="SidebarFooter";Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(ZR,{ref:n,"data-sidebar":"separator",className:Rv("mx-2 w-auto bg-sidebar-border",e),...t})).displayName="SidebarSeparator";const fwe=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx("div",{ref:n,"data-sidebar":"content",className:Rv("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t}));fwe.displayName="SidebarContent";const gwe=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx("div",{ref:n,"data-sidebar":"group",className:Rv("relative flex w-full min-w-0 flex-col p-2",e),...t}));gwe.displayName="SidebarGroup";const vwe=Ve.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const i=t?Sh:"div";return Qe.jsx(i,{ref:r,"data-sidebar":"group-label",className:Rv("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...n})});vwe.displayName="SidebarGroupLabel";Ve.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const i=t?Sh:"button";return Qe.jsx(i,{ref:r,"data-sidebar":"group-action",className:Rv("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...n})}).displayName="SidebarGroupAction";const xwe=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx("div",{ref:n,"data-sidebar":"group-content",className:Rv("w-full text-sm",e),...t}));xwe.displayName="SidebarGroupContent";const ywe=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx("ul",{ref:n,"data-sidebar":"menu",className:Rv("flex w-full min-w-0 flex-col gap-1",e),...t}));ywe.displayName="SidebarMenu";const bwe=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx("li",{ref:n,"data-sidebar":"menu-item",className:Rv("group/menu-item relative",e),...t}));bwe.displayName="SidebarMenuItem";const wwe=Vp("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),jwe=Ve.forwardRef(({asChild:e=!1,isActive:t=!1,variant:n="default",size:r="default",tooltip:i,className:a,...s},o)=>{const l=e?Sh:"button",{isMobile:c,state:d}=uwe(),u=Qe.jsx(l,{ref:o,"data-sidebar":"menu-button","data-size":r,"data-active":t,className:Rv(wwe({variant:n,size:r}),a),...s});return i?("string"==typeof i&&(i={children:i}),Qe.jsxs(hw,{children:[Qe.jsx(pw,{asChild:!0,children:u}),Qe.jsx(mw,{side:"right",align:"center",hidden:"collapsed"!==d||c,...i})]})):u});jwe.displayName="SidebarMenuButton";Ve.forwardRef(({className:e,asChild:t=!1,showOnHover:n=!1,...r},i)=>{const a=t?Sh:"button";return Qe.jsx(a,{ref:i,"data-sidebar":"menu-action",className:Rv("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform peer-hover/menu-button:text-sidebar-accent-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...r})}).displayName="SidebarMenuAction";Ve.forwardRef(({className:e,...t},n)=>Qe.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:Rv("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...t})).displayName="SidebarMenuBadge";Ve.forwardRef(({className:e,showIcon:t=!1,...n},r)=>{const i=Ve.useMemo(()=>`${Math.floor(40*Math.random())+50}%`,[]);return Qe.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:Rv("flex h-8 items-center gap-2 rounded-md px-2",e),...n,children:[t&&Qe.jsx(cwe,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),Qe.jsx(cwe,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":i}})]})}).displayName="SidebarMenuSkeleton";Ve.forwardRef(({className:e,...t},n)=>Qe.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:Rv("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...t})).displayName="SidebarMenuSub";Ve.forwardRef(({...e},t)=>Qe.jsx("li",{ref:t,...e})).displayName="SidebarMenuSubItem";Ve.forwardRef(({asChild:e=!1,size:t="md",isActive:n,className:r,...i},a)=>{const s=e?Sh:"a";return Qe.jsx(s,{ref:a,"data-sidebar":"menu-sub-button","data-size":t,"data-active":n,className:Rv("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring aria-disabled:pointer-events-none aria-disabled:opacity-50 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground","sm"===t&&"text-xs","md"===t&&"text-sm","group-data-[collapsible=icon]:hidden",r),...i})}).displayName="SidebarMenuSubButton";const Nwe=[{title:"Tng quan",url:"/vendor-management",icon:mf},{title:"n hng",url:"/vendor-management/order-management",icon:cg},{title:"Sn phm",url:"/vendor-management/product-management",icon:Rf},{title:"Thm sn phm",url:"/vendor-management/add-product",icon:Wf},{title:"Thng k",url:"/vendor-management/statistics",icon:pm},{title:"Ci t",url:"/vendor-management/setting",icon:rg}];function _we(){const{state:e}=uwe(),{user:t}=Pae(),n=Yj(),r="collapsed"===e,[i,a]=Ve.useState(null),[s,o]=Ve.useState(!0);Ve.useEffect(()=>{(async()=>{if(null==t?void 0:t.id)try{const e=await fetch(`http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/vendor/get_store_info.php?user_id=${t.id}`),n=await e.json();n.success&&a({store_name:n.store_name,avatar:n.avatar})}catch(e){}finally{o(!1)}})()},[t]);return Qe.jsx(pwe,{className:r?"w-16":"w-64",collapsible:"icon",children:Qe.jsxs(fwe,{className:"bg-card border-r flex flex-col h-full justify-between",children:[Qe.jsxs("div",{children:[Qe.jsx("div",{className:"p-4 border-b",children:Qe.jsx("div",{className:"flex items-center gap-3",children:s?Qe.jsxs(Qe.Fragment,{children:[Qe.jsx("div",{className:"w-8 h-8 rounded-full bg-muted animate-pulse"}),!r&&Qe.jsx("div",{className:"h-4 w-32 bg-muted animate-pulse rounded"})]}):i?Qe.jsxs(Qe.Fragment,{children:[Qe.jsxs(AD,{className:r?"w-5 h-5":"w-10 h-10",collapsible:"icon",children:[Qe.jsx(MD,{src:i.avatar||void 0,alt:i.store_name}),Qe.jsx(ED,{className:"bg-gradient-to-br from-indigo-500 to-purple-500 text-white text-xs",children:(l=i.store_name,l.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2))})]}),!r&&Qe.jsx("span",{className:"font-bold text-base bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 bg-clip-text text-transparent truncate",children:i.store_name})]}):Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(gg,{className:"w-6 h-6 text-primary"}),!r&&Qe.jsx("span",{className:"font-bold text-lg bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 bg-clip-text text-transparent",children:"Shop Manager"})]})})}),Qe.jsxs(gwe,{children:[Qe.jsx(vwe,{children:"Qun l ca hng"}),Qe.jsx(xwe,{children:Qe.jsx(ywe,{children:Nwe.map(e=>{return Qe.jsx(bwe,{children:Qe.jsx(jwe,{asChild:!0,children:Qe.jsxs(MN,{to:e.url,end:"/vendor-management"===e.url,className:(i=e.url,t="/vendor-management"===i?n.pathname===i:n.pathname.startsWith(i),t?"bg-primary text-primary-foreground font-medium":"hover:bg-muted/50"),children:[Qe.jsx(e.icon,{className:r?"w-4 h-4":"w-4 h-4 mr-2"}),!r&&Qe.jsx("span",{children:e.title})]})})},e.title);var t,i})})})]})]}),Qe.jsx("div",{className:"border-t p-4 flex justify-center",children:Qe.jsxs(MN,{to:"/",className:"flex items-center justify-center w-full text-muted-foreground hover:text-primary transition-colors",children:[Qe.jsx(lf,{className:"w-6 h-6"}),!r&&Qe.jsx("span",{className:"ml-2 font-medium",children:"Trang ch"})]})})]})});var l}const Swe={totalProducts:0,totalOrders:0,totalDeliveredOrders:0,totalRevenue:0,revenueGrowth:0,avgRating:0,totalReviews:0,totalCustomers:0,conversionRate:"0%",conversionGrowth:0},Cwe=[{month:"T1",revenue:0},{month:"T2",revenue:0},{month:"T3",revenue:0},{month:"T4",revenue:0},{month:"T5",revenue:0},{month:"T6",revenue:0}],Awe=[{name:"Cha c d liu",value:100,color:"#94a3b8"}];function Mwe(){const{user:e}=Pae(),[t,n]=Ve.useState(Swe),[r,i]=Ve.useState(Cwe),[a,s]=Ve.useState(Awe),[o,l]=Ve.useState(!1),[c,d]=Ve.useState("");Ve.useEffect(()=>{(async()=>{if(null==e?void 0:e.id){l(!0);try{const t=await fetch(`http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/vendor/dashboard_stats.php?user_id=${e.id}`),r=await t.json();!1!==r.success&&n(r);const a=await fetch(`http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/vendor/revenue_chart.php?user_id=${e.id}`),o=await a.json();Array.isArray(o)&&o.length>0&&i(o);const l=await fetch(`http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/vendor/category_sales.php?user_id=${e.id}`),c=await l.json();Array.isArray(c)&&c.length>0&&s(c),d((new Date).toLocaleString("vi-VN"))}catch(t){}finally{l(!1)}}})()},[e]);const u=[{label:"Doanh thu thng ny",value:`${((t.totalRevenue||0)/1e6).toFixed(1)}M`,change:t.revenueGrowth||0,desc:"so vi thng trc",color:"from-emerald-500 to-teal-500",textColor:"text-white",icon:Lm},{label:"n hng mi",value:t.totalOrders||0,change:15.3,desc:"so vi thng trc",color:"from-blue-500 to-cyan-500",textColor:"text-white",icon:lg},{label:"Khch hng",value:t.totalCustomers||0,change:t.conversionGrowth||0,desc:"khch hng mi",color:"from-purple-500 to-pink-500",textColor:"text-white",icon:Og},{label:"T l chuyn i",value:t.conversionRate||"0%",change:2.1,desc:"ci thin",color:"from-orange-500 to-red-500",textColor:"text-white",icon:yg}],h=[{label:"Sn phm",value:t.totalProducts||0,icon:Rf,color:"text-blue-600",bg:"bg-blue-50"},{label:"nh gi TB",value:t.avgRating||0,icon:fg,color:"text-yellow-600",bg:"bg-yellow-50"},{label:" giao",value:t.totalDeliveredOrders||0,icon:sg,color:"text-green-600",bg:"bg-green-50"},{label:"T l hon thnh",value:t.totalOrders>0?`${Math.round(t.totalDeliveredOrders/t.totalOrders*100)}%`:"0%",icon:Xp,color:"text-purple-600",bg:"bg-purple-50"}];return Qe.jsxs("div",{className:"min-h-screen bg-background space-y-8",children:[Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"relative",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/5 via-purple-500/5 to-pink-500/5 rounded-3xl -z-10"}),Qe.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6 p-8",children:[Qe.jsxs("div",{className:"flex items-start gap-6",children:[Qe.jsx(QT.div,{className:"p-4 rounded-2xl bg-gradient-to-br from-primary via-purple-500 to-pink-500 shadow-xl",animate:{rotate:[0,5,-5,0],scale:[1,1.05,1]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:Qe.jsx(mf,{className:"w-8 h-8 text-white"})}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs("div",{children:[Qe.jsx("h1",{className:"text-4xl md:text-5xl font-black bg-gradient-to-r from-primary via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Dashboard Overview"}),Qe.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[Qe.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),Qe.jsx("p",{className:"text-muted-foreground",children:"Cp nht real-time"}),c&&Qe.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:[" Ln cui: ",c]})]})]}),Qe.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl",children:" Theo di hiu sut kinh doanh ton din vi analytics chi tit v insights thng minh"})]})]}),Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsxs(AP,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>{if(null==e?void 0:e.id){(async()=>{l(!0);try{const t=await fetch(`http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/vendor/dashboard_stats.php?user_id=${e.id}`),r=await t.json();!1!==r.success&&n(r),d((new Date).toLocaleString("vi-VN"))}catch(t){}finally{l(!1)}})()}},disabled:o,children:[Qe.jsx(qf,{className:"w-4 h-4 "+(o?"animate-spin":"")}),"Lm mi"]}),Qe.jsxs(AP,{variant:"outline",size:"sm",className:"gap-2",children:[Qe.jsx(Bm,{className:"w-4 h-4"}),"Xut bo co"]}),Qe.jsxs(EP,{variant:"secondary",className:"px-3 py-1.5 gap-1.5",children:[Qe.jsx(um,{className:"w-3.5 h-3.5"}),"6 thng"]})]})]})]}),Qe.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:u.map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1*t},whileHover:{y:-8,scale:1.02},children:Qe.jsxs(DP,{className:"relative overflow-hidden border-0 shadow-lg hover:shadow-xl transition-all duration-300",children:[Qe.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${e.color} opacity-90`}),Qe.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16"}),Qe.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/5 rounded-full translate-y-12 -translate-x-12"}),Qe.jsxs(UP,{className:"relative p-6 space-y-4",children:[Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:Qe.jsx(e.icon,{className:"w-6 h-6 text-white"})}),Qe.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full bg-white/20 backdrop-blur-sm ${e.textColor}`,children:[e.change>=0?Qe.jsx(em,{className:"w-3 h-3"}):Qe.jsx(Jp,{className:"w-3 h-3"}),Qe.jsxs("span",{className:"text-xs font-bold",children:[Math.abs(e.change),"%"]})]})]}),Qe.jsxs("div",{className:"space-y-1",children:[Qe.jsx("p",{className:"text-white/80 text-sm font-medium",children:e.label}),Qe.jsx("p",{className:"text-white text-3xl font-black",children:e.value}),Qe.jsx("p",{className:"text-white/70 text-xs",children:e.desc})]})]})]})},t))}),Qe.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:h.map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.6+.05*t},whileHover:{scale:1.05},children:Qe.jsx(DP,{className:"border shadow-sm hover:shadow-md transition-all duration-300",children:Qe.jsxs(UP,{className:"p-6 flex items-center gap-4",children:[Qe.jsx("div",{className:`p-3 rounded-xl ${e.bg}`,children:Qe.jsx(e.icon,{className:`w-5 h-5 ${e.color}`})}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"text-2xl font-bold text-foreground",children:e.value}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:e.label})]})]})})},t))}),Qe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Qe.jsx(QT.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.8},children:Qe.jsxs(DP,{className:"border shadow-sm",children:[Qe.jsx(LP,{className:"border-b bg-muted/20",children:Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-purple-500 via-indigo-500 to-blue-500 shadow-md",children:Qe.jsx(pm,{className:"w-5 h-5 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx(BP,{className:"text-lg bg-gradient-to-r from-purple-500 via-indigo-500 to-blue-500 bg-clip-text text-transparent",children:"Doanh thu 6 thng gn nht"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Xu hng tng trng"})]})]}),Qe.jsx("div",{className:"flex items-center gap-2",children:Qe.jsxs(EP,{variant:"outline",className:"gap-1",children:[Qe.jsx(Sg,{className:"w-3 h-3"}),t.revenueGrowth>=0?"+":"",t.revenueGrowth||0,"%"]})})]})}),Qe.jsx(UP,{className:"p-6",children:Qe.jsx("div",{className:"h-[320px]",children:Qe.jsx(NX,{width:"100%",height:"100%",children:Qe.jsxs(Ane,{data:r,margin:{top:10,right:30,left:0,bottom:0},children:[Qe.jsx("defs",{children:Qe.jsxs("linearGradient",{id:"revenueGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[Qe.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.4}),Qe.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:.05})]})}),Qe.jsx(See,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.3}),Qe.jsx(fte,{dataKey:"month",stroke:"hsl(var(--muted-foreground))",fontSize:12}),Qe.jsx(Cte,{stroke:"hsl(var(--muted-foreground))",fontSize:12}),Qe.jsx(Xq,{cursor:{strokeDasharray:"3 3",stroke:"hsl(var(--primary))",opacity:.4},contentStyle:{background:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},labelStyle:{fontWeight:600,color:"hsl(var(--foreground))",fontSize:13},formatter:e=>[`${e}M `,"Doanh thu"]}),Qe.jsx(ite,{type:"monotone",dataKey:"revenue",stroke:"hsl(var(--primary))",strokeWidth:3,fill:"url(#revenueGradient)",animationDuration:800})]})})})})]})}),Qe.jsx(QT.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.8},children:Qe.jsxs(DP,{className:"border shadow-sm",children:[Qe.jsx(LP,{className:"border-b bg-muted/20",children:Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-cyan-500 via-sky-500 to-green-500 shadow-md",children:Qe.jsx(mm,{className:"w-5 h-5 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx(BP,{className:"text-lg bg-gradient-to-r from-cyan-500 via-sky-500 to-green-500 bg-clip-text text-transparent",children:"Doanh s theo danh mc"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Phn b doanh thu"})]})]})}),Qe.jsx(UP,{className:"p-6",children:Qe.jsx(NX,{width:"100%",height:320,children:Qe.jsxs(Cne,{children:[Qe.jsx(Xq,{cursor:{fill:"hsl(var(--muted))",opacity:.05},contentStyle:{background:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 14px rgba(0,0,0,0.08)",color:"#000000"},labelStyle:{fontWeight:600,fontSize:13,color:"#000000",marginBottom:4},formatter:(e,t,n)=>[Qe.jsxs("span",{style:{color:n.payload.color,fontWeight:600},children:[e,"%"]}),t]}),Qe.jsx(t8,{data:a,cx:"50%",cy:"50%",outerRadius:110,innerRadius:55,paddingAngle:4,dataKey:"value",labelLine:!1,isAnimationActive:!0,label:({value:e})=>`${e}%`,children:a.map((e,t)=>Qe.jsx(_X,{fill:e.color,stroke:"#fff",strokeWidth:2,style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.1))",cursor:"pointer",transition:"transform 0.3s ease"},onMouseEnter:e=>{e.target.style.transform="scale(1.05)"},onMouseLeave:e=>{e.target.style.transform="scale(1)"}},`cell-${t}`))}),Qe.jsx(pK,{layout:"horizontal",verticalAlign:"bottom",align:"center",iconType:"circle"})]})})})]})})]}),Qe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[Qe.jsx(QT.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:1.2},children:Qe.jsx(DP,{className:"border shadow-sm",children:Qe.jsxs(UP,{className:"p-6 text-center",children:[Qe.jsx("div",{className:"flex items-center justify-center mb-4",children:Qe.jsx("div",{className:"p-3 rounded-full bg-green-100",children:Qe.jsx(sg,{className:"w-6 h-6 text-green-600"})})}),Qe.jsx("h3",{className:"font-bold text-xl text-green-600",children:t.avgRating?`${t.avgRating}/5`:"0/5"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"nh gi trung bnh"}),Qe.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["T ",t.totalReviews||0," nh gi"]})]})})}),Qe.jsx(QT.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:1.3},children:Qe.jsx(DP,{className:"border shadow-sm",children:Qe.jsxs(UP,{className:"p-6 text-center",children:[Qe.jsx("div",{className:"flex items-center justify-center mb-4",children:Qe.jsx("div",{className:"p-3 rounded-full bg-blue-100",children:Qe.jsx(zg,{className:"w-6 h-6 text-blue-600"})})}),Qe.jsx("h3",{className:"font-bold text-xl text-blue-600",children:t.totalOrders>0?`${Math.round(t.totalDeliveredOrders/t.totalOrders*100)}%`:"0%"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"T l thnh cng"}),Qe.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[t.totalDeliveredOrders||0,"/",t.totalOrders||0," n hng"]})]})})}),Qe.jsx(QT.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:1.4},children:Qe.jsx(DP,{className:"border shadow-sm",children:Qe.jsxs(UP,{className:"p-6 text-center",children:[Qe.jsx("div",{className:"flex items-center justify-center mb-4",children:Qe.jsx("div",{className:"p-3 rounded-full bg-purple-100",children:Qe.jsx(pg,{className:"w-6 h-6 text-purple-600"})})}),Qe.jsx("h3",{className:"font-bold text-xl text-purple-600",children:t.totalProducts||0}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Tng sn phm"}),Qe.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"ang kinh doanh"})]})})})]})]})}const Ewe=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx("div",{className:"relative w-full overflow-auto",children:Qe.jsx("table",{ref:n,className:Rv("w-full caption-bottom text-sm",e),...t})}));Ewe.displayName="Table";const kwe=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx("thead",{ref:n,className:Rv("[&_tr]:border-b",e),...t}));kwe.displayName="TableHeader";const Twe=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx("tbody",{ref:n,className:Rv("[&_tr:last-child]:border-0",e),...t}));Twe.displayName="TableBody";Ve.forwardRef(({className:e,...t},n)=>Qe.jsx("tfoot",{ref:n,className:Rv("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";const Pwe=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx("tr",{ref:n,className:Rv("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...t}));Pwe.displayName="TableRow";const Owe=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx("th",{ref:n,className:Rv("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Owe.displayName="TableHead";const Rwe=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx("td",{ref:n,className:Rv("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Rwe.displayName="TableCell";Ve.forwardRef(({className:e,...t},n)=>Qe.jsx("caption",{ref:n,className:Rv("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption";const Iwe={pending:{label:"Ch x l",variant:"secondary",color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:Em,gradient:"from-yellow-400 to-orange-500"},processing:{label:"ang x l",variant:"default",color:"bg-blue-100 text-blue-800 border-blue-200",icon:Rf,gradient:"from-blue-400 to-indigo-500"},shipped:{label:" gi",variant:"default",color:"bg-purple-100 text-purple-800 border-purple-200",icon:Mg,gradient:"from-purple-400 to-pink-500"},delivered:{label:" giao",variant:"default",color:"bg-green-100 text-green-800 border-green-200",icon:Nm,gradient:"from-green-400 to-emerald-500"},cancelled:{label:" hy",variant:"destructive",color:"bg-red-100 text-red-800 border-red-200",icon:Am,gradient:"from-red-400 to-rose-500"}};function Dwe(){const{user:e}=Pae(),{toast:t}=vh(),[n,r]=Ve.useState(""),[i,a]=Ve.useState(null),[s,o]=Ve.useState("all"),[l,c]=Ve.useState([]),[d,u]=Ve.useState(!0),[h,p]=Ve.useState(!1),[m,f]=Ve.useState(!1);Ve.useEffect(()=>{g(s)},[e,s]);const g=async(n="all")=>{if(null==e?void 0:e.id){u(!0);try{const r=await fetch(`http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/vendor/get_orders.php?user_id=${e.id}&status=${n}`),i=await r.json();i.success?c(i.orders):t({title:"Li",description:i.error||"Khng th ti danh sch n hng",variant:"destructive"})}catch(r){t({title:"Li",description:"Khng th kt ni ti my ch",variant:"destructive"})}finally{u(!1)}}},v=async(n,r)=>{if(null==e?void 0:e.id){p(!0);try{const i=await fetch("http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/vendor/update_order_status.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e.id,order_id:n,status:r})}),o=await i.json();o.success?(t({title:"Thnh cng",description:" cp nht trng thi n hng"}),g(s),a(null)):t({title:"Li",description:o.error||"Khng th cp nht trng thi",variant:"destructive"})}catch(i){t({title:"Li",description:"Khng th kt ni ti my ch",variant:"destructive"})}finally{p(!1)}}},x=()=>n?l.filter(e=>e.code.toLowerCase().includes(n.toLowerCase())||e.customer_name.toLowerCase().includes(n.toLowerCase())):l,y=e=>{const t=Iwe[e],n=t.icon;return Qe.jsxs(EP,{variant:t.variant,className:`${t.color} border font-medium gap-1.5 px-3 py-1.5`,children:[Qe.jsx(n,{className:"w-3.5 h-3.5"}),t.label]})},b=e=>"all"===e?l.length:l.filter(t=>t.status===e).length,w=e=>new Date(e).toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),j={total:l.length,pending:l.filter(e=>"pending"===e.status).length,processing:l.filter(e=>"processing"===e.status).length,delivered:l.filter(e=>"delivered"===e.status).length,revenue:l.reduce((e,t)=>e+t.seller_total,0)};return d?Qe.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:Qe.jsxs(QT.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-4",children:[Qe.jsx("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-primary via-purple-500 to-pink-500 mx-auto w-20 h-20 flex items-center justify-center shadow-xl",children:Qe.jsx(vf,{className:"w-8 h-8 animate-spin text-white"})}),Qe.jsxs("div",{children:[Qe.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"ang ti d liu"}),Qe.jsx("p",{className:"text-muted-foreground",children:"Vui lng i trong giy lt..."})]})]})}):Qe.jsxs("div",{className:"min-h-screen bg-background space-y-8",children:[Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"relative",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/5 via-purple-500/5 to-pink-500/5 rounded-3xl -z-10"}),Qe.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6 p-8",children:[Qe.jsxs("div",{className:"flex items-start gap-6",children:[Qe.jsx(QT.div,{className:"p-4 rounded-2xl bg-gradient-to-br from-blue-500 via-indigo-500 to-purple-500 shadow-xl",animate:{rotate:[0,5,-5,0],scale:[1,1.05,1]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:Qe.jsx(cg,{className:"w-8 h-8 text-white"})}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs("div",{children:[Qe.jsx("h1",{className:"text-4xl md:text-5xl font-black bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500 bg-clip-text text-transparent",children:"Qun l n hng"}),Qe.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[Qe.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),Qe.jsx("p",{className:"text-muted-foreground",children:"Cp nht real-time"})]})]}),Qe.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl",children:" Theo di v x l cc n hng nhanh chng, hiu qu vi h thng qun l thng minh"})]})]}),Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsxs(AP,{variant:"outline",size:"sm",className:"gap-2",onClick:async()=>{f(!0),await g(s),f(!1)},disabled:m,children:[Qe.jsx(qf,{className:"w-4 h-4 "+(m?"animate-spin":"")}),"Lm mi"]}),Qe.jsxs(AP,{variant:"outline",size:"sm",className:"gap-2",children:[Qe.jsx(Bm,{className:"w-4 h-4"}),"Xut bo co"]}),Qe.jsxs(AP,{variant:"outline",size:"sm",className:"gap-2",children:[Qe.jsx(Km,{className:"w-4 h-4"}),"Lc nng cao"]})]})]})]}),Qe.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[{label:"Tng n hng",value:j.total,icon:cg,color:"from-blue-500 to-cyan-500",change:"+12.5%"},{label:"Ch x l",value:j.pending,icon:Em,color:"from-yellow-500 to-orange-500",change:"+5"},{label:"ang x l",value:j.processing,icon:Rf,color:"from-purple-500 to-pink-500",change:"+8"},{label:" giao",value:j.delivered,icon:Nm,color:"from-green-500 to-emerald-500",change:"+15%"},{label:"Doanh thu",value:`${(j.revenue/1e6).toFixed(1)}M`,icon:Sg,color:"from-emerald-500 to-teal-500",change:"+20.8%"}].map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1*t},whileHover:{y:-4,scale:1.02},children:Qe.jsx(DP,{className:"border shadow-sm hover:shadow-md transition-all duration-300",children:Qe.jsxs(UP,{className:"p-6",children:[Qe.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Qe.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${e.color} shadow-sm`,children:Qe.jsx(e.icon,{className:"w-5 h-5 text-white"})}),Qe.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 font-medium",children:[Qe.jsx(em,{className:"w-3 h-3"}),e.change]})]}),Qe.jsxs("div",{className:"space-y-1",children:[Qe.jsx("p",{className:"text-2xl font-bold text-foreground",children:e.value}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:e.label})]})]})})},t))}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:Qe.jsxs(DP,{className:"border shadow-sm",children:[Qe.jsx(LP,{className:"border-b bg-muted/20",children:Qe.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-500",children:Qe.jsx(Wm,{className:"w-5 h-5 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx(BP,{className:"text-lg",children:"Danh sch n hng"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Qun l tt c n hng ca ca hng"})]})]}),Qe.jsxs("div",{className:"relative w-full sm:w-80",children:[Qe.jsx(eg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),Qe.jsx(Vne,{placeholder:"Tm kim theo m n hng hoc tn khch hng...",value:n,onChange:e=>r(e.target.value),className:"pl-10 border-border focus:border-primary"})]})]})}),Qe.jsx(UP,{className:"p-0",children:Qe.jsxs(tae,{value:s,onValueChange:o,children:[Qe.jsx("div",{className:"px-6 pt-4",children:Qe.jsxs(nae,{className:"grid w-full grid-cols-6 bg-muted/50",children:[Qe.jsxs(rae,{value:"all",className:"gap-2",children:["Tt c",Qe.jsx(EP,{variant:"secondary",className:"text-xs",children:b("all")})]}),Qe.jsxs(rae,{value:"pending",className:"gap-2",children:["Ch x l",Qe.jsx(EP,{variant:"secondary",className:"text-xs",children:b("pending")})]}),Qe.jsxs(rae,{value:"processing",className:"gap-2",children:["ang x l",Qe.jsx(EP,{variant:"secondary",className:"text-xs",children:b("processing")})]}),Qe.jsxs(rae,{value:"shipped",className:"gap-2",children:[" gi",Qe.jsx(EP,{variant:"secondary",className:"text-xs",children:b("shipped")})]}),Qe.jsxs(rae,{value:"delivered",className:"gap-2",children:[" giao",Qe.jsx(EP,{variant:"secondary",className:"text-xs",children:b("delivered")})]}),Qe.jsxs(rae,{value:"cancelled",className:"gap-2",children:[" hy",Qe.jsx(EP,{variant:"secondary",className:"text-xs",children:b("cancelled")})]})]})}),Qe.jsx(iae,{value:s,className:"mt-0",children:Qe.jsx("div",{className:"overflow-x-auto",children:Qe.jsxs(Ewe,{children:[Qe.jsx(kwe,{children:Qe.jsxs(Pwe,{className:"bg-muted/20",children:[Qe.jsx(Owe,{className:"font-semibold",children:"M n hng"}),Qe.jsx(Owe,{className:"font-semibold",children:"Khch hng"}),Qe.jsx(Owe,{className:"font-semibold",children:"Sn phm"}),Qe.jsx(Owe,{className:"font-semibold",children:"Tng tin"}),Qe.jsx(Owe,{className:"font-semibold",children:"Trng thi"}),Qe.jsx(Owe,{className:"font-semibold",children:"Ngy t"}),Qe.jsx(Owe,{className:"font-semibold text-right",children:"Thao tc"})]})}),Qe.jsx(Twe,{children:Qe.jsx(eM,{children:0===x().length?Qe.jsx(Pwe,{children:Qe.jsx(Rwe,{colSpan:7,className:"text-center py-12",children:Qe.jsxs("div",{className:"space-y-3",children:[Qe.jsx("div",{className:"w-16 h-16 mx-auto rounded-full bg-muted flex items-center justify-center",children:Qe.jsx(cg,{className:"w-8 h-8 text-muted-foreground"})}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"font-medium text-foreground",children:"Cha c n hng no"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Cc n hng s hin th  y khi khch hng t mua"})]})]})})}):x().map((e,t)=>Qe.jsxs(QT.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{delay:.05*t},className:"hover:bg-muted/30 transition-colors",children:[Qe.jsx(Rwe,{className:"font-medium",children:Qe.jsx("div",{className:"font-mono text-sm bg-muted px-2 py-1 rounded inline-block",children:e.code})}),Qe.jsx(Rwe,{children:Qe.jsxs("div",{className:"space-y-1",children:[Qe.jsx("div",{className:"font-medium text-foreground",children:e.customer_name}),Qe.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[Qe.jsx(Vf,{className:"w-3 h-3"}),e.phone]})]})}),Qe.jsx(Rwe,{children:Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx(Rf,{className:"w-4 h-4 text-muted-foreground"}),Qe.jsx("span",{className:"font-medium",children:e.total_quantity}),Qe.jsx("span",{className:"text-muted-foreground text-sm",children:"sn phm"})]})}),Qe.jsx(Rwe,{children:Qe.jsxs("div",{className:"font-bold text-primary",children:[e.seller_total.toLocaleString("vi-VN"),""]})}),Qe.jsx(Rwe,{children:y(e.status)}),Qe.jsx(Rwe,{children:Qe.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[Qe.jsx(um,{className:"w-3 h-3"}),w(e.created_at)]})}),Qe.jsx(Rwe,{className:"text-right",children:Qe.jsxs(AP,{variant:"outline",size:"sm",onClick:()=>a(e),className:"gap-2 hover:bg-primary hover:text-primary-foreground transition-colors",children:[Qe.jsx(Vm,{className:"w-4 h-4"}),"Chi tit"]})})]},e.id))})})]})})})]})})]})}),Qe.jsx(eM,{children:i&&Qe.jsx(FR,{open:!!i,onOpenChange:()=>a(null),children:Qe.jsx(VR,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:Qe.jsxs(QT.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},children:[Qe.jsx(GR,{className:"border-b pb-4",children:Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("div",{className:"space-y-1",children:[Qe.jsx(KR,{className:"text-2xl font-bold",children:"Chi tit n hng"}),Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsxs("div",{className:"font-mono text-sm bg-muted px-3 py-1 rounded",children:["#",i.code]}),y(i.status)]})]}),Qe.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[Qe.jsx(Em,{className:"w-4 h-4"}),w(i.created_at)]})]})}),Qe.jsxs("div",{className:"space-y-6 pt-6",children:[Qe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Qe.jsxs(DP,{className:"border",children:[Qe.jsx(LP,{className:"pb-3",children:Qe.jsxs(BP,{className:"text-base flex items-center gap-2",children:[Qe.jsx(Og,{className:"w-4 h-4"}),"Thng tin khch hng"]})}),Qe.jsxs(UP,{className:"space-y-3",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-semibold",children:i.customer_name.charAt(0).toUpperCase()}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"font-medium",children:i.customer_name}),Qe.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[Qe.jsx(Vf,{className:"w-3 h-3"}),i.phone]})]})]}),i.email&&Qe.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Qe.jsx(wf,{className:"w-3 h-3 text-muted-foreground"}),Qe.jsx("span",{children:i.email})]})]})]}),Qe.jsxs(DP,{className:"border",children:[Qe.jsx(LP,{className:"pb-3",children:Qe.jsxs(BP,{className:"text-base flex items-center gap-2",children:[Qe.jsx(jf,{className:"w-4 h-4"}),"a ch giao hng"]})}),Qe.jsxs(UP,{children:[Qe.jsx("p",{className:"text-sm leading-relaxed",children:i.address}),i.note&&Qe.jsxs("div",{className:"mt-3 p-3 bg-muted/50 rounded-lg",children:[Qe.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Ghi ch:"}),Qe.jsx("p",{className:"text-sm",children:i.note})]})]})]})]}),Qe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Qe.jsxs(DP,{className:"border",children:[Qe.jsx(LP,{className:"pb-3",children:Qe.jsxs(BP,{className:"text-base flex items-center gap-2",children:[Qe.jsx(Rm,{className:"w-4 h-4"}),"Thng tin thanh ton"]})}),Qe.jsxs(UP,{className:"space-y-3",children:[Qe.jsxs("div",{className:"flex justify-between",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"Phng thc:"}),Qe.jsx("span",{className:"font-medium",children:"cod"===i.payment_method?"Thanh ton khi nhn hng":i.payment_method})]}),Qe.jsxs("div",{className:"flex justify-between",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"Trng thi:"}),Qe.jsx(EP,{variant:"paid"===i.payment_status?"default":"secondary",children:"paid"===i.payment_status?" thanh ton":"Cha thanh ton"})]})]})]}),i.shipping_tracking_code&&Qe.jsxs(DP,{className:"border",children:[Qe.jsx(LP,{className:"pb-3",children:Qe.jsxs(BP,{className:"text-base flex items-center gap-2",children:[Qe.jsx(Mg,{className:"w-4 h-4"}),"Thng tin vn chuyn"]})}),Qe.jsx(UP,{children:Qe.jsxs("div",{children:[Qe.jsx("p",{className:"text-muted-foreground text-sm mb-2",children:"M vn n:"}),Qe.jsx("div",{className:"font-mono text-sm bg-muted p-3 rounded-lg border",children:i.shipping_tracking_code})]})})]})]}),Qe.jsxs(DP,{className:"border",children:[Qe.jsx(LP,{className:"border-b",children:Qe.jsxs(BP,{className:"flex items-center gap-2",children:[Qe.jsx(Rf,{className:"w-5 h-5"}),"Sn phm  t (",i.items.length," sn phm)"]})}),Qe.jsx(UP,{className:"p-0",children:Qe.jsx("div",{className:"space-y-0",children:i.items.map((e,t)=>Qe.jsxs(QT.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"flex gap-4 p-4 border-b last:border-b-0 hover:bg-muted/30 transition-colors",children:[e.product_image?Qe.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden border bg-muted",children:Qe.jsx("img",{src:e.product_image,alt:e.product_name,className:"w-full h-full object-cover"})}):Qe.jsx("div",{className:"w-16 h-16 rounded-lg border bg-muted flex items-center justify-center",children:Qe.jsx(Rf,{className:"w-6 h-6 text-muted-foreground"})}),Qe.jsxs("div",{className:"flex-1",children:[Qe.jsx("h4",{className:"font-medium text-foreground line-clamp-2 mb-2",children:e.product_name}),Qe.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[e.color&&Qe.jsxs("span",{className:"flex items-center gap-1",children:[Qe.jsx("div",{className:"w-3 h-3 rounded-full border border-border",style:{backgroundColor:e.color}}),e.color]}),e.size&&Qe.jsxs("span",{children:["Size: ",e.size]})]}),Qe.jsxs("div",{className:"flex justify-between items-center",children:[Qe.jsx("div",{className:"text-sm",children:Qe.jsxs("span",{className:"text-muted-foreground",children:[e.price.toLocaleString("vi-VN"),"  ",e.quantity]})}),Qe.jsxs("div",{className:"font-semibold text-primary",children:[e.subtotal.toLocaleString("vi-VN"),""]})]})]})]},e.id))})})]}),Qe.jsx(DP,{className:"border",children:Qe.jsx(UP,{className:"p-6",children:Qe.jsxs("div",{className:"space-y-3",children:[Qe.jsxs("div",{className:"flex justify-between text-sm",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"Tng tin hng:"}),Qe.jsxs("span",{className:"font-medium",children:[i.seller_total.toLocaleString("vi-VN"),""]})]}),Qe.jsxs("div",{className:"flex justify-between text-sm",children:[Qe.jsx("span",{className:"text-muted-foreground",children:"Ph vn chuyn:"}),Qe.jsxs("span",{className:"font-medium",children:[i.shipping_fee.toLocaleString("vi-VN"),""]})]}),Qe.jsx("div",{className:"h-px bg-border"}),Qe.jsxs("div",{className:"flex justify-between text-lg font-bold text-primary",children:[Qe.jsx("span",{children:"Tng cng:"}),Qe.jsxs("span",{children:[(i.seller_total+i.shipping_fee).toLocaleString("vi-VN"),""]})]})]})})}),Qe.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[Qe.jsx(AP,{variant:"outline",onClick:()=>a(null),className:"gap-2",children:"ng"}),"pending"===i.status&&Qe.jsxs(AP,{className:"bg-gradient-to-r from-blue-500 to-indigo-500 hover:opacity-90 gap-2",onClick:()=>v(i.id,"processing"),disabled:h,children:[h?Qe.jsx(vf,{className:"w-4 h-4 animate-spin"}):Qe.jsx(Nm,{className:"w-4 h-4"}),"Xc nhn n hng"]}),"processing"===i.status&&Qe.jsxs(AP,{className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:opacity-90 gap-2",onClick:()=>v(i.id,"shipped"),disabled:h,children:[h?Qe.jsx(vf,{className:"w-4 h-4 animate-spin"}):Qe.jsx(Mg,{className:"w-4 h-4"}),"nh du  gi"]}),"shipped"===i.status&&Qe.jsxs(AP,{className:"bg-gradient-to-r from-green-500 to-emerald-500 hover:opacity-90 gap-2",onClick:()=>v(i.id,"delivered"),disabled:h,children:[h?Qe.jsx(vf,{className:"w-4 h-4 animate-spin"}):Qe.jsx(fg,{className:"w-4 h-4"})," giao hng"]})]})]})]})})})})]})}var Lwe="AlertDialog",[Bwe]=jh(Lwe,[eR]),Fwe=eR(),Uwe=e=>{const{__scopeAlertDialog:t,...n}=e,r=Fwe(t);return Qe.jsx(TR,{...r,...n,modal:!0})};Uwe.displayName=Lwe;Ve.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=Fwe(n);return Qe.jsx(PR,{...i,...r,ref:t})}).displayName="AlertDialogTrigger";var zwe=e=>{const{__scopeAlertDialog:t,...n}=e,r=Fwe(t);return Qe.jsx(OR,{...r,...n})};zwe.displayName="AlertDialogPortal";var Hwe=Ve.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=Fwe(n);return Qe.jsx(RR,{...i,...r,ref:t})});Hwe.displayName="AlertDialogOverlay";var Vwe="AlertDialogContent",[Gwe,Wwe]=Bwe(Vwe),Kwe=Mh("AlertDialogContent"),qwe=Ve.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...i}=e,a=Fwe(n),s=Ve.useRef(null),o=wh(t,s),l=Ve.useRef(null);return Qe.jsx(AR,{contentName:Vwe,titleName:Xwe,docsSlug:"alert-dialog",children:Qe.jsx(Gwe,{scope:n,cancelRef:l,children:Qe.jsxs(IR,{role:"alertdialog",...a,...i,ref:o,onOpenAutoFocus:xh(i.onOpenAutoFocus,e=>{var t;e.preventDefault(),null==(t=l.current)||t.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[Qe.jsx(Kwe,{children:r}),Qe.jsx(tje,{contentRef:s})]})})})});qwe.displayName=Vwe;var Xwe="AlertDialogTitle",$we=Ve.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=Fwe(n);return Qe.jsx(DR,{...i,...r,ref:t})});$we.displayName=Xwe;var Ywe="AlertDialogDescription",Jwe=Ve.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=Fwe(n);return Qe.jsx(LR,{...i,...r,ref:t})});Jwe.displayName=Ywe;var Zwe=Ve.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=Fwe(n);return Qe.jsx(BR,{...i,...r,ref:t})});Zwe.displayName="AlertDialogAction";var Qwe="AlertDialogCancel",eje=Ve.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:i}=Wwe(Qwe,n),a=Fwe(n),s=wh(t,i);return Qe.jsx(BR,{...a,...r,ref:s})});eje.displayName=Qwe;var tje=({contentRef:e})=>{const t=`\`${Vwe}\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \`${Vwe}\` by passing a \`${Ywe}\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Vwe}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return Ve.useEffect(()=>{var t;document.getElementById(null==(t=e.current)?void 0:t.getAttribute("aria-describedby"))},[t,e]),null},nje=Hwe,rje=qwe,ije=Zwe,aje=eje,sje=$we,oje=Jwe;const lje=Uwe,cje=zwe,dje=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(nje,{className:Rv("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));dje.displayName=nje.displayName;const uje=Ve.forwardRef(({className:e,...t},n)=>Qe.jsxs(cje,{children:[Qe.jsx(dje,{}),Qe.jsx(rje,{ref:n,className:Rv("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));uje.displayName=rje.displayName;const hje=({className:e,...t})=>Qe.jsx("div",{className:Rv("flex flex-col space-y-2 text-center sm:text-left",e),...t});hje.displayName="AlertDialogHeader";const pje=({className:e,...t})=>Qe.jsx("div",{className:Rv("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});pje.displayName="AlertDialogFooter";const mje=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(sje,{ref:n,className:Rv("text-lg font-semibold",e),...t}));mje.displayName=sje.displayName;const fje=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(oje,{ref:n,className:Rv("text-sm text-muted-foreground",e),...t}));fje.displayName=oje.displayName;const gje=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(ije,{ref:n,className:Rv(CP(),e),...t}));gje.displayName=ije.displayName;const vje=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(aje,{ref:n,className:Rv(CP({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));vje.displayName=aje.displayName;const xje={active:{label:"ang bn",variant:"default",color:"bg-green-100 text-green-800 border-green-200",icon:_m,gradient:"from-green-400 to-emerald-500"},inactive:{label:"Ngng bn",variant:"secondary",color:"bg-gray-100 text-gray-800 border-gray-200",icon:$p,gradient:"from-gray-400 to-slate-500"},out_of_stock:{label:"Ht hng",variant:"destructive",color:"bg-red-100 text-red-800 border-red-200",icon:Cg,gradient:"from-red-400 to-rose-500"}};function yje(){const e=Zj(),{toast:t}=vh(),{user:n}=Pae(),[r,i]=Ve.useState([]),[a,s]=Ve.useState(!0),[o,l]=Ve.useState(""),[c,d]=Ve.useState(null),[u,h]=Ve.useState(null),[p,m]=Ve.useState(!1),[f,g]=Ve.useState(null),[v,x]=Ve.useState(!1),y=async()=>{if(null==n?void 0:n.id){s(!0);try{const e=await fetch(`http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/vendor/products_list.php?user_id=${n.id}`),r=await e.json();r.success?i(r.products):t({title:"Li",description:r.error||"Khng th ti danh sch sn phm",variant:"destructive"})}catch(e){t({title:"Li",description:"Khng th kt ni n server",variant:"destructive"})}finally{s(!1)}}};Ve.useEffect(()=>{y()},[n]);const b=r.filter(e=>e.name.toLowerCase().includes(o.toLowerCase())||e.id.toLowerCase().includes(o.toLowerCase())),w=e=>{const t=xje[e],n=t.icon;return Qe.jsxs(EP,{variant:t.variant,className:`${t.color} border font-medium gap-1.5 px-3 py-1.5`,children:[Qe.jsx(n,{className:"w-3.5 h-3.5"}),t.label]})},j=e=>{if(!e)return null;if(e.startsWith("http://")||e.startsWith("https://"))return e;const t="http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE";return e.startsWith("uploads/")?`${t}/${e}`:`${t}/uploads/products/${e}`},N=async(e,r)=>{if((null==n?void 0:n.id)&&0!==e.stock){g(e.id);try{const a=parseInt(e.id.replace("SP","")),s=await fetch("http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/vendor/update_product_status.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_id:a,user_id:n.id,status:r})}),o=await s.json();o.success?(t({title:"Thnh cng",description:o.message}),i(t=>t.map(t=>t.id===e.id?{...t,status:r}:t))):t({title:"Li",description:o.error||"Khng th cp nht trng thi",variant:"destructive"})}catch(a){t({title:"Li",description:"Khng th kt ni n server",variant:"destructive"})}finally{g(null)}}},_={total:r.length,active:r.filter(e=>"active"===e.status).length,outOfStock:r.filter(e=>0===e.stock||"out_of_stock"===e.status).length,totalSales:r.reduce((e,t)=>e+t.sales,0),totalRevenue:r.reduce((e,t)=>e+t.price*t.sales,0)};return a?Qe.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:Qe.jsxs(QT.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-4",children:[Qe.jsx("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-purple-500 via-pink-500 to-rose-500 mx-auto w-20 h-20 flex items-center justify-center shadow-xl",children:Qe.jsx(vf,{className:"w-8 h-8 animate-spin text-white"})}),Qe.jsxs("div",{children:[Qe.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"ang ti sn phm"}),Qe.jsx("p",{className:"text-muted-foreground",children:"Vui lng i trong giy lt..."})]})]})}):Qe.jsxs("div",{className:"min-h-screen bg-background space-y-8",children:[Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"relative",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/5 via-pink-500/5 to-rose-500/5 rounded-3xl -z-10"}),Qe.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6 p-8",children:[Qe.jsxs("div",{className:"flex items-start gap-6",children:[Qe.jsx(QT.div,{className:"p-4 rounded-2xl bg-gradient-to-br from-purple-500 via-pink-500 to-rose-500 shadow-xl",animate:{rotate:[0,5,-5,0],scale:[1,1.05,1]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:Qe.jsx(Rf,{className:"w-8 h-8 text-white"})}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs("div",{children:[Qe.jsx("h1",{className:"text-4xl md:text-5xl font-black bg-gradient-to-r from-purple-500 via-pink-500 to-rose-500 bg-clip-text text-transparent",children:"Qun l sn phm"}),Qe.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[Qe.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),Qe.jsx("p",{className:"text-muted-foreground",children:"Cp nht real-time"})]})]}),Qe.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl",children:" Qun l ton b kho sn phm vi dashboard thng minh v analytics chi tit"})]})]}),Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsxs(AP,{variant:"outline",size:"sm",className:"gap-2",onClick:async()=>{x(!0),await y(),x(!1)},disabled:v,children:[Qe.jsx(qf,{className:"w-4 h-4 "+(v?"animate-spin":"")}),"Lm mi"]}),Qe.jsxs(AP,{variant:"outline",size:"sm",className:"gap-2",children:[Qe.jsx(Bm,{className:"w-4 h-4"}),"Xut bo co"]}),Qe.jsxs(AP,{onClick:()=>e("/vendor-management/add-product"),className:"bg-gradient-to-r from-purple-500 via-pink-500 to-rose-500 hover:opacity-90 gap-2 shadow-lg",children:[Qe.jsx(Wf,{className:"w-4 h-4"}),"Thm sn phm"]})]})]})]}),Qe.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[{label:"Tng sn phm",value:_.total,icon:Rf,color:"from-blue-500 to-cyan-500",change:"+12"},{label:"ang bn",value:_.active,icon:_m,color:"from-green-500 to-emerald-500",change:`${Math.round(_.active/_.total*100)}%`},{label:"Ht hng",value:_.outOfStock,icon:Cg,color:"from-red-500 to-rose-500",change:_.outOfStock>0?"Cn nhp":"n nh"},{label:" bn",value:_.totalSales,icon:Sg,color:"from-purple-500 to-pink-500",change:"+25.8%"},{label:"Doanh thu",value:`${(_.totalRevenue/1e6).toFixed(1)}M`,icon:Lm,color:"from-amber-500 to-orange-500",change:"+18.2%"}].map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1*t},whileHover:{y:-4,scale:1.02},children:Qe.jsx(DP,{className:"border shadow-sm hover:shadow-md transition-all duration-300",children:Qe.jsxs(UP,{className:"p-6",children:[Qe.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Qe.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${e.color} shadow-sm`,children:Qe.jsx(e.icon,{className:"w-5 h-5 text-white"})}),Qe.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 font-medium",children:[Qe.jsx(em,{className:"w-3 h-3"}),e.change]})]}),Qe.jsxs("div",{className:"space-y-1",children:[Qe.jsx("p",{className:"text-2xl font-bold text-foreground",children:e.value}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:e.label})]})]})})},t))}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:Qe.jsxs(DP,{className:"border shadow-sm",children:[Qe.jsx(LP,{className:"border-b bg-muted/20",children:Qe.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-500",children:Qe.jsx(pm,{className:"w-5 h-5 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx(BP,{className:"text-lg",children:"Danh sch sn phm"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Qun l ton b kho hng ca ca hng"})]})]}),Qe.jsxs("div",{className:"flex gap-3",children:[Qe.jsxs(AP,{variant:"outline",size:"sm",className:"gap-2",children:[Qe.jsx(Km,{className:"w-4 h-4"}),"Lc"]}),Qe.jsxs("div",{className:"relative w-full sm:w-80",children:[Qe.jsx(eg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),Qe.jsx(Vne,{placeholder:"Tm kim theo tn hoc m sn phm...",value:o,onChange:e=>l(e.target.value),className:"pl-10 border-border"})]})]})]})}),Qe.jsx(UP,{className:"p-0",children:Qe.jsx("div",{className:"overflow-x-auto",children:Qe.jsxs(Ewe,{children:[Qe.jsx(kwe,{children:Qe.jsxs(Pwe,{className:"bg-muted/20",children:[Qe.jsx(Owe,{className:"font-semibold",children:"Sn phm"}),Qe.jsx(Owe,{className:"font-semibold",children:"M SP"}),Qe.jsx(Owe,{className:"font-semibold",children:"Danh mc"}),Qe.jsx(Owe,{className:"font-semibold",children:"Gi bn"}),Qe.jsx(Owe,{className:"font-semibold",children:"Tn kho"}),Qe.jsx(Owe,{className:"font-semibold",children:" bn"}),Qe.jsx(Owe,{className:"font-semibold",children:"nh gi"}),Qe.jsx(Owe,{className:"font-semibold",children:"Trng thi"}),Qe.jsx(Owe,{className:"font-semibold text-right",children:"Thao tc"})]})}),Qe.jsx(Twe,{children:Qe.jsx(eM,{children:0===b.length?Qe.jsx(Pwe,{children:Qe.jsx(Rwe,{colSpan:9,className:"text-center py-12",children:Qe.jsxs("div",{className:"space-y-3",children:[Qe.jsx("div",{className:"w-16 h-16 mx-auto rounded-full bg-muted flex items-center justify-center",children:Qe.jsx(Rf,{className:"w-8 h-8 text-muted-foreground"})}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"font-medium text-foreground",children:o?"Khng tm thy sn phm no":"Cha c sn phm no"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:!o&&"Thm sn phm u tin  bt u bn hng"})]}),!o&&Qe.jsxs(AP,{onClick:()=>e("/vendor-management/add-product"),className:"mt-4 bg-gradient-to-r from-purple-500 to-pink-500 hover:opacity-90",children:[Qe.jsx(Wf,{className:"w-4 h-4 mr-2"}),"Thm sn phm u tin"]})]})})}):b.map((t,n)=>Qe.jsxs(QT.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{delay:.05*n},className:"hover:bg-muted/30 transition-colors",children:[Qe.jsx(Rwe,{children:Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"w-14 h-14 rounded-lg border bg-muted overflow-hidden shadow-sm",children:t.image?Qe.jsx("img",{src:j(t.image)||"",alt:t.name,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none",e.currentTarget.parentElement.innerHTML='\n                                        <div class="w-full h-full flex items-center justify-center bg-muted">\n                                          <svg class="w-6 h-6 text-muted-foreground" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />\n                                          </svg>\n                                        </div>\n                                      '}}):Qe.jsx("div",{className:"w-full h-full flex items-center justify-center",children:Qe.jsx(df,{className:"w-6 h-6 text-muted-foreground"})})}),Qe.jsxs("div",{className:"min-w-0 flex-1",children:[Qe.jsx("h4",{className:"font-medium text-foreground line-clamp-2 text-sm",children:t.name}),Qe.jsx("div",{className:"flex items-center gap-2 mt-1",children:Qe.jsxs(EP,{variant:"outline",className:"text-xs",children:[Qe.jsx(xg,{className:"w-3 h-3 mr-1"}),t.category]})})]})]})}),Qe.jsx(Rwe,{children:Qe.jsx("div",{className:"font-mono text-sm bg-muted px-2 py-1 rounded inline-block",children:t.id})}),Qe.jsx(Rwe,{children:Qe.jsx("span",{className:"text-sm text-muted-foreground",children:t.category})}),Qe.jsx(Rwe,{children:Qe.jsxs("div",{className:"font-bold text-primary",children:[t.price.toLocaleString("vi-VN"),""]})}),Qe.jsx(Rwe,{children:Qe.jsxs("div",{className:"space-y-1",children:[Qe.jsx("div",{className:"font-medium "+(0===t.stock?"text-red-600":"text-foreground"),children:t.stock}),t.initial_stock&&Qe.jsxs("div",{className:"text-xs text-muted-foreground",children:["/ ",t.initial_stock]})]})}),Qe.jsx(Rwe,{children:Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx(cg,{className:"w-4 h-4 text-muted-foreground"}),Qe.jsx("span",{className:"font-medium",children:t.sales})]})}),Qe.jsx(Rwe,{children:Qe.jsxs("div",{className:"flex items-center gap-1",children:[Qe.jsx(fg,{className:"w-4 h-4 text-yellow-500 fill-current"}),Qe.jsx("span",{className:"font-medium text-sm",children:t.rating})]})}),Qe.jsx(Rwe,{children:w(t.status)}),Qe.jsx(Rwe,{className:"text-right",children:Qe.jsxs(gle,{children:[Qe.jsx(vle,{asChild:!0,children:Qe.jsx(AP,{variant:"ghost",size:"sm",disabled:f===t.id,className:"h-8 w-8 p-0",children:f===t.id?Qe.jsx(vf,{className:"w-4 h-4 animate-spin"}):Qe.jsx(Fm,{className:"w-4 h-4"})})}),Qe.jsxs(xle,{align:"end",className:"w-48",children:[Qe.jsx(ble,{children:"Thao tc"}),Qe.jsx(wle,{}),Qe.jsxs(yle,{onClick:()=>d(t),children:[Qe.jsx(Vm,{className:"w-4 h-4 mr-2"}),"Xem chi tit"]}),Qe.jsxs(yle,{onClick:()=>e(`/vendor-management/edit-product/${t.id.replace("SP","")}`),children:[Qe.jsx(mg,{className:"w-4 h-4 mr-2"}),"Chnh sa"]}),Qe.jsx(wle,{}),t.stock>0&&Qe.jsxs(Qe.Fragment,{children:["active"===t.status?Qe.jsxs(yle,{onClick:()=>N(t,"inactive"),className:"text-orange-600",children:[Qe.jsx(Am,{className:"w-4 h-4 mr-2"}),"Ngng bn"]}):Qe.jsxs(yle,{onClick:()=>N(t,"active"),className:"text-green-600",children:[Qe.jsx(_m,{className:"w-4 h-4 mr-2"}),"Kch hot"]}),Qe.jsx(wle,{})]}),Qe.jsxs(yle,{onClick:()=>h(t),className:"text-red-600",children:[Qe.jsx(Ng,{className:"w-4 h-4 mr-2"}),"Xa sn phm"]})]})]})})]},t.id))})})]})})})]})}),Qe.jsx(eM,{children:c&&Qe.jsx(FR,{open:!!c,onOpenChange:()=>d(null),children:Qe.jsx(VR,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:Qe.jsxs(QT.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},children:[Qe.jsx(GR,{className:"border-b pb-4",children:Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("div",{className:"space-y-1",children:[Qe.jsx(KR,{className:"text-2xl font-bold",children:"Chi tit sn phm"}),Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"font-mono text-sm bg-muted px-3 py-1 rounded",children:c.id}),w(c.status)]})]}),Qe.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[Qe.jsx(um,{className:"w-4 h-4"}),c.created_at?new Date(c.created_at).toLocaleDateString("vi-VN"):"N/A"]})]})}),Qe.jsxs("div",{className:"pt-6 space-y-6",children:[Qe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Qe.jsx(DP,{className:"border",children:Qe.jsx(UP,{className:"p-6",children:Qe.jsxs("div",{className:"space-y-4",children:[Qe.jsx("div",{className:"w-full h-64 rounded-lg border bg-muted overflow-hidden",children:c.image?Qe.jsx("img",{src:j(c.image)||"",alt:c.name,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none",e.currentTarget.parentElement.innerHTML='\n                                    <div class="w-full h-full flex flex-col items-center justify-center text-muted-foreground space-y-2">\n                                      <svg class="w-16 h-16" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />\n                                      </svg>\n                                      <p class="text-sm">Khng c nh</p>\n                                    </div>\n                                  '}}):Qe.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-muted-foreground space-y-2",children:[Qe.jsx(df,{className:"w-16 h-16"}),Qe.jsx("p",{className:"text-sm",children:"Khng c nh"})]})}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx("h3",{className:"text-xl font-bold text-foreground",children:c.name}),Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsxs(EP,{variant:"outline",className:"gap-1",children:[Qe.jsx(xg,{className:"w-3 h-3"}),c.category]}),Qe.jsxs("div",{className:"flex items-center gap-1",children:[Qe.jsx(fg,{className:"w-4 h-4 text-yellow-500 fill-current"}),Qe.jsx("span",{className:"font-medium text-sm",children:c.rating})]})]})]})]})})}),Qe.jsxs(DP,{className:"border",children:[Qe.jsx(LP,{children:Qe.jsxs(BP,{className:"text-lg flex items-center gap-2",children:[Qe.jsx(Xp,{className:"w-5 h-5"}),"Thng k hiu sut"]})}),Qe.jsxs(UP,{className:"space-y-4",children:[Qe.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Qe.jsxs("div",{className:"p-4 rounded-lg bg-green-50 border border-green-200",children:[Qe.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Qe.jsx(Lm,{className:"w-4 h-4 text-green-600"}),Qe.jsx("span",{className:"text-sm text-green-600 font-medium",children:"Gi bn"})]}),Qe.jsxs("p",{className:"text-2xl font-bold text-green-700",children:[c.price.toLocaleString("vi-VN"),""]})]}),Qe.jsxs("div",{className:"p-4 rounded-lg bg-blue-50 border border-blue-200",children:[Qe.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Qe.jsx(Rf,{className:"w-4 h-4 text-blue-600"}),Qe.jsx("span",{className:"text-sm text-blue-600 font-medium",children:"Tn kho"})]}),Qe.jsx("p",{className:"text-2xl font-bold text-blue-700",children:c.stock}),Qe.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["/ ",c.initial_stock||"N/A"]})]}),Qe.jsxs("div",{className:"p-4 rounded-lg bg-purple-50 border border-purple-200",children:[Qe.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Qe.jsx(Sg,{className:"w-4 h-4 text-purple-600"}),Qe.jsx("span",{className:"text-sm text-purple-600 font-medium",children:" bn"})]}),Qe.jsx("p",{className:"text-2xl font-bold text-purple-700",children:c.sales})]}),Qe.jsxs("div",{className:"p-4 rounded-lg bg-amber-50 border border-amber-200",children:[Qe.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Qe.jsx(Lm,{className:"w-4 h-4 text-amber-600"}),Qe.jsx("span",{className:"text-sm text-amber-600 font-medium",children:"Doanh thu"})]}),Qe.jsxs("p",{className:"text-xl font-bold text-amber-700",children:[(c.price*c.sales).toLocaleString("vi-VN"),""]})]})]}),Qe.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[Qe.jsxs("div",{className:"flex justify-between items-center",children:[Qe.jsx("span",{className:"text-sm text-muted-foreground",children:"T l bn hng:"}),Qe.jsx("span",{className:"font-medium",children:c.initial_stock?`${Math.round(c.sales/c.initial_stock*100)}%`:"N/A"})]}),Qe.jsxs("div",{className:"flex justify-between items-center",children:[Qe.jsx("span",{className:"text-sm text-muted-foreground",children:"Trng thi kho:"}),Qe.jsx("span",{className:"font-medium "+(0===c.stock?"text-red-600":c.stock<10?"text-yellow-600":"text-green-600"),children:0===c.stock?"Ht hng":c.stock<10?"Sp ht":"Cn "})]})]})]})]})]}),Qe.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[Qe.jsx(AP,{variant:"outline",onClick:()=>d(null),className:"gap-2",children:"ng"}),c.stock>0&&"active"===c.status&&Qe.jsxs(AP,{variant:"outline",onClick:()=>N(c,"inactive"),className:"gap-2 text-orange-600 border-orange-200 hover:bg-orange-50",children:[Qe.jsx(Am,{className:"w-4 h-4"}),"Ngng bn"]}),c.stock>0&&"active"!==c.status&&Qe.jsxs(AP,{variant:"outline",onClick:()=>N(c,"active"),className:"gap-2 text-green-600 border-green-200 hover:bg-green-50",children:[Qe.jsx(_m,{className:"w-4 h-4"}),"Kch hot"]}),Qe.jsxs(AP,{className:"bg-gradient-to-r from-purple-500 via-pink-500 to-rose-500 hover:opacity-90 gap-2",onClick:()=>{d(null),e(`/vendor-management/edit-product/${c.id.replace("SP","")}`)},children:[Qe.jsx(mg,{className:"w-4 h-4"}),"Chnh sa"]})]})]})]})})})}),Qe.jsx(eM,{children:u&&Qe.jsx(lje,{open:!!u,onOpenChange:()=>h(null),children:Qe.jsx(uje,{className:"max-w-md",children:Qe.jsxs(QT.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[Qe.jsxs(hje,{className:"text-center space-y-4",children:[Qe.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-gradient-to-br from-red-500 to-rose-500 flex items-center justify-center shadow-lg",children:Qe.jsx(Cg,{className:"w-8 h-8 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx(mje,{className:"text-xl font-bold text-red-700",children:"Xc nhn xa sn phm"}),Qe.jsxs(fje,{className:"text-center text-muted-foreground mt-2",children:["Bn c chc chn mun xa sn phm",Qe.jsxs("span",{className:"font-semibold text-foreground",children:[' "',u.name,'"']}),"?",Qe.jsx("br",{}),Qe.jsx("span",{className:"text-red-600 text-sm font-medium",children:"Hnh ng ny khng th hon tc!"})]})]})]}),Qe.jsxs(pje,{className:"flex gap-2 pt-4",children:[Qe.jsx(vje,{disabled:p,className:"flex-1",children:"Hy b"}),Qe.jsx(gje,{onClick:async()=>{if(u&&(null==n?void 0:n.id)){m(!0);try{const e=parseInt(u.id.replace("SP","")),r=await fetch("http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/vendor/delete_product.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_id:e,user_id:n.id})}),i=await r.json();i.success?(t({title:"Thnh cng",description:` xa sn phm ${u.name}`}),await y(),h(null)):t({title:"Li",description:i.message||"Khng th xa sn phm",variant:"destructive"})}catch(e){t({title:"Li",description:"Khng th kt ni n server",variant:"destructive"})}finally{m(!1)}}},disabled:p,className:"flex-1 bg-gradient-to-r from-red-500 to-rose-500 hover:opacity-90",children:p?Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(vf,{className:"w-4 h-4 mr-2 animate-spin"}),"ang xa..."]}):Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(Ng,{className:"w-4 h-4 mr-2"}),"Xa sn phm"]})})]})]})})})})]})}function bje(){const{user:e}=Pae(),{toast:t}=vh(),[n,r]=Ve.useState(!0),[i,a]=Ve.useState(null),[s]=Ve.useState((new Date).getFullYear()),[o,l]=Ve.useState(null);Ve.useEffect(()=>{(null==e?void 0:e.id)&&c()},[e,s]);const c=async()=>{if(null==e?void 0:e.id){r(!0),a(null);try{const n=`http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/vendor/analytics_dashboard.php?user_id=${e.id}&year=${s}`,r=await fetch(n,{method:"GET",headers:{Accept:"application/json"}}),i=r.headers.get("content-type");if(!i||!i.includes("application/json")){await r.text();throw new Error("Server khng tr v JSON. Vui lng kim tra li cu hnh.")}const o=await r.json();if(o.success)l(o),a(null);else{const e=o.error||"Khng th ti d liu thng k";a(e),t({title:"Li",description:e,variant:"destructive"})}}catch(n){const e=n instanceof Error?n.message:"Khng th kt ni n server";a(e),t({title:"Li kt ni",description:e,variant:"destructive"})}finally{r(!1)}}};return n?Qe.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:Qe.jsxs("div",{className:"text-center",children:[Qe.jsx(vf,{className:"w-12 h-12 animate-spin text-primary mx-auto"}),Qe.jsx("p",{className:"mt-4 text-muted-foreground",children:"ang ti d liu thng k..."})]})}):i?Qe.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:Qe.jsxs("div",{className:"text-center max-w-md",children:[Qe.jsx(jm,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),Qe.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Khng th ti d liu"}),Qe.jsx("p",{className:"text-muted-foreground mb-4",children:i}),Qe.jsxs(AP,{onClick:c,variant:"outline",children:[Qe.jsx(qf,{className:"w-4 h-4 mr-2"}),"Th li"]})]})}):o&&o.overview?Qe.jsxs("div",{className:"space-y-6",children:[Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"mb-6",children:[Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-tr from-indigo-500 to-purple-500 text-white shadow-md",children:Qe.jsx(pm,{className:"w-6 h-6"})}),Qe.jsxs("div",{children:[Qe.jsxs("h1",{className:"text-3xl font-extrabold bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 bg-clip-text text-transparent tracking-tight",children:["Bo co & Thng k ",s]}),Qe.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Phn tch chi tit hiu sut kinh doanh v xu hng doanh thu"})]})]}),Qe.jsxs(AP,{onClick:c,variant:"outline",size:"sm",children:[Qe.jsx(qf,{className:"w-4 h-4 mr-2"}),"Lm mi"]})]}),Qe.jsx("div",{className:"mt-4 h-[2px] w-full bg-gradient-to-r from-indigo-500 via-purple-400 to-pink-400 rounded-full opacity-60"})]}),Qe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[Qe.jsx(DP,{children:Qe.jsx(UP,{className:"pt-6",children:Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("div",{children:[Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Tng doanh thu"}),Qe.jsxs("p",{className:"text-2xl font-bold",children:[(o.overview.total_revenue/1e6).toFixed(1),"M "]})]}),Qe.jsx("div",{className:"p-3 rounded-xl bg-green-100 text-green-600",children:Qe.jsx(Lm,{className:"w-6 h-6"})})]})})}),Qe.jsx(DP,{children:Qe.jsx(UP,{className:"pt-6",children:Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("div",{children:[Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Tng n hng"}),Qe.jsx("p",{className:"text-2xl font-bold",children:o.overview.total_orders})]}),Qe.jsx("div",{className:"p-3 rounded-xl bg-blue-100 text-blue-600",children:Qe.jsx(lg,{className:"w-6 h-6"})})]})})}),Qe.jsx(DP,{children:Qe.jsx(UP,{className:"pt-6",children:Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("div",{children:[Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Khch hng"}),Qe.jsx("p",{className:"text-2xl font-bold",children:o.overview.total_customers})]}),Qe.jsx("div",{className:"p-3 rounded-xl bg-purple-100 text-purple-600",children:Qe.jsx(Og,{className:"w-6 h-6"})})]})})}),Qe.jsx(DP,{children:Qe.jsx(UP,{className:"pt-6",children:Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("div",{children:[Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Gi tr TB/n"}),Qe.jsxs("p",{className:"text-2xl font-bold",children:[(o.overview.avg_order_value/1e3).toFixed(0),"K "]})]}),Qe.jsx("div",{className:"p-3 rounded-xl bg-orange-100 text-orange-600",children:Qe.jsx(Sg,{className:"w-6 h-6"})})]})})})]}),Qe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Qe.jsxs(DP,{children:[Qe.jsx(LP,{className:"pb-2",children:Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-tr from-green-500 to-emerald-400 text-white shadow-md",children:Qe.jsx(Sg,{className:"w-5 h-5"})}),Qe.jsxs("div",{children:[Qe.jsxs(BP,{className:"text-lg font-bold text-foreground",children:["Doanh thu theo thng (",s,")"]}),Qe.jsx(FP,{className:"text-sm text-muted-foreground",children:"Biu  th hin xu hng doanh thu tng trng qua tng thng"})]})]})}),Qe.jsx(UP,{children:Qe.jsx("div",{className:"w-full h-[320px]",children:Qe.jsx(NX,{width:"100%",height:"100%",children:Qe.jsxs(Ane,{data:o.revenue_data,margin:{top:10,right:30,left:0,bottom:0},children:[Qe.jsx("defs",{children:Qe.jsxs("linearGradient",{id:"revenueGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[Qe.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.4}),Qe.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:.05})]})}),Qe.jsx(See,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.3}),Qe.jsx(fte,{dataKey:"month",stroke:"hsl(var(--muted-foreground))",fontSize:12}),Qe.jsx(Cte,{stroke:"hsl(var(--muted-foreground))",fontSize:12}),Qe.jsx(Xq,{contentStyle:{background:"black",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"12px",padding:"10px 14px",boxShadow:"0 4px 15px rgba(0,0,0,0.08)"},formatter:e=>[`${e}M `,"Doanh thu"]}),Qe.jsx(ite,{type:"monotone",dataKey:"revenue",stroke:"hsl(var(--primary))",strokeWidth:3,fill:"url(#revenueGradient)"})]})})})})]}),Qe.jsxs(DP,{children:[Qe.jsx(LP,{className:"pb-2",children:Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-tr from-blue-500 to-indigo-400 text-white shadow-md",children:Qe.jsx(pm,{className:"w-5 h-5"})}),Qe.jsxs("div",{children:[Qe.jsx(BP,{className:"text-lg font-bold text-foreground",children:"n hng & Khch hng mi"}),Qe.jsx(FP,{className:"text-sm text-muted-foreground",children:"So snh lng n hng v khch hng mi theo tng thng"})]})]})}),Qe.jsx(UP,{children:Qe.jsx("div",{className:"w-full h-[320px]",children:Qe.jsx(NX,{width:"100%",height:"100%",children:Qe.jsxs(Sne,{data:o.revenue_data,margin:{top:10,right:30,left:0,bottom:0},children:[Qe.jsxs("defs",{children:[Qe.jsxs("linearGradient",{id:"ordersGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[Qe.jsx("stop",{offset:"0%",stopColor:"hsl(var(--primary))",stopOpacity:.9}),Qe.jsx("stop",{offset:"100%",stopColor:"hsl(var(--primary))",stopOpacity:.4})]}),Qe.jsxs("linearGradient",{id:"customersGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[Qe.jsx("stop",{offset:"0%",stopColor:"hsl(var(--chart-2))",stopOpacity:.9}),Qe.jsx("stop",{offset:"100%",stopColor:"hsl(var(--chart-2))",stopOpacity:.4})]})]}),Qe.jsx(See,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.3}),Qe.jsx(fte,{dataKey:"month",stroke:"hsl(var(--muted-foreground))",fontSize:12}),Qe.jsx(Cte,{stroke:"hsl(var(--muted-foreground))",fontSize:12}),Qe.jsx(Xq,{contentStyle:{background:"black",border:"1px solid rgba(0,0,0,0.1)",borderRadius:"12px",padding:"10px 14px"},formatter:(e,t)=>[`${e} ${"n hng"===t?"n":"khch"}`,t]}),Qe.jsx(y9,{dataKey:"orders",name:"n hng",fill:"url(#ordersGradient)",radius:[8,8,0,0],barSize:20}),Qe.jsx(y9,{dataKey:"customers",name:"Khch hng",fill:"url(#customersGradient)",radius:[8,8,0,0],barSize:20})]})})})})]}),o.category_data&&o.category_data.length>0&&Qe.jsxs(DP,{children:[Qe.jsx(LP,{children:Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-tr from-violet-500 to-indigo-400 text-white shadow-md",children:Qe.jsx(mm,{className:"w-5 h-5"})}),Qe.jsxs("div",{children:[Qe.jsx(BP,{className:"text-lg font-bold text-foreground",children:"Doanh s theo danh mc"}),Qe.jsx(FP,{className:"text-sm text-muted-foreground",children:"Phn b t l doanh s gia cc danh mc sn phm"})]})]})}),Qe.jsx(UP,{children:Qe.jsx(NX,{width:"100%",height:320,children:Qe.jsxs(Cne,{children:[Qe.jsx(Xq,{contentStyle:{background:"linear-gradient(145deg, #fff, #f9fafb)",border:"1px solid #e5e7eb",borderRadius:"10px",padding:"10px 14px"},formatter:(e,t,n)=>[Qe.jsxs("span",{style:{color:n.payload.color,fontWeight:600},children:[e,"%"]}),t]}),Qe.jsx(t8,{data:o.category_data,cx:"50%",cy:"50%",outerRadius:110,innerRadius:55,paddingAngle:4,dataKey:"value",label:({value:e})=>`${e}%`,children:o.category_data.map((e,t)=>Qe.jsx(_X,{fill:e.color,stroke:"#fff",strokeWidth:2},`cell-${t}`))}),Qe.jsx(pK,{layout:"horizontal",verticalAlign:"bottom",align:"center",iconType:"circle"})]})})})]}),Qe.jsxs(DP,{children:[Qe.jsx(LP,{children:Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-tr from-orange-400 to-amber-500 text-white shadow-md",children:Qe.jsx(Xp,{className:"w-5 h-5"})}),Qe.jsxs("div",{children:[Qe.jsx(BP,{className:"text-lg font-bold text-foreground",children:"Xu hng tun ny"}),Qe.jsx(FP,{className:"text-sm text-muted-foreground",children:"Biu  so snh doanh thu v s n hng trong 7 ngy gn nht"})]})]})}),Qe.jsx(UP,{children:Qe.jsx(NX,{width:"100%",height:320,children:Qe.jsxs(_ne,{data:o.weekly_trends,children:[Qe.jsx(See,{strokeDasharray:"4 4",stroke:"#E5E7EB",opacity:.6}),Qe.jsx(fte,{dataKey:"day",stroke:"#6B7280",fontSize:12}),Qe.jsx(Cte,{stroke:"#6B7280",fontSize:12}),Qe.jsx(Xq,{contentStyle:{backgroundColor:"black",borderRadius:"12px",color:"#fff"},formatter:(e,t)=>["orders"===t?`${e} n`:`${e}M `,"orders"===t?"n hng":"Doanh thu"]}),Qe.jsx(Hee,{type:"monotone",dataKey:"orders",name:"n hng",stroke:"#3B82F6",strokeWidth:3,dot:{fill:"#3B82F6",r:4}}),Qe.jsx(Hee,{type:"monotone",dataKey:"revenue",name:"Doanh thu",stroke:"#F97316",strokeWidth:3,dot:{fill:"#F97316",r:4}}),Qe.jsx(pK,{verticalAlign:"top",align:"right",iconType:"circle"})]})})})]}),o.order_status_data&&o.order_status_data.length>0&&Qe.jsxs(DP,{className:"lg:col-span-2",children:[Qe.jsx(LP,{className:"pb-2",children:Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx("div",{className:"p-2 bg-gradient-to-tr from-indigo-500 to-purple-500 rounded-xl text-white",children:Qe.jsx(Rf,{size:18})}),Qe.jsxs("div",{children:[Qe.jsx(BP,{className:"text-lg font-bold text-foreground",children:"Phn b trng thi n hng"}),Qe.jsxs(FP,{className:"text-sm text-muted-foreground",children:["Tnh hnh x l v hon thnh n hng nm ",s]})]})]})}),Qe.jsx(UP,{children:Qe.jsx("div",{className:"relative w-full h-[340px]",children:Qe.jsx(NX,{width:"100%",height:"100%",children:Qe.jsxs(Sne,{data:o.order_status_data,layout:"vertical",margin:{top:10,right:30,left:10,bottom:10},children:[Qe.jsx("defs",{children:o.order_status_data.map((e,t)=>Qe.jsxs("linearGradient",{id:`grad-${t}`,x1:"0",y1:"0",x2:"100%",y2:"0",children:[Qe.jsx("stop",{offset:"0%",stopColor:e.color,stopOpacity:.8}),Qe.jsx("stop",{offset:"100%",stopColor:e.color,stopOpacity:.4})]},`grad-${t}`))}),Qe.jsx(See,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.3}),Qe.jsx(fte,{type:"number",stroke:"hsl(var(--muted-foreground))",fontSize:12}),Qe.jsx(Cte,{dataKey:"status",type:"category",stroke:"hsl(var(--muted-foreground))",fontSize:13,width:120}),Qe.jsx(Xq,{contentStyle:{background:"rgba(0, 0, 0, 0.9)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"12px 16px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},labelStyle:{color:"#fff",fontWeight:"600",fontSize:"14px",marginBottom:"4px"},itemStyle:{color:"#fff",fontSize:"13px"},formatter:(e,t,n)=>{const r=n.payload;return[Qe.jsxs("span",{style:{color:r.color,fontWeight:"700",fontSize:"15px"},children:[e," n"]}),Qe.jsx("span",{style:{color:"#e5e7eb"},children:"S lng"})]},cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),Qe.jsx(y9,{dataKey:"count",radius:[12,12,12,12],barSize:22,children:o.order_status_data.map((e,t)=>Qe.jsx(_X,{fill:`url(#grad-${t})`},`cell-${t}`))})]})})})})]})]})]}):Qe.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:Qe.jsxs("div",{className:"text-center",children:[Qe.jsx(pm,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),Qe.jsxs("p",{className:"text-muted-foreground mb-4",children:["Cha c d liu thng k nm ",s]}),Qe.jsxs(AP,{onClick:c,variant:"outline",children:[Qe.jsx(qf,{className:"w-4 h-4 mr-2"}),"Ti li"]})]})})}var wje="Switch",[jje]=jh(wje),[Nje,_je]=jje(wje),Sje=Ve.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:a,required:s,disabled:o,value:l="on",onCheckedChange:c,form:d,...u}=e,[h,p]=Ve.useState(null),m=wh(t,e=>p(e)),f=Ve.useRef(!1),g=!h||(d||!!h.closest("form")),[v,x]=Yh({prop:i,defaultProp:a??!1,onChange:c,caller:wje});return Qe.jsxs(Nje,{scope:n,checked:v,disabled:o,children:[Qe.jsx(Th.button,{type:"button",role:"switch","aria-checked":v,"aria-required":s,"data-state":Eje(v),"data-disabled":o?"":void 0,disabled:o,value:l,...u,ref:m,onClick:xh(e.onClick,e=>{x(e=>!e),g&&(f.current=e.isPropagationStopped(),f.current||e.stopPropagation())})}),g&&Qe.jsx(Mje,{control:h,bubbles:!f.current,name:r,value:l,checked:v,required:s,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});Sje.displayName=wje;var Cje="SwitchThumb",Aje=Ve.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,i=_je(Cje,n);return Qe.jsx(Th.span,{"data-state":Eje(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:t})});Aje.displayName=Cje;var Mje=Ve.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...i},a)=>{const s=Ve.useRef(null),o=wh(s,a),l=Yne(n),c=vb(t);return Ve.useEffect(()=>{const e=s.current;if(!e)return;const t=window.HTMLInputElement.prototype,i=Object.getOwnPropertyDescriptor(t,"checked").set;if(l!==n&&i){const t=new Event("click",{bubbles:r});i.call(e,n),e.dispatchEvent(t)}},[l,n,r]),Qe.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:o,style:{...i.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function Eje(e){return e?"checked":"unchecked"}Mje.displayName="SwitchBubbleInput";var kje=Sje,Tje=Aje;const Pje=Ve.forwardRef(({className:e,...t},n)=>Qe.jsx(kje,{className:Rv("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:n,children:Qe.jsx(Tje,{className:Rv("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Pje.displayName=kje.displayName;const Oje=({isVisible:e})=>Qe.jsx(eM,{children:e&&Qe.jsxs(QT.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center bg-background/95 backdrop-blur-md",style:{willChange:"opacity"},children:[Qe.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[Qe.jsx(QT.div,{animate:{scale:[1,1.2,1],opacity:[.3,.5,.3]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/20 rounded-full blur-3xl"}),Qe.jsx(QT.div,{animate:{scale:[1.2,1,1.2],opacity:[.3,.5,.3]},transition:{duration:3,repeat:1/0,ease:"easeInOut",delay:.5},className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-accent/20 rounded-full blur-3xl"})]}),Qe.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-8 max-w-md mx-auto px-4",children:[Qe.jsxs(QT.div,{animate:{y:[0,-10,0],rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"relative",children:[Qe.jsx(QT.div,{animate:{scale:[1,1.1,1],opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 bg-primary/20 rounded-full blur-xl"}),Qe.jsx("div",{className:"relative w-20 h-20 bg-gradient-to-br from-primary to-accent rounded-2xl flex items-center justify-center shadow-lg",children:Qe.jsx(Rf,{className:"w-10 h-10 text-primary-foreground"})})]}),Qe.jsxs("div",{className:"text-center space-y-3",children:[Qe.jsx(QT.h3,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-2xl font-bold bg-gradient-to-r from-primary via-accent to-primary bg-clip-text text-transparent",children:"ang to sn phm"}),Qe.jsx(QT.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-muted-foreground",children:"Vui lng ch trong giy lt..."})]}),Qe.jsx("div",{className:"w-full max-w-xs space-y-3",children:[{icon:Rf,label:"X l thng tin",delay:0},{icon:kg,label:"Ti hnh nh",delay:.8},{icon:pg,label:"Ti u SEO",delay:1.6},{icon:_m,label:"Hon thnh",delay:2.4}].map((e,t)=>Qe.jsxs(QT.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:e.delay,duration:.4},className:"flex items-center gap-3",children:[Qe.jsx(QT.div,{animate:{scale:[1,1.2,1],rotate:[0,180,360]},transition:{delay:e.delay,duration:.6,ease:"easeInOut"},className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:Qe.jsx(e.icon,{className:"w-4 h-4 text-primary"})}),Qe.jsx(QT.div,{initial:{width:0},animate:{width:"100%"},transition:{delay:e.delay+.3,duration:.5},className:"h-1 bg-gradient-to-r from-primary to-accent rounded-full"}),Qe.jsx(QT.span,{initial:{opacity:0},animate:{opacity:1},transition:{delay:e.delay+.2},className:"text-sm text-muted-foreground whitespace-nowrap",children:e.label})]},t))}),Qe.jsx("div",{className:"flex gap-2",children:[0,1,2].map(e=>Qe.jsx(QT.div,{animate:{scale:[1,1.5,1],opacity:[.3,1,.3]},transition:{duration:1.5,repeat:1/0,delay:.2*e},className:"w-2 h-2 rounded-full bg-primary"},e))}),Qe.jsxs(QT.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:3},className:"flex items-center gap-2 text-success",children:[Qe.jsx(_m,{className:"w-5 h-5"}),Qe.jsx("span",{className:"font-medium",children:"Sn phm  c to thnh cng!"})]})]})]})}),Rje=()=>{const e=Zj(),{user:t}=Pae(),{toast:n}=vh(),[r,i]=Ve.useState(!1),[a,s]=Ve.useState([]),[o,l]=Ve.useState(["new","popular"]),[c,d]=Ve.useState("basic"),[u,h]=Ve.useState([]),[p,m]=Ve.useState([]),[f,g]=Ve.useState({name:"",price:"",originalPrice:"",image:"",rating:0,sold:0,discount:0,isLive:!1,seller:{name:"",avatar:""},sku:"",description:"",category:"",brand:"",weight:"",length:"",width:"",height:"",material:"",cost:"",sale_price:"",sale_quantity:"",meta_title:"",meta_description:"",slug:"",keywords:"",quantity:"",low_stock:"",shipping_fee:"",status:"",visibility:"",release_date:"",colors:"",sizes:"",origin:"",flash_sale:!1}),[v,x]=Ve.useState(null);Ve.useEffect(()=>{(async()=>{if(null==t?void 0:t.id){const e=await fetch(`http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/vendor/overview.php?user_id=${t.id}`),n=await e.json();n.seller_id&&x(n.seller_id)}})()},[t]);Ve.useEffect(()=>{a.length>0&&g(e=>({...e,image:a[0]}))},[a]);const y=e=>{const{id:t,value:n,type:r}=e.target;g(e=>({...e,[t]:n}))},b=e=>{e&&!o.includes(e)&&l([...o,e])},w=()=>{const e=["name","price","description","category","quantity"],t=e.filter(e=>f[e]).length,n=p.length>0?1:0;return Math.round((t+n)/(e.length+1)*100)},j=[{id:"basic",label:"Thng tin c bn",icon:Rf,color:"from-blue-500 to-indigo-500"},{id:"pricing",label:"Gi c & Khuyn mi",icon:Lm,color:"from-green-500 to-emerald-500"},{id:"images",label:"Hnh nh",icon:hm,color:"from-purple-500 to-pink-500"},{id:"seo",label:"SEO & Ci t",icon:ef,color:"from-orange-500 to-red-500"}];return Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(Oje,{isVisible:r}),Qe.jsx("form",{onSubmit:async t=>{if(t.preventDefault(),!r)if(f.name&&f.price&&0!==u.length)if(v){i(!0),await new Promise(e=>setTimeout(e,3500));try{let t=[];if(u.length>0){const e=new FormData;u.forEach(t=>e.append("files[]",t)),e.append("type","products");const r=await fetch("http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/upload.php",{method:"POST",body:e}),a=await r.text();let s=null;try{s=a?JSON.parse(a):null}catch(c$e){return n({title:"Upload nh tht bi",description:"Server tr v response khng hp l",variant:"destructive"}),void i(!1)}if(s&&Array.isArray(s.urls)&&s.urls.length>0)t=s.urls;else if(s&&Array.isArray(s.data)&&s.data.length>0)t=s.data.map(e=>e.url??e.file_url??e.fileUrl).filter(Boolean);else{if(!s||!s.url)return n({title:"Upload nh tht bi",description:(null==s?void 0:s.message)||"Khng c ng dn tr v",variant:"destructive"}),void i(!1);t=[s.url]}}t.length>0&&g(e=>({...e,image:t[0]}));const r=Number(f.price),a=Number(f.originalPrice);let s=0;a>0&&r<a&&(s=Math.round((a-r)/a*100));const l=await fetch("http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/product/add.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...f,price:Number(f.price),originalPrice:Number(f.originalPrice),image:t,rating:Number(f.rating),sold:Number(f.sold),discount:s,isLive:f.isLive?1:0,seller_id:v,seller_name:f.seller.name,seller_avatar:f.seller.avatar,tags:o.join(","),weight:Number(f.weight),length:Number(f.length),width:Number(f.width),height:Number(f.height),cost:Number(f.cost),sale_price:Number(f.sale_price),sale_quantity:Number(f.sale_quantity),quantity:Number(f.quantity),low_stock:Number(f.low_stock),shipping_fee:Number(f.shipping_fee),release_date:f.release_date,colors:f.colors,sizes:f.sizes,origin:f.origin,flash_sale:f.flash_sale?1:0})}),c=await l.json();c.success?(n({title:"Thm sn phm thnh cng!",description:"Sn phm mi  c thm vo ca hng.",variant:"success"}),e("/vendor-management/product-management")):n({title:"Thm sn phm tht bi",description:c.message,variant:"destructive"})}catch(c$e){n({title:"C li xy ra",description:"Khng th kt ni ti my ch.",variant:"destructive"})}finally{i(!1)}}else n({title:"Khng tm thy seller_id",variant:"destructive"});else n({title:"Vui lng nhp  thng tin sn phm",variant:"destructive"})},children:Qe.jsxs("div",{className:"min-h-screen bg-background",children:[Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"mb-8",children:[Qe.jsxs("div",{className:"relative",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/5 via-purple-500/5 to-pink-500/5 rounded-3xl -z-10"}),Qe.jsxs("div",{className:"p-8",children:[Qe.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[Qe.jsxs("div",{className:"flex items-start gap-6",children:[Qe.jsx(QT.div,{className:"p-4 rounded-2xl bg-gradient-to-br from-orange-500 via-rose-500 to-red-500 shadow-xl",animate:{rotate:[0,5,-5,0],scale:[1,1.05,1]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:Qe.jsx(Rf,{className:"w-8 h-8 text-white"})}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs("div",{children:[Qe.jsx("h1",{className:"text-4xl md:text-5xl font-black bg-gradient-to-r from-orange-500 via-rose-500 to-red-500 bg-clip-text text-transparent",children:"Thm sn phm mi"}),Qe.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[Qe.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),Qe.jsx("p",{className:"text-muted-foreground",children:"To sn phm cht lng cao"})]})]}),Qe.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl",children:" To sn phm mi vi cng c qun l thng minh v trc quan"})]})]}),Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsxs(AP,{variant:"outline",className:"gap-2",type:"button",children:[Qe.jsx(Vm,{className:"w-4 h-4"}),"Xem trc"]}),Qe.jsx(AP,{type:"submit",className:"gap-2 bg-gradient-to-r from-orange-500 via-rose-500 to-red-500 hover:opacity-90 transition-all duration-300",disabled:r,children:r?Qe.jsxs(Qe.Fragment,{children:[Qe.jsx("div",{className:"w-4 h-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"ang lu..."]}):Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(Jf,{className:"w-4 h-4"}),"Lu sn phm"]})})]})]}),Qe.jsxs("div",{className:"mt-6 space-y-4",children:[Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx(pg,{className:"w-4 h-4 text-primary"}),Qe.jsx("span",{className:"text-sm font-medium text-foreground",children:"Tin  hon thnh"})]}),Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsxs("span",{className:"text-sm font-bold text-primary",children:[w(),"%"]}),Qe.jsx(Nm,{className:"w-4 h-4 text-green-500"})]})]}),Qe.jsx(bae,{value:w(),className:"h-2 bg-muted"})]})]})]}),Qe.jsx("div",{className:"mt-6",children:Qe.jsx("div",{className:"grid grid-cols-4 gap-4",children:j.map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*t},className:`relative cursor-pointer group ${c===e.id?"scale-105":"hover:scale-102"} transition-all duration-300`,onClick:()=>d(e.id),children:Qe.jsx(DP,{className:`border-2 ${c===e.id?"border-primary shadow-lg bg-primary/5":"border-border hover:border-primary/50"} transition-all duration-300`,children:Qe.jsxs(UP,{className:"p-4 text-center",children:[Qe.jsx("div",{className:`w-12 h-12 mx-auto rounded-xl bg-gradient-to-br ${e.color} flex items-center justify-center mb-3 shadow-sm`,children:Qe.jsx(e.icon,{className:"w-6 h-6 text-white"})}),Qe.jsx("h3",{className:"font-semibold text-sm text-foreground",children:e.label}),c===e.id&&Qe.jsx(QT.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-2 -right-2 w-6 h-6 bg-primary rounded-full flex items-center justify-center",children:Qe.jsx(Nm,{className:"w-4 h-4 text-primary-foreground"})})]})})},e.id))})})]}),Qe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[Qe.jsx("div",{className:"lg:col-span-3 space-y-6",children:Qe.jsxs(tae,{value:c,onValueChange:d,className:"space-y-6",children:[Qe.jsxs(nae,{className:"hidden",children:[Qe.jsx(rae,{value:"basic",children:"Basic"}),Qe.jsx(rae,{value:"pricing",children:"Pricing"}),Qe.jsx(rae,{value:"images",children:"Images"}),Qe.jsx(rae,{value:"seo",children:"SEO"})]}),Qe.jsx(iae,{value:"basic",className:"space-y-6",children:Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:[Qe.jsxs(DP,{className:"border shadow-sm",children:[Qe.jsx(LP,{className:"border-b bg-muted/20",children:Qe.jsxs(BP,{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-blue-500 to-indigo-500",children:Qe.jsx(Rf,{className:"w-5 h-5 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx("span",{className:"text-lg bg-gradient-to-r from-blue-500 to-indigo-500 bg-clip-text text-transparent",children:"Thng tin c bn"}),Qe.jsx("p",{className:"text-sm text-muted-foreground font-normal mt-1",children:"Nhp thng tin chnh ca sn phm"})]})]})}),Qe.jsxs(UP,{className:"p-6 space-y-6",children:[Qe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs(Rle,{htmlFor:"name",className:"flex items-center gap-2",children:[Qe.jsx(Wm,{className:"w-4 h-4"}),"Tn sn phm *"]}),Qe.jsx(Vne,{id:"name",value:f.name,onChange:y,placeholder:"V d: iPhone 15 Pro Max 256GB",className:"h-12 text-base"})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs(Rle,{htmlFor:"sku",className:"flex items-center gap-2",children:[Qe.jsx(xg,{className:"w-4 h-4"}),"M SKU"]}),Qe.jsx(Vne,{id:"sku",value:f.sku,onChange:y,placeholder:"SP001234",className:"h-12"})]})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs(Rle,{htmlFor:"description",className:"flex items-center gap-2",children:[Qe.jsx(Wm,{className:"w-4 h-4"}),"M t sn phm *"]}),Qe.jsx(Hne,{id:"description",value:f.description,onChange:y,rows:5,placeholder:"M t chi tit v sn phm, tnh nng, li ch v thng s k thut...",className:"resize-none"})]}),Qe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs(Rle,{htmlFor:"category",className:"flex items-center gap-2",children:[Qe.jsx(Rf,{className:"w-4 h-4"}),"Danh mc *"]}),Qe.jsxs(uie,{value:f.category,onValueChange:e=>g(t=>({...t,category:e})),children:[Qe.jsx(pie,{className:"h-12",children:Qe.jsx(hie,{placeholder:"Chn danh mc sn phm"})}),Qe.jsx(gie,{children:["Lm p","Thi trang","in t","Gia dng","Th thao","Sch","M & B","Du lch"].map(e=>Qe.jsx(vie,{value:e,children:e},e))})]})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs(Rle,{htmlFor:"brand",className:"flex items-center gap-2",children:[Qe.jsx(fg,{className:"w-4 h-4"}),"Thng hiu"]}),Qe.jsx(Vne,{id:"brand",value:f.brand,onChange:y,placeholder:"Apple, Samsung, Nike...",className:"h-12"})]})]}),Qe.jsxs("div",{className:"space-y-4",children:[Qe.jsxs(Rle,{className:"flex items-center gap-2",children:[Qe.jsx(xg,{className:"w-4 h-4"}),"Tags sn phm"]}),Qe.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(e=>Qe.jsxs(EP,{variant:"secondary",className:"cursor-pointer hover:bg-destructive hover:text-destructive-foreground transition-colors px-3 py-1",children:[e,Qe.jsx(Fg,{className:"w-3 h-3 ml-2 hover:bg-destructive/20 rounded-full p-0.5",onClick:()=>(e=>{l(o.filter(t=>t!==e))})(e)})]},e))}),Qe.jsxs("div",{className:"flex gap-2",children:[Qe.jsx(Vne,{placeholder:"Thm tag mi (v d: hot, sale, new...)",className:"h-10",onKeyPress:e=>{if("Enter"===e.key){e.preventDefault();const t=e.target.value;t.trim()&&(b(t.trim()),e.target.value="")}},type:"text"}),Qe.jsx(AP,{type:"button",variant:"outline",size:"icon",className:"h-10 w-10 shrink-0",onClick:()=>{const e=document.querySelector('input[placeholder*="Thm tag"]');(null==e?void 0:e.value.trim())&&(b(e.value.trim()),e.value="")},children:Qe.jsx(Wf,{className:"w-4 h-4"})})]})]})]})]}),Qe.jsxs(DP,{className:"border shadow-sm",children:[Qe.jsx(LP,{className:"border-b bg-muted/20",children:Qe.jsxs(BP,{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-cyan-500 to-blue-500",children:Qe.jsx(Yf,{className:"w-5 h-5 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx("span",{className:"text-lg",children:"Thng s k thut"}),Qe.jsx("p",{className:"text-sm text-muted-foreground font-normal mt-1",children:"Kch thc v thng tin vt l"})]})]})}),Qe.jsxs(UP,{className:"p-6 space-y-6",children:[Qe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"weight",children:"Trng lng (gram)"}),Qe.jsx(Vne,{id:"weight",value:f.weight,onChange:y,type:"number",placeholder:"200",className:"h-11"})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"length",children:"Di (cm)"}),Qe.jsx(Vne,{id:"length",value:f.length,onChange:y,type:"number",step:"any",placeholder:"15.5",className:"h-11"})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"width",children:"Rng (cm)"}),Qe.jsx(Vne,{id:"width",value:f.width,onChange:y,type:"number",step:"any",placeholder:"7.5",className:"h-11"})]})]}),Qe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"height",children:"Cao (cm)"}),Qe.jsx(Vne,{id:"height",value:f.height,onChange:y,type:"number",step:"any",placeholder:"0.8",className:"h-11"})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"material",children:"Cht liu"}),Qe.jsx(Vne,{id:"material",value:f.material,onChange:y,placeholder:"Nhm, Knh, Plastic...",className:"h-11"})]})]})]})]}),Qe.jsxs(DP,{className:"border shadow-sm",children:[Qe.jsx(LP,{className:"border-b bg-muted/20",children:Qe.jsxs(BP,{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500",children:Qe.jsx(If,{className:"w-5 h-5 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx("span",{className:"text-lg",children:"Bin th sn phm"}),Qe.jsx("p",{className:"text-sm text-muted-foreground font-normal mt-1",children:"Mu sc, kch thc v cc ty chn khc"})]})]})}),Qe.jsx(UP,{className:"p-6",children:Qe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"colors",children:"Mu sc"}),Qe.jsx(Vne,{id:"colors",value:f.colors||"",onChange:y,placeholder:"en, Trng, Xanh",className:"h-11"}),Qe.jsx("p",{className:"text-xs text-muted-foreground",children:"Phn cch bng du phy"})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"sizes",children:"Kch thc"}),Qe.jsx(Vne,{id:"sizes",value:f.sizes||"",onChange:y,placeholder:"S, M, L, XL",className:"h-11"}),Qe.jsx("p",{className:"text-xs text-muted-foreground",children:"Phn cch bng du phy"})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"origin",children:"Xut x"}),Qe.jsx(Vne,{id:"origin",value:f.origin||"",onChange:y,placeholder:"Vit Nam, Trung Quc...",className:"h-11"})]})]})})]})]})}),Qe.jsx(iae,{value:"pricing",className:"space-y-6",children:Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"space-y-6",children:[Qe.jsxs(DP,{className:"border shadow-sm",children:[Qe.jsx(LP,{className:"border-b bg-muted/20",children:Qe.jsxs(BP,{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-green-500 to-emerald-500",children:Qe.jsx(Lm,{className:"w-5 h-5 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx("span",{className:"text-lg bg-gradient-to-r from-green-500 to-emerald-500 bg-clip-text text-transparent",children:"nh gi sn phm"}),Qe.jsx("p",{className:"text-sm text-muted-foreground font-normal mt-1",children:"Thit lp gi bn v chi ph"})]})]})}),Qe.jsxs(UP,{className:"p-6 space-y-6",children:[Qe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs(Rle,{htmlFor:"price",className:"flex items-center gap-2",children:[Qe.jsx(Lm,{className:"w-4 h-4"}),"Gi bn *"]}),Qe.jsx(Vne,{id:"price",value:f.price,onChange:y,type:"number",placeholder:"299000",className:"h-12 text-lg font-semibold"})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"originalPrice",children:"Gi gc ( so snh)"}),Qe.jsx(Vne,{id:"originalPrice",value:f.originalPrice,onChange:y,type:"number",placeholder:"399000",className:"h-12"})]})]}),Qe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"cost",children:"Gi vn"}),Qe.jsx(Vne,{id:"cost",value:f.cost,onChange:y,type:"number",placeholder:"150000",className:"h-12"})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{children:"Li nhun c tnh"}),Qe.jsxs("div",{className:"h-12 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center",children:[Qe.jsx(Sg,{className:"w-4 h-4 text-green-600 mr-2"}),Qe.jsx("span",{className:"text-green-700 font-semibold",children:f.price&&f.cost?`${(Number(f.price)-Number(f.cost)).toLocaleString()}`:"0"})]})]})]}),Qe.jsx(ZR,{}),Qe.jsxs("div",{className:"space-y-4",children:[Qe.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/30 rounded-lg",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx(sg,{className:"w-5 h-5 text-blue-600"}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"font-medium",children:"p dng thu VAT"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Tnh 10% VAT vo gi sn phm"})]})]}),Qe.jsx(Pje,{})]}),Qe.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/30 rounded-lg",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx(xg,{className:"w-5 h-5 text-purple-600"}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"font-medium",children:"Cho php khuyn mi"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Sn phm c th p dng m gim gi"})]})]}),Qe.jsx(Pje,{defaultChecked:!0})]})]})]})]}),Qe.jsxs(DP,{className:"border shadow-sm",children:[Qe.jsx(LP,{className:"border-b bg-muted/20",children:Qe.jsxs(BP,{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-yellow-500 to-orange-500",children:Qe.jsx(zg,{className:"w-5 h-5 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx("span",{className:"text-lg",children:"Flash Sale & Khuyn mi"}),Qe.jsx("p",{className:"text-sm text-muted-foreground font-normal mt-1",children:"Thit lp chng trnh gim gi c bit"})]})]})}),Qe.jsxs(UP,{className:"p-6 space-y-6",children:[Qe.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-orange-50 to-red-50 rounded-lg border border-orange-200",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx(zg,{className:"w-5 h-5 text-orange-600"}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"font-medium text-black",children:"Flash Sale"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Gim gi trong thi gian gii hn"})]})]}),Qe.jsx(Pje,{checked:f.flash_sale,onCheckedChange:e=>g(t=>({...t,flash_sale:e}))})]}),Qe.jsx(eM,{children:f.flash_sale&&Qe.jsxs(QT.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"sale_price",children:"Gi Flash Sale *"}),Qe.jsx(Vne,{id:"sale_price",value:f.sale_price,onChange:y,type:"number",placeholder:"199000",className:"h-11"})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"sale_quantity",children:"S lng sale"}),Qe.jsx(Vne,{id:"sale_quantity",value:f.sale_quantity,onChange:y,type:"number",placeholder:"50",className:"h-11"})]})]})})]})]})]})}),Qe.jsx(iae,{value:"images",className:"space-y-6",children:Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:Qe.jsxs(DP,{className:"border shadow-sm",children:[Qe.jsx(LP,{className:"border-b bg-muted/20",children:Qe.jsxs(BP,{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500",children:Qe.jsx(hm,{className:"w-5 h-5 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx("span",{className:"text-lg bg-gradient-to-r from-purple-500 to-pink-500 bg-clip-text text-transparent",children:"Hnh nh sn phm"}),Qe.jsx("p",{className:"text-sm text-muted-foreground font-normal mt-1",children:"Ti ln nh cht lng cao  thu ht khch hng"})]})]})}),Qe.jsxs(UP,{className:"p-6 space-y-6",children:[Qe.jsxs(QT.div,{className:"relative border-2 border-dashed border-border rounded-xl p-12 text-center cursor-pointer hover:border-primary transition-all duration-300 bg-gradient-to-br from-muted/20 to-muted/40",onClick:()=>{var e;return null==(e=document.getElementById("product-image-upload"))?void 0:e.click()},whileHover:{scale:1.01},whileTap:{scale:.99},children:[Qe.jsx("input",{id:"product-image-upload",type:"file",accept:"image/*",multiple:!0,style:{display:"none"},onChange:e=>{if(e.target.files&&e.target.files.length>0){const t=Array.from(e.target.files);h(e=>[...e,...t]),m(e=>[...e,...t.map(e=>URL.createObjectURL(e))])}}}),Qe.jsxs("div",{className:"space-y-4",children:[Qe.jsx("div",{className:"w-20 h-20 mx-auto rounded-2xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center shadow-lg",children:Qe.jsx(kg,{className:"w-10 h-10 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx("h3",{className:"text-xl font-bold text-foreground mb-2",children:"Ti ln hnh nh sn phm"}),Qe.jsx("p",{className:"text-muted-foreground",children:"Ko th hoc click  chn file"}),Qe.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"H tr JPG, PNG, GIF  Ti a 5MB  Khuyn ngh 1:1"})]})]})]}),Qe.jsx(eM,{children:p.length>0&&Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("h4",{className:"text-lg font-semibold flex items-center gap-2",children:[Qe.jsx(hm,{className:"w-5 h-5"}),"Hnh nh  chn (",p.length,")"]}),Qe.jsxs(EP,{variant:"outline",className:"gap-1",children:[Qe.jsx(Nm,{className:"w-3 h-3"}),"Sn sng"]})]}),Qe.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:p.map((e,t)=>Qe.jsxs(QT.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.1*t},className:"relative group aspect-square rounded-xl overflow-hidden border-2 border-border hover:border-primary transition-all duration-300 shadow-sm",children:[Qe.jsx("img",{src:e,alt:`nh sn phm ${t+1}`,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),Qe.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:Qe.jsx(AP,{size:"sm",variant:"destructive",onClick:e=>{e.stopPropagation(),m(p.filter((e,n)=>n!==t)),h(u.filter((e,n)=>n!==t))},className:"opacity-90 hover:opacity-100 absolute top-1 right-1",type:"button",children:Qe.jsx(Fg,{className:"w-4 h-4"})})}),0===t&&Qe.jsxs(EP,{className:"absolute top-2 left-2 bg-primary shadow-md",children:[Qe.jsx(fg,{className:"w-3 h-3 mr-1"}),"nh chnh"]})]},t))}),Qe.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:Qe.jsxs("div",{className:"flex gap-3",children:[Qe.jsx(uf,{className:"w-5 h-5 text-blue-600 mt-0.5"}),Qe.jsxs("div",{children:[Qe.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"Mo chp nh tt"}),Qe.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[Qe.jsx("li",{children:" S dng nh sng t nhin, trnh flash trc tip"}),Qe.jsx("li",{children:" Chp nhiu gc  khc nhau ca sn phm"}),Qe.jsx("li",{children:" Lm sch sn phm trc khi chp"})]})]})]})})]})})]})]})})}),Qe.jsx(iae,{value:"seo",className:"space-y-6",children:Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:Qe.jsxs(DP,{className:"border shadow-sm",children:[Qe.jsx(LP,{className:"border-b bg-muted/20",children:Qe.jsxs(BP,{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-orange-500 to-red-500",children:Qe.jsx(ef,{className:"w-5 h-5 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx("span",{className:"text-lg bg-gradient-to-r from-orange-500 to-red-500 bg-clip-text text-transparent",children:"Ti u ha SEO"}),Qe.jsx("p",{className:"text-sm text-muted-foreground font-normal mt-1",children:"Ci thin kh nng tm kim trn Google"})]})]})}),Qe.jsxs(UP,{className:"p-6 space-y-6",children:[Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"meta_title",children:"Tiu  SEO"}),Qe.jsx(Vne,{id:"meta_title",value:f.meta_title,onChange:y,placeholder:"iPhone 15 Pro Max - in thoi cao cp",maxLength:60,className:"h-11"}),Qe.jsxs("p",{className:"text-xs text-muted-foreground",children:[f.meta_title.length,"/60 k t"]})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"meta_description",children:"M t SEO"}),Qe.jsx(Hne,{id:"meta_description",value:f.meta_description,onChange:y,rows:3,placeholder:"M t ngn gn v sn phm cho search engine...",maxLength:160,className:"resize-none"}),Qe.jsxs("p",{className:"text-xs text-muted-foreground",children:[f.meta_description.length,"/160 k t"]})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"slug",children:"URL sn phm"}),Qe.jsxs("div",{className:"flex",children:[Qe.jsx("span",{className:"bg-muted px-4 py-3 border border-r-0 rounded-l-lg text-sm text-muted-foreground",children:"vibemarket.com/product/"}),Qe.jsx(Vne,{id:"slug",value:f.slug,onChange:y,placeholder:"iphone-15-pro-max",className:"rounded-l-none h-11"})]})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"keywords",children:"T kha SEO"}),Qe.jsx(Vne,{id:"keywords",value:f.keywords,onChange:y,placeholder:"iphone, apple, in thoi, smartphone",className:"h-11"}),Qe.jsx("p",{className:"text-xs text-muted-foreground",children:"Phn cch bng du phy"})]})]})]})})})]})}),Qe.jsxs("div",{className:"space-y-6",children:[Qe.jsxs(DP,{className:"border shadow-sm",children:[Qe.jsx(LP,{className:"border-b bg-muted/20",children:Qe.jsxs(BP,{className:"flex items-center gap-2 text-base",children:[Qe.jsx(pm,{className:"w-5 h-5 text-orange-600"}),"Qun l kho hng"]})}),Qe.jsxs(UP,{className:"p-4 space-y-4",children:[Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"quantity",children:"S lng tn kho *"}),Qe.jsx(Vne,{id:"quantity",value:f.quantity,onChange:y,type:"number",placeholder:"100",className:"h-11 text-base font-semibold"})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"low_stock",children:"Cnh bo tn kho thp"}),Qe.jsx(Vne,{id:"low_stock",value:f.low_stock,onChange:y,type:"number",placeholder:"10",className:"h-11"})]}),Qe.jsxs("div",{className:"space-y-3 pt-2",children:[Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("div",{children:[Qe.jsx("p",{className:"font-medium text-sm",children:"Theo di tn kho"}),Qe.jsx("p",{className:"text-xs text-muted-foreground",children:"T ng cp nht"})]}),Qe.jsx(Pje,{defaultChecked:!0})]}),Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("div",{children:[Qe.jsx("p",{className:"font-medium text-sm",children:"Bn khi ht hng"}),Qe.jsx("p",{className:"text-xs text-muted-foreground",children:"Cho php t trc"})]}),Qe.jsx(Pje,{})]})]})]})]}),Qe.jsxs(DP,{className:"border shadow-sm",children:[Qe.jsx(LP,{className:"border-b bg-muted/20",children:Qe.jsxs(BP,{className:"flex items-center gap-2 text-base",children:[Qe.jsx(Mg,{className:"w-5 h-5 text-blue-600"}),"Vn chuyn"]})}),Qe.jsxs(UP,{className:"p-4 space-y-4",children:[Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"shipping_fee",children:"Ph vn chuyn (VND)"}),Qe.jsx(Vne,{id:"shipping_fee",value:f.shipping_fee,onChange:y,type:"number",placeholder:"30000",className:"h-11"})]}),Qe.jsxs("div",{className:"flex items-center justify-between pt-2",children:[Qe.jsxs("div",{children:[Qe.jsx("p",{className:"font-medium text-sm",children:"Min ph vn chuyn"}),Qe.jsx("p",{className:"text-xs text-muted-foreground",children:"p dng cho n hng ny"})]}),Qe.jsx(Pje,{})]})]})]}),Qe.jsxs(DP,{className:"border shadow-sm",children:[Qe.jsx(LP,{className:"border-b bg-muted/20",children:Qe.jsxs(BP,{className:"flex items-center gap-2 text-base",children:[Qe.jsx(rg,{className:"w-5 h-5 text-muted-foreground"}),"Trng thi sn phm"]})}),Qe.jsxs(UP,{className:"p-4 space-y-4",children:[Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{children:"Trng thi"}),Qe.jsxs(uie,{children:[Qe.jsx(pie,{children:Qe.jsx(hie,{placeholder:"Chn trng thi"})}),Qe.jsxs(gie,{children:[Qe.jsx(vie,{value:"active",children:"ang bn"}),Qe.jsx(vie,{value:"draft",children:"Nhp"}),Qe.jsx(vie,{value:"archived",children:"Lu tr"})]})]})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{children:"Hin th"}),Qe.jsxs(uie,{children:[Qe.jsx(pie,{children:Qe.jsx(hie,{placeholder:"Chn hin th"})}),Qe.jsxs(gie,{children:[Qe.jsx(vie,{value:"public",children:"Cng khai"}),Qe.jsx(vie,{value:"private",children:"Ring t"}),Qe.jsx(vie,{value:"password",children:"Yu cu mt khu"})]})]})]}),Qe.jsx(ZR,{}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx("p",{className:"text-sm font-medium",children:"Ngy pht hnh"}),Qe.jsx(Vne,{type:"datetime-local",id:"release_date",value:f.release_date,onChange:y})]})]})]})]})]})]})})]})};function Ije(){const{user:e}=Pae(),{toast:t}=vh(),n=Ve.useRef(null),r=Ve.useRef(null),[i,a]=Ve.useState(!0),[s,o]=Ve.useState(!1),[l,c]=Ve.useState(!1),[d,u]=Ve.useState(null),[h,p]=Ve.useState(null),[m,f]=Ve.useState(null),[g,v]=Ve.useState(0),[x,y]=Ve.useState(0);Ve.useEffect(()=>{b()},[e]);const b=async()=>{if(null==e?void 0:e.id){a(!0);try{const t=await fetch(`http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/vendor/get_store_info.php?user_id=${e.id}&t=${Date.now()}`),n=await t.json();if(n.success){u({seller_id:n.seller_id,store_name:n.store_name,avatar:n.avatar,cover_image:n.cover_image,business_type:n.business_type,phone:n.phone,email:n.email,business_address:n.business_address,establish_year:n.establish_year});const e=n.avatar?`${n.avatar}?t=${Date.now()}`:null,t=n.cover_image?`${n.cover_image}?t=${Date.now()}`:null;p(e),f(t),v(e=>e+1),y(e=>e+1)}}catch(n){t({title:"Li",description:"Khng th ti thng tin ca hng",variant:"destructive"})}finally{a(!1)}}},w=e=>e.type.startsWith("image/")?!(e.size>5242880)||(t({title:"Li",description:"Kch thc file khng c vt qu 5MB",variant:"destructive"}),!1):(t({title:"Li",description:"Vui lng chn file nh",variant:"destructive"}),!1),j=async r=>{if(null==e?void 0:e.id){o(!0);try{const n=new FormData;n.append("avatar",r),n.append("user_id",e.id.toString());const i=await fetch("http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/vendor/update_avatar.php",{method:"POST",body:n}),a=await i.json();if(!a.success)throw new Error(a.error||"Khng th cp nht avatar");t({title:"Thnh cng",description:" cp nht avatar ca hng"}),p(a.avatar_url),v(e=>e+1),setTimeout(()=>{b()},500)}catch(i){t({title:"Li",description:i.message||" xy ra li khi upload avatar",variant:"destructive"}),p((null==d?void 0:d.avatar)||null)}finally{o(!1),n.current&&(n.current.value="")}}},N=async n=>{if(null==e?void 0:e.id){c(!0);try{const r=new FormData;r.append("cover_image",n),r.append("user_id",e.id.toString());for(let[e,t]of r.entries());const a=await fetch("http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/vendor/update_cover_image.php",{method:"POST",body:r}),s=await a.text();let o;try{o=JSON.parse(s)}catch(i){throw new Error(`Server returned invalid JSON. Status: ${a.status}. Response: ${s.substring(0,300)}...`)}if(!o.success)throw new Error(o.error||"Khng th cp nht nh ba");t({title:"Thnh cng",description:" cp nht nh ba ca hng"}),f(o.cover_url),y(e=>e+1),setTimeout(()=>{b()},500)}catch(a){t({title:"Li",description:a.message||" xy ra li khi upload nh ba",variant:"destructive"}),f((null==d?void 0:d.cover_image)||null)}finally{c(!1),r.current&&(r.current.value="")}}};return i?Qe.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:Qe.jsxs(QT.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-4",children:[Qe.jsx("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-cyan-500 via-blue-500 to-purple-500 mx-auto w-20 h-20 flex items-center justify-center shadow-xl",children:Qe.jsx(vf,{className:"w-8 h-8 animate-spin text-white"})}),Qe.jsxs("div",{children:[Qe.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"ang ti thng tin ca hng"}),Qe.jsx("p",{className:"text-muted-foreground",children:"Vui lng i trong giy lt..."})]})]})}):Qe.jsxs("div",{className:"min-h-screen bg-background p-6 space-y-8",children:[Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"relative",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/5 via-blue-500/5 to-purple-500/5 rounded-3xl -z-10"}),Qe.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6 p-8",children:[Qe.jsxs("div",{className:"flex items-start gap-6",children:[Qe.jsx(QT.div,{className:"p-4 rounded-2xl bg-gradient-to-br from-cyan-500 via-blue-500 to-purple-500 shadow-xl",animate:{rotate:[0,5,-5,0],scale:[1,1.05,1]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:Qe.jsx(rg,{className:"w-8 h-8 text-white"})}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs("div",{children:[Qe.jsx("h1",{className:"text-4xl md:text-5xl font-black bg-gradient-to-r from-cyan-500 via-blue-500 to-purple-500 bg-clip-text text-transparent",children:"Ci t ca hng"}),Qe.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[Qe.jsx("div",{className:"w-2 h-2 bg-cyan-500 rounded-full animate-pulse"}),Qe.jsxs("p",{className:"text-muted-foreground",children:["Qun l thng tin: ",Qe.jsx("span",{className:"font-medium text-foreground",children:null==d?void 0:d.store_name})]})]})]}),Qe.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl",children:" Ty chnh v cp nht thng tin ca hng mt cch chuyn nghip"})]})]}),Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsxs(AP,{variant:"outline",size:"sm",className:"gap-2",onClick:async()=>{await b()},children:[Qe.jsx(qf,{className:"w-4 h-4"}),"Lm mi"]}),Qe.jsxs(EP,{variant:"secondary",className:"px-3 py-1.5 gap-1.5",children:[Qe.jsx(sg,{className:"w-3.5 h-3.5"})," xc minh"]})]})]})]}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:Qe.jsxs(DP,{className:"border shadow-sm overflow-hidden",children:[Qe.jsx(LP,{className:"border-b bg-gradient-to-r from-indigo-50 to-purple-50",children:Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-500",children:Qe.jsx(df,{className:"w-5 h-5 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx(BP,{className:"text-lg bg-gradient-to-r from-indigo-500 to-purple-500 bg-clip-text text-transparent",children:"nh ba ca hng"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"To n tng u tin vi khch hng"})]})]}),Qe.jsx("input",{ref:r,type:"file",accept:"image/*",className:"hidden",onChange:e=>{var t;const n=null==(t=e.target.files)?void 0:t[0];if(!n)return;if(!w(n))return;const r=new FileReader;r.onloadend=()=>{f(r.result),y(e=>e+1)},r.readAsDataURL(n),N(n)},disabled:l}),Qe.jsxs(AP,{onClick:()=>{var e;return null==(e=r.current)?void 0:e.click()},disabled:l,variant:"outline",size:"sm",className:"gap-2",children:[l?Qe.jsx(vf,{className:"w-4 h-4 animate-spin"}):Qe.jsx(hm,{className:"w-4 h-4"}),l?"ang ti...":"Thay i"]})]})}),Qe.jsx(UP,{className:"p-0",children:Qe.jsxs("div",{className:"relative h-64 bg-gradient-to-r from-gray-100 to-gray-200",children:[m?Qe.jsx("img",{src:m,alt:"Store Cover",className:"w-full h-full object-cover"},x):Qe.jsx("div",{className:"flex items-center justify-center h-full",children:Qe.jsxs("div",{className:"text-center space-y-3",children:[Qe.jsx("div",{className:"w-16 h-16 mx-auto rounded-full bg-background flex items-center justify-center",children:Qe.jsx(df,{className:"w-8 h-8 text-muted-foreground"})}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"font-medium text-black",children:"Cha c nh ba"}),Qe.jsx("p",{className:"text-sm text-black",children:'Nhn nt "Thay i"  ti ln nh ba'})]})]})}),l&&Qe.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:Qe.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl p-4 text-center",children:[Qe.jsx(vf,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),Qe.jsx("p",{className:"text-sm font-medium",children:"ang ti nh ba..."})]})})]})})]})}),Qe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[Qe.jsx(QT.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"lg:col-span-1",children:Qe.jsxs(DP,{className:"border shadow-sm",children:[Qe.jsx(LP,{className:"border-b bg-gradient-to-r from-orange-50 to-pink-50",children:Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-orange-500 to-pink-500",children:Qe.jsx(hm,{className:"w-5 h-5 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx(BP,{className:"text-lg bg-gradient-to-r from-orange-500 to-pink-500 bg-clip-text text-transparent",children:"Avatar ca hng"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Logo i din thng hiu"})]})]})}),Qe.jsxs(UP,{className:"flex flex-col items-center space-y-6 p-6",children:[Qe.jsxs("div",{className:"relative",children:[Qe.jsx(QT.div,{whileHover:{scale:1.05},transition:{duration:.2},children:Qe.jsxs(AD,{className:"w-32 h-32 border-4 border-muted shadow-lg",children:[Qe.jsx(MD,{src:h||void 0,alt:null==d?void 0:d.store_name}),Qe.jsx(ED,{className:"bg-gradient-to-br from-orange-500 to-pink-500 text-white text-3xl",children:(null==d?void 0:d.store_name)?(_=d.store_name,_.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)):"ST"})]},g)}),s&&Qe.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center",children:Qe.jsx(vf,{className:"w-8 h-8 animate-spin text-white"})})]}),Qe.jsx("input",{ref:n,type:"file",accept:"image/*",className:"hidden",onChange:e=>{var t;const n=null==(t=e.target.files)?void 0:t[0];if(!n)return;if(!w(n))return;const r=new FileReader;r.onloadend=()=>{p(r.result),v(e=>e+1)},r.readAsDataURL(n),j(n)},disabled:s}),Qe.jsxs(AP,{onClick:()=>{var e;return null==(e=n.current)?void 0:e.click()},disabled:s,className:"w-full bg-gradient-to-r from-orange-500 to-pink-500 hover:opacity-90 gap-2",children:[s?Qe.jsx(vf,{className:"w-4 h-4 animate-spin"}):Qe.jsx(kg,{className:"w-4 h-4"}),s?"ang ti ln...":"Thay i avatar"]}),Qe.jsxs("div",{className:"text-center space-y-2",children:[Qe.jsx("p",{className:"text-xs text-muted-foreground",children:"Chp nhn JPG, PNG, GIF, WEBP"}),Qe.jsx("p",{className:"text-xs text-muted-foreground",children:"Kch thc ti a: 5MB"}),Qe.jsxs("div",{className:"flex items-center justify-center gap-1",children:[Qe.jsx(Nm,{className:"w-3 h-3 text-green-500"}),Qe.jsx("span",{className:"text-xs text-green-600",children:"T ng resize"})]})]})]})]})}),Qe.jsx(QT.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},className:"lg:col-span-2",children:Qe.jsxs(DP,{className:"border shadow-sm",children:[Qe.jsx(LP,{className:"border-b bg-gradient-to-r from-emerald-50 to-teal-50",children:Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-emerald-500 to-teal-500",children:Qe.jsx(gg,{className:"w-5 h-5 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx(BP,{className:"text-lg bg-gradient-to-r from-emerald-500 to-teal-500 bg-clip-text text-transparent",children:"Thng tin ca hng"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Chi tit v ca hng v lin h"})]})]})}),Qe.jsxs(UP,{className:"p-6 space-y-6",children:[Qe.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs(Rle,{className:"flex items-center gap-2 font-medium",children:[Qe.jsx(gg,{className:"w-4 h-4 text-emerald-600"}),"Tn ca hng"]}),Qe.jsxs("div",{className:"relative",children:[Qe.jsx(Vne,{value:(null==d?void 0:d.store_name)||"",disabled:!0,className:"bg-muted border-border pr-10"}),Qe.jsx(Nm,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-green-500"})]})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs(Rle,{className:"flex items-center gap-2 font-medium",children:[Qe.jsx(cm,{className:"w-4 h-4 text-blue-600"}),"Loi hnh kinh doanh"]}),Qe.jsx(Vne,{value:(null==d?void 0:d.business_type)||"Cha cp nht",disabled:!0,className:"bg-muted border-border"})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs(Rle,{className:"flex items-center gap-2 font-medium",children:[Qe.jsx(Vf,{className:"w-4 h-4 text-green-600"}),"S in thoi"]}),Qe.jsx(Vne,{value:(null==d?void 0:d.phone)||"Cha cp nht",disabled:!0,className:"bg-muted border-border"})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs(Rle,{className:"flex items-center gap-2 font-medium",children:[Qe.jsx(wf,{className:"w-4 h-4 text-red-600"}),"Email lin h"]}),Qe.jsx(Vne,{value:(null==d?void 0:d.email)||"Cha cp nht",disabled:!0,className:"bg-muted border-border"})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs(Rle,{className:"flex items-center gap-2 font-medium",children:[Qe.jsx(um,{className:"w-4 h-4 text-purple-600"}),"Nm thnh lp"]}),Qe.jsx(Vne,{value:(null==d?void 0:d.establish_year)||"Cha cp nht",disabled:!0,className:"bg-muted border-border"})]}),Qe.jsxs("div",{className:"space-y-2 md:col-span-1",children:[Qe.jsxs(Rle,{className:"flex items-center gap-2 font-medium",children:[Qe.jsx(jf,{className:"w-4 h-4 text-orange-600"}),"a ch kinh doanh"]}),Qe.jsx(Vne,{value:(null==d?void 0:d.business_address)||"Cha cp nht",disabled:!0,className:"bg-muted border-border"})]})]}),Qe.jsx("div",{className:"p-4 rounded-xl bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200",children:Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-full bg-green-100",children:Qe.jsx(Nm,{className:"w-5 h-5 text-green-600"})}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"font-medium text-green-800",children:"Ca hng  c xc minh"}),Qe.jsx("p",{className:"text-sm text-green-700",children:"Tt c thng tin  c kim tra v ph duyt"})]})]})}),Qe.jsx("div",{className:"p-4 rounded-xl bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200",children:Qe.jsxs("div",{className:"flex items-start gap-3",children:[Qe.jsx(jm,{className:"w-5 h-5 text-blue-600 mt-0.5"}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"font-medium text-blue-800 mb-1",children:"Cn thay i thng tin?"}),Qe.jsx("p",{className:"text-sm text-blue-700 mb-3",children:" cp nht thng tin ca hng, vui lng lin h vi b phn h tr ca chng ti."}),Qe.jsxs("div",{className:"flex gap-2",children:[Qe.jsxs(EP,{variant:"outline",className:"text-blue-700 border-blue-300",children:[Qe.jsx(wf,{className:"w-3 h-3 mr-1"}),"support@vibemarket.com"]}),Qe.jsxs(EP,{variant:"outline",className:"text-blue-700 border-blue-300",children:[Qe.jsx(Vf,{className:"w-3 h-3 mr-1"}),"1900-xxx-xxx"]})]})]})]})})]})]})})]})]});var _}const Dje=()=>Qe.jsx(hwe,{children:Qe.jsxs("div",{className:"min-h-screen flex w-full bg-background",children:[Qe.jsx(_we,{}),Qe.jsxs("main",{className:"flex-1",children:[Qe.jsxs("header",{className:"sticky top-0 z-20 h-16 flex items-center border-b bg-background/80 backdrop-blur-lg supports-[backdrop-filter]:bg-background/50 px-6 shadow-sm",children:[Qe.jsx(mwe,{}),Qe.jsx("div",{className:"ml-4 flex-1",children:Qe.jsx("h2",{className:"text-xl font-bold bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 bg-clip-text text-transparent tracking-tight",children:"Qun l ca hng"})}),Qe.jsx(Iae,{})]}),Qe.jsx("div",{className:"container mx-auto px-6 py-8",children:Qe.jsxs(fN,{children:[Qe.jsx(pN,{index:!0,element:Qe.jsx(Mwe,{})}),Qe.jsx(pN,{path:"order-management",element:Qe.jsx(Dwe,{})}),Qe.jsx(pN,{path:"product-management",element:Qe.jsx(yje,{})}),Qe.jsx(pN,{path:"add-product",element:Qe.jsx(Rje,{})}),Qe.jsx(pN,{path:"statistics",element:Qe.jsx(bje,{})}),Qe.jsx(pN,{path:"setting",element:Qe.jsx(Ije,{})}),Qe.jsx(pN,{path:"*",element:Qe.jsx(uN,{to:"/vendor-management",replace:!0})})]})})]})]})});function Lje({children:e,...t}){return Qe.jsx($v,{...t,children:e})}function Bje(){return Qe.jsxs("section",{className:"relative py-8 px-4 sm:px-6 overflow-hidden",children:[Qe.jsxs("div",{className:"absolute inset-0 -z-10",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background via-primary/5 to-background"}),Qe.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,rgba(var(--primary),0.15),transparent_50%)]"}),Qe.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_bottom_right,rgba(var(--accent),0.15),transparent_50%)]"}),Qe.jsx(QT.div,{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-gradient-to-tr from-primary/30 via-accent/30 to-transparent rounded-full blur-3xl",animate:{scale:[1,1.15,1],opacity:[.3,.45,.3]},transition:{duration:10,repeat:1/0,ease:[.22,1,.36,1]},style:{willChange:"transform, opacity"}}),Qe.jsx(QT.div,{className:"absolute bottom-1/4 right-1/3 w-80 h-80 bg-gradient-to-tl from-accent/40 via-primary/20 to-transparent rounded-full blur-3xl",animate:{scale:[1,1.2,1],opacity:[.4,.5,.4]},transition:{duration:12,repeat:1/0,ease:[.22,1,.36,1],delay:1},style:{willChange:"transform, opacity"}}),Qe.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(var(--primary),0.05)_1px,transparent_1px),linear-gradient(90deg,rgba(var(--primary),0.05)_1px,transparent_1px)] bg-[size:64px_64px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_80%)]"})]}),Qe.jsx("div",{className:"container mx-auto max-w-7xl",children:Qe.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-16 items-center",children:[Qe.jsxs(QT.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.7,ease:[.22,1,.36,1]},className:"space-y-8",style:{willChange:"transform, opacity"},children:[Qe.jsxs(QT.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:.15,duration:.5,ease:[.22,1,.36,1]},className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-full bg-gradient-to-r from-primary/10 via-accent/10 to-primary/10 border border-primary/20 backdrop-blur-sm shadow-lg",style:{willChange:"transform, opacity"},children:[Qe.jsx(pg,{className:"h-5 w-5 text-primary animate-pulse"}),Qe.jsx("span",{className:"text-sm font-semibold bg-gradient-to-r from-primary via-accent to-primary bg-clip-text text-transparent",children:"V VibeMarket"})]}),Qe.jsxs("div",{className:"space-y-4",children:[Qe.jsxs(QT.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-5xl sm:text-6xl lg:text-7xl font-bold leading-tight",children:[Qe.jsx("span",{className:"block bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-transparent",children:"Kt ni"}),Qe.jsx("span",{className:"block bg-gradient-to-r from-primary via-accent to-primary bg-clip-text text-transparent mt-2",children:"Thng hiu Vit"})]}),Qe.jsx(QT.div,{initial:{opacity:0,scaleX:0},animate:{opacity:1,scaleX:1},transition:{delay:.5,duration:.8},className:"h-1.5 w-24 bg-gradient-to-r from-primary to-accent rounded-full"})]}),Qe.jsx(QT.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"text-lg sm:text-xl text-muted-foreground leading-relaxed max-w-xl",children:"Ni kt ni am m thi trang Vit vi cng ng sng to, gip thng hiu a phng ta sng v lan ta phong cch ring."}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"grid grid-cols-3 gap-4 pt-6",children:[{icon:Og,label:"10K+",sublabel:"Ngi dng"},{icon:Sg,label:"500+",sublabel:"Thng hiu"},{icon:zg,label:"50K+",sublabel:"Sn phm"}].map((e,t)=>Qe.jsxs(QT.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.8+.1*t},className:"group relative p-4 rounded-2xl bg-gradient-to-br from-card/80 to-card/40 backdrop-blur-sm border border-border/50 hover:border-primary/50 transition-all duration-300 hover:shadow-lg hover:shadow-primary/10",children:[Qe.jsx(e.icon,{className:"w-6 h-6 text-primary mb-2 group-hover:scale-110 transition-transform"}),Qe.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:e.label}),Qe.jsx("div",{className:"text-xs text-muted-foreground",children:e.sublabel})]},t))}),Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},className:"flex flex-wrap items-center gap-4 pt-4",children:[Qe.jsxs(AP,{size:"lg",className:"bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90 shadow-lg hover:shadow-xl transition-all duration-300 group",children:["Khm ph ngay",Qe.jsx(Qp,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]}),Qe.jsxs(AP,{size:"lg",variant:"outline",className:"border-2 hover:border-primary hover:bg-primary/5 group",children:[Qe.jsx(af,{className:"mr-2 h-4 w-4 group-hover:scale-110 transition-transform"}),"Tham gia cng ng"]})]})]}),Qe.jsxs(QT.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.8,ease:"easeOut",delay:.4},className:"relative",children:[Qe.jsxs("div",{className:"relative group",children:[Qe.jsx("div",{className:"absolute -inset-4 bg-gradient-to-r from-primary/20 via-accent/20 to-primary/20 rounded-3xl blur-2xl opacity-60 group-hover:opacity-100 transition-opacity duration-500"}),Qe.jsxs("div",{className:"relative rounded-3xl overflow-hidden border border-border/50 bg-card/80 backdrop-blur-sm shadow-2xl",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 to-accent/10"}),Qe.jsx(QT.img,{src:"/images/about-illustration.png",alt:"VibeMarket Illustration",className:"relative w-full h-auto object-cover",whileHover:{scale:1.05},transition:{duration:.5}}),Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.2,duration:.6},className:"absolute -bottom-6 -left-6 p-4 rounded-2xl bg-card/90 backdrop-blur-md border border-border/50 shadow-xl",children:Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center",children:Qe.jsx(pg,{className:"w-6 h-6 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx("div",{className:"text-sm font-semibold",children:"Thng hiu uy tn"}),Qe.jsx("div",{className:"text-xs text-muted-foreground",children:"100% chnh hng"})]})]})}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.4,duration:.6},className:"absolute -top-6 -right-6 p-4 rounded-2xl bg-card/90 backdrop-blur-md border border-border/50 shadow-xl",children:Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center",children:Qe.jsx(Sg,{className:"w-6 h-6 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx("div",{className:"text-sm font-semibold",children:"Tng trng nhanh"}),Qe.jsx("div",{className:"text-xs text-muted-foreground",children:"+150% nm 2024"})]})]})})]}),Qe.jsx("div",{className:"absolute -z-10 -top-8 -right-8 w-32 h-32 opacity-20",children:Qe.jsx("div",{className:"grid grid-cols-4 gap-3",children:[...Array(16)].map((e,t)=>Qe.jsx(QT.div,{className:"w-2 h-2 rounded-full bg-primary",initial:{opacity:0,scale:0},animate:{opacity:.3,scale:1},transition:{delay:1+.05*t,duration:.3}},t))})})]})]})})]})}const Fje="160",Uje={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},zje={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Hje=0,Vje=1,Gje=2,Wje=100,Kje=101,qje=102,Xje=200,$je=201,Yje=202,Jje=203,Zje=204,Qje=205,eNe=206,tNe=207,nNe=208,rNe=209,iNe=210,aNe=211,sNe=212,oNe=213,lNe=214,cNe="attached",dNe="detached",uNe=300,hNe=301,pNe=302,mNe=303,fNe=304,gNe=306,vNe=1e3,xNe=1001,yNe=1002,bNe=1003,wNe=1004,jNe=1005,NNe=1006,_Ne=1007,SNe=1008,CNe=1008,ANe=1009,MNe=1010,ENe=1011,kNe=1012,TNe=1013,PNe=1014,ONe=1015,RNe=1016,INe=1017,DNe=1018,LNe=1020,BNe=1023,FNe=1026,UNe=1027,zNe=1028,HNe=1029,VNe=1031,GNe=1033,WNe=33776,KNe=33777,qNe=33778,XNe=33779,$Ne=35840,YNe=35841,JNe=35842,ZNe=35843,QNe=36196,e_e=37492,t_e=37496,n_e=37808,r_e=37809,i_e=37810,a_e=37811,s_e=37812,o_e=37813,l_e=37814,c_e=37815,d_e=37816,u_e=37817,h_e=37818,p_e=37819,m_e=37820,f_e=37821,g_e=36492,v_e=36494,x_e=36495,y_e=36284,b_e=36285,w_e=36286,j_e=2300,N_e=2301,__e=2302,S_e=2400,C_e=2401,A_e=2402,M_e=2500,E_e=2501,k_e=3e3,T_e=3001,P_e="",O_e="srgb",R_e="srgb-linear",I_e="display-p3",D_e="display-p3-linear",L_e="linear",B_e="srgb",F_e="rec709",U_e="p3",z_e=7680,H_e=512,V_e=513,G_e=514,W_e=515,K_e=516,q_e=517,X_e=518,$_e=519,Y_e=35044,J_e="300 es",Z_e=1035,Q_e=2e3,eSe=2001;let tSe=class{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}};const nSe=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let rSe=1234567;const iSe=Math.PI/180,aSe=180/Math.PI;function sSe(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(nSe[255&e]+nSe[e>>8&255]+nSe[e>>16&255]+nSe[e>>24&255]+"-"+nSe[255&t]+nSe[t>>8&255]+"-"+nSe[t>>16&15|64]+nSe[t>>24&255]+"-"+nSe[63&n|128]+nSe[n>>8&255]+"-"+nSe[n>>16&255]+nSe[n>>24&255]+nSe[255&r]+nSe[r>>8&255]+nSe[r>>16&255]+nSe[r>>24&255]).toLowerCase()}function oSe(e,t,n){return Math.max(t,Math.min(n,e))}function lSe(e,t){return(e%t+t)%t}function cSe(e,t,n){return(1-n)*e+n*t}function dSe(e){return!(e&e-1)&&0!==e}function uSe(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function hSe(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function pSe(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const mSe={DEG2RAD:iSe,RAD2DEG:aSe,generateUUID:sSe,clamp:oSe,euclideanModulo:lSe,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:cSe,damp:function(e,t,n,r){return cSe(e,t,1-Math.exp(-n*r))},pingpong:function(e,t=1){return t-Math.abs(lSe(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(rSe=e);let t=rSe+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*iSe},radToDeg:function(e){return e*aSe},isPowerOfTwo:dSe,ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:uSe,setQuaternionFromProperEuler:function(e,t,n,r,i){const a=Math.cos,s=Math.sin,o=a(n/2),l=s(n/2),c=a((t+r)/2),d=s((t+r)/2),u=a((t-r)/2),h=s((t-r)/2),p=a((r-t)/2),m=s((r-t)/2);switch(i){case"XYX":e.set(o*d,l*u,l*h,o*c);break;case"YZY":e.set(l*h,o*d,l*u,o*c);break;case"ZXZ":e.set(l*u,l*h,o*d,o*c);break;case"XZX":e.set(o*d,l*m,l*p,o*c);break;case"YXY":e.set(l*p,o*d,l*m,o*c);break;case"ZYZ":e.set(l*m,l*p,o*d,o*c)}},normalize:pSe,denormalize:hSe};class fSe{constructor(e=0,t=0){fSe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(oSe(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class gSe{constructor(e,t,n,r,i,a,s,o,l){gSe.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,a,s,o,l)}set(e,t,n,r,i,a,s,o,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=s,c[3]=t,c[4]=i,c[5]=o,c[6]=n,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,a=n[0],s=n[3],o=n[6],l=n[1],c=n[4],d=n[7],u=n[2],h=n[5],p=n[8],m=r[0],f=r[3],g=r[6],v=r[1],x=r[4],y=r[7],b=r[2],w=r[5],j=r[8];return i[0]=a*m+s*v+o*b,i[3]=a*f+s*x+o*w,i[6]=a*g+s*y+o*j,i[1]=l*m+c*v+d*b,i[4]=l*f+c*x+d*w,i[7]=l*g+c*y+d*j,i[2]=u*m+h*v+p*b,i[5]=u*f+h*x+p*w,i[8]=u*g+h*y+p*j,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8];return t*a*c-t*s*l-n*i*c+n*s*o+r*i*l-r*a*o}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],d=c*a-s*l,u=s*o-c*i,h=l*i-a*o,p=t*d+n*u+r*h;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=d*m,e[1]=(r*l-c*n)*m,e[2]=(s*n-r*a)*m,e[3]=u*m,e[4]=(c*t-r*o)*m,e[5]=(r*i-s*t)*m,e[6]=h*m,e[7]=(n*o-l*t)*m,e[8]=(a*t-n*i)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,a,s){const o=Math.cos(i),l=Math.sin(i);return this.set(n*o,n*l,-n*(o*a+l*s)+a+e,-r*l,r*o,-r*(-l*a+o*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(vSe.makeScale(e,t)),this}rotate(e){return this.premultiply(vSe.makeRotation(-e)),this}translate(e,t){return this.premultiply(vSe.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const vSe=new gSe;function xSe(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const ySe={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function bSe(e,t){return new ySe[e](t)}function wSe(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function jSe(){const e=wSe("canvas");return e.style.display="block",e}const NSe={};function _Se(e){e in NSe||(NSe[e]=!0)}const SSe=(new gSe).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),CSe=(new gSe).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),ASe={[R_e]:{transfer:L_e,primaries:F_e,toReference:e=>e,fromReference:e=>e},[O_e]:{transfer:B_e,primaries:F_e,toReference:e=>e.convertSRGBToLinear(),fromReference:e=>e.convertLinearToSRGB()},[D_e]:{transfer:L_e,primaries:U_e,toReference:e=>e.applyMatrix3(CSe),fromReference:e=>e.applyMatrix3(SSe)},[I_e]:{transfer:B_e,primaries:U_e,toReference:e=>e.convertSRGBToLinear().applyMatrix3(CSe),fromReference:e=>e.applyMatrix3(SSe).convertLinearToSRGB()}},MSe=new Set([R_e,D_e]),ESe={enabled:!0,_workingColorSpace:R_e,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(e){if(!MSe.has(e))throw new Error(`Unsupported working color space, "${e}".`);this._workingColorSpace=e},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;const r=ASe[t].toReference;return(0,ASe[n].fromReference)(r(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this._workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this._workingColorSpace)},getPrimaries:function(e){return ASe[e].primaries},getTransfer:function(e){return e===P_e?L_e:ASe[e].transfer}};function kSe(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function TSe(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let PSe;class OSe{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===PSe&&(PSe=wSe("canvas")),PSe.width=e.width,PSe.height=e.height;const n=PSe.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=PSe}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=wSe("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*kSe(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*kSe(t[e]/255)):t[e]=kSe(t[e]);return{data:t,width:e.width,height:e.height}}return e}}let RSe=0;class ISe{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:RSe++}),this.uuid=sSe(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(DSe(r[t].image)):e.push(DSe(r[t]))}else e=DSe(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function DSe(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?OSe.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:{}}let LSe=0;class BSe extends tSe{constructor(e=BSe.DEFAULT_IMAGE,t=BSe.DEFAULT_MAPPING,n=1001,r=1001,i=1006,a=1008,s=1023,o=1009,l=BSe.DEFAULT_ANISOTROPY,c=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:LSe++}),this.uuid=sSe(),this.name="",this.source=new ISe(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=a,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=o,this.offset=new fSe(0,0),this.repeat=new fSe(1,1),this.center=new fSe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new gSe,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof c?this.colorSpace=c:(_Se("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===T_e?O_e:P_e),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==uNe)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case vNe:e.x=e.x-Math.floor(e.x);break;case xNe:e.x=e.x<0?0:1;break;case yNe:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case vNe:e.y=e.y-Math.floor(e.y);break;case xNe:e.y=e.y<0?0:1;break;case yNe:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return _Se("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===O_e?T_e:k_e}set encoding(e){_Se("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===T_e?O_e:P_e}}BSe.DEFAULT_IMAGE=null,BSe.DEFAULT_MAPPING=uNe,BSe.DEFAULT_ANISOTROPY=1;class FSe{constructor(e=0,t=0,n=0,r=1){FSe.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const a=.01,s=.1,o=e.elements,l=o[0],c=o[4],d=o[8],u=o[1],h=o[5],p=o[9],m=o[2],f=o[6],g=o[10];if(Math.abs(c-u)<a&&Math.abs(d-m)<a&&Math.abs(p-f)<a){if(Math.abs(c+u)<s&&Math.abs(d+m)<s&&Math.abs(p+f)<s&&Math.abs(l+h+g-3)<s)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,o=(h+1)/2,v=(g+1)/2,x=(c+u)/4,y=(d+m)/4,b=(p+f)/4;return e>o&&e>v?e<a?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=x/n,i=y/n):o>v?o<a?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(o),n=x/r,i=b/r):v<a?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=y/i,r=b/i),this.set(n,r,i,t),this}let v=Math.sqrt((f-p)*(f-p)+(d-m)*(d-m)+(u-c)*(u-c));return Math.abs(v)<.001&&(v=1),this.x=(f-p)/v,this.y=(d-m)/v,this.z=(u-c)/v,this.w=Math.acos((l+h+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class USe extends tSe{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new FSe(0,0,e,t),this.scissorTest=!1,this.viewport=new FSe(0,0,e,t);const r={width:e,height:t,depth:1};void 0!==n.encoding&&(_Se("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===T_e?O_e:P_e),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:NNe,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},n),this.texture=new BSe(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps,this.texture.internalFormat=n.internalFormat,this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new ISe(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class zSe extends USe{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class HSe extends BSe{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=bNe,this.minFilter=bNe,this.wrapR=xNe,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class VSe extends BSe{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=bNe,this.minFilter=bNe,this.wrapR=xNe,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class GSe{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,a,s){let o=n[r+0],l=n[r+1],c=n[r+2],d=n[r+3];const u=i[a+0],h=i[a+1],p=i[a+2],m=i[a+3];if(0===s)return e[t+0]=o,e[t+1]=l,e[t+2]=c,void(e[t+3]=d);if(1===s)return e[t+0]=u,e[t+1]=h,e[t+2]=p,void(e[t+3]=m);if(d!==m||o!==u||l!==h||c!==p){let e=1-s;const t=o*u+l*h+c*p+d*m,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),a=Math.atan2(i,t*n);e=Math.sin(e*a)/i,s=Math.sin(s*a)/i}const i=s*n;if(o=o*e+u*i,l=l*e+h*i,c=c*e+p*i,d=d*e+m*i,e===1-s){const e=1/Math.sqrt(o*o+l*l+c*c+d*d);o*=e,l*=e,c*=e,d*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=d}static multiplyQuaternionsFlat(e,t,n,r,i,a){const s=n[r],o=n[r+1],l=n[r+2],c=n[r+3],d=i[a],u=i[a+1],h=i[a+2],p=i[a+3];return e[t]=s*p+c*d+o*h-l*u,e[t+1]=o*p+c*u+l*d-s*h,e[t+2]=l*p+c*h+s*u-o*d,e[t+3]=c*p-s*d-o*u-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,i=e._z,a=e._order,s=Math.cos,o=Math.sin,l=s(n/2),c=s(r/2),d=s(i/2),u=o(n/2),h=o(r/2),p=o(i/2);switch(a){case"XYZ":this._x=u*c*d+l*h*p,this._y=l*h*d-u*c*p,this._z=l*c*p+u*h*d,this._w=l*c*d-u*h*p;break;case"YXZ":this._x=u*c*d+l*h*p,this._y=l*h*d-u*c*p,this._z=l*c*p-u*h*d,this._w=l*c*d+u*h*p;break;case"ZXY":this._x=u*c*d-l*h*p,this._y=l*h*d+u*c*p,this._z=l*c*p+u*h*d,this._w=l*c*d-u*h*p;break;case"ZYX":this._x=u*c*d-l*h*p,this._y=l*h*d+u*c*p,this._z=l*c*p-u*h*d,this._w=l*c*d+u*h*p;break;case"YZX":this._x=u*c*d+l*h*p,this._y=l*h*d+u*c*p,this._z=l*c*p-u*h*d,this._w=l*c*d-u*h*p;break;case"XZY":this._x=u*c*d-l*h*p,this._y=l*h*d-u*c*p,this._z=l*c*p+u*h*d,this._w=l*c*d+u*h*p}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],s=t[5],o=t[9],l=t[2],c=t[6],d=t[10],u=n+s+d;if(u>0){const e=.5/Math.sqrt(u+1);this._w=.25/e,this._x=(c-o)*e,this._y=(i-l)*e,this._z=(a-r)*e}else if(n>s&&n>d){const e=2*Math.sqrt(1+n-s-d);this._w=(c-o)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(i+l)/e}else if(s>d){const e=2*Math.sqrt(1+s-n-d);this._w=(i-l)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+d-n-s);this._w=(a-r)/e,this._x=(i+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(oSe(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,a=e._w,s=t._x,o=t._y,l=t._z,c=t._w;return this._x=n*c+a*s+r*l-i*o,this._y=r*c+a*o+i*s-n*l,this._z=i*c+a*l+n*o-r*s,this._w=a*c-n*s-r*o-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,a=this._w;let s=a*e._w+n*e._x+r*e._y+i*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;const o=1-s*s;if(o<=Number.EPSILON){const e=1-t;return this._w=e*a+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this}const l=Math.sqrt(o),c=Math.atan2(l,s),d=Math.sin((1-t)*c)/l,u=Math.sin(t*c)/l;return this._w=a*d+this._w*u,this._x=n*d+this._x*u,this._y=r*d+this._y*u,this._z=i*d+this._z*u,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class WSe{constructor(e=0,t=0,n=0){WSe.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(qSe.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(qSe.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,s=e.z,o=e.w,l=2*(a*r-s*n),c=2*(s*t-i*r),d=2*(i*n-a*t);return this.x=t+o*l+a*d-s*c,this.y=n+o*c+s*l-i*d,this.z=r+o*d+i*c-a*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,a=t.x,s=t.y,o=t.z;return this.x=r*o-i*s,this.y=i*a-n*o,this.z=n*s-r*a,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return KSe.copy(this).projectOnVector(e),this.sub(KSe)}reflect(e){return this.sub(KSe.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(oSe(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const KSe=new WSe,qSe=new GSe;class XSe{constructor(e=new WSe(1/0,1/0,1/0),t=new WSe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(YSe.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(YSe.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=YSe.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const r=n.getAttribute("position");if(!0===t&&void 0!==r&&!0!==e.isInstancedMesh)for(let t=0,n=r.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,YSe):YSe.fromBufferAttribute(r,t),YSe.applyMatrix4(e.matrixWorld),this.expandByPoint(YSe);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),JSe.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),JSe.copy(n.boundingBox)),JSe.applyMatrix4(e.matrixWorld),this.union(JSe)}const r=e.children;for(let i=0,a=r.length;i<a;i++)this.expandByObject(r[i],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,YSe),YSe.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(iCe),aCe.subVectors(this.max,iCe),ZSe.subVectors(e.a,iCe),QSe.subVectors(e.b,iCe),eCe.subVectors(e.c,iCe),tCe.subVectors(QSe,ZSe),nCe.subVectors(eCe,QSe),rCe.subVectors(ZSe,eCe);let t=[0,-tCe.z,tCe.y,0,-nCe.z,nCe.y,0,-rCe.z,rCe.y,tCe.z,0,-tCe.x,nCe.z,0,-nCe.x,rCe.z,0,-rCe.x,-tCe.y,tCe.x,0,-nCe.y,nCe.x,0,-rCe.y,rCe.x,0];return!!lCe(t,ZSe,QSe,eCe,aCe)&&(t=[1,0,0,0,1,0,0,0,1],!!lCe(t,ZSe,QSe,eCe,aCe)&&(sCe.crossVectors(tCe,nCe),t=[sCe.x,sCe.y,sCe.z],lCe(t,ZSe,QSe,eCe,aCe)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,YSe).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(YSe).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||($Se[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),$Se[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),$Se[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),$Se[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),$Se[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),$Se[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),$Se[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),$Se[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints($Se)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const $Se=[new WSe,new WSe,new WSe,new WSe,new WSe,new WSe,new WSe,new WSe],YSe=new WSe,JSe=new XSe,ZSe=new WSe,QSe=new WSe,eCe=new WSe,tCe=new WSe,nCe=new WSe,rCe=new WSe,iCe=new WSe,aCe=new WSe,sCe=new WSe,oCe=new WSe;function lCe(e,t,n,r,i){for(let a=0,s=e.length-3;a<=s;a+=3){oCe.fromArray(e,a);const s=i.x*Math.abs(oCe.x)+i.y*Math.abs(oCe.y)+i.z*Math.abs(oCe.z),o=t.dot(oCe),l=n.dot(oCe),c=r.dot(oCe);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>s)return!1}return!0}const cCe=new XSe,dCe=new WSe,uCe=new WSe;class hCe{constructor(e=new WSe,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):cCe.setFromPoints(e).getCenter(n);let r=0;for(let i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;dCe.subVectors(e,this.center);const t=dCe.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(dCe,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(uCe.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(dCe.copy(e.center).add(uCe)),this.expandByPoint(dCe.copy(e.center).sub(uCe))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const pCe=new WSe,mCe=new WSe,fCe=new WSe,gCe=new WSe,vCe=new WSe,xCe=new WSe,yCe=new WSe;class bCe{constructor(e=new WSe,t=new WSe(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,pCe)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=pCe.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(pCe.copy(this.origin).addScaledVector(this.direction,t),pCe.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){mCe.copy(e).add(t).multiplyScalar(.5),fCe.copy(t).sub(e).normalize(),gCe.copy(this.origin).sub(mCe);const i=.5*e.distanceTo(t),a=-this.direction.dot(fCe),s=gCe.dot(this.direction),o=-gCe.dot(fCe),l=gCe.lengthSq(),c=Math.abs(1-a*a);let d,u,h,p;if(c>0)if(d=a*o-s,u=a*s-o,p=i*c,d>=0)if(u>=-p)if(u<=p){const e=1/c;d*=e,u*=e,h=d*(d+a*u+2*s)+u*(a*d+u+2*o)+l}else u=i,d=Math.max(0,-(a*u+s)),h=-d*d+u*(u+2*o)+l;else u=-i,d=Math.max(0,-(a*u+s)),h=-d*d+u*(u+2*o)+l;else u<=-p?(d=Math.max(0,-(-a*i+s)),u=d>0?-i:Math.min(Math.max(-i,-o),i),h=-d*d+u*(u+2*o)+l):u<=p?(d=0,u=Math.min(Math.max(-i,-o),i),h=u*(u+2*o)+l):(d=Math.max(0,-(a*i+s)),u=d>0?i:Math.min(Math.max(-i,-o),i),h=-d*d+u*(u+2*o)+l);else u=a>0?-i:i,d=Math.max(0,-(a*u+s)),h=-d*d+u*(u+2*o)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(mCe).addScaledVector(fCe,u),h}intersectSphere(e,t){pCe.subVectors(e.center,this.origin);const n=pCe.dot(this.direction),r=pCe.dot(pCe)-n*n,i=e.radius*e.radius;if(r>i)return null;const a=Math.sqrt(i-r),s=n-a,o=n+a;return o<0?null:s<0?this.at(o,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,a,s,o;const l=1/this.direction.x,c=1/this.direction.y,d=1/this.direction.z,u=this.origin;return l>=0?(n=(e.min.x-u.x)*l,r=(e.max.x-u.x)*l):(n=(e.max.x-u.x)*l,r=(e.min.x-u.x)*l),c>=0?(i=(e.min.y-u.y)*c,a=(e.max.y-u.y)*c):(i=(e.max.y-u.y)*c,a=(e.min.y-u.y)*c),n>a||i>r?null:((i>n||isNaN(n))&&(n=i),(a<r||isNaN(r))&&(r=a),d>=0?(s=(e.min.z-u.z)*d,o=(e.max.z-u.z)*d):(s=(e.max.z-u.z)*d,o=(e.min.z-u.z)*d),n>o||s>r?null:((s>n||n!=n)&&(n=s),(o<r||r!=r)&&(r=o),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,pCe)}intersectTriangle(e,t,n,r,i){vCe.subVectors(t,e),xCe.subVectors(n,e),yCe.crossVectors(vCe,xCe);let a,s=this.direction.dot(yCe);if(s>0){if(r)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}gCe.subVectors(this.origin,e);const o=a*this.direction.dot(xCe.crossVectors(gCe,xCe));if(o<0)return null;const l=a*this.direction.dot(vCe.cross(gCe));if(l<0)return null;if(o+l>s)return null;const c=-a*gCe.dot(yCe);return c<0?null:this.at(c/s,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class wCe{constructor(e,t,n,r,i,a,s,o,l,c,d,u,h,p,m,f){wCe.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,a,s,o,l,c,d,u,h,p,m,f)}set(e,t,n,r,i,a,s,o,l,c,d,u,h,p,m,f){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=a,g[9]=s,g[13]=o,g[2]=l,g[6]=c,g[10]=d,g[14]=u,g[3]=h,g[7]=p,g[11]=m,g[15]=f,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new wCe).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/jCe.setFromMatrixColumn(e,0).length(),i=1/jCe.setFromMatrixColumn(e,1).length(),a=1/jCe.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),s=Math.sin(n),o=Math.cos(r),l=Math.sin(r),c=Math.cos(i),d=Math.sin(i);if("XYZ"===e.order){const e=a*c,n=a*d,r=s*c,i=s*d;t[0]=o*c,t[4]=-o*d,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-s*o,t[2]=i-e*l,t[6]=r+n*l,t[10]=a*o}else if("YXZ"===e.order){const e=o*c,n=o*d,r=l*c,i=l*d;t[0]=e+i*s,t[4]=r*s-n,t[8]=a*l,t[1]=a*d,t[5]=a*c,t[9]=-s,t[2]=n*s-r,t[6]=i+e*s,t[10]=a*o}else if("ZXY"===e.order){const e=o*c,n=o*d,r=l*c,i=l*d;t[0]=e-i*s,t[4]=-a*d,t[8]=r+n*s,t[1]=n+r*s,t[5]=a*c,t[9]=i-e*s,t[2]=-a*l,t[6]=s,t[10]=a*o}else if("ZYX"===e.order){const e=a*c,n=a*d,r=s*c,i=s*d;t[0]=o*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=o*d,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=s*o,t[10]=a*o}else if("YZX"===e.order){const e=a*o,n=a*l,r=s*o,i=s*l;t[0]=o*c,t[4]=i-e*d,t[8]=r*d+n,t[1]=d,t[5]=a*c,t[9]=-s*c,t[2]=-l*c,t[6]=n*d+r,t[10]=e-i*d}else if("XZY"===e.order){const e=a*o,n=a*l,r=s*o,i=s*l;t[0]=o*c,t[4]=-d,t[8]=l*c,t[1]=e*d+i,t[5]=a*c,t[9]=n*d-r,t[2]=r*d-n,t[6]=s*c,t[10]=i*d+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(_Ce,e,SCe)}lookAt(e,t,n){const r=this.elements;return MCe.subVectors(e,t),0===MCe.lengthSq()&&(MCe.z=1),MCe.normalize(),CCe.crossVectors(n,MCe),0===CCe.lengthSq()&&(1===Math.abs(n.z)?MCe.x+=1e-4:MCe.z+=1e-4,MCe.normalize(),CCe.crossVectors(n,MCe)),CCe.normalize(),ACe.crossVectors(MCe,CCe),r[0]=CCe.x,r[4]=ACe.x,r[8]=MCe.x,r[1]=CCe.y,r[5]=ACe.y,r[9]=MCe.y,r[2]=CCe.z,r[6]=ACe.z,r[10]=MCe.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,a=n[0],s=n[4],o=n[8],l=n[12],c=n[1],d=n[5],u=n[9],h=n[13],p=n[2],m=n[6],f=n[10],g=n[14],v=n[3],x=n[7],y=n[11],b=n[15],w=r[0],j=r[4],N=r[8],_=r[12],S=r[1],C=r[5],A=r[9],M=r[13],E=r[2],k=r[6],T=r[10],P=r[14],O=r[3],R=r[7],I=r[11],D=r[15];return i[0]=a*w+s*S+o*E+l*O,i[4]=a*j+s*C+o*k+l*R,i[8]=a*N+s*A+o*T+l*I,i[12]=a*_+s*M+o*P+l*D,i[1]=c*w+d*S+u*E+h*O,i[5]=c*j+d*C+u*k+h*R,i[9]=c*N+d*A+u*T+h*I,i[13]=c*_+d*M+u*P+h*D,i[2]=p*w+m*S+f*E+g*O,i[6]=p*j+m*C+f*k+g*R,i[10]=p*N+m*A+f*T+g*I,i[14]=p*_+m*M+f*P+g*D,i[3]=v*w+x*S+y*E+b*O,i[7]=v*j+x*C+y*k+b*R,i[11]=v*N+x*A+y*T+b*I,i[15]=v*_+x*M+y*P+b*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],s=e[5],o=e[9],l=e[13],c=e[2],d=e[6],u=e[10],h=e[14];return e[3]*(+i*o*d-r*l*d-i*s*u+n*l*u+r*s*h-n*o*h)+e[7]*(+t*o*h-t*l*u+i*a*u-r*a*h+r*l*c-i*o*c)+e[11]*(+t*l*d-t*s*h-i*a*d+n*a*h+i*s*c-n*l*c)+e[15]*(-r*s*c-t*o*d+t*s*u+r*a*d-n*a*u+n*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],d=e[9],u=e[10],h=e[11],p=e[12],m=e[13],f=e[14],g=e[15],v=d*f*l-m*u*l+m*o*h-s*f*h-d*o*g+s*u*g,x=p*u*l-c*f*l-p*o*h+a*f*h+c*o*g-a*u*g,y=c*m*l-p*d*l+p*s*h-a*m*h-c*s*g+a*d*g,b=p*d*o-c*m*o-p*s*u+a*m*u+c*s*f-a*d*f,w=t*v+n*x+r*y+i*b;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const j=1/w;return e[0]=v*j,e[1]=(m*u*i-d*f*i-m*r*h+n*f*h+d*r*g-n*u*g)*j,e[2]=(s*f*i-m*o*i+m*r*l-n*f*l-s*r*g+n*o*g)*j,e[3]=(d*o*i-s*u*i-d*r*l+n*u*l+s*r*h-n*o*h)*j,e[4]=x*j,e[5]=(c*f*i-p*u*i+p*r*h-t*f*h-c*r*g+t*u*g)*j,e[6]=(p*o*i-a*f*i-p*r*l+t*f*l+a*r*g-t*o*g)*j,e[7]=(a*u*i-c*o*i+c*r*l-t*u*l-a*r*h+t*o*h)*j,e[8]=y*j,e[9]=(p*d*i-c*m*i-p*n*h+t*m*h+c*n*g-t*d*g)*j,e[10]=(a*m*i-p*s*i+p*n*l-t*m*l-a*n*g+t*s*g)*j,e[11]=(c*s*i-a*d*i-c*n*l+t*d*l+a*n*h-t*s*h)*j,e[12]=b*j,e[13]=(c*m*r-p*d*r+p*n*u-t*m*u-c*n*f+t*d*f)*j,e[14]=(p*s*r-a*m*r-p*n*o+t*m*o+a*n*f-t*s*f)*j,e[15]=(a*d*r-c*s*r+c*n*o-t*d*o-a*n*u+t*s*u)*j,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,s=e.y,o=e.z,l=i*a,c=i*s;return this.set(l*a+n,l*s-r*o,l*o+r*s,0,l*s+r*o,c*s+n,c*o-r*a,0,l*o-r*s,c*o+r*a,i*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,a=t._y,s=t._z,o=t._w,l=i+i,c=a+a,d=s+s,u=i*l,h=i*c,p=i*d,m=a*c,f=a*d,g=s*d,v=o*l,x=o*c,y=o*d,b=n.x,w=n.y,j=n.z;return r[0]=(1-(m+g))*b,r[1]=(h+y)*b,r[2]=(p-x)*b,r[3]=0,r[4]=(h-y)*w,r[5]=(1-(u+g))*w,r[6]=(f+v)*w,r[7]=0,r[8]=(p+x)*j,r[9]=(f-v)*j,r[10]=(1-(u+m))*j,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=jCe.set(r[0],r[1],r[2]).length();const a=jCe.set(r[4],r[5],r[6]).length(),s=jCe.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],NCe.copy(this);const o=1/i,l=1/a,c=1/s;return NCe.elements[0]*=o,NCe.elements[1]*=o,NCe.elements[2]*=o,NCe.elements[4]*=l,NCe.elements[5]*=l,NCe.elements[6]*=l,NCe.elements[8]*=c,NCe.elements[9]*=c,NCe.elements[10]*=c,t.setFromRotationMatrix(NCe),n.x=i,n.y=a,n.z=s,this}makePerspective(e,t,n,r,i,a,s=2e3){const o=this.elements,l=2*i/(t-e),c=2*i/(n-r),d=(t+e)/(t-e),u=(n+r)/(n-r);let h,p;if(s===Q_e)h=-(a+i)/(a-i),p=-2*a*i/(a-i);else{if(s!==eSe)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);h=-a/(a-i),p=-a*i/(a-i)}return o[0]=l,o[4]=0,o[8]=d,o[12]=0,o[1]=0,o[5]=c,o[9]=u,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,n,r,i,a,s=2e3){const o=this.elements,l=1/(t-e),c=1/(n-r),d=1/(a-i),u=(t+e)*l,h=(n+r)*c;let p,m;if(s===Q_e)p=(a+i)*d,m=-2*d;else{if(s!==eSe)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);p=i*d,m=-1*d}return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-u,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=m,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const jCe=new WSe,NCe=new wCe,_Ce=new WSe(0,0,0),SCe=new WSe(1,1,1),CCe=new WSe,ACe=new WSe,MCe=new WSe,ECe=new wCe,kCe=new GSe;class TCe{constructor(e=0,t=0,n=0,r=TCe.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],a=r[4],s=r[8],o=r[1],l=r[5],c=r[9],d=r[2],u=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(oSe(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-oSe(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,h),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-d,i),this._z=0);break;case"ZXY":this._x=Math.asin(oSe(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-d,h),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(o,i));break;case"ZYX":this._y=Math.asin(-oSe(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(u,h),this._z=Math.atan2(o,i)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(oSe(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-d,i)):(this._x=0,this._y=Math.atan2(s,h));break;case"XZY":this._z=Math.asin(-oSe(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(s,i)):(this._x=Math.atan2(-c,h),this._y=0)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return ECe.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ECe,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return kCe.setFromEuler(this),this.setFromQuaternion(kCe,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}TCe.DEFAULT_ORDER="XYZ";class PCe{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return!!(this.mask&1<<e)}}let OCe=0;const RCe=new WSe,ICe=new GSe,DCe=new wCe,LCe=new WSe,BCe=new WSe,FCe=new WSe,UCe=new GSe,zCe=new WSe(1,0,0),HCe=new WSe(0,1,0),VCe=new WSe(0,0,1),GCe={type:"added"},WCe={type:"removed"};class KCe extends tSe{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:OCe++}),this.uuid=sSe(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=KCe.DEFAULT_UP.clone();const e=new WSe,t=new TCe,n=new GSe,r=new WSe(1,1,1);t._onChange(function(){n.setFromEuler(t,!1)}),n._onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new wCe},normalMatrix:{value:new gSe}}),this.matrix=new wCe,this.matrixWorld=new wCe,this.matrixAutoUpdate=KCe.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=KCe.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new PCe,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ICe.setFromAxisAngle(e,t),this.quaternion.multiply(ICe),this}rotateOnWorldAxis(e,t){return ICe.setFromAxisAngle(e,t),this.quaternion.premultiply(ICe),this}rotateX(e){return this.rotateOnAxis(zCe,e)}rotateY(e){return this.rotateOnAxis(HCe,e)}rotateZ(e){return this.rotateOnAxis(VCe,e)}translateOnAxis(e,t){return RCe.copy(e).applyQuaternion(this.quaternion),this.position.add(RCe.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(zCe,e)}translateY(e){return this.translateOnAxis(HCe,e)}translateZ(e){return this.translateOnAxis(VCe,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(DCe.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?LCe.copy(e):LCe.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),BCe.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?DCe.lookAt(BCe,LCe,this.up):DCe.lookAt(LCe,BCe,this.up),this.quaternion.setFromRotationMatrix(DCe),r&&(DCe.extractRotation(r.matrixWorld),ICe.setFromRotationMatrix(DCe),this.quaternion.premultiply(ICe.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this||e&&e.isObject3D&&(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(GCe)),this}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(WCe)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),DCe.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),DCe.multiply(e.parent.matrixWorld)),e.applyMatrix4(DCe),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const r=this.children;for(let i=0,a=r.length;i<a;i++)r[i].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(BCe,e,FCe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(BCe,UCe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){const r=t[n];!0!==r.matrixWorldAutoUpdate&&!0!==e||r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(e=>({boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()})),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),null!==this.boundingSphere&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),null!==this.boundingBox&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=a(e.geometries),r=a(e.materials),i=a(e.textures),s=a(e.images),o=a(e.shapes),l=a(e.skeletons),c=a(e.animations),d=a(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),s.length>0&&(n.images=s),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),d.length>0&&(n.nodes=d)}return n.object=r,n;function a(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}KCe.DEFAULT_UP=new WSe(0,1,0),KCe.DEFAULT_MATRIX_AUTO_UPDATE=!0,KCe.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const qCe=new WSe,XCe=new WSe,$Ce=new WSe,YCe=new WSe,JCe=new WSe,ZCe=new WSe,QCe=new WSe,eAe=new WSe,tAe=new WSe,nAe=new WSe;let rAe=!1;class iAe{constructor(e=new WSe,t=new WSe,n=new WSe){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),qCe.subVectors(e,t),r.cross(qCe);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){qCe.subVectors(r,t),XCe.subVectors(n,t),$Ce.subVectors(e,t);const a=qCe.dot(qCe),s=qCe.dot(XCe),o=qCe.dot($Ce),l=XCe.dot(XCe),c=XCe.dot($Ce),d=a*l-s*s;if(0===d)return i.set(0,0,0),null;const u=1/d,h=(l*o-s*c)*u,p=(a*c-s*o)*u;return i.set(1-h-p,p,h)}static containsPoint(e,t,n,r){return null!==this.getBarycoord(e,t,n,r,YCe)&&(YCe.x>=0&&YCe.y>=0&&YCe.x+YCe.y<=1)}static getUV(e,t,n,r,i,a,s,o){return!1===rAe&&(rAe=!0),this.getInterpolation(e,t,n,r,i,a,s,o)}static getInterpolation(e,t,n,r,i,a,s,o){return null===this.getBarycoord(e,t,n,r,YCe)?(o.x=0,o.y=0,"z"in o&&(o.z=0),"w"in o&&(o.w=0),null):(o.setScalar(0),o.addScaledVector(i,YCe.x),o.addScaledVector(a,YCe.y),o.addScaledVector(s,YCe.z),o)}static isFrontFacing(e,t,n,r){return qCe.subVectors(n,t),XCe.subVectors(e,t),qCe.cross(XCe).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return qCe.subVectors(this.c,this.b),XCe.subVectors(this.a,this.b),.5*qCe.cross(XCe).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return iAe.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return iAe.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return!1===rAe&&(rAe=!0),iAe.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}getInterpolation(e,t,n,r,i){return iAe.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return iAe.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return iAe.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let a,s;JCe.subVectors(r,n),ZCe.subVectors(i,n),eAe.subVectors(e,n);const o=JCe.dot(eAe),l=ZCe.dot(eAe);if(o<=0&&l<=0)return t.copy(n);tAe.subVectors(e,r);const c=JCe.dot(tAe),d=ZCe.dot(tAe);if(c>=0&&d<=c)return t.copy(r);const u=o*d-c*l;if(u<=0&&o>=0&&c<=0)return a=o/(o-c),t.copy(n).addScaledVector(JCe,a);nAe.subVectors(e,i);const h=JCe.dot(nAe),p=ZCe.dot(nAe);if(p>=0&&h<=p)return t.copy(i);const m=h*l-o*p;if(m<=0&&l>=0&&p<=0)return s=l/(l-p),t.copy(n).addScaledVector(ZCe,s);const f=c*p-h*d;if(f<=0&&d-c>=0&&h-p>=0)return QCe.subVectors(i,r),s=(d-c)/(d-c+(h-p)),t.copy(r).addScaledVector(QCe,s);const g=1/(f+m+u);return a=m*g,s=u*g,t.copy(n).addScaledVector(JCe,a).addScaledVector(ZCe,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const aAe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},sAe={h:0,s:0,l:0},oAe={h:0,s:0,l:0};function lAe(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class cAe{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=O_e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,ESe.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=ESe.workingColorSpace){return this.r=e,this.g=t,this.b=n,ESe.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=ESe.workingColorSpace){if(e=lSe(e,1),t=oSe(t,0,1),n=oSe(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=lAe(i,r,e+1/3),this.g=lAe(i,r,e),this.b=lAe(i,r,e-1/3)}return ESe.toWorkingColorSpace(this,r),this}setStyle(e,t=O_e){function n(e){void 0!==e&&parseFloat(e)}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let e;const i=r[1],a=r[2];switch(i){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(e[4]),this.setRGB(Math.min(255,parseInt(e[1],10))/255,Math.min(255,parseInt(e[2],10))/255,Math.min(255,parseInt(e[3],10))/255,t);if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(e[4]),this.setRGB(Math.min(100,parseInt(e[1],10))/100,Math.min(100,parseInt(e[2],10))/100,Math.min(100,parseInt(e[3],10))/100,t);break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(e[4]),this.setHSL(parseFloat(e[1])/360,parseFloat(e[2])/100,parseFloat(e[3])/100,t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=r[1],n=e.length;if(3===n)return this.setRGB(parseInt(e.charAt(0),16)/15,parseInt(e.charAt(1),16)/15,parseInt(e.charAt(2),16)/15,t);if(6===n)return this.setHex(parseInt(e,16),t)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=O_e){const n=aAe[e.toLowerCase()];return void 0!==n&&this.setHex(n,t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=kSe(e.r),this.g=kSe(e.g),this.b=kSe(e.b),this}copyLinearToSRGB(e){return this.r=TSe(e.r),this.g=TSe(e.g),this.b=TSe(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=O_e){return ESe.fromWorkingColorSpace(dAe.copy(this),e),65536*Math.round(oSe(255*dAe.r,0,255))+256*Math.round(oSe(255*dAe.g,0,255))+Math.round(oSe(255*dAe.b,0,255))}getHexString(e=O_e){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ESe.workingColorSpace){ESe.fromWorkingColorSpace(dAe.copy(this),t);const n=dAe.r,r=dAe.g,i=dAe.b,a=Math.max(n,r,i),s=Math.min(n,r,i);let o,l;const c=(s+a)/2;if(s===a)o=0,l=0;else{const e=a-s;switch(l=c<=.5?e/(a+s):e/(2-a-s),a){case n:o=(r-i)/e+(r<i?6:0);break;case r:o=(i-n)/e+2;break;case i:o=(n-r)/e+4}o/=6}return e.h=o,e.s=l,e.l=c,e}getRGB(e,t=ESe.workingColorSpace){return ESe.fromWorkingColorSpace(dAe.copy(this),t),e.r=dAe.r,e.g=dAe.g,e.b=dAe.b,e}getStyle(e=O_e){ESe.fromWorkingColorSpace(dAe.copy(this),e);const t=dAe.r,n=dAe.g,r=dAe.b;return e!==O_e?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(e,t,n){return this.getHSL(sAe),this.setHSL(sAe.h+e,sAe.s+t,sAe.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(sAe),e.getHSL(oAe);const n=cSe(sAe.h,oAe.h,t),r=cSe(sAe.s,oAe.s,t),i=cSe(sAe.l,oAe.l,t);return this.setHSL(n,r,i),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const dAe=new cAe;cAe.NAMES=aAe;let uAe=0;class hAe extends tSe{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:uAe++}),this.uuid=sSe(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Zje,this.blendDst=Qje,this.blendEquation=Wje,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new cAe(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=z_e,this.stencilZFail=z_e,this.stencilZPass=z_e,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n)continue;const r=this[t];void 0!==r&&(r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==Zje&&(n.blendSrc=this.blendSrc),this.blendDst!==Qje&&(n.blendDst=this.blendDst),this.blendEquation!==Wje&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==z_e&&(n.stencilFail=this.stencilFail),this.stencilZFail!==z_e&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==z_e&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class pAe extends hAe{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new cAe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const mAe=fAe();function fAe(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const e=l-127;e<-27?(r[l]=0,r[256|l]=32768,i[l]=24,i[256|l]=24):e<-14?(r[l]=1024>>-e-14,r[256|l]=1024>>-e-14|32768,i[l]=-e-1,i[256|l]=-e-1):e<=15?(r[l]=e+15<<10,r[256|l]=e+15<<10|32768,i[l]=13,i[256|l]=13):e<128?(r[l]=31744,r[256|l]=64512,i[l]=24,i[256|l]=24):(r[l]=31744,r[256|l]=64512,i[l]=13,i[256|l]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let e=l<<13,t=0;for(;!(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,a[l]=e|t}for(let l=1024;l<2048;++l)a[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(o[l]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:a,exponentTable:s,offsetTable:o}}function gAe(e){Math.abs(e),e=oSe(e,-65504,65504),mAe.floatView[0]=e;const t=mAe.uint32View[0],n=t>>23&511;return mAe.baseTable[n]+((8388607&t)>>mAe.shiftTable[n])}function vAe(e){const t=e>>10;return mAe.uint32View[0]=mAe.mantissaTable[mAe.offsetTable[t]+(1023&e)]+mAe.exponentTable[t],mAe.floatView[0]}const xAe={toHalfFloat:gAe,fromHalfFloat:vAe},yAe=new WSe,bAe=new fSe;class wAe{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=Y_e,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=ONe,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)bAe.fromBufferAttribute(this,t),bAe.applyMatrix3(e),this.setXY(t,bAe.x,bAe.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)yAe.fromBufferAttribute(this,t),yAe.applyMatrix3(e),this.setXYZ(t,yAe.x,yAe.y,yAe.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)yAe.fromBufferAttribute(this,t),yAe.applyMatrix4(e),this.setXYZ(t,yAe.x,yAe.y,yAe.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)yAe.fromBufferAttribute(this,t),yAe.applyNormalMatrix(e),this.setXYZ(t,yAe.x,yAe.y,yAe.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)yAe.fromBufferAttribute(this,t),yAe.transformDirection(e),this.setXYZ(t,yAe.x,yAe.y,yAe.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=hSe(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=pSe(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=hSe(t,this.array)),t}setX(e,t){return this.normalized&&(t=pSe(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=hSe(t,this.array)),t}setY(e,t){return this.normalized&&(t=pSe(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=hSe(t,this.array)),t}setZ(e,t){return this.normalized&&(t=pSe(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=hSe(t,this.array)),t}setW(e,t){return this.normalized&&(t=pSe(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=pSe(t,this.array),n=pSe(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=pSe(t,this.array),n=pSe(n,this.array),r=pSe(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=pSe(t,this.array),n=pSe(n,this.array),r=pSe(r,this.array),i=pSe(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Y_e&&(e.usage=this.usage),e}}class jAe extends wAe{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class NAe extends wAe{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class _Ae extends wAe{constructor(e,t,n){super(new Float32Array(e),t,n)}}let SAe=0;const CAe=new wCe,AAe=new KCe,MAe=new WSe,EAe=new XSe,kAe=new XSe,TAe=new WSe;class PAe extends tSe{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:SAe++}),this.uuid=sSe(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(xSe(e)?NAe:jAe)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new gSe).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return CAe.makeRotationFromQuaternion(e),this.applyMatrix4(CAe),this}rotateX(e){return CAe.makeRotationX(e),this.applyMatrix4(CAe),this}rotateY(e){return CAe.makeRotationY(e),this.applyMatrix4(CAe),this}rotateZ(e){return CAe.makeRotationZ(e),this.applyMatrix4(CAe),this}translate(e,t,n){return CAe.makeTranslation(e,t,n),this.applyMatrix4(CAe),this}scale(e,t,n){return CAe.makeScale(e,t,n),this.applyMatrix4(CAe),this}lookAt(e){return AAe.lookAt(e),AAe.updateMatrix(),this.applyMatrix4(AAe.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(MAe).negate(),this.translate(MAe.x,MAe.y,MAe.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new _Ae(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new XSe);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)this.boundingBox.set(new WSe(-1/0,-1/0,-1/0),new WSe(1/0,1/0,1/0));else{if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];EAe.setFromBufferAttribute(n),this.morphTargetsRelative?(TAe.addVectors(this.boundingBox.min,EAe.min),this.boundingBox.expandByPoint(TAe),TAe.addVectors(this.boundingBox.max,EAe.max),this.boundingBox.expandByPoint(TAe)):(this.boundingBox.expandByPoint(EAe.min),this.boundingBox.expandByPoint(EAe.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new hCe);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)this.boundingSphere.set(new WSe,1/0);else if(e){const n=this.boundingSphere.center;if(EAe.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const n=t[e];kAe.setFromBufferAttribute(n),this.morphTargetsRelative?(TAe.addVectors(EAe.min,kAe.min),EAe.expandByPoint(TAe),TAe.addVectors(EAe.max,kAe.max),EAe.expandByPoint(TAe)):(EAe.expandByPoint(kAe.min),EAe.expandByPoint(kAe.max))}EAe.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)TAe.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(TAe));if(t)for(let i=0,a=t.length;i<a;i++){const a=t[i],s=this.morphTargetsRelative;for(let t=0,i=a.count;t<i;t++)TAe.fromBufferAttribute(a,t),s&&(MAe.fromBufferAttribute(e,t),TAe.add(MAe)),r=Math.max(r,n.distanceToSquared(TAe))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return;const n=e.array,r=t.position.array,i=t.normal.array,a=t.uv.array,s=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new wAe(new Float32Array(4*s),4));const o=this.getAttribute("tangent").array,l=[],c=[];for(let S=0;S<s;S++)l[S]=new WSe,c[S]=new WSe;const d=new WSe,u=new WSe,h=new WSe,p=new fSe,m=new fSe,f=new fSe,g=new WSe,v=new WSe;function x(e,t,n){d.fromArray(r,3*e),u.fromArray(r,3*t),h.fromArray(r,3*n),p.fromArray(a,2*e),m.fromArray(a,2*t),f.fromArray(a,2*n),u.sub(d),h.sub(d),m.sub(p),f.sub(p);const i=1/(m.x*f.y-f.x*m.y);isFinite(i)&&(g.copy(u).multiplyScalar(f.y).addScaledVector(h,-m.y).multiplyScalar(i),v.copy(h).multiplyScalar(m.x).addScaledVector(u,-f.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(v),c[t].add(v),c[n].add(v))}let y=this.groups;0===y.length&&(y=[{start:0,count:n.length}]);for(let S=0,C=y.length;S<C;++S){const e=y[S],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)x(n[r+0],n[r+1],n[r+2])}const b=new WSe,w=new WSe,j=new WSe,N=new WSe;function _(e){j.fromArray(i,3*e),N.copy(j);const t=l[e];b.copy(t),b.sub(j.multiplyScalar(j.dot(t))).normalize(),w.crossVectors(N,t);const n=w.dot(c[e])<0?-1:1;o[4*e]=b.x,o[4*e+1]=b.y,o[4*e+2]=b.z,o[4*e+3]=n}for(let S=0,C=y.length;S<C;++S){const e=y[S],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)_(n[r+0]),_(n[r+1]),_(n[r+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new wAe(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new WSe,i=new WSe,a=new WSe,s=new WSe,o=new WSe,l=new WSe,c=new WSe,d=new WSe;if(e)for(let u=0,h=e.count;u<h;u+=3){const h=e.getX(u+0),p=e.getX(u+1),m=e.getX(u+2);r.fromBufferAttribute(t,h),i.fromBufferAttribute(t,p),a.fromBufferAttribute(t,m),c.subVectors(a,i),d.subVectors(r,i),c.cross(d),s.fromBufferAttribute(n,h),o.fromBufferAttribute(n,p),l.fromBufferAttribute(n,m),s.add(c),o.add(c),l.add(c),n.setXYZ(h,s.x,s.y,s.z),n.setXYZ(p,o.x,o.y,o.z),n.setXYZ(m,l.x,l.y,l.z)}else for(let e=0,u=t.count;e<u;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),c.subVectors(a,i),d.subVectors(r,i),c.cross(d),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)TAe.fromBufferAttribute(e,t),TAe.normalize(),e.setXYZ(t,TAe.x,TAe.y,TAe.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r);let s=0,o=0;for(let l=0,c=t.length;l<c;l++){s=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*r;for(let e=0;e<r;e++)a[o++]=n[s++]}return new wAe(a,r,i)}if(null===this.index)return this;const t=new PAe,n=this.index.array,r=this.attributes;for(const s in r){const i=e(r[s],n);t.setAttribute(s,i)}const i=this.morphAttributes;for(const s in i){const r=[],a=i[s];for(let t=0,i=a.length;t<i;t++){const i=e(a[t],n);r.push(i)}t.morphAttributes[s]=r}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let s=0,o=a.length;s<o;s++){const e=a[s];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const o in n){const t=n[o];e.data.attributes[o]=t.toJSON(e.data)}const r={};let i=!1;for(const o in this.morphAttributes){const t=this.morphAttributes[o],n=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];n.push(i.toJSON(e.data))}n.length>0&&(r[o]=n,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const l in r){const e=r[l];this.setAttribute(l,e.clone(t))}const i=e.morphAttributes;for(const l in i){const e=[],n=i[l];for(let r=0,i=n.length;r<i;r++)e.push(n[r].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let l=0,c=a.length;l<c;l++){const e=a[l];this.addGroup(e.start,e.count,e.materialIndex)}const s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const OAe=new wCe,RAe=new bCe,IAe=new hCe,DAe=new WSe,LAe=new WSe,BAe=new WSe,FAe=new WSe,UAe=new WSe,zAe=new WSe,HAe=new fSe,VAe=new fSe,GAe=new fSe,WAe=new WSe,KAe=new WSe,qAe=new WSe,XAe=new WSe,$Ae=new WSe;class YAe extends KCe{constructor(e=new PAe,t=new pAe){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const s=this.morphTargetInfluences;if(i&&s){zAe.set(0,0,0);for(let n=0,r=i.length;n<r;n++){const r=s[n],o=i[n];0!==r&&(UAe.fromBufferAttribute(o,e),a?zAe.addScaledVector(UAe,r):zAe.addScaledVector(UAe.sub(t),r))}t.add(zAe)}return t}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),IAe.copy(n.boundingSphere),IAe.applyMatrix4(i),RAe.copy(e.ray).recast(e.near),!1===IAe.containsPoint(RAe.origin)){if(null===RAe.intersectSphere(IAe,DAe))return;if(RAe.origin.distanceToSquared(DAe)>(e.far-e.near)**2)return}OAe.copy(i).invert(),RAe.copy(e.ray).applyMatrix4(OAe),null!==n.boundingBox&&!1===RAe.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,RAe)}}_computeIntersections(e,t,n){let r;const i=this.geometry,a=this.material,s=i.index,o=i.attributes.position,l=i.attributes.uv,c=i.attributes.uv1,d=i.attributes.normal,u=i.groups,h=i.drawRange;if(null!==s)if(Array.isArray(a))for(let p=0,m=u.length;p<m;p++){const i=u[p],o=a[i.materialIndex];for(let a=Math.max(i.start,h.start),u=Math.min(s.count,Math.min(i.start+i.count,h.start+h.count));a<u;a+=3){r=JAe(this,o,e,n,l,c,d,s.getX(a),s.getX(a+1),s.getX(a+2)),r&&(r.faceIndex=Math.floor(a/3),r.face.materialIndex=i.materialIndex,t.push(r))}}else{for(let i=Math.max(0,h.start),o=Math.min(s.count,h.start+h.count);i<o;i+=3){r=JAe(this,a,e,n,l,c,d,s.getX(i),s.getX(i+1),s.getX(i+2)),r&&(r.faceIndex=Math.floor(i/3),t.push(r))}}else if(void 0!==o)if(Array.isArray(a))for(let p=0,m=u.length;p<m;p++){const i=u[p],s=a[i.materialIndex];for(let a=Math.max(i.start,h.start),u=Math.min(o.count,Math.min(i.start+i.count,h.start+h.count));a<u;a+=3){r=JAe(this,s,e,n,l,c,d,a,a+1,a+2),r&&(r.faceIndex=Math.floor(a/3),r.face.materialIndex=i.materialIndex,t.push(r))}}else{for(let i=Math.max(0,h.start),s=Math.min(o.count,h.start+h.count);i<s;i+=3){r=JAe(this,a,e,n,l,c,d,i,i+1,i+2),r&&(r.faceIndex=Math.floor(i/3),t.push(r))}}}}function JAe(e,t,n,r,i,a,s,o,l,c){e.getVertexPosition(o,LAe),e.getVertexPosition(l,BAe),e.getVertexPosition(c,FAe);const d=function(e,t,n,r,i,a,s,o){let l;if(l=1===t.side?r.intersectTriangle(s,a,i,!0,o):r.intersectTriangle(i,a,s,0===t.side,o),null===l)return null;$Ae.copy(o),$Ae.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo($Ae);return c<n.near||c>n.far?null:{distance:c,point:$Ae.clone(),object:e}}(e,t,n,r,LAe,BAe,FAe,XAe);if(d){i&&(HAe.fromBufferAttribute(i,o),VAe.fromBufferAttribute(i,l),GAe.fromBufferAttribute(i,c),d.uv=iAe.getInterpolation(XAe,LAe,BAe,FAe,HAe,VAe,GAe,new fSe)),a&&(HAe.fromBufferAttribute(a,o),VAe.fromBufferAttribute(a,l),GAe.fromBufferAttribute(a,c),d.uv1=iAe.getInterpolation(XAe,LAe,BAe,FAe,HAe,VAe,GAe,new fSe),d.uv2=d.uv1),s&&(WAe.fromBufferAttribute(s,o),KAe.fromBufferAttribute(s,l),qAe.fromBufferAttribute(s,c),d.normal=iAe.getInterpolation(XAe,LAe,BAe,FAe,WAe,KAe,qAe,new WSe),d.normal.dot(r.direction)>0&&d.normal.multiplyScalar(-1));const e={a:o,b:l,c:c,normal:new WSe,materialIndex:0};iAe.getNormal(LAe,BAe,FAe,e.normal),d.face=e}return d}class ZAe extends PAe{constructor(e=1,t=1,n=1,r=1,i=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};const s=this;r=Math.floor(r),i=Math.floor(i),a=Math.floor(a);const o=[],l=[],c=[],d=[];let u=0,h=0;function p(e,t,n,r,i,a,p,m,f,g,v){const x=a/f,y=p/g,b=a/2,w=p/2,j=m/2,N=f+1,_=g+1;let S=0,C=0;const A=new WSe;for(let s=0;s<_;s++){const a=s*y-w;for(let o=0;o<N;o++){const u=o*x-b;A[e]=u*r,A[t]=a*i,A[n]=j,l.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=m>0?1:-1,c.push(A.x,A.y,A.z),d.push(o/f),d.push(1-s/g),S+=1}}for(let s=0;s<g;s++)for(let e=0;e<f;e++){const t=u+e+N*s,n=u+e+N*(s+1),r=u+(e+1)+N*(s+1),i=u+(e+1)+N*s;o.push(t,n,i),o.push(n,r,i),C+=6}s.addGroup(h,C,v),h+=C,u+=S}p("z","y","x",-1,-1,n,t,e,a,i,0),p("z","y","x",1,-1,n,t,-e,a,i,1),p("x","z","y",1,1,e,n,t,r,a,2),p("x","z","y",1,-1,e,n,-t,r,a,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(o),this.setAttribute("position",new _Ae(l,3)),this.setAttribute("normal",new _Ae(c,3)),this.setAttribute("uv",new _Ae(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ZAe(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function QAe(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?t[n][r]=null:t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function eMe(e){const t={};for(let n=0;n<e.length;n++){const r=QAe(e[n]);for(const e in r)t[e]=r[e]}return t}function tMe(e){return null===e.getRenderTarget()?e.outputColorSpace:ESe.workingColorSpace}const nMe={clone:QAe,merge:eMe};class rMe extends hAe{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=QAe(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r].value;n&&n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class iMe extends KCe{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new wCe,this.projectionMatrix=new wCe,this.projectionMatrixInverse=new wCe,this.coordinateSystem=Q_e}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class aMe extends iMe{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*aSe*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*iSe*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*aSe*Math.atan(Math.tan(.5*iSe*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*iSe*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const a=this.view;if(null!==this.view&&this.view.enabled){const e=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/e,t-=a.offsetY*n/s,r*=a.width/e,n*=a.height/s}const s=this.filmOffset;0!==s&&(i+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const sMe=-90;class oMe extends KCe{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new aMe(sMe,1,e,t);r.layers=this.layers,this.add(r);const i=new aMe(sMe,1,e,t);i.layers=this.layers,this.add(i);const a=new aMe(sMe,1,e,t);a.layers=this.layers,this.add(a);const s=new aMe(sMe,1,e,t);s.layers=this.layers,this.add(s);const o=new aMe(sMe,1,e,t);o.layers=this.layers,this.add(o);const l=new aMe(sMe,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,i,a,s,o]=t;for(const l of t)this.remove(l);if(e===Q_e)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),o.up.set(0,1,0),o.lookAt(0,0,-1);else{if(e!==eSe)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),o.up.set(0,-1,0),o.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[i,a,s,o,l,c]=this.children,d=e.getRenderTarget(),u=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const m=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,i),e.setRenderTarget(n,1,r),e.render(t,a),e.setRenderTarget(n,2,r),e.render(t,s),e.setRenderTarget(n,3,r),e.render(t,o),e.setRenderTarget(n,4,r),e.render(t,l),n.texture.generateMipmaps=m,e.setRenderTarget(n,5,r),e.render(t,c),e.setRenderTarget(d,u,h),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class lMe extends BSe{constructor(e,t,n,r,i,a,s,o,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:hNe,n,r,i,a,s,o,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class cMe extends zSe{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];void 0!==t.encoding&&(_Se("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===T_e?O_e:P_e),this.texture=new lMe(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:NNe}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new ZAe(5,5,5),i=new rMe({name:"CubemapFromEquirect",uniforms:QAe(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:1,blending:0});i.uniforms.tEquirect.value=t;const a=new YAe(r,i),s=t.minFilter;t.minFilter===SNe&&(t.minFilter=NNe);return new oMe(1,10,this).update(e,a),t.minFilter=s,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(i)}}const dMe=new WSe,uMe=new WSe,hMe=new gSe;class pMe{constructor(e=new WSe(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=dMe.subVectors(n,t).cross(uMe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(dMe),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||hMe.getNormalMatrix(e),r=this.coplanarPoint(dMe).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const mMe=new hCe,fMe=new WSe;class gMe{constructor(e=new pMe,t=new pMe,n=new pMe,r=new pMe,i=new pMe,a=new pMe){this.planes=[e,t,n,r,i,a]}set(e,t,n,r,i,a){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(r),s[4].copy(i),s[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=2e3){const n=this.planes,r=e.elements,i=r[0],a=r[1],s=r[2],o=r[3],l=r[4],c=r[5],d=r[6],u=r[7],h=r[8],p=r[9],m=r[10],f=r[11],g=r[12],v=r[13],x=r[14],y=r[15];if(n[0].setComponents(o-i,u-l,f-h,y-g).normalize(),n[1].setComponents(o+i,u+l,f+h,y+g).normalize(),n[2].setComponents(o+a,u+c,f+p,y+v).normalize(),n[3].setComponents(o-a,u-c,f-p,y-v).normalize(),n[4].setComponents(o-s,u-d,f-m,y-x).normalize(),t===Q_e)n[5].setComponents(o+s,u+d,f+m,y+x).normalize();else{if(t!==eSe)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(s,d,m,x).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),mMe.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),mMe.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(mMe)}intersectsSprite(e){return mMe.center.set(0,0,0),mMe.radius=.7071067811865476,mMe.applyMatrix4(e.matrixWorld),this.intersectsSphere(mMe)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(fMe.x=r.normal.x>0?e.max.x:e.min.x,fMe.y=r.normal.y>0?e.max.y:e.min.y,fMe.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(fMe)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function vMe(){let e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function xMe(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const a=r.get(t);if(void 0===a)r.set(t,function(t,r){const i=t.array,a=t.usage,s=i.byteLength,o=e.createBuffer();let l;if(e.bindBuffer(r,o),e.bufferData(r,i,a),t.onUploadCallback(),i instanceof Float32Array)l=e.FLOAT;else if(i instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");l=e.HALF_FLOAT}else l=e.UNSIGNED_SHORT;else if(i instanceof Int16Array)l=e.SHORT;else if(i instanceof Uint32Array)l=e.UNSIGNED_INT;else if(i instanceof Int32Array)l=e.INT;else if(i instanceof Int8Array)l=e.BYTE;else if(i instanceof Uint8Array)l=e.UNSIGNED_BYTE;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);l=e.UNSIGNED_BYTE}return{buffer:o,type:l,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version,size:s}}(t,i));else if(a.version<t.version){if(a.size!==t.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,r,i){const a=r.array,s=r._updateRange,o=r.updateRanges;if(e.bindBuffer(i,t),-1===s.count&&0===o.length&&e.bufferSubData(i,0,a),0!==o.length){for(let t=0,r=o.length;t<r;t++){const r=o[t];n?e.bufferSubData(i,r.start*a.BYTES_PER_ELEMENT,a,r.start,r.count):e.bufferSubData(i,r.start*a.BYTES_PER_ELEMENT,a.subarray(r.start,r.start+r.count))}r.clearUpdateRanges()}-1!==s.count&&(n?e.bufferSubData(i,s.offset*a.BYTES_PER_ELEMENT,a,s.offset,s.count):e.bufferSubData(i,s.offset*a.BYTES_PER_ELEMENT,a.subarray(s.offset,s.offset+s.count)),s.count=-1),r.onUploadCallback()}(a.buffer,t,i),a.version=t.version}}}}class yMe extends PAe{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,a=t/2,s=Math.floor(n),o=Math.floor(r),l=s+1,c=o+1,d=e/s,u=t/o,h=[],p=[],m=[],f=[];for(let g=0;g<c;g++){const e=g*u-a;for(let t=0;t<l;t++){const n=t*d-i;p.push(n,-e,0),m.push(0,0,1),f.push(t/s),f.push(1-g/o)}}for(let g=0;g<o;g++)for(let e=0;e<s;e++){const t=e+l*g,n=e+l*(g+1),r=e+1+l*(g+1),i=e+1+l*g;h.push(t,n,i),h.push(n,r,i)}this.setIndex(h),this.setAttribute("position",new _Ae(p,3)),this.setAttribute("normal",new _Ae(m,3)),this.setAttribute("uv",new _Ae(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yMe(e.width,e.height,e.widthSegments,e.heightSegments)}}const bMe={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\tattribute float batchId;\n\tuniform highp sampler2D batchingTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( batchId );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor *= toneMappingExposure;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\treturn color;\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},wMe={common:{diffuse:{value:new cAe(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new gSe},alphaMap:{value:null},alphaMapTransform:{value:new gSe},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new gSe}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new gSe}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new gSe}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new gSe},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new gSe},normalScale:{value:new fSe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new gSe},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new gSe}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new gSe}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new gSe}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new cAe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new cAe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new gSe},alphaTest:{value:0},uvTransform:{value:new gSe}},sprite:{diffuse:{value:new cAe(16777215)},opacity:{value:1},center:{value:new fSe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new gSe},alphaMap:{value:null},alphaMapTransform:{value:new gSe},alphaTest:{value:0}}},jMe={basic:{uniforms:eMe([wMe.common,wMe.specularmap,wMe.envmap,wMe.aomap,wMe.lightmap,wMe.fog]),vertexShader:bMe.meshbasic_vert,fragmentShader:bMe.meshbasic_frag},lambert:{uniforms:eMe([wMe.common,wMe.specularmap,wMe.envmap,wMe.aomap,wMe.lightmap,wMe.emissivemap,wMe.bumpmap,wMe.normalmap,wMe.displacementmap,wMe.fog,wMe.lights,{emissive:{value:new cAe(0)}}]),vertexShader:bMe.meshlambert_vert,fragmentShader:bMe.meshlambert_frag},phong:{uniforms:eMe([wMe.common,wMe.specularmap,wMe.envmap,wMe.aomap,wMe.lightmap,wMe.emissivemap,wMe.bumpmap,wMe.normalmap,wMe.displacementmap,wMe.fog,wMe.lights,{emissive:{value:new cAe(0)},specular:{value:new cAe(1118481)},shininess:{value:30}}]),vertexShader:bMe.meshphong_vert,fragmentShader:bMe.meshphong_frag},standard:{uniforms:eMe([wMe.common,wMe.envmap,wMe.aomap,wMe.lightmap,wMe.emissivemap,wMe.bumpmap,wMe.normalmap,wMe.displacementmap,wMe.roughnessmap,wMe.metalnessmap,wMe.fog,wMe.lights,{emissive:{value:new cAe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:bMe.meshphysical_vert,fragmentShader:bMe.meshphysical_frag},toon:{uniforms:eMe([wMe.common,wMe.aomap,wMe.lightmap,wMe.emissivemap,wMe.bumpmap,wMe.normalmap,wMe.displacementmap,wMe.gradientmap,wMe.fog,wMe.lights,{emissive:{value:new cAe(0)}}]),vertexShader:bMe.meshtoon_vert,fragmentShader:bMe.meshtoon_frag},matcap:{uniforms:eMe([wMe.common,wMe.bumpmap,wMe.normalmap,wMe.displacementmap,wMe.fog,{matcap:{value:null}}]),vertexShader:bMe.meshmatcap_vert,fragmentShader:bMe.meshmatcap_frag},points:{uniforms:eMe([wMe.points,wMe.fog]),vertexShader:bMe.points_vert,fragmentShader:bMe.points_frag},dashed:{uniforms:eMe([wMe.common,wMe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:bMe.linedashed_vert,fragmentShader:bMe.linedashed_frag},depth:{uniforms:eMe([wMe.common,wMe.displacementmap]),vertexShader:bMe.depth_vert,fragmentShader:bMe.depth_frag},normal:{uniforms:eMe([wMe.common,wMe.bumpmap,wMe.normalmap,wMe.displacementmap,{opacity:{value:1}}]),vertexShader:bMe.meshnormal_vert,fragmentShader:bMe.meshnormal_frag},sprite:{uniforms:eMe([wMe.sprite,wMe.fog]),vertexShader:bMe.sprite_vert,fragmentShader:bMe.sprite_frag},background:{uniforms:{uvTransform:{value:new gSe},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:bMe.background_vert,fragmentShader:bMe.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:bMe.backgroundCube_vert,fragmentShader:bMe.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:bMe.cube_vert,fragmentShader:bMe.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:bMe.equirect_vert,fragmentShader:bMe.equirect_frag},distanceRGBA:{uniforms:eMe([wMe.common,wMe.displacementmap,{referencePosition:{value:new WSe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:bMe.distanceRGBA_vert,fragmentShader:bMe.distanceRGBA_frag},shadow:{uniforms:eMe([wMe.lights,wMe.fog,{color:{value:new cAe(0)},opacity:{value:1}}]),vertexShader:bMe.shadow_vert,fragmentShader:bMe.shadow_frag}};jMe.physical={uniforms:eMe([jMe.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new gSe},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new gSe},clearcoatNormalScale:{value:new fSe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new gSe},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new gSe},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new gSe},sheen:{value:0},sheenColor:{value:new cAe(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new gSe},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new gSe},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new gSe},transmissionSamplerSize:{value:new fSe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new gSe},attenuationDistance:{value:0},attenuationColor:{value:new cAe(0)},specularColor:{value:new cAe(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new gSe},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new gSe},anisotropyVector:{value:new fSe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new gSe}}]),vertexShader:bMe.meshphysical_vert,fragmentShader:bMe.meshphysical_frag};const NMe={r:0,b:0,g:0};function _Me(e,t,n,r,i,a,s){const o=new cAe(0);let l,c,d=!0===a?0:1,u=null,h=0,p=null;function m(t,n){t.getRGB(NMe,tMe(e)),r.buffers.color.setClear(NMe.r,NMe.g,NMe.b,n,s)}return{getClearColor:function(){return o},setClearColor:function(e,t=1){o.set(e),d=t,m(o,d)},getClearAlpha:function(){return d},setClearAlpha:function(e){d=e,m(o,d)},render:function(a,f){let g=!1,v=!0===f.isScene?f.background:null;if(v&&v.isTexture){v=(f.backgroundBlurriness>0?n:t).get(v)}null===v?m(o,d):v&&v.isColor&&(m(v,1),g=!0);const x=e.xr.getEnvironmentBlendMode();"additive"===x?r.buffers.color.setClear(0,0,0,1,s):"alpha-blend"===x&&r.buffers.color.setClear(0,0,0,0,s),(e.autoClear||g)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),v&&(v.isCubeTexture||v.mapping===gNe)?(void 0===c&&(c=new YAe(new ZAe(1,1,1),new rMe({name:"BackgroundCubeMaterial",uniforms:QAe(jMe.backgroundCube.uniforms),vertexShader:jMe.backgroundCube.vertexShader,fragmentShader:jMe.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=v,c.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=f.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=f.backgroundIntensity,c.material.toneMapped=ESe.getTransfer(v.colorSpace)!==B_e,u===v&&h===v.version&&p===e.toneMapping||(c.material.needsUpdate=!0,u=v,h=v.version,p=e.toneMapping),c.layers.enableAll(),a.unshift(c,c.geometry,c.material,0,0,null)):v&&v.isTexture&&(void 0===l&&(l=new YAe(new yMe(2,2),new rMe({name:"BackgroundMaterial",uniforms:QAe(jMe.background.uniforms),vertexShader:jMe.background.vertexShader,fragmentShader:jMe.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=v,l.material.uniforms.backgroundIntensity.value=f.backgroundIntensity,l.material.toneMapped=ESe.getTransfer(v.colorSpace)!==B_e,!0===v.matrixAutoUpdate&&v.updateMatrix(),l.material.uniforms.uvTransform.value.copy(v.matrix),u===v&&h===v.version&&p===e.toneMapping||(l.material.needsUpdate=!0,u=v,h=v.version,p=e.toneMapping),l.layers.enableAll(),a.unshift(l,l.geometry,l.material,0,0,null))}}}function SMe(e,t,n,r){const i=e.getParameter(e.MAX_VERTEX_ATTRIBS),a=r.isWebGL2?null:t.get("OES_vertex_array_object"),s=r.isWebGL2||null!==a,o={},l=p(null);let c=l,d=!1;function u(t){return r.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function p(e){const t=[],n=[],r=[];for(let a=0;a<i;a++)t[a]=0,n[a]=0,r[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function m(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function f(e){g(e,0)}function g(n,i){const a=c.newAttributes,s=c.enabledAttributes,o=c.attributeDivisors;if(a[n]=1,0===s[n]&&(e.enableVertexAttribArray(n),s[n]=1),o[n]!==i){(r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),o[n]=i}}function v(){const t=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function x(t,n,r,i,a,s,o){!0===o?e.vertexAttribIPointer(t,n,r,a,s):e.vertexAttribPointer(t,n,r,i,a,s)}function y(){b(),d=!0,c!==l&&(c=l,u(c.object))}function b(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,h,y,b){let w=!1;if(s){const t=function(t,n,i){const s=!0===i.wireframe;let l=o[t.id];void 0===l&&(l={},o[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let d=c[s];void 0===d&&(d=p(r.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),c[s]=d);return d}(y,h,l);c!==t&&(c=t,u(c.object)),w=function(e,t,n,r){const i=c.attributes,a=t.attributes;let s=0;const o=n.getAttributes();for(const l in o){if(o[l].location>=0){const t=i[l];let n=a[l];if(void 0===n&&("instanceMatrix"===l&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;s++}}return c.attributesNum!==s||c.index!==r}(i,y,h,b),w&&function(e,t,n,r){const i={},a=t.attributes;let s=0;const o=n.getAttributes();for(const l in o){if(o[l].location>=0){let t=a[l];void 0===t&&("instanceMatrix"===l&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),i[l]=n,s++}}c.attributes=i,c.attributesNum=s,c.index=r}(i,y,h,b)}else{const e=!0===l.wireframe;c.geometry===y.id&&c.program===h.id&&c.wireframe===e||(c.geometry=y.id,c.program=h.id,c.wireframe=e,w=!0)}null!==b&&n.update(b,e.ELEMENT_ARRAY_BUFFER),(w||d)&&(d=!1,function(i,a,s,o){if(!1===r.isWebGL2&&(i.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;m();const l=o.attributes,c=s.getAttributes(),d=a.defaultAttributeValues;for(const t in c){const a=c[t];if(a.location>=0){let s=l[t];if(void 0===s&&("instanceMatrix"===t&&i.instanceMatrix&&(s=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(s=i.instanceColor)),void 0!==s){const t=s.normalized,l=s.itemSize,c=n.get(s);if(void 0===c)continue;const d=c.buffer,u=c.type,h=c.bytesPerElement,p=!0===r.isWebGL2&&(u===e.INT||u===e.UNSIGNED_INT||s.gpuType===TNe);if(s.isInterleavedBufferAttribute){const n=s.data,r=n.stride,c=s.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<a.locationSize;e++)g(a.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<a.locationSize;e++)f(a.location+e);e.bindBuffer(e.ARRAY_BUFFER,d);for(let e=0;e<a.locationSize;e++)x(a.location+e,l/a.locationSize,u,t,r*h,(c+l/a.locationSize*e)*h,p)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<a.locationSize;e++)g(a.location+e,s.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<a.locationSize;e++)f(a.location+e);e.bindBuffer(e.ARRAY_BUFFER,d);for(let e=0;e<a.locationSize;e++)x(a.location+e,l/a.locationSize,u,t,l*h,l/a.locationSize*e*h,p)}}else if(void 0!==d){const n=d[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(a.location,n);break;case 3:e.vertexAttrib3fv(a.location,n);break;case 4:e.vertexAttrib4fv(a.location,n);break;default:e.vertexAttrib1fv(a.location,n)}}}}v()}(i,l,h,y),null!==b&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.get(b).buffer))},reset:y,resetDefaultState:b,dispose:function(){y();for(const e in o){const t=o[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete o[e]}},releaseStatesOfGeometry:function(e){if(void 0===o[e.id])return;const t=o[e.id];for(const n in t){const e=t[n];for(const t in e)h(e[t].object),delete e[t];delete t[n]}delete o[e.id]},releaseStatesOfProgram:function(e){for(const t in o){const n=o[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)h(r[e].object),delete r[e];delete n[e.id]}},initAttributes:m,enableAttribute:f,disableUnusedAttributes:v}}function CMe(e,t,n,r){const i=r.isWebGL2;let a;this.setMode=function(e){a=e},this.render=function(t,r){e.drawArrays(a,t,r),n.update(r,a,1)},this.renderInstances=function(r,s,o){if(0===o)return;let l,c;if(i)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return;l[c](a,r,s,o),n.update(s,a,o)},this.renderMultiDraw=function(e,r,i){if(0===i)return;const s=t.get("WEBGL_multi_draw");if(null===s)for(let t=0;t<i;t++)this.render(e[t],r[t]);else{s.multiDrawArraysWEBGL(a,e,0,r,0,i);let t=0;for(let e=0;e<i;e++)t+=r[e];n.update(t,a,1)}}}function AMe(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a="undefined"!=typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===e.constructor.name;let s=void 0!==n.precision?n.precision:"highp";const o=i(s);o!==s&&(s=o);const l=a||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,d=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_TEXTURE_SIZE),p=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),m=e.getParameter(e.MAX_VERTEX_ATTRIBS),f=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),g=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),x=u>0,y=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:s,logarithmicDepthBuffer:c,maxTextures:d,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:f,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:x,floatFragmentTextures:y,floatVertexTextures:x&&y,maxSamples:a?e.getParameter(e.MAX_SAMPLES):0}}function MMe(e){const t=this;let n=null,r=0,i=!1,a=!1;const s=new pMe,o=new gSe,l={value:null,needsUpdate:!1};function c(e,n,r,i){const a=null!==e?e.length:0;let c=null;if(0!==a){if(c=l.value,!0!==i||null===c){const t=r+4*a,i=n.matrixWorldInverse;o.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,l=r;n!==a;++n,l+=4)s.copy(e[n]).applyMatrix4(i,o),s.normal.toArray(c,l),c[l+3]=s.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(s,o,d){const u=s.clippingPlanes,h=s.clipIntersection,p=s.clipShadows,m=e.get(s);if(!i||null===u||0===u.length||a&&!p)a?c(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=r>0);t.numPlanes=r,t.numIntersection=0}();else{const e=a?0:r,t=4*e;let i=m.clippingState||null;l.value=i,i=c(u,o,t,d);for(let r=0;r!==t;++r)i[r]=n[r];m.clippingState=i,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function EMe(e){let t=new WeakMap;function n(e,t){return t===mNe?e.mapping=hNe:t===fNe&&(e.mapping=pNe),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const a=i.mapping;if(a===mNe||a===fNe){if(t.has(i)){return n(t.get(i).texture,i.mapping)}{const a=i.image;if(a&&a.height>0){const s=new cMe(a.height/2);return s.fromEquirectangularTexture(e,i),t.set(i,s),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}class kMe extends iMe{constructor(e=-1,t=1,n=1,r=-1,i=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,a=n+e,s=r+t,o=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,a=i+e*this.view.width,s-=t*this.view.offsetY,o=s-t*this.view.height}this.projectionMatrix.makeOrthographic(i,a,s,o,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const TMe=[.125,.215,.35,.446,.526,.582],PMe=20,OMe=new kMe,RMe=new cAe;let IMe=null,DMe=0,LMe=0;const BMe=(1+Math.sqrt(5))/2,FMe=1/BMe,UMe=[new WSe(1,1,1),new WSe(-1,1,1),new WSe(1,1,-1),new WSe(-1,1,-1),new WSe(0,BMe,FMe),new WSe(0,BMe,-FMe),new WSe(FMe,0,BMe),new WSe(-FMe,0,BMe),new WSe(BMe,FMe,0),new WSe(-BMe,FMe,0)];class zMe{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){IMe=this._renderer.getRenderTarget(),DMe=this._renderer.getActiveCubeFace(),LMe=this._renderer.getActiveMipmapLevel(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=WMe(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=GMe(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(IMe,DMe,LMe),e.scissorTest=!1,VMe(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===hNe||e.mapping===pNe?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),IMe=this._renderer.getRenderTarget(),DMe=this._renderer.getActiveCubeFace(),LMe=this._renderer.getActiveMipmapLevel();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:NNe,minFilter:NNe,generateMipmaps:!1,type:RNe,format:BNe,colorSpace:R_e,depthBuffer:!1},r=HMe(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=HMe(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let i=e;const a=e-4+1+TMe.length;for(let s=0;s<a;s++){const a=Math.pow(2,i);n.push(a);let o=1/a;s>e-4?o=TMe[s-e+4-1]:0===s&&(o=0),r.push(o);const l=1/(a-2),c=-l,d=1+l,u=[c,c,d,c,d,d,c,c,d,d,c,d],h=6,p=6,m=3,f=2,g=1,v=new Float32Array(m*p*h),x=new Float32Array(f*p*h),y=new Float32Array(g*p*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(r,m*p*e),x.set(u,f*p*e);const i=[e,e,e,e,e,e];y.set(i,g*p*e)}const b=new PAe;b.setAttribute("position",new wAe(v,m)),b.setAttribute("uv",new wAe(x,f)),b.setAttribute("faceIndex",new wAe(y,g)),t.push(b),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(PMe),i=new WSe(0,1,0),a=new rMe({name:"SphericalGaussianBlur",defines:{n:PMe,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:KMe(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1});return a}(r,e,t)}return r}_compileMaterial(e){const t=new YAe(this._lodPlanes[0],e);this._renderer.compile(t,OMe)}_sceneToCubeUV(e,t,n,r){const i=new aMe(90,1,t,n),a=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,c=o.toneMapping;o.getClearColor(RMe),o.toneMapping=0,o.autoClear=!1;const d=new pAe({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),u=new YAe(new ZAe,d);let h=!1;const p=e.background;p?p.isColor&&(d.color.copy(p),e.background=null,h=!0):(d.color.copy(RMe),h=!0);for(let m=0;m<6;m++){const t=m%3;0===t?(i.up.set(0,a[m],0),i.lookAt(s[m],0,0)):1===t?(i.up.set(0,0,a[m]),i.lookAt(0,s[m],0)):(i.up.set(0,a[m],0),i.lookAt(0,0,s[m]));const n=this._cubeSize;VMe(r,t*n,m>2?n:0,n,n),o.setRenderTarget(r),h&&o.render(u,i),o.render(e,i)}u.geometry.dispose(),u.material.dispose(),o.toneMapping=c,o.autoClear=l,e.background=p}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===hNe||e.mapping===pNe;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=WMe()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=GMe());const i=r?this._cubemapMaterial:this._equirectMaterial,a=new YAe(this._lodPlanes[0],i);i.uniforms.envMap.value=e;const s=this._cubeSize;VMe(t,0,0,3*s,2*s),n.setRenderTarget(t),n.render(a,OMe)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const t=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),n=UMe[(r-1)%UMe.length];this._blur(e,r-1,r,t,n)}t.autoClear=n}_blur(e,t,n,r,i){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,a,s){const o=this._renderer,l=this._blurMaterial,c=new YAe(this._lodPlanes[r],l),d=l.uniforms,u=this._sizeLods[n]-1,h=isFinite(i)?Math.PI/(2*u):2*Math.PI/39,p=i/h,m=isFinite(i)?1+Math.floor(3*p):PMe,f=[];let g=0;for(let y=0;y<PMe;++y){const e=y/p,t=Math.exp(-e*e/2);f.push(t),0===y?g+=t:y<m&&(g+=2*t)}for(let y=0;y<f.length;y++)f[y]=f[y]/g;d.envMap.value=e.texture,d.samples.value=m,d.weights.value=f,d.latitudinal.value="latitudinal"===a,s&&(d.poleAxis.value=s);const{_lodMax:v}=this;d.dTheta.value=h,d.mipInt.value=v-n;const x=this._sizeLods[r];VMe(t,3*x*(r>v-4?r-v+4:0),4*(this._cubeSize-x),3*x,2*x),o.setRenderTarget(t),o.render(c,OMe)}}function HMe(e,t,n){const r=new zSe(e,t,n);return r.texture.mapping=gNe,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function VMe(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function GMe(){return new rMe({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:KMe(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function WMe(){return new rMe({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:KMe(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function KMe(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function qMe(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const a=i.mapping,s=a===mNe||a===fNe,o=a===hNe||a===pNe;if(s||o){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=t.get(i);return null===n&&(n=new zMe(e)),r=s?n.fromEquirectangular(i,r):n.fromCubemap(i,r),t.set(i,r),r.texture}if(t.has(i))return t.get(i).texture;{const a=i.image;if(s&&a&&a.height>0||o&&a&&function(e){let t=0;const n=6;for(let r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(a)){null===n&&(n=new zMe(e));const a=s?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,a),i.addEventListener("dispose",r),a.texture}return null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function XMe(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return t}}}function $Me(e,t,n,r){const i={},a=new WeakMap;function s(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const n in o.attributes)t.remove(o.attributes[n]);for(const n in o.morphAttributes){const e=o.morphAttributes[n];for(let n=0,r=e.length;n<r;n++)t.remove(e[n])}o.removeEventListener("dispose",s),delete i[o.id];const l=a.get(o);l&&(t.remove(l),a.delete(o)),r.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e){const n=[],r=e.index,i=e.attributes.position;let s=0;if(null!==r){const e=r.array;s=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],a=e[t+2];n.push(r,i,i,a,a,r)}}else{if(void 0===i)return;{const e=i.array;s=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}}const o=new(xSe(n)?NAe:jAe)(n,1);o.version=s;const l=a.get(e);l&&t.remove(l),a.set(e,o)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",s),i[t.id]=!0,n.memory.geometries++),t},update:function(n){const r=n.attributes;for(const a in r)t.update(r[a],e.ARRAY_BUFFER);const i=n.morphAttributes;for(const a in i){const n=i[a];for(let r=0,i=n.length;r<i;r++)t.update(n[r],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){const t=a.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return a.get(e)}}}function YMe(e,t,n,r){const i=r.isWebGL2;let a,s,o;this.setMode=function(e){a=e},this.setIndex=function(e){s=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(a,r,s,t*o),n.update(r,a,1)},this.renderInstances=function(r,l,c){if(0===c)return;let d,u;if(i)d=e,u="drawElementsInstanced";else if(d=t.get("ANGLE_instanced_arrays"),u="drawElementsInstancedANGLE",null===d)return;d[u](a,l,s,r*o,c),n.update(l,a,c)},this.renderMultiDraw=function(e,r,i){if(0===i)return;const l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<i;t++)this.render(e[t]/o,r[t]);else{l.multiDrawElementsWEBGL(a,r,0,s,e,0,i);let t=0;for(let e=0;e<i;e++)t+=r[e];n.update(t,a,1)}}}function JMe(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n}}}}function ZMe(e,t){return e[0]-t[0]}function QMe(e,t){return Math.abs(t[1])-Math.abs(e[1])}function eEe(e,t,n){const r={},i=new Float32Array(8),a=new WeakMap,s=new FSe,o=[];for(let l=0;l<8;l++)o[l]=[l,0];return{update:function(l,c,d){const u=l.morphTargetInfluences;if(!0===t.isWebGL2){const r=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,i=void 0!==r?r.length:0;let o=a.get(c);if(void 0===o||o.count!==i){let e=function(){v.dispose(),a.delete(c),c.removeEventListener("dispose",e)};void 0!==o&&o.texture.dispose();const n=void 0!==c.morphAttributes.position,r=void 0!==c.morphAttributes.normal,l=void 0!==c.morphAttributes.color,d=c.morphAttributes.position||[],u=c.morphAttributes.normal||[],h=c.morphAttributes.color||[];let p=0;!0===n&&(p=1),!0===r&&(p=2),!0===l&&(p=3);let m=c.attributes.position.count*p,f=1;m>t.maxTextureSize&&(f=Math.ceil(m/t.maxTextureSize),m=t.maxTextureSize);const g=new Float32Array(m*f*4*i),v=new HSe(g,m,f,i);v.type=ONe,v.needsUpdate=!0;const x=4*p;for(let t=0;t<i;t++){const e=d[t],i=u[t],a=h[t],o=m*f*4*t;for(let t=0;t<e.count;t++){const c=t*x;!0===n&&(s.fromBufferAttribute(e,t),g[o+c+0]=s.x,g[o+c+1]=s.y,g[o+c+2]=s.z,g[o+c+3]=0),!0===r&&(s.fromBufferAttribute(i,t),g[o+c+4]=s.x,g[o+c+5]=s.y,g[o+c+6]=s.z,g[o+c+7]=0),!0===l&&(s.fromBufferAttribute(a,t),g[o+c+8]=s.x,g[o+c+9]=s.y,g[o+c+10]=s.z,g[o+c+11]=4===a.itemSize?s.w:1)}}o={count:i,texture:v,size:new fSe(m,f)},a.set(c,o),c.addEventListener("dispose",e)}let l=0;for(let e=0;e<u.length;e++)l+=u[e];const h=c.morphTargetsRelative?1:1-l;d.getUniforms().setValue(e,"morphTargetBaseInfluence",h),d.getUniforms().setValue(e,"morphTargetInfluences",u),d.getUniforms().setValue(e,"morphTargetsTexture",o.texture,n),d.getUniforms().setValue(e,"morphTargetsTextureSize",o.size)}else{const t=void 0===u?0:u.length;let n=r[c.id];if(void 0===n||n.length!==t){n=[];for(let e=0;e<t;e++)n[e]=[e,0];r[c.id]=n}for(let e=0;e<t;e++){const t=n[e];t[0]=e,t[1]=u[e]}n.sort(QMe);for(let e=0;e<8;e++)e<t&&n[e][1]?(o[e][0]=n[e][0],o[e][1]=n[e][1]):(o[e][0]=Number.MAX_SAFE_INTEGER,o[e][1]=0);o.sort(ZMe);const a=c.morphAttributes.position,s=c.morphAttributes.normal;let l=0;for(let e=0;e<8;e++){const t=o[e],n=t[0],r=t[1];n!==Number.MAX_SAFE_INTEGER&&r?(a&&c.getAttribute("morphTarget"+e)!==a[n]&&c.setAttribute("morphTarget"+e,a[n]),s&&c.getAttribute("morphNormal"+e)!==s[n]&&c.setAttribute("morphNormal"+e,s[n]),i[e]=r,l+=r):(a&&!0===c.hasAttribute("morphTarget"+e)&&c.deleteAttribute("morphTarget"+e),s&&!0===c.hasAttribute("morphNormal"+e)&&c.deleteAttribute("morphNormal"+e),i[e]=0)}const h=c.morphTargetsRelative?1:1-l;d.getUniforms().setValue(e,"morphTargetBaseInfluence",h),d.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function tEe(e,t,n,r){let i=new WeakMap;function a(e){const t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(s){const o=r.render.frame,l=s.geometry,c=t.get(s,l);if(i.get(c)!==o&&(t.update(c),i.set(c,o)),s.isInstancedMesh&&(!1===s.hasEventListener("dispose",a)&&s.addEventListener("dispose",a),i.get(s)!==o&&(n.update(s.instanceMatrix,e.ARRAY_BUFFER),null!==s.instanceColor&&n.update(s.instanceColor,e.ARRAY_BUFFER),i.set(s,o))),s.isSkinnedMesh){const e=s.skeleton;i.get(e)!==o&&(e.update(),i.set(e,o))}return c},dispose:function(){i=new WeakMap}}}class nEe extends BSe{constructor(e,t,n,r,i,a,s,o,l,c){if((c=void 0!==c?c:FNe)!==FNe&&c!==UNe)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===FNe&&(n=PNe),void 0===n&&c===UNe&&(n=LNe),super(null,r,i,a,s,o,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==s?s:bNe,this.minFilter=void 0!==o?o:bNe,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}const rEe=new BSe,iEe=new nEe(1,1);iEe.compareFunction=515;const aEe=new HSe,sEe=new VSe,oEe=new lMe,lEe=[],cEe=[],dEe=new Float32Array(16),uEe=new Float32Array(9),hEe=new Float32Array(4);function pEe(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let a=lEe[i];if(void 0===a&&(a=new Float32Array(i),lEe[i]=a),0!==t){r.toArray(a,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(a,i)}return a}function mEe(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function fEe(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function gEe(e,t){let n=cEe[t];void 0===n&&(n=new Int32Array(t),cEe[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function vEe(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function xEe(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(mEe(n,t))return;e.uniform2fv(this.addr,t),fEe(n,t)}}function yEe(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(mEe(n,t))return;e.uniform3fv(this.addr,t),fEe(n,t)}}function bEe(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(mEe(n,t))return;e.uniform4fv(this.addr,t),fEe(n,t)}}function wEe(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(mEe(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),fEe(n,t)}else{if(mEe(n,r))return;hEe.set(r),e.uniformMatrix2fv(this.addr,!1,hEe),fEe(n,r)}}function jEe(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(mEe(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),fEe(n,t)}else{if(mEe(n,r))return;uEe.set(r),e.uniformMatrix3fv(this.addr,!1,uEe),fEe(n,r)}}function NEe(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(mEe(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),fEe(n,t)}else{if(mEe(n,r))return;dEe.set(r),e.uniformMatrix4fv(this.addr,!1,dEe),fEe(n,r)}}function _Ee(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function SEe(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(mEe(n,t))return;e.uniform2iv(this.addr,t),fEe(n,t)}}function CEe(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(mEe(n,t))return;e.uniform3iv(this.addr,t),fEe(n,t)}}function AEe(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(mEe(n,t))return;e.uniform4iv(this.addr,t),fEe(n,t)}}function MEe(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function EEe(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(mEe(n,t))return;e.uniform2uiv(this.addr,t),fEe(n,t)}}function kEe(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(mEe(n,t))return;e.uniform3uiv(this.addr,t),fEe(n,t)}}function TEe(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(mEe(n,t))return;e.uniform4uiv(this.addr,t),fEe(n,t)}}function PEe(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i);const a=this.type===e.SAMPLER_2D_SHADOW?iEe:rEe;n.setTexture2D(t||a,i)}function OEe(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||sEe,i)}function REe(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||oEe,i)}function IEe(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||aEe,i)}function DEe(e,t){e.uniform1fv(this.addr,t)}function LEe(e,t){const n=pEe(t,this.size,2);e.uniform2fv(this.addr,n)}function BEe(e,t){const n=pEe(t,this.size,3);e.uniform3fv(this.addr,n)}function FEe(e,t){const n=pEe(t,this.size,4);e.uniform4fv(this.addr,n)}function UEe(e,t){const n=pEe(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function zEe(e,t){const n=pEe(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function HEe(e,t){const n=pEe(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function VEe(e,t){e.uniform1iv(this.addr,t)}function GEe(e,t){e.uniform2iv(this.addr,t)}function WEe(e,t){e.uniform3iv(this.addr,t)}function KEe(e,t){e.uniform4iv(this.addr,t)}function qEe(e,t){e.uniform1uiv(this.addr,t)}function XEe(e,t){e.uniform2uiv(this.addr,t)}function $Ee(e,t){e.uniform3uiv(this.addr,t)}function YEe(e,t){e.uniform4uiv(this.addr,t)}function JEe(e,t,n){const r=this.cache,i=t.length,a=gEe(n,i);mEe(r,a)||(e.uniform1iv(this.addr,a),fEe(r,a));for(let s=0;s!==i;++s)n.setTexture2D(t[s]||rEe,a[s])}function ZEe(e,t,n){const r=this.cache,i=t.length,a=gEe(n,i);mEe(r,a)||(e.uniform1iv(this.addr,a),fEe(r,a));for(let s=0;s!==i;++s)n.setTexture3D(t[s]||sEe,a[s])}function QEe(e,t,n){const r=this.cache,i=t.length,a=gEe(n,i);mEe(r,a)||(e.uniform1iv(this.addr,a),fEe(r,a));for(let s=0;s!==i;++s)n.setTextureCube(t[s]||oEe,a[s])}function eke(e,t,n){const r=this.cache,i=t.length,a=gEe(n,i);mEe(r,a)||(e.uniform1iv(this.addr,a),fEe(r,a));for(let s=0;s!==i;++s)n.setTexture2DArray(t[s]||aEe,a[s])}class tke{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return vEe;case 35664:return xEe;case 35665:return yEe;case 35666:return bEe;case 35674:return wEe;case 35675:return jEe;case 35676:return NEe;case 5124:case 35670:return _Ee;case 35667:case 35671:return SEe;case 35668:case 35672:return CEe;case 35669:case 35673:return AEe;case 5125:return MEe;case 36294:return EEe;case 36295:return kEe;case 36296:return TEe;case 35678:case 36198:case 36298:case 36306:case 35682:return PEe;case 35679:case 36299:case 36307:return OEe;case 35680:case 36300:case 36308:case 36293:return REe;case 36289:case 36303:case 36311:case 36292:return IEe}}(t.type)}}class nke{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return DEe;case 35664:return LEe;case 35665:return BEe;case 35666:return FEe;case 35674:return UEe;case 35675:return zEe;case 35676:return HEe;case 5124:case 35670:return VEe;case 35667:case 35671:return GEe;case 35668:case 35672:return WEe;case 35669:case 35673:return KEe;case 5125:return qEe;case 36294:return XEe;case 36295:return $Ee;case 36296:return YEe;case 35678:case 36198:case 36298:case 36306:case 35682:return JEe;case 35679:case 36299:case 36307:return ZEe;case 35680:case 36300:case 36308:case 36293:return QEe;case 36289:case 36303:case 36311:case 36292:return eke}}(t.type)}}class rke{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,a=r.length;i!==a;++i){const a=r[i];a.setValue(e,t[a.id],n)}}}const ike=/(\w+)(\])?(\[|\.)?/g;function ake(e,t){e.seq.push(t),e.map[t.id]=t}function ske(e,t,n){const r=e.name,i=r.length;for(ike.lastIndex=0;;){const a=ike.exec(r),s=ike.lastIndex;let o=a[1];const l="]"===a[2],c=a[3];if(l&&(o|=0),void 0===c||"["===c&&s+2===i){ake(n,void 0===c?new tke(o,e,t):new nke(o,e,t));break}{let e=n.map[o];void 0===e&&(e=new rke(o),ake(n,e)),n=e}}}class oke{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);ske(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,a=t.length;i!==a;++i){const a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n}}function lke(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let cke=0;function dke(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";const a=/ERROR: 0:(\d+)/.exec(i);if(a){const r=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){const n=e.split("\n"),r=[],i=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let s=i;s<a;s++){const e=s+1;r.push(`${e===t?">":" "} ${e}: ${n[s]}`)}return r.join("\n")}(e.getShaderSource(t),r)}return i}function uke(e,t){const n=function(e){const t=ESe.getPrimaries(ESe.workingColorSpace),n=ESe.getPrimaries(e);let r;switch(t===n?r="":t===U_e&&n===F_e?r="LinearDisplayP3ToLinearSRGB":t===F_e&&n===U_e&&(r="LinearSRGBToLinearDisplayP3"),e){case R_e:case D_e:return[r,"LinearTransferOETF"];case O_e:case I_e:return[r,"sRGBTransferOETF"];default:return[r,"LinearTransferOETF"]}}(t);return`vec4 ${e}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function hke(e,t){let n;switch(t){case 1:default:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 6:n="AgX";break;case 5:n="Custom"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function pke(e){return""!==e}function mke(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function fke(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const gke=/^[ \t]*#include +<([\w\d./]+)>/gm;function vke(e){return e.replace(gke,yke)}const xke=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function yke(e,t){let n=bMe[t];if(void 0===n){const e=xke.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=bMe[e]}return vke(n)}const bke=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function wke(e){return e.replace(bke,jke)}function jke(e,t,n,r){let i="";for(let a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function Nke(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function _ke(e,t,n,r){const i=e.getContext(),a=n.defines;let s=n.vertexShader,o=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case hNe:case pNe:t="ENVMAP_TYPE_CUBE";break;case gNe:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),d=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===pNe&&(t="ENVMAP_MODE_REFRACTION");return t}(n),u=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),h=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),p=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.normalMapTangentSpace||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(pke).join("\n")}(n),m=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(pke).join("\n")}(n),f=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(a),g=i.createProgram();let v,x,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f].filter(pke).join("\n"),v.length>0&&(v+="\n"),x=[p,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f].filter(pke).join("\n"),x.length>0&&(x+="\n")):(v=[Nke(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(pke).join("\n"),x=[p,Nke(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+d:"",n.envMap?"#define "+u:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?bMe.tonemapping_pars_fragment:"",0!==n.toneMapping?hke("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",bMe.colorspace_pars_fragment,uke("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(pke).join("\n")),s=vke(s),s=mke(s,n),s=fke(s,n),o=vke(o),o=mke(o,n),o=fke(o,n),s=wke(s),o=wke(o),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",v=[m,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+v,x=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===J_e?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===J_e?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+x);const b=y+v+s,w=y+x+o,j=lke(i,i.VERTEX_SHADER,b),N=lke(i,i.FRAGMENT_SHADER,w);function _(t){if(e.debug.checkShaderErrors){const n=i.getProgramInfoLog(g).trim(),r=i.getShaderInfoLog(j).trim(),a=i.getShaderInfoLog(N).trim();let s=!0,o=!0;if(!1===i.getProgramParameter(g,i.LINK_STATUS))if(s=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(i,g,j,N);else{dke(i,j,"vertex"),dke(i,N,"fragment")}else""!==n||""!==r&&""!==a||(o=!1);o&&(t.diagnostics={runnable:s,programLog:n,vertexShader:{log:r,prefix:v},fragmentShader:{log:a,prefix:x}})}i.deleteShader(j),i.deleteShader(N),S=new oke(i,g),C=function(e,t){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),a=r.name;let s=1;r.type===e.FLOAT_MAT2&&(s=2),r.type===e.FLOAT_MAT3&&(s=3),r.type===e.FLOAT_MAT4&&(s=4),n[a]={type:r.type,location:e.getAttribLocation(t,a),locationSize:s}}return n}(i,g)}let S,C;i.attachShader(g,j),i.attachShader(g,N),void 0!==n.index0AttributeName?i.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(g,0,"position"),i.linkProgram(g),this.getUniforms=function(){return void 0===S&&_(this),S},this.getAttributes=function(){return void 0===C&&_(this),C};let A=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===A&&(A=i.getProgramParameter(g,37297)),A},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(g),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=cke++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=j,this.fragmentShader=N,this}let Ske=0;class Cke{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(i)&&(a.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new Ake(e),t.set(e,n)),n}}class Ake{constructor(e){this.id=Ske++,this.code=e,this.usedTimes=0}}function Mke(e,t,n,r,i,a,s){const o=new PCe,l=new Cke,c=[],d=i.isWebGL2,u=i.logarithmicDepthBuffer,h=i.vertexTextures;let p=i.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function f(e){return 0===e?"uv":`uv${e}`}return{getParameters:function(a,o,c,g,v){const x=g.fog,y=v.geometry,b=a.isMeshStandardMaterial?g.environment:null,w=(a.isMeshStandardMaterial?n:t).get(a.envMap||b),j=w&&w.mapping===gNe?w.image.height:null,N=m[a.type];null!==a.precision&&(p=i.getMaxPrecision(a.precision),a.precision);const _=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,S=void 0!==_?_.length:0;let C,A,M,E,k=0;if(void 0!==y.morphAttributes.position&&(k=1),void 0!==y.morphAttributes.normal&&(k=2),void 0!==y.morphAttributes.color&&(k=3),N){const e=jMe[N];C=e.vertexShader,A=e.fragmentShader}else C=a.vertexShader,A=a.fragmentShader,l.update(a),M=l.getVertexShaderID(a),E=l.getFragmentShaderID(a);const T=e.getRenderTarget(),P=!0===v.isInstancedMesh,O=!0===v.isBatchedMesh,R=!!a.map,I=!!a.matcap,D=!!w,L=!!a.aoMap,B=!!a.lightMap,F=!!a.bumpMap,U=!!a.normalMap,z=!!a.displacementMap,H=!!a.emissiveMap,V=!!a.metalnessMap,G=!!a.roughnessMap,W=a.anisotropy>0,K=a.clearcoat>0,q=a.iridescence>0,X=a.sheen>0,$=a.transmission>0,Y=W&&!!a.anisotropyMap,J=K&&!!a.clearcoatMap,Z=K&&!!a.clearcoatNormalMap,Q=K&&!!a.clearcoatRoughnessMap,ee=q&&!!a.iridescenceMap,te=q&&!!a.iridescenceThicknessMap,ne=X&&!!a.sheenColorMap,re=X&&!!a.sheenRoughnessMap,ie=!!a.specularMap,ae=!!a.specularColorMap,se=!!a.specularIntensityMap,oe=$&&!!a.transmissionMap,le=$&&!!a.thicknessMap,ce=!!a.gradientMap,de=!!a.alphaMap,ue=a.alphaTest>0,he=!!a.alphaHash,pe=!!a.extensions,me=!!y.attributes.uv1,fe=!!y.attributes.uv2,ge=!!y.attributes.uv3;let ve=0;return a.toneMapped&&(null!==T&&!0!==T.isXRRenderTarget||(ve=e.toneMapping)),{isWebGL2:d,shaderID:N,shaderType:a.type,shaderName:a.name,vertexShader:C,fragmentShader:A,defines:a.defines,customVertexShaderID:M,customFragmentShaderID:E,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:p,batching:O,instancing:P,instancingColor:P&&null!==v.instanceColor,supportsVertexTextures:h,outputColorSpace:null===T?e.outputColorSpace:!0===T.isXRRenderTarget?T.texture.colorSpace:R_e,map:R,matcap:I,envMap:D,envMapMode:D&&w.mapping,envMapCubeUVHeight:j,aoMap:L,lightMap:B,bumpMap:F,normalMap:U,displacementMap:h&&z,emissiveMap:H,normalMapObjectSpace:U&&1===a.normalMapType,normalMapTangentSpace:U&&0===a.normalMapType,metalnessMap:V,roughnessMap:G,anisotropy:W,anisotropyMap:Y,clearcoat:K,clearcoatMap:J,clearcoatNormalMap:Z,clearcoatRoughnessMap:Q,iridescence:q,iridescenceMap:ee,iridescenceThicknessMap:te,sheen:X,sheenColorMap:ne,sheenRoughnessMap:re,specularMap:ie,specularColorMap:ae,specularIntensityMap:se,transmission:$,transmissionMap:oe,thicknessMap:le,gradientMap:ce,opaque:!1===a.transparent&&1===a.blending,alphaMap:de,alphaTest:ue,alphaHash:he,combine:a.combine,mapUv:R&&f(a.map.channel),aoMapUv:L&&f(a.aoMap.channel),lightMapUv:B&&f(a.lightMap.channel),bumpMapUv:F&&f(a.bumpMap.channel),normalMapUv:U&&f(a.normalMap.channel),displacementMapUv:z&&f(a.displacementMap.channel),emissiveMapUv:H&&f(a.emissiveMap.channel),metalnessMapUv:V&&f(a.metalnessMap.channel),roughnessMapUv:G&&f(a.roughnessMap.channel),anisotropyMapUv:Y&&f(a.anisotropyMap.channel),clearcoatMapUv:J&&f(a.clearcoatMap.channel),clearcoatNormalMapUv:Z&&f(a.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Q&&f(a.clearcoatRoughnessMap.channel),iridescenceMapUv:ee&&f(a.iridescenceMap.channel),iridescenceThicknessMapUv:te&&f(a.iridescenceThicknessMap.channel),sheenColorMapUv:ne&&f(a.sheenColorMap.channel),sheenRoughnessMapUv:re&&f(a.sheenRoughnessMap.channel),specularMapUv:ie&&f(a.specularMap.channel),specularColorMapUv:ae&&f(a.specularColorMap.channel),specularIntensityMapUv:se&&f(a.specularIntensityMap.channel),transmissionMapUv:oe&&f(a.transmissionMap.channel),thicknessMapUv:le&&f(a.thicknessMap.channel),alphaMapUv:de&&f(a.alphaMap.channel),vertexTangents:!!y.attributes.tangent&&(U||W),vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,vertexUv1s:me,vertexUv2s:fe,vertexUv3s:ge,pointsUvs:!0===v.isPoints&&!!y.attributes.uv&&(R||de),fog:!!x,useFog:!0===a.fog,fogExp2:x&&x.isFogExp2,flatShading:!0===a.flatShading,sizeAttenuation:!0===a.sizeAttenuation,logarithmicDepthBuffer:u,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:S,morphTextureStride:k,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numLightProbes:o.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:ve,useLegacyLights:e._useLegacyLights,decodeVideoTexture:R&&!0===a.map.isVideoTexture&&ESe.getTransfer(a.map.colorSpace)===B_e,premultipliedAlpha:a.premultipliedAlpha,doubleSided:2===a.side,flipSided:1===a.side,useDepthPacking:a.depthPacking>=0,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:pe&&!0===a.extensions.derivatives,extensionFragDepth:pe&&!0===a.extensions.fragDepth,extensionDrawBuffers:pe&&!0===a.extensions.drawBuffers,extensionShaderTextureLOD:pe&&!0===a.extensions.shaderTextureLOD,extensionClipCullDistance:pe&&a.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:d||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){o.disableAll(),t.isWebGL2&&o.enable(0);t.supportsVertexTextures&&o.enable(1);t.instancing&&o.enable(2);t.instancingColor&&o.enable(3);t.matcap&&o.enable(4);t.envMap&&o.enable(5);t.normalMapObjectSpace&&o.enable(6);t.normalMapTangentSpace&&o.enable(7);t.clearcoat&&o.enable(8);t.iridescence&&o.enable(9);t.alphaTest&&o.enable(10);t.vertexColors&&o.enable(11);t.vertexAlphas&&o.enable(12);t.vertexUv1s&&o.enable(13);t.vertexUv2s&&o.enable(14);t.vertexUv3s&&o.enable(15);t.vertexTangents&&o.enable(16);t.anisotropy&&o.enable(17);t.alphaHash&&o.enable(18);t.batching&&o.enable(19);e.push(o.mask),o.disableAll(),t.fog&&o.enable(0);t.useFog&&o.enable(1);t.flatShading&&o.enable(2);t.logarithmicDepthBuffer&&o.enable(3);t.skinning&&o.enable(4);t.morphTargets&&o.enable(5);t.morphNormals&&o.enable(6);t.morphColors&&o.enable(7);t.premultipliedAlpha&&o.enable(8);t.shadowMapEnabled&&o.enable(9);t.useLegacyLights&&o.enable(10);t.doubleSided&&o.enable(11);t.flipSided&&o.enable(12);t.useDepthPacking&&o.enable(13);t.dithering&&o.enable(14);t.transmission&&o.enable(15);t.sheen&&o.enable(16);t.opaque&&o.enable(17);t.pointsUvs&&o.enable(18);t.decodeVideoTexture&&o.enable(19);e.push(o.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=m[e.type];let n;if(t){const e=jMe[t];n=nMe.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,i=c.length;e<i;e++){const t=c[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new _ke(e,n,t,a),c.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function Eke(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function kke(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Tke(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Pke(){const e=[];let t=0;const n=[],r=[],i=[];function a(n,r,i,a,s,o){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:a,renderOrder:n.renderOrder,z:s,group:o},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=s,l.group=o),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,s,o,l,c){const d=a(e,t,s,o,l,c);s.transmission>0?r.push(d):!0===s.transparent?i.push(d):n.push(d)},unshift:function(e,t,s,o,l,c){const d=a(e,t,s,o,l,c);s.transmission>0?r.unshift(d):!0===s.transparent?i.unshift(d):n.unshift(d)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||kke),r.length>1&&r.sort(t||Tke),i.length>1&&i.sort(t||Tke)}}}function Oke(){let e=new WeakMap;return{get:function(t,n){const r=e.get(t);let i;return void 0===r?(i=new Pke,e.set(t,[i])):n>=r.length?(i=new Pke,r.push(i)):i=r[n],i},dispose:function(){e=new WeakMap}}}function Rke(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new WSe,color:new cAe};break;case"SpotLight":n={position:new WSe,direction:new WSe,color:new cAe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new WSe,color:new cAe,distance:0,decay:0};break;case"HemisphereLight":n={direction:new WSe,skyColor:new cAe,groundColor:new cAe};break;case"RectAreaLight":n={color:new cAe,position:new WSe,halfWidth:new WSe,halfHeight:new WSe}}return e[t.id]=n,n}}}let Ike=0;function Dke(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Lke(e,t){const n=new Rke,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new fSe};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new fSe,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let l=0;l<9;l++)i.probe.push(new WSe);const a=new WSe,s=new wCe,o=new wCe;return{setup:function(a,s){let o=0,l=0,c=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let d=0,u=0,h=0,p=0,m=0,f=0,g=0,v=0,x=0,y=0,b=0;a.sort(Dke);const w=!0===s?Math.PI:1;for(let e=0,t=a.length;e<t;e++){const t=a[e],s=t.color,j=t.intensity,N=t.distance,_=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)o+=s.r*j*w,l+=s.g*j*w,c+=s.b*j*w;else if(t.isLightProbe){for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],j);b++}else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*w),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[d]=n,i.directionalShadowMap[d]=_,i.directionalShadowMatrix[d]=t.shadow.matrix,f++}i.directional[d]=e,d++}else if(t.isSpotLight){const e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(s).multiplyScalar(j*w),e.distance=N,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,i.spot[h]=e;const a=t.shadow;if(t.map&&(i.spotLightMap[x]=t.map,x++,a.updateMatrices(t),t.castShadow&&y++),i.spotLightMatrix[h]=a.matrix,t.castShadow){const e=r.get(t);e.shadowBias=a.bias,e.shadowNormalBias=a.normalBias,e.shadowRadius=a.radius,e.shadowMapSize=a.mapSize,i.spotShadow[h]=e,i.spotShadowMap[h]=_,v++}h++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(s).multiplyScalar(j),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[p]=e,p++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*w),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[u]=n,i.pointShadowMap[u]=_,i.pointShadowMatrix[u]=t.shadow.matrix,g++}i.point[u]=e,u++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(j*w),e.groundColor.copy(t.groundColor).multiplyScalar(j*w),i.hemi[m]=e,m++}}p>0&&(t.isWebGL2?!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=wMe.LTC_FLOAT_1,i.rectAreaLTC2=wMe.LTC_FLOAT_2):(i.rectAreaLTC1=wMe.LTC_HALF_1,i.rectAreaLTC2=wMe.LTC_HALF_2):!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=wMe.LTC_FLOAT_1,i.rectAreaLTC2=wMe.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")&&(i.rectAreaLTC1=wMe.LTC_HALF_1,i.rectAreaLTC2=wMe.LTC_HALF_2)),i.ambient[0]=o,i.ambient[1]=l,i.ambient[2]=c;const j=i.hash;j.directionalLength===d&&j.pointLength===u&&j.spotLength===h&&j.rectAreaLength===p&&j.hemiLength===m&&j.numDirectionalShadows===f&&j.numPointShadows===g&&j.numSpotShadows===v&&j.numSpotMaps===x&&j.numLightProbes===b||(i.directional.length=d,i.spot.length=h,i.rectArea.length=p,i.point.length=u,i.hemi.length=m,i.directionalShadow.length=f,i.directionalShadowMap.length=f,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=f,i.pointShadowMatrix.length=g,i.spotLightMatrix.length=v+x-y,i.spotLightMap.length=x,i.numSpotLightShadowsWithMaps=y,i.numLightProbes=b,j.directionalLength=d,j.pointLength=u,j.spotLength=h,j.rectAreaLength=p,j.hemiLength=m,j.numDirectionalShadows=f,j.numPointShadows=g,j.numSpotShadows=v,j.numSpotMaps=x,j.numLightProbes=b,i.version=Ike++)},setupView:function(e,t){let n=0,r=0,l=0,c=0,d=0;const u=t.matrixWorldInverse;for(let h=0,p=e.length;h<p;h++){const t=e[h];if(t.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),a.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(u),n++}else if(t.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(u),e.direction.setFromMatrixPosition(t.matrixWorld),a.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(u),l++}else if(t.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(u),o.identity(),s.copy(t.matrixWorld),s.premultiply(u),o.extractRotation(s),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),c++}else if(t.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(u),r++}else if(t.isHemisphereLight){const e=i.hemi[d];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(u),d++}}},state:i}}function Bke(e,t){const n=new Lke(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function Fke(e,t){let n=new WeakMap;return{get:function(r,i=0){const a=n.get(r);let s;return void 0===a?(s=new Bke(e,t),n.set(r,[s])):i>=a.length?(s=new Bke(e,t),a.push(s)):s=a[i],s},dispose:function(){n=new WeakMap}}}class Uke extends hAe{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class zke extends hAe{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Hke(e,t,n){let r=new gMe;const i=new fSe,a=new fSe,s=new FSe,o=new Uke({depthPacking:3201}),l=new zke,c={},d=n.maxTextureSize,u={[Hje]:1,[Vje]:0,[Gje]:2},h=new rMe({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new fSe},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const m=new PAe;m.setAttribute("position",new wAe(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const f=new YAe(m,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;let v=this.type;function x(n,r){const a=t.update(f);h.defines.VSM_SAMPLES!==n.blurSamples&&(h.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new zSe(i.x,i.y)),h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,a,h,f,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,a,p,f,null)}function y(t,n,r,i){let a=null;const s=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==s)a=s;else if(a=!0===r.isPointLight?l:o,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=a.uuid,t=n.uuid;let r=c[e];void 0===r&&(r={},c[e]=r);let i=r[t];void 0===i&&(i=a.clone(),r[t]=i,n.addEventListener("dispose",w)),a=i}if(a.visible=n.visible,a.wireframe=n.wireframe,a.side=3===i?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:u[n.side],a.alphaMap=n.alphaMap,a.alphaTest=n.alphaTest,a.map=n.map,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.clipIntersection=n.clipIntersection,a.displacementMap=n.displacementMap,a.displacementScale=n.displacementScale,a.displacementBias=n.displacementBias,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,!0===r.isPointLight&&!0===a.isMeshDistanceMaterial){e.properties.get(a).light=r}return a}function b(n,i,a,s,o){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===o)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);const r=t.update(n),l=n.material;if(Array.isArray(l)){const t=r.groups;for(let c=0,d=t.length;c<d;c++){const d=t[c],u=l[d.materialIndex];if(u&&u.visible){const t=y(n,u,s,o);n.onBeforeShadow(e,n,i,a,r,t,d),e.renderBufferDirect(a,null,r,t,n,d),n.onAfterShadow(e,n,i,a,r,t,d)}}}else if(l.visible){const t=y(n,l,s,o);n.onBeforeShadow(e,n,i,a,r,t,null),e.renderBufferDirect(a,null,r,t,n,null),n.onAfterShadow(e,n,i,a,r,t,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)b(l[e],i,a,s,o)}function w(e){e.target.removeEventListener("dispose",w);for(const t in c){const n=c[t],r=e.target.uuid;if(r in n){n[r].dispose(),delete n[r]}}}this.render=function(t,n,o){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),u=e.getActiveMipmapLevel(),h=e.state;h.setBlending(0),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);const p=3!==v&&3===this.type,m=3===v&&3!==this.type;for(let f=0,g=t.length;f<g;f++){const l=t[f],c=l.shadow;if(void 0===c)continue;if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;i.copy(c.mapSize);const u=c.getFrameExtents();if(i.multiply(u),a.copy(c.mapSize),(i.x>d||i.y>d)&&(i.x>d&&(a.x=Math.floor(d/u.x),i.x=a.x*u.x,c.mapSize.x=a.x),i.y>d&&(a.y=Math.floor(d/u.y),i.y=a.y*u.y,c.mapSize.y=a.y)),null===c.map||!0===p||!0===m){const e=3!==this.type?{minFilter:bNe,magFilter:bNe}:{};null!==c.map&&c.map.dispose(),c.map=new zSe(i.x,i.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const g=c.getViewportCount();for(let e=0;e<g;e++){const t=c.getViewport(e);s.set(a.x*t.x,a.y*t.y,a.x*t.z,a.y*t.w),h.viewport(s),c.updateMatrices(l,e),r=c.getFrustum(),b(n,o,c.camera,l,this.type)}!0!==c.isPointLightShadow&&3===this.type&&x(c,o),c.needsUpdate=!1}v=this.type,g.needsUpdate=!1,e.setRenderTarget(l,c,u)}}function Vke(e,t,n){const r=n.isWebGL2;const i=new function(){let t=!1;const n=new FSe;let r=null;const i=new FSe(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,s,o){!0===o&&(t*=s,r*=s,a*=s),n.set(t,r,a,s),!1===i.equals(n)&&(e.clearColor(t,r,a,s),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},a=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(t){t?H(e.DEPTH_TEST):V(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},s=new function(){let t=!1,n=null,r=null,i=null,a=null,s=null,o=null,l=null,c=null;return{setTest:function(n){t||(n?H(e.STENCIL_TEST):V(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,s){r===t&&i===n&&a===s||(e.stencilFunc(t,n,s),r=t,i=n,a=s)},setOp:function(t,n,r){s===t&&o===n&&l===r||(e.stencilOp(t,n,r),s=t,o=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,s=null,o=null,l=null,c=null}}},o=new WeakMap,l=new WeakMap;let c={},d={},u=new WeakMap,h=[],p=null,m=!1,f=null,g=null,v=null,x=null,y=null,b=null,w=null,j=new cAe(0,0,0),N=0,_=!1,S=null,C=null,A=null,M=null,E=null;const k=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let T=!1,P=0;const O=e.getParameter(e.VERSION);-1!==O.indexOf("WebGL")?(P=parseFloat(/^WebGL (\d)/.exec(O)[1]),T=P>=1):-1!==O.indexOf("OpenGL ES")&&(P=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),T=P>=2);let R=null,I={};const D=e.getParameter(e.SCISSOR_BOX),L=e.getParameter(e.VIEWPORT),B=(new FSe).fromArray(D),F=(new FSe).fromArray(L);function U(t,n,i,a){const s=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let l=0;l<i;l++)!r||t!==e.TEXTURE_3D&&t!==e.TEXTURE_2D_ARRAY?e.texImage2D(n+l,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,s):e.texImage3D(n,0,e.RGBA,1,1,a,0,e.RGBA,e.UNSIGNED_BYTE,s);return o}const z={};function H(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function V(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}z[e.TEXTURE_2D]=U(e.TEXTURE_2D,e.TEXTURE_2D,1),z[e.TEXTURE_CUBE_MAP]=U(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(z[e.TEXTURE_2D_ARRAY]=U(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),z[e.TEXTURE_3D]=U(e.TEXTURE_3D,e.TEXTURE_3D,1,1)),i.setClear(0,0,0,1),a.setClear(1),s.setClear(0),H(e.DEPTH_TEST),a.setFunc(3),q(!1),X(1),H(e.CULL_FACE),K(0);const G={[Wje]:e.FUNC_ADD,[Kje]:e.FUNC_SUBTRACT,[qje]:e.FUNC_REVERSE_SUBTRACT};if(r)G[103]=e.MIN,G[104]=e.MAX;else{const e=t.get("EXT_blend_minmax");null!==e&&(G[103]=e.MIN_EXT,G[104]=e.MAX_EXT)}const W={[Xje]:e.ZERO,[$je]:e.ONE,[Yje]:e.SRC_COLOR,[Zje]:e.SRC_ALPHA,[iNe]:e.SRC_ALPHA_SATURATE,[nNe]:e.DST_COLOR,[eNe]:e.DST_ALPHA,[Jje]:e.ONE_MINUS_SRC_COLOR,[Qje]:e.ONE_MINUS_SRC_ALPHA,[rNe]:e.ONE_MINUS_DST_COLOR,[tNe]:e.ONE_MINUS_DST_ALPHA,[aNe]:e.CONSTANT_COLOR,[sNe]:e.ONE_MINUS_CONSTANT_COLOR,[oNe]:e.CONSTANT_ALPHA,[lNe]:e.ONE_MINUS_CONSTANT_ALPHA};function K(t,n,r,i,a,s,o,l,c,d){if(0!==t){if(!1===m&&(H(e.BLEND),m=!0),5===t)a=a||n,s=s||r,o=o||i,n===g&&a===y||(e.blendEquationSeparate(G[n],G[a]),g=n,y=a),r===v&&i===x&&s===b&&o===w||(e.blendFuncSeparate(W[r],W[i],W[s],W[o]),v=r,x=i,b=s,w=o),!1!==l.equals(j)&&c===N||(e.blendColor(l.r,l.g,l.b,c),j.copy(l),N=c),f=t,_=!1;else if(t!==f||d!==_){if(g===Wje&&y===Wje||(e.blendEquation(e.FUNC_ADD),g=Wje,y=Wje),d)switch(t){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)}else switch(t){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFunc(e.ZERO,e.SRC_COLOR)}v=null,x=null,b=null,w=null,j.set(0,0,0),N=0,f=t,_=d}}else!0===m&&(V(e.BLEND),m=!1)}function q(t){S!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),S=t)}function X(t){0!==t?(H(e.CULL_FACE),t!==C&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):V(e.CULL_FACE),C=t}function $(t,n,r){t?(H(e.POLYGON_OFFSET_FILL),M===n&&E===r||(e.polygonOffset(n,r),M=n,E=r)):V(e.POLYGON_OFFSET_FILL)}return{buffers:{color:i,depth:a,stencil:s},enable:H,disable:V,bindFramebuffer:function(t,n){return d[t]!==n&&(e.bindFramebuffer(t,n),d[t]=n,r&&(t===e.DRAW_FRAMEBUFFER&&(d[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(d[e.DRAW_FRAMEBUFFER]=n)),!0)},drawBuffers:function(r,i){let a=h,s=!1;if(r)if(a=u.get(i),void 0===a&&(a=[],u.set(i,a)),r.isWebGLMultipleRenderTargets){const t=r.texture;if(a.length!==t.length||a[0]!==e.COLOR_ATTACHMENT0){for(let n=0,r=t.length;n<r;n++)a[n]=e.COLOR_ATTACHMENT0+n;a.length=t.length,s=!0}}else a[0]!==e.COLOR_ATTACHMENT0&&(a[0]=e.COLOR_ATTACHMENT0,s=!0);else a[0]!==e.BACK&&(a[0]=e.BACK,s=!0);s&&(n.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:K,setMaterial:function(t,n){2===t.side?V(e.CULL_FACE):H(e.CULL_FACE);let r=1===t.side;n&&(r=!r),q(r),1===t.blending&&!1===t.transparent?K(0):K(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),a.setFunc(t.depthFunc),a.setTest(t.depthTest),a.setMask(t.depthWrite),i.setMask(t.colorWrite);const o=t.stencilWrite;s.setTest(o),o&&(s.setMask(t.stencilWriteMask),s.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),s.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),$(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?H(e.SAMPLE_ALPHA_TO_COVERAGE):V(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:q,setCullFace:X,setLineWidth:function(t){t!==A&&(T&&e.lineWidth(t),A=t)},setPolygonOffset:$,setScissorTest:function(t){t?H(e.SCISSOR_TEST):V(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+k-1),R!==t&&(e.activeTexture(t),R=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===R?e.TEXTURE0+k-1:R);let i=I[r];void 0===i&&(i={type:void 0,texture:void 0},I[r]=i),i.type===t&&i.texture===n||(R!==r&&(e.activeTexture(r),R=r),e.bindTexture(t,n||z[t]),i.type=t,i.texture=n)},unbindTexture:function(){const t=I[R];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(t){}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){}},updateUBOMapping:function(t,n){let r=l.get(n);void 0===r&&(r=new WeakMap,l.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){const r=l.get(n).get(t);o.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),o.set(n,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(t){}},scissor:function(t){!1===B.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),B.copy(t))},viewport:function(t){!1===F.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),F.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),!0===r&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},R=null,I={},d={},u=new WeakMap,h=[],p=null,m=!1,f=null,g=null,v=null,x=null,y=null,b=null,w=null,j=new cAe(0,0,0),N=0,_=!1,S=null,C=null,A=null,M=null,E=null,B.set(0,0,e.canvas.width,e.canvas.height),F.set(0,0,e.canvas.width,e.canvas.height),i.reset(),a.reset(),s.reset()}}}function Gke(e,t,n,r,i,a,s){const o=i.isWebGL2,l=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,c="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),d=new WeakMap;let u;const h=new WeakMap;let p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(c$e){}function m(e,t){return p?new OffscreenCanvas(e,t):wSe("canvas")}function f(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?uSe:Math.floor,a=r(i*e.width),s=r(i*e.height);void 0===u&&(u=m(a,s));const o=n?m(a,s):u;o.width=a,o.height=s;return o.getContext("2d").drawImage(e,0,0,a,s),o}return e}return e}function g(e){return dSe(e.width)&&dSe(e.height)}function v(e,t){return e.generateMipmaps&&t&&e.minFilter!==bNe&&e.minFilter!==NNe}function x(t){e.generateMipmap(t)}function y(n,r,i,a,s=!1){if(!1===o)return r;if(null!==n&&void 0!==e[n])return e[n];let l=r;if(r===e.RED&&(i===e.FLOAT&&(l=e.R32F),i===e.HALF_FLOAT&&(l=e.R16F),i===e.UNSIGNED_BYTE&&(l=e.R8)),r===e.RED_INTEGER&&(i===e.UNSIGNED_BYTE&&(l=e.R8UI),i===e.UNSIGNED_SHORT&&(l=e.R16UI),i===e.UNSIGNED_INT&&(l=e.R32UI),i===e.BYTE&&(l=e.R8I),i===e.SHORT&&(l=e.R16I),i===e.INT&&(l=e.R32I)),r===e.RG&&(i===e.FLOAT&&(l=e.RG32F),i===e.HALF_FLOAT&&(l=e.RG16F),i===e.UNSIGNED_BYTE&&(l=e.RG8)),r===e.RGBA){const t=s?L_e:ESe.getTransfer(a);i===e.FLOAT&&(l=e.RGBA32F),i===e.HALF_FLOAT&&(l=e.RGBA16F),i===e.UNSIGNED_BYTE&&(l=t===B_e?e.SRGB8_ALPHA8:e.RGBA8),i===e.UNSIGNED_SHORT_4_4_4_4&&(l=e.RGBA4),i===e.UNSIGNED_SHORT_5_5_5_1&&(l=e.RGB5_A1)}return l!==e.R16F&&l!==e.R32F&&l!==e.RG16F&&l!==e.RG32F&&l!==e.RGBA16F&&l!==e.RGBA32F||t.get("EXT_color_buffer_float"),l}function b(e,t,n){return!0===v(e,n)||e.isFramebufferTexture&&e.minFilter!==bNe&&e.minFilter!==NNe?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function w(t){return t===bNe||t===wNe||t===jNe?e.NEAREST:e.LINEAR}function j(e){const t=e.target;t.removeEventListener("dispose",j),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=h.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&_(e),0===Object.keys(i).length&&h.delete(n)}r.remove(e)}(t),t.isVideoTexture&&d.delete(t)}function N(t){const n=t.target;n.removeEventListener("dispose",N),function(t){const n=t.texture,i=r.get(t),a=r.get(n);void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),s.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let r=0;r<6;r++){if(Array.isArray(i.__webglFramebuffer[r]))for(let t=0;t<i.__webglFramebuffer[r].length;t++)e.deleteFramebuffer(i.__webglFramebuffer[r][t]);else e.deleteFramebuffer(i.__webglFramebuffer[r]);i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[r])}else{if(Array.isArray(i.__webglFramebuffer))for(let t=0;t<i.__webglFramebuffer.length;t++)e.deleteFramebuffer(i.__webglFramebuffer[t]);else e.deleteFramebuffer(i.__webglFramebuffer);if(i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let t=0;t<i.__webglColorRenderbuffer.length;t++)i.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[t]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let o=0,l=n.length;o<l;o++){const t=r.get(n[o]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),s.memory.textures--),r.remove(n[o])}r.remove(n),r.remove(t)}(n)}function _(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const i=t.source;delete h.get(i)[n.__cacheKey],s.memory.textures--}let S=0;function C(t,i){const a=r.get(t);if(t.isVideoTexture&&function(e){const t=s.render.frame;d.get(e)!==t&&(d.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version){const e=t.image;if(null===e);else if(!1!==e.complete)return void P(a,t,i)}n.bindTexture(e.TEXTURE_2D,a.__webglTexture,e.TEXTURE0+i)}const A={[vNe]:e.REPEAT,[xNe]:e.CLAMP_TO_EDGE,[yNe]:e.MIRRORED_REPEAT},M={[bNe]:e.NEAREST,[wNe]:e.NEAREST_MIPMAP_NEAREST,[jNe]:e.NEAREST_MIPMAP_LINEAR,[NNe]:e.LINEAR,[_Ne]:e.LINEAR_MIPMAP_NEAREST,[SNe]:e.LINEAR_MIPMAP_LINEAR},E={[H_e]:e.NEVER,[$_e]:e.ALWAYS,[V_e]:e.LESS,[W_e]:e.LEQUAL,[G_e]:e.EQUAL,[X_e]:e.GEQUAL,[K_e]:e.GREATER,[q_e]:e.NOTEQUAL};function k(n,a,s){if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,A[a.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,A[a.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,A[a.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,M[a.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,M[a.minFilter])):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),a.wrapS!==xNe||a.wrapT,e.texParameteri(n,e.TEXTURE_MAG_FILTER,w(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,w(a.minFilter)),a.minFilter!==bNe&&a.minFilter),a.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,E[a.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){const s=t.get("EXT_texture_filter_anisotropic");if(a.magFilter===bNe)return;if(a.minFilter!==jNe&&a.minFilter!==SNe)return;if(a.type===ONe&&!1===t.has("OES_texture_float_linear"))return;if(!1===o&&a.type===RNe&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function T(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",j));const i=n.source;let a=h.get(i);void 0===a&&(a={},h.set(i,a));const o=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(o!==t.__cacheKey){void 0===a[o]&&(a[o]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,r=!0),a[o].usedTimes++;const i=a[t.__cacheKey];void 0!==i&&(a[t.__cacheKey].usedTimes--,0===i.usedTimes&&_(n)),t.__cacheKey=o,t.__webglTexture=a[o].texture}return r}function P(t,s,l){let c=e.TEXTURE_2D;(s.isDataArrayTexture||s.isCompressedArrayTexture)&&(c=e.TEXTURE_2D_ARRAY),s.isData3DTexture&&(c=e.TEXTURE_3D);const d=T(t,s),u=s.source;n.bindTexture(c,t.__webglTexture,e.TEXTURE0+l);const h=r.get(u);if(u.version!==h.__version||!0===d){n.activeTexture(e.TEXTURE0+l);const t=ESe.getPrimaries(ESe.workingColorSpace),r=s.colorSpace===P_e?null:ESe.getPrimaries(s.colorSpace),p=s.colorSpace===P_e||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,p);const m=function(e){return!o&&(e.wrapS!==xNe||e.wrapT!==xNe||e.minFilter!==bNe&&e.minFilter!==NNe)}(s)&&!1===g(s.image);let w=f(s.image,m,!1,i.maxTextureSize);w=B(s,w);const j=g(w)||o,N=a.convert(s.format,s.colorSpace);let _,S=a.convert(s.type),C=y(s.internalFormat,N,S,s.colorSpace,s.isVideoTexture);k(c,s,j);const A=s.mipmaps,M=o&&!0!==s.isVideoTexture&&C!==QNe,E=void 0===h.__version||!0===d,T=b(s,w,j);if(s.isDepthTexture)C=e.DEPTH_COMPONENT,o?C=s.type===ONe?e.DEPTH_COMPONENT32F:s.type===PNe?e.DEPTH_COMPONENT24:s.type===LNe?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT16:s.type,s.format===FNe&&C===e.DEPTH_COMPONENT&&s.type!==kNe&&s.type!==PNe&&(s.type=PNe,S=a.convert(s.type)),s.format===UNe&&C===e.DEPTH_COMPONENT&&(C=e.DEPTH_STENCIL,s.type!==LNe&&(s.type=LNe,S=a.convert(s.type))),E&&(M?n.texStorage2D(e.TEXTURE_2D,1,C,w.width,w.height):n.texImage2D(e.TEXTURE_2D,0,C,w.width,w.height,0,N,S,null));else if(s.isDataTexture)if(A.length>0&&j){M&&E&&n.texStorage2D(e.TEXTURE_2D,T,C,A[0].width,A[0].height);for(let t=0,r=A.length;t<r;t++)_=A[t],M?n.texSubImage2D(e.TEXTURE_2D,t,0,0,_.width,_.height,N,S,_.data):n.texImage2D(e.TEXTURE_2D,t,C,_.width,_.height,0,N,S,_.data);s.generateMipmaps=!1}else M?(E&&n.texStorage2D(e.TEXTURE_2D,T,C,w.width,w.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,w.width,w.height,N,S,w.data)):n.texImage2D(e.TEXTURE_2D,0,C,w.width,w.height,0,N,S,w.data);else if(s.isCompressedTexture)if(s.isCompressedArrayTexture){M&&E&&n.texStorage3D(e.TEXTURE_2D_ARRAY,T,C,A[0].width,A[0].height,w.depth);for(let t=0,r=A.length;t<r;t++)_=A[t],s.format!==BNe?null!==N&&(M?n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,_.width,_.height,w.depth,N,_.data,0,0):n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,C,_.width,_.height,w.depth,0,_.data,0,0)):M?n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,_.width,_.height,w.depth,N,S,_.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,C,_.width,_.height,w.depth,0,N,S,_.data)}else{M&&E&&n.texStorage2D(e.TEXTURE_2D,T,C,A[0].width,A[0].height);for(let t=0,r=A.length;t<r;t++)_=A[t],s.format!==BNe?null!==N&&(M?n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,_.width,_.height,N,_.data):n.compressedTexImage2D(e.TEXTURE_2D,t,C,_.width,_.height,0,_.data)):M?n.texSubImage2D(e.TEXTURE_2D,t,0,0,_.width,_.height,N,S,_.data):n.texImage2D(e.TEXTURE_2D,t,C,_.width,_.height,0,N,S,_.data)}else if(s.isDataArrayTexture)M?(E&&n.texStorage3D(e.TEXTURE_2D_ARRAY,T,C,w.width,w.height,w.depth),n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,w.width,w.height,w.depth,N,S,w.data)):n.texImage3D(e.TEXTURE_2D_ARRAY,0,C,w.width,w.height,w.depth,0,N,S,w.data);else if(s.isData3DTexture)M?(E&&n.texStorage3D(e.TEXTURE_3D,T,C,w.width,w.height,w.depth),n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,w.width,w.height,w.depth,N,S,w.data)):n.texImage3D(e.TEXTURE_3D,0,C,w.width,w.height,w.depth,0,N,S,w.data);else if(s.isFramebufferTexture){if(E)if(M)n.texStorage2D(e.TEXTURE_2D,T,C,w.width,w.height);else{let t=w.width,r=w.height;for(let i=0;i<T;i++)n.texImage2D(e.TEXTURE_2D,i,C,t,r,0,N,S,null),t>>=1,r>>=1}}else if(A.length>0&&j){M&&E&&n.texStorage2D(e.TEXTURE_2D,T,C,A[0].width,A[0].height);for(let t=0,r=A.length;t<r;t++)_=A[t],M?n.texSubImage2D(e.TEXTURE_2D,t,0,0,N,S,_):n.texImage2D(e.TEXTURE_2D,t,C,N,S,_);s.generateMipmaps=!1}else M?(E&&n.texStorage2D(e.TEXTURE_2D,T,C,w.width,w.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,N,S,w)):n.texImage2D(e.TEXTURE_2D,0,C,N,S,w);v(s,j)&&x(c),h.__version=u.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}function O(t,i,s,o,c,d){const u=a.convert(s.format,s.colorSpace),h=a.convert(s.type),p=y(s.internalFormat,u,h,s.colorSpace);if(!r.get(i).__hasExternalTextures){const t=Math.max(1,i.width>>d),r=Math.max(1,i.height>>d);c===e.TEXTURE_3D||c===e.TEXTURE_2D_ARRAY?n.texImage3D(c,d,p,t,r,i.depth,0,u,h,null):n.texImage2D(c,d,p,t,r,0,u,h,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),L(i)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,o,c,r.get(s).__webglTexture,0,D(i)):(c===e.TEXTURE_2D||c>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&c<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,o,c,r.get(s).__webglTexture,d),n.bindFramebuffer(e.FRAMEBUFFER,null)}function R(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer){let i=!0===o?e.DEPTH_COMPONENT24:e.DEPTH_COMPONENT16;if(r||L(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===ONe?i=e.DEPTH_COMPONENT32F:t.type===PNe&&(i=e.DEPTH_COMPONENT24));const r=D(n);L(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,r,i,n.width,n.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,r,i,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,i,n.width,n.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(n.depthBuffer&&n.stencilBuffer){const i=D(n);r&&!1===L(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,i,e.DEPTH24_STENCIL8,n.width,n.height):L(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,i,e.DEPTH24_STENCIL8,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<t.length;i++){const s=t[i],o=a.convert(s.format,s.colorSpace),c=a.convert(s.type),d=y(s.internalFormat,o,c,s.colorSpace),u=D(n);r&&!1===L(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,u,d,n.width,n.height):L(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,u,d,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,d,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function I(t){const i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),C(i.depthTexture,0);const a=r.get(i.depthTexture).__webglTexture,s=D(i);if(i.depthTexture.format===FNe)L(i)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0);else{if(i.depthTexture.format!==UNe)throw new Error("Unknown depthTexture format");L(i)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0)}}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),R(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),R(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}function D(e){return Math.min(i.maxSamples,e.samples)}function L(e){const n=r.get(e);return o&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function B(e,n){const r=e.colorSpace,i=e.format;e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===Z_e||r!==R_e&&r!==P_e&&ESe.getTransfer(r)===B_e&&!1===o&&(!0===t.has("EXT_sRGB")&&i===BNe?(e.format=Z_e,e.minFilter=NNe,e.generateMipmaps=!1):n=OSe.sRGBToLinear(n)),n}this.allocateTextureUnit=function(){const e=S;return i.maxTextures,S+=1,e},this.resetTextureUnits=function(){S=0},this.setTexture2D=C,this.setTexture2DArray=function(t,i){const a=r.get(t);t.version>0&&a.__version!==t.version?P(a,t,i):n.bindTexture(e.TEXTURE_2D_ARRAY,a.__webglTexture,e.TEXTURE0+i)},this.setTexture3D=function(t,i){const a=r.get(t);t.version>0&&a.__version!==t.version?P(a,t,i):n.bindTexture(e.TEXTURE_3D,a.__webglTexture,e.TEXTURE0+i)},this.setTextureCube=function(t,s){const l=r.get(t);t.version>0&&l.__version!==t.version?function(t,s,l){if(6!==s.image.length)return;const c=T(t,s),d=s.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+l);const u=r.get(d);if(d.version!==u.__version||!0===c){n.activeTexture(e.TEXTURE0+l);const t=ESe.getPrimaries(ESe.workingColorSpace),r=s.colorSpace===P_e?null:ESe.getPrimaries(s.colorSpace),h=s.colorSpace===P_e||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);const p=s.isCompressedTexture||s.image[0].isCompressedTexture,m=s.image[0]&&s.image[0].isDataTexture,w=[];for(let e=0;e<6;e++)w[e]=p||m?m?s.image[e].image:s.image[e]:f(s.image[e],!1,!0,i.maxCubemapSize),w[e]=B(s,w[e]);const j=w[0],N=g(j)||o,_=a.convert(s.format,s.colorSpace),S=a.convert(s.type),C=y(s.internalFormat,_,S,s.colorSpace),A=o&&!0!==s.isVideoTexture,M=void 0===u.__version||!0===c;let E,T=b(s,j,N);if(k(e.TEXTURE_CUBE_MAP,s,N),p){A&&M&&n.texStorage2D(e.TEXTURE_CUBE_MAP,T,C,j.width,j.height);for(let t=0;t<6;t++){E=w[t].mipmaps;for(let r=0;r<E.length;r++){const i=E[r];s.format!==BNe?null!==_&&(A?n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,i.width,i.height,_,i.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,C,i.width,i.height,0,i.data)):A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,i.width,i.height,_,S,i.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,C,i.width,i.height,0,_,S,i.data)}}}else{E=s.mipmaps,A&&M&&(E.length>0&&T++,n.texStorage2D(e.TEXTURE_CUBE_MAP,T,C,w[0].width,w[0].height));for(let t=0;t<6;t++)if(m){A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,w[t].width,w[t].height,_,S,w[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,C,w[t].width,w[t].height,0,_,S,w[t].data);for(let r=0;r<E.length;r++){const i=E[r].image[t].image;A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,i.width,i.height,_,S,i.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,C,i.width,i.height,0,_,S,i.data)}}else{A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,_,S,w[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,C,_,S,w[t]);for(let r=0;r<E.length;r++){const i=E[r];A?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,_,S,i.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,C,_,S,i.image[t])}}}v(s,N)&&x(e.TEXTURE_CUBE_MAP),u.__version=d.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}(l,t,s):n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture,e.TEXTURE0+s)},this.rebindTextures=function(t,n,i){const a=r.get(t);void 0!==n&&O(a.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==i&&I(t)},this.setupRenderTarget=function(t){const l=t.texture,c=r.get(t),d=r.get(l);t.addEventListener("dispose",N),!0!==t.isWebGLMultipleRenderTargets&&(void 0===d.__webglTexture&&(d.__webglTexture=e.createTexture()),d.__version=l.version,s.memory.textures++);const u=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,p=g(t)||o;if(u){c.__webglFramebuffer=[];for(let t=0;t<6;t++)if(o&&l.mipmaps&&l.mipmaps.length>0){c.__webglFramebuffer[t]=[];for(let n=0;n<l.mipmaps.length;n++)c.__webglFramebuffer[t][n]=e.createFramebuffer()}else c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(o&&l.mipmaps&&l.mipmaps.length>0){c.__webglFramebuffer=[];for(let t=0;t<l.mipmaps.length;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else c.__webglFramebuffer=e.createFramebuffer();if(h&&i.drawBuffers){const n=t.texture;for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),s.memory.textures++)}}if(o&&t.samples>0&&!1===L(t)){const r=h?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const i=r[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,c.__webglColorRenderbuffer[n]);const s=a.convert(i.format,i.colorSpace),o=a.convert(i.type),l=y(i.internalFormat,s,o,i.colorSpace,!0===t.isXRRenderTarget),d=D(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,d,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),R(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(u){n.bindTexture(e.TEXTURE_CUBE_MAP,d.__webglTexture),k(e.TEXTURE_CUBE_MAP,l,p);for(let n=0;n<6;n++)if(o&&l.mipmaps&&l.mipmaps.length>0)for(let r=0;r<l.mipmaps.length;r++)O(c.__webglFramebuffer[n][r],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r);else O(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);v(l,p)&&x(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(h){const i=t.texture;for(let a=0,s=i.length;a<s;a++){const s=i[a],o=r.get(s);n.bindTexture(e.TEXTURE_2D,o.__webglTexture),k(e.TEXTURE_2D,s,p),O(c.__webglFramebuffer,t,s,e.COLOR_ATTACHMENT0+a,e.TEXTURE_2D,0),v(s,p)&&x(e.TEXTURE_2D)}n.unbindTexture()}else{let r=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&o&&(r=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(r,d.__webglTexture),k(r,l,p),o&&l.mipmaps&&l.mipmaps.length>0)for(let n=0;n<l.mipmaps.length;n++)O(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,r,n);else O(c.__webglFramebuffer,t,l,e.COLOR_ATTACHMENT0,r,0);v(l,p)&&x(r),n.unbindTexture()}t.depthBuffer&&I(t)},this.updateRenderTargetMipmap=function(t){const i=g(t)||o,a=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let s=0,o=a.length;s<o;s++){const o=a[s];if(v(o,i)){const i=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=r.get(o).__webglTexture;n.bindTexture(i,a),x(i),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(o&&t.samples>0&&!1===L(t)){const i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,s=t.height;let o=e.COLOR_BUFFER_BIT;const l=[],d=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=r.get(t),h=!0===t.isWebGLMultipleRenderTargets;if(h)for(let t=0;t<i.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&l.push(d);const p=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===p&&(t.depthBuffer&&(o|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&(o|=e.STENCIL_BUFFER_BIT)),h&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer[n]),!0===p&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[d]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[d])),h){const t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,a,s,0,0,a,s,o,e.NEAREST),c&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),h)for(let t=0;t<i.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,u.__webglColorRenderbuffer[t]);const a=r.get(i[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,a,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=I,this.setupFrameBufferTexture=O,this.useMultisampledRTT=L}function Wke(e,t,n){const r=n.isWebGL2;return{convert:function(n,i=""){let a;const s=ESe.getTransfer(i);if(n===ANe)return e.UNSIGNED_BYTE;if(n===INe)return e.UNSIGNED_SHORT_4_4_4_4;if(n===DNe)return e.UNSIGNED_SHORT_5_5_5_1;if(n===MNe)return e.BYTE;if(n===ENe)return e.SHORT;if(n===kNe)return e.UNSIGNED_SHORT;if(n===TNe)return e.INT;if(n===PNe)return e.UNSIGNED_INT;if(n===ONe)return e.FLOAT;if(n===RNe)return r?e.HALF_FLOAT:(a=t.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===n)return e.ALPHA;if(n===BNe)return e.RGBA;if(1024===n)return e.LUMINANCE;if(1025===n)return e.LUMINANCE_ALPHA;if(n===FNe)return e.DEPTH_COMPONENT;if(n===UNe)return e.DEPTH_STENCIL;if(n===Z_e)return a=t.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(n===zNe)return e.RED;if(n===HNe)return e.RED_INTEGER;if(1030===n)return e.RG;if(n===VNe)return e.RG_INTEGER;if(n===GNe)return e.RGBA_INTEGER;if(n===WNe||n===KNe||n===qNe||n===XNe)if(s===B_e){if(a=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(n===WNe)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===KNe)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===qNe)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===XNe)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=t.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(n===WNe)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===KNe)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===qNe)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===XNe)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===$Ne||n===YNe||n===JNe||n===ZNe){if(a=t.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(n===$Ne)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===YNe)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===JNe)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===ZNe)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===QNe)return a=t.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===e_e||n===t_e){if(a=t.get("WEBGL_compressed_texture_etc"),null===a)return null;if(n===e_e)return s===B_e?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(n===t_e)return s===B_e?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(n===n_e||n===r_e||n===i_e||n===a_e||n===s_e||n===o_e||n===l_e||n===c_e||n===d_e||n===u_e||n===h_e||n===p_e||n===m_e||n===f_e){if(a=t.get("WEBGL_compressed_texture_astc"),null===a)return null;if(n===n_e)return s===B_e?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===r_e)return s===B_e?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===i_e)return s===B_e?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===a_e)return s===B_e?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===s_e)return s===B_e?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===o_e)return s===B_e?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===l_e)return s===B_e?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===c_e)return s===B_e?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===d_e)return s===B_e?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===u_e)return s===B_e?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===h_e)return s===B_e?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===p_e)return s===B_e?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===m_e)return s===B_e?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===f_e)return s===B_e?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===g_e||n===v_e||n===x_e){if(a=t.get("EXT_texture_compression_bptc"),null===a)return null;if(n===g_e)return s===B_e?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===v_e)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===x_e)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===n||n===y_e||n===b_e||n===w_e){if(a=t.get("EXT_texture_compression_rgtc"),null===a)return null;if(n===g_e)return a.COMPRESSED_RED_RGTC1_EXT;if(n===y_e)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===b_e)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===w_e)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===LNe?r?e.UNSIGNED_INT_24_8:(a=t.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}class Kke extends aMe{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class qke extends KCe{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Xke={type:"move"};class $ke{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new qke,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new qke,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new WSe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new WSe),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new qke,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new WSe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new WSe),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,a=null;const s=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){a=!0;for(const a of e.hand.values()){const e=t.getJointPose(a,n),r=this._getHandJoint(l,a);null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.matrixWorldNeedsUpdate=!0,r.jointRadius=e.radius),r.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],s=r.position.distanceTo(i.position),o=.02,c=.005;l.inputState.pinching&&s>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&s<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1));null!==s&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(Xke)))}return null!==s&&(s.visible=null!==r),null!==o&&(o.visible=null!==i),null!==l&&(l.visible=null!==a),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new qke;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Yke extends tSe{constructor(e,t){super();const n=this;let r=null,i=1,a=null,s="local-floor",o=1,l=null,c=null,d=null,u=null,h=null,p=null;const m=t.getContextAttributes();let f=null,g=null;const v=[],x=[],y=new fSe;let b=null;const w=new aMe;w.layers.enable(1),w.viewport=new FSe;const j=new aMe;j.layers.enable(2),j.viewport=new FSe;const N=[w,j],_=new Kke;_.layers.enable(1),_.layers.enable(2);let S=null,C=null;function A(e){const t=x.indexOf(e.inputSource);if(-1===t)return;const n=v[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||a),n.dispatchEvent({type:e.type,data:e.inputSource}))}function M(){r.removeEventListener("select",A),r.removeEventListener("selectstart",A),r.removeEventListener("selectend",A),r.removeEventListener("squeeze",A),r.removeEventListener("squeezestart",A),r.removeEventListener("squeezeend",A),r.removeEventListener("end",M),r.removeEventListener("inputsourceschange",E);for(let e=0;e<v.length;e++){const t=x[e];null!==t&&(x[e]=null,v[e].disconnect(t))}S=null,C=null,e.setRenderTarget(f),h=null,u=null,d=null,r=null,g=null,R.stop(),n.isPresenting=!1,e.setPixelRatio(b),e.setSize(y.width,y.height,!1),n.dispatchEvent({type:"sessionend"})}function E(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=x.indexOf(n);r>=0&&(x[r]=null,v[r].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=x.indexOf(n);if(-1===r){for(let e=0;e<v.length;e++){if(e>=x.length){x.push(n),r=e;break}if(null===x[e]){x[e]=n,r=e;break}}if(-1===r)break}const i=v[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=v[e];return void 0===t&&(t=new $ke,v[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=v[e];return void 0===t&&(t=new $ke,v[e]=t),t.getGripSpace()},this.getHand=function(e){let t=v[e];return void 0===t&&(t=new $ke,v[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,n.isPresenting},this.setReferenceSpaceType=function(e){s=e,n.isPresenting},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==u?u:h},this.getBinding=function(){return d},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(c){if(r=c,null!==r){if(f=e.getRenderTarget(),r.addEventListener("select",A),r.addEventListener("selectstart",A),r.addEventListener("selectend",A),r.addEventListener("squeeze",A),r.addEventListener("squeezestart",A),r.addEventListener("squeezeend",A),r.addEventListener("end",M),r.addEventListener("inputsourceschange",E),!0!==m.xrCompatible&&await t.makeXRCompatible(),b=e.getPixelRatio(),e.getSize(y),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:i};h=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),g=new zSe(h.framebufferWidth,h.framebufferHeight,{format:BNe,type:ANe,colorSpace:e.outputColorSpace,stencilBuffer:m.stencil})}else{let n=null,a=null,s=null;m.depth&&(s=m.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=m.stencil?UNe:FNe,a=m.stencil?LNe:PNe);const o={colorFormat:t.RGBA8,depthFormat:s,scaleFactor:i};d=new XRWebGLBinding(r,t),u=d.createProjectionLayer(o),r.updateRenderState({layers:[u]}),e.setPixelRatio(1),e.setSize(u.textureWidth,u.textureHeight,!1),g=new zSe(u.textureWidth,u.textureHeight,{format:BNe,type:ANe,depthTexture:new nEe(u.textureWidth,u.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:m.stencil,colorSpace:e.outputColorSpace,samples:m.antialias?4:0});e.properties.get(g).__ignoreDepthValues=u.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(o),l=null,a=await r.requestReferenceSpace(s),R.setContext(r),R.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};const k=new WSe,T=new WSe;function P(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;_.near=j.near=w.near=e.near,_.far=j.far=w.far=e.far,S===_.near&&C===_.far||(r.updateRenderState({depthNear:_.near,depthFar:_.far}),S=_.near,C=_.far);const t=e.parent,n=_.cameras;P(_,t);for(let r=0;r<n.length;r++)P(n[r],t);2===n.length?function(e,t,n){k.setFromMatrixPosition(t.matrixWorld),T.setFromMatrixPosition(n.matrixWorld);const r=k.distanceTo(T),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,s=i[14]/(i[10]-1),o=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],d=(i[8]-1)/i[0],u=(a[8]+1)/a[0],h=s*d,p=s*u,m=r/(-d+u),f=m*-d;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(f),e.translateZ(m),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=s+m,v=o+m,x=h-f,y=p+(r-f),b=l*o/v*g,w=c*o/v*g;e.projectionMatrix.makePerspective(x,y,b,w,g,v),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}(_,w,j):_.projectionMatrix.copy(w.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*aSe*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,_,t)},this.getCamera=function(){return _},this.getFoveation=function(){if(null!==u||null!==h)return o},this.setFoveation=function(e){o=e,null!==u&&(u.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)};let O=null;const R=new vMe;R.setAnimationLoop(function(t,r){if(c=r.getViewerPose(l||a),p=r,null!==c){const t=c.views;null!==h&&(e.setRenderTargetFramebuffer(g,h.framebuffer),e.setRenderTarget(g));let n=!1;t.length!==_.cameras.length&&(_.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r];let a=null;if(null!==h)a=h.getViewport(i);else{const t=d.getViewSubImage(u,i);a=t.viewport,0===r&&(e.setRenderTargetTextures(g,t.colorTexture,u.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(g))}let s=N[r];void 0===s&&(s=new aMe,s.layers.enable(r),s.viewport=new FSe,N[r]=s),s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(i.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(a.x,a.y,a.width,a.height),0===r&&(_.matrix.copy(s.matrix),_.matrix.decompose(_.position,_.quaternion,_.scale)),!0===n&&_.cameras.push(s)}}for(let e=0;e<v.length;e++){const t=x[e],n=v[e];null!==t&&void 0!==n&&n.update(t,r,l||a)}O&&O(t,r),r.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:r}),p=null}),this.setAnimationLoop=function(e){O=e},this.dispose=function(){}}}function Jke(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(r,i){r.opacity.value=i.opacity,i.color&&r.diffuse.value.copy(i.color),i.emissive&&r.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(r.map.value=i.map,n(i.map,r.mapTransform)),i.alphaMap&&(r.alphaMap.value=i.alphaMap,n(i.alphaMap,r.alphaMapTransform)),i.bumpMap&&(r.bumpMap.value=i.bumpMap,n(i.bumpMap,r.bumpMapTransform),r.bumpScale.value=i.bumpScale,1===i.side&&(r.bumpScale.value*=-1)),i.normalMap&&(r.normalMap.value=i.normalMap,n(i.normalMap,r.normalMapTransform),r.normalScale.value.copy(i.normalScale),1===i.side&&r.normalScale.value.negate()),i.displacementMap&&(r.displacementMap.value=i.displacementMap,n(i.displacementMap,r.displacementMapTransform),r.displacementScale.value=i.displacementScale,r.displacementBias.value=i.displacementBias),i.emissiveMap&&(r.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,r.emissiveMapTransform)),i.specularMap&&(r.specularMap.value=i.specularMap,n(i.specularMap,r.specularMapTransform)),i.alphaTest>0&&(r.alphaTest.value=i.alphaTest);const a=t.get(i).envMap;if(a&&(r.envMap.value=a,r.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,r.reflectivity.value=i.reflectivity,r.ior.value=i.ior,r.refractionRatio.value=i.refractionRatio),i.lightMap){r.lightMap.value=i.lightMap;const t=!0===e._useLegacyLights?Math.PI:1;r.lightMapIntensity.value=i.lightMapIntensity*t,n(i.lightMap,r.lightMapTransform)}i.aoMap&&(r.aoMap.value=i.aoMap,r.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,r.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,tMe(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,i,a,s,o){i.isMeshBasicMaterial||i.isMeshLambertMaterial?r(e,i):i.isMeshToonMaterial?(r(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,i)):i.isMeshPhongMaterial?(r(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,i)):i.isMeshStandardMaterial?(r(e,i),function(e,r){e.metalness.value=r.metalness,r.metalnessMap&&(e.metalnessMap.value=r.metalnessMap,n(r.metalnessMap,e.metalnessMapTransform));e.roughness.value=r.roughness,r.roughnessMap&&(e.roughnessMap.value=r.roughnessMap,n(r.roughnessMap,e.roughnessMapTransform));const i=t.get(r).envMap;i&&(e.envMapIntensity.value=r.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&function(e,t,r){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),1===t.side&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,i,o)):i.isMeshMatcapMaterial?(r(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,i)):i.isMeshDepthMaterial?r(e,i):i.isMeshDistanceMaterial?(r(e,i),function(e,n){const r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,i)):i.isMeshNormalMaterial?r(e,i):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,r,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*r,e.scale.value=.5*i,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i,a,s):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function Zke(e,t,n,r){let i={},a={},s=[];const o=n.isWebGL2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(e,t,n,r){const i=e.value,a=t+"_"+n;if(void 0===r[a])return r[a]="number"==typeof i||"boolean"==typeof i?i:i.clone(),!0;{const e=r[a];if("number"==typeof i||"boolean"==typeof i){if(e!==i)return r[a]=i,!0}else if(!1===e.equals(i))return e.copy(i),!0}return!1}function c(e){const t={boundary:0,storage:0};return"number"==typeof e||"boolean"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture,t}function d(t){const n=t.target;n.removeEventListener("dispose",d);const r=s.indexOf(n.__bindingPointIndex);s.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete a[n.id]}return{bind:function(e,t){const n=t.program;r.uniformBlockBinding(e,n)},update:function(n,u){let h=i[n.id];void 0===h&&(!function(e){const t=e.uniforms;let n=0;const r=16;for(let a=0,s=t.length;a<s;a++){const e=Array.isArray(t[a])?t[a]:[t[a]];for(let t=0,i=e.length;t<i;t++){const i=e[t],a=Array.isArray(i.value)?i.value:[i.value];for(let e=0,t=a.length;e<t;e++){const t=c(a[e]),s=n%r;0!==s&&r-s<t.boundary&&(n+=r-s),i.__data=new Float32Array(t.storage/Float32Array.BYTES_PER_ELEMENT),i.__offset=n,n+=t.storage}}}const i=n%r;i>0&&(n+=r-i);e.__size=n,e.__cache={}}(n),h=function(t){const n=function(){for(let e=0;e<o;e++)if(-1===s.indexOf(e))return s.push(e),e;return 0}();t.__bindingPointIndex=n;const r=e.createBuffer(),i=t.__size,a=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,i,a),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=h,n.addEventListener("dispose",d));const p=u.program;r.updateUBOMapping(n,p);const m=t.render.frame;a[n.id]!==m&&(!function(t){const n=i[t.id],r=t.uniforms,a=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let i=0,s=r.length;i<s;i++){const t=Array.isArray(r[i])?r[i]:[r[i]];for(let n=0,r=t.length;n<r;n++){const r=t[n];if(!0===l(r,i,n,a)){const t=r.__offset,n=Array.isArray(r.value)?r.value:[r.value];let i=0;for(let a=0;a<n.length;a++){const s=n[a],o=c(s);"number"==typeof s||"boolean"==typeof s?(r.__data[0]=s,e.bufferSubData(e.UNIFORM_BUFFER,t+i,r.__data)):s.isMatrix3?(r.__data[0]=s.elements[0],r.__data[1]=s.elements[1],r.__data[2]=s.elements[2],r.__data[3]=0,r.__data[4]=s.elements[3],r.__data[5]=s.elements[4],r.__data[6]=s.elements[5],r.__data[7]=0,r.__data[8]=s.elements[6],r.__data[9]=s.elements[7],r.__data[10]=s.elements[8],r.__data[11]=0):(s.toArray(r.__data,i),i+=o.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,r.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),a[n.id]=m)},dispose:function(){for(const t in i)e.deleteBuffer(i[t]);s=[],i={},a={}}}}class Qke{constructor(e={}){const{canvas:t=jSe(),context:n=null,depth:r=!0,stencil:i=!0,alpha:a=!1,antialias:s=!1,premultipliedAlpha:o=!0,preserveDrawingBuffer:l=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:d=!1}=e;let u;this.isWebGLRenderer=!0,u=null!==n?n.getContextAttributes().alpha:a;const h=new Uint32Array(4),p=new Int32Array(4);let m=null,f=null;const g=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=O_e,this._useLegacyLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const x=this;let y=!1,b=0,w=0,j=null,N=-1,_=null;const S=new FSe,C=new FSe;let A=null;const M=new cAe(0);let E=0,k=t.width,T=t.height,P=1,O=null,R=null;const I=new FSe(0,0,k,T),D=new FSe(0,0,k,T);let L=!1;const B=new gMe;let F=!1,U=!1,z=null;const H=new wCe,V=new fSe,G=new WSe,W={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function K(){return null===j?P:1}let q,X,$,Y,J,Z,Q,ee,te,ne,re,ie,ae,se,oe,le,ce,de,ue,he,pe,me,fe,ge,ve=n;function xe(e,n){for(let r=0;r<e.length;r++){const i=e[r],a=t.getContext(i,n);if(null!==a)return a}return null}try{const e={alpha:!0,depth:r,stencil:i,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Fje}`),t.addEventListener("webglcontextlost",we,!1),t.addEventListener("webglcontextrestored",je,!1),t.addEventListener("webglcontextcreationerror",Ne,!1),null===ve){const t=["webgl2","webgl","experimental-webgl"];if(!0===x.isWebGL1Renderer&&t.shift(),ve=xe(t,e),null===ve)throw xe(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}"undefined"!=typeof WebGLRenderingContext&&WebGLRenderingContext,void 0===ve.getShaderPrecisionFormat&&(ve.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Le){throw Le}function ye(){q=new XMe(ve),X=new AMe(ve,q,e),q.init(X),me=new Wke(ve,q,X),$=new Vke(ve,q,X),Y=new JMe(ve),J=new Eke,Z=new Gke(ve,q,$,J,X,me,Y),Q=new EMe(x),ee=new qMe(x),te=new xMe(ve,X),fe=new SMe(ve,q,te,X),ne=new $Me(ve,te,Y,fe),re=new tEe(ve,ne,te,Y),ue=new eEe(ve,X,Z),le=new MMe(J),ie=new Mke(x,Q,ee,q,X,fe,le),ae=new Jke(x,J),se=new Oke,oe=new Fke(q,X),de=new _Me(x,Q,ee,$,re,u,o),ce=new Hke(x,re,X),ge=new Zke(ve,Y,X,$),he=new CMe(ve,q,Y,X),pe=new YMe(ve,q,Y,X),Y.programs=ie.programs,x.capabilities=X,x.extensions=q,x.properties=J,x.renderLists=se,x.shadowMap=ce,x.state=$,x.info=Y}ye();const be=new Yke(x,ve);function we(e){e.preventDefault(),y=!0}function je(){y=!1;const e=Y.autoReset,t=ce.enabled,n=ce.autoUpdate,r=ce.needsUpdate,i=ce.type;ye(),Y.autoReset=e,ce.enabled=t,ce.autoUpdate=n,ce.needsUpdate=r,ce.type=i}function Ne(e){}function _e(e){const t=e.target;t.removeEventListener("dispose",_e),function(e){(function(e){const t=J.get(e).programs;void 0!==t&&(t.forEach(function(e){ie.releaseProgram(e)}),e.isShaderMaterial&&ie.releaseShaderCache(e))})(e),J.remove(e)}(t)}function Se(e,t,n){!0===e.transparent&&2===e.side&&!1===e.forceSinglePass?(e.side=1,e.needsUpdate=!0,Re(e,t,n),e.side=0,e.needsUpdate=!0,Re(e,t,n),e.side=2):Re(e,t,n)}this.xr=be,this.getContext=function(){return ve},this.getContextAttributes=function(){return ve.getContextAttributes()},this.forceContextLoss=function(){const e=q.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=q.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(e){void 0!==e&&(P=e,this.setSize(k,T,!1))},this.getSize=function(e){return e.set(k,T)},this.setSize=function(e,n,r=!0){be.isPresenting||(k=e,T=n,t.width=Math.floor(e*P),t.height=Math.floor(n*P),!0===r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(k*P,T*P).floor()},this.setDrawingBufferSize=function(e,n,r){k=e,T=n,P=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(S)},this.getViewport=function(e){return e.copy(I)},this.setViewport=function(e,t,n,r){e.isVector4?I.set(e.x,e.y,e.z,e.w):I.set(e,t,n,r),$.viewport(S.copy(I).multiplyScalar(P).floor())},this.getScissor=function(e){return e.copy(D)},this.setScissor=function(e,t,n,r){e.isVector4?D.set(e.x,e.y,e.z,e.w):D.set(e,t,n,r),$.scissor(C.copy(D).multiplyScalar(P).floor())},this.getScissorTest=function(){return L},this.setScissorTest=function(e){$.setScissorTest(L=e)},this.setOpaqueSort=function(e){O=e},this.setTransparentSort=function(e){R=e},this.getClearColor=function(e){return e.copy(de.getClearColor())},this.setClearColor=function(){de.setClearColor.apply(de,arguments)},this.getClearAlpha=function(){return de.getClearAlpha()},this.setClearAlpha=function(){de.setClearAlpha.apply(de,arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;if(e){let e=!1;if(null!==j){const t=j.texture.format;e=t===GNe||t===VNe||t===HNe}if(e){const e=j.texture.type,t=e===ANe||e===PNe||e===kNe||e===LNe||e===INe||e===DNe,n=de.getClearColor(),r=de.getClearAlpha(),i=n.r,a=n.g,s=n.b;t?(h[0]=i,h[1]=a,h[2]=s,h[3]=r,ve.clearBufferuiv(ve.COLOR,0,h)):(p[0]=i,p[1]=a,p[2]=s,p[3]=r,ve.clearBufferiv(ve.COLOR,0,p))}else r|=ve.COLOR_BUFFER_BIT}t&&(r|=ve.DEPTH_BUFFER_BIT),n&&(r|=ve.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ve.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",we,!1),t.removeEventListener("webglcontextrestored",je,!1),t.removeEventListener("webglcontextcreationerror",Ne,!1),se.dispose(),oe.dispose(),J.dispose(),Q.dispose(),ee.dispose(),re.dispose(),fe.dispose(),ge.dispose(),ie.dispose(),be.dispose(),be.removeEventListener("sessionstart",Ae),be.removeEventListener("sessionend",Me),z&&(z.dispose(),z=null),Ee.stop()},this.renderBufferDirect=function(e,t,n,r,i,a){null===t&&(t=W);const s=i.isMesh&&i.matrixWorld.determinant()<0,o=function(e,t,n,r,i){!0!==t.isScene&&(t=W);Z.resetTextureUnits();const a=t.fog,s=r.isMeshStandardMaterial?t.environment:null,o=null===j?x.outputColorSpace:!0===j.isXRRenderTarget?j.texture.colorSpace:R_e,l=(r.isMeshStandardMaterial?ee:Q).get(r.envMap||s),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,d=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),u=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,p=!!n.morphAttributes.color;let m=0;r.toneMapped&&(null!==j&&!0!==j.isXRRenderTarget||(m=x.toneMapping));const g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==g?g.length:0,y=J.get(r),b=f.state.lights;if(!0===F&&(!0===U||e!==_)){const t=e===_&&r.id===N;le.setState(r,e,t)}let w=!1;r.version===y.__version?y.needsLights&&y.lightsStateVersion!==b.state.version||y.outputColorSpace!==o||i.isBatchedMesh&&!1===y.batching?w=!0:i.isBatchedMesh||!0!==y.batching?i.isInstancedMesh&&!1===y.instancing?w=!0:i.isInstancedMesh||!0!==y.instancing?i.isSkinnedMesh&&!1===y.skinning?w=!0:i.isSkinnedMesh||!0!==y.skinning?i.isInstancedMesh&&!0===y.instancingColor&&null===i.instanceColor||i.isInstancedMesh&&!1===y.instancingColor&&null!==i.instanceColor||y.envMap!==l||!0===r.fog&&y.fog!==a?w=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===le.numPlanes&&y.numIntersection===le.numIntersection?(y.vertexAlphas!==c||y.vertexTangents!==d||y.morphTargets!==u||y.morphNormals!==h||y.morphColors!==p||y.toneMapping!==m||!0===X.isWebGL2&&y.morphTargetsCount!==v)&&(w=!0):w=!0:w=!0:w=!0:w=!0:(w=!0,y.__version=r.version);let S=y.currentProgram;!0===w&&(S=Re(r,t,i));let C=!1,A=!1,M=!1;const E=S.getUniforms(),k=y.uniforms;$.useProgram(S.program)&&(C=!0,A=!0,M=!0);r.id!==N&&(N=r.id,A=!0);if(C||_!==e){E.setValue(ve,"projectionMatrix",e.projectionMatrix),E.setValue(ve,"viewMatrix",e.matrixWorldInverse);const t=E.map.cameraPosition;void 0!==t&&t.setValue(ve,G.setFromMatrixPosition(e.matrixWorld)),X.logarithmicDepthBuffer&&E.setValue(ve,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&E.setValue(ve,"isOrthographic",!0===e.isOrthographicCamera),_!==e&&(_=e,A=!0,M=!0)}if(i.isSkinnedMesh){E.setOptional(ve,i,"bindMatrix"),E.setOptional(ve,i,"bindMatrixInverse");const e=i.skeleton;e&&X.floatVertexTextures&&(null===e.boneTexture&&e.computeBoneTexture(),E.setValue(ve,"boneTexture",e.boneTexture,Z))}i.isBatchedMesh&&(E.setOptional(ve,i,"batchingTexture"),E.setValue(ve,"batchingTexture",i._matricesTexture,Z));const O=n.morphAttributes;(void 0!==O.position||void 0!==O.normal||void 0!==O.color&&!0===X.isWebGL2)&&ue.update(i,n,S);(A||y.receiveShadow!==i.receiveShadow)&&(y.receiveShadow=i.receiveShadow,E.setValue(ve,"receiveShadow",i.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(k.envMap.value=l,k.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);A&&(E.setValue(ve,"toneMappingExposure",x.toneMappingExposure),y.needsLights&&(I=M,(R=k).ambientLightColor.needsUpdate=I,R.lightProbe.needsUpdate=I,R.directionalLights.needsUpdate=I,R.directionalLightShadows.needsUpdate=I,R.pointLights.needsUpdate=I,R.pointLightShadows.needsUpdate=I,R.spotLights.needsUpdate=I,R.spotLightShadows.needsUpdate=I,R.rectAreaLights.needsUpdate=I,R.hemisphereLights.needsUpdate=I),a&&!0===r.fog&&ae.refreshFogUniforms(k,a),ae.refreshMaterialUniforms(k,r,P,T,z),oke.upload(ve,Ie(y),k,Z));var R,I;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(oke.upload(ve,Ie(y),k,Z),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&E.setValue(ve,"center",i.center);if(E.setValue(ve,"modelViewMatrix",i.modelViewMatrix),E.setValue(ve,"normalMatrix",i.normalMatrix),E.setValue(ve,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(X.isWebGL2){const n=e[t];ge.update(n,S),ge.bind(n,S)}}return S}(e,t,n,r,i);$.setMaterial(r,s);let l=n.index,c=1;if(!0===r.wireframe){if(l=ne.getWireframeAttribute(n),void 0===l)return;c=2}const d=n.drawRange,u=n.attributes.position;let h=d.start*c,p=(d.start+d.count)*c;null!==a&&(h=Math.max(h,a.start*c),p=Math.min(p,(a.start+a.count)*c)),null!==l?(h=Math.max(h,0),p=Math.min(p,l.count)):null!=u&&(h=Math.max(h,0),p=Math.min(p,u.count));const m=p-h;if(m<0||m===1/0)return;let g;fe.setup(i,r,o,n,l);let v=he;if(null!==l&&(g=te.get(l),v=pe,v.setIndex(g)),i.isMesh)!0===r.wireframe?($.setLineWidth(r.wireframeLinewidth*K()),v.setMode(ve.LINES)):v.setMode(ve.TRIANGLES);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),$.setLineWidth(e*K()),i.isLineSegments?v.setMode(ve.LINES):i.isLineLoop?v.setMode(ve.LINE_LOOP):v.setMode(ve.LINE_STRIP)}else i.isPoints?v.setMode(ve.POINTS):i.isSprite&&v.setMode(ve.TRIANGLES);if(i.isBatchedMesh)v.renderMultiDraw(i._multiDrawStarts,i._multiDrawCounts,i._multiDrawCount);else if(i.isInstancedMesh)v.renderInstances(h,m,i.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);v.renderInstances(h,m,t)}else v.render(h,m)},this.compile=function(e,t,n=null){null===n&&(n=e),f=oe.get(n),f.init(),v.push(f),n.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(f.pushLight(e),e.castShadow&&f.pushShadow(e))}),e!==n&&e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(f.pushLight(e),e.castShadow&&f.pushShadow(e))}),f.setupLights(x._useLegacyLights);const r=new Set;return e.traverse(function(e){const t=e.material;if(t)if(Array.isArray(t))for(let i=0;i<t.length;i++){const a=t[i];Se(a,n,e),r.add(a)}else Se(t,n,e),r.add(t)}),v.pop(),f=null,r},this.compileAsync=function(e,t,n=null){const r=this.compile(e,t,n);return new Promise(t=>{function n(){r.forEach(function(e){J.get(e).currentProgram.isReady()&&r.delete(e)}),0!==r.size?setTimeout(n,10):t(e)}null!==q.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)})};let Ce=null;function Ae(){Ee.stop()}function Me(){Ee.start()}const Ee=new vMe;function ke(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)f.pushLight(e),e.castShadow&&f.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||B.intersectsSprite(e)){r&&G.setFromMatrixPosition(e.matrixWorld).applyMatrix4(H);const t=re.update(e),i=e.material;i.visible&&m.push(e,t,i,n,G.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||B.intersectsObject(e))){const t=re.update(e),i=e.material;if(r&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),G.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),G.copy(t.boundingSphere.center)),G.applyMatrix4(e.matrixWorld).applyMatrix4(H)),Array.isArray(i)){const r=t.groups;for(let a=0,s=r.length;a<s;a++){const s=r[a],o=i[s.materialIndex];o&&o.visible&&m.push(e,t,o,n,G.z,s)}}else i.visible&&m.push(e,t,i,n,G.z,null)}const i=e.children;for(let a=0,s=i.length;a<s;a++)ke(i[a],t,n,r)}function Te(e,t,n,r){const i=e.opaque,a=e.transmissive,s=e.transparent;f.setupLightsView(n),!0===F&&le.setGlobalState(x.clippingPlanes,n),a.length>0&&function(e,t,n,r){const i=!0===n.isScene?n.overrideMaterial:null;if(null!==i)return;const a=X.isWebGL2;null===z&&(z=new zSe(1,1,{generateMipmaps:!0,type:q.has("EXT_color_buffer_half_float")?RNe:ANe,minFilter:SNe,samples:a?4:0}));x.getDrawingBufferSize(V),a?z.setSize(V.x,V.y):z.setSize(uSe(V.x),uSe(V.y));const s=x.getRenderTarget();x.setRenderTarget(z),x.getClearColor(M),E=x.getClearAlpha(),E<1&&x.setClearColor(16777215,.5);x.clear();const o=x.toneMapping;x.toneMapping=0,Pe(e,n,r),Z.updateMultisampleRenderTarget(z),Z.updateRenderTargetMipmap(z);let l=!1;for(let c=0,d=t.length;c<d;c++){const e=t[c],i=e.object,a=e.geometry,s=e.material,o=e.group;if(2===s.side&&i.layers.test(r.layers)){const e=s.side;s.side=1,s.needsUpdate=!0,Oe(i,n,r,a,s,o),s.side=e,s.needsUpdate=!0,l=!0}}!0===l&&(Z.updateMultisampleRenderTarget(z),Z.updateRenderTargetMipmap(z));x.setRenderTarget(s),x.setClearColor(M,E),x.toneMapping=o}(i,a,t,n),r&&$.viewport(S.copy(r)),i.length>0&&Pe(i,t,n),a.length>0&&Pe(a,t,n),s.length>0&&Pe(s,t,n),$.buffers.depth.setTest(!0),$.buffers.depth.setMask(!0),$.buffers.color.setMask(!0),$.setPolygonOffset(!1)}function Pe(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,a=e.length;i<a;i++){const a=e[i],s=a.object,o=a.geometry,l=null===r?a.material:r,c=a.group;s.layers.test(n.layers)&&Oe(s,t,n,o,l,c)}}function Oe(e,t,n,r,i,a){e.onBeforeRender(x,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(x,t,n,r,e,a),!0===i.transparent&&2===i.side&&!1===i.forceSinglePass?(i.side=1,i.needsUpdate=!0,x.renderBufferDirect(n,t,r,i,e,a),i.side=0,i.needsUpdate=!0,x.renderBufferDirect(n,t,r,i,e,a),i.side=2):x.renderBufferDirect(n,t,r,i,e,a),e.onAfterRender(x,t,n,r,i,a)}function Re(e,t,n){!0!==t.isScene&&(t=W);const r=J.get(e),i=f.state.lights,a=f.state.shadowsArray,s=i.state.version,o=ie.getParameters(e,i.state,a,t,n),l=ie.getProgramCacheKey(o);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?ee:Q).get(e.envMap||r.environment),void 0===c&&(e.addEventListener("dispose",_e),c=new Map,r.programs=c);let d=c.get(l);if(void 0!==d){if(r.currentProgram===d&&r.lightsStateVersion===s)return De(e,o),d}else o.uniforms=ie.getUniforms(e),e.onBuild(n,o,x),e.onBeforeCompile(o,x),d=ie.acquireProgram(o,l),c.set(l,d),r.uniforms=o.uniforms;const u=r.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(u.clippingPlanes=le.uniform),De(e,o),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=s,r.needsLights&&(u.ambientLightColor.value=i.state.ambient,u.lightProbe.value=i.state.probe,u.directionalLights.value=i.state.directional,u.directionalLightShadows.value=i.state.directionalShadow,u.spotLights.value=i.state.spot,u.spotLightShadows.value=i.state.spotShadow,u.rectAreaLights.value=i.state.rectArea,u.ltc_1.value=i.state.rectAreaLTC1,u.ltc_2.value=i.state.rectAreaLTC2,u.pointLights.value=i.state.point,u.pointLightShadows.value=i.state.pointShadow,u.hemisphereLights.value=i.state.hemi,u.directionalShadowMap.value=i.state.directionalShadowMap,u.directionalShadowMatrix.value=i.state.directionalShadowMatrix,u.spotShadowMap.value=i.state.spotShadowMap,u.spotLightMatrix.value=i.state.spotLightMatrix,u.spotLightMap.value=i.state.spotLightMap,u.pointShadowMap.value=i.state.pointShadowMap,u.pointShadowMatrix.value=i.state.pointShadowMatrix),r.currentProgram=d,r.uniformsList=null,d}function Ie(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=oke.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function De(e,t){const n=J.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Ee.setAnimationLoop(function(e){Ce&&Ce(e)}),"undefined"!=typeof self&&Ee.setContext(self),this.setAnimationLoop=function(e){Ce=e,be.setAnimationLoop(e),null===e?Ee.stop():Ee.start()},be.addEventListener("sessionstart",Ae),be.addEventListener("sessionend",Me),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return;if(!0===y)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===be.enabled&&!0===be.isPresenting&&(!0===be.cameraAutoUpdate&&be.updateCamera(t),t=be.getCamera()),!0===e.isScene&&e.onBeforeRender(x,e,t,j),f=oe.get(e,v.length),f.init(),v.push(f),H.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),B.setFromProjectionMatrix(H),U=this.localClippingEnabled,F=le.init(this.clippingPlanes,U),m=se.get(e,g.length),m.init(),g.push(m),ke(e,t,0,x.sortObjects),m.finish(),!0===x.sortObjects&&m.sort(O,R),this.info.render.frame++,!0===F&&le.beginShadows();const n=f.state.shadowsArray;if(ce.render(n,e,t),!0===F&&le.endShadows(),!0===this.info.autoReset&&this.info.reset(),de.render(m,e),f.setupLights(x._useLegacyLights),t.isArrayCamera){const n=t.cameras;for(let t=0,r=n.length;t<r;t++){const r=n[t];Te(m,e,r,r.viewport)}}else Te(m,e,t);null!==j&&(Z.updateMultisampleRenderTarget(j),Z.updateRenderTargetMipmap(j)),!0===e.isScene&&e.onAfterRender(x,e,t),fe.resetDefaultState(),N=-1,_=null,v.pop(),f=v.length>0?v[v.length-1]:null,g.pop(),m=g.length>0?g[g.length-1]:null},this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return j},this.setRenderTargetTextures=function(e,t,n){J.get(e.texture).__webglTexture=t,J.get(e.depthTexture).__webglTexture=n;const r=J.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===q.has("WEBGL_multisampled_render_to_texture")&&(r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=J.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){j=e,b=t,w=n;let r=!0,i=null,a=!1,s=!1;if(e){const o=J.get(e);void 0!==o.__useDefaultFramebuffer?($.bindFramebuffer(ve.FRAMEBUFFER,null),r=!1):void 0===o.__webglFramebuffer?Z.setupRenderTarget(e):o.__hasExternalTextures&&Z.rebindTextures(e,J.get(e.texture).__webglTexture,J.get(e.depthTexture).__webglTexture);const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(s=!0);const c=J.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=Array.isArray(c[t])?c[t][n]:c[t],a=!0):i=X.isWebGL2&&e.samples>0&&!1===Z.useMultisampledRTT(e)?J.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,S.copy(e.viewport),C.copy(e.scissor),A=e.scissorTest}else S.copy(I).multiplyScalar(P).floor(),C.copy(D).multiplyScalar(P).floor(),A=L;if($.bindFramebuffer(ve.FRAMEBUFFER,i)&&X.drawBuffers&&r&&$.drawBuffers(e,i),$.viewport(S),$.scissor(C),$.setScissorTest(A),a){const r=J.get(e.texture);ve.framebufferTexture2D(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,n)}else if(s){const r=J.get(e.texture),i=t||0;ve.framebufferTextureLayer(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,r.__webglTexture,n||0,i)}N=-1},this.readRenderTargetPixels=function(e,t,n,r,i,a,s){if(!e||!e.isWebGLRenderTarget)return;let o=J.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(o=o[s]),o){$.bindFramebuffer(ve.FRAMEBUFFER,o);try{const s=e.texture,o=s.format,l=s.type;if(o!==BNe&&me.convert(o)!==ve.getParameter(ve.IMPLEMENTATION_COLOR_READ_FORMAT))return;const c=l===RNe&&(q.has("EXT_color_buffer_half_float")||X.isWebGL2&&q.has("EXT_color_buffer_float"));if(!(l===ANe||me.convert(l)===ve.getParameter(ve.IMPLEMENTATION_COLOR_READ_TYPE)||l===ONe&&(X.isWebGL2||q.has("OES_texture_float")||q.has("WEBGL_color_buffer_float"))||c))return;t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&ve.readPixels(t,n,r,i,me.convert(o),me.convert(l),a)}finally{const e=null!==j?J.get(j).__webglFramebuffer:null;$.bindFramebuffer(ve.FRAMEBUFFER,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),a=Math.floor(t.image.height*r);Z.setTexture2D(t,0),ve.copyTexSubImage2D(ve.TEXTURE_2D,n,0,0,e.x,e.y,i,a),$.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const i=t.image.width,a=t.image.height,s=me.convert(n.format),o=me.convert(n.type);Z.setTexture2D(n,0),ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,n.flipY),ve.pixelStorei(ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),ve.pixelStorei(ve.UNPACK_ALIGNMENT,n.unpackAlignment),t.isDataTexture?ve.texSubImage2D(ve.TEXTURE_2D,r,e.x,e.y,i,a,s,o,t.image.data):t.isCompressedTexture?ve.compressedTexSubImage2D(ve.TEXTURE_2D,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,s,t.mipmaps[0].data):ve.texSubImage2D(ve.TEXTURE_2D,r,e.x,e.y,s,o,t.image),0===r&&n.generateMipmaps&&ve.generateMipmap(ve.TEXTURE_2D),$.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,i=0){if(x.isWebGL1Renderer)return;const a=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,o=e.max.z-e.min.z+1,l=me.convert(r.format),c=me.convert(r.type);let d;if(r.isData3DTexture)Z.setTexture3D(r,0),d=ve.TEXTURE_3D;else{if(!r.isDataArrayTexture&&!r.isCompressedArrayTexture)return;Z.setTexture2DArray(r,0),d=ve.TEXTURE_2D_ARRAY}ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,r.flipY),ve.pixelStorei(ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),ve.pixelStorei(ve.UNPACK_ALIGNMENT,r.unpackAlignment);const u=ve.getParameter(ve.UNPACK_ROW_LENGTH),h=ve.getParameter(ve.UNPACK_IMAGE_HEIGHT),p=ve.getParameter(ve.UNPACK_SKIP_PIXELS),m=ve.getParameter(ve.UNPACK_SKIP_ROWS),f=ve.getParameter(ve.UNPACK_SKIP_IMAGES),g=n.isCompressedTexture?n.mipmaps[i]:n.image;ve.pixelStorei(ve.UNPACK_ROW_LENGTH,g.width),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,g.height),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,e.min.x),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,e.min.y),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,e.min.z),n.isDataTexture||n.isData3DTexture?ve.texSubImage3D(d,i,t.x,t.y,t.z,a,s,o,l,c,g.data):n.isCompressedArrayTexture?ve.compressedTexSubImage3D(d,i,t.x,t.y,t.z,a,s,o,l,g.data):ve.texSubImage3D(d,i,t.x,t.y,t.z,a,s,o,l,c,g),ve.pixelStorei(ve.UNPACK_ROW_LENGTH,u),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,h),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,p),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,m),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,f),0===i&&r.generateMipmaps&&ve.generateMipmap(d),$.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?Z.setTextureCube(e,0):e.isData3DTexture?Z.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?Z.setTexture2DArray(e,0):Z.setTexture2D(e,0),$.unbindTexture()},this.resetState=function(){b=0,w=0,j=null,$.reset(),fe.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Q_e}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===I_e?"display-p3":"srgb",t.unpackColorSpace=ESe.workingColorSpace===D_e?"display-p3":"srgb"}get outputEncoding(){return this.outputColorSpace===O_e?T_e:k_e}set outputEncoding(e){this.outputColorSpace=e===T_e?O_e:R_e}get useLegacyLights(){return this._useLegacyLights}set useLegacyLights(e){this._useLegacyLights=e}}class eTe extends Qke{}eTe.prototype.isWebGL1Renderer=!0;class tTe{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new cAe(e),this.density=t}clone(){return new tTe(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class nTe{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new cAe(e),this.near=t,this.far=n}clone(){return new nTe(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class rTe extends KCe{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class iTe{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Y_e,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=sSe()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=sSe()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=sSe()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const aTe=new WSe;class sTe{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)aTe.fromBufferAttribute(this,t),aTe.applyMatrix4(e),this.setXYZ(t,aTe.x,aTe.y,aTe.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)aTe.fromBufferAttribute(this,t),aTe.applyNormalMatrix(e),this.setXYZ(t,aTe.x,aTe.y,aTe.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)aTe.fromBufferAttribute(this,t),aTe.transformDirection(e),this.setXYZ(t,aTe.x,aTe.y,aTe.z);return this}setX(e,t){return this.normalized&&(t=pSe(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=pSe(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=pSe(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=pSe(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=hSe(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=hSe(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=hSe(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=hSe(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=pSe(t,this.array),n=pSe(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=pSe(t,this.array),n=pSe(n,this.array),r=pSe(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=pSe(t,this.array),n=pSe(n,this.array),r=pSe(r,this.array),i=pSe(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new wAe(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new sTe(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class oTe extends hAe{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new cAe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let lTe;const cTe=new WSe,dTe=new WSe,uTe=new WSe,hTe=new fSe,pTe=new fSe,mTe=new wCe,fTe=new WSe,gTe=new WSe,vTe=new WSe,xTe=new fSe,yTe=new fSe,bTe=new fSe;class wTe extends KCe{constructor(e=new oTe){if(super(),this.isSprite=!0,this.type="Sprite",void 0===lTe){lTe=new PAe;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new iTe(e,5);lTe.setIndex([0,1,2,0,2,3]),lTe.setAttribute("position",new sTe(t,3,0,!1)),lTe.setAttribute("uv",new sTe(t,2,3,!1))}this.geometry=lTe,this.material=e,this.center=new fSe(.5,.5)}raycast(e,t){e.camera,dTe.setFromMatrixScale(this.matrixWorld),mTe.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),uTe.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&dTe.multiplyScalar(-uTe.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const a=this.center;jTe(fTe.set(-.5,-.5,0),uTe,a,dTe,r,i),jTe(gTe.set(.5,-.5,0),uTe,a,dTe,r,i),jTe(vTe.set(.5,.5,0),uTe,a,dTe,r,i),xTe.set(0,0),yTe.set(1,0),bTe.set(1,1);let s=e.ray.intersectTriangle(fTe,gTe,vTe,!1,cTe);if(null===s&&(jTe(gTe.set(-.5,.5,0),uTe,a,dTe,r,i),yTe.set(0,1),s=e.ray.intersectTriangle(fTe,vTe,gTe,!1,cTe),null===s))return;const o=e.ray.origin.distanceTo(cTe);o<e.near||o>e.far||t.push({distance:o,point:cTe.clone(),uv:iAe.getInterpolation(cTe,fTe,gTe,vTe,xTe,yTe,bTe,new fSe),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function jTe(e,t,n,r,i,a){hTe.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(pTe.x=a*hTe.x-i*hTe.y,pTe.y=i*hTe.x+a*hTe.y):pTe.copy(hTe),e.copy(t),e.x+=pTe.x,e.y+=pTe.y,e.applyMatrix4(mTe)}const NTe=new WSe,_Te=new WSe;class STe extends KCe{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const e=t[n];this.addLevel(e.object.clone(),e.distance,e.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const r=this.levels;let i;for(i=0;i<r.length&&!(t<r[i].distance);i++);return r.splice(i,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){NTe.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(NTe);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){NTe.setFromMatrixPosition(e.matrixWorld),_Te.setFromMatrixPosition(this.matrixWorld);const n=NTe.distanceTo(_Te)/e.zoom;let r,i;for(t[0].object.visible=!0,r=1,i=t.length;r<i;r++){let e=t[r].distance;if(t[r].object.visible&&(e-=e*t[r].hysteresis),!(n>=e))break;t[r-1].object.visible=!1,t[r].object.visible=!0}for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,i=n.length;r<i;r++){const e=n[r];t.object.levels.push({object:e.object.uuid,distance:e.distance,hysteresis:e.hysteresis})}return t}}const CTe=new WSe,ATe=new FSe,MTe=new FSe,ETe=new WSe,kTe=new wCe,TTe=new WSe,PTe=new hCe,OTe=new wCe,RTe=new bCe;class ITe extends YAe{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=cNe,this.bindMatrix=new wCe,this.bindMatrixInverse=new wCe,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new XSe),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,TTe),this.boundingBox.expandByPoint(TTe)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new hCe),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,TTe),this.boundingSphere.expandByPoint(TTe)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),PTe.copy(this.boundingSphere),PTe.applyMatrix4(r),!1!==e.ray.intersectsSphere(PTe)&&(OTe.copy(r).invert(),RTe.copy(e.ray).applyMatrix4(OTe),null!==this.boundingBox&&!1===RTe.intersectsBox(this.boundingBox)||this._computeIntersections(e,t,RTe)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new FSe,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===cNe?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===dNe&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;ATe.fromBufferAttribute(r.attributes.skinIndex,e),MTe.fromBufferAttribute(r.attributes.skinWeight,e),CTe.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let i=0;i<4;i++){const e=MTe.getComponent(i);if(0!==e){const r=ATe.getComponent(i);kTe.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),t.addScaledVector(ETe.copy(CTe).applyMatrix4(kTe),e)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return this.applyBoneTransform(e,t)}}class DTe extends KCe{constructor(){super(),this.isBone=!0,this.type="Bone"}}class LTe extends BSe{constructor(e=null,t=1,n=1,r,i,a,s,o,l=1003,c=1003,d,u){super(null,a,s,o,l,c,r,i,d,u),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const BTe=new wCe,FTe=new wCe;class UTe{constructor(e=[],t=[]){this.uuid=sSe(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new wCe)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new wCe;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,a=e.length;i<a;i++){const r=e[i]?e[i].matrixWorld:FTe;BTe.multiplyMatrices(r,t[i]),BTe.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}clone(){return new UTe(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new LTe(t,e,e,BNe,ONe);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){let r=t[e.bones[n]];void 0===r&&(r=new DTe),this.bones.push(r),this.boneInverses.push((new wCe).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const a=n[r];e.boneInverses.push(a.toArray())}return e}}class zTe extends wAe{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const HTe=new wCe,VTe=new wCe,GTe=[],WTe=new XSe,KTe=new wCe,qTe=new YAe,XTe=new hCe;class $Te extends YAe{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new zTe(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,KTe)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new XSe),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,HTe),WTe.copy(e.boundingBox).applyMatrix4(HTe),this.boundingBox.union(WTe)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new hCe),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,HTe),XTe.copy(e.boundingSphere).applyMatrix4(HTe),this.boundingSphere.union(XTe)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(qTe.geometry=this.geometry,qTe.material=this.material,void 0!==qTe.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),XTe.copy(this.boundingSphere),XTe.applyMatrix4(n),!1!==e.ray.intersectsSphere(XTe)))for(let i=0;i<r;i++){this.getMatrixAt(i,HTe),VTe.multiplyMatrices(n,HTe),qTe.matrixWorld=VTe,qTe.raycast(e,GTe);for(let e=0,n=GTe.length;e<n;e++){const n=GTe[e];n.instanceId=i,n.object=this,t.push(n)}GTe.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new zTe(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function YTe(e,t){return e.z-t.z}function JTe(e,t){return t.z-e.z}class ZTe{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const n=this.pool,r=this.list;this.index>=n.length&&n.push({start:-1,count:-1,z:-1});const i=n[this.index];r.push(i),this.index++,i.start=e.start,i.count=e.count,i.z=t}reset(){this.list.length=0,this.index=0}}const QTe="batchId",ePe=new wCe,tPe=new wCe,nPe=new wCe,rPe=new wCe,iPe=new gMe,aPe=new XSe,sPe=new hCe,oPe=new WSe,lPe=new ZTe,cPe=new YAe,dPe=[];function uPe(e,t,n=0){const r=t.itemSize;if(e.isInterleavedBufferAttribute||e.array.constructor!==t.array.constructor){const i=e.count;for(let a=0;a<i;a++)for(let i=0;i<r;i++)t.setComponent(a+n,i,e.getComponent(a,i))}else t.array.set(e.array,n*r);t.needsUpdate=!0}class hPe extends YAe{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,n=2*t,r){super(new PAe,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(4*this._maxGeometryCount);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new LTe(t,e,e,BNe,ONe);this._matricesTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,r=this._maxGeometryCount,i=this._maxIndexCount;if(!1===this._geometryInitialized){for(const r in e.attributes){const i=e.getAttribute(r),{array:a,itemSize:s,normalized:o}=i,l=new a.constructor(n*s),c=new i.constructor(l,s,o);c.setUsage(i.usage),t.setAttribute(r,c)}if(null!==e.getIndex()){const e=n>65536?new Uint32Array(i):new Uint16Array(i);t.setIndex(new wAe(e,1))}const a=r>65536?new Uint32Array(n):new Uint16Array(n);t.setAttribute(QTe,new wAe(a,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(QTe))throw new Error(`BatchedMesh: Geometry cannot use attribute "${QTe}"`);const t=this.geometry;if(Boolean(e.getIndex())!==Boolean(t.getIndex()))throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(n===QTe)continue;if(!e.hasAttribute(n))throw new Error(`BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const r=e.getAttribute(n),i=t.getAttribute(n);if(r.itemSize!==i.itemSize||r.normalized!==i.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new XSe);const e=this._geometryCount,t=this.boundingBox,n=this._active;t.makeEmpty();for(let r=0;r<e;r++)!1!==n[r]&&(this.getMatrixAt(r,ePe),this.getBoundingBoxAt(r,aPe).applyMatrix4(ePe),t.union(aPe))}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new hCe);const e=this._geometryCount,t=this.boundingSphere,n=this._active;t.makeEmpty();for(let r=0;r<e;r++)!1!==n[r]&&(this.getMatrixAt(r,ePe),this.getBoundingSphereAt(r,sPe).applyMatrix4(ePe),t.union(sPe))}addGeometry(e,t=-1,n=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let i=null;const a=this._reservedRanges,s=this._drawRanges,o=this._bounds;0!==this._geometryCount&&(i=a[a.length-1]),r.vertexCount=-1===t?e.getAttribute("position").count:t,r.vertexStart=null===i?0:i.vertexStart+i.vertexCount;const l=e.getIndex(),c=null!==l;if(c&&(r.indexCount=-1===n?l.count:n,r.indexStart=null===i?0:i.indexStart+i.indexCount),-1!==r.indexStart&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const d=this._visibility,u=this._active,h=this._matricesTexture,p=this._matricesTexture.image.data;d.push(!0),u.push(!0);const m=this._geometryCount;this._geometryCount++,nPe.toArray(p,16*m),h.needsUpdate=!0,a.push(r),s.push({start:c?r.indexStart:r.vertexStart,count:-1}),o.push({boxInitialized:!1,box:new XSe,sphereInitialized:!1,sphere:new hCe});const f=this.geometry.getAttribute(QTe);for(let g=0;g<r.vertexCount;g++)f.setX(r.vertexStart+g,m);return f.needsUpdate=!0,this.setGeometryAt(m,e),m}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,r=null!==n.getIndex(),i=n.getIndex(),a=t.getIndex(),s=this._reservedRanges[e];if(r&&a.count>s.indexCount||t.attributes.position.count>s.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const o=s.vertexStart,l=s.vertexCount;for(const h in n.attributes){if(h===QTe)continue;const e=t.getAttribute(h),r=n.getAttribute(h);uPe(e,r,o);const i=e.itemSize;for(let t=e.count,n=l;t<n;t++){const e=o+t;for(let t=0;t<i;t++)r.setComponent(e,t,0)}r.needsUpdate=!0}if(r){const e=s.indexStart;for(let t=0;t<a.count;t++)i.setX(e+t,o+a.getX(t));for(let t=a.count,n=s.indexCount;t<n;t++)i.setX(e+t,o);i.needsUpdate=!0}const c=this._bounds[e];null!==t.boundingBox?(c.box.copy(t.boundingBox),c.boxInitialized=!0):c.boxInitialized=!1,null!==t.boundingSphere?(c.sphere.copy(t.boundingSphere),c.sphereInitialized=!0):c.sphereInitialized=!1;const d=this._drawRanges[e],u=t.getAttribute("position");return d.count=r?a.count:u.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||!1===t[e]||(t[e]=!1,this._visibilityChanged=!0),this}getBoundingBoxAt(e,t){if(!1===this._active[e])return this;const n=this._bounds[e],r=n.box,i=this.geometry;if(!1===n.boxInitialized){r.makeEmpty();const t=i.index,a=i.attributes.position,s=this._drawRanges[e];for(let e=s.start,n=s.start+s.count;e<n;e++){let n=e;t&&(n=t.getX(n)),r.expandByPoint(oPe.fromBufferAttribute(a,n))}n.boxInitialized=!0}return t.copy(r),t}getBoundingSphereAt(e,t){if(!1===this._active[e])return this;const n=this._bounds[e],r=n.sphere,i=this.geometry;if(!1===n.sphereInitialized){r.makeEmpty(),this.getBoundingBoxAt(e,aPe),aPe.getCenter(r.center);const t=i.index,a=i.attributes.position,s=this._drawRanges[e];let o=0;for(let e=s.start,n=s.start+s.count;e<n;e++){let n=e;t&&(n=t.getX(n)),oPe.fromBufferAttribute(a,n),o=Math.max(o,r.center.distanceToSquared(oPe))}r.radius=Math.sqrt(o),n.sphereInitialized=!0}return t.copy(r),t}setMatrixAt(e,t){const n=this._active,r=this._matricesTexture,i=this._matricesTexture.image.data;return e>=this._geometryCount||!1===n[e]||(t.toArray(i,16*e),r.needsUpdate=!0),this}getMatrixAt(e,t){const n=this._active,r=this._matricesTexture.image.data;return e>=this._geometryCount||!1===n[e]?null:t.fromArray(r,16*e)}setVisibleAt(e,t){const n=this._visibility,r=this._active;return e>=this._geometryCount||!1===r[e]||n[e]===t||(n[e]=t,this._visibilityChanged=!0),this}getVisibleAt(e){const t=this._visibility,n=this._active;return!(e>=this._geometryCount||!1===n[e])&&t[e]}raycast(e,t){const n=this._visibility,r=this._active,i=this._drawRanges,a=this._geometryCount,s=this.matrixWorld,o=this.geometry;cPe.material=this.material,cPe.geometry.index=o.index,cPe.geometry.attributes=o.attributes,null===cPe.geometry.boundingBox&&(cPe.geometry.boundingBox=new XSe),null===cPe.geometry.boundingSphere&&(cPe.geometry.boundingSphere=new hCe);for(let l=0;l<a;l++){if(!n[l]||!r[l])continue;const a=i[l];cPe.geometry.setDrawRange(a.start,a.count),this.getMatrixAt(l,cPe.matrixWorld).premultiply(s),this.getBoundingBoxAt(l,cPe.geometry.boundingBox),this.getBoundingSphereAt(l,cPe.geometry.boundingSphere),cPe.raycast(e,dPe);for(let e=0,n=dPe.length;e<n;e++){const n=dPe[e];n.object=this,n.batchId=l,t.push(n)}dPe.length=0}cPe.material=null,cPe.geometry.index=null,cPe.geometry.attributes={},cPe.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=null!==e.boundingBox?e.boundingBox.clone():null,this.boundingSphere=null!==e.boundingSphere?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(e=>({...e})),this._reservedRanges=e._reservedRanges.map(e=>({...e})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(e=>({boxInitialized:e.boxInitialized,box:e.box.clone(),sphereInitialized:e.sphereInitialized,sphere:e.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,n,r,i){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=r.getIndex(),s=null===a?1:a.array.BYTES_PER_ELEMENT,o=this._visibility,l=this._multiDrawStarts,c=this._multiDrawCounts,d=this._drawRanges,u=this.perObjectFrustumCulled;u&&(rPe.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),iPe.setFromProjectionMatrix(rPe,e.isWebGPURenderer?eSe:Q_e));let h=0;if(this.sortObjects){tPe.copy(this.matrixWorld).invert(),oPe.setFromMatrixPosition(n.matrixWorld).applyMatrix4(tPe);for(let n=0,r=o.length;n<r;n++)if(o[n]){this.getMatrixAt(n,ePe),this.getBoundingSphereAt(n,sPe).applyMatrix4(ePe);let e=!1;if(u&&(e=!iPe.intersectsSphere(sPe)),!e){const e=oPe.distanceTo(sPe.center);lPe.push(d[n],e)}}const e=lPe.list,t=this.customSort;null===t?e.sort(i.transparent?JTe:YTe):t.call(this,e,n);for(let n=0,r=e.length;n<r;n++){const t=e[n];l[h]=t.start*s,c[h]=t.count,h++}lPe.reset()}else for(let p=0,m=o.length;p<m;p++)if(o[p]){let e=!1;if(u&&(this.getMatrixAt(p,ePe),this.getBoundingSphereAt(p,sPe).applyMatrix4(ePe),e=!iPe.intersectsSphere(sPe)),!e){const e=d[p];l[h]=e.start*s,c[h]=e.count,h++}}this._multiDrawCount=h,this._visibilityChanged=!1}onBeforeShadow(e,t,n,r,i,a){this.onBeforeRender(e,null,r,i,a)}}class pPe extends hAe{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new cAe(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const mPe=new WSe,fPe=new WSe,gPe=new wCe,vPe=new bCe,xPe=new hCe;class yPe extends KCe{constructor(e=new PAe,t=new pPe){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)mPe.fromBufferAttribute(t,e-1),fPe.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=mPe.distanceTo(fPe);e.setAttribute("lineDistance",new _Ae(n,1))}return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),xPe.copy(n.boundingSphere),xPe.applyMatrix4(r),xPe.radius+=i,!1===e.ray.intersectsSphere(xPe))return;gPe.copy(r).invert(),vPe.copy(e.ray).applyMatrix4(gPe);const s=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=new WSe,c=new WSe,d=new WSe,u=new WSe,h=this.isLineSegments?2:1,p=n.index,m=n.attributes.position;if(null!==p){for(let n=Math.max(0,a.start),r=Math.min(p.count,a.start+a.count)-1;n<r;n+=h){const r=p.getX(n),i=p.getX(n+1);l.fromBufferAttribute(m,r),c.fromBufferAttribute(m,i);if(vPe.distanceSqToSegment(l,c,u,d)>o)continue;u.applyMatrix4(this.matrixWorld);const a=e.ray.origin.distanceTo(u);a<e.near||a>e.far||t.push({distance:a,point:d.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,a.start),r=Math.min(m.count,a.start+a.count)-1;n<r;n+=h){l.fromBufferAttribute(m,n),c.fromBufferAttribute(m,n+1);if(vPe.distanceSqToSegment(l,c,u,d)>o)continue;u.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(u);r<e.near||r>e.far||t.push({distance:r,point:d.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}const bPe=new WSe,wPe=new WSe;class jPe extends yPe{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)bPe.fromBufferAttribute(t,e),wPe.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+bPe.distanceTo(wPe);e.setAttribute("lineDistance",new _Ae(n,1))}return this}}class NPe extends yPe{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class _Pe extends hAe{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new cAe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const SPe=new wCe,CPe=new bCe,APe=new hCe,MPe=new WSe;class EPe extends KCe{constructor(e=new PAe,t=new _Pe){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),APe.copy(n.boundingSphere),APe.applyMatrix4(r),APe.radius+=i,!1===e.ray.intersectsSphere(APe))return;SPe.copy(r).invert(),CPe.copy(e.ray).applyMatrix4(SPe);const s=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=n.index,c=n.attributes.position;if(null!==l){for(let n=Math.max(0,a.start),i=Math.min(l.count,a.start+a.count);n<i;n++){const i=l.getX(n);MPe.fromBufferAttribute(c,i),kPe(MPe,i,o,r,e,t,this)}}else{for(let n=Math.max(0,a.start),i=Math.min(c.count,a.start+a.count);n<i;n++)MPe.fromBufferAttribute(c,n),kPe(MPe,n,o,r,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function kPe(e,t,n,r,i,a,s){const o=CPe.distanceSqToPoint(e);if(o<n){const n=new WSe;CPe.closestPointToPoint(e,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(o),point:n,index:t,face:null,object:s})}}class TPe extends BSe{constructor(e,t,n,r,i,a,s,o,l,c,d,u){super(null,a,s,o,l,c,r,i,d,u),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class PPe{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const i=n.length;let a;a=t||e*n[i-1];let s,o=0,l=i-1;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),s=n[r]-a,s<0)o=r+1;else{if(!(s>0)){l=r;break}l=r-1}if(r=l,n[r]===a)return r/(i-1);const c=n[r];return(r+(a-c)/(n[r+1]-c))/(i-1)}getTangent(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const a=this.getPoint(r),s=this.getPoint(i),o=t||(a.isVector2?new fSe:new WSe);return o.copy(s).sub(a).normalize(),o}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new WSe,r=[],i=[],a=[],s=new WSe,o=new wCe;for(let h=0;h<=e;h++){const t=h/e;r[h]=this.getTangentAt(t,new WSe)}i[0]=new WSe,a[0]=new WSe;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),d=Math.abs(r[0].y),u=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),d<=l&&(l=d,n.set(0,1,0)),u<=l&&n.set(0,0,1),s.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],s),a[0].crossVectors(r[0],i[0]);for(let h=1;h<=e;h++){if(i[h]=i[h-1].clone(),a[h]=a[h-1].clone(),s.crossVectors(r[h-1],r[h]),s.length()>Number.EPSILON){s.normalize();const e=Math.acos(oSe(r[h-1].dot(r[h]),-1,1));i[h].applyMatrix4(o.makeRotationAxis(s,e))}a[h].crossVectors(r[h],i[h])}if(!0===t){let t=Math.acos(oSe(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(s.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(o.makeRotationAxis(r[n],t*n)),a[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:a}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class OPe extends PPe{constructor(e=0,t=0,n=1,r=1,i=0,a=2*Math.PI,s=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=a,this.aClockwise=s,this.aRotation=o}getPoint(e,t){const n=t||new fSe,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const a=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);const s=this.aStartAngle+e*i;let o=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=o-this.aX,r=l-this.aY;o=n*e-r*t+this.aX,l=n*t+r*e+this.aY}return n.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class RPe extends OPe{constructor(e,t,n,r,i,a){super(e,t,n,n,r,i,a),this.isArcCurve=!0,this.type="ArcCurve"}}function IPe(){let e=0,t=0,n=0,r=0;function i(i,a,s,o){e=i,t=s,n=-3*i+3*a-2*s-o,r=2*i-2*a+s+o}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,s,o){let l=(t-e)/a-(n-e)/(a+s)+(n-t)/s,c=(n-t)/s-(r-t)/(s+o)+(r-n)/o;l*=s,c*=s,i(t,n,l,c)},calc:function(i){const a=i*i;return e+t*i+n*a+r*(a*i)}}}const DPe=new WSe,LPe=new IPe,BPe=new IPe,FPe=new IPe;class UPe extends PPe{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new WSe){const n=t,r=this.points,i=r.length,a=(i-(this.closed?0:1))*e;let s,o,l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/i)+1)*i:0===c&&l===i-1&&(l=i-2,c=1),this.closed||l>0?s=r[(l-1)%i]:(DPe.subVectors(r[0],r[1]).add(r[0]),s=DPe);const d=r[l%i],u=r[(l+1)%i];if(this.closed||l+2<i?o=r[(l+2)%i]:(DPe.subVectors(r[i-1],r[i-2]).add(r[i-1]),o=DPe),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(s.distanceToSquared(d),e),n=Math.pow(d.distanceToSquared(u),e),r=Math.pow(u.distanceToSquared(o),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),LPe.initNonuniformCatmullRom(s.x,d.x,u.x,o.x,t,n,r),BPe.initNonuniformCatmullRom(s.y,d.y,u.y,o.y,t,n,r),FPe.initNonuniformCatmullRom(s.z,d.z,u.z,o.z,t,n,r)}else"catmullrom"===this.curveType&&(LPe.initCatmullRom(s.x,d.x,u.x,o.x,this.tension),BPe.initCatmullRom(s.y,d.y,u.y,o.y,this.tension),FPe.initCatmullRom(s.z,d.z,u.z,o.z,this.tension));return n.set(LPe.calc(c),BPe.calc(c),FPe.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new WSe).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function zPe(e,t,n,r,i){const a=.5*(r-t),s=.5*(i-n),o=e*e;return(2*n-2*r+a+s)*(e*o)+(-3*n+3*r-2*a-s)*o+a*e+n}function HPe(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function VPe(e,t,n,r,i){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}class GPe extends PPe{constructor(e=new fSe,t=new fSe,n=new fSe,r=new fSe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new fSe){const n=t,r=this.v0,i=this.v1,a=this.v2,s=this.v3;return n.set(VPe(e,r.x,i.x,a.x,s.x),VPe(e,r.y,i.y,a.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class WPe extends PPe{constructor(e=new WSe,t=new WSe,n=new WSe,r=new WSe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new WSe){const n=t,r=this.v0,i=this.v1,a=this.v2,s=this.v3;return n.set(VPe(e,r.x,i.x,a.x,s.x),VPe(e,r.y,i.y,a.y,s.y),VPe(e,r.z,i.z,a.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class KPe extends PPe{constructor(e=new fSe,t=new fSe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new fSe){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new fSe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class qPe extends PPe{constructor(e=new WSe,t=new WSe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new WSe){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new WSe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class XPe extends PPe{constructor(e=new fSe,t=new fSe,n=new fSe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new fSe){const n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(HPe(e,r.x,i.x,a.x),HPe(e,r.y,i.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $Pe extends PPe{constructor(e=new WSe,t=new WSe,n=new WSe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new WSe){const n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(HPe(e,r.x,i.x,a.x),HPe(e,r.y,i.y,a.y),HPe(e,r.z,i.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class YPe extends PPe{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new fSe){const n=t,r=this.points,i=(r.length-1)*e,a=Math.floor(i),s=i-a,o=r[0===a?a:a-1],l=r[a],c=r[a>r.length-2?r.length-1:a+1],d=r[a>r.length-3?r.length-1:a+2];return n.set(zPe(s,o.x,l.x,c.x,d.x),zPe(s,o.y,l.y,c.y,d.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new fSe).fromArray(n))}return this}}var JPe=Object.freeze({__proto__:null,ArcCurve:RPe,CatmullRomCurve3:UPe,CubicBezierCurve:GPe,CubicBezierCurve3:WPe,EllipseCurve:OPe,LineCurve:KPe,LineCurve3:qPe,QuadraticBezierCurve:XPe,QuadraticBezierCurve3:$Pe,SplineCurve:YPe});class ZPe extends PPe{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new JPe[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=n){const e=r[i]-n,a=this.curves[i],s=a.getLength(),o=0===s?0:1-e/s;return a.getPointAt(o,t)}i++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const a=i[r],s=a.isEllipseCurve?2*e:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,o=a.getPoints(s);for(let e=0;e<o.length;e++){const r=o[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new JPe[n.type]).fromJSON(n))}return this}}class QPe extends ZPe{constructor(e){super(),this.type="Path",this.currentPoint=new fSe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new KPe(this.currentPoint.clone(),new fSe(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new XPe(this.currentPoint.clone(),new fSe(e,t),new fSe(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,a){const s=new GPe(this.currentPoint.clone(),new fSe(e,t),new fSe(n,r),new fSe(i,a));return this.curves.push(s),this.currentPoint.set(i,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new YPe(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,a){const s=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+s,t+o,n,r,i,a),this}absarc(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this}ellipse(e,t,n,r,i,a,s,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,i,a,s,o),this}absellipse(e,t,n,r,i,a,s,o){const l=new OPe(e,t,n,r,i,a,s,o);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class eOe extends PAe{constructor(e=[new fSe(0,-.5),new fSe(.5,0),new fSe(0,.5)],t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=oSe(r,0,2*Math.PI);const i=[],a=[],s=[],o=[],l=[],c=1/t,d=new WSe,u=new fSe,h=new WSe,p=new WSe,m=new WSe;let f=0,g=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:f=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,h.x=1*g,h.y=-f,h.z=0*g,m.copy(h),h.normalize(),o.push(h.x,h.y,h.z);break;case e.length-1:o.push(m.x,m.y,m.z);break;default:f=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,h.x=1*g,h.y=-f,h.z=0*g,p.copy(h),h.x+=m.x,h.y+=m.y,h.z+=m.z,h.normalize(),o.push(h.x,h.y,h.z),m.copy(p)}for(let v=0;v<=t;v++){const i=n+v*c*r,h=Math.sin(i),p=Math.cos(i);for(let n=0;n<=e.length-1;n++){d.x=e[n].x*h,d.y=e[n].y,d.z=e[n].x*p,a.push(d.x,d.y,d.z),u.x=v/t,u.y=n/(e.length-1),s.push(u.x,u.y);const r=o[3*n+0]*h,i=o[3*n+1],c=o[3*n+0]*p;l.push(r,i,c)}}for(let v=0;v<t;v++)for(let t=0;t<e.length-1;t++){const n=t+v*e.length,r=n,a=n+e.length,s=n+e.length+1,o=n+1;i.push(r,a,o),i.push(s,o,a)}this.setIndex(i),this.setAttribute("position",new _Ae(a,3)),this.setAttribute("uv",new _Ae(s,2)),this.setAttribute("normal",new _Ae(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new eOe(e.points,e.segments,e.phiStart,e.phiLength)}}class tOe extends eOe{constructor(e=1,t=1,n=4,r=8){const i=new QPe;i.absarc(0,-t/2,e,1.5*Math.PI,0),i.absarc(0,t/2,e,0,.5*Math.PI),super(i.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new tOe(e.radius,e.length,e.capSegments,e.radialSegments)}}class nOe extends PAe{constructor(e=1,t=32,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const i=[],a=[],s=[],o=[],l=new WSe,c=new fSe;a.push(0,0,0),s.push(0,0,1),o.push(.5,.5);for(let d=0,u=3;d<=t;d++,u+=3){const i=n+d/t*r;l.x=e*Math.cos(i),l.y=e*Math.sin(i),a.push(l.x,l.y,l.z),s.push(0,0,1),c.x=(a[u]/e+1)/2,c.y=(a[u+1]/e+1)/2,o.push(c.x,c.y)}for(let d=1;d<=t;d++)i.push(d,d+1,0);this.setIndex(i),this.setAttribute("position",new _Ae(a,3)),this.setAttribute("normal",new _Ae(s,3)),this.setAttribute("uv",new _Ae(o,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nOe(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class rOe extends PAe{constructor(e=1,t=1,n=1,r=32,i=1,a=!1,s=0,o=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:o};const l=this;r=Math.floor(r),i=Math.floor(i);const c=[],d=[],u=[],h=[];let p=0;const m=[],f=n/2;let g=0;function v(n){const i=p,a=new fSe,m=new WSe;let v=0;const x=!0===n?e:t,y=!0===n?1:-1;for(let e=1;e<=r;e++)d.push(0,f*y,0),u.push(0,y,0),h.push(.5,.5),p++;const b=p;for(let e=0;e<=r;e++){const t=e/r*o+s,n=Math.cos(t),i=Math.sin(t);m.x=x*i,m.y=f*y,m.z=x*n,d.push(m.x,m.y,m.z),u.push(0,y,0),a.x=.5*n+.5,a.y=.5*i*y+.5,h.push(a.x,a.y),p++}for(let e=0;e<r;e++){const t=i+e,r=b+e;!0===n?c.push(r,r+1,t):c.push(r+1,r,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}!function(){const a=new WSe,v=new WSe;let x=0;const y=(t-e)/n;for(let l=0;l<=i;l++){const c=[],g=l/i,x=g*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,i=t*o+s,l=Math.sin(i),m=Math.cos(i);v.x=x*l,v.y=-g*n+f,v.z=x*m,d.push(v.x,v.y,v.z),a.set(l,y,m).normalize(),u.push(a.x,a.y,a.z),h.push(t,1-g),c.push(p++)}m.push(c)}for(let e=0;e<r;e++)for(let t=0;t<i;t++){const n=m[t][e],r=m[t+1][e],i=m[t+1][e+1],a=m[t][e+1];c.push(n,r,a),c.push(r,i,a),x+=6}l.addGroup(g,x,0),g+=x}(),!1===a&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new _Ae(d,3)),this.setAttribute("normal",new _Ae(u,3)),this.setAttribute("uv",new _Ae(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rOe(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class iOe extends rOe{constructor(e=1,t=1,n=32,r=1,i=!1,a=0,s=2*Math.PI){super(0,e,t,n,r,i,a,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:s}}static fromJSON(e){return new iOe(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class aOe extends PAe{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const i=[],a=[];function s(e,t,n,r){const i=r+1,a=[];for(let s=0;s<=i;s++){a[s]=[];const r=e.clone().lerp(n,s/i),o=t.clone().lerp(n,s/i),l=i-s;for(let e=0;e<=l;e++)a[s][e]=0===e&&s===i?r:r.clone().lerp(o,e/l)}for(let s=0;s<i;s++)for(let e=0;e<2*(i-s)-1;e++){const t=Math.floor(e/2);e%2==0?(o(a[s][t+1]),o(a[s+1][t]),o(a[s][t])):(o(a[s][t+1]),o(a[s+1][t+1]),o(a[s+1][t]))}}function o(e){i.push(e.x,e.y,e.z)}function l(t,n){const r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function c(e,t,n,r){r<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=r/2/Math.PI+.5)}function d(e){return Math.atan2(e.z,-e.x)}function u(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}!function(e){const n=new WSe,r=new WSe,i=new WSe;for(let a=0;a<t.length;a+=3)l(t[a+0],n),l(t[a+1],r),l(t[a+2],i),s(n,r,i,e)}(r),function(e){const t=new WSe;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){const e=new WSe;for(let t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];const n=d(e)/2/Math.PI+.5,r=u(e)/Math.PI+.5;a.push(n,1-r)}(function(){const e=new WSe,t=new WSe,n=new WSe,r=new WSe,s=new fSe,o=new fSe,l=new fSe;for(let u=0,h=0;u<i.length;u+=9,h+=6){e.set(i[u+0],i[u+1],i[u+2]),t.set(i[u+3],i[u+4],i[u+5]),n.set(i[u+6],i[u+7],i[u+8]),s.set(a[h+0],a[h+1]),o.set(a[h+2],a[h+3]),l.set(a[h+4],a[h+5]),r.copy(e).add(t).add(n).divideScalar(3);const p=d(r);c(s,h+0,e,p),c(o,h+2,t,p),c(l,h+4,n,p)}})(),function(){for(let e=0;e<a.length;e+=6){const t=a[e+0],n=a[e+2],r=a[e+4],i=Math.max(t,n,r),s=Math.min(t,n,r);i>.9&&s<.1&&(t<.2&&(a[e+0]+=1),n<.2&&(a[e+2]+=1),r<.2&&(a[e+4]+=1))}}()}(),this.setAttribute("position",new _Ae(i,3)),this.setAttribute("normal",new _Ae(i.slice(),3)),this.setAttribute("uv",new _Ae(a,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new aOe(e.vertices,e.indices,e.radius,e.details)}}class sOe extends aOe{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new sOe(e.radius,e.detail)}}const oOe=new WSe,lOe=new WSe,cOe=new WSe,dOe=new iAe;class uOe extends PAe{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,r=Math.pow(10,n),i=Math.cos(iSe*t),a=e.getIndex(),s=e.getAttribute("position"),o=a?a.count:s.count,l=[0,0,0],c=["a","b","c"],d=new Array(3),u={},h=[];for(let e=0;e<o;e+=3){a?(l[0]=a.getX(e),l[1]=a.getX(e+1),l[2]=a.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:o}=dOe;if(t.fromBufferAttribute(s,l[0]),n.fromBufferAttribute(s,l[1]),o.fromBufferAttribute(s,l[2]),dOe.getNormal(cOe),d[0]=`${Math.round(t.x*r)},${Math.round(t.y*r)},${Math.round(t.z*r)}`,d[1]=`${Math.round(n.x*r)},${Math.round(n.y*r)},${Math.round(n.z*r)}`,d[2]=`${Math.round(o.x*r)},${Math.round(o.y*r)},${Math.round(o.z*r)}`,d[0]!==d[1]&&d[1]!==d[2]&&d[2]!==d[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=d[e],r=d[t],a=dOe[c[e]],s=dOe[c[t]],o=`${n}_${r}`,p=`${r}_${n}`;p in u&&u[p]?(cOe.dot(u[p].normal)<=i&&(h.push(a.x,a.y,a.z),h.push(s.x,s.y,s.z)),u[p]=null):o in u||(u[o]={index0:l[e],index1:l[t],normal:cOe.clone()})}}for(const e in u)if(u[e]){const{index0:t,index1:n}=u[e];oOe.fromBufferAttribute(s,t),lOe.fromBufferAttribute(s,n),h.push(oOe.x,oOe.y,oOe.z),h.push(lOe.x,lOe.y,lOe.z)}this.setAttribute("position",new _Ae(h,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class hOe extends QPe{constructor(e){super(e),this.uuid=sSe(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new QPe).fromJSON(n))}return this}}const pOe=function(e,t,n=2){const r=t&&t.length,i=r?t[0]*n:e.length;let a=mOe(e,0,i,n,!0);const s=[];if(!a||a.next===a.prev)return s;let o,l,c,d,u,h,p;if(r&&(a=function(e,t,n,r){const i=[];let a,s,o,l,c;for(a=0,s=t.length;a<s;a++)o=t[a]*r,l=a<s-1?t[a+1]*r:e.length,c=mOe(e,o,l,r,!1),c===c.next&&(c.steiner=!0),i.push(SOe(c));for(i.sort(wOe),a=0;a<i.length;a++)n=jOe(i[a],n);return n}(e,t,a,n)),e.length>80*n){o=c=e[0],l=d=e[1];for(let t=n;t<i;t+=n)u=e[t],h=e[t+1],u<o&&(o=u),h<l&&(l=h),u>c&&(c=u),h>d&&(d=h);p=Math.max(c-o,d-l),p=0!==p?32767/p:0}return gOe(a,s,n,o,l,p,0),s};function mOe(e,t,n,r,i){let a,s;if(i===function(e,t,n,r){let i=0;for(let a=t,s=n-r;a<n;a+=r)i+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)s=IOe(a,e[a],e[a+1],s);else for(a=n-r;a>=t;a-=r)s=IOe(a,e[a],e[a+1],s);return s&&EOe(s,s.next)&&(DOe(s),s=s.next),s}function fOe(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!EOe(r,r.next)&&0!==MOe(r.prev,r,r.next))r=r.next;else{if(DOe(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function gOe(e,t,n,r,i,a,s){if(!e)return;!s&&a&&function(e,t,n,r){let i=e;do{0===i.z&&(i.z=_Oe(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,a,s,o,l,c=1;do{for(n=e,e=null,a=null,s=0;n;){for(s++,r=n,o=0,t=0;t<c&&(o++,r=r.nextZ,r);t++);for(l=c;o>0||l>0&&r;)0!==o&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,o--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,c*=2}while(s>1)}(i)}(e,r,i,a);let o,l,c=e;for(;e.prev!==e.next;)if(o=e.prev,l=e.next,a?xOe(e,r,i,a):vOe(e))t.push(o.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),DOe(e),e=l.next,c=l.next;else if((e=l)===c){s?1===s?gOe(e=yOe(fOe(e),t,n),t,n,r,i,a,2):2===s&&bOe(e,t,n,r,i,a):gOe(fOe(e),t,n,r,i,a,1);break}}function vOe(e){const t=e.prev,n=e,r=e.next;if(MOe(t,n,r)>=0)return!1;const i=t.x,a=n.x,s=r.x,o=t.y,l=n.y,c=r.y,d=i<a?i<s?i:s:a<s?a:s,u=o<l?o<c?o:c:l<c?l:c,h=i>a?i>s?i:s:a>s?a:s,p=o>l?o>c?o:c:l>c?l:c;let m=r.next;for(;m!==t;){if(m.x>=d&&m.x<=h&&m.y>=u&&m.y<=p&&COe(i,o,a,l,s,c,m.x,m.y)&&MOe(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function xOe(e,t,n,r){const i=e.prev,a=e,s=e.next;if(MOe(i,a,s)>=0)return!1;const o=i.x,l=a.x,c=s.x,d=i.y,u=a.y,h=s.y,p=o<l?o<c?o:c:l<c?l:c,m=d<u?d<h?d:h:u<h?u:h,f=o>l?o>c?o:c:l>c?l:c,g=d>u?d>h?d:h:u>h?u:h,v=_Oe(p,m,t,n,r),x=_Oe(f,g,t,n,r);let y=e.prevZ,b=e.nextZ;for(;y&&y.z>=v&&b&&b.z<=x;){if(y.x>=p&&y.x<=f&&y.y>=m&&y.y<=g&&y!==i&&y!==s&&COe(o,d,l,u,c,h,y.x,y.y)&&MOe(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,b.x>=p&&b.x<=f&&b.y>=m&&b.y<=g&&b!==i&&b!==s&&COe(o,d,l,u,c,h,b.x,b.y)&&MOe(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;y&&y.z>=v;){if(y.x>=p&&y.x<=f&&y.y>=m&&y.y<=g&&y!==i&&y!==s&&COe(o,d,l,u,c,h,y.x,y.y)&&MOe(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;b&&b.z<=x;){if(b.x>=p&&b.x<=f&&b.y>=m&&b.y<=g&&b!==i&&b!==s&&COe(o,d,l,u,c,h,b.x,b.y)&&MOe(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function yOe(e,t,n){let r=e;do{const i=r.prev,a=r.next.next;!EOe(i,a)&&kOe(i,r,r.next,a)&&OOe(i,a)&&OOe(a,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(a.i/n|0),DOe(r),DOe(r.next),r=e=a),r=r.next}while(r!==e);return fOe(r)}function bOe(e,t,n,r,i,a){let s=e;do{let e=s.next.next;for(;e!==s.prev;){if(s.i!==e.i&&AOe(s,e)){let o=ROe(s,e);return s=fOe(s,s.next),o=fOe(o,o.next),gOe(s,t,n,r,i,a,0),void gOe(o,t,n,r,i,a,0)}e=e.next}s=s.next}while(s!==e)}function wOe(e,t){return e.x-t.x}function jOe(e,t){const n=function(e,t){let n,r=t,i=-1/0;const a=e.x,s=e.y;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){const e=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(e<=a&&e>i&&(i=e,n=r.x<r.next.x?r:r.next,e===a))return n}r=r.next}while(r!==t);if(!n)return null;const o=n,l=n.x,c=n.y;let d,u=1/0;r=n;do{a>=r.x&&r.x>=l&&a!==r.x&&COe(s<c?a:i,s,l,c,s<c?i:a,s,r.x,r.y)&&(d=Math.abs(s-r.y)/(a-r.x),OOe(r,e)&&(d<u||d===u&&(r.x>n.x||r.x===n.x&&NOe(n,r)))&&(n=r,u=d)),r=r.next}while(r!==o);return n}(e,t);if(!n)return t;const r=ROe(n,e);return fOe(r,r.next),fOe(n,n.next)}function NOe(e,t){return MOe(e.prev,e,t.prev)<0&&MOe(t.next,e,e.next)<0}function _Oe(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function SOe(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function COe(e,t,n,r,i,a,s,o){return(i-s)*(t-o)>=(e-s)*(a-o)&&(e-s)*(r-o)>=(n-s)*(t-o)&&(n-s)*(a-o)>=(i-s)*(r-o)}function AOe(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&kOe(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(OOe(e,t)&&OOe(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(MOe(e.prev,e,t.prev)||MOe(e,t.prev,t))||EOe(e,t)&&MOe(e.prev,e,e.next)>0&&MOe(t.prev,t,t.next)>0)}function MOe(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function EOe(e,t){return e.x===t.x&&e.y===t.y}function kOe(e,t,n,r){const i=POe(MOe(e,t,n)),a=POe(MOe(e,t,r)),s=POe(MOe(n,r,e)),o=POe(MOe(n,r,t));return i!==a&&s!==o||(!(0!==i||!TOe(e,n,t))||(!(0!==a||!TOe(e,r,t))||(!(0!==s||!TOe(n,e,r))||!(0!==o||!TOe(n,t,r)))))}function TOe(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function POe(e){return e>0?1:e<0?-1:0}function OOe(e,t){return MOe(e.prev,e,e.next)<0?MOe(e,t,e.next)>=0&&MOe(e,e.prev,t)>=0:MOe(e,t,e.prev)<0||MOe(e,e.next,t)<0}function ROe(e,t){const n=new LOe(e.i,e.x,e.y),r=new LOe(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function IOe(e,t,n,r){const i=new LOe(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function DOe(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function LOe(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class BOe{static area(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return BOe.area(e)<0}static triangulateShape(e,t){const n=[],r=[],i=[];FOe(e),UOe(n,e);let a=e.length;t.forEach(FOe);for(let o=0;o<t.length;o++)r.push(a),a+=t[o].length,UOe(n,t[o]);const s=pOe(n,r);for(let o=0;o<s.length;o+=3)i.push(s.slice(o,o+3));return i}}function FOe(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function UOe(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class zOe extends PAe{constructor(e=new hOe([new fSe(.5,.5),new fSe(-.5,.5),new fSe(-.5,-.5),new fSe(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let s=0,o=e.length;s<o;s++){a(e[s])}function a(e){const a=[],s=void 0!==t.curveSegments?t.curveSegments:12,o=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let c=void 0===t.bevelEnabled||t.bevelEnabled,d=void 0!==t.bevelThickness?t.bevelThickness:.2,u=void 0!==t.bevelSize?t.bevelSize:d-.1,h=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const m=t.extrudePath,f=void 0!==t.UVGenerator?t.UVGenerator:HOe;let g,v,x,y,b,w=!1;m&&(g=m.getSpacedPoints(o),w=!0,c=!1,v=m.computeFrenetFrames(o,!1),x=new WSe,y=new WSe,b=new WSe),c||(p=0,d=0,u=0,h=0);const j=e.extractPoints(s);let N=j.shape;const _=j.holes;if(!BOe.isClockWise(N)){N=N.reverse();for(let e=0,t=_.length;e<t;e++){const t=_[e];BOe.isClockWise(t)&&(_[e]=t.reverse())}}const S=BOe.triangulateShape(N,_),C=N;for(let t=0,n=_.length;t<n;t++){const e=_[t];N=N.concat(e)}function A(e,t,n){return e.clone().addScaledVector(t,n)}const M=N.length,E=S.length;function k(e,t,n){let r,i,a;const s=e.x-t.x,o=e.y-t.y,l=n.x-e.x,c=n.y-e.y,d=s*s+o*o,u=s*c-o*l;if(Math.abs(u)>Number.EPSILON){const u=Math.sqrt(d),h=Math.sqrt(l*l+c*c),p=t.x-o/u,m=t.y+s/u,f=((n.x-c/h-p)*c-(n.y+l/h-m)*l)/(s*c-o*l);r=p+s*f-e.x,i=m+o*f-e.y;const g=r*r+i*i;if(g<=2)return new fSe(r,i);a=Math.sqrt(g/2)}else{let e=!1;s>Number.EPSILON?l>Number.EPSILON&&(e=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(c)&&(e=!0),e?(r=-o,i=s,a=Math.sqrt(d)):(r=s,i=o,a=Math.sqrt(d/2))}return new fSe(r/a,i/a)}const T=[];for(let t=0,n=C.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),T[t]=k(C[t],C[r],C[i]);const P=[];let O,R=T.concat();for(let t=0,n=_.length;t<n;t++){const e=_[t];O=[];for(let t=0,n=e.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),O[t]=k(e[t],e[r],e[i]);P.push(O),R=R.concat(O)}for(let t=0;t<p;t++){const e=t/p,n=d*Math.cos(e*Math.PI/2),r=u*Math.sin(e*Math.PI/2)+h;for(let t=0,i=C.length;t<i;t++){const e=A(C[t],T[t],r);L(e.x,e.y,-n)}for(let t=0,i=_.length;t<i;t++){const e=_[t];O=P[t];for(let t=0,i=e.length;t<i;t++){const i=A(e[t],O[t],r);L(i.x,i.y,-n)}}}const I=u+h;for(let t=0;t<M;t++){const e=c?A(N[t],R[t],I):N[t];w?(y.copy(v.normals[0]).multiplyScalar(e.x),x.copy(v.binormals[0]).multiplyScalar(e.y),b.copy(g[0]).add(y).add(x),L(b.x,b.y,b.z)):L(e.x,e.y,0)}for(let t=1;t<=o;t++)for(let e=0;e<M;e++){const n=c?A(N[e],R[e],I):N[e];w?(y.copy(v.normals[t]).multiplyScalar(n.x),x.copy(v.binormals[t]).multiplyScalar(n.y),b.copy(g[t]).add(y).add(x),L(b.x,b.y,b.z)):L(n.x,n.y,l/o*t)}for(let t=p-1;t>=0;t--){const e=t/p,n=d*Math.cos(e*Math.PI/2),r=u*Math.sin(e*Math.PI/2)+h;for(let t=0,i=C.length;t<i;t++){const e=A(C[t],T[t],r);L(e.x,e.y,l+n)}for(let t=0,i=_.length;t<i;t++){const e=_[t];O=P[t];for(let t=0,i=e.length;t<i;t++){const i=A(e[t],O[t],r);w?L(i.x,i.y+g[o-1].y,g[o-1].x+n):L(i.x,i.y,l+n)}}}function D(e,t){let n=e.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=o+2*p;e<n;e++){const n=M*e,a=M*(e+1);F(t+r+n,t+i+n,t+i+a,t+r+a)}}}function L(e,t,n){a.push(e),a.push(t),a.push(n)}function B(e,t,i){U(e),U(t),U(i);const a=r.length/3,s=f.generateTopUV(n,r,a-3,a-2,a-1);z(s[0]),z(s[1]),z(s[2])}function F(e,t,i,a){U(e),U(t),U(a),U(t),U(i),U(a);const s=r.length/3,o=f.generateSideWallUV(n,r,s-6,s-3,s-2,s-1);z(o[0]),z(o[1]),z(o[3]),z(o[1]),z(o[2]),z(o[3])}function U(e){r.push(a[3*e+0]),r.push(a[3*e+1]),r.push(a[3*e+2])}function z(e){i.push(e.x),i.push(e.y)}!function(){const e=r.length/3;if(c){let e=0,t=M*e;for(let n=0;n<E;n++){const e=S[n];B(e[2]+t,e[1]+t,e[0]+t)}e=o+2*p,t=M*e;for(let n=0;n<E;n++){const e=S[n];B(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<E;e++){const t=S[e];B(t[2],t[1],t[0])}for(let e=0;e<E;e++){const t=S[e];B(t[0]+M*o,t[1]+M*o,t[2]+M*o)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;D(C,t),t+=C.length;for(let n=0,r=_.length;n<r;n++){const e=_[n];D(e,t),t+=e.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new _Ae(r,3)),this.setAttribute("uv",new _Ae(i,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let r=0,i=e.length;r<i;r++){const t=e[r];n.shapes.push(t.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let i=0,a=e.shapes.length;i<a;i++){const r=t[e.shapes[i]];n.push(r)}const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new JPe[r.type]).fromJSON(r)),new zOe(n,e.options)}}const HOe={generateTopUV:function(e,t,n,r,i){const a=t[3*n],s=t[3*n+1],o=t[3*r],l=t[3*r+1],c=t[3*i],d=t[3*i+1];return[new fSe(a,s),new fSe(o,l),new fSe(c,d)]},generateSideWallUV:function(e,t,n,r,i,a){const s=t[3*n],o=t[3*n+1],l=t[3*n+2],c=t[3*r],d=t[3*r+1],u=t[3*r+2],h=t[3*i],p=t[3*i+1],m=t[3*i+2],f=t[3*a],g=t[3*a+1],v=t[3*a+2];return Math.abs(o-d)<Math.abs(s-c)?[new fSe(s,1-l),new fSe(c,1-u),new fSe(h,1-m),new fSe(f,1-v)]:[new fSe(o,1-l),new fSe(d,1-u),new fSe(p,1-m),new fSe(g,1-v)]}};class VOe extends aOe{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new VOe(e.radius,e.detail)}}class GOe extends aOe{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new GOe(e.radius,e.detail)}}class WOe extends PAe{constructor(e=.5,t=1,n=32,r=1,i=0,a=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},n=Math.max(3,n);const s=[],o=[],l=[],c=[];let d=e;const u=(t-e)/(r=Math.max(1,r)),h=new WSe,p=new fSe;for(let m=0;m<=r;m++){for(let e=0;e<=n;e++){const r=i+e/n*a;h.x=d*Math.cos(r),h.y=d*Math.sin(r),o.push(h.x,h.y,h.z),l.push(0,0,1),p.x=(h.x/t+1)/2,p.y=(h.y/t+1)/2,c.push(p.x,p.y)}d+=u}for(let m=0;m<r;m++){const e=m*(n+1);for(let t=0;t<n;t++){const r=t+e,i=r,a=r+n+1,o=r+n+2,l=r+1;s.push(i,a,l),s.push(a,o,l)}}this.setIndex(s),this.setAttribute("position",new _Ae(o,3)),this.setAttribute("normal",new _Ae(l,3)),this.setAttribute("uv",new _Ae(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new WOe(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class KOe extends PAe{constructor(e=new hOe([new fSe(0,.5),new fSe(-.5,-.5),new fSe(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],a=[];let s=0,o=0;if(!1===Array.isArray(e))l(e);else for(let c=0;c<e.length;c++)l(e[c]),this.addGroup(s,o,c),s+=o,o=0;function l(e){const s=r.length/3,l=e.extractPoints(t);let c=l.shape;const d=l.holes;!1===BOe.isClockWise(c)&&(c=c.reverse());for(let t=0,n=d.length;t<n;t++){const e=d[t];!0===BOe.isClockWise(e)&&(d[t]=e.reverse())}const u=BOe.triangulateShape(c,d);for(let t=0,n=d.length;t<n;t++){const e=d[t];c=c.concat(e)}for(let t=0,n=c.length;t<n;t++){const e=c[t];r.push(e.x,e.y,0),i.push(0,0,1),a.push(e.x,e.y)}for(let t=0,r=u.length;t<r;t++){const e=u[t],r=e[0]+s,i=e[1]+s,a=e[2]+s;n.push(r,i,a),o+=3}}this.setIndex(n),this.setAttribute("position",new _Ae(r,3)),this.setAttribute("normal",new _Ae(i,3)),this.setAttribute("uv",new _Ae(a,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}return new KOe(n,e.curveSegments)}}class qOe extends PAe{constructor(e=1,t=32,n=16,r=0,i=2*Math.PI,a=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:s},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const o=Math.min(a+s,Math.PI);let l=0;const c=[],d=new WSe,u=new WSe,h=[],p=[],m=[],f=[];for(let g=0;g<=n;g++){const h=[],v=g/n;let x=0;0===g&&0===a?x=.5/t:g===n&&o===Math.PI&&(x=-.5/t);for(let n=0;n<=t;n++){const o=n/t;d.x=-e*Math.cos(r+o*i)*Math.sin(a+v*s),d.y=e*Math.cos(a+v*s),d.z=e*Math.sin(r+o*i)*Math.sin(a+v*s),p.push(d.x,d.y,d.z),u.copy(d).normalize(),m.push(u.x,u.y,u.z),f.push(o+x,1-v),h.push(l++)}c.push(h)}for(let g=0;g<n;g++)for(let e=0;e<t;e++){const t=c[g][e+1],r=c[g][e],i=c[g+1][e],s=c[g+1][e+1];(0!==g||a>0)&&h.push(t,r,s),(g!==n-1||o<Math.PI)&&h.push(r,i,s)}this.setIndex(h),this.setAttribute("position",new _Ae(p,3)),this.setAttribute("normal",new _Ae(m,3)),this.setAttribute("uv",new _Ae(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qOe(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class XOe extends aOe{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new XOe(e.radius,e.detail)}}class $Oe extends PAe{constructor(e=1,t=.4,n=12,r=48,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const a=[],s=[],o=[],l=[],c=new WSe,d=new WSe,u=new WSe;for(let h=0;h<=n;h++)for(let a=0;a<=r;a++){const p=a/r*i,m=h/n*Math.PI*2;d.x=(e+t*Math.cos(m))*Math.cos(p),d.y=(e+t*Math.cos(m))*Math.sin(p),d.z=t*Math.sin(m),s.push(d.x,d.y,d.z),c.x=e*Math.cos(p),c.y=e*Math.sin(p),u.subVectors(d,c).normalize(),o.push(u.x,u.y,u.z),l.push(a/r),l.push(h/n)}for(let h=1;h<=n;h++)for(let e=1;e<=r;e++){const t=(r+1)*h+e-1,n=(r+1)*(h-1)+e-1,i=(r+1)*(h-1)+e,s=(r+1)*h+e;a.push(t,n,s),a.push(n,i,s)}this.setIndex(a),this.setAttribute("position",new _Ae(s,3)),this.setAttribute("normal",new _Ae(o,3)),this.setAttribute("uv",new _Ae(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $Oe(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class YOe extends PAe{constructor(e=1,t=.4,n=64,r=8,i=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},n=Math.floor(n),r=Math.floor(r);const s=[],o=[],l=[],c=[],d=new WSe,u=new WSe,h=new WSe,p=new WSe,m=new WSe,f=new WSe,g=new WSe;for(let x=0;x<=n;++x){const s=x/n*i*Math.PI*2;v(s,i,a,e,h),v(s+.01,i,a,e,p),f.subVectors(p,h),g.addVectors(p,h),m.crossVectors(f,g),g.crossVectors(m,f),m.normalize(),g.normalize();for(let e=0;e<=r;++e){const i=e/r*Math.PI*2,a=-t*Math.cos(i),s=t*Math.sin(i);d.x=h.x+(a*g.x+s*m.x),d.y=h.y+(a*g.y+s*m.y),d.z=h.z+(a*g.z+s*m.z),o.push(d.x,d.y,d.z),u.subVectors(d,h).normalize(),l.push(u.x,u.y,u.z),c.push(x/n),c.push(e/r)}}for(let x=1;x<=n;x++)for(let e=1;e<=r;e++){const t=(r+1)*(x-1)+(e-1),n=(r+1)*x+(e-1),i=(r+1)*x+e,a=(r+1)*(x-1)+e;s.push(t,n,a),s.push(n,i,a)}function v(e,t,n,r,i){const a=Math.cos(e),s=Math.sin(e),o=n/t*e,l=Math.cos(o);i.x=r*(2+l)*.5*a,i.y=r*(2+l)*s*.5,i.z=r*Math.sin(o)*.5}this.setIndex(s),this.setAttribute("position",new _Ae(o,3)),this.setAttribute("normal",new _Ae(l,3)),this.setAttribute("uv",new _Ae(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new YOe(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class JOe extends PAe{constructor(e=new $Pe(new WSe(-1,-1,0),new WSe(-1,1,0),new WSe(1,1,0)),t=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};const a=e.computeFrenetFrames(t,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const s=new WSe,o=new WSe,l=new fSe;let c=new WSe;const d=[],u=[],h=[],p=[];function m(i){c=e.getPointAt(i/t,c);const l=a.normals[i],h=a.binormals[i];for(let e=0;e<=r;e++){const t=e/r*Math.PI*2,i=Math.sin(t),a=-Math.cos(t);o.x=a*l.x+i*h.x,o.y=a*l.y+i*h.y,o.z=a*l.z+i*h.z,o.normalize(),u.push(o.x,o.y,o.z),s.x=c.x+n*o.x,s.y=c.y+n*o.y,s.z=c.z+n*o.z,d.push(s.x,s.y,s.z)}}!function(){for(let e=0;e<t;e++)m(e);m(!1===i?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)l.x=e/t,l.y=n/r,h.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),a=(r+1)*e+t,s=(r+1)*(e-1)+t;p.push(n,i,s),p.push(i,a,s)}}()}(),this.setIndex(p),this.setAttribute("position",new _Ae(d,3)),this.setAttribute("normal",new _Ae(u,3)),this.setAttribute("uv",new _Ae(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new JOe((new JPe[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class ZOe extends PAe{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,r=new WSe,i=new WSe;if(null!==e.index){const a=e.attributes.position,s=e.index;let o=e.groups;0===o.length&&(o=[{start:0,count:s.count,materialIndex:0}]);for(let e=0,l=o.length;e<l;++e){const l=o[e],c=l.start;for(let e=c,o=c+l.count;e<o;e+=3)for(let l=0;l<3;l++){const o=s.getX(e+l),c=s.getX(e+(l+1)%3);r.fromBufferAttribute(a,o),i.fromBufferAttribute(a,c),!0===QOe(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}}else{const a=e.attributes.position;for(let e=0,s=a.count/3;e<s;e++)for(let o=0;o<3;o++){const s=3*e+o,l=3*e+(o+1)%3;r.fromBufferAttribute(a,s),i.fromBufferAttribute(a,l),!0===QOe(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}this.setAttribute("position",new _Ae(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function QOe(e,t,n){const r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}var eRe=Object.freeze({__proto__:null,BoxGeometry:ZAe,CapsuleGeometry:tOe,CircleGeometry:nOe,ConeGeometry:iOe,CylinderGeometry:rOe,DodecahedronGeometry:sOe,EdgesGeometry:uOe,ExtrudeGeometry:zOe,IcosahedronGeometry:VOe,LatheGeometry:eOe,OctahedronGeometry:GOe,PlaneGeometry:yMe,PolyhedronGeometry:aOe,RingGeometry:WOe,ShapeGeometry:KOe,SphereGeometry:qOe,TetrahedronGeometry:XOe,TorusGeometry:$Oe,TorusKnotGeometry:YOe,TubeGeometry:JOe,WireframeGeometry:ZOe});class tRe extends hAe{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new cAe(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class nRe extends rMe{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class rRe extends hAe{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new cAe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new cAe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new fSe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class iRe extends rRe{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new fSe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return oSe(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new cAe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new cAe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new cAe(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class aRe extends hAe{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new cAe(16777215),this.specular=new cAe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new cAe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new fSe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class sRe extends hAe{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new cAe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new cAe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new fSe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class oRe extends hAe{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new fSe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class lRe extends hAe{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new cAe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new cAe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new fSe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class cRe extends hAe{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new cAe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new fSe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class dRe extends pPe{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function uRe(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function hRe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function pRe(e){const t=e.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(function(t,n){return e[t]-e[n]}),n}function mRe(e,t,n){const r=e.length,i=new e.constructor(r);for(let a=0,s=0;s!==r;++a){const r=n[a]*t;for(let n=0;n!==t;++n)i[s++]=e[r+n]}return i}function fRe(e,t,n,r){let i=1,a=e[0];for(;void 0!==a&&void 0===a[r];)a=e[i++];if(void 0===a)return;let s=a[r];if(void 0!==s)if(Array.isArray(s))do{s=a[r],void 0!==s&&(t.push(a.time),n.push.apply(n,s)),a=e[i++]}while(void 0!==a);else if(void 0!==s.toArray)do{s=a[r],void 0!==s&&(t.push(a.time),s.toArray(n,n.length)),a=e[i++]}while(void 0!==a);else do{s=a[r],void 0!==s&&(t.push(a.time),n.push(s)),a=e[i++]}while(void 0!==a)}const gRe={convertArray:uRe,isTypedArray:hRe,getKeyframeOrder:pRe,sortedArray:mRe,flattenJSON:fRe,subclip:function(e,t,n,r,i=30){const a=e.clone();a.name=t;const s=[];for(let l=0;l<a.tracks.length;++l){const e=a.tracks[l],t=e.getValueSize(),o=[],c=[];for(let a=0;a<e.times.length;++a){const s=e.times[a]*i;if(!(s<n||s>=r)){o.push(e.times[a]);for(let n=0;n<t;++n)c.push(e.values[a*t+n])}}0!==o.length&&(e.times=uRe(o,e.times.constructor),e.values=uRe(c,e.values.constructor),s.push(e))}a.tracks=s;let o=1/0;for(let l=0;l<a.tracks.length;++l)o>a.tracks[l].times[0]&&(o=a.tracks[l].times[0]);for(let l=0;l<a.tracks.length;++l)a.tracks[l].shift(-1*o);return a.resetDuration(),a},makeClipAdditive:function(e,t=0,n=e,r=30){r<=0&&(r=30);const i=n.tracks.length,a=t/r;for(let s=0;s<i;++s){const t=n.tracks[s],r=t.ValueTypeName;if("bool"===r||"string"===r)continue;const i=e.tracks.find(function(e){return e.name===t.name&&e.ValueTypeName===r});if(void 0===i)continue;let o=0;const l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);let c=0;const d=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=d/3);const u=t.times.length-1;let h;if(a<=t.times[0]){const e=o,n=l-o;h=t.values.slice(e,n)}else if(a>=t.times[u]){const e=u*l+o,n=e+l-o;h=t.values.slice(e,n)}else{const e=t.createInterpolant(),n=o,r=l-o;e.evaluate(a),h=e.resultBuffer.slice(n,r)}if("quaternion"===r){(new GSe).fromArray(h).normalize().conjugate().toArray(h)}const p=i.times.length;for(let e=0;e<p;++e){const t=e*d+c;if("quaternion"===r)GSe.multiplyQuaternionsFlat(i.values,t,h,0,i.values,t);else{const e=d-2*c;for(let n=0;n<e;++n)i.values[t+n]-=h[n]}}}return e.blendMode=E_e,e}};class vRe{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let a;n:{r:if(!(e<r)){for(let a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(i=r,r=t[++n],e<r)break t}a=t.length;break n}if(!(e>=i)){const s=t[1];e<s&&(n=2,i=s);for(let a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===a)break;if(r=i,i=t[--n-1],e>=i)break t}a=n,n=0;break n}break e}for(;n<a;){const r=n+a>>>1;e<t[r]?a=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let a=0;a!==r;++a)t[a]=n[i+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class xRe extends vRe{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:S_e,endingEnd:S_e}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,a=e+1,s=r[i],o=r[a];if(void 0===s)switch(this.getSettings_().endingStart){case C_e:i=e,s=2*t-n;break;case A_e:i=r.length-2,s=t+r[i]-r[i+1];break;default:i=e,s=n}if(void 0===o)switch(this.getSettings_().endingEnd){case C_e:a=e,o=2*n-t;break;case A_e:a=1,o=n+r[1]-r[0];break;default:a=e-1,o=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(o-n),this._offsetPrev=i*c,this._offsetNext=a*c}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=this._offsetPrev,d=this._offsetNext,u=this._weightPrev,h=this._weightNext,p=(n-t)/(r-t),m=p*p,f=m*p,g=-u*f+2*u*m-u*p,v=(1+u)*f+(-1.5-2*u)*m+(-.5+u)*p+1,x=(-1-h)*f+(1.5+h)*m+.5*p,y=h*f-h*m;for(let b=0;b!==s;++b)i[b]=g*a[c+b]+v*a[l+b]+x*a[o+b]+y*a[d+b];return i}}class yRe extends vRe{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=(n-t)/(r-t),d=1-c;for(let u=0;u!==s;++u)i[u]=a[l+u]*d+a[o+u]*c;return i}}class bRe extends vRe{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class wRe{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=uRe(t,this.TimeBufferType),this.values=uRe(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:uRe(e.times,Array),values:uRe(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new bRe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new yRe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new xRe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case j_e:t=this.InterpolantFactoryMethodDiscrete;break;case N_e:t=this.InterpolantFactoryMethodLinear;break;case __e:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return j_e;case this.InterpolantFactoryMethodLinear:return N_e;case this.InterpolantFactoryMethodSmooth:return __e}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,a=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(a=Math.max(a,1),i=a-1);const e=this.getValueSize();this.times=n.slice(i,a),this.values=this.values.slice(i*e,a*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(e=!1);let a=null;for(let s=0;s!==i;s++){const t=n[s];if("number"==typeof t&&isNaN(t)){e=!1;break}if(null!==a&&a>t){e=!1;break}a=t}if(void 0!==r&&hRe(r))for(let s=0,o=r.length;s!==o;++s){const t=r[s];if(isNaN(t)){e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===__e,i=e.length-1;let a=1;for(let s=1;s<i;++s){let i=!1;const o=e[s];if(o!==e[s+1]&&(1!==s||o!==e[0]))if(r)i=!0;else{const e=s*n,r=e-n,a=e+n;for(let s=0;s!==n;++s){const n=t[e+s];if(n!==t[r+s]||n!==t[a+s]){i=!0;break}}}if(i){if(s!==a){e[a]=e[s];const r=s*n,i=a*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++a}}if(i>0){e[a]=e[i];for(let e=i*n,r=a*n,s=0;s!==n;++s)t[r+s]=t[e+s];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}wRe.prototype.TimeBufferType=Float32Array,wRe.prototype.ValueBufferType=Float32Array,wRe.prototype.DefaultInterpolation=N_e;class jRe extends wRe{}jRe.prototype.ValueTypeName="bool",jRe.prototype.ValueBufferType=Array,jRe.prototype.DefaultInterpolation=j_e,jRe.prototype.InterpolantFactoryMethodLinear=void 0,jRe.prototype.InterpolantFactoryMethodSmooth=void 0;class NRe extends wRe{}NRe.prototype.ValueTypeName="color";class _Re extends wRe{}_Re.prototype.ValueTypeName="number";class SRe extends vRe{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(n-t)/(r-t);let l=e*s;for(let c=l+s;l!==c;l+=4)GSe.slerpFlat(i,0,a,l-s,a,l,o);return i}}class CRe extends wRe{InterpolantFactoryMethodLinear(e){return new SRe(this.times,this.values,this.getValueSize(),e)}}CRe.prototype.ValueTypeName="quaternion",CRe.prototype.DefaultInterpolation=N_e,CRe.prototype.InterpolantFactoryMethodSmooth=void 0;class ARe extends wRe{}ARe.prototype.ValueTypeName="string",ARe.prototype.ValueBufferType=Array,ARe.prototype.DefaultInterpolation=j_e,ARe.prototype.InterpolantFactoryMethodLinear=void 0,ARe.prototype.InterpolantFactoryMethodSmooth=void 0;class MRe extends wRe{}MRe.prototype.ValueTypeName="vector";class ERe{constructor(e,t=-1,n,r=2500){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=sSe(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let a=0,s=n.length;a!==s;++a)t.push(kRe(n[a]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let i=0,a=n.length;i!==a;++i)t.push(wRe.toJSON(n[i]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,a=[];for(let s=0;s<i;s++){let e=[],o=[];e.push((s+i-1)%i,s,(s+1)%i),o.push(0,1,0);const l=pRe(e);e=mRe(e,1,l),o=mRe(o,1,l),r||0!==e[0]||(e.push(i),o.push(o[0])),a.push(new _Re(".morphTargetInfluences["+t[s].name+"]",e,o).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let s=0,o=e.length;s<o;s++){const t=e[s],n=t.name.match(i);if(n&&n.length>1){const e=n[1];let i=r[e];i||(r[e]=i=[]),i.push(t)}}const a=[];for(const s in r)a.push(this.CreateFromMorphTargetSequence(s,r[s],t,n));return a}static parseAnimation(e,t){if(!e)return null;const n=function(e,t,n,r,i){if(0!==n.length){const a=[],s=[];fRe(n,a,s,r),0!==a.length&&i.push(new e(t,a,s))}},r=[],i=e.name||"default",a=e.fps||30,s=e.blendMode;let o=e.length||-1;const l=e.hierarchy||[];for(let c=0;c<l.length;c++){const e=l[c].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let r=0;r<e[n].morphTargets.length;r++)t[e[n].morphTargets[r]]=-1;for(const i in t){const t=[],a=[];for(let r=0;r!==e[n].morphTargets.length;++r){const r=e[n];t.push(r.time),a.push(r.morphTarget===i?1:0)}r.push(new _Re(".morphTargetInfluence["+i+"]",t,a))}o=t.length*a}else{const i=".bones["+t[c].name+"]";n(MRe,i+".position",e,"pos",r),n(CRe,i+".quaternion",e,"rot",r),n(MRe,i+".scale",e,"scl",r)}}if(0===r.length)return null;return new this(i,o,r,s)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function kRe(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return _Re;case"vector":case"vector2":case"vector3":case"vector4":return MRe;case"color":return NRe;case"quaternion":return CRe;case"bool":case"boolean":return jRe;case"string":return ARe}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];fRe(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const TRe={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class PRe{constructor(e,t,n){const r=this;let i,a=!1,s=0,o=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===a&&void 0!==r.onStart&&r.onStart(e,s,o),a=!0},this.itemEnd=function(e){s++,void 0!==r.onProgress&&r.onProgress(e,s,o),s===o&&(a=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const ORe=new PRe;class RRe{constructor(e){this.manager=void 0!==e?e:ORe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,i){n.load(e,r,t,i)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}RRe.DEFAULT_MATERIAL_NAME="__DEFAULT";const IRe={};class DRe extends Error{constructor(e,t){super(e),this.response=t}}class LRe extends RRe{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=TRe.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout(()=>{t&&t(i),this.manager.itemEnd(e)},0),i;if(void 0!==IRe[e])return void IRe[e].push({onLoad:t,onProgress:n,onError:r});IRe[e]=[],IRe[e].push({onLoad:t,onProgress:n,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,o=this.responseType;fetch(a).then(t=>{if(200===t.status||0===t.status){if(t.status,"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=IRe[e],r=t.body.getReader(),i=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),a=i?parseInt(i):0,s=0!==a;let o=0;const l=new ReadableStream({start(e){!function t(){r.read().then(({done:r,value:i})=>{if(r)e.close();else{o+=i.byteLength;const r=new ProgressEvent("progress",{lengthComputable:s,loaded:o,total:a});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(i),t()}})}()}});return new Response(l)}throw new DRe(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)}).then(e=>{switch(o){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then(e=>(new DOMParser).parseFromString(e,s));case"json":return e.json();default:if(void 0===s)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(s),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then(e=>r.decode(e))}}}).then(t=>{TRe.add(e,t);const n=IRe[e];delete IRe[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}}).catch(t=>{const n=IRe[e];if(void 0===n)throw this.manager.itemError(e),t;delete IRe[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class BRe extends RRe{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,a=TRe.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;const s=wSe("img");function o(){c(),TRe.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){c(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function c(){s.removeEventListener("load",o,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",o,!1),s.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),i.manager.itemStart(e),s.src=e,s}}class FRe extends RRe{constructor(e){super(e)}load(e,t,n,r){const i=new lMe;i.colorSpace=O_e;const a=new BRe(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let s=0;function o(n){a.load(e[n],function(e){i.images[n]=e,s++,6===s&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}for(let l=0;l<e.length;++l)o(l);return i}}class URe extends RRe{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new LTe,s=new LRe(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(i.withCredentials),s.load(e,function(e){let n;try{n=i.parse(e)}catch(s){if(void 0===r)return;r(s)}void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:xNe,a.wrapT=void 0!==n.wrapT?n.wrapT:xNe,a.magFilter=void 0!==n.magFilter?n.magFilter:NNe,a.minFilter=void 0!==n.minFilter?n.minFilter:NNe,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace?a.colorSpace=n.colorSpace:void 0!==n.encoding&&(a.encoding=n.encoding),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=SNe),1===n.mipmapCount&&(a.minFilter=NNe),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,t&&t(a,n)},n,r),a}}class zRe extends RRe{constructor(e){super(e)}load(e,t,n,r){const i=new BSe,a=new BRe(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)},n,r),i}}class HRe extends KCe{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new cAe(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class VRe extends HRe{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(KCe.DEFAULT_UP),this.updateMatrix(),this.groundColor=new cAe(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const GRe=new wCe,WRe=new WSe,KRe=new WSe;class qRe{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new fSe(512,512),this.map=null,this.mapPass=null,this.matrix=new wCe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new gMe,this._frameExtents=new fSe(1,1),this._viewportCount=1,this._viewports=[new FSe(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;WRe.setFromMatrixPosition(e.matrixWorld),t.position.copy(WRe),KRe.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(KRe),t.updateMatrixWorld(),GRe.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(GRe),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(GRe)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class XRe extends qRe{constructor(){super(new aMe(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*aSe*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class $Re extends HRe{constructor(e,t,n=0,r=Math.PI/3,i=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(KCe.DEFAULT_UP),this.updateMatrix(),this.target=new KCe,this.distance=n,this.angle=r,this.penumbra=i,this.decay=a,this.map=null,this.shadow=new XRe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const YRe=new wCe,JRe=new WSe,ZRe=new WSe;class QRe extends qRe{constructor(){super(new aMe(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new fSe(4,2),this._viewportCount=6,this._viewports=[new FSe(2,1,1,1),new FSe(0,1,1,1),new FSe(3,1,1,1),new FSe(1,1,1,1),new FSe(3,0,1,1),new FSe(1,0,1,1)],this._cubeDirections=[new WSe(1,0,0),new WSe(-1,0,0),new WSe(0,0,1),new WSe(0,0,-1),new WSe(0,1,0),new WSe(0,-1,0)],this._cubeUps=[new WSe(0,1,0),new WSe(0,1,0),new WSe(0,1,0),new WSe(0,1,0),new WSe(0,0,1),new WSe(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),JRe.setFromMatrixPosition(e.matrixWorld),n.position.copy(JRe),ZRe.copy(n.position),ZRe.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(ZRe),n.updateMatrixWorld(),r.makeTranslation(-JRe.x,-JRe.y,-JRe.z),YRe.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(YRe)}}class eIe extends HRe{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new QRe}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class tIe extends qRe{constructor(){super(new kMe(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class nIe extends HRe{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(KCe.DEFAULT_UP),this.updateMatrix(),this.target=new KCe,this.shadow=new tIe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class rIe extends HRe{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class iIe extends HRe{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class aIe{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new WSe)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],n*i*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*n*i),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}class sIe extends HRe{constructor(e=new aIe,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class oIe extends RRe{constructor(e){super(e),this.textures={}}load(e,t,n,r){const i=this,a=new LRe(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,function(n){try{t(i.parse(JSON.parse(n)))}catch(CI){r&&r(CI),i.manager.itemError(e)}},n,r)}parse(e){const t=this.textures;function n(e){return t[e],t[e]}const r=oIe.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new cAe).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(r.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(r.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.alphaHash&&(r.alphaHash=e.alphaHash),void 0!==e.depthFunc&&(r.depthFunc=e.depthFunc),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.blendSrc&&(r.blendSrc=e.blendSrc),void 0!==e.blendDst&&(r.blendDst=e.blendDst),void 0!==e.blendEquation&&(r.blendEquation=e.blendEquation),void 0!==e.blendSrcAlpha&&(r.blendSrcAlpha=e.blendSrcAlpha),void 0!==e.blendDstAlpha&&(r.blendDstAlpha=e.blendDstAlpha),void 0!==e.blendEquationAlpha&&(r.blendEquationAlpha=e.blendEquationAlpha),void 0!==e.blendColor&&void 0!==r.blendColor&&r.blendColor.setHex(e.blendColor),void 0!==e.blendAlpha&&(r.blendAlpha=e.blendAlpha),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),void 0!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(r.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const i in e.uniforms){const t=e.uniforms[i];switch(r.uniforms[i]={},t.type){case"t":r.uniforms[i].value=n(t.value);break;case"c":r.uniforms[i].value=(new cAe).setHex(t.value);break;case"v2":r.uniforms[i].value=(new fSe).fromArray(t.value);break;case"v3":r.uniforms[i].value=(new WSe).fromArray(t.value);break;case"v4":r.uniforms[i].value=(new FSe).fromArray(t.value);break;case"m3":r.uniforms[i].value=(new gSe).fromArray(t.value);break;case"m4":r.uniforms[i].value=(new wCe).fromArray(t.value);break;default:r.uniforms[i].value=t.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(r.glslVersion=e.glslVersion),void 0!==e.extensions)for(const i in e.extensions)r.extensions[i]=e.extensions[i];if(void 0!==e.lights&&(r.lights=e.lights),void 0!==e.clipping&&(r.clipping=e.clipping),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=(new fSe).fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new fSe).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),void 0!==e.anisotropyMap&&(r.anisotropyMap=n(e.anisotropyMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){return new{ShadowMaterial:tRe,SpriteMaterial:oTe,RawShaderMaterial:nRe,ShaderMaterial:rMe,PointsMaterial:_Pe,MeshPhysicalMaterial:iRe,MeshStandardMaterial:rRe,MeshPhongMaterial:aRe,MeshToonMaterial:sRe,MeshNormalMaterial:oRe,MeshLambertMaterial:lRe,MeshDepthMaterial:Uke,MeshDistanceMaterial:zke,MeshBasicMaterial:pAe,MeshMatcapMaterial:cRe,LineDashedMaterial:dRe,LineBasicMaterial:pPe,Material:hAe}[e]}}class lIe{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(CI){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class cIe extends PAe{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class dIe extends RRe{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new LRe(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,function(n){try{t(i.parse(JSON.parse(n)))}catch(CI){r&&r(CI),i.manager.itemError(e)}},n,r)}parse(e){const t={},n={};function r(e,r){if(void 0!==t[r])return t[r];const i=e.interleavedBuffers[r],a=function(e,t){if(void 0!==n[t])return n[t];const r=e.arrayBuffers,i=r[t],a=new Uint32Array(i).buffer;return n[t]=a,a}(e,i.buffer),s=bSe(i.type,a),o=new iTe(s,i.stride);return o.uuid=i.uuid,t[r]=o,o}const i=e.isInstancedBufferGeometry?new cIe:new PAe,a=e.data.index;if(void 0!==a){const e=bSe(a.type,a.array);i.setIndex(new wAe(e,1))}const s=e.data.attributes;for(const d in s){const t=s[d];let n;if(t.isInterleavedBufferAttribute){const i=r(e.data,t.data);n=new sTe(i,t.itemSize,t.offset,t.normalized)}else{const e=bSe(t.type,t.array);n=new(t.isInstancedBufferAttribute?zTe:wAe)(e,t.itemSize,t.normalized)}void 0!==t.name&&(n.name=t.name),void 0!==t.usage&&n.setUsage(t.usage),i.setAttribute(d,n)}const o=e.data.morphAttributes;if(o)for(const d in o){const t=o[d],n=[];for(let i=0,a=t.length;i<a;i++){const a=t[i];let s;if(a.isInterleavedBufferAttribute){const t=r(e.data,a.data);s=new sTe(t,a.itemSize,a.offset,a.normalized)}else{const e=bSe(a.type,a.array);s=new wAe(e,a.itemSize,a.normalized)}void 0!==a.name&&(s.name=a.name),n.push(s)}i.morphAttributes[d]=n}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let d=0,u=l.length;d!==u;++d){const e=l[d];i.addGroup(e.start,e.count,e.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new WSe;void 0!==c.center&&e.fromArray(c.center),i.boundingSphere=new hCe(e,c.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}const uIe={UVMapping:uNe,CubeReflectionMapping:hNe,CubeRefractionMapping:pNe,EquirectangularReflectionMapping:mNe,EquirectangularRefractionMapping:fNe,CubeUVReflectionMapping:gNe},hIe={RepeatWrapping:vNe,ClampToEdgeWrapping:xNe,MirroredRepeatWrapping:yNe},pIe={NearestFilter:bNe,NearestMipmapNearestFilter:wNe,NearestMipmapLinearFilter:jNe,LinearFilter:NNe,LinearMipmapNearestFilter:_Ne,LinearMipmapLinearFilter:SNe};class mIe extends RRe{constructor(e){super(e),this.isImageBitmapLoader=!0,this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,a=TRe.get(e);if(void 0!==a)return i.manager.itemStart(e),a.then?void a.then(n=>{t&&t(n),i.manager.itemEnd(e)}).catch(e=>{r&&r(e)}):(setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a);const s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader;const o=fetch(e,s).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))}).then(function(n){return TRe.add(e,n),t&&t(n),i.manager.itemEnd(e),n}).catch(function(t){r&&r(t),TRe.remove(e),i.manager.itemError(e),i.manager.itemEnd(e)});TRe.add(e,o),i.manager.itemStart(e)}}let fIe;class gIe{static getContext(){return void 0===fIe&&(fIe=new(window.AudioContext||window.webkitAudioContext)),fIe}static setContext(e){fIe=e}}const vIe=new wCe,xIe=new wCe,yIe=new wCe;class bIe{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=wIe(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=wIe();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function wIe(){return("undefined"==typeof performance?Date:performance).now()}const jIe=new WSe,NIe=new GSe,_Ie=new WSe,SIe=new WSe;let CIe=class extends KCe{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return;if(!1===this.hasPlaybackControl)return;this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1!==this.hasPlaybackControl&&this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}};const AIe=new WSe,MIe=new GSe,EIe=new WSe,kIe=new WSe;class TIe{constructor(e,t,n){let r,i,a;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let a=this.cumulativeWeight;if(0===a){for(let e=0;e!==r;++e)n[i+e]=n[e];a=t}else{a+=t;const e=t/a;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let o=t,l=t+t;o!==l;++o)if(n[o]!==n[o+t]){s.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let i=n,a=r;i!==a;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let a=0;a!==i;++a)e[t+a]=e[n+a]}_slerp(e,t,n,r){GSe.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const a=this._workIndex*i;GSe.multiplyQuaternionsFlat(e,a,e,t,e,n),GSe.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,n,r,i){const a=1-r;for(let s=0;s!==i;++s){const i=t+s;e[i]=e[i]*a+e[n+s]*r}}_lerpAdditive(e,t,n,r,i){for(let a=0;a!==i;++a){const i=t+a;e[i]=e[i]+e[n+a]*r}}}const PIe="\\[\\]\\.:\\/",OIe=new RegExp("["+PIe+"]","g"),RIe="[^"+PIe+"]",IIe="[^"+PIe.replace("\\.","")+"]",DIe=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",RIe)+/(WCOD+)?/.source.replace("WCOD",IIe)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",RIe)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",RIe)+"$"),LIe=["material","materials","bones","map"];class BIe{constructor(e,t,n){this.path=t,this.parsedPath=n||BIe.parseTrackName(t),this.node=BIe.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new BIe.Composite(e,t,n):new BIe(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(OIe,"")}static parseTrackName(e){const t=DIe.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==LIe.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const a=n(i.children);if(a)return a}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=BIe.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return;if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return;if(!e.material.materials)return;e=e.material.materials;break;case"bones":if(!e.skeleton)return;e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return;if(!e.material.map)return;e=e.material.map;break;default:if(void 0===e[n])return;e=e[n]}if(void 0!==r){if(void 0===e[r])return;e=e[r]}}const a=e[r];if(void 0===a){t.nodeName;return}let s=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return;if(!e.geometry.morphAttributes)return;void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}o=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=i}else void 0!==a.fromArray&&void 0!==a.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(o=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}BIe.Composite=class{constructor(e,t,n){const r=n||BIe.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},BIe.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},BIe.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},BIe.prototype.GetterByBindingType=[BIe.prototype._getValue_direct,BIe.prototype._getValue_array,BIe.prototype._getValue_arrayElement,BIe.prototype._getValue_toArray],BIe.prototype.SetterByBindingTypeAndVersioning=[[BIe.prototype._setValue_direct,BIe.prototype._setValue_direct_setNeedsUpdate,BIe.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[BIe.prototype._setValue_array,BIe.prototype._setValue_array_setNeedsUpdate,BIe.prototype._setValue_array_setMatrixWorldNeedsUpdate],[BIe.prototype._setValue_arrayElement,BIe.prototype._setValue_arrayElement_setNeedsUpdate,BIe.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[BIe.prototype._setValue_fromArray,BIe.prototype._setValue_fromArray_setNeedsUpdate,BIe.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class FIe{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,a=i.length,s=new Array(a),o={endingStart:S_e,endingEnd:S_e};for(let l=0;l!==a;++l){const e=i[l].createInterpolant(null);s[l]=e,e.settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=r/n,a=n/r;e.warp(1,i,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,a=this.timeScale;let s=this._timeScaleInterpolant;null===s&&(s=r._lendControlInterpolant(),this._timeScaleInterpolant=s);const o=s.parameterPositions,l=s.sampleValues;return o[0]=i,o[1]=i+n,l[0]=e/a,l[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;r<0||0===n?t=0:(this._startTime=null,t=n*r)}t*=this._updateTimeScale(e);const a=this._updateTime(t),s=this._updateWeight(e);if(s>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===E_e)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(a),t[n].accumulateAdditive(s);else for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(a),t[n].accumulate(r,s)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const a=2202===n;if(0===e)return-1===i||!a||1&~i?r:t-r;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){const t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(a&&!(1&~i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=C_e,r.endingEnd=C_e):(r.endingStart=e?this.zeroSlopeAtStart?C_e:S_e:A_e,r.endingEnd=t?this.zeroSlopeAtEnd?C_e:S_e:A_e)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const s=a.parameterPositions,o=a.sampleValues;return s[0]=i,o[0]=t,s[1]=i+e,o[1]=n,this}}const UIe=new Float32Array(1);class zIe{constructor(e){this.value=e}clone(){return new zIe(void 0===this.value.clone?this.value:this.value.clone())}}let HIe=0;class VIe{constructor(e,t,n=0,r=1/0){this.ray=new bCe(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new PCe,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera&&(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t)}intersectObject(e,t=!0,n=[]){return WIe(e,this,n,t),n.sort(GIe),n}intersectObjects(e,t=!0,n=[]){for(let r=0,i=e.length;r<i;r++)WIe(e[r],this,n,t);return n.sort(GIe),n}}function GIe(e,t){return e.distance-t.distance}function WIe(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)WIe(r[e],t,n,!0)}}class KIe{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(oSe(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const qIe=new fSe;const XIe=new WSe,$Ie=new WSe;const YIe=new WSe;const JIe=new WSe,ZIe=new wCe,QIe=new wCe;function eDe(e){const t=[];!0===e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,eDe(e.children[n]));return t}const tDe=new WSe,nDe=new cAe,rDe=new cAe;const iDe=new WSe,aDe=new WSe,sDe=new WSe;const oDe=new WSe,lDe=new iMe;function cDe(e,t,n,r,i,a,s){oDe.set(i,a,s).unproject(r);const o=t[e];if(void 0!==o){const e=n.getAttribute("position");for(let t=0,n=o.length;t<n;t++)e.setXYZ(o[t],oDe.x,oDe.y,oDe.z)}}const dDe=new XSe;const uDe=new WSe;let hDe,pDe;"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Fje}})),"undefined"!=typeof window&&(window.__THREE__||(window.__THREE__=Fje));const mDe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:4,AddEquation:Wje,AddOperation:2,AdditiveAnimationBlendMode:E_e,AdditiveBlending:2,AgXToneMapping:6,AlphaFormat:1021,AlwaysCompare:519,AlwaysDepth:1,AlwaysStencilFunc:519,AmbientLight:rIe,AnimationAction:FIe,AnimationClip:ERe,AnimationLoader:class extends RRe{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new LRe(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(n){try{t(i.parse(JSON.parse(n)))}catch(CI){r&&r(CI),i.manager.itemError(e)}},n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=ERe.parse(e[n]);t.push(r)}return t}},AnimationMixer:class extends tSe{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,s=e._interpolants,o=n.uuid,l=this._bindingsByRootAndName;let c=l[o];void 0===c&&(c={},l[o]=c);for(let d=0;d!==i;++d){const e=r[d],i=e.name;let l=c[i];if(void 0!==l)++l.referenceCount,a[d]=l;else{if(l=a[d],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,o,i));continue}const r=t&&t._propertyBindings[d].binding.parsedPath;l=new TIe(BIe.create(n,i,r),e.ValueTypeName,e.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,o,i),a[d]=l}s[d].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{const t=a.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,a=this._actionsByClip,s=a[i],o=s.knownActions,l=o[o.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),e._byClipCacheIndex=null;delete s.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete a[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const e=t[n];0===--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let a=r[t];void 0===a&&(a={},r[t]=a),a[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,s=a[r],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete s[i],0===Object.keys(s).length&&delete a[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new yRe(new Float32Array(2),new Float32Array(2),1,UIe),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let a="string"==typeof e?ERe.findByName(r,e):e;const s=null!==a?a.uuid:e,o=this._actionsByClip[s];let l=null;if(void 0===n&&(n=null!==a?a.blendMode:M_e),void 0!==o){const e=o.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;l=o.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;const c=new FIe(this,a,t,n);return this._bindAction(c,l),this._addInactiveAction(c,s,i),c}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"==typeof e?ERe.findByName(n,e):e,a=i?i.uuid:e,s=this._actionsByClip[a];return void 0!==s&&s.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1;for(let l=0;l!==n;++l){t[l]._update(r,e,i,a)}const s=this._bindings,o=this._nActiveBindings;for(let l=0;l!==o;++l)s[l].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,a=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,a._cacheIndex=i,t[i]=a,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const i in n){const e=n[i].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const i in r){const e=r[i];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}},AnimationObjectGroup:class{constructor(){this.isAnimationObjectGroup=!0,this.uuid=sSe(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length;let s,o=e.length,l=this.nCachedObjects_;for(let c=0,d=arguments.length;c!==d;++c){const d=arguments[c],u=d.uuid;let h=t[u];if(void 0===h){h=o++,t[u]=h,e.push(d);for(let e=0,t=a;e!==t;++e)i[e].push(new BIe(d,n[e],r[e]))}else if(h<l){s=e[h];const o=--l,c=e[o];t[c.uuid]=h,e[h]=c,t[u]=o,e[o]=d;for(let e=0,t=a;e!==t;++e){const t=i[e],a=t[o];let s=t[h];t[h]=a,void 0===s&&(s=new BIe(d,n[e],r[e])),t[o]=s}}else e[h]}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a],o=s.uuid,l=t[o];if(void 0!==l&&l>=i){const a=i++,c=e[a];t[c.uuid]=l,e[l]=c,t[o]=a,e[a]=s;for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[a],i=t[l];t[l]=r,t[a]=i}}}this.nCachedObjects_=i}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,a=e.length;for(let s=0,o=arguments.length;s!==o;++s){const o=arguments[s].uuid,l=t[o];if(void 0!==l)if(delete t[o],l<i){const s=--i,o=e[s],c=--a,d=e[c];t[o.uuid]=l,e[l]=o,t[d.uuid]=s,e[s]=d,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[s],i=t[c];t[l]=r,t[s]=i,t.pop()}}else{const i=--a,s=e[i];i>0&&(t[s.uuid]=l),e[l]=s,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e];t[l]=t[i],t.pop()}}}this.nCachedObjects_=i}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const i=this._bindings;if(void 0!==r)return i[r];const a=this._paths,s=this._parsedPaths,o=this._objects,l=o.length,c=this.nCachedObjects_,d=new Array(l);r=i.length,n[e]=r,a.push(e),s.push(t),i.push(d);for(let u=c,h=o.length;u!==h;++u){const n=o[u];d[u]=new BIe(n,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const r=this._paths,i=this._parsedPaths,a=this._bindings,s=a.length-1,o=a[s];t[e[s]]=n,a[n]=o,a.pop(),i[n]=i[s],i.pop(),r[n]=r[s],r.pop()}}},AnimationUtils:gRe,ArcCurve:RPe,ArrayCamera:Kke,ArrowHelper:class extends KCe{constructor(e=new WSe(0,0,1),t=new WSe(0,0,0),n=1,r=16776960,i=.2*n,a=.2*i){super(),this.type="ArrowHelper",void 0===hDe&&(hDe=new PAe,hDe.setAttribute("position",new _Ae([0,0,0,0,1,0],3)),pDe=new rOe(0,.5,1,5,1),pDe.translate(0,-.5,0)),this.position.copy(t),this.line=new yPe(hDe,new pPe({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new YAe(pDe,new pAe({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{uDe.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(uDe,t)}}setLength(e,t=.2*e,n=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}},AttachedBindMode:cNe,Audio:CIe,AudioAnalyser:class{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}},AudioContext:gIe,AudioListener:class extends KCe{constructor(){super(),this.type="AudioListener",this.context=gIe.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new bIe}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(jIe,NIe,_Ie),SIe.set(0,0,-1).applyQuaternion(NIe),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(jIe.x,e),t.positionY.linearRampToValueAtTime(jIe.y,e),t.positionZ.linearRampToValueAtTime(jIe.z,e),t.forwardX.linearRampToValueAtTime(SIe.x,e),t.forwardY.linearRampToValueAtTime(SIe.y,e),t.forwardZ.linearRampToValueAtTime(SIe.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(jIe.x,jIe.y,jIe.z),t.setOrientation(SIe.x,SIe.y,SIe.z,n.x,n.y,n.z)}},AudioLoader:class extends RRe{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new LRe(this.manager);function s(t){r&&r(t),i.manager.itemError(e)}a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(e){try{const n=e.slice(0);gIe.getContext().decodeAudioData(n,function(e){t(e)}).catch(s)}catch(CI){s(CI)}},n,r)}},AxesHelper:class extends jPe{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new PAe;n.setAttribute("position",new _Ae(t,3)),n.setAttribute("color",new _Ae([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new pPe({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const r=new cAe,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},BackSide:1,BasicDepthPacking:3200,BasicShadowMap:0,BatchedMesh:hPe,Bone:DTe,BooleanKeyframeTrack:jRe,Box2:class{constructor(e=new fSe(1/0,1/0),t=new fSe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=qIe.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,qIe).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},Box3:XSe,Box3Helper:class extends jPe{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new PAe;r.setIndex(new wAe(n,1)),r.setAttribute("position",new _Ae([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new pPe({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},BoxGeometry:ZAe,BoxHelper:class extends jPe{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new PAe;i.setIndex(new wAe(n,1)),i.setAttribute("position",new wAe(r,3)),super(i,new pPe({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==this.object&&dDe.setFromObject(this.object),dDe.isEmpty())return;const t=dDe.min,n=dDe.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}},BufferAttribute:wAe,BufferGeometry:PAe,BufferGeometryLoader:dIe,ByteType:MNe,Cache:TRe,Camera:iMe,CameraHelper:class extends jPe{constructor(e){const t=new PAe,n=new pPe({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],a={};function s(e,t){o(e),o(t)}function o(e){r.push(0,0,0),i.push(0,0,0),void 0===a[e]&&(a[e]=[]),a[e].push(r.length/3-1)}s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4"),t.setAttribute("position",new _Ae(r,3)),t.setAttribute("color",new _Ae(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const l=new cAe(16755200),c=new cAe(16711680),d=new cAe(43775),u=new cAe(16777215),h=new cAe(3355443);this.setColors(l,c,d,u,h)}setColors(e,t,n,r,i){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,i.r,i.g,i.b),a.setXYZ(41,i.r,i.g,i.b),a.setXYZ(42,i.r,i.g,i.b),a.setXYZ(43,i.r,i.g,i.b),a.setXYZ(44,i.r,i.g,i.b),a.setXYZ(45,i.r,i.g,i.b),a.setXYZ(46,i.r,i.g,i.b),a.setXYZ(47,i.r,i.g,i.b),a.setXYZ(48,i.r,i.g,i.b),a.setXYZ(49,i.r,i.g,i.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;lDe.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),cDe("c",t,e,lDe,0,0,-1),cDe("t",t,e,lDe,0,0,1),cDe("n1",t,e,lDe,-1,-1,-1),cDe("n2",t,e,lDe,1,-1,-1),cDe("n3",t,e,lDe,-1,1,-1),cDe("n4",t,e,lDe,1,1,-1),cDe("f1",t,e,lDe,-1,-1,1),cDe("f2",t,e,lDe,1,-1,1),cDe("f3",t,e,lDe,-1,1,1),cDe("f4",t,e,lDe,1,1,1),cDe("u1",t,e,lDe,.7,1.1,-1),cDe("u2",t,e,lDe,-.7,1.1,-1),cDe("u3",t,e,lDe,0,2,-1),cDe("cf1",t,e,lDe,-1,0,1),cDe("cf2",t,e,lDe,1,0,1),cDe("cf3",t,e,lDe,0,-1,1),cDe("cf4",t,e,lDe,0,1,1),cDe("cn1",t,e,lDe,-1,0,-1),cDe("cn2",t,e,lDe,1,0,-1),cDe("cn3",t,e,lDe,0,-1,-1),cDe("cn4",t,e,lDe,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}},CanvasTexture:class extends BSe{constructor(e,t,n,r,i,a,s,o,l){super(e,t,n,r,i,a,s,o,l),this.isCanvasTexture=!0,this.needsUpdate=!0}},CapsuleGeometry:tOe,CatmullRomCurve3:UPe,CineonToneMapping:3,CircleGeometry:nOe,ClampToEdgeWrapping:xNe,Clock:bIe,Color:cAe,ColorKeyframeTrack:NRe,ColorManagement:ESe,CompressedArrayTexture:class extends TPe{constructor(e,t,n,r,i,a){super(e,t,n,i,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=xNe}},CompressedCubeTexture:class extends TPe{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,hNe),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}},CompressedTexture:TPe,CompressedTextureLoader:class extends RRe{constructor(e){super(e)}load(e,t,n,r){const i=this,a=[],s=new TPe,o=new LRe(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(i.withCredentials);let l=0;function c(c){o.load(e[c],function(e){const n=i.parse(e,!0);a[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(s.minFilter=NNe),s.image=a,s.format=n.format,s.needsUpdate=!0,t&&t(s))},n,r)}if(Array.isArray(e))for(let d=0,u=e.length;d<u;++d)c(d);else o.load(e,function(e){const n=i.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){a[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)a[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),a[t].format=n.format,a[t].width=n.width,a[t].height=n.height}s.image=a}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=NNe),s.format=n.format,s.needsUpdate=!0,t&&t(s)},n,r);return s}},ConeGeometry:iOe,ConstantAlphaFactor:213,ConstantColorFactor:211,CubeCamera:oMe,CubeReflectionMapping:hNe,CubeRefractionMapping:pNe,CubeTexture:lMe,CubeTextureLoader:FRe,CubeUVReflectionMapping:gNe,CubicBezierCurve:GPe,CubicBezierCurve3:WPe,CubicInterpolant:xRe,CullFaceBack:1,CullFaceFront:2,CullFaceFrontBack:3,CullFaceNone:0,Curve:PPe,CurvePath:ZPe,CustomBlending:5,CustomToneMapping:5,CylinderGeometry:rOe,Cylindrical:class{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}},Data3DTexture:VSe,DataArrayTexture:HSe,DataTexture:LTe,DataTextureLoader:URe,DataUtils:xAe,DecrementStencilOp:7683,DecrementWrapStencilOp:34056,DefaultLoadingManager:ORe,DepthFormat:FNe,DepthStencilFormat:UNe,DepthTexture:nEe,DetachedBindMode:dNe,DirectionalLight:nIe,DirectionalLightHelper:class extends KCe{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let r=new PAe;r.setAttribute("position",new _Ae([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new pPe({fog:!1,toneMapped:!1});this.lightPlane=new yPe(r,i),this.add(this.lightPlane),r=new PAe,r.setAttribute("position",new _Ae([0,0,0,0,0,1],3)),this.targetLine=new yPe(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),iDe.setFromMatrixPosition(this.light.matrixWorld),aDe.setFromMatrixPosition(this.light.target.matrixWorld),sDe.subVectors(aDe,iDe),this.lightPlane.lookAt(aDe),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(aDe),this.targetLine.scale.z=sDe.length()}},DiscreteInterpolant:bRe,DisplayP3ColorSpace:I_e,DodecahedronGeometry:sOe,DoubleSide:2,DstAlphaFactor:206,DstColorFactor:208,DynamicCopyUsage:35050,DynamicDrawUsage:35048,DynamicReadUsage:35049,EdgesGeometry:uOe,EllipseCurve:OPe,EqualCompare:514,EqualDepth:4,EqualStencilFunc:514,EquirectangularReflectionMapping:mNe,EquirectangularRefractionMapping:fNe,Euler:TCe,EventDispatcher:tSe,ExtrudeGeometry:zOe,FileLoader:LRe,Float16BufferAttribute:class extends wAe{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=vAe(this.array[e*this.itemSize]);return this.normalized&&(t=hSe(t,this.array)),t}setX(e,t){return this.normalized&&(t=pSe(t,this.array)),this.array[e*this.itemSize]=gAe(t),this}getY(e){let t=vAe(this.array[e*this.itemSize+1]);return this.normalized&&(t=hSe(t,this.array)),t}setY(e,t){return this.normalized&&(t=pSe(t,this.array)),this.array[e*this.itemSize+1]=gAe(t),this}getZ(e){let t=vAe(this.array[e*this.itemSize+2]);return this.normalized&&(t=hSe(t,this.array)),t}setZ(e,t){return this.normalized&&(t=pSe(t,this.array)),this.array[e*this.itemSize+2]=gAe(t),this}getW(e){let t=vAe(this.array[e*this.itemSize+3]);return this.normalized&&(t=hSe(t,this.array)),t}setW(e,t){return this.normalized&&(t=pSe(t,this.array)),this.array[e*this.itemSize+3]=gAe(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=pSe(t,this.array),n=pSe(n,this.array)),this.array[e+0]=gAe(t),this.array[e+1]=gAe(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=pSe(t,this.array),n=pSe(n,this.array),r=pSe(r,this.array)),this.array[e+0]=gAe(t),this.array[e+1]=gAe(n),this.array[e+2]=gAe(r),this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=pSe(t,this.array),n=pSe(n,this.array),r=pSe(r,this.array),i=pSe(i,this.array)),this.array[e+0]=gAe(t),this.array[e+1]=gAe(n),this.array[e+2]=gAe(r),this.array[e+3]=gAe(i),this}},Float32BufferAttribute:_Ae,Float64BufferAttribute:class extends wAe{constructor(e,t,n){super(new Float64Array(e),t,n)}},FloatType:ONe,Fog:nTe,FogExp2:tTe,FramebufferTexture:class extends BSe{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=bNe,this.minFilter=bNe,this.generateMipmaps=!1,this.needsUpdate=!0}},FrontSide:0,Frustum:gMe,GLBufferAttribute:class{constructor(e,t,n,r,i){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}},GLSL1:"100",GLSL3:J_e,GreaterCompare:516,GreaterDepth:6,GreaterEqualCompare:518,GreaterEqualDepth:5,GreaterEqualStencilFunc:518,GreaterStencilFunc:516,GridHelper:class extends jPe{constructor(e=10,t=10,n=4473924,r=8947848){n=new cAe(n),r=new cAe(r);const i=t/2,a=e/t,s=e/2,o=[],l=[];for(let d=0,u=0,h=-s;d<=t;d++,h+=a){o.push(-s,0,h,s,0,h),o.push(h,0,-s,h,0,s);const e=d===i?n:r;e.toArray(l,u),u+=3,e.toArray(l,u),u+=3,e.toArray(l,u),u+=3,e.toArray(l,u),u+=3}const c=new PAe;c.setAttribute("position",new _Ae(o,3)),c.setAttribute("color",new _Ae(l,3));super(c,new pPe({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},Group:qke,HalfFloatType:RNe,HemisphereLight:VRe,HemisphereLightHelper:class extends KCe{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new GOe(t);r.rotateY(.5*Math.PI),this.material=new pAe({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),a=new Float32Array(3*i.count);r.setAttribute("color",new wAe(a,3)),this.add(new YAe(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");nDe.copy(this.light.color),rDe.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const r=e<n/2?nDe:rDe;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(tDe.setFromMatrixPosition(this.light.matrixWorld).negate())}},IcosahedronGeometry:VOe,ImageBitmapLoader:mIe,ImageLoader:BRe,ImageUtils:OSe,IncrementStencilOp:7682,IncrementWrapStencilOp:34055,InstancedBufferAttribute:zTe,InstancedBufferGeometry:cIe,InstancedInterleavedBuffer:class extends iTe{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}},InstancedMesh:$Te,Int16BufferAttribute:class extends wAe{constructor(e,t,n){super(new Int16Array(e),t,n)}},Int32BufferAttribute:class extends wAe{constructor(e,t,n){super(new Int32Array(e),t,n)}},Int8BufferAttribute:class extends wAe{constructor(e,t,n){super(new Int8Array(e),t,n)}},IntType:TNe,InterleavedBuffer:iTe,InterleavedBufferAttribute:sTe,Interpolant:vRe,InterpolateDiscrete:j_e,InterpolateLinear:N_e,InterpolateSmooth:__e,InvertStencilOp:5386,KeepStencilOp:z_e,KeyframeTrack:wRe,LOD:STe,LatheGeometry:eOe,Layers:PCe,LessCompare:513,LessDepth:2,LessEqualCompare:515,LessEqualDepth:3,LessEqualStencilFunc:515,LessStencilFunc:513,Light:HRe,LightProbe:sIe,Line:yPe,Line3:class{constructor(e=new WSe,t=new WSe){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){XIe.subVectors(e,this.start),$Ie.subVectors(this.end,this.start);const n=$Ie.dot($Ie);let r=$Ie.dot(XIe)/n;return t&&(r=oSe(r,0,1)),r}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}},LineBasicMaterial:pPe,LineCurve:KPe,LineCurve3:qPe,LineDashedMaterial:dRe,LineLoop:NPe,LineSegments:jPe,LinearDisplayP3ColorSpace:D_e,LinearEncoding:k_e,LinearFilter:NNe,LinearInterpolant:yRe,LinearMipMapLinearFilter:CNe,LinearMipMapNearestFilter:1007,LinearMipmapLinearFilter:SNe,LinearMipmapNearestFilter:_Ne,LinearSRGBColorSpace:R_e,LinearToneMapping:1,LinearTransfer:L_e,Loader:RRe,LoaderUtils:lIe,LoadingManager:PRe,LoopOnce:2200,LoopPingPong:2202,LoopRepeat:2201,LuminanceAlphaFormat:1025,LuminanceFormat:1024,MOUSE:Uje,Material:hAe,MaterialLoader:oIe,MathUtils:mSe,Matrix3:gSe,Matrix4:wCe,MaxEquation:104,Mesh:YAe,MeshBasicMaterial:pAe,MeshDepthMaterial:Uke,MeshDistanceMaterial:zke,MeshLambertMaterial:lRe,MeshMatcapMaterial:cRe,MeshNormalMaterial:oRe,MeshPhongMaterial:aRe,MeshPhysicalMaterial:iRe,MeshStandardMaterial:rRe,MeshToonMaterial:sRe,MinEquation:103,MirroredRepeatWrapping:yNe,MixOperation:1,MultiplyBlending:4,MultiplyOperation:0,NearestFilter:bNe,NearestMipMapLinearFilter:1005,NearestMipMapNearestFilter:1004,NearestMipmapLinearFilter:jNe,NearestMipmapNearestFilter:wNe,NeverCompare:512,NeverDepth:0,NeverStencilFunc:512,NoBlending:0,NoColorSpace:P_e,NoToneMapping:0,NormalAnimationBlendMode:M_e,NormalBlending:1,NotEqualCompare:517,NotEqualDepth:7,NotEqualStencilFunc:517,NumberKeyframeTrack:_Re,Object3D:KCe,ObjectLoader:class extends RRe{constructor(e){super(e)}load(e,t,n,r){const i=this,a=""===this.path?lIe.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const s=new LRe(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(n){let a=null;try{a=JSON.parse(n)}catch(o){return void(void 0!==r&&r(o))}const s=a.metadata;void 0!==s&&void 0!==s.type&&"geometry"!==s.type.toLowerCase()?i.parse(a,t):void 0!==r&&r(new Error("THREE.ObjectLoader: Can't load "+e))},n,r)}async loadAsync(e,t){const n=""===this.path?lIe.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const r=new LRe(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const i=await r.loadAsync(e,t),a=JSON.parse(i),s=a.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(a)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){void 0!==t&&t(l)}),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,i,o,s,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),void 0!==t){let e=!1;for(const t in a)if(a[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),i=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,i),s=this.parseMaterials(e.materials,a),o=this.parseObject(e.object,r,s,a,t),l=this.parseSkeletons(e.skeletons,o);return this.bindSkeletons(o,l),o}parseShapes(e){const t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){const r=(new hOe).fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse(function(e){e.isBone&&(r[e.uuid]=e)}),void 0!==e)for(let i=0,a=e.length;i<a;i++){const t=(new UTe).fromJSON(e[i],r);n[t.uuid]=t}return n}parseGeometries(e,t){const n={};if(void 0!==e){const r=new dIe;for(let i=0,a=e.length;i<a;i++){let a;const s=e[i];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(s);break;default:s.type in eRe&&(a=eRe[s.type].fromJSON(s,t))}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}}return n}parseMaterials(e,t){const n={},r={};if(void 0!==e){const i=new oIe;i.setTextures(t);for(let t=0,a=e.length;t<a;t++){const a=e[t];void 0===n[a.uuid]&&(n[a.uuid]=i.parse(a)),r[a.uuid]=n[a.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const r=e[n],i=ERe.parse(r);t[i.uuid]=i}return t}parseImages(e,t){const n=this,r={};let i;function a(e){if("string"==typeof e){const t=e;return function(e){return n.manager.itemStart(e),i.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemError(e),n.manager.itemEnd(e)})}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:bSe(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new PRe(t);i=new BRe(n),i.setCrossOrigin(this.crossOrigin);for(let t=0,i=e.length;t<i;t++){const n=e[t],i=n.url;if(Array.isArray(i)){const e=[];for(let t=0,n=i.length;t<n;t++){const n=a(i[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new LTe(n.data,n.width,n.height)))}r[n.uuid]=new ISe(e)}else{const e=a(n.url);r[n.uuid]=new ISe(e)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function i(e){if("string"==typeof e){const n=e,i=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await r.loadAsync(i)}return e.data?{data:bSe(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){r=new BRe(this.manager),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const r=e[t],a=r.url;if(Array.isArray(a)){const e=[];for(let t=0,n=a.length;t<n;t++){const n=a[t],r=await i(n);null!==r&&(r instanceof HTMLImageElement?e.push(r):e.push(new LTe(r.data,r.width,r.height)))}n[r.uuid]=new ISe(e)}else{const e=await i(r.url);n[r.uuid]=new ISe(e)}}}return n}parseTextures(e,t){function n(e,t){return"number"==typeof e?e:t[e]}const r={};if(void 0!==e)for(let i=0,a=e.length;i<a;i++){const a=e[i];a.image,t[a.image];const s=t[a.image],o=s.data;let l;Array.isArray(o)?(l=new lMe,6===o.length&&(l.needsUpdate=!0)):(l=o&&o.data?new LTe:new BSe,o&&(l.needsUpdate=!0)),l.source=s,l.uuid=a.uuid,void 0!==a.name&&(l.name=a.name),void 0!==a.mapping&&(l.mapping=n(a.mapping,uIe)),void 0!==a.channel&&(l.channel=a.channel),void 0!==a.offset&&l.offset.fromArray(a.offset),void 0!==a.repeat&&l.repeat.fromArray(a.repeat),void 0!==a.center&&l.center.fromArray(a.center),void 0!==a.rotation&&(l.rotation=a.rotation),void 0!==a.wrap&&(l.wrapS=n(a.wrap[0],hIe),l.wrapT=n(a.wrap[1],hIe)),void 0!==a.format&&(l.format=a.format),void 0!==a.internalFormat&&(l.internalFormat=a.internalFormat),void 0!==a.type&&(l.type=a.type),void 0!==a.colorSpace&&(l.colorSpace=a.colorSpace),void 0!==a.encoding&&(l.encoding=a.encoding),void 0!==a.minFilter&&(l.minFilter=n(a.minFilter,pIe)),void 0!==a.magFilter&&(l.magFilter=n(a.magFilter,pIe)),void 0!==a.anisotropy&&(l.anisotropy=a.anisotropy),void 0!==a.flipY&&(l.flipY=a.flipY),void 0!==a.generateMipmaps&&(l.generateMipmaps=a.generateMipmaps),void 0!==a.premultiplyAlpha&&(l.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(l.unpackAlignment=a.unpackAlignment),void 0!==a.compareFunction&&(l.compareFunction=a.compareFunction),void 0!==a.userData&&(l.userData=a.userData),r[a.uuid]=l}return r}parseObject(e,t,n,r,i){let a,s,o;function l(e){return t[e],t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];n[i],t.push(n[i])}return t}return n[e],n[e]}}function d(e){return r[e],r[e]}switch(e.type){case"Scene":a=new rTe,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new cAe(e.background):a.background=d(e.background)),void 0!==e.environment&&(a.environment=d(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new nTe(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new tTe(e.fog.color,e.fog.density)),""!==e.fog.name&&(a.fog.name=e.fog.name)),void 0!==e.backgroundBlurriness&&(a.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(a.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":a=new aMe(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new kMe(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new rIe(e.color,e.intensity);break;case"DirectionalLight":a=new nIe(e.color,e.intensity);break;case"PointLight":a=new eIe(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new iIe(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new $Re(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new VRe(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=(new sIe).fromJSON(e);break;case"SkinnedMesh":s=l(e.geometry),o=c(e.material),a=new ITe(s,o),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":s=l(e.geometry),o=c(e.material),a=new YAe(s,o);break;case"InstancedMesh":s=l(e.geometry),o=c(e.material);const t=e.count,n=e.instanceMatrix,r=e.instanceColor;a=new $Te(s,o,t),a.instanceMatrix=new zTe(new Float32Array(n.array),16),void 0!==r&&(a.instanceColor=new zTe(new Float32Array(r.array),r.itemSize));break;case"BatchedMesh":s=l(e.geometry),o=c(e.material),a=new hPe(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,o),a.geometry=s,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map(e=>{const t=new XSe;t.min.fromArray(e.boxMin),t.max.fromArray(e.boxMax);const n=new hCe;return n.radius=e.sphereRadius,n.center.fromArray(e.sphereCenter),{boxInitialized:e.boxInitialized,box:t,sphereInitialized:e.sphereInitialized,sphere:n}}),a._maxGeometryCount=e.maxGeometryCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=d(e.matricesTexture.uuid);break;case"LOD":a=new STe;break;case"Line":a=new yPe(l(e.geometry),c(e.material));break;case"LineLoop":a=new NPe(l(e.geometry),c(e.material));break;case"LineSegments":a=new jPe(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":a=new EPe(l(e.geometry),c(e.material));break;case"Sprite":a=new wTe(c(e.material));break;case"Group":a=new qke;break;case"Bone":a=new DTe;break;default:a=new KCe}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.up&&a.up.fromArray(e.up),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children){const s=e.children;for(let e=0;e<s.length;e++)a.add(this.parseObject(s[e],t,n,r,i))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];a.animations.push(i[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=a.getObjectByProperty("uuid",n.object);void 0!==r&&a.addLevel(r,n.distance,n.hysteresis)}}return a}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse(function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n||e.bind(n,e.bindMatrix)}})}},ObjectSpaceNormalMap:1,OctahedronGeometry:GOe,OneFactor:201,OneMinusConstantAlphaFactor:214,OneMinusConstantColorFactor:212,OneMinusDstAlphaFactor:207,OneMinusDstColorFactor:209,OneMinusSrcAlphaFactor:Qje,OneMinusSrcColorFactor:203,OrthographicCamera:kMe,P3Primaries:U_e,PCFShadowMap:1,PCFSoftShadowMap:2,PMREMGenerator:zMe,Path:QPe,PerspectiveCamera:aMe,Plane:pMe,PlaneGeometry:yMe,PlaneHelper:class extends yPe{constructor(e,t=1,n=16776960){const r=n,i=new PAe;i.setAttribute("position",new _Ae([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),i.computeBoundingSphere(),super(i,new pPe({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=new PAe;a.setAttribute("position",new _Ae([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),a.computeBoundingSphere(),this.add(new YAe(a,new pAe({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}},PointLight:eIe,PointLightHelper:class extends YAe{constructor(e,t,n){super(new qOe(t,4,2),new pAe({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},Points:EPe,PointsMaterial:_Pe,PolarGridHelper:class extends jPe{constructor(e=10,t=16,n=8,r=64,i=4473924,a=8947848){i=new cAe(i),a=new cAe(a);const s=[],o=[];if(t>1)for(let c=0;c<t;c++){const n=c/t*(2*Math.PI),r=Math.sin(n)*e,l=Math.cos(n)*e;s.push(0,0,0),s.push(r,0,l);const d=1&c?i:a;o.push(d.r,d.g,d.b),o.push(d.r,d.g,d.b)}for(let c=0;c<n;c++){const t=1&c?i:a,l=e-e/n*c;for(let e=0;e<r;e++){let n=e/r*(2*Math.PI),i=Math.sin(n)*l,a=Math.cos(n)*l;s.push(i,0,a),o.push(t.r,t.g,t.b),n=(e+1)/r*(2*Math.PI),i=Math.sin(n)*l,a=Math.cos(n)*l,s.push(i,0,a),o.push(t.r,t.g,t.b)}}const l=new PAe;l.setAttribute("position",new _Ae(s,3)),l.setAttribute("color",new _Ae(o,3));super(l,new pPe({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},PolyhedronGeometry:aOe,PositionalAudio:class extends CIe{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(AIe,MIe,EIe),kIe.set(0,0,1).applyQuaternion(MIe);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(AIe.x,e),t.positionY.linearRampToValueAtTime(AIe.y,e),t.positionZ.linearRampToValueAtTime(AIe.z,e),t.orientationX.linearRampToValueAtTime(kIe.x,e),t.orientationY.linearRampToValueAtTime(kIe.y,e),t.orientationZ.linearRampToValueAtTime(kIe.z,e)}else t.setPosition(AIe.x,AIe.y,AIe.z),t.setOrientation(kIe.x,kIe.y,kIe.z)}},PropertyBinding:BIe,PropertyMixer:TIe,QuadraticBezierCurve:XPe,QuadraticBezierCurve3:$Pe,Quaternion:GSe,QuaternionKeyframeTrack:CRe,QuaternionLinearInterpolant:SRe,RED_GREEN_RGTC2_Format:b_e,RED_RGTC1_Format:36283,REVISION:Fje,RGBADepthPacking:3201,RGBAFormat:BNe,RGBAIntegerFormat:GNe,RGBA_ASTC_10x10_Format:p_e,RGBA_ASTC_10x5_Format:d_e,RGBA_ASTC_10x6_Format:u_e,RGBA_ASTC_10x8_Format:h_e,RGBA_ASTC_12x10_Format:m_e,RGBA_ASTC_12x12_Format:f_e,RGBA_ASTC_4x4_Format:n_e,RGBA_ASTC_5x4_Format:r_e,RGBA_ASTC_5x5_Format:i_e,RGBA_ASTC_6x5_Format:a_e,RGBA_ASTC_6x6_Format:s_e,RGBA_ASTC_8x5_Format:o_e,RGBA_ASTC_8x6_Format:l_e,RGBA_ASTC_8x8_Format:c_e,RGBA_BPTC_Format:g_e,RGBA_ETC2_EAC_Format:t_e,RGBA_PVRTC_2BPPV1_Format:ZNe,RGBA_PVRTC_4BPPV1_Format:JNe,RGBA_S3TC_DXT1_Format:KNe,RGBA_S3TC_DXT3_Format:qNe,RGBA_S3TC_DXT5_Format:XNe,RGB_BPTC_SIGNED_Format:v_e,RGB_BPTC_UNSIGNED_Format:x_e,RGB_ETC1_Format:QNe,RGB_ETC2_Format:e_e,RGB_PVRTC_2BPPV1_Format:YNe,RGB_PVRTC_4BPPV1_Format:$Ne,RGB_S3TC_DXT1_Format:WNe,RGFormat:1030,RGIntegerFormat:VNe,RawShaderMaterial:nRe,Ray:bCe,Raycaster:VIe,Rec709Primaries:F_e,RectAreaLight:iIe,RedFormat:zNe,RedIntegerFormat:HNe,ReinhardToneMapping:2,RenderTarget:USe,RepeatWrapping:vNe,ReplaceStencilOp:7681,ReverseSubtractEquation:102,RingGeometry:WOe,SIGNED_RED_GREEN_RGTC2_Format:w_e,SIGNED_RED_RGTC1_Format:y_e,SRGBColorSpace:O_e,SRGBTransfer:B_e,Scene:rTe,ShaderChunk:bMe,ShaderLib:jMe,ShaderMaterial:rMe,ShadowMaterial:tRe,Shape:hOe,ShapeGeometry:KOe,ShapePath:class{constructor(){this.type="ShapePath",this.color=new cAe,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new QPe,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,a){return this.currentPath.bezierCurveTo(e,t,n,r,i,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const n=t.length;let r=!1;for(let i=n-1,a=0;a<n;i=a++){let n=t[i],s=t[a],o=s.x-n.x,l=s.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[a],o=-o,s=t[i],l=-l),e.y<n.y||e.y>s.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-o*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(s.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=s.x)return!0}}return r}const n=BOe.isClockWise,r=this.subPaths;if(0===r.length)return[];let i,a,s;const o=[];if(1===r.length)return a=r[0],s=new hOe,s.curves=a.curves,o.push(s),o;let l=!n(r[0].getPoints());l=e?!l:l;const c=[],d=[];let u,h,p=[],m=0;d[m]=void 0,p[m]=[];for(let f=0,g=r.length;f<g;f++)a=r[f],u=a.getPoints(),i=n(u),i=e?!i:i,i?(!l&&d[m]&&m++,d[m]={s:new hOe,p:u},d[m].s.curves=a.curves,l&&m++,p[m]=[]):p[m].push({h:a,p:u[0]});if(!d[0])return function(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],i=new hOe;i.curves=r.curves,t.push(i)}return t}(r);if(d.length>1){let e=!1,n=0;for(let t=0,r=d.length;t<r;t++)c[t]=[];for(let r=0,i=d.length;r<i;r++){const i=p[r];for(let a=0;a<i.length;a++){const s=i[a];let o=!0;for(let i=0;i<d.length;i++)t(s.p,d[i].p)&&(r!==i&&n++,o?(o=!1,c[i].push(s)):e=!0);o&&c[r].push(s)}}n>0&&!1===e&&(p=c)}for(let f=0,g=d.length;f<g;f++){s=d[f].s,o.push(s),h=p[f];for(let e=0,t=h.length;e<t;e++)s.holes.push(h[e].h)}return o}},ShapeUtils:BOe,ShortType:ENe,Skeleton:UTe,SkeletonHelper:class extends jPe{constructor(e){const t=eDe(e),n=new PAe,r=[],i=[],a=new cAe(0,0,1),s=new cAe(0,1,0);for(let o=0;o<t.length;o++){const e=t[o];e.parent&&e.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(a.r,a.g,a.b),i.push(s.r,s.g,s.b))}n.setAttribute("position",new _Ae(r,3)),n.setAttribute("color",new _Ae(i,3));super(n,new pPe({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");QIe.copy(this.root.matrixWorld).invert();for(let i=0,a=0;i<t.length;i++){const e=t[i];e.parent&&e.parent.isBone&&(ZIe.multiplyMatrices(QIe,e.matrixWorld),JIe.setFromMatrixPosition(ZIe),r.setXYZ(a,JIe.x,JIe.y,JIe.z),ZIe.multiplyMatrices(QIe,e.parent.matrixWorld),JIe.setFromMatrixPosition(ZIe),r.setXYZ(a+1,JIe.x,JIe.y,JIe.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}},SkinnedMesh:ITe,Source:ISe,Sphere:hCe,SphereGeometry:qOe,Spherical:KIe,SphericalHarmonics3:aIe,SplineCurve:YPe,SpotLight:$Re,SpotLightHelper:class extends KCe{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new PAe,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,s=1,o=32;a<o;a++,s++){const e=a/o*Math.PI*2,t=s/o*Math.PI*2;r.push(Math.cos(e),Math.sin(e),1,Math.cos(t),Math.sin(t),1)}n.setAttribute("position",new _Ae(r,3));const i=new pPe({fog:!1,toneMapped:!1});this.cone=new jPe(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),YIe.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(YIe),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},Sprite:wTe,SpriteMaterial:oTe,SrcAlphaFactor:Zje,SrcAlphaSaturateFactor:210,SrcColorFactor:202,StaticCopyUsage:35046,StaticDrawUsage:Y_e,StaticReadUsage:35045,StereoCamera:class{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new aMe,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new aMe,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,yIe.copy(e.projectionMatrix);const n=t.eyeSep/2,r=n*t.near/t.focus,i=t.near*Math.tan(iSe*t.fov*.5)/t.zoom;let a,s;xIe.elements[12]=-n,vIe.elements[12]=n,a=-i*t.aspect+r,s=i*t.aspect+r,yIe.elements[0]=2*t.near/(s-a),yIe.elements[8]=(s+a)/(s-a),this.cameraL.projectionMatrix.copy(yIe),a=-i*t.aspect-r,s=i*t.aspect-r,yIe.elements[0]=2*t.near/(s-a),yIe.elements[8]=(s+a)/(s-a),this.cameraR.projectionMatrix.copy(yIe)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(xIe),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(vIe)}},StreamCopyUsage:35042,StreamDrawUsage:35040,StreamReadUsage:35041,StringKeyframeTrack:ARe,SubtractEquation:101,SubtractiveBlending:3,TOUCH:zje,TangentSpaceNormalMap:0,TetrahedronGeometry:XOe,Texture:BSe,TextureLoader:zRe,TorusGeometry:$Oe,TorusKnotGeometry:YOe,Triangle:iAe,TriangleFanDrawMode:2,TriangleStripDrawMode:1,TrianglesDrawMode:0,TubeGeometry:JOe,TwoPassDoubleSide:2,UVMapping:uNe,Uint16BufferAttribute:jAe,Uint32BufferAttribute:NAe,Uint8BufferAttribute:class extends wAe{constructor(e,t,n){super(new Uint8Array(e),t,n)}},Uint8ClampedBufferAttribute:class extends wAe{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}},Uniform:zIe,UniformsGroup:class extends tSe{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:HIe++}),this.name="",this.usage=Y_e,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++){const e=Array.isArray(t[n])?t[n]:[t[n]];for(let t=0;t<e.length;t++)this.uniforms.push(e[t].clone())}return this}clone(){return(new this.constructor).copy(this)}},UniformsLib:wMe,UniformsUtils:nMe,UnsignedByteType:ANe,UnsignedInt248Type:LNe,UnsignedIntType:PNe,UnsignedShort4444Type:INe,UnsignedShort5551Type:DNe,UnsignedShortType:kNe,VSMShadowMap:3,Vector2:fSe,Vector3:WSe,Vector4:FSe,VectorKeyframeTrack:MRe,VideoTexture:class extends BSe{constructor(e,t,n,r,i,a,s,o,l){super(e,t,n,r,i,a,s,o,l),this.isVideoTexture=!0,this.minFilter=void 0!==a?a:NNe,this.magFilter=void 0!==i?i:NNe,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)})}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},WebGL1Renderer:eTe,WebGL3DRenderTarget:class extends zSe{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new VSe(null,e,t,n),this.texture.isRenderTargetTexture=!0}},WebGLArrayRenderTarget:class extends zSe{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new HSe(null,e,t,n),this.texture.isRenderTargetTexture=!0}},WebGLCoordinateSystem:Q_e,WebGLCubeRenderTarget:cMe,WebGLMultipleRenderTargets:class extends zSe{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const i=this.texture;this.texture=[];for(let a=0;a<n;a++)this.texture[a]=i.clone(),this.texture[a].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}},WebGLRenderTarget:zSe,WebGLRenderer:Qke,WebGLUtils:Wke,WebGPUCoordinateSystem:eSe,WireframeGeometry:ZOe,WrapAroundEnding:A_e,ZeroCurvatureEnding:S_e,ZeroFactor:200,ZeroSlopeEnding:C_e,ZeroStencilOp:0,_SRGBAFormat:Z_e,createCanvasElement:jSe,sRGBEncoding:T_e},Symbol.toStringTag,{value:"Module"}));var fDe={exports:{}},gDe={ConcurrentRoot:1,ContinuousEventPriority:4,DefaultEventPriority:16,DiscreteEventPriority:1,IdleEventPriority:536870912,LegacyRoot:0};fDe.exports=gDe;var vDe=fDe.exports;function xDe(e){let t;const n=new Set,r=(e,r)=>{const i="function"==typeof e?e(t):e;if(i!==t){const e=t;t=r?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,a={setState:r,getState:i,subscribe:(e,r,a)=>r||a?((e,r=i,a=Object.is)=>{let s=r(t);function o(){const n=r(t);if(!a(s,n)){const t=s;e(s=n,t)}}return n.add(o),()=>n.delete(o)})(e,r,a):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(r,i,a),a}const yDe="undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?Ve.useEffect:Ve.useLayoutEffect;function bDe(e){const t="function"==typeof e?xDe(e):e,n=(e=t.getState,n=Object.is)=>{const[,r]=Ve.useReducer(e=>e+1,0),i=t.getState(),a=Ve.useRef(i),s=Ve.useRef(e),o=Ve.useRef(n),l=Ve.useRef(!1),c=Ve.useRef();let d;void 0===c.current&&(c.current=e(i));let u=!1;(a.current!==i||s.current!==e||o.current!==n||l.current)&&(d=e(i),u=!n(c.current,d)),yDe(()=>{u&&(c.current=d),a.current=i,s.current=e,o.current=n,l.current=!1});const h=Ve.useRef(i);yDe(()=>{const e=()=>{try{const e=t.getState(),n=s.current(e);o.current(c.current,n)||(a.current=e,c.current=n,r())}catch(e){l.current=!0,r()}},n=t.subscribe(e);return t.getState()!==h.current&&e(),n},[]);const p=u?d:c.current;return Ve.useDebugValue(p),p};return Object.assign(n,t),n[Symbol.iterator]=function(){const e=[n,t];return{next(){const t=e.length<=0;return{value:e.shift(),done:t}}}},n}const wDe=[];function jDe(e,t,n=(e,t)=>e===t){if(e===t)return!0;if(!e||!t)return!1;const r=e.length;if(t.length!==r)return!1;for(let i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}function NDe(e,t=null,n=!1,r={}){null===t&&(t=[e]);for(const s of wDe)if(jDe(t,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!n)throw s.promise}const i={keys:t,equal:r.equal,remove:()=>{const e=wDe.indexOf(i);-1!==e&&wDe.splice(e,1)},promise:(a=e,"object"==typeof a&&"function"==typeof a.then?e:e(...t)).then(e=>{i.response=e,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(e=>i.error=e)};var a;if(wDe.push(i),!n)throw i.promise}var _De,SDe,CDe={exports:{}},ADe={exports:{}},MDe={};function EDe(){return SDe||(SDe=1,ADe.exports=(_De||(_De=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,s=a>>>1;r<s;){var o=2*(r+1)-1,l=e[o],c=o+1,d=e[c];if(0>i(l,n))c<a&&0>i(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<a&&0>i(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],c=[],d=1,u=null,h=3,p=!1,m=!1,f=!1,g="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,x="undefined"!=typeof setImmediate?setImmediate:null;function y(e){for(var i=n(c);null!==i;){if(null===i.callback)r(c);else{if(!(i.startTime<=e))break;r(c),i.sortIndex=i.expirationTime,t(l,i)}i=n(c)}}function b(e){if(f=!1,y(e),!m)if(null!==n(l))m=!0,P(w);else{var t=n(c);null!==t&&O(b,t.startTime-e)}}function w(t,i){m=!1,f&&(f=!1,v(S),S=-1),p=!0;var a=h;try{for(y(i),u=n(l);null!==u&&(!(u.expirationTime>i)||t&&!M());){var s=u.callback;if("function"==typeof s){u.callback=null,h=u.priorityLevel;var o=s(u.expirationTime<=i);i=e.unstable_now(),"function"==typeof o?u.callback=o:u===n(l)&&r(l),y(i)}else r(l);u=n(l)}if(null!==u)var d=!0;else{var g=n(c);null!==g&&O(b,g.startTime-i),d=!1}return d}finally{u=null,h=a,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,N=!1,_=null,S=-1,C=5,A=-1;function M(){return!(e.unstable_now()-A<C)}function E(){if(null!==_){var t=e.unstable_now();A=t;var n=!0;try{n=_(!0,t)}finally{n?j():(N=!1,_=null)}}else N=!1}if("function"==typeof x)j=function(){x(E)};else if("undefined"!=typeof MessageChannel){var k=new MessageChannel,T=k.port2;k.port1.onmessage=E,j=function(){T.postMessage(null)}}else j=function(){g(E,0)};function P(e){_=e,N||(N=!0,j())}function O(t,n){S=g(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,P(w))},e.unstable_forceFrameRate=function(e){0>e||125<e||(C=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,i,a){var s=e.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?s+a:s,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return r={id:d++,callback:i,priorityLevel:r,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(r.sortIndex=a,t(c,r),null===n(l)&&r===n(c)&&(f?(v(S),S=-1):f=!0,O(b,a-s))):(r.sortIndex=o,t(l,r),m||p||(m=!0,P(w))),r},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(MDe)),MDe)),ADe.exports}CDe.exports=function(e){var t={},n=Ve,r=EDe(),i=Object.assign;function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,o=Symbol.for("react.element"),l=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),b=Symbol.iterator;function w(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=b&&e[b]||e["@@iterator"])?e:null}function j(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case c:return"Fragment";case l:return"Portal";case u:return"Profiler";case d:return"StrictMode";case f:return"Suspense";case g:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case p:return(e.displayName||"Context")+".Consumer";case h:return(e._context.displayName||"Context")+".Provider";case m:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case v:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case x:t=e._payload,e=e._init;try{return j(e(t))}catch(n){}}return null}function N(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(t);case 8:return t===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function _(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function S(e){if(_(e)!==e)throw Error(a(188))}function C(e){var t=e.alternate;if(!t){if(null===(t=_(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return S(i),e;if(s===r)return S(i),t;s=s.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}function A(e){return null!==(e=C(e))?M(e):null}function M(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=M(e);if(null!==t)return t;e=e.sibling}return null}function E(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){if(4!==e.tag){var t=E(e);if(null!==t)return t}e=e.sibling}return null}var k,T=Array.isArray,P=e.getPublicInstance,O=e.getRootHostContext,R=e.getChildHostContext,I=e.prepareForCommit,D=e.resetAfterCommit,L=e.createInstance,B=e.appendInitialChild,F=e.finalizeInitialChildren,U=e.prepareUpdate,z=e.shouldSetTextContent,H=e.createTextInstance,V=e.scheduleTimeout,G=e.cancelTimeout,W=e.noTimeout,K=e.isPrimaryRenderer,q=e.supportsMutation,X=e.supportsPersistence,$=e.supportsHydration,Y=e.getInstanceFromNode,J=e.preparePortalMount,Z=e.getCurrentEventPriority,Q=e.detachDeletedInstance,ee=e.supportsMicrotasks,te=e.scheduleMicrotask,ne=e.supportsTestSelectors,re=e.findFiberRoot,ie=e.getBoundingRect,ae=e.getTextContent,se=e.isHiddenSubtree,oe=e.matchAccessibilityRole,le=e.setFocusIfFocusable,ce=e.setupIntersectionObserver,de=e.appendChild,ue=e.appendChildToContainer,he=e.commitTextUpdate,pe=e.commitMount,me=e.commitUpdate,fe=e.insertBefore,ge=e.insertInContainerBefore,ve=e.removeChild,xe=e.removeChildFromContainer,ye=e.resetTextContent,be=e.hideInstance,we=e.hideTextInstance,je=e.unhideInstance,Ne=e.unhideTextInstance,_e=e.clearContainer,Se=e.cloneInstance,Ce=e.createContainerChildSet,Ae=e.appendChildToContainerChildSet,Me=e.finalizeContainerChildren,Ee=e.replaceContainerChildren,ke=e.cloneHiddenInstance,Te=e.cloneHiddenTextInstance,Pe=e.canHydrateInstance,Oe=e.canHydrateTextInstance,Re=e.canHydrateSuspenseInstance,Ie=e.isSuspenseInstancePending,De=e.isSuspenseInstanceFallback,Le=e.registerSuspenseInstanceRetry,Be=e.getNextHydratableSibling,Fe=e.getFirstHydratableChild,Ue=e.getFirstHydratableChildWithinContainer,ze=e.getFirstHydratableChildWithinSuspenseInstance,He=e.hydrateInstance,Ge=e.hydrateTextInstance,We=e.hydrateSuspenseInstance,Ke=e.getNextHydratableInstanceAfterSuspenseInstance,qe=e.commitHydratedContainer,Xe=e.commitHydratedSuspenseInstance,$e=e.clearSuspenseBoundary,Ye=e.clearSuspenseBoundaryFromContainer,Je=e.shouldDeleteUnhydratedTailInstances,Ze=e.didNotMatchHydratedContainerTextInstance,Qe=e.didNotMatchHydratedTextInstance;function et(e){if(void 0===k)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);k=t&&t[1]||""}return"\n"+k+e}var tt=!1;function nt(e,t){if(!e||tt)return"";tt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(EI){var r=EI}Reflect.construct(e,[],t)}else{try{t.call()}catch(EI){r=EI}e.call(t.prototype)}else{try{throw Error()}catch(EI){r=EI}e()}}catch(EI){if(EI&&r&&"string"==typeof EI.stack){for(var i=EI.stack.split("\n"),a=r.stack.split("\n"),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(1!==s||1!==o)do{if(s--,0>--o||i[s]!==a[o]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=o);break}}}finally{tt=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?et(e):""}var rt=Object.prototype.hasOwnProperty,it=[],at=-1;function st(e){return{current:e}}function ot(e){0>at||(e.current=it[at],it[at]=null,at--)}function lt(e,t){at++,it[at]=e.current,e.current=t}var ct={},dt=st(ct),ut=st(!1),ht=ct;function pt(e,t){var n=e.type.contextTypes;if(!n)return ct;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mt(e){return null!=e.childContextTypes}function ft(){ot(ut),ot(dt)}function gt(e,t,n){if(dt.current!==ct)throw Error(a(168));lt(dt,t),lt(ut,n)}function vt(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(a(108,N(e)||"Unknown",s));return i({},n,r)}function xt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ct,ht=dt.current,lt(dt,e),lt(ut,ut.current),!0}function yt(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=vt(e,t,ht),r.__reactInternalMemoizedMergedChildContext=e,ot(ut),ot(dt),lt(dt,e)):ot(ut),lt(ut,n)}var bt=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(wt(e)/jt|0)|0},wt=Math.log,jt=Math.LN2,Nt=64,_t=4194304;function St(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ct(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=268435455&n;if(0!==s){var o=s&~i;0!==o?r=St(o):0!==(a&=s)&&(r=St(a))}else 0!==(s=n&~i)?r=St(s):0!==a&&(r=St(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&4194240&a))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-bt(t)),r|=e[n],t&=~i;return r}function At(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Mt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Et(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function kt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-bt(t)]=n}function Tt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-bt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Pt=0;function Ot(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var Rt=r.unstable_scheduleCallback,It=r.unstable_cancelCallback,Dt=r.unstable_shouldYield,Lt=r.unstable_requestPaint,Bt=r.unstable_now,Ft=r.unstable_ImmediatePriority,Ut=r.unstable_UserBlockingPriority,zt=r.unstable_NormalPriority,Ht=r.unstable_IdlePriority,Vt=null,Gt=null,Wt="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Kt=null,qt=!1,Xt=!1;function $t(e){null===Kt?Kt=[e]:Kt.push(e)}function Yt(){if(!Xt&&null!==Kt){Xt=!0;var e=0,t=Pt;try{var n=Kt;for(Pt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Kt=null,qt=!1}catch(CI){throw null!==Kt&&(Kt=Kt.slice(e+1)),Rt(Ft,Yt),CI}finally{Pt=t,Xt=!1}}return null}var Jt=s.ReactCurrentBatchConfig;function Zt(e,t){if(Wt(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!rt.call(t,i)||!Wt(e[i],t[i]))return!1}return!0}function Qt(e){switch(e.tag){case 5:return et(e.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return nt(e.type,!1);case 11:return nt(e.type.render,!1);case 1:return nt(e.type,!0);default:return""}}function en(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var tn=st(null),nn=null,rn=null,an=null;function sn(){an=rn=nn=null}function on(e,t,n){K?(lt(tn,t._currentValue),t._currentValue=n):(lt(tn,t._currentValue2),t._currentValue2=n)}function ln(e){var t=tn.current;ot(tn),K?e._currentValue=t:e._currentValue2=t}function cn(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function dn(e,t){nn=e,an=rn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ii=!0),e.firstContext=null)}function un(e){var t=K?e._currentValue:e._currentValue2;if(an!==e)if(e={context:e,memoizedValue:t,next:null},null===rn){if(null===nn)throw Error(a(308));rn=e,nn.dependencies={lanes:0,firstContext:e}}else rn=rn.next=e;return t}var hn=null,pn=!1;function mn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function gn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vn(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==qa&&1&e.mode&&!(2&Ka)?(null===(e=n.interleaved)?(t.next=t,null===hn?hn=[n]:hn.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function xn(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Tt(e,n)}}function yn(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function bn(e,t,n,r){var a=e.updateQueue;pn=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(null!==l){a.shared.pending=null;var c=l,d=c.next;c.next=null,null===o?s=d:o.next=d,o=c;var u=e.alternate;null!==u&&(l=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===l?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c)}if(null!==s){var h=a.baseState;for(o=0,u=d=c=null,l=s;;){var p=l.lane,m=l.eventTime;if((r&p)===p){null!==u&&(u=u.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var f=e,g=l;switch(p=t,m=n,g.tag){case 1:if("function"==typeof(f=g.payload)){h=f.call(m,h,p);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(p="function"==typeof(f=g.payload)?f.call(m,h,p):f))break e;h=i({},h,p);break e;case 2:pn=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(p=a.effects)?a.effects=[l]:p.push(l))}else m={eventTime:m,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===u?(d=u=m,c=h):u=u.next=m,o|=p;if(null===(l=l.next)){if(null===(l=a.shared.pending))break;l=(p=l).next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}if(null===u&&(c=h),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{o|=a.lane,a=a.next}while(a!==t)}else null===s&&(a.shared.lanes=0);es|=o,e.lanes=o,e.memoizedState=h}}function wn(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(a(191,i));i.call(r)}}}var jn=(new n.Component).refs;function Nn(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var _n={isMounted:function(e){return!!(e=e._reactInternals)&&_(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ys(),i=bs(e),a=gn(r,i);a.payload=t,null!=n&&(a.callback=n),vn(e,a),null!==(t=ws(e,i,r))&&xn(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ys(),i=bs(e),a=gn(r,i);a.tag=1,a.payload=t,null!=n&&(a.callback=n),vn(e,a),null!==(t=ws(e,i,r))&&xn(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ys(),r=bs(e),i=gn(n,r);i.tag=2,null!=t&&(i.callback=t),vn(e,i),null!==(t=ws(e,r,n))&&xn(t,e,r)}};function Sn(e,t,n,r,i,a,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!(t.prototype&&t.prototype.isPureReactComponent&&Zt(n,r)&&Zt(i,a))}function Cn(e,t,n){var r=!1,i=ct,a=t.contextType;return"object"==typeof a&&null!==a?a=un(a):(i=mt(t)?ht:dt.current,a=(r=null!=(r=t.contextTypes))?pt(e,i):ct),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=_n,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function An(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&_n.enqueueReplaceState(t,t.state,null)}function Mn(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=jn,mn(e);var a=t.contextType;"object"==typeof a&&null!==a?i.context=un(a):(a=mt(t)?ht:dt.current,i.context=pt(e,a)),i.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(Nn(e,t,a,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&_n.enqueueReplaceState(i,i.state,null),bn(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}var En=[],kn=0,Tn=null,Pn=0,On=[],Rn=0,In=null,Dn=1,Ln="";function Bn(e,t){En[kn++]=Pn,En[kn++]=Tn,Tn=e,Pn=t}function Fn(e,t,n){On[Rn++]=Dn,On[Rn++]=Ln,On[Rn++]=In,In=e;var r=Dn;e=Ln;var i=32-bt(r)-1;r&=~(1<<i),n+=1;var a=32-bt(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Dn=1<<32-bt(t)+i|n<<i|r,Ln=a+e}else Dn=1<<a|n<<i|r,Ln=e}function Un(e){null!==e.return&&(Bn(e,1),Fn(e,1,0))}function zn(e){for(;e===Tn;)Tn=En[--kn],En[kn]=null,Pn=En[--kn],En[kn]=null;for(;e===In;)In=On[--Rn],On[Rn]=null,Ln=On[--Rn],On[Rn]=null,Dn=On[--Rn],On[Rn]=null}var Hn=null,Vn=null,Gn=!1,Wn=!1,Kn=null;function qn(e,t){var n=Ys(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Xn(e,t){switch(e.tag){case 5:return null!==(t=Pe(t,e.type,e.pendingProps))&&(e.stateNode=t,Hn=e,Vn=Fe(t),!0);case 6:return null!==(t=Oe(t,e.pendingProps))&&(e.stateNode=t,Hn=e,Vn=null,!0);case 13:if(null!==(t=Re(t))){var n=null!==In?{id:Dn,overflow:Ln}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ys(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Hn=e,Vn=null,!0}return!1;default:return!1}}function $n(e){return!(!(1&e.mode)||128&e.flags)}function Yn(e){if(Gn){var t=Vn;if(t){var n=t;if(!Xn(e,t)){if($n(e))throw Error(a(418));t=Be(n);var r=Hn;t&&Xn(e,t)?qn(r,n):(e.flags=-4097&e.flags|2,Gn=!1,Hn=e)}}else{if($n(e))throw Error(a(418));e.flags=-4097&e.flags|2,Gn=!1,Hn=e}}}function Jn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Hn=e}function Zn(e){if(!$||e!==Hn)return!1;if(!Gn)return Jn(e),Gn=!0,!1;if(3!==e.tag&&(5!==e.tag||Je(e.type)&&!z(e.type,e.memoizedProps))){var t=Vn;if(t){if($n(e)){for(e=Vn;e;)e=Be(e);throw Error(a(418))}for(;t;)qn(e,t),t=Be(t)}}if(Jn(e),13===e.tag){if(!$)throw Error(a(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));Vn=Ke(e)}else Vn=Hn?Be(e.stateNode):null;return!0}function Qn(){$&&(Vn=Hn=null,Wn=Gn=!1)}function er(e){null===Kn?Kn=[e]:Kn.push(e)}function tr(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===s?t.ref:((t=function(e){var t=i.refs;t===jn&&(t=i.refs={}),null===e?delete t[s]:t[s]=e})._stringRef=s,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function nr(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function rr(e){return(0,e._init)(e._payload)}function ir(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Zs(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function d(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=no(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n,r){var a=n.type;return a===c?m(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===x&&rr(a)===t.type)?((r=i(t,n.props)).ref=tr(e,t,n),r.return=e,r):((r=Qs(n.type,n.key,n.props,null,e.mode,r)).ref=tr(e,t,n),r.return=e,r)}function p(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=ro(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function m(e,t,n,r,a){return null===t||7!==t.tag?((t=eo(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=no(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case o:return(n=Qs(t.type,t.key,t.props,null,e.mode,n)).ref=tr(e,null,t),n.return=e,n;case l:return(t=ro(t,e.mode,n)).return=e,t;case x:return f(e,(0,t._init)(t._payload),n)}if(T(t)||w(t))return(t=eo(t,e.mode,n,null)).return=e,t;nr(e,t)}return null}function g(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:u(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case o:return n.key===i?h(e,t,n,r):null;case l:return n.key===i?p(e,t,n,r):null;case x:return g(e,t,(i=n._init)(n._payload),r)}if(T(n)||w(n))return null!==i?null:m(e,t,n,r,null);nr(e,n)}return null}function v(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case o:return h(t,e=e.get(null===r.key?n:r.key)||null,r,i);case l:return p(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return v(e,t,n,(0,r._init)(r._payload),i)}if(T(r)||w(r))return m(t,e=e.get(n)||null,r,i,null);nr(t,r)}return null}return function u(h,p,m,y){if("object"==typeof m&&null!==m&&m.type===c&&null===m.key&&(m=m.props.children),"object"==typeof m&&null!==m){switch(m.$$typeof){case o:e:{for(var b=m.key,j=p;null!==j;){if(j.key===b){if((b=m.type)===c){if(7===j.tag){n(h,j.sibling),(p=i(j,m.props.children)).return=h,h=p;break e}}else if(j.elementType===b||"object"==typeof b&&null!==b&&b.$$typeof===x&&rr(b)===j.type){n(h,j.sibling),(p=i(j,m.props)).ref=tr(h,j,m),p.return=h,h=p;break e}n(h,j);break}t(h,j),j=j.sibling}m.type===c?((p=eo(m.props.children,h.mode,y,m.key)).return=h,h=p):((y=Qs(m.type,m.key,m.props,null,h.mode,y)).ref=tr(h,p,m),y.return=h,h=y)}return d(h);case l:e:{for(j=m.key;null!==p;){if(p.key===j){if(4===p.tag&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){n(h,p.sibling),(p=i(p,m.children||[])).return=h,h=p;break e}n(h,p);break}t(h,p),p=p.sibling}(p=ro(m,h.mode,y)).return=h,h=p}return d(h);case x:return u(h,p,(j=m._init)(m._payload),y)}if(T(m))return function(i,a,o,l){for(var c=null,d=null,u=a,h=a=0,p=null;null!==u&&h<o.length;h++){u.index>h?(p=u,u=null):p=u.sibling;var m=g(i,u,o[h],l);if(null===m){null===u&&(u=p);break}e&&u&&null===m.alternate&&t(i,u),a=s(m,a,h),null===d?c=m:d.sibling=m,d=m,u=p}if(h===o.length)return n(i,u),Gn&&Bn(i,h),c;if(null===u){for(;h<o.length;h++)null!==(u=f(i,o[h],l))&&(a=s(u,a,h),null===d?c=u:d.sibling=u,d=u);return Gn&&Bn(i,h),c}for(u=r(i,u);h<o.length;h++)null!==(p=v(u,i,h,o[h],l))&&(e&&null!==p.alternate&&u.delete(null===p.key?h:p.key),a=s(p,a,h),null===d?c=p:d.sibling=p,d=p);return e&&u.forEach(function(e){return t(i,e)}),Gn&&Bn(i,h),c}(h,p,m,y);if(w(m))return function(i,o,l,c){var d=w(l);if("function"!=typeof d)throw Error(a(150));if(null==(l=d.call(l)))throw Error(a(151));for(var u=d=null,h=o,p=o=0,m=null,x=l.next();null!==h&&!x.done;p++,x=l.next()){h.index>p?(m=h,h=null):m=h.sibling;var y=g(i,h,x.value,c);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(i,h),o=s(y,o,p),null===u?d=y:u.sibling=y,u=y,h=m}if(x.done)return n(i,h),Gn&&Bn(i,p),d;if(null===h){for(;!x.done;p++,x=l.next())null!==(x=f(i,x.value,c))&&(o=s(x,o,p),null===u?d=x:u.sibling=x,u=x);return Gn&&Bn(i,p),d}for(h=r(i,h);!x.done;p++,x=l.next())null!==(x=v(h,i,p,x.value,c))&&(e&&null!==x.alternate&&h.delete(null===x.key?p:x.key),o=s(x,o,p),null===u?d=x:u.sibling=x,u=x);return e&&h.forEach(function(e){return t(i,e)}),Gn&&Bn(i,p),d}(h,p,m,y);nr(h,m)}return"string"==typeof m&&""!==m||"number"==typeof m?(m=""+m,null!==p&&6===p.tag?(n(h,p.sibling),(p=i(p,m)).return=h,h=p):(n(h,p),(p=no(m,h.mode,y)).return=h,h=p),d(h)):n(h,p)}}var ar=ir(!0),sr=ir(!1),or={},lr=st(or),cr=st(or),dr=st(or);function ur(e){if(e===or)throw Error(a(174));return e}function hr(e,t){lt(dr,t),lt(cr,e),lt(lr,or),e=O(t),ot(lr),lt(lr,e)}function pr(){ot(lr),ot(cr),ot(dr)}function mr(e){var t=ur(dr.current),n=ur(lr.current);n!==(t=R(n,e.type,t))&&(lt(cr,e),lt(lr,t))}function fr(e){cr.current===e&&(ot(lr),ot(cr))}var gr=st(0);function vr(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Ie(n)||De(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xr=[];function yr(){for(var e=0;e<xr.length;e++){var t=xr[e];K?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}xr.length=0}var br=s.ReactCurrentDispatcher,wr=s.ReactCurrentBatchConfig,jr=0,Nr=null,_r=null,Sr=null,Cr=!1,Ar=!1,Mr=0,Er=0;function kr(){throw Error(a(321))}function Tr(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Wt(e[n],t[n]))return!1;return!0}function Pr(e,t,n,r,i,s){if(jr=s,Nr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,br.current=null===e||null===e.memoizedState?mi:fi,e=n(r,i),Ar){s=0;do{if(Ar=!1,Mr=0,25<=s)throw Error(a(301));s+=1,Sr=_r=null,t.updateQueue=null,br.current=gi,e=n(r,i)}while(Ar)}if(br.current=pi,t=null!==_r&&null!==_r.next,jr=0,Sr=_r=Nr=null,Cr=!1,t)throw Error(a(300));return e}function Or(){var e=0!==Mr;return Mr=0,e}function Rr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Sr?Nr.memoizedState=Sr=e:Sr=Sr.next=e,Sr}function Ir(){if(null===_r){var e=Nr.alternate;e=null!==e?e.memoizedState:null}else e=_r.next;var t=null===Sr?Nr.memoizedState:Sr.next;if(null!==t)Sr=t,_r=e;else{if(null===e)throw Error(a(310));e={memoizedState:(_r=e).memoizedState,baseState:_r.baseState,baseQueue:_r.baseQueue,queue:_r.queue,next:null},null===Sr?Nr.memoizedState=Sr=e:Sr=Sr.next=e}return Sr}function Dr(e,t){return"function"==typeof t?t(e):t}function Lr(e){var t=Ir(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=_r,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=o=null,c=null,d=s;do{var u=d.lane;if((jr&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,Nr.lanes|=u,es|=u}d=d.next}while(null!==d&&d!==s);null===c?o=r:c.next=l,Wt(r,t.memoizedState)||(Ii=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,Nr.lanes|=s,es|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Br(e){var t=Ir(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);Wt(s,t.memoizedState)||(Ii=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Fr(){}function Ur(e,t){var n=Nr,r=Ir(),i=t(),s=!Wt(r.memoizedState,i);if(s&&(r.memoizedState=i,Ii=!0),r=r.queue,Jr(Vr.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==Sr&&1&Sr.memoizedState.tag){if(n.flags|=2048,Kr(9,Hr.bind(null,n,r,i,t),void 0,null),null===qa)throw Error(a(349));30&jr||zr(n,t,i)}return i}function zr(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Nr.updateQueue)?(t={lastEffect:null,stores:null},Nr.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Hr(e,t,n,r){t.value=n,t.getSnapshot=r,Gr(t)&&ws(e,1,-1)}function Vr(e,t,n){return n(function(){Gr(t)&&ws(e,1,-1)})}function Gr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Wt(e,n)}catch(r){return!0}}function Wr(e){var t=Rr();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dr,lastRenderedState:e},t.queue=e,e=e.dispatch=li.bind(null,Nr,e),[t.memoizedState,e]}function Kr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Nr.updateQueue)?(t={lastEffect:null,stores:null},Nr.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function qr(){return Ir().memoizedState}function Xr(e,t,n,r){var i=Rr();Nr.flags|=e,i.memoizedState=Kr(1|t,n,void 0,void 0===r?null:r)}function $r(e,t,n,r){var i=Ir();r=void 0===r?null:r;var a=void 0;if(null!==_r){var s=_r.memoizedState;if(a=s.destroy,null!==r&&Tr(r,s.deps))return void(i.memoizedState=Kr(t,n,a,r))}Nr.flags|=e,i.memoizedState=Kr(1|t,n,a,r)}function Yr(e,t){return Xr(8390656,8,e,t)}function Jr(e,t){return $r(2048,8,e,t)}function Zr(e,t){return $r(4,2,e,t)}function Qr(e,t){return $r(4,4,e,t)}function ei(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ti(e,t,n){return n=null!=n?n.concat([e]):null,$r(4,4,ei.bind(null,t,e),n)}function ni(){}function ri(e,t){var n=Ir();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Tr(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ii(e,t){var n=Ir();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Tr(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ai(e,t){var n=Pt;Pt=0!==n&&4>n?n:4,e(!0);var r=wr.transition;wr.transition={};try{e(!1),t()}finally{Pt=n,wr.transition=r}}function si(){return Ir().memoizedState}function oi(e,t,n){var r=bs(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ci(e)?di(t,n):(ui(e,t,n),null!==(e=ws(e,r,n=ys()))&&hi(e,t,r))}function li(e,t,n){var r=bs(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ci(e))di(t,i);else{ui(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,Wt(o,s))return}catch(l){}null!==(e=ws(e,r,n=ys()))&&hi(e,t,r)}}function ci(e){var t=e.alternate;return e===Nr||null!==t&&t===Nr}function di(e,t){Ar=Cr=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ui(e,t,n){null!==qa&&1&e.mode&&!(2&Ka)?(null===(e=t.interleaved)?(n.next=n,null===hn?hn=[t]:hn.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function hi(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Tt(e,n)}}var pi={readContext:un,useCallback:kr,useContext:kr,useEffect:kr,useImperativeHandle:kr,useInsertionEffect:kr,useLayoutEffect:kr,useMemo:kr,useReducer:kr,useRef:kr,useState:kr,useDebugValue:kr,useDeferredValue:kr,useTransition:kr,useMutableSource:kr,useSyncExternalStore:kr,useId:kr,unstable_isNewReconciler:!1},mi={readContext:un,useCallback:function(e,t){return Rr().memoizedState=[e,void 0===t?null:t],e},useContext:un,useEffect:Yr,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Xr(4194308,4,ei.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Xr(4194308,4,e,t)},useInsertionEffect:function(e,t){return Xr(4,2,e,t)},useMemo:function(e,t){var n=Rr();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Rr();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=oi.bind(null,Nr,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Rr().memoizedState=e},useState:Wr,useDebugValue:ni,useDeferredValue:function(e){var t=Wr(e),n=t[0],r=t[1];return Yr(function(){var t=wr.transition;wr.transition={};try{r(e)}finally{wr.transition=t}},[e]),n},useTransition:function(){var e=Wr(!1),t=e[0];return e=ai.bind(null,e[1]),Rr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Nr,i=Rr();if(Gn){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===qa)throw Error(a(349));30&jr||zr(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Yr(Vr.bind(null,r,s,e),[e]),r.flags|=2048,Kr(9,Hr.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Rr(),t=qa.identifierPrefix;if(Gn){var n=Ln;t=":"+t+"R"+(n=(Dn&~(1<<32-bt(Dn)-1)).toString(32)+n),0<(n=Mr++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Er++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},fi={readContext:un,useCallback:ri,useContext:un,useEffect:Jr,useImperativeHandle:ti,useInsertionEffect:Zr,useLayoutEffect:Qr,useMemo:ii,useReducer:Lr,useRef:qr,useState:function(){return Lr(Dr)},useDebugValue:ni,useDeferredValue:function(e){var t=Lr(Dr),n=t[0],r=t[1];return Jr(function(){var t=wr.transition;wr.transition={};try{r(e)}finally{wr.transition=t}},[e]),n},useTransition:function(){return[Lr(Dr)[0],Ir().memoizedState]},useMutableSource:Fr,useSyncExternalStore:Ur,useId:si,unstable_isNewReconciler:!1},gi={readContext:un,useCallback:ri,useContext:un,useEffect:Jr,useImperativeHandle:ti,useInsertionEffect:Zr,useLayoutEffect:Qr,useMemo:ii,useReducer:Br,useRef:qr,useState:function(){return Br(Dr)},useDebugValue:ni,useDeferredValue:function(e){var t=Br(Dr),n=t[0],r=t[1];return Jr(function(){var t=wr.transition;wr.transition={};try{r(e)}finally{wr.transition=t}},[e]),n},useTransition:function(){return[Br(Dr)[0],Ir().memoizedState]},useMutableSource:Fr,useSyncExternalStore:Ur,useId:si,unstable_isNewReconciler:!1};function vi(e,t){try{var n="",r=t;do{n+=Qt(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}var xi,yi,bi,wi,ji="function"==typeof WeakMap?WeakMap:Map;function Ni(e,t,n){(n=gn(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){cs||(cs=!0,ds=r)},n}function _i(e,t,n){(n=gn(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===us?us=new Set([this]):us.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Si(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ji;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Gs.bind(null,e,t,n),t.then(e,e))}function Ci(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Ai(e,t,n,r,i){return 1&e.mode?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=gn(-1,1)).tag=2,vn(n,t))),n.lanes|=1),e)}function Mi(e){e.flags|=4}function Ei(e,t){if(null!==e&&e.child===t.child)return!0;if(16&t.flags)return!1;for(e=t.child;null!==e;){if(12854&e.flags||12854&e.subtreeFlags)return!1;e=e.sibling}return!0}if(q)xi=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)B(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},yi=function(){},bi=function(e,t,n,r,i){if((e=e.memoizedProps)!==r){var a=t.stateNode,s=ur(lr.current);n=U(a,n,e,r,i,s),(t.updateQueue=n)&&Mi(t)}},wi=function(e,t,n,r){n!==r&&Mi(t)};else if(X){xi=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var a=i.stateNode;n&&r&&(a=ke(a,i.type,i.memoizedProps,i)),B(e,a)}else if(6===i.tag)a=i.stateNode,n&&r&&(a=Te(a,i.memoizedProps,i)),B(e,a);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(a=i.child)&&(a.return=i),xi(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var ki=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var a=i.stateNode;n&&r&&(a=ke(a,i.type,i.memoizedProps,i)),Ae(e,a)}else if(6===i.tag)a=i.stateNode,n&&r&&(a=Te(a,i.memoizedProps,i)),Ae(e,a);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(a=i.child)&&(a.return=i),ki(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};yi=function(e,t){var n=t.stateNode;if(!Ei(e,t)){e=n.containerInfo;var r=Ce(e);ki(r,t,!1,!1),n.pendingChildren=r,Mi(t),Me(e,r)}},bi=function(e,t,n,r,i){var a=e.stateNode,s=e.memoizedProps;if((e=Ei(e,t))&&s===r)t.stateNode=a;else{var o=t.stateNode,l=ur(lr.current),c=null;s!==r&&(c=U(o,n,s,r,i,l)),e&&null===c?t.stateNode=a:(a=Se(a,c,n,s,r,t,e,o),F(a,n,r,i,l)&&Mi(t),t.stateNode=a,e?Mi(t):xi(a,t,!1,!1))}},wi=function(e,t,n,r){n!==r?(e=ur(dr.current),n=ur(lr.current),t.stateNode=H(r,e,n,t),Mi(t)):t.stateNode=e.stateNode}}else yi=function(){},bi=function(){},wi=function(){};function Ti(e,t){if(!Gn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Pi(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Oi(e,t,n){var r=t.pendingProps;switch(zn(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pi(t),null;case 1:case 17:return mt(t.type)&&ft(),Pi(t),null;case 3:return r=t.stateNode,pr(),ot(ut),ot(dt),yr(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Zn(t)?Mi(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==Kn&&(Cs(Kn),Kn=null))),yi(e,t),Pi(t),null;case 5:fr(t),n=ur(dr.current);var i=t.type;if(null!==e&&null!=t.stateNode)bi(e,t,i,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Pi(t),null}if(e=ur(lr.current),Zn(t)){if(!$)throw Error(a(175));e=He(t.stateNode,t.type,t.memoizedProps,n,e,t,!Wn),t.updateQueue=e,null!==e&&Mi(t)}else{var s=L(i,r,n,e,t);xi(s,t,!1,!1),t.stateNode=s,F(s,i,r,n,e)&&Mi(t)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Pi(t),null;case 6:if(e&&null!=t.stateNode)wi(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(a(166));if(e=ur(dr.current),n=ur(lr.current),Zn(t)){if(!$)throw Error(a(176));if(e=t.stateNode,r=t.memoizedProps,(n=Ge(e,r,t,!Wn))&&null!==(i=Hn))switch(s=!!(1&i.mode),i.tag){case 3:Ze(i.stateNode.containerInfo,e,r,s);break;case 5:Qe(i.type,i.memoizedProps,i.stateNode,e,r,s)}n&&Mi(t)}else t.stateNode=H(r,e,n,t)}return Pi(t),null;case 13:if(ot(gr),r=t.memoizedState,Gn&&null!==Vn&&1&t.mode&&!(128&t.flags)){for(e=Vn;e;)e=Be(e);return Qn(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Zn(t),null===e){if(!r)throw Error(a(318));if(!$)throw Error(a(344));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(a(317));We(e,t)}else Qn(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return Pi(t),null}return null!==Kn&&(Cs(Kn),Kn=null),128&t.flags?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Zn(t):n=null!==e.memoizedState,r&&!n&&(t.child.flags|=8192,1&t.mode&&(null===e||1&gr.current?0===Za&&(Za=3):Rs())),null!==t.updateQueue&&(t.flags|=4),Pi(t),null);case 4:return pr(),yi(e,t),null===e&&J(t.stateNode.containerInfo),Pi(t),null;case 10:return ln(t.type._context),Pi(t),null;case 19:if(ot(gr),null===(i=t.memoizedState))return Pi(t),null;if(r=!!(128&t.flags),null===(s=i.rendering))if(r)Ti(i,!1);else{if(0!==Za||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(s=vr(e))){for(t.flags|=128,Ti(i,!1),null!==(e=s.updateQueue)&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,r=t.child;null!==r;)i=e,(n=r).flags&=14680066,null===(s=n.alternate)?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=s.childLanes,n.lanes=s.lanes,n.child=s.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=s.memoizedProps,n.memoizedState=s.memoizedState,n.updateQueue=s.updateQueue,n.type=s.type,i=s.dependencies,n.dependencies=null===i?null:{lanes:i.lanes,firstContext:i.firstContext}),r=r.sibling;return lt(gr,1&gr.current|2),t.child}e=e.sibling}null!==i.tail&&Bt()>ss&&(t.flags|=128,r=!0,Ti(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=vr(s))){if(t.flags|=128,r=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),Ti(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!Gn)return Pi(t),null}else 2*Bt()-i.renderingStartTime>ss&&1073741824!==n&&(t.flags|=128,r=!0,Ti(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=i.last)?e.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Bt(),t.sibling=null,e=gr.current,lt(gr,r?1&e|2:1&e),t):(Pi(t),null);case 22:case 23:return ks(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&Ya)&&(Pi(t),q&&6&t.subtreeFlags&&(t.flags|=8192)):Pi(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}var Ri=s.ReactCurrentOwner,Ii=!1;function Di(e,t,n,r){t.child=null===e?sr(t,null,n,r):ar(t,e.child,n,r)}function Li(e,t,n,r,i){n=n.render;var a=t.ref;return dn(t,i),r=Pr(e,t,n,r,a,i),n=Or(),null===e||Ii?(Gn&&n&&Un(t),t.flags|=1,Di(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ra(e,t,i))}function Bi(e,t,n,r,i){if(null===e){var a=n.type;return"function"!=typeof a||Js(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Qs(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Fi(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:Zt)(s,r)&&e.ref===t.ref)return ra(e,t,i)}return t.flags|=1,(e=Zs(a,r)).ref=t.ref,e.return=t,t.child=e}function Fi(e,t,n,r,i){if(null!==e&&Zt(e.memoizedProps,r)&&e.ref===t.ref){if(Ii=!1,0===(e.lanes&i))return t.lanes=e.lanes,ra(e,t,i);131072&e.flags&&(Ii=!0)}return Hi(e,t,n,r,i)}function Ui(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,lt(Ja,Ya),Ya|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=null!==a?a.baseLanes:n,lt(Ja,Ya),Ya|=r}else t.memoizedState={baseLanes:0,cachePool:null},lt(Ja,Ya),Ya|=n;else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,lt(Ja,Ya),Ya|=r;return Di(e,t,i,n),t.child}function zi(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Hi(e,t,n,r,i){var a=mt(n)?ht:dt.current;return a=pt(t,a),dn(t,i),n=Pr(e,t,n,r,a,i),r=Or(),null===e||Ii?(Gn&&r&&Un(t),t.flags|=1,Di(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ra(e,t,i))}function Vi(e,t,n,r,i){if(mt(n)){var a=!0;xt(t)}else a=!1;if(dn(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),Cn(t,n,r),Mn(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=n.contextType;c="object"==typeof c&&null!==c?un(c):pt(t,c=mt(n)?ht:dt.current);var d=n.getDerivedStateFromProps,u="function"==typeof d||"function"==typeof s.getSnapshotBeforeUpdate;u||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==r||l!==c)&&An(t,s,r,c),pn=!1;var h=t.memoizedState;s.state=h,bn(t,r,s,i),l=t.memoizedState,o!==r||h!==l||ut.current||pn?("function"==typeof d&&(Nn(t,n,d,r),l=t.memoizedState),(o=pn||Sn(t,n,o,r,h,l,c))?(u||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=o):("function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,fn(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:en(t.type,o),s.props=c,u=t.pendingProps,h=s.context,l="object"==typeof(l=n.contextType)&&null!==l?un(l):pt(t,l=mt(n)?ht:dt.current);var p=n.getDerivedStateFromProps;(d="function"==typeof p||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==u||h!==l)&&An(t,s,r,l),pn=!1,h=t.memoizedState,s.state=h,bn(t,r,s,i);var m=t.memoizedState;o!==u||h!==m||ut.current||pn?("function"==typeof p&&(Nn(t,n,p,r),m=t.memoizedState),(c=pn||Sn(t,n,c,r,h,m,l)||!1)?(d||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,m,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,m,l)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),s.props=r,s.state=m,s.context=l,r=c):("function"!=typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Gi(e,t,n,r,a,i)}function Gi(e,t,n,r,i,a){zi(e,t);var s=!!(128&t.flags);if(!r&&!s)return i&&yt(t,n,!1),ra(e,t,a);r=t.stateNode,Ri.current=t;var o=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=ar(t,e.child,null,a),t.child=ar(t,null,o,a)):Di(e,t,o,a),t.memoizedState=r.state,i&&yt(t,n,!0),t.child}function Wi(e){var t=e.stateNode;t.pendingContext?gt(0,t.pendingContext,t.pendingContext!==t.context):t.context&&gt(0,t.context,!1),hr(e,t.containerInfo)}function Ki(e,t,n,r,i){return Qn(),er(i),t.flags|=256,Di(e,t,n,r),t.child}var qi={dehydrated:null,treeContext:null,retryLane:0};function Xi(e){return{baseLanes:e,cachePool:null}}function $i(e,t,n){var r,i=t.pendingProps,s=gr.current,o=!1,l=!!(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&!!(2&s)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),lt(gr,1&s),null===e)return Yn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?De(e)?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=i.children,e=i.fallback,o?(i=t.mode,o=t.child,s={mode:"hidden",children:s},1&i||null===o?o=to(s,i,0,null):(o.childLanes=0,o.pendingProps=s),e=eo(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Xi(n),t.memoizedState=qi,e):Yi(t,s));if(null!==(s=e.memoizedState)){if(null!==(r=s.dehydrated)){if(l)return 256&t.flags?(t.flags&=-257,Qi(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=i.fallback,s=t.mode,i=to({mode:"visible",children:i.children},s,0,null),(o=eo(o,s,n,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,1&t.mode&&ar(t,e.child,null,n),t.child.memoizedState=Xi(n),t.memoizedState=qi,o);if(1&t.mode)if(De(r))t=Qi(e,t,n,Error(a(419)));else if(i=0!==(n&e.childLanes),Ii||i){if(null!==(i=qa)){switch(n&-n){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(i=0!==(o&(i.suspendedLanes|n))?0:o)&&i!==s.retryLane&&(s.retryLane=i,ws(e,i,-1))}Rs(),t=Qi(e,t,n,Error(a(421)))}else Ie(r)?(t.flags|=128,t.child=e.child,t=Ks.bind(null,e),Le(r,t),t=null):(n=s.treeContext,$&&(Vn=ze(r),Hn=t,Gn=!0,Kn=null,Wn=!1,null!==n&&(On[Rn++]=Dn,On[Rn++]=Ln,On[Rn++]=In,Dn=n.id,Ln=n.overflow,In=t)),(t=Yi(t,t.pendingProps.children)).flags|=4096);else t=Qi(e,t,n,null);return t}return o?(i=Zi(e,t,i.children,i.fallback,n),o=t.child,s=e.child.memoizedState,o.memoizedState=null===s?Xi(n):{baseLanes:s.baseLanes|n,cachePool:null},o.childLanes=e.childLanes&~n,t.memoizedState=qi,i):(n=Ji(e,t,i.children,n),t.memoizedState=null,n)}return o?(i=Zi(e,t,i.children,i.fallback,n),o=t.child,s=e.child.memoizedState,o.memoizedState=null===s?Xi(n):{baseLanes:s.baseLanes|n,cachePool:null},o.childLanes=e.childLanes&~n,t.memoizedState=qi,i):(n=Ji(e,t,i.children,n),t.memoizedState=null,n)}function Yi(e,t){return(t=to({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ji(e,t,n,r){var i=e.child;return e=i.sibling,n=Zs(i,{mode:"visible",children:n}),!(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Zi(e,t,n,r,i){var a=t.mode,s=(e=e.child).sibling,o={mode:"hidden",children:n};return 1&a||t.child===e?(n=Zs(e,o)).subtreeFlags=14680064&e.subtreeFlags:((n=t.child).childLanes=0,n.pendingProps=o,t.deletions=null),null!==s?r=Zs(s,r):(r=eo(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Qi(e,t,n,r){return null!==r&&er(r),ar(t,e.child,null,n),(e=Yi(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ea(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),cn(e.return,t,n)}function ta(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function na(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Di(e,t,r.children,n),2&(r=gr.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ea(e,n,t);else if(19===e.tag)ea(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(lt(gr,r),1&t.mode)switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===vr(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ta(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===vr(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ta(t,!0,n,null,a);break;case"together":ta(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function ra(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),es|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Zs(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Zs(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ia(e,t){switch(zn(t),t.tag){case 1:return mt(t.type)&&ft(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return pr(),ot(ut),ot(dt),yr(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return fr(t),null;case 13:if(ot(gr),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));Qn()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ot(gr),null;case 4:return pr(),null;case 10:return ln(t.type._context),null;case 22:case 23:return ks(),null;default:return null}}var aa=!1,sa=!1,oa="function"==typeof WeakSet?WeakSet:Set,la=null;function ca(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(r){Vs(e,t,r)}else n.current=null}function da(e,t,n){try{n()}catch(r){Vs(e,t,r)}}var ua=!1;function ha(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&da(t,n,a)}i=i.next}while(i!==r)}}function pa(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ma(e){var t=e.ref;if(null!==t){var n=e.stateNode;e=5===e.tag?P(n):n,"function"==typeof t?t(e):t.current=e}}function fa(e,t,n){if(Gt&&"function"==typeof Gt.onCommitFiberUnmount)try{Gt.onCommitFiberUnmount(Vt,t)}catch(s){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var i=r,a=i.destroy;i=i.tag,void 0!==a&&(2&i||4&i)&&da(t,n,a),r=r.next}while(r!==e)}break;case 1:if(ca(t,n),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(s){Vs(t,n,s)}break;case 5:ca(t,n);break;case 4:q?Na(e,t,n):X&&X&&(t=t.stateNode.containerInfo,n=Ce(t),Ee(t,n))}}function ga(e,t,n){for(var r=t;;)if(fa(e,r,n),null===r.child||q&&4===r.tag){if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else r.child.return=r,r=r.child}function va(e){var t=e.alternate;null!==t&&(e.alternate=null,va(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&Q(t),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xa(e){return 5===e.tag||3===e.tag||4===e.tag}function ya(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||xa(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ba(e){if(q){e:{for(var t=e.return;null!==t;){if(xa(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(ye(t),n.flags&=-33),ja(e,n=ya(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,wa(e,n=ya(e),t);break;default:throw Error(a(161))}}}function wa(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?ge(n,e,t):ue(n,e);else if(4!==r&&null!==(e=e.child))for(wa(e,t,n),e=e.sibling;null!==e;)wa(e,t,n),e=e.sibling}function ja(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?fe(n,e,t):de(n,e);else if(4!==r&&null!==(e=e.child))for(ja(e,t,n),e=e.sibling;null!==e;)ja(e,t,n),e=e.sibling}function Na(e,t,n){for(var r,i,s=t,o=!1;;){if(!o){o=s.return;e:for(;;){if(null===o)throw Error(a(160));switch(r=o.stateNode,o.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}o=o.return}o=!0}if(5===s.tag||6===s.tag)ga(e,s,n),i?xe(r,s.stateNode):ve(r,s.stateNode);else if(18===s.tag)i?Ye(r,s.stateNode):$e(r,s.stateNode);else if(4===s.tag){if(null!==s.child){r=s.stateNode.containerInfo,i=!0,s.child.return=s,s=s.child;continue}}else if(fa(e,s,n),null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;4===(s=s.return).tag&&(o=!1)}s.sibling.return=s.return,s=s.sibling}}function _a(e,t){if(q){switch(t.tag){case 0:case 11:case 14:case 15:return ha(3,t,t.return),pa(3,t),void ha(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,s=t.updateQueue;t.updateQueue=null,null!==s&&me(n,s,i,e,r,t)}return;case 6:if(null===t.stateNode)throw Error(a(162));return n=t.memoizedProps,void he(t.stateNode,null!==e?e.memoizedProps:n,n);case 3:return void($&&null!==e&&e.memoizedState.isDehydrated&&qe(t.stateNode.containerInfo));case 13:case 19:return void Sa(t)}throw Error(a(163))}switch(t.tag){case 0:case 11:case 14:case 15:return ha(3,t,t.return),pa(3,t),void ha(5,t,t.return);case 12:case 22:case 23:return;case 13:case 19:return void Sa(t);case 3:$&&null!==e&&e.memoizedState.isDehydrated&&qe(t.stateNode.containerInfo)}e:if(X){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,Ee(t.containerInfo,t.pendingChildren);break e}throw Error(a(163))}}function Sa(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new oa),t.forEach(function(t){var r=qs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function Ca(e,t,n){la=e,Aa(e)}function Aa(e,t,n){for(var r=!!(1&e.mode);null!==la;){var i=la,a=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||aa;if(!s){var o=i.alternate,l=null!==o&&null!==o.memoizedState||sa;o=aa;var c=sa;if(aa=s,(sa=l)&&!c)for(la=i;null!==la;)l=(s=la).child,22===s.tag&&null!==s.memoizedState?ka(i):null!==l?(l.return=s,la=l):ka(i);for(;null!==a;)la=a,Aa(a),a=a.sibling;la=i,aa=o,sa=c}Ma(e)}else 8772&i.subtreeFlags&&null!==a?(a.return=i,la=a):Ma(e)}}function Ma(e){for(;null!==la;){var t=la;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:sa||pa(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!sa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&wn(t,s,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=P(t.child.stateNode);break;case 1:n=t.child.stateNode}wn(t,o,n)}break;case 5:var l=t.stateNode;null===n&&4&t.flags&&pe(l,t.type,t.memoizedProps,t);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if($&&null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var u=d.dehydrated;null!==u&&Xe(u)}}}break;default:throw Error(a(163))}sa||512&t.flags&&ma(t)}catch(h){Vs(t,t.return,h)}}if(t===e){la=null;break}if(null!==(n=t.sibling)){n.return=t.return,la=n;break}la=t.return}}function Ea(e){for(;null!==la;){var t=la;if(t===e){la=null;break}var n=t.sibling;if(null!==n){n.return=t.return,la=n;break}la=t.return}}function ka(e){for(;null!==la;){var t=la;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{pa(4,t)}catch(l){Vs(t,n,l)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Vs(t,i,l)}}var a=t.return;try{ma(t)}catch(l){Vs(t,a,l)}break;case 5:var s=t.return;try{ma(t)}catch(l){Vs(t,s,l)}}}catch(l){Vs(t,t.return,l)}if(t===e){la=null;break}var o=t.sibling;if(null!==o){o.return=t.return,la=o;break}la=t.return}}var Ta=0,Pa=1,Oa=2,Ra=3,Ia=4;if("function"==typeof Symbol&&Symbol.for){var Da=Symbol.for;Ta=Da("selector.component"),Pa=Da("selector.has_pseudo_class"),Oa=Da("selector.role"),Ra=Da("selector.test_id"),Ia=Da("selector.text")}function La(e){var t=Y(e);if(null!=t){if("string"!=typeof t.memoizedProps["data-testname"])throw Error(a(364));return t}if(null===(e=re(e)))throw Error(a(362));return e.stateNode.current}function Ba(e,t){switch(t.$$typeof){case Ta:if(e.type===t.value)return!0;break;case Pa:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var r=e[n++],i=e[n++],s=t[i];if(5!==r.tag||!se(r)){for(;null!=s&&Ba(r,s);)s=t[++i];if(i===t.length){t=!0;break e}for(r=r.child;null!==r;)e.push(r,i),r=r.sibling}}t=!1}return t;case Oa:if(5===e.tag&&oe(e.stateNode,t.value))return!0;break;case Ia:if((5===e.tag||6===e.tag)&&null!==(e=ae(e))&&0<=e.indexOf(t.value))return!0;break;case Ra:if(5===e.tag&&"string"==typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase())return!0;break;default:throw Error(a(365))}return!1}function Fa(e){switch(e.$$typeof){case Ta:return"<"+(j(e.value)||"Unknown")+">";case Pa:return":has("+(Fa(e)||"")+")";case Oa:return'[role="'+e.value+'"]';case Ia:return'"'+e.value+'"';case Ra:return'[data-testname="'+e.value+'"]';default:throw Error(a(365))}}function Ua(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var i=e[r++],a=e[r++],s=t[a];if(5!==i.tag||!se(i)){for(;null!=s&&Ba(i,s);)s=t[++a];if(a===t.length)n.push(i);else for(i=i.child;null!==i;)e.push(i,a),i=i.sibling}}return n}function za(e,t){if(!ne)throw Error(a(363));e=Ua(e=La(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++];if(5===r.tag)se(r)||t.push(r.stateNode);else for(r=r.child;null!==r;)e.push(r),r=r.sibling}return t}var Ha=Math.ceil,Va=s.ReactCurrentDispatcher,Ga=s.ReactCurrentOwner,Wa=s.ReactCurrentBatchConfig,Ka=0,qa=null,Xa=null,$a=0,Ya=0,Ja=st(0),Za=0,Qa=null,es=0,ts=0,ns=0,rs=null,is=null,as=0,ss=1/0;function os(){ss=Bt()+500}var ls,cs=!1,ds=null,us=null,hs=!1,ps=null,ms=0,fs=0,gs=null,vs=-1,xs=0;function ys(){return 6&Ka?Bt():-1!==vs?vs:vs=Bt()}function bs(e){return 1&e.mode?2&Ka&&0!==$a?$a&-$a:null!==Jt.transition?(0===xs&&(e=Nt,!(4194240&(Nt<<=1))&&(Nt=64),xs=e),xs):0!==(e=Pt)?e:Z():1}function ws(e,t,n){if(50<fs)throw fs=0,gs=null,Error(a(185));var r=js(e,t);return null===r?null:(kt(r,t,n),2&Ka&&r===qa||(r===qa&&(!(2&Ka)&&(ts|=t),4===Za&&As(r,$a)),Ns(r,n),1===t&&0===Ka&&!(1&e.mode)&&(os(),qt&&Yt())),r)}function js(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Ns(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-bt(a),o=1<<s,l=i[s];-1===l?0!==(o&n)&&0===(o&r)||(i[s]=At(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var r=Ct(e,e===qa?$a:0);if(0===r)null!==n&&It(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&It(n),1===t)0===e.tag?function(e){qt=!0,$t(e)}(Ms.bind(null,e)):$t(Ms.bind(null,e)),ee?te(function(){0===Ka&&Yt()}):Rt(Ft,Yt),n=null;else{switch(Ot(r)){case 1:n=Ft;break;case 4:n=Ut;break;case 16:default:n=zt;break;case 536870912:n=Ht}n=Xs(n,_s.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function _s(e,t){if(vs=-1,xs=0,6&Ka)throw Error(a(327));var n=e.callbackNode;if(zs()&&e.callbackNode!==n)return null;var r=Ct(e,e===qa?$a:0);if(0===r)return null;if(30&r||0!==(r&e.expiredLanes)||t)t=Is(e,r);else{t=r;var i=Ka;Ka|=2;var s=Os();for(qa===e&&$a===t||(os(),Ts(e,t));;)try{Ls();break}catch(l){Ps(e,l)}sn(),Va.current=s,Ka=i,null!==Xa?t=0:(qa=null,$a=0,t=Za)}if(0!==t){if(2===t&&0!==(i=Mt(e))&&(r=i,t=Ss(e,i)),1===t)throw n=Qa,Ts(e,0),As(e,r),Ns(e,Bt()),n;if(6===t)As(e,r);else{if(i=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Wt(a(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)||(t=Is(e,r),2===t&&(s=Mt(e),0!==s&&(r=s,t=Ss(e,s))),1!==t)))throw n=Qa,Ts(e,0),As(e,r),Ns(e,Bt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:Us(e,is);break;case 3:if(As(e,r),(130023424&r)===r&&10<(t=as+500-Bt())){if(0!==Ct(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ys(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=V(Us.bind(null,e,is),t);break}Us(e,is);break;case 4:if(As(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-bt(r);s=1<<o,(o=t[o])>i&&(i=o),r&=~s}if(r=i,10<(r=(120>(r=Bt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ha(r/1960))-r)){e.timeoutHandle=V(Us.bind(null,e,is),r);break}Us(e,is);break;default:throw Error(a(329))}}}return Ns(e,Bt()),e.callbackNode===n?_s.bind(null,e):null}function Ss(e,t){var n=rs;return e.current.memoizedState.isDehydrated&&(Ts(e,t).flags|=256),2!==(e=Is(e,t))&&(t=is,is=n,null!==t&&Cs(t)),e}function Cs(e){null===is?is=e:is.push.apply(is,e)}function As(e,t){for(t&=~ns,t&=~ts,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-bt(t),r=1<<n;e[n]=-1,t&=~r}}function Ms(e){if(6&Ka)throw Error(a(327));zs();var t=Ct(e,0);if(!(1&t))return Ns(e,Bt()),null;var n=Is(e,t);if(0!==e.tag&&2===n){var r=Mt(e);0!==r&&(t=r,n=Ss(e,r))}if(1===n)throw n=Qa,Ts(e,0),As(e,t),Ns(e,Bt()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Us(e,is),Ns(e,Bt()),null}function Es(e){null!==ps&&0===ps.tag&&!(6&Ka)&&zs();var t=Ka;Ka|=1;var n=Wa.transition,r=Pt;try{if(Wa.transition=null,Pt=1,e)return e()}finally{Pt=r,Wa.transition=n,!(6&(Ka=t))&&Yt()}}function ks(){Ya=Ja.current,ot(Ja)}function Ts(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==W&&(e.timeoutHandle=W,G(n)),null!==Xa)for(n=Xa.return;null!==n;){var r=n;switch(zn(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&ft();break;case 3:pr(),ot(ut),ot(dt),yr();break;case 5:fr(r);break;case 4:pr();break;case 13:case 19:ot(gr);break;case 10:ln(r.type._context);break;case 22:case 23:ks()}n=n.return}if(qa=e,Xa=e=Zs(e.current,null),$a=Ya=t,Za=0,Qa=null,ns=ts=es=0,is=rs=null,null!==hn){for(t=0;t<hn.length;t++)if(null!==(r=(n=hn[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var s=a.next;a.next=i,r.next=s}n.pending=r}hn=null}return e}function Ps(e,t){for(;;){var n=Xa;try{if(sn(),br.current=pi,Cr){for(var r=Nr.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Cr=!1}if(jr=0,Sr=_r=Nr=null,Ar=!1,Mr=0,Ga.current=null,null===n||null===n.return){Za=1,Qa=t,Xa=null;break}e:{var s=e,o=n.return,l=n,c=t;if(t=$a,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var d=c,u=l,h=u.tag;if(!(1&u.mode||0!==h&&11!==h&&15!==h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=Ci(o);if(null!==m){m.flags&=-257,Ai(m,o,l,0,t),1&m.mode&&Si(s,d,t),c=d;var f=(t=m).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(!(1&t)){Si(s,d,t),Rs();break e}c=Error(a(426))}else if(Gn&&1&l.mode){var v=Ci(o);if(null!==v){!(65536&v.flags)&&(v.flags|=256),Ai(v,o,l,0,t),er(c);break e}}s=c,4!==Za&&(Za=2),null===rs?rs=[s]:rs.push(s),c=vi(c,l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,yn(l,Ni(0,c,t));break e;case 1:s=c;var x=l.type,y=l.stateNode;if(!(128&l.flags||"function"!=typeof x.getDerivedStateFromError&&(null===y||"function"!=typeof y.componentDidCatch||null!==us&&us.has(y)))){l.flags|=65536,t&=-t,l.lanes|=t,yn(l,_i(l,s,t));break e}}l=l.return}while(null!==l)}Fs(n)}catch(b){t=b,Xa===n&&null!==n&&(Xa=n=n.return);continue}break}}function Os(){var e=Va.current;return Va.current=pi,null===e?pi:e}function Rs(){0!==Za&&3!==Za&&2!==Za||(Za=4),null===qa||!(268435455&es)&&!(268435455&ts)||As(qa,$a)}function Is(e,t){var n=Ka;Ka|=2;var r=Os();for(qa===e&&$a===t||Ts(e,t);;)try{Ds();break}catch(CI){Ps(e,CI)}if(sn(),Ka=n,Va.current=r,null!==Xa)throw Error(a(261));return qa=null,$a=0,Za}function Ds(){for(;null!==Xa;)Bs(Xa)}function Ls(){for(;null!==Xa&&!Dt();)Bs(Xa)}function Bs(e){var t=ls(e.alternate,e,Ya);e.memoizedProps=e.pendingProps,null===t?Fs(e):Xa=t,Ga.current=null}function Fs(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=ia(n,t)))return n.flags&=32767,void(Xa=n);if(null===e)return Za=6,void(Xa=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Oi(n,t,Ya)))return void(Xa=n);if(null!==(t=t.sibling))return void(Xa=t);Xa=t=e}while(null!==t);0===Za&&(Za=5)}function Us(e,t){var n=Pt,r=Wa.transition;try{Wa.transition=null,Pt=1,function(e,t,n){do{zs()}while(null!==ps);if(6&Ka)throw Error(a(327));var r=e.finishedWork,i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-bt(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,s),e===qa&&(Xa=qa=null,$a=0),!(2064&r.subtreeFlags)&&!(2064&r.flags)||hs||(hs=!0,Xs(zt,function(){return zs(),null})),s=!!(15990&r.flags),15990&r.subtreeFlags||s){s=Wa.transition,Wa.transition=null;var o=Pt;Pt=1;var l=Ka;Ka|=4,Ga.current=null,function(e,t){for(I(e.containerInfo),la=t;null!==la;)if(t=(e=la).child,1028&e.subtreeFlags&&null!==t)t.return=e,la=t;else for(;null!==la;){e=la;try{var n=e.alternate;if(1024&e.flags)switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var r=n.memoizedProps,i=n.memoizedState,s=e.stateNode,o=s.getSnapshotBeforeUpdate(e.elementType===e.type?r:en(e.type,r),i);s.__reactInternalSnapshotBeforeUpdate=o}break;case 3:q&&_e(e.stateNode.containerInfo);break;default:throw Error(a(163))}}catch(l){Vs(e,e.return,l)}if(null!==(t=e.sibling)){t.return=e.return,la=t;break}la=e.return}n=ua,ua=!1}(e,r),function(e,t){for(la=t;null!==la;){var n=(t=la).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e;q?Na(a,i,t):ga(a,i,t);var s=i.alternate;null!==s&&(s.return=null),i.return=null}catch(w){Vs(i,t,w)}}if(n=t.child,12854&t.subtreeFlags&&null!==n)n.return=t,la=n;else for(;null!==la;){t=la;try{var o=t.flags;if(32&o&&q&&ye(t.stateNode),512&o){var l=t.alternate;if(null!==l){var c=l.ref;null!==c&&("function"==typeof c?c(null):c.current=null)}}if(8192&o)switch(t.tag){case 13:if(null!==t.memoizedState){var d=t.alternate;null!==d&&null!==d.memoizedState||(as=Bt())}break;case 22:var u=null!==t.memoizedState,h=t.alternate,p=null!==h&&null!==h.memoizedState;if(n=t,q)e:if(r=n,i=u,a=null,q)for(var m=r;;){if(5===m.tag){if(null===a){a=m;var f=m.stateNode;i?be(f):je(m.stateNode,m.memoizedProps)}}else if(6===m.tag){if(null===a){var g=m.stateNode;i?we(g):Ne(g,m.memoizedProps)}}else if((22!==m.tag&&23!==m.tag||null===m.memoizedState||m===r)&&null!==m.child){m.child.return=m,m=m.child;continue}if(m===r)break;for(;null===m.sibling;){if(null===m.return||m.return===r)break e;a===m&&(a=null),m=m.return}a===m&&(a=null),m.sibling.return=m.return,m=m.sibling}if(u&&!p&&1&n.mode){la=n;for(var v=n.child;null!==v;){for(n=la=v;null!==la;){var x=(r=la).child;switch(r.tag){case 0:case 11:case 14:case 15:ha(4,r,r.return);break;case 1:ca(r,r.return);var y=r.stateNode;if("function"==typeof y.componentWillUnmount){var b=r.return;try{y.props=r.memoizedProps,y.state=r.memoizedState,y.componentWillUnmount()}catch(w){Vs(r,b,w)}}break;case 5:ca(r,r.return);break;case 22:if(null!==r.memoizedState){Ea(n);continue}}null!==x?(x.return=r,la=x):Ea(n)}v=v.sibling}}}switch(4102&o){case 2:ba(t),t.flags&=-3;break;case 6:ba(t),t.flags&=-3,_a(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,_a(t.alternate,t);break;case 4:_a(t.alternate,t)}}catch(w){Vs(t,t.return,w)}if(null!==(n=t.sibling)){n.return=t.return,la=n;break}la=t.return}}}(e,r),D(e.containerInfo),e.current=r,Ca(r),Lt(),Ka=l,Pt=o,Wa.transition=s}else e.current=r;if(hs&&(hs=!1,ps=e,ms=i),0===(s=e.pendingLanes)&&(us=null),function(e){if(Gt&&"function"==typeof Gt.onCommitFiberRoot)try{Gt.onCommitFiberRoot(Vt,e,void 0,!(128&~e.current.flags))}catch(t){}}(r.stateNode),Ns(e,Bt()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(cs)throw cs=!1,e=ds,ds=null,e;!!(1&ms)&&0!==e.tag&&zs(),1&(s=e.pendingLanes)?e===gs?fs++:(fs=0,gs=e):fs=0,Yt()}(e,t,n)}finally{Wa.transition=r,Pt=n}return null}function zs(){if(null!==ps){var e=Ot(ms),t=Wa.transition,n=Pt;try{if(Wa.transition=null,Pt=16>e?16:e,null===ps)var r=!1;else{if(e=ps,ps=null,ms=0,6&Ka)throw Error(a(331));var i=Ka;for(Ka|=4,la=e.current;null!==la;){var s=la,o=s.child;if(16&la.flags){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(la=d;null!==la;){var u=la;switch(u.tag){case 0:case 11:case 15:ha(8,u,s)}var h=u.child;if(null!==h)h.return=u,la=h;else for(;null!==la;){var p=(u=la).sibling,m=u.return;if(va(u),u===d){la=null;break}if(null!==p){p.return=m,la=p;break}la=m}}}var f=s.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}la=s}}if(2064&s.subtreeFlags&&null!==o)o.return=s,la=o;else e:for(;null!==la;){if(2048&(s=la).flags)switch(s.tag){case 0:case 11:case 15:ha(9,s,s.return)}var x=s.sibling;if(null!==x){x.return=s.return,la=x;break e}la=s.return}}var y=e.current;for(la=y;null!==la;){var b=(o=la).child;if(2064&o.subtreeFlags&&null!==b)b.return=o,la=b;else e:for(o=y;null!==la;){if(2048&(l=la).flags)try{switch(l.tag){case 0:case 11:case 15:pa(9,l)}}catch(j){Vs(l,l.return,j)}if(l===o){la=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,la=w;break e}la=l.return}}if(Ka=i,Yt(),Gt&&"function"==typeof Gt.onPostCommitFiberRoot)try{Gt.onPostCommitFiberRoot(Vt,e)}catch(j){}r=!0}return r}finally{Pt=n,Wa.transition=t}}return!1}function Hs(e,t,n){vn(e,t=Ni(0,t=vi(n,t),1)),t=ys(),null!==(e=js(e,1))&&(kt(e,1,t),Ns(e,t))}function Vs(e,t,n){if(3===e.tag)Hs(e,e,n);else for(;null!==t;){if(3===t.tag){Hs(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===us||!us.has(r))){vn(t,e=_i(t,e=vi(n,e),1)),e=ys(),null!==(t=js(t,1))&&(kt(t,1,e),Ns(t,e));break}}t=t.return}}function Gs(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ys(),e.pingedLanes|=e.suspendedLanes&n,qa===e&&($a&n)===n&&(4===Za||3===Za&&(130023424&$a)===$a&&500>Bt()-as?Ts(e,0):ns|=n),Ns(e,t)}function Ws(e,t){0===t&&(1&e.mode?(t=_t,!(130023424&(_t<<=1))&&(_t=4194304)):t=1);var n=ys();null!==(e=js(e,t))&&(kt(e,t,n),Ns(e,n))}function Ks(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ws(e,n)}function qs(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ws(e,n)}function Xs(e,t){return Rt(e,t)}function $s(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ys(e,t,n,r){return new $s(e,t,n,r)}function Js(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Zs(e,t){var n=e.alternate;return null===n?((n=Ys(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Qs(e,t,n,r,i,s){var o=2;if(r=e,"function"==typeof e)Js(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case c:return eo(n.children,i,s,t);case d:o=8,i|=8;break;case u:return(e=Ys(12,n,t,2|i)).elementType=u,e.lanes=s,e;case f:return(e=Ys(13,n,t,i)).elementType=f,e.lanes=s,e;case g:return(e=Ys(19,n,t,i)).elementType=g,e.lanes=s,e;case y:return to(n,i,s,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case h:o=10;break e;case p:o=9;break e;case m:o=11;break e;case v:o=14;break e;case x:o=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ys(o,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function eo(e,t,n,r){return(e=Ys(7,e,r,t)).lanes=n,e}function to(e,t,n,r){return(e=Ys(22,e,r,t)).elementType=y,e.lanes=n,e.stateNode={},e}function no(e,t,n){return(e=Ys(6,e,null,t)).lanes=n,e}function ro(e,t,n){return(t=Ys(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function io(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=W,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Et(0),this.expirationTimes=Et(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Et(0),this.identifierPrefix=r,this.onRecoverableError=i,$&&(this.mutableSourceEagerHydrationData=null)}function ao(e,t,n,r,i,a,s,o,l){return e=new io(e,t,n,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ys(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},mn(a),e}function so(e){if(!e)return ct;e:{if(_(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(mt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(mt(n))return vt(e,n,t)}return t}function oo(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return null===(e=A(t))?null:e.stateNode}function lo(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function co(e,t){lo(e,t),(e=e.alternate)&&lo(e,t)}function uo(e){return null===(e=A(e))?null:e.stateNode}function ho(){return null}return ls=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ut.current)Ii=!0;else{if(0===(e.lanes&n)&&!(128&t.flags))return Ii=!1,function(e,t,n){switch(t.tag){case 3:Wi(t),Qn();break;case 5:mr(t);break;case 1:mt(t.type)&&xt(t);break;case 4:hr(t,t.stateNode.containerInfo);break;case 10:on(0,t.type._context,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(lt(gr,1&gr.current),t.flags|=128,null):0!==(n&t.child.childLanes)?$i(e,t,n):(lt(gr,1&gr.current),null!==(e=ra(e,t,n))?e.sibling:null);lt(gr,1&gr.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return na(e,t,n);t.flags|=128}var i=t.memoizedState;if(null!==i&&(i.rendering=null,i.tail=null,i.lastEffect=null),lt(gr,gr.current),r)break;return null;case 22:case 23:return t.lanes=0,Ui(e,t,n)}return ra(e,t,n)}(e,t,n);Ii=!!(131072&e.flags)}else Ii=!1,Gn&&1048576&t.flags&&Fn(t,Pn,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=pt(t,dt.current);dn(t,n),i=Pr(null,t,r,e,i,n);var s=Or();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,mt(r)?(s=!0,xt(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,mn(t),i.updater=_n,t.stateNode=i,i._reactInternals=t,Mn(t,r,e,n),t=Gi(null,t,r,!0,s,n)):(t.tag=0,Gn&&s&&Un(t),Di(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Js(e)?1:0;if(null!=e){if((e=e.$$typeof)===m)return 11;if(e===v)return 14}return 2}(r),e=en(r,e),i){case 0:t=Hi(null,t,r,e,n);break e;case 1:t=Vi(null,t,r,e,n);break e;case 11:t=Li(null,t,r,e,n);break e;case 14:t=Bi(null,t,r,en(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Hi(e,t,r,i=t.elementType===r?i:en(r,i),n);case 1:return r=t.type,i=t.pendingProps,Vi(e,t,r,i=t.elementType===r?i:en(r,i),n);case 3:e:{if(Wi(t),null===e)throw Error(a(387));r=t.pendingProps,i=(s=t.memoizedState).element,fn(e,t),bn(t,r,null,n);var o=t.memoizedState;if(r=o.element,$&&s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ki(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=Ki(e,t,r,n,i=Error(a(424)));break e}for($&&(Vn=Ue(t.stateNode.containerInfo),Hn=t,Gn=!0,Kn=null,Wn=!1),n=sr(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Qn(),r===i){t=ra(e,t,n);break e}Di(e,t,r,n)}t=t.child}return t;case 5:return mr(t),null===e&&Yn(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,o=i.children,z(r,i)?o=null:null!==s&&z(r,s)&&(t.flags|=32),zi(e,t),Di(e,t,o,n),t.child;case 6:return null===e&&Yn(t),null;case 13:return $i(e,t,n);case 4:return hr(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ar(t,null,r,n):Di(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Li(e,t,r,i=t.elementType===r?i:en(r,i),n);case 7:return Di(e,t,t.pendingProps,n),t.child;case 8:case 12:return Di(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,on(0,r,o=i.value),null!==s)if(Wt(s.value,o)){if(s.children===i.children&&!ut.current){t=ra(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){o=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=gn(-1,n&-n)).tag=2;var d=s.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),cn(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),cn(o,n,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}Di(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,dn(t,n),r=r(i=un(i)),t.flags|=1,Di(e,t,r,n),t.child;case 14:return i=en(r=t.type,t.pendingProps),Bi(e,t,r,i=en(r.type,i),n);case 15:return Fi(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:en(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mt(r)?(e=!0,xt(t)):e=!1,dn(t,n),Cn(t,r,i),Mn(t,r,i,n),Gi(null,t,r,!0,e,n);case 19:return na(e,t,n);case 22:return Ui(e,t,n)}throw Error(a(156,t.tag))},t.attemptContinuousHydration=function(e){13===e.tag&&(ws(e,134217728,ys()),co(e,134217728))},t.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=ys(),n=bs(e);ws(e,n,t),co(e,n)}},t.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=St(t.pendingLanes);0!==n&&(Tt(t,1|n),Ns(t,Bt()),!(6&Ka)&&(os(),Yt()))}break;case 13:var r=ys();Es(function(){return ws(e,1,r)}),co(e,1)}},t.batchedUpdates=function(e,t){var n=Ka;Ka|=1;try{return e(t)}finally{0===(Ka=n)&&(os(),qt&&Yt())}},t.createComponentSelector=function(e){return{$$typeof:Ta,value:e}},t.createContainer=function(e,t,n,r,i,a,s){return ao(e,t,!1,null,0,r,0,a,s)},t.createHasPseudoClassSelector=function(e){return{$$typeof:Pa,value:e}},t.createHydrationContainer=function(e,t,n,r,i,a,s,o,l){return(e=ao(n,r,!0,e,0,a,0,o,l)).context=so(null),n=e.current,(a=gn(r=ys(),i=bs(n))).callback=null!=t?t:null,vn(n,a),e.current.lanes=i,kt(e,i,r),Ns(e,r),e},t.createPortal=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:l,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},t.createRoleSelector=function(e){return{$$typeof:Oa,value:e}},t.createTestNameSelector=function(e){return{$$typeof:Ra,value:e}},t.createTextSelector=function(e){return{$$typeof:Ia,value:e}},t.deferredUpdates=function(e){var t=Pt,n=Wa.transition;try{return Wa.transition=null,Pt=16,e()}finally{Pt=t,Wa.transition=n}},t.discreteUpdates=function(e,t,n,r,i){var a=Pt,s=Wa.transition;try{return Wa.transition=null,Pt=1,e(t,n,r,i)}finally{Pt=a,Wa.transition=s,0===Ka&&os()}},t.findAllNodes=za,t.findBoundingRects=function(e,t){if(!ne)throw Error(a(363));t=za(e,t),e=[];for(var n=0;n<t.length;n++)e.push(ie(t[n]));for(t=e.length-1;0<t;t--)for(var r=(n=e[t]).x,i=r+n.width,s=n.y,o=s+n.height,l=t-1;0<=l;l--)if(t!==l){var c=e[l],d=c.x,u=d+c.width,h=c.y,p=h+c.height;if(r>=d&&s>=h&&i<=u&&o<=p){e.splice(t,1);break}if(!(r!==d||n.width!==c.width||p<s||h>o)){h>s&&(c.height+=h-s,c.y=s),p<o&&(c.height=o-h),e.splice(t,1);break}if(!(s!==h||n.height!==c.height||u<r||d>i)){d>r&&(c.width+=d-r,c.x=r),u<i&&(c.width=i-d),e.splice(t,1);break}}return e},t.findHostInstance=oo,t.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=C(e))?E(e):null)?null:e.stateNode},t.findHostInstanceWithWarning=function(e){return oo(e)},t.flushControlled=function(e){var t=Ka;Ka|=1;var n=Wa.transition,r=Pt;try{Wa.transition=null,Pt=1,e()}finally{Pt=r,Wa.transition=n,0===(Ka=t)&&(os(),Yt())}},t.flushPassiveEffects=zs,t.flushSync=Es,t.focusWithin=function(e,t){if(!ne)throw Error(a(363));for(t=Ua(e=La(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!se(n)){if(5===n.tag&&le(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Pt},t.getFindAllNodesFailureDescription=function(e,t){if(!ne)throw Error(a(363));var n=0,r=[];e=[La(e),0];for(var i=0;i<e.length;){var s=e[i++],o=e[i++],l=t[o];if((5!==s.tag||!se(s))&&(Ba(s,l)&&(r.push(Fa(l)),++o>n&&(n=o)),o<t.length))for(s=s.child;null!==s;)e.push(s,o),s=s.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(Fa(t[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},t.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?P(e.child.stateNode):e.child.stateNode:null},t.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:s.ReactCurrentDispatcher,findHostInstanceByFiber:uo,findFiberByHostInstance:e.findFiberByHostInstance||ho,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Vt=t.inject(e),Gt=t}catch(n){}e=!!t.checkDCE}}return e},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(e,t,n,r){if(!ne)throw Error(a(363));e=za(e,t);var i=ce(e,n,r).disconnect;return{disconnect:function(){i()}}},t.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},t.runWithPriority=function(e,t){var n=Pt;try{return Pt=e,t()}finally{Pt=n}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(e,t,n,r){var i=t.current,a=ys(),s=bs(i);return n=so(n),null===t.context?t.context=n:t.pendingContext=n,(t=gn(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),vn(i,t),null!==(e=ws(i,s,a))&&xn(e,i,s),s},t};const kDe=ie(CDe.exports);var TDe={exports:{}},PDe={};!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,s=a>>>1;r<s;){var o=2*(r+1)-1,l=e[o],c=o+1,d=e[c];if(0>i(l,n))c<a&&0>i(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<a&&0>i(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],c=[],d=1,u=null,h=3,p=!1,m=!1,f=!1,g="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,x="undefined"!=typeof setImmediate?setImmediate:null;function y(e){for(var i=n(c);null!==i;){if(null===i.callback)r(c);else{if(!(i.startTime<=e))break;r(c),i.sortIndex=i.expirationTime,t(l,i)}i=n(c)}}function b(e){if(f=!1,y(e),!m)if(null!==n(l))m=!0,P(w);else{var t=n(c);null!==t&&O(b,t.startTime-e)}}function w(t,i){m=!1,f&&(f=!1,v(S),S=-1),p=!0;var a=h;try{for(y(i),u=n(l);null!==u&&(!(u.expirationTime>i)||t&&!M());){var s=u.callback;if("function"==typeof s){u.callback=null,h=u.priorityLevel;var o=s(u.expirationTime<=i);i=e.unstable_now(),"function"==typeof o?u.callback=o:u===n(l)&&r(l),y(i)}else r(l);u=n(l)}if(null!==u)var d=!0;else{var g=n(c);null!==g&&O(b,g.startTime-i),d=!1}return d}finally{u=null,h=a,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,N=!1,_=null,S=-1,C=5,A=-1;function M(){return!(e.unstable_now()-A<C)}function E(){if(null!==_){var t=e.unstable_now();A=t;var n=!0;try{n=_(!0,t)}finally{n?j():(N=!1,_=null)}}else N=!1}if("function"==typeof x)j=function(){x(E)};else if("undefined"!=typeof MessageChannel){var k=new MessageChannel,T=k.port2;k.port1.onmessage=E,j=function(){T.postMessage(null)}}else j=function(){g(E,0)};function P(e){_=e,N||(N=!0,j())}function O(t,n){S=g(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,P(w))},e.unstable_forceFrameRate=function(e){0>e||125<e||(C=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,i,a){var s=e.unstable_now();switch("object"==typeof a&&null!==a?a="number"==typeof(a=a.delay)&&0<a?s+a:s:a=s,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return r={id:d++,callback:i,priorityLevel:r,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(r.sortIndex=a,t(c,r),null===n(l)&&r===n(c)&&(f?(v(S),S=-1):f=!0,O(b,a-s))):(r.sortIndex=o,t(l,r),m||p||(m=!0,P(w))),r},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(PDe),TDe.exports=PDe;var ODe=TDe.exports;const RDe={},IDe=e=>{Object.assign(RDe,e)};var DDe,LDe;const BDe=e=>"colorSpace"in e||"outputColorSpace"in e,FDe=()=>{var e;return null!=(e=RDe.ColorManagement)?e:null},UDe=e=>e&&e.isOrthographicCamera,zDe="undefined"!=typeof window&&(null!=(DDe=window.document)&&DDe.createElement||"ReactNative"===(null==(LDe=window.navigator)?void 0:LDe.product))?Ve.useLayoutEffect:Ve.useEffect;function HDe(e){const t=Ve.useRef(e);return zDe(()=>{t.current=e},[e]),t}function VDe({set:e}){return zDe(()=>(e(new Promise(()=>null)),()=>e(!1)),[e]),null}class GDe extends Ve.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}GDe.getDerivedStateFromError=()=>({error:!0});const WDe="__default",KDe=new Map,qDe=e=>e&&!!e.memoized&&!!e.changes;function XDe(e){var t;const n="undefined"!=typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}const $De=e=>{var t;return null==(t=e.__r3f)?void 0:t.root.getState()};function YDe(e){let t=e.__r3f.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const JDe={obj:e=>e===Object(e)&&!JDe.arr(e)&&"function"!=typeof e,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,boo:e=>"boolean"==typeof e,und:e=>void 0===e,arr:e=>Array.isArray(e),equ(e,t,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof e!=typeof t||!!e!=!!t)return!1;if(JDe.str(e)||JDe.num(e)||JDe.boo(e))return e===t;const a=JDe.obj(e);if(a&&"reference"===r)return e===t;const s=JDe.arr(e);if(s&&"reference"===n)return e===t;if((s||a)&&e===t)return!0;let o;for(o in e)if(!(o in t))return!1;if(a&&"shallow"===n&&"shallow"===r){for(o in i?t:e)if(!JDe.equ(e[o],t[o],{strict:i,objects:"reference"}))return!1}else for(o in i?t:e)if(e[o]!==t[o])return!1;if(JDe.und(o)){if(s&&0===e.length&&0===t.length)return!0;if(a&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function ZDe(e,t){return e.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t},e}function QDe(e,t){let n=e;if(t.includes("-")){const r=t.split("-"),i=r.pop();return n=r.reduce((e,t)=>e[t],e),{target:n,key:i}}return{target:n,key:t}}const eLe=/-\d+$/;function tLe(e,t,n){if(JDe.str(n)){if(eLe.test(n)){const t=n.replace(eLe,""),{target:r,key:i}=QDe(e,t);Array.isArray(r[i])||(r[i]=[])}const{target:r,key:i}=QDe(e,n);t.__r3f.previousAttach=r[i],r[i]=t}else t.__r3f.previousAttach=n(e,t)}function nLe(e,t,n){var r,i;if(JDe.str(n)){const{target:r,key:i}=QDe(e,n),a=t.__r3f.previousAttach;void 0===a?delete r[i]:r[i]=a}else null==(r=t.__r3f)||null==r.previousAttach||r.previousAttach(e,t);null==(i=t.__r3f)||delete i.previousAttach}function rLe(e,{children:t,key:n,ref:r,...i},{children:a,key:s,ref:o,...l}={},c=!1){const d=e.__r3f,u=Object.entries(i),h=[];if(c){const e=Object.keys(l);for(let t=0;t<e.length;t++)i.hasOwnProperty(e[t])||u.unshift([e[t],WDe+"remove"])}u.forEach(([t,n])=>{var r;if(null!=(r=e.__r3f)&&r.primitive&&"object"===t)return;if(JDe.equ(n,l[t]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(t))return h.push([t,n,!0,[]]);let a=[];t.includes("-")&&(a=t.split("-")),h.push([t,n,!1,a]);for(const e in i){const n=i[e];e.startsWith(`${t}-`)&&h.push([e,n,!1,e.split("-")])}});const p={...i};return null!=d&&d.memoizedProps&&null!=d&&d.memoizedProps.args&&(p.args=d.memoizedProps.args),null!=d&&d.memoizedProps&&null!=d&&d.memoizedProps.attach&&(p.attach=d.memoizedProps.attach),{memoized:p,changes:h}}function iLe(e,t){var n;const r=e.__r3f,i=null==r?void 0:r.root,a=null==i||null==i.getState?void 0:i.getState(),{memoized:s,changes:o}=qDe(t)?t:rLe(e,t),l=null==r?void 0:r.eventCount;e.__r3f&&(e.__r3f.memoizedProps=s);for(let u=0;u<o.length;u++){let[t,n,i,s]=o[u];if(BDe(e)){const e=3001,r="srgb",i="srgb-linear";"encoding"===t?(t="colorSpace",n=n===e?r:i):"outputEncoding"===t&&(t="outputColorSpace",n=n===e?r:i)}let l=e,h=l[t];if(s.length&&(h=s.reduce((e,t)=>e[t],e),!h||!h.set)){const[n,...r]=s.reverse();l=r.reverse().reduce((e,t)=>e[t],e),t=n}if(n===WDe+"remove")if(l.constructor){let e=KDe.get(l.constructor);e||(e=new l.constructor,KDe.set(l.constructor,e)),n=e[t]}else n=0;if(i&&r)n?r.handlers[t]=n:delete r.handlers[t],r.eventCount=Object.keys(r.handlers).length;else if(h&&h.set&&(h.copy||h instanceof PCe)){if(Array.isArray(n))h.fromArray?h.fromArray(n):h.set(...n);else if(h.copy&&n&&n.constructor&&h.constructor===n.constructor)h.copy(n);else if(void 0!==n){var c;const e=null==(c=h)?void 0:c.isColor;!e&&h.setScalar?h.setScalar(n):h instanceof PCe&&n instanceof PCe?h.mask=n.mask:h.set(n),!FDe()&&a&&!a.linear&&e&&h.convertSRGBToLinear()}}else{var d;if(l[t]=n,null!=(d=l[t])&&d.isTexture&&l[t].format===BNe&&l[t].type===ANe&&a){const e=l[t];BDe(e)&&BDe(a.gl)?e.colorSpace=a.gl.outputColorSpace:e.encoding=a.gl.outputEncoding}}aLe(e)}if(r&&r.parent&&e.raycast&&l!==r.eventCount){const t=YDe(e).getState().internal,n=t.interaction.indexOf(e);n>-1&&t.interaction.splice(n,1),r.eventCount&&t.interaction.push(e)}return!(1===o.length&&"onUpdate"===o[0][0])&&o.length&&null!=(n=e.__r3f)&&n.parent&&sLe(e),e}function aLe(e){var t,n;const r=null==(t=e.__r3f)||null==(n=t.root)||null==n.getState?void 0:n.getState();r&&0===r.internal.frames&&r.invalidate()}function sLe(e){null==e.onUpdate||e.onUpdate(e)}function oLe(e,t){e.manual||(UDe(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function lLe(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function cLe(e,t,n,r){const i=n.get(t);i&&(n.delete(t),0===n.size&&(e.delete(r),i.target.releasePointerCapture(r)))}function dLe(e){function t(e){return e.filter(e=>["Move","Over","Enter","Out","Leave"].some(t=>{var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))}function n(t){const{internal:n}=e.getState();for(const e of n.hovered.values())if(!t.length||!t.find(t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId)){const r=e.eventObject.__r3f,i=null==r?void 0:r.handlers;if(n.hovered.delete(lLe(e)),null!=r&&r.eventCount){const n={...e,intersections:t};null==i.onPointerOut||i.onPointerOut(n),null==i.onPointerLeave||i.onPointerLeave(n)}}}function r(e,t){for(let n=0;n<t.length;n++){const r=t[n].__r3f;null==r||null==r.handlers.onPointerMissed||r.handlers.onPointerMissed(e)}}return{handlePointer:function(i){switch(i){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return t=>{const{internal:r}=e.getState();"pointerId"in t&&r.capturedMap.has(t.pointerId)&&requestAnimationFrame(()=>{r.capturedMap.has(t.pointerId)&&(r.capturedMap.delete(t.pointerId),n([]))})}}return function(a){const{onPointerMissed:s,internal:o}=e.getState();o.lastEvent.current=a;const l="onPointerMove"===i,c="onClick"===i||"onContextMenu"===i||"onDoubleClick"===i,d=function(t,n){const r=e.getState(),i=new Set,a=[],s=n?n(r.internal.interaction):r.internal.interaction;for(let e=0;e<s.length;e++){const t=$De(s[e]);t&&(t.raycaster.camera=void 0)}r.previousRoot||null==r.events.compute||r.events.compute(t,r);let o=s.flatMap(function(e){const n=$De(e);return n&&n.events.enabled&&null!==n.raycaster.camera?(void 0===n.raycaster.camera&&(null==n.events.compute||n.events.compute(t,n,null==(r=n.previousRoot)?void 0:r.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)),n.raycaster.camera?n.raycaster.intersectObject(e,!0):[]):[];var r}).sort((e,t)=>{const n=$De(e.object),r=$De(t.object);return n&&r&&r.events.priority-n.events.priority||e.distance-t.distance}).filter(e=>{const t=lLe(e);return!i.has(t)&&(i.add(t),!0)});r.events.filter&&(o=r.events.filter(o,r));for(const e of o){let t=e.object;for(;t;){var l;null!=(l=t.__r3f)&&l.eventCount&&a.push({...e,eventObject:t}),t=t.parent}}if("pointerId"in t&&r.internal.capturedMap.has(t.pointerId))for(let e of r.internal.capturedMap.get(t.pointerId).values())i.has(lLe(e.intersection))||a.push(e.intersection);return a}(a,l?t:void 0),u=c?function(t){const{internal:n}=e.getState(),r=t.offsetX-n.initialClick[0],i=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+i*i))}(a):0;"onPointerDown"===i&&(o.initialClick=[a.offsetX,a.offsetY],o.initialHits=d.map(e=>e.eventObject)),c&&!d.length&&u<=2&&(r(a,o.interaction),s&&s(a)),l&&n(d),function(t,r,i,a){const s=e.getState();if(t.length){const e={stopped:!1};for(const o of t){const l=$De(o.object)||s,{raycaster:c,pointer:d,camera:u,internal:h}=l,p=new WSe(d.x,d.y,0).unproject(u),m=e=>{var t,n;return null!=(t=null==(n=h.capturedMap.get(e))?void 0:n.has(o.eventObject))&&t},f=e=>{const t={intersection:o,target:r.target};h.capturedMap.has(e)?h.capturedMap.get(e).set(o.eventObject,t):h.capturedMap.set(e,new Map([[o.eventObject,t]])),r.target.setPointerCapture(e)},g=e=>{const t=h.capturedMap.get(e);t&&cLe(h.capturedMap,o.eventObject,t,e)};let v={};for(let e in r){let t=r[e];"function"!=typeof t&&(v[e]=t)}let x={...o,...v,pointer:d,intersections:t,stopped:e.stopped,delta:i,unprojectedPoint:p,ray:c.ray,camera:u,stopPropagation(){const i="pointerId"in r&&h.capturedMap.get(r.pointerId);(!i||i.has(o.eventObject))&&(x.stopped=e.stopped=!0,h.hovered.size&&Array.from(h.hovered.values()).find(e=>e.eventObject===o.eventObject))&&n([...t.slice(0,t.indexOf(o)),o])},target:{hasPointerCapture:m,setPointerCapture:f,releasePointerCapture:g},currentTarget:{hasPointerCapture:m,setPointerCapture:f,releasePointerCapture:g},nativeEvent:r};if(a(x),!0===e.stopped)break}}}(d,a,u,function(e){const t=e.eventObject,n=t.__r3f,s=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(l){if(s.onPointerOver||s.onPointerEnter||s.onPointerOut||s.onPointerLeave){const t=lLe(e),n=o.hovered.get(t);n?n.stopped&&e.stopPropagation():(o.hovered.set(t,e),null==s.onPointerOver||s.onPointerOver(e),null==s.onPointerEnter||s.onPointerEnter(e))}null==s.onPointerMove||s.onPointerMove(e)}else{const n=s[i];n?c&&!o.initialHits.includes(t)||(r(a,o.interaction.filter(e=>!o.initialHits.includes(e))),n(e)):c&&o.initialHits.includes(t)&&r(a,o.interaction.filter(e=>!o.initialHits.includes(e)))}})}}}}const uLe=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],hLe=e=>!(null==e||!e.render),pLe=Ve.createContext(null);let mLe,fLe=new Set,gLe=new Set,vLe=new Set;function xLe(e,t){if(e.size)for(const{callback:n}of e.values())n(t)}function yLe(e,t){switch(e){case"before":return xLe(fLe,t);case"after":return xLe(gLe,t);case"tail":return xLe(vLe,t)}}let bLe,wLe;function jLe(e,t,n){let r=t.clock.getDelta();for("never"===t.frameloop&&"number"==typeof e&&(r=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),bLe=t.internal.subscribers,mLe=0;mLe<bLe.length;mLe++)wLe=bLe[mLe],wLe.ref.current(wLe.store.getState(),r,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function NLe(){const e=Ve.useContext(pLe);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function _Le(e=e=>e,t){return NLe()(e,t)}function SLe(e,t=0){const n=NLe(),r=n.getState().internal.subscribe,i=HDe(e);return zDe(()=>r(i,t,n),[t,r,n]),null}const CLe=new WeakMap;function ALe(e,t){return function(n,...r){let i=CLe.get(n);return i||(i=new n,CLe.set(n,i)),e&&e(i),Promise.all(r.map(e=>new Promise((n,r)=>i.load(e,e=>{e.scene&&Object.assign(e,function(e){const t={nodes:{},materials:{}};return e&&e.traverse(e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)}),t}(e.scene)),n(e)},t,t=>r(new Error(`Could not load ${e}: ${null==t?void 0:t.message}`))))))}}function MLe(e,t,n,r){const i=Array.isArray(t)?t:[t],a=((e,t,n)=>NDe(e,t,!1,n))(ALe(n,r),[e,...i],{equal:JDe.equ});return Array.isArray(t)?a:a[0]}MLe.preload=function(e,t,n){const r=Array.isArray(t)?t:[t];return((e,t,n)=>{NDe(e,t,!0,n)})(ALe(n),[e,...r])},MLe.clear=function(e,t){return(e=>{if(void 0===e||0===e.length)wDe.splice(0,wDe.length);else{const t=wDe.find(t=>jDe(e,t.keys,t.equal));t&&t.remove()}})([e,...Array.isArray(t)?t:[t]])};const ELe=new Map,{invalidate:kLe,advance:TLe}=function(e){let t,n,r,i=!1,a=!1;function s(o){n=requestAnimationFrame(s),i=!0,t=0,yLe("before",o),a=!0;for(const n of e.values()){var l;r=n.store.getState(),!r.internal.active||!("always"===r.frameloop||r.internal.frames>0)||null!=(l=r.gl.xr)&&l.isPresenting||(t+=jLe(o,r))}if(a=!1,yLe("after",o),0===t)return yLe("tail",o),i=!1,cancelAnimationFrame(n)}return{loop:s,invalidate:function t(n,r=1){var o;if(!n)return e.forEach(e=>t(e.store.getState(),r));null!=(o=n.gl.xr)&&o.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=r>1?Math.min(60,n.internal.frames+r):a?2:1,i||(i=!0,requestAnimationFrame(s)))},advance:function(t,n=!0,r,i){if(n&&yLe("before",t),r)jLe(t,r,i);else for(const a of e.values())jLe(t,a.store.getState());n&&yLe("after",t)}}}(ELe),{reconciler:PLe,applyProps:OLe}=function(e,t){function n(e,{args:t=[],attach:n,...r},i){let a,s=`${e[0].toUpperCase()}${e.slice(1)}`;if("primitive"===e){if(void 0===r.object)throw new Error("R3F: Primitives without 'object' are invalid!");a=ZDe(r.object,{type:e,root:i,attach:n,primitive:!0})}else{const r=RDe[s];if(!r)throw new Error(`R3F: ${s} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(t))throw new Error("R3F: The args prop must be an array!");a=ZDe(new r(...t),{type:e,root:i,attach:n,memoizedProps:{args:t}})}return void 0===a.__r3f.attach&&(a.isBufferGeometry?a.__r3f.attach="geometry":a.isMaterial&&(a.__r3f.attach="material")),"inject"!==s&&iLe(a,r),a}function r(e,t){let n=!1;var r,i;t&&(null!=(r=t.__r3f)&&r.attach?tLe(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.add(t),n=!0),n||null==(i=e.__r3f)||i.objects.push(t),t.__r3f||ZDe(t,{}),t.__r3f.parent=e,sLe(t),aLe(t))}function i(e,t,n){let r=!1;if(t){var i,a;if(null!=(i=t.__r3f)&&i.attach)tLe(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"}),e.dispatchEvent({type:"childadded",child:t});const i=e.children.filter(e=>e!==t),a=i.indexOf(n);e.children=[...i.slice(0,a),t,...i.slice(a)],r=!0}r||null==(a=e.__r3f)||a.objects.push(t),t.__r3f||ZDe(t,{}),t.__r3f.parent=e,sLe(t),aLe(t)}}function a(e,t,n=!1){e&&[...e].forEach(e=>s(t,e,n))}function s(e,t,n){if(t){var r,i,s;if(t.__r3f&&(t.__r3f.parent=null),null!=(r=e.__r3f)&&r.objects&&(e.__r3f.objects=e.__r3f.objects.filter(e=>e!==t)),null!=(i=t.__r3f)&&i.attach)nLe(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){var o;e.remove(t),null!=(o=t.__r3f)&&o.root&&function(e,t){const{internal:n}=e.getState();n.interaction=n.interaction.filter(e=>e!==t),n.initialHits=n.initialHits.filter(e=>e!==t),n.hovered.forEach((e,r)=>{e.eventObject!==t&&e.object!==t||n.hovered.delete(r)}),n.capturedMap.forEach((e,r)=>{cLe(n.capturedMap,t,e,r)})}(YDe(t),t)}const c=null==(s=t.__r3f)?void 0:s.primitive,d=!c&&(void 0===n?null!==t.dispose:n);var l;if(!c)a(null==(l=t.__r3f)?void 0:l.objects,t,d),a(t.children,t,d);if(delete t.__r3f,d&&t.dispose&&"Scene"!==t.type){const e=()=>{try{t.dispose()}catch(CI){}};"undefined"==typeof IS_REACT_ACT_ENVIRONMENT?ODe.unstable_scheduleCallback(ODe.unstable_IdlePriority,e):e()}aLe(e)}}const o=()=>{};return{reconciler:kDe({createInstance:n,removeChild:s,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(e,t)=>{if(!t)return;const n=e.getState().scene;n.__r3f&&(n.__r3f.root=e,r(n,t))},removeChildFromContainer:(e,t)=>{t&&s(e.getState().scene,t)},insertInContainerBefore:(e,t,n)=>{if(!t||!n)return;const r=e.getState().scene;r.__r3f&&i(r,t,n)},getRootHostContext:()=>null,getChildHostContext:e=>e,finalizeInitialChildren(e){var t;const n=null!=(t=null==e?void 0:e.__r3f)?t:{};return Boolean(n.handlers)},prepareUpdate(e,t,n,r){var i;if((null!=(i=null==e?void 0:e.__r3f)?i:{}).primitive&&r.object&&r.object!==e)return[!0];{const{args:t=[],children:i,...a}=r,{args:s=[],children:o,...l}=n;if(!Array.isArray(t))throw new Error("R3F: the args prop must be an array!");if(t.some((e,t)=>e!==s[t]))return[!0];const c=rLe(e,a,l,!0);return c.changes.length?[!1,c]:null}},commitUpdate(e,[t,i],a,o,l,c){t?function(e,t,i,a){var o;const l=null==(o=e.__r3f)?void 0:o.parent;if(!l)return;const c=n(t,i,e.__r3f.root);if(e.children){for(const t of e.children)t.__r3f&&r(c,t);e.children=e.children.filter(e=>!e.__r3f)}e.__r3f.objects.forEach(e=>r(c,e)),e.__r3f.objects=[],e.__r3f.autoRemovedBeforeAppend||s(l,e),c.parent&&(c.__r3f.autoRemovedBeforeAppend=!0),r(l,c),c.raycast&&c.__r3f.eventCount&&YDe(c).getState().internal.interaction.push(c);[a,a.alternate].forEach(e=>{null!==e&&(e.stateNode=c,e.ref&&("function"==typeof e.ref?e.ref(c):e.ref.current=c))})}(e,a,l,c):iLe(e,i)},commitMount(e,t,n,r){var i;const a=null!=(i=e.__r3f)?i:{};e.raycast&&a.handlers&&a.eventCount&&YDe(e).getState().internal.interaction.push(e)},getPublicInstance:e=>e,prepareForCommit:()=>null,preparePortalMount:e=>ZDe(e.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(e){var t;const{attach:n,parent:r}=null!=(t=e.__r3f)?t:{};n&&r&&nLe(r,e,n),e.isObject3D&&(e.visible=!1),aLe(e)},unhideInstance(e,t){var n;const{attach:r,parent:i}=null!=(n=e.__r3f)?n:{};r&&i&&tLe(i,e,r),(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0),aLe(e)},createTextInstance:o,hideTextInstance:o,unhideTextInstance:o,getCurrentEventPriority:()=>t?t():vDe.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:"undefined"!=typeof performance&&JDe.fun(performance.now)?performance.now:JDe.fun(Date.now)?Date.now:()=>0,scheduleTimeout:JDe.fun(setTimeout)?setTimeout:void 0,cancelTimeout:JDe.fun(clearTimeout)?clearTimeout:void 0}),applyProps:iLe}}(0,function(){var e;const t="undefined"!=typeof self&&self||"undefined"!=typeof window&&window;if(!t)return vDe.DefaultEventPriority;switch(null==(e=t.event)?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return vDe.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return vDe.ContinuousEventPriority;default:return vDe.DefaultEventPriority}}),RLe={objects:"shallow",strict:!1},ILe=(e,t)=>{const n="function"==typeof e?e(t):e;return hLe(n)?n:new Qke({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...e})};function DLe(e){const t=ELe.get(e),n=null==t?void 0:t.fiber,r=null==t?void 0:t.store,i="function"==typeof reportError?reportError:console.error,a=r||((e,t)=>{const n=bDe((n,r)=>{const i=new WSe,a=new WSe,s=new WSe;function o(e=r().camera,t=a,n=r().size){const{width:o,height:l,top:c,left:d}=n,u=o/l;t.isVector3?s.copy(t):s.set(...t);const h=e.getWorldPosition(i).distanceTo(s);if(UDe(e))return{width:o/e.zoom,height:l/e.zoom,top:c,left:d,factor:1,distance:h,aspect:u};{const t=e.fov*Math.PI/180,n=2*Math.tan(t/2)*h,r=n*(o/l);return{width:r,height:n,top:c,left:d,factor:o/r,distance:h,aspect:u}}}let l;const c=e=>n(t=>({performance:{...t.performance,current:e}})),d=new fSe,u={set:n,get:r,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(t=1)=>e(r(),t),advance:(e,n)=>t(e,n,r()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new bIe,pointer:d,mouse:d,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const e=r();l&&clearTimeout(l),e.performance.current!==e.performance.min&&c(e.performance.min),l=setTimeout(()=>c(r().performance.max),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:o},setEvents:e=>n(t=>({...t,events:{...t.events,...e}})),setSize:(e,t,i,s,l)=>{const c=r().camera,d={width:e,height:t,top:s||0,left:l||0,updateStyle:i};n(e=>({size:d,viewport:{...e.viewport,...o(c,a,d)}}))},setDpr:e=>n(t=>{const n=XDe(e);return{viewport:{...t.viewport,dpr:n,initialDpr:t.viewport.initialDpr||n}}}),setFrameloop:(e="always")=>{const t=r().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),n(()=>({frameloop:e}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:Ve.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(e,t,n)=>{const i=r().internal;return i.priority=i.priority+(t>0?1:0),i.subscribers.push({ref:e,priority:t,store:n}),i.subscribers=i.subscribers.sort((e,t)=>e.priority-t.priority),()=>{const n=r().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter(t=>t.ref!==e))}}}};return u}),r=n.getState();let i=r.size,a=r.viewport.dpr,s=r.camera;return n.subscribe(()=>{const{camera:e,size:t,viewport:r,gl:o,set:l}=n.getState();if(t.width!==i.width||t.height!==i.height||r.dpr!==a){var c;i=t,a=r.dpr,oLe(e,t),o.setPixelRatio(r.dpr);const n=null!=(c=t.updateStyle)?c:"undefined"!=typeof HTMLCanvasElement&&o.domElement instanceof HTMLCanvasElement;o.setSize(t.width,t.height,n)}e!==s&&(s=e,l(t=>({viewport:{...t.viewport,...t.viewport.getCurrentViewport(e)}})))}),n.subscribe(t=>e(t)),n})(kLe,TLe),s=n||PLe.createContainer(a,vDe.ConcurrentRoot,null,!1,null,"",i,null);let o;t||ELe.set(e,{fiber:s,store:a});let l,c=!1;return{configure(t={}){let{gl:n,size:r,scene:i,events:s,onCreated:d,shadows:u=!1,linear:h=!1,flat:p=!1,legacy:m=!1,orthographic:f=!1,frameloop:g="always",dpr:v=[1,2],performance:x,raycaster:y,camera:b,onPointerMissed:w}=t,j=a.getState(),N=j.gl;j.gl||j.set({gl:N=ILe(n,e)});let _=j.raycaster;_||j.set({raycaster:_=new VIe});const{params:S,...C}=y||{};if(JDe.equ(C,_,RLe)||OLe(_,{...C}),JDe.equ(S,_.params,RLe)||OLe(_,{params:{..._.params,...S}}),!j.camera||j.camera===l&&!JDe.equ(l,b,RLe)){l=b;const e=b instanceof iMe,t=e?b:f?new kMe(0,0,0,0,.1,1e3):new aMe(75,0,.1,1e3);e||(t.position.z=5,b&&(OLe(t,b),("aspect"in b||"left"in b||"right"in b||"bottom"in b||"top"in b)&&(t.manual=!0,t.updateProjectionMatrix())),j.camera||null!=b&&b.rotation||t.lookAt(0,0,0)),j.set({camera:t}),_.camera=t}if(!j.scene){let e;null!=i&&i.isScene?e=i:(e=new rTe,i&&OLe(e,i)),j.set({scene:ZDe(e)})}if(!j.xr){var A;const e=(e,t)=>{const n=a.getState();"never"!==n.frameloop&&TLe(e,!0,n,t)},t=()=>{const t=a.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||kLe(t)},n={connect(){const e=a.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){const e=a.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};"function"==typeof(null==(A=N.xr)?void 0:A.addEventListener)&&n.connect(),j.set({xr:n})}if(N.shadowMap){const e=N.shadowMap.enabled,t=N.shadowMap.type;if(N.shadowMap.enabled=!!u,JDe.boo(u))N.shadowMap.type=2;else if(JDe.str(u)){var M;const e={basic:0,percentage:1,soft:2,variance:3};N.shadowMap.type=null!=(M=e[u])?M:2}else JDe.obj(u)&&Object.assign(N.shadowMap,u);e===N.shadowMap.enabled&&t===N.shadowMap.type||(N.shadowMap.needsUpdate=!0)}const E=FDe();if(E&&("enabled"in E?E.enabled=!m:"legacyMode"in E&&(E.legacyMode=m)),!c){OLe(N,{outputEncoding:h?3e3:3001,toneMapping:p?0:4})}j.legacy!==m&&j.set(()=>({legacy:m})),j.linear!==h&&j.set(()=>({linear:h})),j.flat!==p&&j.set(()=>({flat:p})),!n||JDe.fun(n)||hLe(n)||JDe.equ(n,N,RLe)||OLe(N,n),s&&!j.events.handlers&&j.set({events:s(a)});const k=function(e,t){const n="undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement;if(t){const{width:e,height:r,top:i,left:a,updateStyle:s=n}=t;return{width:e,height:r,top:i,left:a,updateStyle:s}}if("undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:t,height:r,top:i,left:a}=e.parentElement.getBoundingClientRect();return{width:t,height:r,top:i,left:a,updateStyle:n}}return"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0,updateStyle:n}:{width:0,height:0,top:0,left:0}}(e,r);return JDe.equ(k,j.size,RLe)||j.setSize(k.width,k.height,k.updateStyle,k.top,k.left),v&&j.viewport.dpr!==XDe(v)&&j.setDpr(v),j.frameloop!==g&&j.setFrameloop(g),j.onPointerMissed||j.set({onPointerMissed:w}),x&&!JDe.equ(x,j.performance,RLe)&&j.set(e=>({performance:{...e.performance,...x}})),o=d,c=!0,this},render(t){return c||this.configure(),PLe.updateContainer(Qe.jsx(LLe,{store:a,children:t,onCreated:o,rootElement:e}),s,null,()=>{}),a},unmount(){BLe(e)}}}function LLe({store:e,children:t,onCreated:n,rootElement:r}){return zDe(()=>{const t=e.getState();t.set(e=>({internal:{...e.internal,active:!0}})),n&&n(t),e.getState().events.connected||null==t.events.connect||t.events.connect(r)},[]),Qe.jsx(pLe.Provider,{value:e,children:t})}function BLe(e,t){const n=ELe.get(e),r=null==n?void 0:n.fiber;if(r){const t=null==n?void 0:n.store.getState();t&&(t.internal.active=!1),PLe.updateContainer(null,r,null,()=>{t&&setTimeout(()=>{try{var n,r,i,a;null==t.events.disconnect||t.events.disconnect(),null==(n=t.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(i=t.gl)||null==i.forceContextLoss||i.forceContextLoss(),null!=(a=t.gl)&&a.xr&&t.xr.disconnect(),function(e){e.dispose&&"Scene"!==e.type&&e.dispose();for(const t in e)null==t.dispose||t.dispose(),delete e[t]}(t),ELe.delete(e)}catch(CI){}},500)})}}function FLe({state:e={},children:t,container:n}){const{events:r,size:i,...a}=e,s=NLe(),[o]=Ve.useState(()=>new VIe),[l]=Ve.useState(()=>new fSe),c=Ve.useCallback((e,t)=>{const c={...e};let d;if(Object.keys(e).forEach(n=>{(uLe.includes(n)||e[n]!==t[n]&&t[n])&&delete c[n]}),t&&i){const n=t.camera;d=e.viewport.getCurrentViewport(n,new WSe,i),n!==e.camera&&oLe(n,i)}return{...c,scene:n,raycaster:o,pointer:l,mouse:l,previousRoot:s,events:{...e.events,...null==t?void 0:t.events,...r},size:{...e.size,...i},viewport:{...e.viewport,...d},...a}},[e]),[d]=Ve.useState(()=>{const e=s.getState();return bDe((t,c)=>({...e,scene:n,raycaster:o,pointer:l,mouse:l,previousRoot:s,events:{...e.events,...r},size:{...e.size,...i},...a,set:t,get:c,setEvents:e=>t(t=>({...t,events:{...t.events,...e}}))}))});return Ve.useEffect(()=>{const e=s.subscribe(e=>d.setState(t=>c(e,t)));return()=>{e()}},[c]),Ve.useEffect(()=>{d.setState(e=>c(s.getState(),e))},[c]),Ve.useEffect(()=>()=>{d.destroy()},[]),Qe.jsx(Qe.Fragment,{children:PLe.createPortal(Qe.jsx(pLe.Provider,{value:d,children:t}),d,null)})}PLe.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Ve.version});const ULe={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function zLe(e){const{handlePointer:t}=dLe(e);return{priority:1,enabled:!0,compute(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(ULe).reduce((e,n)=>({...e,[n]:t(n)}),{}),update:()=>{var t;const{events:n,internal:r}=e.getState();null!=(t=r.lastEvent)&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var n;const{set:r,events:i}=e.getState();null==i.disconnect||i.disconnect(),r(e=>({events:{...e.events,connected:t}})),Object.entries(null!=(n=i.handlers)?n:[]).forEach(([e,n])=>{const[r,i]=ULe[e];t.addEventListener(r,n,{passive:i})})},disconnect:()=>{const{set:t,events:n}=e.getState();var r;n.connected&&(Object.entries(null!=(r=n.handlers)?r:[]).forEach(([e,t])=>{if(n&&n.connected instanceof HTMLElement){const[r]=ULe[e];n.connected.removeEventListener(r,t)}}),t(e=>({events:{...e.events,connected:void 0}})))}}}function HLe(e,t){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>e(...r),t)}}function VLe({debounce:e,scroll:t,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=n||("undefined"==typeof window?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,s]=Ve.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=Ve.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),l=e?"number"==typeof e?e:e.scroll:null,c=e?"number"==typeof e?e:e.resize:null,d=Ve.useRef(!1);Ve.useEffect(()=>(d.current=!0,()=>{d.current=!1}));const[u,h,p]=Ve.useMemo(()=>{const e=()=>{if(!o.current.element)return;const{left:e,top:t,width:n,height:i,bottom:a,right:l,x:c,y:u}=o.current.element.getBoundingClientRect(),h={left:e,top:t,width:n,height:i,bottom:a,right:l,x:c,y:u};o.current.element instanceof HTMLElement&&r&&(h.height=o.current.element.offsetHeight,h.width=o.current.element.offsetWidth),Object.freeze(h),d.current&&!KLe(o.current.lastBounds,h)&&s(o.current.lastBounds=h)};return[e,c?HLe(e,c):e,l?HLe(e,l):e]},[s,r,l,c]);function m(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(e=>e.removeEventListener("scroll",p,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function f(){o.current.element&&(o.current.resizeObserver=new i(p),o.current.resizeObserver.observe(o.current.element),t&&o.current.scrollContainers&&o.current.scrollContainers.forEach(e=>e.addEventListener("scroll",p,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{p()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}return function(e,t){Ve.useEffect(()=>{if(t){const t=e;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}},[e,t])}(p,!!t),function(e){Ve.useEffect(()=>{const t=e;return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[e])}(h),Ve.useEffect(()=>{m(),f()},[t,p,h]),Ve.useEffect(()=>m,[]),[e=>{!e||e===o.current.element||(m(),o.current.element=e,o.current.scrollContainers=GLe(e),f())},a,u]}function GLe(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(e);return[n,r,i].some(e=>"auto"===e||"scroll"===e)&&t.push(e),[...t,...GLe(e.parentElement)]}const WLe=["x","y","top","bottom","left","right","width","height"],KLe=(e,t)=>WLe.every(n=>e[n]===t[n]);var qLe,XLe,$Le=Object.defineProperty,YLe=Object.defineProperties,JLe=Object.getOwnPropertyDescriptors,ZLe=Object.getOwnPropertySymbols,QLe=Object.prototype.hasOwnProperty,eBe=Object.prototype.propertyIsEnumerable,tBe=(e,t,n)=>t in e?$Le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nBe=(e,t)=>{for(var n in t||(t={}))QLe.call(t,n)&&tBe(e,n,t[n]);if(ZLe)for(var n of ZLe(t))eBe.call(t,n)&&tBe(e,n,t[n]);return e};function rBe(e,t,n){if(!e)return;if(!0===n(e))return e;let r=e.child;for(;r;){const e=rBe(r,t,n);if(e)return e;r=r.sibling}}function iBe(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(t){return e}}"undefined"==typeof window||!(null==(qLe=window.document)?void 0:qLe.createElement)&&"ReactNative"!==(null==(XLe=window.navigator)?void 0:XLe.product)?Ve.useEffect:Ve.useLayoutEffect;const aBe=console.error;console.error=function(){const e=[...arguments].join("");if(!(null==e?void 0:e.startsWith("Warning:"))||!e.includes("useContext"))return aBe.apply(this,arguments);console.error=aBe};const sBe=iBe(Ve.createContext(null));class oBe extends Ve.Component{render(){return Ve.createElement(sBe.Provider,{value:this._reactInternals},this.props.children)}}function lBe(){const e=function(){const e=Ve.useContext(sBe);if(null===e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=Ve.useId();return Ve.useMemo(()=>{for(const n of[e,null==e?void 0:e.alternate]){if(!n)continue;const e=rBe(n,!1,e=>{let n=e.memoizedState;for(;n;){if(n.memoizedState===t)return!0;n=n.next}});if(e)return e}},[e,t])}(),[t]=Ve.useState(()=>new Map);t.clear();let n=e;for(;n;){if(n.type&&"object"==typeof n.type){const e=void 0===n.type._context&&n.type.Provider===n.type?n.type:n.type._context;e&&e!==sBe&&!t.has(e)&&t.set(e,Ve.useContext(iBe(e)))}n=n.return}return t}function cBe(){const e=lBe();return Ve.useMemo(()=>Array.from(e.keys()).reduce((t,n)=>r=>Ve.createElement(t,null,Ve.createElement(n.Provider,((e,t)=>YLe(e,JLe(t)))(nBe({},r),{value:e.get(n)}))),e=>Ve.createElement(oBe,nBe({},e))),[e])}const dBe=Ve.forwardRef(function({children:e,fallback:t,resize:n,style:r,gl:i,events:a=zLe,eventSource:s,eventPrefix:o,shadows:l,linear:c,flat:d,legacy:u,orthographic:h,frameloop:p,dpr:m,performance:f,raycaster:g,camera:v,scene:x,onPointerMissed:y,onCreated:b,...w},j){Ve.useMemo(()=>IDe(mDe),[]);const N=cBe(),[_,S]=VLe({scroll:!0,debounce:{scroll:50,resize:0},...n}),C=Ve.useRef(null),A=Ve.useRef(null);Ve.useImperativeHandle(j,()=>C.current);const M=HDe(y),[E,k]=Ve.useState(!1),[T,P]=Ve.useState(!1);if(E)throw E;if(T)throw T;const O=Ve.useRef(null);zDe(()=>{const t=C.current;S.width>0&&S.height>0&&t&&(O.current||(O.current=DLe(t)),O.current.configure({gl:i,events:a,shadows:l,linear:c,flat:d,legacy:u,orthographic:h,frameloop:p,dpr:m,performance:f,raycaster:g,camera:v,scene:x,size:S,onPointerMissed:(...e)=>null==M.current?void 0:M.current(...e),onCreated:e=>{var t;null==e.events.connect||e.events.connect(s?(t=s)&&t.hasOwnProperty("current")?s.current:s:A.current),o&&e.setEvents({compute:(e,t)=>{const n=e[o+"X"],r=e[o+"Y"];t.pointer.set(n/t.size.width*2-1,-r/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==b||b(e)}}),O.current.render(Qe.jsx(N,{children:Qe.jsx(GDe,{set:P,children:Qe.jsx(Ve.Suspense,{fallback:Qe.jsx(VDe,{set:k}),children:null!=e?e:null})})})))}),Ve.useEffect(()=>{const e=C.current;if(e)return()=>BLe(e)},[]);const R=s?"none":"auto";return Qe.jsx("div",{ref:A,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:R,...r},...w,children:Qe.jsx("div",{ref:_,style:{width:"100%",height:"100%"},children:Qe.jsx("canvas",{ref:C,style:{display:"block"},children:t})})})}),uBe=Ve.forwardRef(function(e,t){return Qe.jsx(oBe,{children:Qe.jsx(dBe,{...e,ref:t})})});const hBe={toVector:(e,t)=>(void 0===e&&(e=t),Array.isArray(e)?e:[e,e]),add:(e,t)=>[e[0]+t[0],e[1]+t[1]],sub:(e,t)=>[e[0]-t[0],e[1]-t[1]],addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function pBe(e,t,n){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*n):e*t*n/(t+n*e)}function mBe(e,t,n,r=.15){return 0===r?function(e,t,n){return Math.max(t,Math.min(e,n))}(e,t,n):e<t?-pBe(t-e,n-t,r)+t:e>n?+pBe(e-n,n-t,r)+n:e}function fBe(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function gBe(e,t,n){return(t=fBe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vBe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function xBe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vBe(Object(n),!0).forEach(function(t){gBe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vBe(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const yBe={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function bBe(e){return e?e[0].toUpperCase()+e.slice(1):""}const wBe=["enter","leave"];function jBe(e,t="",n=!1){const r=yBe[e],i=r&&r[t]||t;return"on"+bBe(e)+bBe(i)+(function(e=!1,t){return e&&!wBe.includes(t)}(n,i)?"Capture":"")}const NBe=["gotpointercapture","lostpointercapture"];function _Be(e){let t=e.substring(2).toLowerCase();const n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));const r=NBe.includes(t)?"capturecapture":"capture",i=!!~t.indexOf(r);return i&&(t=t.replace("capture","")),{device:t,capture:i,passive:n}}function SBe(e){return"touches"in e}function CBe(e){return SBe(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function ABe(e){return SBe(e)?function(e){return"touchend"===e.type||"touchcancel"===e.type?e.changedTouches:e.targetTouches}(e)[0]:e}function MBe(e,t){try{const n=t.clientX-e.clientX,r=t.clientY-e.clientY,i=(t.clientX+e.clientX)/2,a=(t.clientY+e.clientY)/2,s=Math.hypot(n,r),o=-180*Math.atan2(n,r)/Math.PI;return{angle:o,distance:s,origin:[i,a]}}catch(n){}return null}function EBe(e){return function(e){return Array.from(e.touches).filter(t=>{var n,r;return t.target===e.currentTarget||(null===(n=e.currentTarget)||void 0===n||null===(r=n.contains)||void 0===r?void 0:r.call(n,t.target))})}(e).map(e=>e.identifier)}function kBe(e,t){const[n,r]=Array.from(e.touches).filter(e=>t.includes(e.identifier));return MBe(n,r)}function TBe(e){const t=ABe(e);return SBe(e)?t.identifier:t.pointerId}function PBe(e){const t=ABe(e);return[t.clientX,t.clientY]}function OBe(e){let{deltaX:t,deltaY:n,deltaMode:r}=e;return 1===r?(t*=40,n*=40):2===r&&(t*=800,n*=800),[t,n]}function RBe(e,...t){return"function"==typeof e?e(...t):e}function IBe(){}function DBe(...e){return 0===e.length?IBe:1===e.length?e[0]:function(){let t;for(const n of e)t=n.apply(this,arguments)||t;return t}}function LBe(e,t){return Object.assign({},t,e||{})}class BBe{constructor(e,t,n){this.ctrl=e,this.args=t,this.key=n,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:n,args:r}=this;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?RBe(n.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:n,shared:r}=this;t.args=this.args;let i=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,function(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:n,altKey:r,metaKey:i,ctrlKey:a}=e;Object.assign(t,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:a})}return t}(e)),r.down=r.pressed=r.buttons%2==1||r.touches>0,i=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const e=t._delta.map(Math.abs);hBe.addTo(t._distance,e)}this.axisIntent&&this.axisIntent(e);const[a,s]=t._movement,[o,l]=n.threshold,{_step:c,values:d}=t;if(n.hasCustomTransform?(!1===c[0]&&(c[0]=Math.abs(a)>=o&&d[0]),!1===c[1]&&(c[1]=Math.abs(s)>=l&&d[1])):(!1===c[0]&&(c[0]=Math.abs(a)>=o&&Math.sign(a)*o),!1===c[1]&&(c[1]=Math.abs(s)>=l&&Math.sign(s)*l)),t.intentional=!1!==c[0]||!1!==c[1],!t.intentional)return;const u=[0,0];if(n.hasCustomTransform){const[e,t]=d;u[0]=!1!==c[0]?e-c[0]:0,u[1]=!1!==c[1]?t-c[1]:0}else u[0]=!1!==c[0]?a-c[0]:0,u[1]=!1!==c[1]?s-c[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(u);const h=t.offset,p=t._active&&!t._blocked||t.active;p&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=RBe(n.bounds,t)),this.setup&&this.setup()),t.movement=u,this.computeOffset()));const[m,f]=t.offset,[[g,v],[x,y]]=t._bounds;t.overflow=[m<g?-1:m>v?1:0,f<x?-1:f>y?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);const b=t._active&&n.rubberband||[0,0];if(t.offset=function(e,[t,n],[r,i]){const[[a,s],[o,l]]=e;return[mBe(t,a,s,r),mBe(n,o,l,i)]}(t._bounds,t.offset,b),t.delta=hBe.sub(t.offset,h),this.computeMovement(),p&&(!t.last||i>32)){t.delta=hBe.sub(t.offset,h);const e=t.delta.map(Math.abs);hBe.addTo(t.distance,e),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&i>0&&(t.velocity=[e[0]/i,e[1]/i],t.timeDelta=i)}}emit(){const e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!n.triggerAllEvents)return;const r=this.handler(xBe(xBe(xBe({},t),e),{},{[this.aliasKey]:e.values}));void 0!==r&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}class FBe extends BBe{constructor(...e){super(...e),gBe(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=hBe.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=hBe.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,n=this.config;if(!t.axis&&e){const r="object"==typeof n.axisThreshold?n.axisThreshold[CBe(e)]:n.axisThreshold;t.axis=function([e,t],n){const r=Math.abs(e),i=Math.abs(t);return r>i&&r>n?"x":i>r&&i>n?"y":void 0}(t._movement,r)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}const UBe=e=>e,zBe={enabled:(e=!0)=>e,eventOptions:(e,t,n)=>xBe(xBe({},n.shared.eventOptions),e),preventDefault:(e=!1)=>e,triggerAllEvents:(e=!1)=>e,rubberband(e=0){switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return hBe.toVector(e)}},from:e=>"function"==typeof e?e:null!=e?hBe.toVector(e):void 0,transform(e,t,n){const r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||UBe},threshold:e=>hBe.toVector(e,0)},HBe=xBe(xBe({},zBe),{},{axis(e,t,{axis:n}){if(this.lockDirection="lock"===n,!this.lockDirection)return n},axisThreshold:(e=0)=>e,bounds(e={}){if("function"==typeof e)return t=>HBe.bounds(e(t));if("current"in e)return()=>e.current;if("function"==typeof HTMLElement&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:n=1/0,top:r=-1/0,bottom:i=1/0}=e;return[[t,n],[r,i]]}}),VBe={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]};const GBe="undefined"!=typeof window&&window.document&&window.document.createElement;function WBe(){return GBe&&"ontouchstart"in window}const KBe={isBrowser:GBe,gesture:function(){try{return"constructor"in GestureEvent}catch(CI){return!1}}(),touch:WBe(),touchscreen:WBe()||GBe&&window.navigator.maxTouchPoints>1,pointer:GBe&&"onpointerdown"in window,pointerLock:GBe&&"exitPointerLock"in window.document},qBe={mouse:0,touch:0,pen:8},XBe=xBe(xBe({},HBe),{},{device(e,t,{pointer:{touch:n=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&KBe.pointerLock,KBe.touch&&n?"touch":this.pointerLock?"mouse":KBe.pointer&&!i?"pointer":KBe.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:n}){if(this.preventScrollDelay="number"==typeof n?n:n||void 0===n&&e?250:void 0,KBe.touchscreen&&!1!==n)return e||(void 0!==n?"y":void 0)},pointerCapture(e,t,{pointer:{capture:n=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&"pointer"===this.device&&n},threshold(e,t,{filterTaps:n=!1,tapsThreshold:r=3,axis:i}){const a=hBe.toVector(e,n?r:i?1:0);return this.filterTaps=n,this.tapsThreshold=r,a},swipe({velocity:e=.5,distance:t=50,duration:n=250}={}){return{velocity:this.transform(hBe.toVector(e)),distance:this.transform(hBe.toVector(t)),duration:n}},delay(e=0){switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:e=>e?xBe(xBe({},qBe),e):qBe,keyboardDisplacement:(e=10)=>e});function $Be(e){const[t,n]=e.overflow,[r,i]=e._delta,[a,s]=e._direction;(t<0&&r>0&&a<0||t>0&&r<0&&a>0)&&(e._movement[0]=e._movementBound[0]),(n<0&&i>0&&s<0||n>0&&i<0&&s>0)&&(e._movement[1]=e._movementBound[1])}const YBe=xBe(xBe({},zBe),{},{device(e,t,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!KBe.touch&&KBe.gesture)return"gesture";if(KBe.touch&&r)return"touch";if(KBe.touchscreen){if(KBe.pointer)return"pointer";if(KBe.touch)return"touch"}},bounds(e,t,{scaleBounds:n={},angleBounds:r={}}){const i=e=>{const t=LBe(RBe(n,e),{min:-1/0,max:1/0});return[t.min,t.max]},a=e=>{const t=LBe(RBe(r,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!=typeof n&&"function"!=typeof r?[i(),a()]:e=>[i(e),a(e)]},threshold(e,t,n){this.lockDirection="lock"===n.axis;return hBe.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey:e=>void 0===e?"ctrlKey":e,pinchOnWheel:(e=!0)=>e});const JBe=xBe(xBe({},HBe),{},{mouseOnly:(e=!0)=>e});const ZBe=HBe;const QBe=HBe;const eFe=xBe(xBe({},HBe),{},{mouseOnly:(e=!0)=>e}),tFe=new Map,nFe=new Map;function rFe(e){tFe.set(e.key,e.engine),nFe.set(e.key,e.resolver)}const iFe={key:"drag",engine:class extends FBe{constructor(...e){super(...e),gBe(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),r={left:t.left-n.left+e.offset[0],right:t.right-n.right+e.offset[0],top:t.top-n.top+e.offset[1],bottom:t.bottom-n.bottom+e.offset[1]};e._bounds=HBe.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,n=this.state;if(null!=e.buttons&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):-1!==t.pointerButtons&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),r&&r.size>1&&n._pointerActive||(this.start(e),this.setupPointer(e),n._pointerId=TBe(e),n._pointerActive=!0,this.computeValues(PBe(e)),this.computeInitial(),t.preventScrollAxis&&"mouse"!==CBe(e)?(n._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,n=this.config;if(!t._pointerActive)return;const r=TBe(e);if(void 0!==t._pointerId&&r!==t._pointerId)return;const i=PBe(e);return document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=hBe.sub(i,t._values),this.computeValues(i)),hBe.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional?(this.timeoutStore.remove("dragDelay"),t.active=!1,void this.startPointerDrag(e)):n.preventScrollAxis&&!t._preventScroll?t.axis?t.axis===n.preventScrollAxis||"xy"===n.preventScrollAxis?(t._active=!1,void this.clean()):(this.timeoutStore.remove("startPointerDrag"),void this.startPointerDrag(e)):void 0:void this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(s){}const t=this.state,n=this.config;if(!t._active||!t._pointerActive)return;const r=TBe(e);if(void 0!==t._pointerId&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[i,a]=t._distance;if(t.tap=i<=n.tapsThreshold&&a<=n.tapsThreshold,t.tap&&n.filterTaps)t._force=!0;else{const[e,r]=t._delta,[i,a]=t._movement,[s,o]=n.swipe.velocity,[l,c]=n.swipe.distance,d=n.swipe.duration;if(t.elapsedTime<d){const n=Math.abs(e/t.timeDelta),d=Math.abs(r/t.timeDelta);n>s&&Math.abs(i)>l&&(t.swipe[0]=Math.sign(e)),d>o&&Math.abs(a)>c&&(t.swipe[1]=Math.sign(r))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,n=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,function(e){"persist"in e&&"function"==typeof e.persist&&e.persist()}(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=VBe[e.key];if(t){const n=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),n._delta=t(this.config.keyboardDisplacement,r),n._keyboardActive=!0,hBe.addTo(n._movement,n._delta),this.compute(e),this.emit()}}keyUp(e){e.key in VBe&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},resolver:XBe},aFe={key:"hover",engine:class extends FBe{constructor(...e){super(...e),gBe(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&"mouse"!==e.pointerType||(this.start(e),this.computeValues(PBe(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&"mouse"!==e.pointerType)return;const t=this.state;if(!t._active)return;t._active=!1;const n=PBe(e);t._movement=t._delta=hBe.sub(n,t._values),this.computeValues(n),this.compute(e),t.delta=t.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}},resolver:eFe},sFe={key:"move",engine:class extends FBe{constructor(...e){super(...e),gBe(this,"ingKey","moving")}move(e){this.config.mouseOnly&&"mouse"!==e.pointerType||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(PBe(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const t=PBe(e),n=this.state;n._delta=hBe.sub(t,n._values),hBe.addTo(n._movement,n._delta),this.computeValues(t),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}},resolver:JBe},oFe={key:"pinch",engine:class extends BBe{constructor(...e){super(...e),gBe(this,"ingKey","pinching"),gBe(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:t,lastOffset:n}=this.state;this.state.offset="wheel"===e?hBe.add(t,n):[(1+t[0])*n[0],t[1]+n[1]]}computeMovement(){const{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){const e=this.state,[t,n]=e._movement;if(!e.axis){const r=30*Math.abs(t)-Math.abs(n);r<0?e.axis="angle":r>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&("scale"===this.state.axis?e[1]=0:"angle"===this.state.axis&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const t=this.state,n=this.ctrl.touchIds;if(t._active&&t._touchIds.every(e=>n.has(e)))return;if(n.size<2)return;this.start(e),t._touchIds=Array.from(n).slice(0,2);const r=kBe(e,t._touchIds);r&&this.pinchStart(e,r)}pointerStart(e){if(null!=e.buttons&&e.buttons%2!=1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const t=this.state,n=t._pointerEvents,r=this.ctrl.pointerIds;if(t._active&&Array.from(n.keys()).every(e=>r.has(e)))return;if(n.size<2&&n.set(e.pointerId,e),t._pointerEvents.size<2)return;this.start(e);const i=MBe(...Array.from(n.values()));i&&this.pinchStart(e,i)}pinchStart(e,t){this.state.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const t=kBe(e,this.state._touchIds);t&&this.pinchMove(e,t)}pointerMove(e){const t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;const n=MBe(...Array.from(t.values()));n&&this.pinchMove(e,n)}pinchMove(e,t){const n=this.state,r=n._values[1],i=t.angle-r;let a=0;Math.abs(i)>270&&(a+=Math.sign(i)),this.computeValues([t.distance,t.angle-360*a]),n.origin=t.origin,n.turns=a,n._movement=[n._values[0]/n._initial[0]-1,n._values[1]-n._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(e=>!this.ctrl.touchIds.has(e))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch(n){}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];const n=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=hBe.sub(t._movement,n),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const t=this.config.modifierKey;t&&!(Array.isArray(t)?t.find(t=>e[t]):e[t])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const t=this.state;t._delta=[-OBe(e)[1]/100*t.offset[0],0],hBe.addTo(t._movement,t._delta),$Be(t),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}},resolver:YBe},lFe={key:"scroll",engine:class extends FBe{constructor(...e){super(...e),gBe(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const t=this.state,n=function(e){var t,n;const{scrollX:r,scrollY:i,scrollLeft:a,scrollTop:s}=e.currentTarget;return[null!==(t=null!=r?r:a)&&void 0!==t?t:0,null!==(n=null!=i?i:s)&&void 0!==n?n:0]}(e);t._delta=hBe.sub(n,t._values),hBe.addTo(t._movement,t._delta),this.computeValues(n),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}},resolver:ZBe},cFe={key:"wheel",engine:class extends FBe{constructor(...e){super(...e),gBe(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=OBe(e),hBe.addTo(t._movement,t._delta),$Be(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}},resolver:QBe};function dFe(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const uFe={target(e){if(e)return()=>"current"in e?e.current:e},enabled:(e=!0)=>e,window:(e=(KBe.isBrowser?window:void 0))=>e,eventOptions:({passive:e=!0,capture:t=!1}={})=>({passive:e,capture:t}),transform:e=>e},hFe=["target","eventOptions","window","enabled","transform"];function pFe(e={},t){const n={};for(const[r,i]of Object.entries(t))switch(typeof i){case"function":n[r]=i.call(n,e[r],r,e);break;case"object":n[r]=pFe(e[r],i);break;case"boolean":i&&(n[r]=e[r])}return n}class mFe{constructor(e,t){gBe(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,n,r,i){const a=this._listeners,s=function(e,t=""){const n=yBe[e];return e+(n&&n[t]||t)}(t,n),o=xBe(xBe({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),i);e.addEventListener(s,r,o);const l=()=>{e.removeEventListener(s,r,o),a.delete(l)};return a.add(l),l}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class fFe{constructor(){gBe(this,"_timeouts",new Map)}add(e,t,n=140,...r){this.remove(e),this._timeouts.set(e,window.setTimeout(t,n,...r))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>{window.clearTimeout(e)}),this._timeouts.clear()}}let gFe=class{constructor(e){gBe(this,"gestures",new Set),gBe(this,"_targetEventStore",new mFe(this)),gBe(this,"gestureEventStores",{}),gBe(this,"gestureTimeoutStores",{}),gBe(this,"handlers",{}),gBe(this,"config",{}),gBe(this,"pointerIds",new Set),gBe(this,"touchIds",new Set),gBe(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&vFe(e,"drag");t.wheel&&vFe(e,"wheel");t.scroll&&vFe(e,"scroll");t.move&&vFe(e,"move");t.pinch&&vFe(e,"pinch");t.hover&&vFe(e,"hover")}(this,e)}setEventIds(e){return SBe(e)?(this.touchIds=new Set(EBe(e)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=function(e,t,n={}){const r=e,{target:i,eventOptions:a,window:s,enabled:o,transform:l}=r,c=dFe(r,hFe);if(n.shared=pFe({target:i,eventOptions:a,window:s,enabled:o,transform:l},uFe),t){const e=nFe.get(t);n[t]=pFe(xBe({shared:n.shared},c),e)}else for(const d in c){const e=nFe.get(d);e&&(n[d]=pFe(xBe({shared:n.shared},c[d]),e))}return n}(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,n={};let r;if(!t.target||(r=t.target(),r)){if(t.enabled){for(const t of this.gestures){const i=this.config[t],a=xFe(n,i.eventOptions,!!r);if(i.enabled){new(tFe.get(t))(this,e,t).bind(a)}}const i=xFe(n,t.eventOptions,!!r);for(const t in this.nativeHandlers)i(t,"",n=>this.nativeHandlers[t](xBe(xBe({},this.state.shared),{},{event:n,args:e})),void 0,!0)}for(const e in n)n[e]=DBe(...n[e]);if(!r)return n;for(const e in n){const{device:t,capture:i,passive:a}=_Be(e);this._targetEventStore.add(r,t,"",n[e],{capture:i,passive:a})}}}};function vFe(e,t){e.gestures.add(t),e.gestureEventStores[t]=new mFe(e,t),e.gestureTimeoutStores[t]=new fFe}const xFe=(e,t,n)=>(r,i,a,s={},o=!1)=>{var l,c;const d=null!==(l=s.capture)&&void 0!==l?l:t.capture,u=null!==(c=s.passive)&&void 0!==c?c:t.passive;let h=o?r:jBe(r,i,d);n&&u&&(h+="Passive"),e[h]=e[h]||[],e[h].push(a)},yFe=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function bFe(e,t,n,r,i,a){if(!e.has(n))return;if(!tFe.has(r))return;const s=n+"Start",o=n+"End";i[r]=e=>{let r;return e.first&&s in t&&t[s](e),n in t&&(r=t[n](e)),e.last&&o in t&&t[o](e),r},a[r]=a[r]||{}}function wFe(e,t){const[n,r,i]=function(e){const t={},n={},r=new Set;for(let i in e)yFe.test(i)?(r.add(RegExp.lastMatch),n[i]=e[i]):t[i]=e[i];return[n,t,r]}(e),a={};return bFe(i,n,"onDrag","drag",a,t),bFe(i,n,"onWheel","wheel",a,t),bFe(i,n,"onScroll","scroll",a,t),bFe(i,n,"onPinch","pinch",a,t),bFe(i,n,"onMove","move",a,t),bFe(i,n,"onHover","hover",a,t),{handlers:a,config:t,nativeHandlers:r}}function jFe(e){return e.forEach(rFe),function(e,t){const{handlers:n,nativeHandlers:r,config:i}=wFe(e,t||{});return function(e,t={},n,r){const i=Ge.useMemo(()=>new gFe(e),[]);if(i.applyHandlers(e,r),i.applyConfig(t,n),Ge.useEffect(i.effect.bind(i)),Ge.useEffect(()=>i.clean.bind(i),[]),void 0===t.target)return i.bind.bind(i)}(n,i,void 0,r)}}var NFe=FFe(),_Fe=e=>IFe(e,NFe),SFe=FFe();_Fe.write=e=>IFe(e,SFe);var CFe=FFe();_Fe.onStart=e=>IFe(e,CFe);var AFe=FFe();_Fe.onFrame=e=>IFe(e,AFe);var MFe=FFe();_Fe.onFinish=e=>IFe(e,MFe);var EFe=[];_Fe.setTimeout=(e,t)=>{const n=_Fe.now()+t,r=()=>{const e=EFe.findIndex(e=>e.cancel==r);~e&&EFe.splice(e,1),OFe-=~e?1:0},i={time:n,handler:e,cancel:r};return EFe.splice(kFe(n),0,i),OFe+=1,DFe(),i};var kFe=e=>~(~EFe.findIndex(t=>t.time>e)||~EFe.length);_Fe.cancel=e=>{CFe.delete(e),AFe.delete(e),MFe.delete(e),NFe.delete(e),SFe.delete(e)},_Fe.sync=e=>{RFe=!0,_Fe.batchedUpdates(e),RFe=!1},_Fe.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...e){t=e,_Fe.onStart(n)}return r.handler=e,r.cancel=()=>{CFe.delete(n),t=null},r};var TFe="undefined"!=typeof window?window.requestAnimationFrame:()=>{};_Fe.use=e=>TFe=e,_Fe.now="undefined"!=typeof performance?()=>performance.now():Date.now,_Fe.batchedUpdates=e=>e(),_Fe.catch=console.error,_Fe.frameLoop="always",_Fe.advance=()=>{"demand"!==_Fe.frameLoop||BFe()};var PFe=-1,OFe=0,RFe=!1;function IFe(e,t){RFe?(t.delete(e),e(0)):(t.add(e),DFe())}function DFe(){PFe<0&&(PFe=0,"demand"!==_Fe.frameLoop&&TFe(LFe))}function LFe(){~PFe&&(TFe(LFe),_Fe.batchedUpdates(BFe))}function BFe(){const e=PFe;PFe=_Fe.now();const t=kFe(PFe);t&&(UFe(EFe.splice(0,t),e=>e.handler()),OFe-=t),OFe?(CFe.flush(),NFe.flush(e?Math.min(64,PFe-e):16.667),AFe.flush(),SFe.flush(),MFe.flush()):PFe=-1}function FFe(){let e=new Set,t=e;return{add(n){OFe+=t!=e||e.has(n)?0:1,e.add(n)},delete:n=>(OFe-=t==e&&e.has(n)?1:0,e.delete(n)),flush(n){t.size&&(e=new Set,OFe-=t.size,UFe(t,t=>t(n)&&e.add(t)),OFe+=e.size,t=e)}}}function UFe(e,t){e.forEach(e=>{try{t(e)}catch(CI){_Fe.catch(CI)}})}var zFe=Object.defineProperty,HFe={};function VFe(){}((e,t)=>{for(var n in t)zFe(e,n,{get:t[n],enumerable:!0})})(HFe,{assign:()=>rUe,colors:()=>eUe,createStringInterpolator:()=>YFe,skipAnimation:()=>tUe,to:()=>JFe,willAdvance:()=>nUe});var GFe={arr:Array.isArray,obj:e=>!!e&&"Object"===e.constructor.name,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,und:e=>void 0===e};function WFe(e,t){if(GFe.arr(e)){if(!GFe.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var KFe=(e,t)=>e.forEach(t);function qFe(e,t,n){if(GFe.arr(e))for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);else for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var XFe=e=>GFe.und(e)?[]:GFe.arr(e)?e:[e];function $Fe(e,t){if(e.size){const n=Array.from(e);e.clear(),KFe(n,t)}}var YFe,JFe,ZFe=(e,...t)=>$Fe(e,e=>e(...t)),QFe=()=>"undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),eUe=null,tUe=!1,nUe=VFe,rUe=e=>{e.to&&(JFe=e.to),e.now&&(_Fe.now=e.now),void 0!==e.colors&&(eUe=e.colors),null!=e.skipAnimation&&(tUe=e.skipAnimation),e.createStringInterpolator&&(YFe=e.createStringInterpolator),e.requestAnimationFrame&&_Fe.use(e.requestAnimationFrame),e.batchedUpdates&&(_Fe.batchedUpdates=e.batchedUpdates),e.willAdvance&&(nUe=e.willAdvance),e.frameLoop&&(_Fe.frameLoop=e.frameLoop)},iUe=new Set,aUe=[],sUe=[],oUe=0,lUe={get idle(){return!iUe.size&&!aUe.length},start(e){oUe>e.priority?(iUe.add(e),_Fe.onStart(cUe)):(dUe(e),_Fe(hUe))},advance:hUe,sort(e){if(oUe)_Fe.onFrame(()=>lUe.sort(e));else{const t=aUe.indexOf(e);~t&&(aUe.splice(t,1),uUe(e))}},clear(){aUe=[],iUe.clear()}};function cUe(){iUe.forEach(dUe),iUe.clear(),_Fe(hUe)}function dUe(e){aUe.includes(e)||uUe(e)}function uUe(e){aUe.splice(function(e,t){const n=e.findIndex(t);return n<0?e.length:n}(aUe,t=>t.priority>e.priority),0,e)}function hUe(e){const t=sUe;for(let n=0;n<aUe.length;n++){const r=aUe[n];oUe=r.priority,r.idle||(nUe(r),r.advance(e),r.idle||t.push(r))}return oUe=0,(sUe=aUe).length=0,(aUe=t).length>0}var pUe="[-+]?\\d*\\.?\\d+",mUe=pUe+"%";function fUe(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var gUe=new RegExp("rgb"+fUe(pUe,pUe,pUe)),vUe=new RegExp("rgba"+fUe(pUe,pUe,pUe,pUe)),xUe=new RegExp("hsl"+fUe(pUe,mUe,mUe)),yUe=new RegExp("hsla"+fUe(pUe,mUe,mUe,pUe)),bUe=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,wUe=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,jUe=/^#([0-9a-fA-F]{6})$/,NUe=/^#([0-9a-fA-F]{8})$/;function _Ue(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function SUe(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,i=2*n-r,a=_Ue(i,r,e+1/3),s=_Ue(i,r,e),o=_Ue(i,r,e-1/3);return Math.round(255*a)<<24|Math.round(255*s)<<16|Math.round(255*o)<<8}function CUe(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function AUe(e){return(parseFloat(e)%360+360)%360/360}function MUe(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function EUe(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function kUe(e){let t=function(e){let t;return"number"==typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=jUe.exec(e))?parseInt(t[1]+"ff",16)>>>0:eUe&&void 0!==eUe[e]?eUe[e]:(t=gUe.exec(e))?(CUe(t[1])<<24|CUe(t[2])<<16|CUe(t[3])<<8|255)>>>0:(t=vUe.exec(e))?(CUe(t[1])<<24|CUe(t[2])<<16|CUe(t[3])<<8|MUe(t[4]))>>>0:(t=bUe.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=NUe.exec(e))?parseInt(t[1],16)>>>0:(t=wUe.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=xUe.exec(e))?(255|SUe(AUe(t[1]),EUe(t[2]),EUe(t[3])))>>>0:(t=yUe.exec(e))?(SUe(AUe(t[1]),EUe(t[2]),EUe(t[3]))|MUe(t[4]))>>>0:null}(e);if(null===t)return e;t=t||0;return`rgba(${(4278190080&t)>>>24}, ${(16711680&t)>>>16}, ${(65280&t)>>>8}, ${(255&t)/255})`}var TUe=(e,t,n)=>{if(GFe.fun(e))return e;if(GFe.arr(e))return TUe({range:e,output:t,extrapolate:n});if(GFe.str(e.output[0]))return YFe(e);const r=e,i=r.output,a=r.range||[0,1],s=r.extrapolateLeft||r.extrapolate||"extend",o=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(e=>e);return e=>{const t=function(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}(e,a);return function(e,t,n,r,i,a,s,o,l){let c=l?l(e):e;if(c<t){if("identity"===s)return c;"clamp"===s&&(c=t)}if(c>n){if("identity"===o)return c;"clamp"===o&&(c=n)}if(r===i)return r;if(t===n)return e<=t?r:i;t===-1/0?c=-c:n===1/0?c-=t:c=(c-t)/(n-t);c=a(c),r===-1/0?c=-c:i===1/0?c+=r:c=c*(i-r)+r;return c}(e,a[t],a[t+1],i[t],i[t+1],l,s,o,r.map)}};var PUe=Symbol.for("FluidValue.get"),OUe=Symbol.for("FluidValue.observers"),RUe=e=>Boolean(e&&e[PUe]),IUe=e=>e&&e[PUe]?e[PUe]():e,DUe=e=>e[OUe]||null;function LUe(e,t){const n=e[OUe];n&&n.forEach(e=>{!function(e,t){e.eventObserved?e.eventObserved(t):e(t)}(e,t)})}var BUe=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");FUe(this,e)}},FUe=(e,t)=>VUe(e,PUe,t);function UUe(e,t){if(e[PUe]){let n=e[OUe];n||VUe(e,OUe,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function zUe(e,t){const n=e[OUe];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[OUe]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var HUe,VUe=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),GUe=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,WUe=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,KUe=new RegExp(`(${GUe.source})(%|[a-z]+)`,"i"),qUe=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,XUe=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,$Ue=e=>{const[t,n]=YUe(e);if(!t||QFe())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const t=window.getComputedStyle(document.documentElement).getPropertyValue(n);return t||e}return n&&XUe.test(n)?$Ue(n):n||e},YUe=e=>{const t=XUe.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]},JUe=(e,t,n,r,i)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,ZUe=e=>{HUe||(HUe=eUe?new RegExp(`(${Object.keys(eUe).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(e=>IUe(e).replace(XUe,$Ue).replace(WUe,kUe).replace(HUe,kUe)),n=t.map(e=>e.match(GUe).map(Number)),r=n[0].map((e,t)=>n.map(e=>{if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]})),i=r.map(t=>TUe({...e,output:t}));return e=>{var n;const r=!KUe.test(t[0])&&(null==(n=t.find(e=>KUe.test(e)))?void 0:n.replace(GUe,""));let a=0;return t[0].replace(GUe,()=>`${i[a++](e)}${r||""}`).replace(qUe,JUe)}},QUe="react-spring: ",eze=e=>{const t=e;let n=!1;if("function"!=typeof t)throw new TypeError(`${QUe}once requires a function parameter`);return(...e)=>{n||(t(...e),n=!0)}},tze=eze(console.warn);var nze=eze(console.warn);function rze(e){return GFe.str(e)&&("#"==e[0]||/\d/.test(e)||!QFe()&&XUe.test(e)||e in(eUe||{}))}var ize=QFe()?Ve.useEffect:Ve.useLayoutEffect;function aze(){const e=Ve.useState()[1],t=(()=>{const e=Ve.useRef(!1);return ize(()=>(e.current=!0,()=>{e.current=!1}),[]),e})();return()=>{t.current&&e(Math.random())}}var sze=e=>Ve.useEffect(e,oze),oze=[];function lze(e){const t=Ve.useRef();return Ve.useEffect(()=>{t.current=e}),t.current}var cze=Symbol.for("Animated:node"),dze=e=>e&&e[cze],uze=(e,t)=>{return n=e,r=cze,i=t,Object.defineProperty(n,r,{value:i,writable:!0,configurable:!0});var n,r,i},hze=e=>e&&e[cze]&&e[cze].getPayload(),pze=class{constructor(){uze(this,this)}getPayload(){return this.payload||[]}},mze=class extends pze{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,GFe.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new mze(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return GFe.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,GFe.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},fze=class extends mze{constructor(e){super(0),this._string=null,this._toString=TUe({output:[e,e]})}static create(e){return new fze(e)}getValue(){const e=this._string;return null==e?this._string=this._toString(this._value):e}setValue(e){if(GFe.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!super.setValue(e))return!1;this._string=null}return!0}reset(e){e&&(this._toString=TUe({output:[this.getValue(),e]})),this._value=0,super.reset()}},gze={dependencies:null},vze=class extends pze{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return qFe(this.source,(n,r)=>{var i;(i=n)&&i[cze]===i?t[r]=n.getValue(e):RUe(n)?t[r]=IUe(n):e||(t[r]=n)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&KFe(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return qFe(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){gze.dependencies&&RUe(e)&&gze.dependencies.add(e);const t=hze(e);t&&KFe(t,e=>this.add(e))}},xze=class extends vze{constructor(e){super(e)}static create(e){return new xze(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((t,n)=>t.setValue(e[n])).some(Boolean):(super.setValue(e.map(yze)),!0)}};function yze(e){return(rze(e)?fze:mze).create(e)}function bze(e){const t=dze(e);return t?t.constructor:GFe.arr(e)?xze:rze(e)?fze:mze}var wze=(e,t)=>{const n=!GFe.fun(e)||e.prototype&&e.prototype.isReactComponent;return Ve.forwardRef((r,i)=>{const a=Ve.useRef(null),s=n&&Ve.useCallback(e=>{a.current=function(e,t){e&&(GFe.fun(e)?e(t):e.current=t);return t}(i,e)},[i]),[o,l]=function(e,t){const n=new Set;gze.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)});return e=new vze(e),gze.dependencies=null,[e,n]}(r,t),c=aze(),d=()=>{const e=a.current;if(n&&!e)return;!1===(!!e&&t.applyAnimatedValues(e,o.getValue(!0)))&&c()},u=new jze(d,l),h=Ve.useRef();ize(()=>(h.current=u,KFe(l,e=>UUe(e,u)),()=>{h.current&&(KFe(h.current.deps,e=>zUe(e,h.current)),_Fe.cancel(h.current.update))})),Ve.useEffect(d,[]),sze(()=>()=>{const e=h.current;KFe(e.deps,t=>zUe(t,e))});const p=t.getComponentProps(o.getValue());return Ve.createElement(e,{...p,ref:s})})},jze=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){"change"==e.type&&_Fe.write(this.update)}};var Nze=Symbol.for("AnimatedComponent"),_ze=e=>GFe.str(e)?e:e&&GFe.str(e.displayName)?e.displayName:GFe.fun(e)&&e.name||null;function Sze(e,...t){return GFe.fun(e)?e(...t):e}var Cze=(e,t)=>!0===e||!!(t&&e&&(GFe.fun(e)?e(t):XFe(e).includes(t))),Aze=(e,t)=>GFe.obj(e)?t&&e[t]:e,Mze=(e,t)=>!0===e.default?e[t]:e.default?e.default[t]:void 0,Eze=e=>e,kze=(e,t=Eze)=>{let n=Tze;e.default&&!0!==e.default&&(e=e.default,n=Object.keys(e));const r={};for(const i of n){const n=t(e[i],i);GFe.und(n)||(r[i]=n)}return r},Tze=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Pze={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Oze(e){const t=function(e){const t={};let n=0;if(qFe(e,(e,r)=>{Pze[r]||(t[r]=e,n++)}),n)return t}(e);if(t){const n={to:t};return qFe(e,(e,r)=>r in t||(n[r]=e)),n}return{...e}}function Rze(e){return e=IUe(e),GFe.arr(e)?e.map(Rze):rze(e)?HFe.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function Ize(e){return GFe.fun(e)||GFe.arr(e)&&GFe.obj(e[0])}var Dze={tension:170,friction:26,mass:1,damping:1,easing:e=>e,clamp:!1},Lze=class{constructor(){this.velocity=0,Object.assign(this,Dze)}};function Bze(e,t){if(GFe.und(t.decay)){const n=!GFe.und(t.tension)||!GFe.und(t.friction);!n&&GFe.und(t.frequency)&&GFe.und(t.damping)&&GFe.und(t.mass)||(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}else e.duration=void 0}var Fze=[],Uze=class{constructor(){this.changed=!1,this.values=Fze,this.toValues=null,this.fromValues=Fze,this.config=new Lze,this.immediate=!1}};function zze(e,{key:t,props:n,defaultProps:r,state:i,actions:a}){return new Promise((s,o)=>{let l,c,d=Cze(n.cancel??(null==r?void 0:r.cancel),t);if(d)p();else{GFe.und(n.pause)||(i.paused=Cze(n.pause,t));let e=null==r?void 0:r.pause;!0!==e&&(e=i.paused||Cze(e,t)),l=Sze(n.delay||0,t),e?(i.resumeQueue.add(h),a.pause()):(a.resume(),h())}function u(){i.resumeQueue.add(h),i.timeouts.delete(c),c.cancel(),l=c.time-_Fe.now()}function h(){l>0&&!HFe.skipAnimation?(i.delayed=!0,c=_Fe.setTimeout(p,l),i.pauseQueue.add(u),i.timeouts.add(c)):p()}function p(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(u),i.timeouts.delete(c),e<=(i.cancelId||0)&&(d=!0);try{a.start({...n,callId:e,cancel:d},s)}catch(c$e){o(c$e)}}})}var Hze=(e,t)=>1==t.length?t[0]:t.some(e=>e.cancelled)?Wze(e.get()):t.every(e=>e.noop)?Vze(e.get()):Gze(e.get(),t.every(e=>e.finished)),Vze=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),Gze=(e,t,n=!1)=>({value:e,finished:t,cancelled:n}),Wze=e=>({value:e,cancelled:!0,finished:!1});function Kze(e,t,n,r){const{callId:i,parentId:a,onRest:s}=t,{asyncTo:o,promise:l}=n;return a||e!==o||t.reset?n.promise=(async()=>{n.asyncId=i,n.asyncTo=e;const c=kze(t,(e,t)=>"onRest"===t?void 0:e);let d,u;const h=new Promise((e,t)=>(d=e,u=t)),p=e=>{const t=i<=(n.cancelId||0)&&Wze(r)||i!==n.asyncId&&Gze(r,!1);if(t)throw e.result=t,u(e),e},m=(e,t)=>{const a=new Xze,s=new $ze;return(async()=>{if(HFe.skipAnimation)throw qze(n),s.result=Gze(r,!1),u(s),s;p(a);const o=GFe.obj(e)?{...e}:{...t,to:e};o.parentId=i,qFe(c,(e,t)=>{GFe.und(o[t])&&(o[t]=e)});const l=await r.start(o);return p(a),n.paused&&await new Promise(e=>{n.resumeQueue.add(e)}),l})()};let f;if(HFe.skipAnimation)return qze(n),Gze(r,!1);try{let t;t=GFe.arr(e)?(async e=>{for(const t of e)await m(t)})(e):Promise.resolve(e(m,r.stop.bind(r))),await Promise.all([t.then(d),h]),f=Gze(r.get(),!0,!1)}catch(c$e){if(c$e instanceof Xze)f=c$e.result;else{if(!(c$e instanceof $ze))throw c$e;f=c$e.result}}finally{i==n.asyncId&&(n.asyncId=a,n.asyncTo=a?o:void 0,n.promise=a?l:void 0)}return GFe.fun(s)&&_Fe.batchedUpdates(()=>{s(f,r,r.item)}),f})():l}function qze(e,t){$Fe(e.timeouts,e=>e.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var Xze=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},$ze=class extends Error{constructor(){super("SkipAnimationSignal")}},Yze=e=>e instanceof Zze,Jze=1,Zze=class extends BUe{constructor(){super(...arguments),this.id=Jze++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=dze(this);return e&&e.getValue()}to(...e){return HFe.to(this,e)}interpolate(...e){return tze(`${QUe}The "interpolate" function is deprecated in v9 (use "to" instead)`),HFe.to(this,e)}toJSON(){return this.get()}observerAdded(e){1==e&&this._attach()}observerRemoved(e){0==e&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){LUe(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||lUe.sort(this),LUe(this,{type:"priority",parent:this,priority:e})}},Qze=Symbol.for("SpringPhase"),eHe=e=>(1&e[Qze])>0,tHe=e=>(2&e[Qze])>0,nHe=e=>(4&e[Qze])>0,rHe=(e,t)=>t?e[Qze]|=3:e[Qze]&=-3,iHe=(e,t)=>t?e[Qze]|=4:e[Qze]&=-5,aHe=class extends Zze{constructor(e,t){if(super(),this.animation=new Uze,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!GFe.und(e)||!GFe.und(t)){const n=GFe.obj(e)?{...e}:{...t,from:e};GFe.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(tHe(this)||this._state.asyncTo)||nHe(this)}get goal(){return IUe(this.animation.to)}get velocity(){const e=dze(this);return e instanceof mze?e.lastVelocity||0:e.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return eHe(this)}get isAnimating(){return tHe(this)}get isPaused(){return nHe(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{toValues:i}=r;const{config:a}=r,s=hze(r.to);!s&&RUe(r.to)&&(i=XFe(IUe(r.to))),r.values.forEach((o,l)=>{if(o.done)return;const c=o.constructor==fze?1:s?s[l].lastPosition:i[l];let d=r.immediate,u=c;if(!d){if(u=o.lastPosition,a.tension<=0)return void(o.done=!0);let t=o.elapsedTime+=e;const n=r.fromValues[l],i=null!=o.v0?o.v0:o.v0=GFe.arr(a.velocity)?a.velocity[l]:a.velocity;let s;const h=a.precision||(n==c?.005:Math.min(1,.001*Math.abs(c-n)));if(GFe.und(a.duration))if(a.decay){const e=!0===a.decay?.998:a.decay,r=Math.exp(-(1-e)*t);u=n+i/(1-e)*(1-r),d=Math.abs(o.lastPosition-u)<=h,s=i*r}else{s=null==o.lastVelocity?i:o.lastVelocity;const t=a.restVelocity||h/10,r=a.clamp?0:a.bounce,l=!GFe.und(r),p=n==c?o.v0>0:n<c;let m,f=!1;const g=1,v=Math.ceil(e/g);for(let e=0;e<v&&(m=Math.abs(s)>t,m||(d=Math.abs(c-u)<=h,!d));++e){l&&(f=u==c||u>c==p,f&&(s=-s*r,u=c));s+=(1e-6*-a.tension*(u-c)+.001*-a.friction*s)/a.mass*g,u+=s*g}}else{let r=1;a.duration>0&&(this._memoizedDuration!==a.duration&&(this._memoizedDuration=a.duration,o.durationProgress>0&&(o.elapsedTime=a.duration*o.durationProgress,t=o.elapsedTime+=e)),r=(a.progress||0)+t/this._memoizedDuration,r=r>1?1:r<0?0:r,o.durationProgress=r),u=n+a.easing(r)*(c-n),s=(u-o.lastPosition)/e,d=1==r}o.lastVelocity=s,Number.isNaN(u)&&(d=!0)}s&&!s[l].done&&(d=!1),d?o.done=!0:t=!1,o.setValue(u,a.round)&&(n=!0)});const o=dze(this),l=o.getValue();if(t){const e=IUe(r.to);l===e&&!n||a.decay?n&&a.decay&&this._onChange(l):(o.setValue(e),this._onChange(e)),this._stop()}else n&&this._onChange(l)}set(e){return _Fe.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(tHe(this)){const{to:e,config:t}=this.animation;_Fe.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return GFe.und(e)?(n=this.queue||[],this.queue=[]):n=[GFe.obj(e)?e:{...t,to:e}],Promise.all(n.map(e=>this._update(e))).then(e=>Hze(this,e))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),qze(this._state,e&&this._lastCallId),_Fe.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){"change"==e.type?this._start():"priority"==e.type&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=GFe.obj(n)?n[t]:n,(null==n||Ize(n))&&(n=void 0),r=GFe.obj(r)?r[t]:r,null==r&&(r=void 0);const i={to:n,from:r};return eHe(this)||(e.reverse&&([n,r]=[r,n]),r=IUe(r),GFe.und(r)?dze(this)||this._set(n):this._set(r)),i}_update({...e},t){const{key:n,defaultProps:r}=this;e.default&&Object.assign(r,kze(e,(e,t)=>/^on/.test(t)?Aze(e,n):e)),hHe(this,e,"onProps"),pHe(this,"onProps",e,this);const i=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const a=this._state;return zze(++this._lastCallId,{key:n,props:e,defaultProps:r,state:a,actions:{pause:()=>{nHe(this)||(iHe(this,!0),ZFe(a.pauseQueue),pHe(this,"onPause",Gze(this,sHe(this,this.animation.to)),this))},resume:()=>{nHe(this)&&(iHe(this,!1),tHe(this)&&this._resume(),ZFe(a.resumeQueue),pHe(this,"onResume",Gze(this,sHe(this,this.animation.to)),this))},start:this._merge.bind(this,i)}}).then(n=>{if(e.loop&&n.finished&&(!t||!n.noop)){const t=oHe(e);if(t)return this._update(t,!0)}return n})}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(Wze(this));const r=!GFe.und(e.to),i=!GFe.und(e.from);if(r||i){if(!(t.callId>this._lastToId))return n(Wze(this));this._lastToId=t.callId}const{key:a,defaultProps:s,animation:o}=this,{to:l,from:c}=o;let{to:d=l,from:u=c}=e;!i||r||t.default&&!GFe.und(d)||(d=u),t.reverse&&([d,u]=[u,d]);const h=!WFe(u,c);h&&(o.from=u),u=IUe(u);const p=!WFe(d,l);p&&this._focus(d);const m=Ize(t.to),{config:f}=o,{decay:g,velocity:v}=f;(r||i)&&(f.velocity=0),t.config&&!m&&function(e,t,n){n&&(Bze(n={...n},t),t={...n,...t}),Bze(e,t),Object.assign(e,t);for(const s in Dze)null==e[s]&&(e[s]=Dze[s]);let{frequency:r,damping:i}=e;const{mass:a}=e;GFe.und(r)||(r<.01&&(r=.01),i<0&&(i=0),e.tension=Math.pow(2*Math.PI/r,2)*a,e.friction=4*Math.PI*i*a/r)}(f,Sze(t.config,a),t.config!==s.config?Sze(s.config,a):void 0);let x=dze(this);if(!x||GFe.und(d))return n(Gze(this,!0));const y=GFe.und(t.reset)?i&&!t.default:!GFe.und(u)&&Cze(t.reset,a),b=y?u:this.get(),w=Rze(d),j=GFe.num(w)||GFe.arr(w)||rze(w),N=!m&&(!j||Cze(s.immediate||t.immediate,a));if(p){const e=bze(d);if(e!==x.constructor){if(!N)throw Error(`Cannot animate between ${x.constructor.name} and ${e.name}, as the "to" prop suggests`);x=this._set(w)}}const _=x.constructor;let S=RUe(d),C=!1;if(!S){const e=y||!eHe(this)&&h;(p||e)&&(C=WFe(Rze(b),w),S=!C),(WFe(o.immediate,N)||N)&&WFe(f.decay,g)&&WFe(f.velocity,v)||(S=!0)}if(C&&tHe(this)&&(o.changed&&!y?S=!0:S||this._stop(l)),!m&&((S||RUe(l))&&(o.values=x.getPayload(),o.toValues=RUe(d)?null:_==fze?[1]:XFe(w)),o.immediate!=N&&(o.immediate=N,N||y||this._set(l)),S)){const{onRest:e}=o;KFe(uHe,e=>hHe(this,t,e));const r=Gze(this,sHe(this,l));ZFe(this._pendingCalls,r),this._pendingCalls.add(n),o.changed&&_Fe.batchedUpdates(()=>{var t;o.changed=!y,null==e||e(r,this),y?Sze(s.onRest,r):null==(t=o.onStart)||t.call(o,r,this)})}y&&this._set(b),m?n(Kze(t.to,t,this._state,this)):S?this._start():tHe(this)&&!p?this._pendingCalls.add(n):n(Vze(b))}_focus(e){const t=this.animation;e!==t.to&&(DUe(this)&&this._detach(),t.to=e,DUe(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;RUe(t)&&(UUe(t,this),Yze(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;RUe(e)&&zUe(e,this)}_set(e,t=!0){const n=IUe(e);if(!GFe.und(n)){const e=dze(this);if(!e||!WFe(n,e.getValue())){const r=bze(n);e&&e.constructor==r?e.setValue(n):uze(this,r.create(n)),e&&_Fe.batchedUpdates(()=>{this._onChange(n,t)})}}return dze(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,pHe(this,"onStart",Gze(this,sHe(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),Sze(this.animation.onChange,e,this)),Sze(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;dze(this).reset(IUe(e.to)),e.immediate||(e.fromValues=e.values.map(e=>e.lastPosition)),tHe(this)||(rHe(this,!0),nHe(this)||this._resume())}_resume(){HFe.skipAnimation?this.finish():lUe.start(this)}_stop(e,t){if(tHe(this)){rHe(this,!1);const n=this.animation;KFe(n.values,e=>{e.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),LUe(this,{type:"idle",parent:this});const r=t?Wze(this.get()):Gze(this.get(),sHe(this,e??n.to));ZFe(this._pendingCalls,r),n.changed&&(n.changed=!1,pHe(this,"onRest",r,this))}}};function sHe(e,t){const n=Rze(t);return WFe(Rze(e.get()),n)}function oHe(e,t=e.loop,n=e.to){const r=Sze(t);if(r){const i=!0!==r&&Oze(r),a=(i||e).reverse,s=!i||i.reset;return lHe({...e,loop:t,default:!1,pause:void 0,to:!a||Ize(n)?n:void 0,from:s?e.from:void 0,reset:s,...i})}}function lHe(e){const{to:t,from:n}=e=Oze(e),r=new Set;return GFe.obj(t)&&dHe(t,r),GFe.obj(n)&&dHe(n,r),e.keys=r.size?Array.from(r):null,e}function cHe(e){const t=lHe(e);return GFe.und(t.default)&&(t.default=kze(t)),t}function dHe(e,t){qFe(e,(e,n)=>null!=e&&t.add(n))}var uHe=["onStart","onRest","onChange","onPause","onResume"];function hHe(e,t,n){e.animation[n]=t[n]!==Mze(t,n)?Aze(t[n],e.key):void 0}function pHe(e,t,...n){var r,i,a,s;null==(i=(r=e.animation)[t])||i.call(r,...n),null==(s=(a=e.defaultProps)[t])||s.call(a,...n)}var mHe=["onStart","onChange","onRest"],fHe=1,gHe=class{constructor(e,t){this.id=fHe++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,n)=>e[n]=t.get()),e}set(e){for(const t in e){const n=e[t];GFe.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(lHe(e)),this}start(e){let{queue:t}=this;return e?t=XFe(e).map(lHe):this.queue=[],this._flush?this._flush(this,t):(NHe(this,t),vHe(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;KFe(XFe(t),t=>n[t].stop(!!e))}else qze(this._state,this._lastAsyncId),this.each(t=>t.stop(!!e));return this}pause(e){if(GFe.und(e))this.start({pause:!0});else{const t=this.springs;KFe(XFe(e),e=>t[e].pause())}return this}resume(e){if(GFe.und(e))this.start({pause:!1});else{const t=this.springs;KFe(XFe(e),e=>t[e].resume())}return this}each(e){qFe(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,i=this._changed.size>0;(r&&!this._started||i&&!this._started)&&(this._started=!0,$Fe(e,([e,t])=>{t.value=this.get(),e(t,this,this._item)}));const a=!r&&this._started,s=i||a&&n.size?this.get():null;i&&t.size&&$Fe(t,([e,t])=>{t.value=s,e(t,this,this._item)}),a&&(this._started=!1,$Fe(n,([e,t])=>{t.value=s,e(t,this,this._item)}))}eventObserved(e){if("change"==e.type)this._changed.add(e.parent),e.idle||this._active.add(e.parent);else{if("idle"!=e.type)return;this._active.delete(e.parent)}_Fe.onFrame(this._onFrame)}};function vHe(e,t){return Promise.all(t.map(t=>xHe(e,t))).then(t=>Hze(e,t))}async function xHe(e,t,n){const{keys:r,to:i,from:a,loop:s,onRest:o,onResolve:l}=t,c=GFe.obj(t.default)&&t.default;s&&(t.loop=!1),!1===i&&(t.to=null),!1===a&&(t.from=null);const d=GFe.arr(i)||GFe.fun(i)?i:void 0;d?(t.to=void 0,t.onRest=void 0,c&&(c.onRest=void 0)):KFe(mHe,n=>{const r=t[n];if(GFe.fun(r)){const i=e._events[n];t[n]=({finished:e,cancelled:t})=>{const n=i.get(r);n?(e||(n.finished=!1),t&&(n.cancelled=!0)):i.set(r,{value:null,finished:e||!1,cancelled:t||!1})},c&&(c[n]=t[n])}});const u=e._state;t.pause===!u.paused?(u.paused=t.pause,ZFe(t.pause?u.pauseQueue:u.resumeQueue)):u.paused&&(t.pause=!0);const h=(r||Object.keys(e.springs)).map(n=>e.springs[n].start(t)),p=!0===t.cancel||!0===Mze(t,"cancel");(d||p&&u.asyncId)&&h.push(zze(++e._lastAsyncId,{props:t,state:u,actions:{pause:VFe,resume:VFe,start(t,n){p?(qze(u,e._lastAsyncId),n(Wze(e))):(t.onRest=o,n(Kze(d,t,u,e)))}}})),u.paused&&await new Promise(e=>{u.resumeQueue.add(e)});const m=Hze(e,await Promise.all(h));if(s&&m.finished&&(!n||!m.noop)){const n=oHe(t,s,i);if(n)return NHe(e,[n]),xHe(e,n,!0)}return l&&_Fe.batchedUpdates(()=>l(m,e,e.item)),m}function yHe(e,t){const n={...e.springs};return t&&KFe(XFe(t),e=>{GFe.und(e.keys)&&(e=lHe(e)),GFe.obj(e.to)||(e={...e,to:void 0}),jHe(n,e,e=>wHe(e))}),bHe(e,n),n}function bHe(e,t){qFe(t,(t,n)=>{e.springs[n]||(e.springs[n]=t,UUe(t,e))})}function wHe(e,t){const n=new aHe;return n.key=e,t&&UUe(n,t),n}function jHe(e,t,n){t.keys&&KFe(t.keys,r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)})}function NHe(e,t){KFe(t,t=>{jHe(e.springs,t,t=>wHe(t,e))})}var _He,SHe,CHe=({children:e,...t})=>{const n=Ve.useContext(AHe),r=t.pause||!!n.pause,i=t.immediate||!!n.immediate;t=function(e,t){const[n]=Ve.useState(()=>({inputs:t,result:e()})),r=Ve.useRef(),i=r.current;let a=i;if(a){const n=Boolean(t&&a.inputs&&function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,a.inputs));n||(a={inputs:t,result:e()})}else a=n;return Ve.useEffect(()=>{r.current=a,i==n&&(n.inputs=n.result=void 0)},[a]),a.result}(()=>({pause:r,immediate:i}),[r,i]);const{Provider:a}=AHe;return Ve.createElement(a,{value:t},e)},AHe=(_He=CHe,SHe={},Object.assign(_He,Ve.createContext(SHe)),_He.Provider._context=_He,_He.Consumer._context=_He,_He);CHe.Provider=AHe.Provider,CHe.Consumer=AHe.Consumer;var MHe=()=>{const e=[],t=function(t){nze(`${QUe}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`);const r=[];return KFe(e,(e,i)=>{if(GFe.und(t))r.push(e.start());else{const a=n(t,e,i);a&&r.push(e.start(a))}}),r};t.current=e,t.add=function(t){e.includes(t)||e.push(t)},t.delete=function(t){const n=e.indexOf(t);~n&&e.splice(n,1)},t.pause=function(){return KFe(e,e=>e.pause(...arguments)),this},t.resume=function(){return KFe(e,e=>e.resume(...arguments)),this},t.set=function(t){KFe(e,(e,n)=>{const r=GFe.fun(t)?t(n,e):t;r&&e.set(r)})},t.start=function(t){const n=[];return KFe(e,(e,r)=>{if(GFe.und(t))n.push(e.start());else{const i=this._getProps(t,e,r);i&&n.push(e.start(i))}}),n},t.stop=function(){return KFe(e,e=>e.stop(...arguments)),this},t.update=function(t){return KFe(e,(e,n)=>e.update(this._getProps(t,e,n))),this};const n=function(e,t,n){return GFe.fun(e)?e(n,t):e};return t._getProps=n,t};function EHe(e,t){const n=GFe.fun(e),[[r],i]=function(e,t,n){const r=GFe.fun(t)&&t;r&&!n&&(n=[]);const i=Ve.useMemo(()=>r||3==arguments.length?MHe():void 0,[]),a=Ve.useRef(0),s=aze(),o=Ve.useMemo(()=>({ctrls:[],queue:[],flush(e,t){const n=yHe(e,t);return a.current>0&&!o.queue.length&&!Object.keys(n).some(t=>!e.springs[t])?vHe(e,t):new Promise(r=>{bHe(e,n),o.queue.push(()=>{r(vHe(e,t))}),s()})}}),[]),l=Ve.useRef([...o.ctrls]),c=[],d=lze(e)||0;function u(e,n){for(let i=e;i<n;i++){const e=l.current[i]||(l.current[i]=new gHe(null,o.flush)),n=r?r(i,e):t[i];n&&(c[i]=cHe(n))}}Ve.useMemo(()=>{KFe(l.current.slice(e,d),e=>{!function(e,t){var n;null==(n=e.ref)||n.delete(e),null==t||t.delete(e)}(e,i),e.stop(!0)}),l.current.length=e,u(d,e)},[e]),Ve.useMemo(()=>{u(0,Math.min(d,e))},n);const h=l.current.map((e,t)=>yHe(e,c[t])),p=Ve.useContext(CHe),m=lze(p),f=p!==m&&function(e){for(const t in e)return!0;return!1}(p);ize(()=>{a.current++,o.ctrls=l.current;const{queue:e}=o;e.length&&(o.queue=[],KFe(e,e=>e())),KFe(l.current,(e,t)=>{null==i||i.add(e),f&&e.start({default:p});const n=c[t];n&&(function(e,t){var n;t&&e.ref!==t&&(null==(n=e.ref)||n.delete(e),t.add(e),e.ref=t)}(e,n.ref),e.ref?e.queue.push(n):e.start(n))})}),sze(()=>()=>{KFe(o.ctrls,e=>e.stop(!0))});const g=h.map(e=>({...e}));return i?[g,i]:g}(1,n?e:[e],n?[]:t);return n||2==arguments.length?[r,i]:r}var kHe=class extends Zze{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=TUe(...t);const n=this._get(),r=bze(n);uze(this,r.create(n))}advance(e){const t=this._get();WFe(t,this.get())||(dze(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&PHe(this._active)&&OHe(this)}_get(){const e=GFe.arr(this.source)?this.source.map(IUe):XFe(IUe(this.source));return this.calc(...e)}_start(){this.idle&&!PHe(this._active)&&(this.idle=!1,KFe(hze(this),e=>{e.done=!1}),HFe.skipAnimation?(_Fe.batchedUpdates(()=>this.advance()),OHe(this)):lUe.start(this))}_attach(){let e=1;KFe(XFe(this.source),t=>{RUe(t)&&UUe(t,this),Yze(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){KFe(XFe(this.source),e=>{RUe(e)&&zUe(e,this)}),this._active.clear(),OHe(this)}eventObserved(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=XFe(this.source).reduce((e,t)=>Math.max(e,(Yze(t)?t.priority:0)+1),0))}};function THe(e){return!1!==e.idle}function PHe(e){return!e.size||Array.from(e).every(THe)}function OHe(e){e.idle||(e.idle=!0,KFe(hze(e),e=>{e.done=!0}),LUe(e,{type:"idle",parent:e}))}HFe.assign({createStringInterpolator:ZUe,to:(e,t)=>new kHe(e,t)});var RHe=["primitive"].concat(Object.keys(mDe).filter(e=>/^[A-Z]/.test(e)).map(e=>e[0].toLowerCase()+e.slice(1)));HFe.assign({createStringInterpolator:ZUe,colors:{transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},frameLoop:"demand"}),function(e,t){const n={callback:e};t.add(n)}(()=>{_Fe.advance()},fLe);var IHe=((e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=e=>new vze(e),getComponentProps:r=e=>e}={})=>{const i={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},a=e=>{const t=_ze(e)||"Anonymous";return(e=GFe.str(e)?a[e]||(a[e]=wze(e,i)):e[Nze]||(e[Nze]=wze(e,i))).displayName=`Animated(${t})`,e};return qFe(e,(t,n)=>{GFe.arr(e)&&(n=_ze(t)),a[n]=a(t)}),{animated:a}})(RHe,{applyAnimatedValues:OLe}).animated;function DHe({enabled:e=!0,snap:t,global:n,domElement:r,cursor:i=!0,children:a,speed:s=1,rotation:o=[0,0,0],zoom:l=1,polar:c=[0,Math.PI/2],azimuth:d=[-1/0,1/0],config:u={mass:1,tension:170,friction:26}}){const h=_Le(e=>e.events),p=_Le(e=>e.gl),m=r||h.connected||p.domElement,{size:f}=_Le(),g=Ve.useMemo(()=>[o[0]+c[0],o[0]+c[1]],[o[0],c[0],c[1]]),v=Ve.useMemo(()=>[o[1]+d[0],o[1]+d[1]],[o[1],d[0],d[1]]),x=Ve.useMemo(()=>[mSe.clamp(o[0],...g),mSe.clamp(o[1],...v),o[2]],[o[0],o[1],o[2],g,v]),[y,b]=EHe(()=>({scale:1,rotation:x,config:u}));Ve.useEffect(()=>{b.start({scale:1,rotation:x,config:u})},[x]),Ve.useEffect(()=>{if(n&&i&&e)return m.style.cursor="grab",p.domElement.style.cursor="",()=>{m.style.cursor="default",p.domElement.style.cursor="default"}},[n,i,m,e]);const w=function(e,t){return jFe([iFe,oFe,lFe,cFe,sFe,aFe])(e,t||{})}({onHover:({last:t})=>{i&&!n&&e&&(m.style.cursor=t?"auto":"grab")},onDrag:({down:n,delta:[r,a],memo:[o,c]=y.rotation.animation.to||x})=>{if(!e)return[a,r];i&&(m.style.cursor=n?"grabbing":"grab"),r=mSe.clamp(c+r/f.width*Math.PI*s,...v),a=mSe.clamp(o+a/f.height*Math.PI*s,...g);const d=t&&!n&&"boolean"!=typeof t?t:u;return b.start({scale:n&&a>g[1]/2?l:1,rotation:t&&!n?x:[a,r,0],config:e=>"scale"===e?{...d,friction:3*d.friction}:d}),[a,r]}},{target:n?m:void 0});return Ve.createElement(IHe.group,W3({},null==w?void 0:w(),y),a)}const LHe=(()=>parseInt(Fje.replace(/\D+/g,"")))();function BHe(e,t){if(0===t)return e;if(2===t||1===t){let n=e.getIndex();if(null===n){const t=[],r=e.getAttribute("position");if(void 0===r)return e;for(let e=0;e<r.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const r=n.count-2,i=[];if(n)if(2===t)for(let e=1;e<=r;e++)i.push(n.getX(0)),i.push(n.getX(e)),i.push(n.getX(e+1));else for(let e=0;e<r;e++)e%2==0?(i.push(n.getX(e)),i.push(n.getX(e+1)),i.push(n.getX(e+2))):(i.push(n.getX(e+2)),i.push(n.getX(e+1)),i.push(n.getX(e)));i.length;const a=e.clone();return a.setIndex(i),a.clearGroups(),a}return e}var FHe=Uint8Array,UHe=Uint16Array,zHe=Uint32Array,HHe=new FHe([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),VHe=new FHe([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),GHe=new FHe([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),WHe=function(e,t){for(var n=new UHe(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new zHe(n[30]);for(r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return[n,i]},KHe=WHe(HHe,2),qHe=KHe[0],XHe=KHe[1];qHe[28]=258,XHe[258]=28;for(var $He=WHe(VHe,0)[0],YHe=new UHe(32768),JHe=0;JHe<32768;++JHe){var ZHe=(43690&JHe)>>>1|(21845&JHe)<<1;ZHe=(61680&(ZHe=(52428&ZHe)>>>2|(13107&ZHe)<<2))>>>4|(3855&ZHe)<<4,YHe[JHe]=((65280&ZHe)>>>8|(255&ZHe)<<8)>>>1}var QHe=function(e,t,n){for(var r=e.length,i=0,a=new UHe(t);i<r;++i)++a[e[i]-1];var s,o=new UHe(t);for(i=0;i<t;++i)o[i]=o[i-1]+a[i-1]<<1;if(n){s=new UHe(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var c=i<<4|e[i],d=t-e[i],u=o[e[i]-1]++<<d,h=u|(1<<d)-1;u<=h;++u)s[YHe[u]>>>l]=c}else for(s=new UHe(r),i=0;i<r;++i)e[i]&&(s[i]=YHe[o[e[i]-1]++]>>>15-e[i]);return s},eVe=new FHe(288);for(JHe=0;JHe<144;++JHe)eVe[JHe]=8;for(JHe=144;JHe<256;++JHe)eVe[JHe]=9;for(JHe=256;JHe<280;++JHe)eVe[JHe]=7;for(JHe=280;JHe<288;++JHe)eVe[JHe]=8;var tVe=new FHe(32);for(JHe=0;JHe<32;++JHe)tVe[JHe]=5;var nVe=QHe(eVe,9,1),rVe=QHe(tVe,5,1),iVe=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},aVe=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},sVe=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},oVe=function(e){return(e/8|0)+(7&e&&1)},lVe=function(e,t,n){var r=e.length;if(!r||n&&!n.l&&r<5)return t||new FHe(0);var i=!t||n,a=!n||n.i;n||(n={}),t||(t=new FHe(3*r));var s=function(e){var n=t.length;if(e>n){var r=new FHe(Math.max(2*n,e));r.set(t),t=r}},o=n.f||0,l=n.p||0,c=n.b||0,d=n.l,u=n.d,h=n.m,p=n.n,m=8*r;do{if(!d){n.f=o=aVe(e,l,1);var f=aVe(e,l+1,3);if(l+=3,!f){var g=e[(A=oVe(l)+4)-4]|e[A-3]<<8,v=A+g;if(v>r){if(a)throw"unexpected EOF";break}i&&s(c+g),t.set(e.subarray(A,v),c),n.b=c+=g,n.p=l=8*v;continue}if(1==f)d=nVe,u=rVe,h=9,p=5;else{if(2!=f)throw"invalid block type";var x=aVe(e,l,31)+257,y=aVe(e,l+10,15)+4,b=x+aVe(e,l+5,31)+1;l+=14;for(var w=new FHe(b),j=new FHe(19),N=0;N<y;++N)j[GHe[N]]=aVe(e,l+3*N,7);l+=3*y;var _=iVe(j),S=(1<<_)-1,C=QHe(j,_,1);for(N=0;N<b;){var A,M=C[aVe(e,l,S)];if(l+=15&M,(A=M>>>4)<16)w[N++]=A;else{var E=0,k=0;for(16==A?(k=3+aVe(e,l,3),l+=2,E=w[N-1]):17==A?(k=3+aVe(e,l,7),l+=3):18==A&&(k=11+aVe(e,l,127),l+=7);k--;)w[N++]=E}}var T=w.subarray(0,x),P=w.subarray(x);h=iVe(T),p=iVe(P),d=QHe(T,h,1),u=QHe(P,p,1)}if(l>m){if(a)throw"unexpected EOF";break}}i&&s(c+131072);for(var O=(1<<h)-1,R=(1<<p)-1,I=l;;I=l){var D=(E=d[sVe(e,l)&O])>>>4;if((l+=15&E)>m){if(a)throw"unexpected EOF";break}if(!E)throw"invalid length/literal";if(D<256)t[c++]=D;else{if(256==D){I=l,d=null;break}var L=D-254;if(D>264){var B=HHe[N=D-257];L=aVe(e,l,(1<<B)-1)+qHe[N],l+=B}var F=u[sVe(e,l)&R],U=F>>>4;if(!F)throw"invalid distance";l+=15&F;P=$He[U];if(U>3){B=VHe[U];P+=sVe(e,l)&(1<<B)-1,l+=B}if(l>m){if(a)throw"unexpected EOF";break}i&&s(c+131072);for(var z=c+L;c<z;c+=4)t[c]=t[c-P],t[c+1]=t[c+1-P],t[c+2]=t[c+2-P],t[c+3]=t[c+3-P];c=z}}n.l=d,n.p=I,n.b=c,d&&(o=1,n.m=h,n.d=u,n.n=p)}while(!o);return c==t.length?t:function(e,t,n){(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof UHe?UHe:e instanceof zHe?zHe:FHe)(n-t);return r.set(e.subarray(t,n)),r}(t,0,c)},cVe=new FHe(0);function dVe(e,t){return lVe((function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"}(e),e.subarray(2,-4)),t)}var uVe="undefined"!=typeof TextDecoder&&new TextDecoder;try{uVe.decode(cVe,{stream:!0})}catch(CI){}class hVe extends YAe{constructor(e,t){var n,r;const i=(a=e)&&a.isCubeTexture;var a;const s=(null!=(r=i?null==(n=e.image[0])?void 0:n.width:e.image.width)?r:1024)/4,o=Math.floor(Math.log2(s)),l=Math.pow(2,o),c=[i?"#define ENVMAP_TYPE_CUBE":"","#define CUBEUV_TEXEL_WIDTH "+1/(3*Math.max(l,112)),"#define CUBEUV_TEXEL_HEIGHT "+1/(4*l),`#define CUBEUV_MAX_MIP ${o}.0`].join("\n")+`\n        #define ENVMAP_TYPE_CUBE_UV\n        varying vec3 vWorldPosition;\n        uniform float radius;\n        uniform float height;\n        uniform float angle;\n        #ifdef ENVMAP_TYPE_CUBE\n            uniform samplerCube map;\n        #else\n            uniform sampler2D map;\n        #endif\n        // From: https://www.shadertoy.com/view/4tsBD7\n        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) \n        {\n            float d = dot ( rd, n );\n            \n            if( d > 0.0 ) { return 1e6; }\n            \n            vec3  o = ro - c;\n            float t = - dot( n, o ) / d;\n            vec3  q = o + rd * t;\n            \n            return ( dot( q, q ) < r * r ) ? t : 1e6;\n        }\n        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm\n        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) \n        {\n            vec3 oc = ro - ce;\n            float b = dot( oc, rd );\n            float c = dot( oc, oc ) - ra * ra;\n            float h = b * b - c;\n            \n            if( h < 0.0 ) { return -1.0; }\n            \n            h = sqrt( h );\n            \n            return - b + h;\n        }\n        vec3 project() \n        {\n            vec3 p = normalize( vWorldPosition );\n            vec3 camPos = cameraPosition;\n            camPos.y -= height;\n            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );\n            if( intersection > 0.0 ) {\n                \n                vec3 h = vec3( 0.0, - height, 0.0 );\n                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );\n                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;\n            } else {\n                p = vec3( 0.0, 1.0, 0.0 );\n            }\n            return p;\n        }\n        #include <common>\n        #include <cube_uv_reflection_fragment>\n        void main() \n        {\n            vec3 projectedWorldPosition = project();\n            \n            #ifdef ENVMAP_TYPE_CUBE\n                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;\n            #else\n                vec3 direction = normalize( projectedWorldPosition );\n                vec2 uv = equirectUv( direction );\n                vec3 outcolor = texture2D( map, uv ).rgb;\n            #endif\n            gl_FragColor = vec4( outcolor, 1.0 );\n            #include <tonemapping_fragment>\n            #include <${LHe>=154?"colorspace_fragment":"encodings_fragment"}>\n        }\n        `,d={map:{value:e},height:{value:(null==t?void 0:t.height)||15},radius:{value:(null==t?void 0:t.radius)||100}};super(new VOe(1,16),new rMe({uniforms:d,fragmentShader:c,vertexShader:"\n        varying vec3 vWorldPosition;\n        void main() \n        {\n            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );\n            vWorldPosition = worldPosition.xyz;\n            \n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }\n        ",side:2}))}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var pVe=Object.defineProperty,mVe=(e,t,n)=>(((e,t,n)=>{t in e?pVe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,t+"",n),n);class fVe{constructor(){mVe(this,"_listeners")}addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}var gVe=Object.defineProperty,vVe=(e,t,n)=>(((e,t,n)=>{t in e?gVe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const xVe=new bCe,yVe=new pMe,bVe=Math.cos(Math.PI/180*70),wVe=(e,t)=>(e%t+t)%t;let jVe=class extends fVe{constructor(e,t){super(),vVe(this,"object"),vVe(this,"domElement"),vVe(this,"enabled",!0),vVe(this,"target",new WSe),vVe(this,"minDistance",0),vVe(this,"maxDistance",1/0),vVe(this,"minZoom",0),vVe(this,"maxZoom",1/0),vVe(this,"minPolarAngle",0),vVe(this,"maxPolarAngle",Math.PI),vVe(this,"minAzimuthAngle",-1/0),vVe(this,"maxAzimuthAngle",1/0),vVe(this,"enableDamping",!1),vVe(this,"dampingFactor",.05),vVe(this,"enableZoom",!0),vVe(this,"zoomSpeed",1),vVe(this,"enableRotate",!0),vVe(this,"rotateSpeed",1),vVe(this,"enablePan",!0),vVe(this,"panSpeed",1),vVe(this,"screenSpacePanning",!0),vVe(this,"keyPanSpeed",7),vVe(this,"zoomToCursor",!1),vVe(this,"autoRotate",!1),vVe(this,"autoRotateSpeed",2),vVe(this,"reverseOrbit",!1),vVe(this,"reverseHorizontalOrbit",!1),vVe(this,"reverseVerticalOrbit",!1),vVe(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),vVe(this,"mouseButtons",{LEFT:Uje.ROTATE,MIDDLE:Uje.DOLLY,RIGHT:Uje.PAN}),vVe(this,"touches",{ONE:zje.ROTATE,TWO:zje.DOLLY_PAN}),vVe(this,"target0"),vVe(this,"position0"),vVe(this,"zoom0"),vVe(this,"_domElementKeyEvents",null),vVe(this,"getPolarAngle"),vVe(this,"getAzimuthalAngle"),vVe(this,"setPolarAngle"),vVe(this,"setAzimuthalAngle"),vVe(this,"getDistance"),vVe(this,"getZoomScale"),vVe(this,"listenToKeyEvents"),vVe(this,"stopListenToKeyEvents"),vVe(this,"saveState"),vVe(this,"reset"),vVe(this,"update"),vVe(this,"connect"),vVe(this,"dispose"),vVe(this,"dollyIn"),vVe(this,"dollyOut"),vVe(this,"getScale"),vVe(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=e=>{let t=wVe(e,2*Math.PI),r=c.phi;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let i=Math.abs(t-r);2*Math.PI-i<i&&(t<r?t+=2*Math.PI:r+=2*Math.PI),d.phi=t-r,n.update()},this.setAzimuthalAngle=e=>{let t=wVe(e,2*Math.PI),r=c.theta;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let i=Math.abs(t-r);2*Math.PI-i<i&&(t<r?t+=2*Math.PI:r+=2*Math.PI),d.theta=t-r,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=e=>{e.addEventListener("keydown",Y),this._domElementKeyEvents=e},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Y),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),o=s.NONE},this.update=(()=>{const t=new WSe,i=new WSe(0,1,0),a=(new GSe).setFromUnitVectors(e.up,i),p=a.clone().invert(),m=new WSe,f=new GSe,g=2*Math.PI;return function(){const v=n.object.position;a.setFromUnitVectors(e.up,i),p.copy(a).invert(),t.copy(v).sub(n.target),t.applyQuaternion(a),c.setFromVector3(t),n.autoRotate&&o===s.NONE&&M(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(c.theta+=d.theta*n.dampingFactor,c.phi+=d.phi*n.dampingFactor):(c.theta+=d.theta,c.phi+=d.phi);let x=n.minAzimuthAngle,y=n.maxAzimuthAngle;isFinite(x)&&isFinite(y)&&(x<-Math.PI?x+=g:x>Math.PI&&(x-=g),y<-Math.PI?y+=g:y>Math.PI&&(y-=g),c.theta=x<=y?Math.max(x,Math.min(y,c.theta)):c.theta>(x+y)/2?Math.max(x,c.theta):Math.min(y,c.theta)),c.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,c.phi)),c.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(h,n.dampingFactor):n.target.add(h),n.zoomToCursor&&_||n.object.isOrthographicCamera?c.radius=L(c.radius):c.radius=L(c.radius*u),t.setFromSpherical(c),t.applyQuaternion(p),v.copy(n.target).add(t),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),!0===n.enableDamping?(d.theta*=1-n.dampingFactor,d.phi*=1-n.dampingFactor,h.multiplyScalar(1-n.dampingFactor)):(d.set(0,0,0),h.set(0,0,0));let b=!1;if(n.zoomToCursor&&_){let r=null;if(n.object instanceof aMe&&n.object.isPerspectiveCamera){const e=t.length();r=L(e*u);const i=e-r;n.object.position.addScaledVector(j,i),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const e=new WSe(N.x,N.y,0);e.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/u)),n.object.updateProjectionMatrix(),b=!0;const i=new WSe(N.x,N.y,0);i.unproject(n.object),n.object.position.sub(i).add(e),n.object.updateMatrixWorld(),r=t.length()}else n.zoomToCursor=!1;null!==r&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(r).add(n.object.position):(xVe.origin.copy(n.object.position),xVe.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(xVe.direction))<bVe?e.lookAt(n.target):(yVe.setFromNormalAndCoplanarPoint(n.object.up,n.target),xVe.intersectPlane(yVe,n.target))))}else n.object instanceof kMe&&n.object.isOrthographicCamera&&(b=1!==u,b&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/u)),n.object.updateProjectionMatrix()));return u=1,_=!1,!!(b||m.distanceToSquared(n.object.position)>l||8*(1-f.dot(n.object.quaternion))>l)&&(n.dispatchEvent(r),m.copy(n.object.position),f.copy(n.object.quaternion),b=!1,!0)}})(),this.connect=e=>{n.domElement=e,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",J),n.domElement.addEventListener("pointerdown",K),n.domElement.addEventListener("pointercancel",X),n.domElement.addEventListener("wheel",$)},this.dispose=()=>{var e,t,r,i,a,s;n.domElement&&(n.domElement.style.touchAction="auto"),null==(e=n.domElement)||e.removeEventListener("contextmenu",J),null==(t=n.domElement)||t.removeEventListener("pointerdown",K),null==(r=n.domElement)||r.removeEventListener("pointercancel",X),null==(i=n.domElement)||i.removeEventListener("wheel",$),null==(a=n.domElement)||a.ownerDocument.removeEventListener("pointermove",q),null==(s=n.domElement)||s.ownerDocument.removeEventListener("pointerup",X),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",Y)};const n=this,r={type:"change"},i={type:"start"},a={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=s.NONE;const l=1e-6,c=new KIe,d=new KIe;let u=1;const h=new WSe,p=new fSe,m=new fSe,f=new fSe,g=new fSe,v=new fSe,x=new fSe,y=new fSe,b=new fSe,w=new fSe,j=new WSe,N=new fSe;let _=!1;const S=[],C={};function A(){return Math.pow(.95,n.zoomSpeed)}function M(e){n.reverseOrbit||n.reverseHorizontalOrbit?d.theta+=e:d.theta-=e}function E(e){n.reverseOrbit||n.reverseVerticalOrbit?d.phi+=e:d.phi-=e}const k=(()=>{const e=new WSe;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),h.add(e)}})(),T=(()=>{const e=new WSe;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),h.add(e)}})(),P=(()=>{const e=new WSe;return function(t,r){const i=n.domElement;if(i&&n.object instanceof aMe&&n.object.isPerspectiveCamera){const a=n.object.position;e.copy(a).sub(n.target);let s=e.length();s*=Math.tan(n.object.fov/2*Math.PI/180),k(2*t*s/i.clientHeight,n.object.matrix),T(2*r*s/i.clientHeight,n.object.matrix)}else i&&n.object instanceof kMe&&n.object.isOrthographicCamera?(k(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),T(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):n.enablePan=!1}})();function O(e){n.object instanceof aMe&&n.object.isPerspectiveCamera||n.object instanceof kMe&&n.object.isOrthographicCamera?u=e:n.enableZoom=!1}function R(e){O(u/e)}function I(e){O(u*e)}function D(e){if(!n.zoomToCursor||!n.domElement)return;_=!0;const t=n.domElement.getBoundingClientRect(),r=e.clientX-t.left,i=e.clientY-t.top,a=t.width,s=t.height;N.x=r/a*2-1,N.y=-i/s*2+1,j.set(N.x,N.y,1).unproject(n.object).sub(n.object.position).normalize()}function L(e){return Math.max(n.minDistance,Math.min(n.maxDistance,e))}function B(e){p.set(e.clientX,e.clientY)}function F(e){g.set(e.clientX,e.clientY)}function U(){if(1==S.length)p.set(S[0].pageX,S[0].pageY);else{const e=.5*(S[0].pageX+S[1].pageX),t=.5*(S[0].pageY+S[1].pageY);p.set(e,t)}}function z(){if(1==S.length)g.set(S[0].pageX,S[0].pageY);else{const e=.5*(S[0].pageX+S[1].pageX),t=.5*(S[0].pageY+S[1].pageY);g.set(e,t)}}function H(){const e=S[0].pageX-S[1].pageX,t=S[0].pageY-S[1].pageY,n=Math.sqrt(e*e+t*t);y.set(0,n)}function V(e){if(1==S.length)m.set(e.pageX,e.pageY);else{const t=Q(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);m.set(n,r)}f.subVectors(m,p).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(M(2*Math.PI*f.x/t.clientHeight),E(2*Math.PI*f.y/t.clientHeight)),p.copy(m)}function G(e){if(1==S.length)v.set(e.pageX,e.pageY);else{const t=Q(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);v.set(n,r)}x.subVectors(v,g).multiplyScalar(n.panSpeed),P(x.x,x.y),g.copy(v)}function W(e){const t=Q(e),r=e.pageX-t.x,i=e.pageY-t.y,a=Math.sqrt(r*r+i*i);b.set(0,a),w.set(0,Math.pow(b.y/y.y,n.zoomSpeed)),R(w.y),y.copy(b)}function K(e){var t,r;!1!==n.enabled&&(0===S.length&&(null==(t=n.domElement)||t.ownerDocument.addEventListener("pointermove",q),null==(r=n.domElement)||r.ownerDocument.addEventListener("pointerup",X)),function(e){S.push(e)}(e),"touch"===e.pointerType?function(e){switch(Z(e),S.length){case 1:switch(n.touches.ONE){case zje.ROTATE:if(!1===n.enableRotate)return;U(),o=s.TOUCH_ROTATE;break;case zje.PAN:if(!1===n.enablePan)return;z(),o=s.TOUCH_PAN;break;default:o=s.NONE}break;case 2:switch(n.touches.TWO){case zje.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&H(),n.enablePan&&z(),o=s.TOUCH_DOLLY_PAN;break;case zje.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&H(),n.enableRotate&&U(),o=s.TOUCH_DOLLY_ROTATE;break;default:o=s.NONE}break;default:o=s.NONE}o!==s.NONE&&n.dispatchEvent(i)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case Uje.DOLLY:if(!1===n.enableZoom)return;!function(e){D(e),y.set(e.clientX,e.clientY)}(e),o=s.DOLLY;break;case Uje.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;F(e),o=s.PAN}else{if(!1===n.enableRotate)return;B(e),o=s.ROTATE}break;case Uje.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;B(e),o=s.ROTATE}else{if(!1===n.enablePan)return;F(e),o=s.PAN}break;default:o=s.NONE}o!==s.NONE&&n.dispatchEvent(i)}(e))}function q(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(Z(e),o){case s.TOUCH_ROTATE:if(!1===n.enableRotate)return;V(e),n.update();break;case s.TOUCH_PAN:if(!1===n.enablePan)return;G(e),n.update();break;case s.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&W(e),n.enablePan&&G(e)}(e),n.update();break;case s.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&W(e),n.enableRotate&&V(e)}(e),n.update();break;default:o=s.NONE}}(e):function(e){if(!1===n.enabled)return;switch(o){case s.ROTATE:if(!1===n.enableRotate)return;!function(e){m.set(e.clientX,e.clientY),f.subVectors(m,p).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(M(2*Math.PI*f.x/t.clientHeight),E(2*Math.PI*f.y/t.clientHeight)),p.copy(m),n.update()}(e);break;case s.DOLLY:if(!1===n.enableZoom)return;!function(e){b.set(e.clientX,e.clientY),w.subVectors(b,y),w.y>0?R(A()):w.y<0&&I(A()),y.copy(b),n.update()}(e);break;case s.PAN:if(!1===n.enablePan)return;!function(e){v.set(e.clientX,e.clientY),x.subVectors(v,g).multiplyScalar(n.panSpeed),P(x.x,x.y),g.copy(v),n.update()}(e)}}(e))}function X(e){var t,r,i;!function(e){delete C[e.pointerId];for(let t=0;t<S.length;t++)if(S[t].pointerId==e.pointerId)return void S.splice(t,1)}(e),0===S.length&&(null==(t=n.domElement)||t.releasePointerCapture(e.pointerId),null==(r=n.domElement)||r.ownerDocument.removeEventListener("pointermove",q),null==(i=n.domElement)||i.ownerDocument.removeEventListener("pointerup",X)),n.dispatchEvent(a),o=s.NONE}function $(e){!1===n.enabled||!1===n.enableZoom||o!==s.NONE&&o!==s.ROTATE||(e.preventDefault(),n.dispatchEvent(i),function(e){D(e),e.deltaY<0?I(A()):e.deltaY>0&&R(A()),n.update()}(e),n.dispatchEvent(a))}function Y(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:P(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:P(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:P(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:P(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function J(e){!1!==n.enabled&&e.preventDefault()}function Z(e){let t=C[e.pointerId];void 0===t&&(t=new fSe,C[e.pointerId]=t),t.set(e.pageX,e.pageY)}function Q(e){const t=e.pointerId===S[0].pointerId?S[1]:S[0];return C[t.pointerId]}this.dollyIn=(e=A())=>{I(e),n.update()},this.dollyOut=(e=A())=>{R(e),n.update()},this.getScale=()=>u,this.setScale=e=>{O(e),n.update()},this.getZoomScale=()=>A(),void 0!==t&&this.connect(t),this.update()}};function NVe(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(CI){return t}}const _Ve="srgb",SVe="srgb-linear";class CVe extends RRe{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new PVe(e)}),this.register(function(e){return new OVe(e)}),this.register(function(e){return new HVe(e)}),this.register(function(e){return new VVe(e)}),this.register(function(e){return new GVe(e)}),this.register(function(e){return new IVe(e)}),this.register(function(e){return new DVe(e)}),this.register(function(e){return new LVe(e)}),this.register(function(e){return new BVe(e)}),this.register(function(e){return new TVe(e)}),this.register(function(e){return new FVe(e)}),this.register(function(e){return new RVe(e)}),this.register(function(e){return new zVe(e)}),this.register(function(e){return new UVe(e)}),this.register(function(e){return new EVe(e)}),this.register(function(e){return new WVe(e)}),this.register(function(e){return new KVe(e)})}load(e,t,n,r){const i=this;let a;if(""!==this.resourcePath)a=this.resourcePath;else if(""!==this.path){const t=lIe.extractUrlBase(e);a=lIe.resolveURL(t,this.path)}else a=lIe.extractUrlBase(e);this.manager.itemStart(e);const s=function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)},o=new LRe(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(n){try{i.parse(n,a,function(n){t(n),i.manager.itemEnd(e)},s)}catch(CI){s(CI)}},n,s)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let i;const a={},s={};if("string"==typeof e)i=JSON.parse(e);else if(e instanceof ArrayBuffer){if(NVe(new Uint8Array(e.slice(0,4)))===qVe){try{a[MVe.KHR_BINARY_GLTF]=new YVe(e)}catch(l){return void(r&&r(l))}i=JSON.parse(a[MVe.KHR_BINARY_GLTF].content)}else i=JSON.parse(NVe(new Uint8Array(e)))}else i=e;if(void 0===i.asset||i.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const o=new jGe(i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});o.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const e=this.pluginCallbacks[c](o);e.name,s[e.name]=e,a[e.name]=!0}if(i.extensionsUsed)for(let c=0;c<i.extensionsUsed.length;++c){const e=i.extensionsUsed[c],t=i.extensionsRequired||[];switch(e){case MVe.KHR_MATERIALS_UNLIT:a[e]=new kVe;break;case MVe.KHR_DRACO_MESH_COMPRESSION:a[e]=new JVe(i,this.dracoLoader);break;case MVe.KHR_TEXTURE_TRANSFORM:a[e]=new ZVe;break;case MVe.KHR_MESH_QUANTIZATION:a[e]=new QVe;break;default:t.indexOf(e)>=0&&s[e]}}o.setExtensions(a),o.setPlugins(s),o.parse(n,r)}parseAsync(e,t){const n=this;return new Promise(function(r,i){n.parse(e,t,r,i)})}}function AVe(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const MVe={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class EVe{constructor(e){this.parser=e,this.name=MVe.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const i=t.json,a=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e];let s;const o=new cAe(16777215);void 0!==a.color&&o.setRGB(a.color[0],a.color[1],a.color[2],SVe);const l=void 0!==a.range?a.range:0;switch(a.type){case"directional":s=new nIe(o),s.target.position.set(0,0,-1),s.add(s.target);break;case"point":s=new eIe(o),s.distance=l;break;case"spot":s=new $Re(o),s.distance=l,a.spot=a.spot||{},a.spot.innerConeAngle=void 0!==a.spot.innerConeAngle?a.spot.innerConeAngle:0,a.spot.outerConeAngle=void 0!==a.spot.outerConeAngle?a.spot.outerConeAngle:Math.PI/4,s.angle=a.spot.outerConeAngle,s.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,s.target.position.set(0,0,-1),s.add(s.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return s.position.set(0,0,0),s.decay=2,gGe(s,a),void 0!==a.intensity&&(s.intensity=a.intensity),s.name=t.createUniqueName(a.name||"light_"+e),r=Promise.resolve(s),t.cache.add(n,r),r}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then(function(e){return n._getNodeRef(t.cache,i,e)})}}class kVe{constructor(){this.name=MVe.KHR_MATERIALS_UNLIT}getMaterialType(){return pAe}extendParams(e,t,n){const r=[];e.color=new cAe(1,1,1),e.opacity=1;const i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const t=i.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],SVe),e.opacity=t[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture,_Ve))}return Promise.all(r)}}class TVe{constructor(e){this.parser=e,this.name=MVe.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}class PVe{constructor(e){this.parser=e,this.name=MVe.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?iRe:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){const e=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new fSe(e,e)}return Promise.all(i)}}class OVe{constructor(e){this.parser=e,this.name=MVe.KHR_MATERIALS_DISPERSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?iRe:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.dispersion=void 0!==r.dispersion?r.dispersion:0,Promise.resolve()}}class RVe{constructor(e){this.parser=e,this.name=MVe.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?iRe:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];return void 0!==a.iridescenceFactor&&(t.iridescence=a.iridescenceFactor),void 0!==a.iridescenceTexture&&i.push(n.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),void 0!==a.iridescenceIor&&(t.iridescenceIOR=a.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==a.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),void 0!==a.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),void 0!==a.iridescenceThicknessTexture&&i.push(n.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(i)}}class IVe{constructor(e){this.parser=e,this.name=MVe.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?iRe:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[];t.sheenColor=new cAe(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=r.extensions[this.name];if(void 0!==a.sheenColorFactor){const e=a.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],SVe)}return void 0!==a.sheenRoughnessFactor&&(t.sheenRoughness=a.sheenRoughnessFactor),void 0!==a.sheenColorTexture&&i.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture,_Ve)),void 0!==a.sheenRoughnessTexture&&i.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(i)}}class DVe{constructor(e){this.parser=e,this.name=MVe.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?iRe:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(i)}}class LVe{constructor(e){this.parser=e,this.name=MVe.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?iRe:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&i.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const s=a.attenuationColor||[1,1,1];return t.attenuationColor=(new cAe).setRGB(s[0],s[1],s[2],SVe),Promise.all(i)}}class BVe{constructor(e){this.parser=e,this.name=MVe.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?iRe:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class FVe{constructor(e){this.parser=e,this.name=MVe.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?iRe:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&i.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));const s=a.specularColorFactor||[1,1,1];return t.specularColor=(new cAe).setRGB(s[0],s[1],s[2],SVe),void 0!==a.specularColorTexture&&i.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture,_Ve)),Promise.all(i)}}class UVe{constructor(e){this.parser=e,this.name=MVe.EXT_MATERIALS_BUMP}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?iRe:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];return t.bumpScale=void 0!==a.bumpFactor?a.bumpFactor:1,void 0!==a.bumpTexture&&i.push(n.assignTexture(t,"bumpMap",a.bumpTexture)),Promise.all(i)}}class zVe{constructor(e){this.parser=e,this.name=MVe.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?iRe:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],a=r.extensions[this.name];return void 0!==a.anisotropyStrength&&(t.anisotropy=a.anisotropyStrength),void 0!==a.anisotropyRotation&&(t.anisotropyRotation=a.anisotropyRotation),void 0!==a.anisotropyTexture&&i.push(n.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(i)}}class HVe{constructor(e){this.parser=e,this.name=MVe.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i.source,a)}}class VVe{constructor(e){this.parser=e,this.name=MVe.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const a=i.extensions[t],s=r.images[a.source];let o=n.textureLoader;if(s.uri){const e=n.options.manager.getHandler(s.uri);null!==e&&(o=e)}return this.detectSupport().then(function(i){if(i)return n.loadTextureImage(e,a.source,o);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class GVe{constructor(e){this.parser=e,this.name=MVe.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const a=i.extensions[t],s=r.images[a.source];let o=n.textureLoader;if(s.uri){const e=n.options.manager.getHandler(s.uri);null!==e&&(o=e)}return this.detectSupport().then(function(i){if(i)return n.loadTextureImage(e,a.source,o);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class WVe{constructor(e){this.name=MVe.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],r=this.parser.getDependency("buffer",e.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(t){const n=e.byteOffset||0,r=e.byteLength||0,a=e.count,s=e.byteStride,o=new Uint8Array(t,n,r);return i.decodeGltfBufferAsync?i.decodeGltfBufferAsync(a,s,o,e.mode,e.filter).then(function(e){return e.buffer}):i.ready.then(function(){const t=new ArrayBuffer(a*s);return i.decodeGltfBuffer(new Uint8Array(t),a,s,o,e.mode,e.filter),t})})}return null}}class KVe{constructor(e){this.name=MVe.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const r=t.meshes[n.mesh];for(const o of r.primitives)if(o.mode!==rGe.TRIANGLES&&o.mode!==rGe.TRIANGLE_STRIP&&o.mode!==rGe.TRIANGLE_FAN&&void 0!==o.mode)return null;const i=n.extensions[this.name].attributes,a=[],s={};for(const o in i)a.push(this.parser.getDependency("accessor",i[o]).then(e=>(s[o]=e,s[o])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(e=>{const t=e.pop(),n=t.isGroup?t.children:[t],r=e[0].count,i=[];for(const a of n){const e=new wCe,t=new WSe,n=new GSe,o=new WSe(1,1,1),l=new $Te(a.geometry,a.material,r);for(let i=0;i<r;i++)s.TRANSLATION&&t.fromBufferAttribute(s.TRANSLATION,i),s.ROTATION&&n.fromBufferAttribute(s.ROTATION,i),s.SCALE&&o.fromBufferAttribute(s.SCALE,i),l.setMatrixAt(i,e.compose(t,n,o));for(const r in s)if("_COLOR_0"===r){const e=s[r];l.instanceColor=new zTe(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==r&&"ROTATION"!==r&&"SCALE"!==r&&a.geometry.setAttribute(r,s[r]);KCe.prototype.copy.call(l,a),this.parser.assignFinalMaterial(l),i.push(l)}return t.isGroup?(t.clear(),t.add(...i),t):i[0]}))}}const qVe="glTF",XVe=1313821514,$Ve=5130562;class YVe{constructor(e){this.name=MVe.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:NVe(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==qVe)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,r=new DataView(e,12);let i=0;for(;i<n;){const t=r.getUint32(i,!0);i+=4;const n=r.getUint32(i,!0);if(i+=4,n===XVe){const n=new Uint8Array(e,12+i,t);this.content=NVe(n)}else if(n===$Ve){const n=12+i;this.body=e.slice(n,n+t)}i+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class JVe{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=MVe.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,s={},o={},l={};for(const c in a){const e=lGe[c]||c.toLowerCase();s[e]=a[c]}for(const c in e.attributes){const t=lGe[c]||c.toLowerCase();if(void 0!==a[c]){const r=n.accessors[e.attributes[c]],i=iGe[r.componentType];l[t]=i.name,o[t]=!0===r.normalized}}return t.getDependency("bufferView",i).then(function(e){return new Promise(function(t,n){r.decodeDracoFile(e,function(e){for(const t in e.attributes){const n=e.attributes[t],r=o[t];void 0!==r&&(n.normalized=r)}t(e)},s,l,SVe,n)})})}}class ZVe{constructor(){this.name=MVe.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class QVe{constructor(){this.name=MVe.KHR_MESH_QUANTIZATION}}class eGe extends vRe{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let a=0;a!==r;a++)t[a]=n[i+a];return t}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=2*s,l=3*s,c=r-t,d=(n-t)/c,u=d*d,h=u*d,p=e*l,m=p-l,f=-2*h+3*u,g=h-u,v=1-f,x=g-u+d;for(let y=0;y!==s;y++){const e=a[m+y+s],t=a[m+y+o]*c,n=a[p+y+s],r=a[p+y]*c;i[y]=v*e+x*t+f*n+g*r}return i}}const tGe=new GSe;class nGe extends eGe{interpolate_(e,t,n,r){const i=super.interpolate_(e,t,n,r);return tGe.fromArray(i).normalize().toArray(i),i}}const rGe={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},iGe={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},aGe={9728:bNe,9729:NNe,9984:wNe,9985:_Ne,9986:jNe,9987:SNe},sGe={33071:xNe,33648:yNe,10497:vNe},oGe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},lGe={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...LHe>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},cGe={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},dGe={CUBICSPLINE:void 0,LINEAR:N_e,STEP:j_e},uGe="OPAQUE",hGe="MASK",pGe="BLEND";function mGe(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new rRe({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),e.DefaultMaterial}function fGe(e,t,n){for(const r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function gGe(e,t){void 0!==t.extras&&"object"==typeof t.extras&&Object.assign(e.userData,t.extras)}function vGe(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,r=n.length;t<r;t++)e.morphTargetDictionary[n[t]]=t}}}function xGe(e){let t;const n=e.extensions&&e.extensions[MVe.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+yGe(n.attributes):e.indices+":"+yGe(e.attributes)+":"+e.mode,void 0!==e.targets)for(let r=0,i=e.targets.length;r<i;r++)t+=":"+yGe(e.targets[r]);return t}function yGe(e){let t="";const n=Object.keys(e).sort();for(let r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function bGe(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const wGe=new wCe;class jGe{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new AVe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,i=-1;"undefined"!=typeof navigator&&void 0!==navigator.userAgent&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,i=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"==typeof createImageBitmap||n||r&&i<98?this.textureLoader=new zRe(this.options.manager):this.textureLoader=new mIe(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new LRe(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(e){return e._markDefs&&e._markDefs()}),Promise.all(this._invokeAll(function(e){return e.beforeRoot&&e.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(t){const a={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};return fGe(i,a,r),gGe(a,r),Promise.all(n._invokeAll(function(e){return e.afterRoot&&e.afterRoot(a)})).then(function(){for(const e of a.scenes)e.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,i=t.length;r<i;r++){const n=t[r].joints;for(let t=0,r=n.length;t<r;t++)e[n[t]].isBone=!0}for(let r=0,i=e.length;r<i;r++){const t=e[r];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(n[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),i=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[r,a]of e.children.entries())i(a,t.children[r])};return i(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const i=e(t[r]);i&&n.push(i)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(e){return e.loadNode&&e.loadNode(t)});break;case"mesh":r=this._invokeOne(function(e){return e.loadMesh&&e.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(e){return e.loadBufferView&&e.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(e){return e.loadMaterial&&e.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(e){return e.loadTexture&&e.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(e){return e.loadAnimation&&e.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map(function(t,r){return n.getDependency(e,r)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[MVe.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(e,i){n.load(lIe.resolveURL(t.uri,r.path),e,void 0,function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){const n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){const e=oGe[r.type],t=iGe[r.componentType],n=!0===r.normalized,i=new t(r.count*e);return Promise.resolve(new wAe(i,e,n))}const i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then(function(e){const i=e[0],a=oGe[r.type],s=iGe[r.componentType],o=s.BYTES_PER_ELEMENT,l=o*a,c=r.byteOffset||0,d=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,u=!0===r.normalized;let h,p;if(d&&d!==l){const e=Math.floor(c/d),n="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+e+":"+r.count;let l=t.cache.get(n);l||(h=new s(i,e*d,r.count*d/o),l=new iTe(h,d/o),t.cache.add(n,l)),p=new sTe(l,a,c%d/o,u)}else h=null===i?new s(r.count*a):new s(i,c,r.count*a),p=new wAe(h,a,u);if(void 0!==r.sparse){const t=oGe.SCALAR,n=iGe[r.sparse.indices.componentType],o=r.sparse.indices.byteOffset||0,l=r.sparse.values.byteOffset||0,c=new n(e[1],o,r.sparse.count*t),d=new s(e[2],l,r.sparse.count*a);null!==i&&(p=new wAe(p.array.slice(),p.itemSize,p.normalized));for(let e=0,r=c.length;e<r;e++){const t=c[e];if(p.setX(t,d[e*a]),a>=2&&p.setY(t,d[e*a+1]),a>=3&&p.setZ(t,d[e*a+2]),a>=4&&p.setW(t,d[e*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p})}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e].source,i=t.images[r];let a=this.textureLoader;if(i.uri){const e=n.manager.getHandler(i.uri);null!==e&&(a=e)}return this.loadTextureImage(e,r,a)}loadTextureImage(e,t,n){const r=this,i=this.json,a=i.textures[e],s=i.images[t],o=(s.uri||s.bufferView)+":"+a.sampler;if(this.textureCache[o])return this.textureCache[o];const l=this.loadImageSource(t,n).then(function(t){t.flipY=!1,t.name=a.name||s.name||"",""===t.name&&"string"==typeof s.uri&&!1===s.uri.startsWith("data:image/")&&(t.name=s.uri);const n=(i.samplers||{})[a.sampler]||{};return t.magFilter=aGe[n.magFilter]||NNe,t.minFilter=aGe[n.minFilter]||SNe,t.wrapS=sGe[n.wrapS]||vNe,t.wrapT=sGe[n.wrapT]||vNe,r.associations.set(t,{textures:e}),t}).catch(function(){return null});return this.textureCache[o]=l,l}loadImageSource(e,t){const n=this,r=this.json,i=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(e=>e.clone());const a=r.images[e],s=self.URL||self.webkitURL;let o=a.uri||"",l=!1;if(void 0!==a.bufferView)o=n.getDependency("bufferView",a.bufferView).then(function(e){l=!0;const t=new Blob([e],{type:a.mimeType});return o=s.createObjectURL(t),o});else if(void 0===a.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(o).then(function(e){return new Promise(function(n,r){let a=n;!0===t.isImageBitmapLoader&&(a=function(e){const t=new BSe(e);t.needsUpdate=!0,n(t)}),t.load(lIe.resolveURL(e,i.path),a,void 0,r)})}).then(function(e){var t;return!0===l&&s.revokeObjectURL(o),gGe(e,a),e.userData.mimeType=a.mimeType||((t=a.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e}).catch(function(e){throw e});return this.sourceCache[e]=c,c}assignTexture(e,t,n,r){const i=this;return this.getDependency("texture",n.index).then(function(a){if(!a)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((a=a.clone()).channel=n.texCoord),i.extensions[MVe.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[MVe.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=i.associations.get(a);a=i.extensions[MVe.KHR_TEXTURE_TRANSFORM].extendTexture(a,e),i.associations.set(a,t)}}return void 0!==r&&("number"==typeof r&&(r=3001===r?_Ve:SVe),"colorSpace"in a?a.colorSpace=r:a.encoding=r===_Ve?3001:3e3),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=void 0===t.attributes.tangent,i=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new _Pe,hAe.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new pPe,hAe.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,this.cache.add(e,t)),n=t}if(r||i||a){let e="ClonedMaterial:"+n.uuid+":";r&&(e+="derivative-tangents:"),i&&(e+="vertex-colors:"),a&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),i&&(t.vertexColors=!0),a&&(t.flatShading=!0),r&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}e.material=n}getMaterialType(){return rRe}loadMaterial(e){const t=this,n=this.json,r=this.extensions,i=n.materials[e];let a;const s={},o=[];if((i.extensions||{})[MVe.KHR_MATERIALS_UNLIT]){const e=r[MVe.KHR_MATERIALS_UNLIT];a=e.getMaterialType(),o.push(e.extendParams(s,i,t))}else{const n=i.pbrMetallicRoughness||{};if(s.color=new cAe(1,1,1),s.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;s.color.setRGB(e[0],e[1],e[2],SVe),s.opacity=e[3]}void 0!==n.baseColorTexture&&o.push(t.assignTexture(s,"map",n.baseColorTexture,_Ve)),s.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,s.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(o.push(t.assignTexture(s,"metalnessMap",n.metallicRoughnessTexture)),o.push(t.assignTexture(s,"roughnessMap",n.metallicRoughnessTexture))),a=this._invokeOne(function(t){return t.getMaterialType&&t.getMaterialType(e)}),o.push(Promise.all(this._invokeAll(function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,s)})))}!0===i.doubleSided&&(s.side=2);const l=i.alphaMode||uGe;if(l===pGe?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,l===hGe&&(s.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&a!==pAe&&(o.push(t.assignTexture(s,"normalMap",i.normalTexture)),s.normalScale=new fSe(1,1),void 0!==i.normalTexture.scale)){const e=i.normalTexture.scale;s.normalScale.set(e,e)}if(void 0!==i.occlusionTexture&&a!==pAe&&(o.push(t.assignTexture(s,"aoMap",i.occlusionTexture)),void 0!==i.occlusionTexture.strength&&(s.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&a!==pAe){const e=i.emissiveFactor;s.emissive=(new cAe).setRGB(e[0],e[1],e[2],SVe)}return void 0!==i.emissiveTexture&&a!==pAe&&o.push(t.assignTexture(s,"emissiveMap",i.emissiveTexture,_Ve)),Promise.all(o).then(function(){const n=new a(s);return i.name&&(n.name=i.name),gGe(n,i),t.associations.set(n,{materials:e}),i.extensions&&fGe(r,n,i),n})}createUniqueName(e){const t=BIe.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function i(e){return n[MVe.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(n){return NGe(n,e,t)})}const a=[];for(let s=0,o=e.length;s<o;s++){const n=e[s],o=xGe(n),l=r[o];if(l)a.push(l.promise);else{let e;e=n.extensions&&n.extensions[MVe.KHR_DRACO_MESH_COMPRESSION]?i(n):NGe(new PAe,n,t),r[o]={primitive:n,promise:e},a.push(e)}}return Promise.all(a)}loadMesh(e){const t=this,n=this.json,r=this.extensions,i=n.meshes[e],a=i.primitives,s=[];for(let o=0,l=a.length;o<l;o++){const e=void 0===a[o].material?mGe(this.cache):this.getDependency("material",a[o].material);s.push(e)}return s.push(t.loadGeometries(a)),Promise.all(s).then(function(n){const s=n.slice(0,n.length-1),o=n[n.length-1],l=[];for(let d=0,u=o.length;d<u;d++){const n=o[d],c=a[d];let u;const h=s[d];if(c.mode===rGe.TRIANGLES||c.mode===rGe.TRIANGLE_STRIP||c.mode===rGe.TRIANGLE_FAN||void 0===c.mode)u=!0===i.isSkinnedMesh?new ITe(n,h):new YAe(n,h),!0===u.isSkinnedMesh&&u.normalizeSkinWeights(),c.mode===rGe.TRIANGLE_STRIP?u.geometry=BHe(u.geometry,1):c.mode===rGe.TRIANGLE_FAN&&(u.geometry=BHe(u.geometry,2));else if(c.mode===rGe.LINES)u=new jPe(n,h);else if(c.mode===rGe.LINE_STRIP)u=new yPe(n,h);else if(c.mode===rGe.LINE_LOOP)u=new NPe(n,h);else{if(c.mode!==rGe.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+c.mode);u=new EPe(n,h)}Object.keys(u.geometry.morphAttributes).length>0&&vGe(u,i),u.name=t.createUniqueName(i.name||"mesh_"+e),gGe(u,i),c.extensions&&fGe(r,u,c),t.assignFinalMaterial(u),l.push(u)}for(let r=0,i=l.length;r<i;r++)t.associations.set(l[r],{meshes:e,primitives:r});if(1===l.length)return i.extensions&&fGe(r,l[0],i),l[0];const c=new qke;i.extensions&&fGe(r,c,i),t.associations.set(c,{meshes:e});for(let e=0,t=l.length;e<t;e++)c.add(l[e]);return c})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new aMe(mSe.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new kMe(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),gGe(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let r=0,i=t.joints.length;r<i;r++)n.push(this._loadNodeShallow(t.joints[r]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(e){const t=e.pop(),n=e,r=[],i=[];for(let a=0,s=n.length;a<s;a++){const e=n[a];if(e){r.push(e);const n=new wCe;null!==t&&n.fromArray(t.array,16*a),i.push(n)}}return new UTe(r,i)})}loadAnimation(e){const t=this.json,n=this,r=t.animations[e],i=r.name?r.name:"animation_"+e,a=[],s=[],o=[],l=[],c=[];for(let d=0,u=r.channels.length;d<u;d++){const e=r.channels[d],t=r.samplers[e.sampler],n=e.target,i=n.node,u=void 0!==r.parameters?r.parameters[t.input]:t.input,h=void 0!==r.parameters?r.parameters[t.output]:t.output;void 0!==n.node&&(a.push(this.getDependency("node",i)),s.push(this.getDependency("accessor",u)),o.push(this.getDependency("accessor",h)),l.push(t),c.push(n))}return Promise.all([Promise.all(a),Promise.all(s),Promise.all(o),Promise.all(l),Promise.all(c)]).then(function(e){const t=e[0],r=e[1],a=e[2],s=e[3],o=e[4],l=[];for(let i=0,c=t.length;i<c;i++){const e=t[i],c=r[i],d=a[i],u=s[i],h=o[i];if(void 0===e)continue;e.updateMatrix&&e.updateMatrix();const p=n._createAnimationTracks(e,c,d,u,h);if(p)for(let t=0;t<p.length;t++)l.push(p[t])}return new ERe(i,void 0,l)})}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then(function(e){const t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse(function(e){if(e.isMesh)for(let t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]}),t})}loadNode(e){const t=this,n=this.json.nodes[e],r=t._loadNodeShallow(e),i=[],a=n.children||[];for(let o=0,l=a.length;o<l;o++)i.push(t.getDependency("node",a[o]));const s=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([r,Promise.all(i),s]).then(function(e){const t=e[0],n=e[1],r=e[2];null!==r&&t.traverse(function(e){e.isSkinnedMesh&&e.bind(r,wGe)});for(let i=0,a=n.length;i<a;i++)t.add(n[i]);return t})}_loadNodeShallow(e){const t=this.json,n=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const i=t.nodes[e],a=i.name?r.createUniqueName(i.name):"",s=[],o=r._invokeOne(function(t){return t.createNodeMesh&&t.createNodeMesh(e)});return o&&s.push(o),void 0!==i.camera&&s.push(r.getDependency("camera",i.camera).then(function(e){return r._getNodeRef(r.cameraCache,i.camera,e)})),r._invokeAll(function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)}).forEach(function(e){s.push(e)}),this.nodeCache[e]=Promise.all(s).then(function(t){let s;if(s=!0===i.isBone?new DTe:t.length>1?new qke:1===t.length?t[0]:new KCe,s!==t[0])for(let e=0,n=t.length;e<n;e++)s.add(t[e]);if(i.name&&(s.userData.name=i.name,s.name=a),gGe(s,i),i.extensions&&fGe(n,s,i),void 0!==i.matrix){const e=new wCe;e.fromArray(i.matrix),s.applyMatrix4(e)}else void 0!==i.translation&&s.position.fromArray(i.translation),void 0!==i.rotation&&s.quaternion.fromArray(i.rotation),void 0!==i.scale&&s.scale.fromArray(i.scale);return r.associations.has(s)||r.associations.set(s,{}),r.associations.get(s).nodes=e,s}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,i=new qke;n.name&&(i.name=r.createUniqueName(n.name)),gGe(i,n),n.extensions&&fGe(t,i,n);const a=n.nodes||[],s=[];for(let o=0,l=a.length;o<l;o++)s.push(r.getDependency("node",a[o]));return Promise.all(s).then(function(e){for(let t=0,n=e.length;t<n;t++)i.add(e[t]);return r.associations=(e=>{const t=new Map;for(const[n,i]of r.associations)(n instanceof hAe||n instanceof BSe)&&t.set(n,i);return e.traverse(e=>{const n=r.associations.get(e);null!=n&&t.set(e,n)}),t})(i),i})}_createAnimationTracks(e,t,n,r,i){const a=[],s=e.name?e.name:e.uuid,o=[];let l;switch(cGe[i.path]===cGe.weights?e.traverse(function(e){e.morphTargetInfluences&&o.push(e.name?e.name:e.uuid)}):o.push(s),cGe[i.path]){case cGe.weights:l=_Re;break;case cGe.rotation:l=CRe;break;case cGe.position:case cGe.scale:l=MRe;break;default:if(1===n.itemSize)l=_Re;else l=MRe}const c=void 0!==r.interpolation?dGe[r.interpolation]:N_e,d=this._getArrayFromAccessor(n);for(let u=0,h=o.length;u<h;u++){const e=new l(o[u]+"."+cGe[i.path],t.array,d,c);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(e),a.push(e)}return a}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const e=bGe(t.constructor),n=new Float32Array(t.length);for(let r=0,i=t.length;r<i;r++)n[r]=t[r]*e;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof CRe?nGe:eGe)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function NGe(e,t,n){const r=t.attributes,i=[];function a(t,r){return n.getDependency("accessor",t).then(function(t){e.setAttribute(r,t)})}for(const s in r){const t=lGe[s]||s.toLowerCase();t in e.attributes||i.push(a(r[s],t))}if(void 0!==t.indices&&!e.index){const r=n.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});i.push(r)}return gGe(e,t),function(e,t,n){const r=t.attributes,i=new XSe;if(void 0===r.POSITION)return;{const e=n.json.accessors[r.POSITION],t=e.min,a=e.max;if(void 0===t||void 0===a)return;if(i.set(new WSe(t[0],t[1],t[2]),new WSe(a[0],a[1],a[2])),e.normalized){const t=bGe(iGe[e.componentType]);i.min.multiplyScalar(t),i.max.multiplyScalar(t)}}const a=t.targets;if(void 0!==a){const e=new WSe,t=new WSe;for(let r=0,i=a.length;r<i;r++){const i=a[r];if(void 0!==i.POSITION){const r=n.json.accessors[i.POSITION],a=r.min,s=r.max;if(void 0!==a&&void 0!==s){if(t.setX(Math.max(Math.abs(a[0]),Math.abs(s[0]))),t.setY(Math.max(Math.abs(a[1]),Math.abs(s[1]))),t.setZ(Math.max(Math.abs(a[2]),Math.abs(s[2]))),r.normalized){const e=bGe(iGe[r.componentType]);t.multiplyScalar(e)}e.max(t)}}}i.expandByVector(e)}e.boundingBox=i;const s=new hCe;i.getCenter(s.center),s.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=s}(e,t,n),Promise.all(i).then(function(){return void 0!==t.targets?function(e,t,n){let r=!1,i=!1,a=!1;for(let c=0,d=t.length;c<d;c++){const e=t[c];if(void 0!==e.POSITION&&(r=!0),void 0!==e.NORMAL&&(i=!0),void 0!==e.COLOR_0&&(a=!0),r&&i&&a)break}if(!r&&!i&&!a)return Promise.resolve(e);const s=[],o=[],l=[];for(let c=0,d=t.length;c<d;c++){const d=t[c];if(r){const t=void 0!==d.POSITION?n.getDependency("accessor",d.POSITION):e.attributes.position;s.push(t)}if(i){const t=void 0!==d.NORMAL?n.getDependency("accessor",d.NORMAL):e.attributes.normal;o.push(t)}if(a){const t=void 0!==d.COLOR_0?n.getDependency("accessor",d.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(l)]).then(function(t){const n=t[0],s=t[1],o=t[2];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=s),a&&(e.morphAttributes.color=o),e.morphTargetsRelative=!0,e})}(e,t.targets,n):e})}const _Ge={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:"\n      varying vec2 vUv;\n\n      void main() {\n\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n      }\n  ",fragmentShader:"\n    uniform sampler2D tDiffuse;\n    uniform float h;\n\n    varying vec2 vUv;\n\n    void main() {\n\n    \tvec4 sum = vec4( 0.0 );\n\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\n\n    \tgl_FragColor = sum;\n\n    }\n  "},SGe={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:"\n    varying vec2 vUv;\n\n    void main() {\n\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n  ",fragmentShader:"\n\n  uniform sampler2D tDiffuse;\n  uniform float v;\n\n  varying vec2 vUv;\n\n  void main() {\n\n    vec4 sum = vec4( 0.0 );\n\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\n\n    gl_FragColor = sum;\n\n  }\n  "};class CGe extends URe{constructor(e){super(e),this.type=RNe}parse(e){const t=function(e,t){switch(e){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(t||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(t||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(t||""));default:throw new Error("THREE.RGBELoader: Memory Error: "+(t||""))}},n=function(e,t,n){t=t||1024;let r=e.pos,i=-1,a=0,s="",o=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));for(;0>(i=o.indexOf("\n"))&&a<t&&r<e.byteLength;)s+=o,a+=o.length,r+=128,o+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return-1<i&&(e.pos+=a+i+1,s+o.slice(0,i))},r=function(e,t,n,r){const i=e[t+3],a=Math.pow(2,i-128)/255;n[r+0]=e[t+0]*a,n[r+1]=e[t+1]*a,n[r+2]=e[t+2]*a,n[r+3]=1},i=function(e,t,n,r){const i=e[t+3],a=Math.pow(2,i-128)/255;n[r+0]=xAe.toHalfFloat(Math.min(e[t+0]*a,65504)),n[r+1]=xAe.toHalfFloat(Math.min(e[t+1]*a,65504)),n[r+2]=xAe.toHalfFloat(Math.min(e[t+2]*a,65504)),n[r+3]=xAe.toHalfFloat(1)},a=new Uint8Array(e);a.pos=0;const s=function(e){const r=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,i=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,a=/^\s*FORMAT=(\S+)\s*$/,s=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,o={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let l,c;for((e.pos>=e.byteLength||!(l=n(e)))&&t(1,"no header found"),(c=l.match(/^#\?(\S+)/))||t(3,"bad initial token"),o.valid|=1,o.programtype=c[1],o.string+=l+"\n";l=n(e),!1!==l;)if(o.string+=l+"\n","#"!==l.charAt(0)){if((c=l.match(r))&&(o.gamma=parseFloat(c[1])),(c=l.match(i))&&(o.exposure=parseFloat(c[1])),(c=l.match(a))&&(o.valid|=2,o.format=c[1]),(c=l.match(s))&&(o.valid|=4,o.height=parseInt(c[1],10),o.width=parseInt(c[2],10)),2&o.valid&&4&o.valid)break}else o.comments+=l+"\n";return 2&o.valid||t(3,"missing format specifier"),4&o.valid||t(3,"missing image size specifier"),o}(a),o=s.width,l=s.height,c=function(e,n,r){const i=n;if(i<8||i>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);i!==(e[2]<<8|e[3])&&t(3,"wrong scanline width");const a=new Uint8Array(4*n*r);a.length||t(4,"unable to allocate buffer space");let s=0,o=0;const l=4*i,c=new Uint8Array(4),d=new Uint8Array(l);let u=r;for(;u>0&&o<e.byteLength;){o+4>e.byteLength&&t(1),c[0]=e[o++],c[1]=e[o++],c[2]=e[o++],c[3]=e[o++],2==c[0]&&2==c[1]&&(c[2]<<8|c[3])==i||t(3,"bad rgbe scanline format");let n,r=0;for(;r<l&&o<e.byteLength;){n=e[o++];const i=n>128;if(i&&(n-=128),(0===n||r+n>l)&&t(3,"bad scanline data"),i){const t=e[o++];for(let e=0;e<n;e++)d[r++]=t}else d.set(e.subarray(o,o+n),r),r+=n,o+=n}const h=i;for(let e=0;e<h;e++){let t=0;a[s]=d[e+t],t+=i,a[s+1]=d[e+t],t+=i,a[s+2]=d[e+t],t+=i,a[s+3]=d[e+t],s+=4}u--}return a}(a.subarray(a.pos),o,l);let d,u,h;switch(this.type){case ONe:h=c.length/4;const e=new Float32Array(4*h);for(let n=0;n<h;n++)r(c,4*n,e,4*n);d=e,u=ONe;break;case RNe:h=c.length/4;const t=new Uint16Array(4*h);for(let n=0;n<h;n++)i(c,4*n,t,4*n);d=t,u=RNe;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:o,height:l,data:d,header:s.string,gamma:s.gamma,exposure:s.exposure,type:u}}setDataType(e){return this.type=e,this}load(e,t,n,r){return super.load(e,function(e,n){switch(e.type){case ONe:case RNe:"colorSpace"in e?e.colorSpace="srgb-linear":e.encoding=3e3,e.minFilter=NNe,e.magFilter=NNe,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)},n,r)}}const AGe=LHe>=152;class MGe extends URe{constructor(e){super(e),this.type=RNe}parse(e){const t=65536,n=14,r=65537,i=16384,a=Math.pow(2.7182818,2.2);const s={l:0,c:0,lc:0};function o(e,t,n,r,i){for(;n<e;)t=t<<8|z(r,i),n+=8;n-=e,s.l=t>>n&(1<<e)-1,s.c=t,s.lc=n}const l=new Array(59);function c(e,t,n,i,a,c,d){for(var u=n,h=0,p=0;a<=c;a++){if(u.value-n.value>i)return!1;o(6,h,p,e,u);var m=s.l;if(h=s.c,p=s.lc,d[a]=m,63==m){if(u.value-n.value>i)throw"Something wrong with hufUnpackEncTable";o(8,h,p,e,u);var f=s.l+6;if(h=s.c,p=s.lc,a+f>c+1)throw"Something wrong with hufUnpackEncTable";for(;f--;)d[a++]=0;a--}else if(m>=59){if(a+(f=m-59+2)>c+1)throw"Something wrong with hufUnpackEncTable";for(;f--;)d[a++]=0;a--}}!function(e){for(var t=0;t<=58;++t)l[t]=0;for(t=0;t<r;++t)l[e[t]]+=1;var n=0;for(t=58;t>0;--t){var i=n+l[t]>>1;l[t]=n,n=i}for(t=0;t<r;++t){var a=e[t];a>0&&(e[t]=a|l[a]++<<6)}}(d)}function d(e){return 63&e}function u(e){return e>>6}const h={c:0,lc:0};function p(e,t,n,r){e=e<<8|z(n,r),t+=8,h.c=e,h.lc=t}const m={c:0,lc:0};function f(e,t,n,r,i,a,s,o,l,c){if(e==t){r<8&&(p(n,r,i,s),n=h.c,r=h.lc);var d=n>>(r-=8);d=new Uint8Array([d])[0];if(l.value+d>c)return!1;for(var u=o[l.value-1];d-- >0;)o[l.value++]=u}else{if(!(l.value<c))return!1;o[l.value++]=e}m.c=n,m.lc=r}function g(e){return 65535&e}function v(e){var t=g(e);return t>32767?t-65536:t}const x={a:0,b:0};function y(e,t){var n=v(e),r=v(t),i=n+(1&r)+(r>>1),a=i,s=i-r;x.a=a,x.b=s}function b(e,t){var n=g(e),r=g(t),i=n-(r>>1)&65535,a=r+i-32768&65535;x.a=a,x.b=i}function w(e,t,n,r,i,a,s){for(var o,l=s<16384,c=n>i?i:n,d=1;d<=c;)d<<=1;for(o=d>>=1,d>>=1;d>=1;){for(var u,h,p,m,f=0,g=f+a*(i-o),v=a*d,w=a*o,j=r*d,N=r*o;f<=g;f+=w){for(var _=f,S=f+r*(n-o);_<=S;_+=N){var C=_+j,A=(M=_+v)+j;l?(y(e[_+t],e[M+t]),u=x.a,p=x.b,y(e[C+t],e[A+t]),h=x.a,m=x.b,y(u,h),e[_+t]=x.a,e[C+t]=x.b,y(p,m),e[M+t]=x.a,e[A+t]=x.b):(b(e[_+t],e[M+t]),u=x.a,p=x.b,b(e[C+t],e[A+t]),h=x.a,m=x.b,b(u,h),e[_+t]=x.a,e[C+t]=x.b,b(p,m),e[M+t]=x.a,e[A+t]=x.b)}if(n&d){var M=_+v;l?y(e[_+t],e[M+t]):b(e[_+t],e[M+t]),u=x.a,e[M+t]=x.b,e[_+t]=u}}if(i&d)for(_=f,S=f+r*(n-o);_<=S;_+=N){C=_+j;l?y(e[_+t],e[C+t]):b(e[_+t],e[C+t]),u=x.a,e[C+t]=x.b,e[_+t]=u}o=d,d>>=1}return f}function j(e,t,a,s,o,l){var g=a.value,v=U(t,a),x=U(t,a);a.value+=4;var y=U(t,a);if(a.value+=4,v<0||v>=r||x<0||x>=r)throw"Something wrong with HUF_ENCSIZE";var b=new Array(r),w=new Array(i);if(function(e){for(var t=0;t<i;t++)e[t]={},e[t].len=0,e[t].lit=0,e[t].p=null}(w),c(e,0,a,s-(a.value-g),v,x,b),y>8*(s-(a.value-g)))throw"Something wrong with hufUncompress";!function(e,t,r,i){for(;t<=r;t++){var a=u(e[t]),s=d(e[t]);if(a>>s)throw"Invalid table entry";if(s>n){if((h=i[a>>s-n]).len)throw"Invalid table entry";if(h.lit++,h.p){var o=h.p;h.p=new Array(h.lit);for(var l=0;l<h.lit-1;++l)h.p[l]=o[l]}else h.p=new Array(1);h.p[h.lit-1]=t}else if(s){var c=0;for(l=1<<n-s;l>0;l--){var h;if((h=i[(a<<n-s)+c]).len||h.p)throw"Invalid table entry";h.len=s,h.lit=t,c++}}}}(b,v,x,w),function(e,t,r,i,a,s,o,l,c,g){for(var v=0,x=0,y=l,b=Math.trunc(a.value+(s+7)/8);a.value<b;)for(p(v,x,r,a),v=h.c,x=h.lc;x>=n;)if((_=t[v>>x-n&16383]).len)x-=_.len,f(_.lit,o,v,x,r,0,a,c,g,y),v=m.c,x=m.lc;else{if(!_.p)throw"hufDecode issues";var w;for(w=0;w<_.lit;w++){for(var j=d(e[_.p[w]]);x<j&&a.value<b;)p(v,x,r,a),v=h.c,x=h.lc;if(x>=j&&u(e[_.p[w]])==(v>>x-j&(1<<j)-1)){x-=j,f(_.p[w],o,v,x,r,0,a,c,g,y),v=m.c,x=m.lc;break}}if(w==_.lit)throw"hufDecode issues"}var N=8-s&7;for(v>>=N,x-=N;x>0;){var _;if(!(_=t[v<<n-x&16383]).len)throw"hufDecode issues";x-=_.len,f(_.lit,o,v,x,r,0,a,c,g,y),v=m.c,x=m.lc}}(b,w,e,0,a,y,x,l,o,{value:0})}function N(e){for(var t=1;t<e.length;t++){var n=e[t-1]+e[t]-128;e[t]=n}}function _(e,t){for(var n=0,r=Math.floor((e.length+1)/2),i=0,a=e.length-1;!(i>a||(t[i++]=e[n++],i>a));)t[i++]=e[r++]}function S(e){for(var t=e.byteLength,n=new Array,r=0,i=new DataView(e);t>0;){var a=i.getInt8(r++);if(a<0){t-=(o=-a)+1;for(var s=0;s<o;s++)n.push(i.getUint8(r++))}else{var o=a;t-=2;var l=i.getUint8(r++);for(s=0;s<o+1;s++)n.push(l)}}return n}function C(e,t,n){for(var r,i=1;i<64;)65280==(r=t[e.value])?i=64:r>>8==255?i+=255&r:(n[i]=r,i++),e.value++}function A(e,t){t[0]=K(e[0]),t[1]=K(e[1]),t[2]=K(e[5]),t[3]=K(e[6]),t[4]=K(e[14]),t[5]=K(e[15]),t[6]=K(e[27]),t[7]=K(e[28]),t[8]=K(e[2]),t[9]=K(e[4]),t[10]=K(e[7]),t[11]=K(e[13]),t[12]=K(e[16]),t[13]=K(e[26]),t[14]=K(e[29]),t[15]=K(e[42]),t[16]=K(e[3]),t[17]=K(e[8]),t[18]=K(e[12]),t[19]=K(e[17]),t[20]=K(e[25]),t[21]=K(e[30]),t[22]=K(e[41]),t[23]=K(e[43]),t[24]=K(e[9]),t[25]=K(e[11]),t[26]=K(e[18]),t[27]=K(e[24]),t[28]=K(e[31]),t[29]=K(e[40]),t[30]=K(e[44]),t[31]=K(e[53]),t[32]=K(e[10]),t[33]=K(e[19]),t[34]=K(e[23]),t[35]=K(e[32]),t[36]=K(e[39]),t[37]=K(e[45]),t[38]=K(e[52]),t[39]=K(e[54]),t[40]=K(e[20]),t[41]=K(e[22]),t[42]=K(e[33]),t[43]=K(e[38]),t[44]=K(e[46]),t[45]=K(e[51]),t[46]=K(e[55]),t[47]=K(e[60]),t[48]=K(e[21]),t[49]=K(e[34]),t[50]=K(e[37]),t[51]=K(e[47]),t[52]=K(e[50]),t[53]=K(e[56]),t[54]=K(e[59]),t[55]=K(e[61]),t[56]=K(e[35]),t[57]=K(e[36]),t[58]=K(e[48]),t[59]=K(e[49]),t[60]=K(e[57]),t[61]=K(e[58]),t[62]=K(e[62]),t[63]=K(e[63])}function M(e){const t=.5*Math.cos(.7853975),n=.5*Math.cos(3.14159/16),r=.5*Math.cos(3.14159/8),i=.5*Math.cos(3*3.14159/16),a=.5*Math.cos(.981746875),s=.5*Math.cos(3*3.14159/8),o=.5*Math.cos(1.374445625);for(var l=new Array(4),c=new Array(4),d=new Array(4),u=new Array(4),h=0;h<8;++h){var p=8*h;l[0]=r*e[p+2],l[1]=s*e[p+2],l[2]=r*e[p+6],l[3]=s*e[p+6],c[0]=n*e[p+1]+i*e[p+3]+a*e[p+5]+o*e[p+7],c[1]=i*e[p+1]-o*e[p+3]-n*e[p+5]-a*e[p+7],c[2]=a*e[p+1]-n*e[p+3]+o*e[p+5]+i*e[p+7],c[3]=o*e[p+1]-a*e[p+3]+i*e[p+5]-n*e[p+7],d[0]=t*(e[p+0]+e[p+4]),d[3]=t*(e[p+0]-e[p+4]),d[1]=l[0]+l[3],d[2]=l[1]-l[2],u[0]=d[0]+d[1],u[1]=d[3]+d[2],u[2]=d[3]-d[2],u[3]=d[0]-d[1],e[p+0]=u[0]+c[0],e[p+1]=u[1]+c[1],e[p+2]=u[2]+c[2],e[p+3]=u[3]+c[3],e[p+4]=u[3]-c[3],e[p+5]=u[2]-c[2],e[p+6]=u[1]-c[1],e[p+7]=u[0]-c[0]}for(var m=0;m<8;++m)l[0]=r*e[16+m],l[1]=s*e[16+m],l[2]=r*e[48+m],l[3]=s*e[48+m],c[0]=n*e[8+m]+i*e[24+m]+a*e[40+m]+o*e[56+m],c[1]=i*e[8+m]-o*e[24+m]-n*e[40+m]-a*e[56+m],c[2]=a*e[8+m]-n*e[24+m]+o*e[40+m]+i*e[56+m],c[3]=o*e[8+m]-a*e[24+m]+i*e[40+m]-n*e[56+m],d[0]=t*(e[m]+e[32+m]),d[3]=t*(e[m]-e[32+m]),d[1]=l[0]+l[3],d[2]=l[1]-l[2],u[0]=d[0]+d[1],u[1]=d[3]+d[2],u[2]=d[3]-d[2],u[3]=d[0]-d[1],e[0+m]=u[0]+c[0],e[8+m]=u[1]+c[1],e[16+m]=u[2]+c[2],e[24+m]=u[3]+c[3],e[32+m]=u[3]-c[3],e[40+m]=u[2]-c[2],e[48+m]=u[1]-c[1],e[56+m]=u[0]-c[0]}function E(e){for(var t=0;t<64;++t){var n=e[0][t],r=e[1][t],i=e[2][t];e[0][t]=n+1.5747*i,e[1][t]=n-.1873*r-.4682*i,e[2][t]=n+1.8556*r}}function k(e,t,n){for(var r=0;r<64;++r)t[n+r]=xAe.toHalfFloat(T(e[r]))}function T(e){return e<=1?Math.sign(e)*Math.pow(Math.abs(e),2.2):Math.sign(e)*Math.pow(a,Math.abs(e)-1)}function P(e){return new DataView(e.array.buffer,e.offset.value,e.size)}function O(e){var t=e.viewer.buffer.slice(e.offset.value,e.offset.value+e.size),n=new Uint8Array(S(t)),r=new Uint8Array(n.length);return N(n),_(n,r),new DataView(r.buffer)}function R(e){var t=dVe(e.array.slice(e.offset.value,e.offset.value+e.size)),n=new Uint8Array(t.length);return N(t),_(t,n),new DataView(n.buffer)}function I(e){for(var n=e.viewer,r={value:e.offset.value},i=new Uint16Array(e.width*e.scanlineBlockSize*(e.channels*e.type)),a=new Uint8Array(8192),s=0,o=new Array(e.channels),l=0;l<e.channels;l++)o[l]={},o[l].start=s,o[l].end=o[l].start,o[l].nx=e.width,o[l].ny=e.lines,o[l].size=e.type,s+=o[l].nx*o[l].ny*o[l].size;var c=q(n,r),d=q(n,r);if(d>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(c<=d)for(l=0;l<d-c+1;l++)a[l+c]=H(n,r);var u=new Uint16Array(t),h=function(e,n){for(var r=0,i=0;i<t;++i)(0==i||e[i>>3]&1<<(7&i))&&(n[r++]=i);for(var a=r-1;r<t;)n[r++]=0;return a}(a,u),p=U(n,r);j(e.array,n,r,p,i,s);for(l=0;l<e.channels;++l)for(var m=o[l],f=0;f<o[l].size;++f)w(i,m.start+f,m.nx,m.size,m.ny,m.nx*m.size,h);!function(e,t,n){for(var r=0;r<n;++r)t[r]=e[t[r]]}(u,i,s);for(var g=0,v=new Uint8Array(i.buffer.byteLength),x=0;x<e.lines;x++)for(var y=0;y<e.channels;y++){var b=(m=o[y]).nx*m.size,N=new Uint8Array(i.buffer,2*m.end,2*b);v.set(N,g),g+=2*b,m.end+=b}return new DataView(v.buffer)}function D(e){var t=dVe(e.array.slice(e.offset.value,e.offset.value+e.size));const n=e.lines*e.channels*e.width,r=1==e.type?new Uint16Array(n):new Uint32Array(n);let i=0,a=0;const s=new Array(4);for(let o=0;o<e.lines;o++)for(let n=0;n<e.channels;n++){let n=0;switch(e.type){case 1:s[0]=i,s[1]=s[0]+e.width,i=s[1]+e.width;for(let i=0;i<e.width;++i){n+=t[s[0]++]<<8|t[s[1]++],r[a]=n,a++}break;case 2:s[0]=i,s[1]=s[0]+e.width,s[2]=s[1]+e.width,i=s[2]+e.width;for(let i=0;i<e.width;++i){n+=t[s[0]++]<<24|t[s[1]++]<<16|t[s[2]++]<<8,r[a]=n,a++}}}return new DataView(r.buffer)}function L(e){var t=e.viewer,n={value:e.offset.value},r=new Uint8Array(e.width*e.lines*(e.channels*e.type*2)),i={version:V(t,n),unknownUncompressedSize:V(t,n),unknownCompressedSize:V(t,n),acCompressedSize:V(t,n),dcCompressedSize:V(t,n),rleCompressedSize:V(t,n),rleUncompressedSize:V(t,n),rleRawSize:V(t,n),totalAcUncompressedCount:V(t,n),totalDcUncompressedCount:V(t,n),acCompression:V(t,n)};if(i.version<2)throw"EXRLoader.parse: "+Q.compression+" version "+i.version+" is unsupported";for(var a=new Array,s=q(t,n)-2;s>0;){var o=B(t.buffer,n),l=H(t,n),c=l>>2&3,d=new Int8Array([(l>>4)-1])[0],u=H(t,n);a.push({name:o,index:d,type:u,compression:c}),s-=o.length+3}for(var h=Q.channels,p=new Array(e.channels),m=0;m<e.channels;++m){var f=p[m]={},g=h[m];f.name=g.name,f.compression=0,f.decoded=!1,f.type=g.pixelType,f.pLinear=g.pLinear,f.width=e.width,f.height=e.lines}for(var v={idx:new Array(3)},x=0;x<e.channels;++x)for(f=p[x],m=0;m<a.length;++m){var y=a[m];f.name==y.name&&(f.compression=y.compression,y.index>=0&&(v.idx[y.index]=x),f.offset=x)}if(i.acCompressedSize>0)switch(i.acCompression){case 0:var b=new Uint16Array(i.totalAcUncompressedCount);j(e.array,t,n,i.acCompressedSize,b,i.totalAcUncompressedCount);break;case 1:var w=dVe(e.array.slice(n.value,n.value+i.totalAcUncompressedCount));b=new Uint16Array(w.buffer);n.value+=i.totalAcUncompressedCount}if(i.dcCompressedSize>0){var N={array:e.array,offset:n,size:i.dcCompressedSize},_=new Uint16Array(R(N).buffer);n.value+=i.dcCompressedSize}if(i.rleRawSize>0){var T=S((w=dVe(e.array.slice(n.value,n.value+i.rleCompressedSize))).buffer);n.value+=i.rleCompressedSize}var P=0,O=new Array(p.length);for(m=0;m<O.length;++m)O[m]=new Array;for(var I=0;I<e.lines;++I)for(var D=0;D<p.length;++D)O[D].push(P),P+=p[D].width*e.type*2;!function(e,t,n,r,i,a){var s=new DataView(a.buffer),o=n[e.idx[0]].width,l=n[e.idx[0]].height,c=Math.floor(o/8),d=Math.ceil(o/8),u=Math.ceil(l/8),h=o-8*(d-1),p=l-8*(u-1),m={value:0},f=new Array(3),g=new Array(3),v=new Array(3),x=new Array(3),y=new Array(3);for(let C=0;C<3;++C)y[C]=t[e.idx[C]],f[C]=C<1?0:f[C-1]+d*u,g[C]=new Float32Array(64),v[C]=new Uint16Array(64),x[C]=new Uint16Array(64*d);for(let P=0;P<u;++P){var b=8;P==u-1&&(b=p);var w=8;for(let e=0;e<d;++e){e==d-1&&(w=h);for(let e=0;e<3;++e)v[e].fill(0),v[e][0]=i[f[e]++],C(m,r,v[e]),A(v[e],g[e]),M(g[e]);E(g);for(let t=0;t<3;++t)k(g[t],x[t],64*e)}let t=0;for(let r=0;r<3;++r){const i=n[e.idx[r]].type;for(let e=8*P;e<8*P+b;++e){t=y[r][e];for(let n=0;n<c;++n){const a=64*n+8*(7&e);s.setUint16(t+0*i,x[r][a+0],!0),s.setUint16(t+2*i,x[r][a+1],!0),s.setUint16(t+4*i,x[r][a+2],!0),s.setUint16(t+6*i,x[r][a+3],!0),s.setUint16(t+8*i,x[r][a+4],!0),s.setUint16(t+10*i,x[r][a+5],!0),s.setUint16(t+12*i,x[r][a+6],!0),s.setUint16(t+14*i,x[r][a+7],!0),t+=16*i}}if(c!=d)for(let e=8*P;e<8*P+b;++e){const t=y[r][e]+8*c*2*i,n=64*c+8*(7&e);for(let e=0;e<w;++e)s.setUint16(t+2*e*i,x[r][n+e],!0)}}}for(var j=new Uint16Array(o),N=(s=new DataView(a.buffer),0);N<3;++N){n[e.idx[N]].decoded=!0;var _=n[e.idx[N]].type;if(2==n[N].type)for(var S=0;S<l;++S){const e=y[N][S];for(var T=0;T<o;++T)j[T]=s.getUint16(e+2*T*_,!0);for(T=0;T<o;++T)s.setFloat32(e+2*T*_,K(j[T]),!0)}}}(v,O,p,b,_,r);for(m=0;m<p.length;++m){if(!(f=p[m]).decoded){if(2!==f.compression)throw"EXRLoader.parse: unsupported channel compression";var L=0,F=0;for(I=0;I<e.lines;++I){for(var U=O[m][L],z=0;z<f.width;++z){for(var G=0;G<2*f.type;++G)r[U++]=T[F+G*f.width*f.height];F++}L++}}}return new DataView(r.buffer)}function B(e,t){for(var n=new Uint8Array(e),r=0;0!=n[t.value+r];)r+=1;var i=(new TextDecoder).decode(n.slice(t.value,t.value+r));return t.value=t.value+r+1,i}function F(e,t){var n=e.getInt32(t.value,!0);return t.value=t.value+4,n}function U(e,t){var n=e.getUint32(t.value,!0);return t.value=t.value+4,n}function z(e,t){var n=e[t.value];return t.value=t.value+1,n}function H(e,t){var n=e.getUint8(t.value);return t.value=t.value+1,n}const V=function(e,t){let n;return n="getBigInt64"in DataView.prototype?Number(e.getBigInt64(t.value,!0)):e.getUint32(t.value+4,!0)+Number(e.getUint32(t.value,!0)<<32),t.value+=8,n};function G(e,t){var n=e.getFloat32(t.value,!0);return t.value+=4,n}function W(e,t){return xAe.toHalfFloat(G(e,t))}function K(e){var t=(31744&e)>>10,n=1023&e;return(e>>15?-1:1)*(t?31===t?n?NaN:1/0:Math.pow(2,t-15)*(1+n/1024):n/1024*6103515625e-14)}function q(e,t){var n=e.getUint16(t.value,!0);return t.value+=2,n}function X(e,t){return K(q(e,t))}function $(e,t,n,r,i){return"string"===r||"stringvector"===r||"iccProfile"===r?function(e,t,n){var r=(new TextDecoder).decode(new Uint8Array(e).slice(t.value,t.value+n));return t.value=t.value+n,r}(t,n,i):"chlist"===r?function(e,t,n,r){for(var i=n.value,a=[];n.value<i+r-1;){var s=B(t,n),o=F(e,n),l=H(e,n);n.value+=3;var c=F(e,n),d=F(e,n);a.push({name:s,pixelType:o,pLinear:l,xSampling:c,ySampling:d})}return n.value+=1,a}(e,t,n,i):"chromaticities"===r?function(e,t){return{redX:G(e,t),redY:G(e,t),greenX:G(e,t),greenY:G(e,t),blueX:G(e,t),blueY:G(e,t),whiteX:G(e,t),whiteY:G(e,t)}}(e,n):"compression"===r?function(e,t){return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"][H(e,t)]}(e,n):"box2i"===r?function(e,t){return{xMin:U(e,t),yMin:U(e,t),xMax:U(e,t),yMax:U(e,t)}}(e,n):"lineOrder"===r?function(e,t){return["INCREASING_Y"][H(e,t)]}(e,n):"float"===r?G(e,n):"v2f"===r?function(e,t){return[G(e,t),G(e,t)]}(e,n):"v3f"===r?function(e,t){return[G(e,t),G(e,t),G(e,t)]}(e,n):"int"===r?F(e,n):"rational"===r?function(e,t){return[F(e,t),U(e,t)]}(e,n):"timecode"===r?function(e,t){return[U(e,t),U(e,t)]}(e,n):"preview"===r?(n.value+=i,"skipped"):void(n.value+=i)}const Y=new DataView(e),J=new Uint8Array(e),Z={value:0},Q=function(e,t,n){const r={};if(20000630!=e.getUint32(0,!0))throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";r.version=e.getUint8(4);const i=e.getUint8(5);r.spec={singleTile:!!(2&i),longName:!!(4&i),deepFormat:!!(8&i),multiPart:!!(16&i)},n.value=8;for(var a=!0;a;){var s=B(t,n);if(0==s)a=!1;else{var o=$(e,t,n,B(t,n),U(e,n));void 0===o||(r[s]=o)}}if(-5&i)throw"THREE.EXRLoader: provided file is currently unsupported.";return r}(Y,e,Z),ee=function(e,t,n,r,i){const a={size:0,viewer:t,array:n,offset:r,width:e.dataWindow.xMax-e.dataWindow.xMin+1,height:e.dataWindow.yMax-e.dataWindow.yMin+1,channels:e.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:e.channels[0].pixelType,uncompress:null,getter:null,format:null,[AGe?"colorSpace":"encoding"]:null};switch(e.compression){case"NO_COMPRESSION":a.lines=1,a.uncompress=P;break;case"RLE_COMPRESSION":a.lines=1,a.uncompress=O;break;case"ZIPS_COMPRESSION":a.lines=1,a.uncompress=R;break;case"ZIP_COMPRESSION":a.lines=16,a.uncompress=R;break;case"PIZ_COMPRESSION":a.lines=32,a.uncompress=I;break;case"PXR24_COMPRESSION":a.lines=16,a.uncompress=D;break;case"DWAA_COMPRESSION":a.lines=32,a.uncompress=L;break;case"DWAB_COMPRESSION":a.lines=256,a.uncompress=L;break;default:throw"EXRLoader.parse: "+e.compression+" is unsupported"}if(a.scanlineBlockSize=a.lines,1==a.type)switch(i){case ONe:a.getter=X,a.inputSize=2;break;case RNe:a.getter=q,a.inputSize=2}else{if(2!=a.type)throw"EXRLoader.parse: unsupported pixelType "+a.type+" for "+e.compression+".";switch(i){case ONe:a.getter=G,a.inputSize=4;break;case RNe:a.getter=W,a.inputSize=4}}a.blockCount=(e.dataWindow.yMax+1)/a.scanlineBlockSize;for(var s=0;s<a.blockCount;s++)V(t,r);a.outputChannels=3==a.channels?4:a.channels;const o=a.width*a.height*a.outputChannels;switch(i){case ONe:a.byteArray=new Float32Array(o),a.channels<a.outputChannels&&a.byteArray.fill(1,0,o);break;case RNe:a.byteArray=new Uint16Array(o),a.channels<a.outputChannels&&a.byteArray.fill(15360,0,o)}return a.bytesPerLine=a.width*a.inputSize*a.channels,4==a.outputChannels?a.format=BNe:a.format=zNe,AGe?a.colorSpace="srgb-linear":a.encoding=3e3,a}(Q,Y,J,Z,this.type),te={value:0},ne={R:0,G:1,B:2,A:3,Y:0};for(let re=0;re<ee.height/ee.scanlineBlockSize;re++){const e=U(Y,Z);ee.size=U(Y,Z),ee.lines=e+ee.scanlineBlockSize>ee.height?ee.height-e:ee.scanlineBlockSize;const t=ee.size<ee.lines*ee.bytesPerLine?ee.uncompress(ee):P(ee);Z.value+=ee.size;for(let n=0;n<ee.scanlineBlockSize;n++){const e=n+re*ee.scanlineBlockSize;if(e>=ee.height)break;for(let r=0;r<ee.channels;r++){const i=ne[Q.channels[r].name];for(let a=0;a<ee.width;a++){te.value=(n*(ee.channels*ee.width)+r*ee.width+a)*ee.inputSize;const s=(ee.height-1-e)*(ee.width*ee.outputChannels)+a*ee.outputChannels+i;ee.byteArray[s]=ee.getter(t,te)}}}}return{header:Q,width:ee.width,height:ee.height,data:ee.byteArray,format:ee.format,[AGe?"colorSpace":"encoding"]:ee[AGe?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,r){return super.load(e,function(e,n){AGe?e.colorSpace=n.colorSpace:e.encoding=n.encoding,e.minFilter=NNe,e.magFilter=NNe,e.generateMipmaps=!1,e.flipY=!1,t&&t(e,n)},n,r)}}const EGe=new WeakMap;class kGe extends RRe{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){const i=new LRe(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,e=>{const n={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,n).then(t).catch(r)},n,r)}decodeDracoFile(e,t,n,r){const i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,i).then(t)}decodeGeometry(e,t){for(const o in t.attributeTypes){const e=t.attributeTypes[o];void 0!==e.BYTES_PER_ELEMENT&&(t.attributeTypes[o]=e.name)}const n=JSON.stringify(t);if(EGe.has(e)){const t=EGe.get(e);if(t.key===n)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const i=this.workerNextTaskID++,a=e.byteLength,s=this._getWorker(i,a).then(n=>(r=n,new Promise((n,a)=>{r._callbacks[i]={resolve:n,reject:a},r.postMessage({type:"decode",id:i,taskConfig:t,buffer:e},[e])}))).then(e=>this._createGeometry(e.geometry));return s.catch(()=>!0).then(()=>{r&&i&&this._releaseTask(r,i)}),EGe.set(e,{key:n,promise:s}),s}_createGeometry(e){const t=new PAe;e.index&&t.setIndex(new wAe(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n],i=r.name,a=r.array,s=r.itemSize;t.setAttribute(i,new wAe(a,s))}return t}_loadLibrary(e,t){const n=new LRe(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((t,r)=>{n.load(e,t,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(t=>{const n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const r=TGe.toString(),i=["/* draco decoder */",n,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([i]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const n=t.data;switch(n.type){case"decode":e._callbacks[n.id].resolve(n);break;case"error":e._callbacks[n.id].reject(n)}},this.workerPool.push(e)}else this.workerPool.sort(function(e,t){return e._taskLoad>t._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function TGe(){let e,t;function n(e,t,n,r,i,a){const s=a.num_components(),o=n.num_points()*s,l=o*i.BYTES_PER_ELEMENT,c=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,i),d=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,a,c,l,d);const u=new i(e.HEAPF32.buffer,d,o).slice();return e._free(d),{name:r,array:u,itemSize:s}}onmessage=function(r){const i=r.data;switch(i.type){case"init":e=i.decoderConfig,t=new Promise(function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)});break;case"decode":const r=i.buffer,a=i.taskConfig;t.then(e=>{const t=e.draco,s=new t.Decoder,o=new t.DecoderBuffer;o.Init(new Int8Array(r),r.byteLength);try{const e=function(e,t,r,i){const a=i.attributeIDs,s=i.attributeTypes;let o,l;const c=t.GetEncodedGeometryType(r);if(c===e.TRIANGULAR_MESH)o=new e.Mesh,l=t.DecodeBufferToMesh(r,o);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");o=new e.PointCloud,l=t.DecodeBufferToPointCloud(r,o)}if(!l.ok()||0===o.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+l.error_msg());const d={index:null,attributes:[]};for(const u in a){const r=self[s[u]];let l,c;if(i.useUniqueIDs)c=a[u],l=t.GetAttributeByUniqueId(o,c);else{if(c=t.GetAttributeId(o,e[a[u]]),-1===c)continue;l=t.GetAttribute(o,c)}d.attributes.push(n(e,t,o,u,r,l))}c===e.TRIANGULAR_MESH&&(d.index=function(e,t,n){const r=n.num_faces(),i=3*r,a=4*i,s=e._malloc(a);t.GetTrianglesUInt32Array(n,a,s);const o=new Uint32Array(e.HEAPF32.buffer,s,i).slice();return e._free(s),{array:o,itemSize:1}}(e,t,o));return e.destroy(o),d}(t,s,o,a),r=e.attributes.map(e=>e.array.buffer);e.index&&r.push(e.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:e},r)}catch(l){self.postMessage({type:"error",id:i.id,error:l.message})}finally{t.destroy(o),t.destroy(s)}})}}}let PGe;const OGe=()=>{if(PGe)return PGe;const e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!=typeof WebAssembly)return{supported:!1};let n,r="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB";WebAssembly.validate(e)&&(r="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB");const i=WebAssembly.instantiate(function(e){const n=new Uint8Array(e.length);for(let t=0;t<e.length;++t){const r=e.charCodeAt(t);n[t]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let r=0;for(let i=0;i<e.length;++i)n[r++]=n[i]<60?t[n[i]]:64*(n[i]-60)+n[++i];return n.buffer.slice(0,r)}(r),{}).then(e=>{n=e.instance,n.exports.__wasm_call_ctors()});function a(e,t,r,i,a,s){const o=n.exports.sbrk,l=r+3&-4,c=o(l*i),d=o(a.length),u=new Uint8Array(n.exports.memory.buffer);u.set(a,d);const h=e(c,r,i,d,a.length);if(0===h&&s&&s(c,l,i),t.set(u.subarray(c,c+r*i)),o(c-o(0)),0!==h)throw new Error(`Malformed buffer data: ${h}`)}const s={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},o={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return PGe={ready:i,supported:!0,decodeVertexBuffer(e,t,r,i,o){a(n.exports.meshopt_decodeVertexBuffer,e,t,r,i,n.exports[s[o]])},decodeIndexBuffer(e,t,r,i){a(n.exports.meshopt_decodeIndexBuffer,e,t,r,i)},decodeIndexSequence(e,t,r,i){a(n.exports.meshopt_decodeIndexSequence,e,t,r,i)},decodeGltfBuffer(e,t,r,i,l,c){a(n.exports[o[l]],e,t,r,i,n.exports[s[c]])}},PGe};let RGe=null,IGe="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function DGe(e=!0,t=!0,n){return r=>{n&&n(r),e&&(RGe||(RGe=new kGe),RGe.setDecoderPath("string"==typeof e?e:IGe),r.setDRACOLoader(RGe)),t&&r.setMeshoptDecoder(OGe())}}const LGe=(e,t,n,r)=>MLe(CVe,e,DGe(t,n,r));LGe.preload=(e,t,n,r)=>MLe.preload(CVe,e,DGe(t,n,r)),LGe.clear=e=>MLe.clear(CVe,e),LGe.setDecoderPath=e=>{IGe=e};const BGe=Ve.forwardRef(({makeDefault:e,camera:t,regress:n,domElement:r,enableDamping:i=!0,keyEvents:a=!1,onChange:s,onStart:o,onEnd:l,...c},d)=>{const u=_Le(e=>e.invalidate),h=_Le(e=>e.camera),p=_Le(e=>e.gl),m=_Le(e=>e.events),f=_Le(e=>e.setEvents),g=_Le(e=>e.set),v=_Le(e=>e.get),x=_Le(e=>e.performance),y=t||h,b=r||m.connected||p.domElement,w=Ve.useMemo(()=>new jVe(y),[y]);return SLe(()=>{w.enabled&&w.update()},-1),Ve.useEffect(()=>(a&&w.connect(!0===a?b:a),w.connect(b),()=>{w.dispose()}),[a,b,n,w,u]),Ve.useEffect(()=>{const e=e=>{u(),n&&x.regress(),s&&s(e)},t=e=>{o&&o(e)},r=e=>{l&&l(e)};return w.addEventListener("change",e),w.addEventListener("start",t),w.addEventListener("end",r),()=>{w.removeEventListener("start",t),w.removeEventListener("end",r),w.removeEventListener("change",e)}},[s,o,l,w,u,f]),Ve.useEffect(()=>{if(e){const e=v().controls;return g({controls:w}),()=>g({controls:e})}},[e,w]),Ve.createElement("primitive",W3({ref:d,object:w,enableDamping:i},c))}),FGe=(e,t,n)=>{let r;switch(e){case ANe:r=new Uint8ClampedArray(t*n*4);break;case RNe:r=new Uint16Array(t*n*4);break;case PNe:r=new Uint32Array(t*n*4);break;case MNe:r=new Int8Array(t*n*4);break;case ENe:r=new Int16Array(t*n*4);break;case TNe:r=new Int32Array(t*n*4);break;case ONe:r=new Float32Array(t*n*4);break;default:throw new Error("Unsupported data type")}return r};let UGe;class zGe{constructor(e){var t,n,r,i,a,s,o,l,c,d,u,h,p,m,f,g;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(CI){throw this._renderer.setRenderTarget(null),CI}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const v={format:BNe,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:void 0!==(null===(t=e.renderTargetOptions)||void 0===t?void 0:t.anisotropy)?null===(n=e.renderTargetOptions)||void 0===n?void 0:n.anisotropy:1,generateMipmaps:void 0!==(null===(r=e.renderTargetOptions)||void 0===r?void 0:r.generateMipmaps)&&(null===(i=e.renderTargetOptions)||void 0===i?void 0:i.generateMipmaps),magFilter:void 0!==(null===(a=e.renderTargetOptions)||void 0===a?void 0:a.magFilter)?null===(s=e.renderTargetOptions)||void 0===s?void 0:s.magFilter:NNe,minFilter:void 0!==(null===(o=e.renderTargetOptions)||void 0===o?void 0:o.minFilter)?null===(l=e.renderTargetOptions)||void 0===l?void 0:l.minFilter:NNe,samples:void 0!==(null===(c=e.renderTargetOptions)||void 0===c?void 0:c.samples)?null===(d=e.renderTargetOptions)||void 0===d?void 0:d.samples:void 0,wrapS:void 0!==(null===(u=e.renderTargetOptions)||void 0===u?void 0:u.wrapS)?null===(h=e.renderTargetOptions)||void 0===h?void 0:h.wrapS:xNe,wrapT:void 0!==(null===(p=e.renderTargetOptions)||void 0===p?void 0:p.wrapT)?null===(m=e.renderTargetOptions)||void 0===m?void 0:m.wrapT:xNe};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=zGe.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new rTe,this._camera=new kMe,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!((e,t,n,r)=>{if(void 0!==UGe)return UGe;const i=new zSe(1,1,r);t.setRenderTarget(i);const a=new YAe(new yMe,new pAe({color:16777215}));t.render(a,n),t.setRenderTarget(null);const s=FGe(e,i.width,i.height);return t.readRenderTargetPixels(i,0,0,i.width,i.height,s),i.dispose(),a.geometry.dispose(),a.material.dispose(),UGe=0!==s[0],UGe})(this._type,this._renderer,this._camera,v)){let e;if(this._type===RNe)e=this._renderer.extensions.has("EXT_color_buffer_float")?ONe:void 0;void 0!==e?this._type=e:this._supportsReadPixels=!1}this._quad=new YAe(new yMe,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new zSe(this.width,this.height,v),this._renderTarget.texture.mapping=void 0!==(null===(f=e.renderTargetOptions)||void 0===f?void 0:f.mapping)?null===(g=e.renderTargetOptions)||void 0===g?void 0:g.mapping:uNe}static instantiateRenderer(){const e=new Qke;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=FGe(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new LTe(this.toArray(),this.width,this.height,BNe,this._type,(null==e?void 0:e.mapping)||uNe,(null==e?void 0:e.wrapS)||xNe,(null==e?void 0:e.wrapT)||xNe,(null==e?void 0:e.magFilter)||NNe,(null==e?void 0:e.minFilter)||NNe,(null==e?void 0:e.anisotropy)||1,R_e);return t.generateMipmaps=void 0!==(null==e?void 0:e.generateMipmaps)&&(null==e?void 0:e.generateMipmaps),t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof rMe&&Object.values(this.material.uniforms).forEach(e=>{e.value instanceof BSe&&e.value.dispose()}),Object.values(this.material).forEach(e=>{e instanceof BSe&&e.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class HGe extends rMe{constructor({gamma:e,offsetHdr:t,offsetSdr:n,gainMapMin:r,gainMapMax:i,maxDisplayBoost:a,hdrCapacityMin:s,hdrCapacityMax:o,sdr:l,gainMap:c}){super({name:"GainMapDecoderMaterial",vertexShader:"\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"\n// min half float value\n#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )\n// max half float value\n#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )\n\nuniform sampler2D sdr;\nuniform sampler2D gainMap;\nuniform vec3 gamma;\nuniform vec3 offsetHdr;\nuniform vec3 offsetSdr;\nuniform vec3 gainMapMin;\nuniform vec3 gainMapMax;\nuniform float weightFactor;\n\nvarying vec2 vUv;\n\nvoid main() {\n  vec3 rgb = texture2D( sdr, vUv ).rgb;\n  vec3 recovery = texture2D( gainMap, vUv ).rgb;\n  vec3 logRecovery = pow( recovery, gamma );\n  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;\n  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;\n  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));\n  gl_FragColor = vec4( clampedHdrColor , 1.0 );\n}\n",uniforms:{sdr:{value:l},gainMap:{value:c},gamma:{value:new WSe(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:(new WSe).fromArray(t)},offsetSdr:{value:(new WSe).fromArray(n)},gainMapMin:{value:(new WSe).fromArray(r)},gainMapMax:{value:(new WSe).fromArray(i)},weightFactor:{value:(Math.log2(a)-s)/(o-s)}},blending:0,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=a,this._hdrCapacityMin=s,this._hdrCapacityMax=o,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class VGe extends Error{}class GGe extends Error{}const WGe=(e,t,n)=>{const r=new RegExp(`${t}="([^"]*)"`,"i").exec(e);if(r)return r[1];const i=new RegExp(`<${t}[^>]*>([\\s\\S]*?)</${t}>`,"i").exec(e);if(i){const e=i[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return e&&3===e.length?e.map(e=>e.replace(/<\/?rdf:li>/g,"")):i[1].trim()}if(void 0!==n)return n;throw new Error(`Can't find ${t} in gainmap metadata`)};class KGe{constructor(e){this.options={debug:!(!e||void 0===e.debug)&&e.debug,extractFII:!e||void 0===e.extractFII||e.extractFII,extractNonFII:!e||void 0===e.extractNonFII||e.extractNonFII}}extract(e){return new Promise((t,n)=>{this.options.debug;const r=new DataView(e.buffer);if(65496!==r.getUint16(0))return void n(new Error("Not a valid jpeg"));const i=r.byteLength;let a,s=2,o=0;for(;s<i;){if(++o>250)return void n(new Error(`Found no marker after ${o} loops `));if(255!==r.getUint8(s))return void n(new Error(`Not a valid marker at offset 0x${s.toString(16)}, found: 0x${r.getUint8(s).toString(16)}`));if(a=r.getUint8(s+1),226===a){const e=s+4;if(1297106432===r.getUint32(e)){const i=e+4;let a;if(18761===r.getUint16(i))a=!1;else{if(19789!==r.getUint16(i))return void n(new Error("No valid endianness marker found in TIFF header"));a=!0}if(42!==r.getUint16(i+2,!a))return void n(new Error("Not valid TIFF data! (no 0x002A marker)"));const s=r.getUint32(i+4,!a);if(s<8)return void n(new Error("Not valid TIFF data! (First offset less than 8)"));const o=i+s,l=r.getUint16(o,!a),c=o+2;let d=0;for(let e=c;e<c+12*l;e+=12)45057===r.getUint16(e,!a)&&(d=r.getUint32(e+8,!a));const u=o+2+12*l+4,h=[];for(let e=u;e<u+16*d;e+=16){const t={MPType:r.getUint32(e,!a),size:r.getUint32(e+4,!a),dataOffset:r.getUint32(e+8,!a),dependantImages:r.getUint32(e+12,!a),start:-1,end:-1,isFII:!1};t.dataOffset?(t.start=i+t.dataOffset,t.isFII=!1):(t.start=0,t.isFII=!0),t.end=t.start+t.size,h.push(t)}if(this.options.extractNonFII&&h.length){const e=new Blob([r]),n=[];for(const t of h){if(t.isFII&&!this.options.extractFII)continue;const r=e.slice(t.start,t.end+1,"image/jpeg");n.push(r)}t(n)}}}s+=2+r.getUint16(s+2)}})}}const qGe=async e=>{const t=(e=>{let t;t="undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):e.toString();let n=t.indexOf("<x:xmpmeta");for(;-1!==n;){const e=t.indexOf("x:xmpmeta>",n),r=t.slice(n,e+10);try{const e=WGe(r,"hdrgm:GainMapMin","0"),t=WGe(r,"hdrgm:GainMapMax"),n=WGe(r,"hdrgm:Gamma","1"),i=WGe(r,"hdrgm:OffsetSDR","0.015625"),a=WGe(r,"hdrgm:OffsetHDR","0.015625"),s=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(r),o=s?s[1]:"0",l=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(r);if(!l)throw new Error("Incomplete gainmap metadata");const c=l[1];return{gainMapMin:Array.isArray(e)?e.map(e=>parseFloat(e)):[parseFloat(e),parseFloat(e),parseFloat(e)],gainMapMax:Array.isArray(t)?t.map(e=>parseFloat(e)):[parseFloat(t),parseFloat(t),parseFloat(t)],gamma:Array.isArray(n)?n.map(e=>parseFloat(e)):[parseFloat(n),parseFloat(n),parseFloat(n)],offsetSdr:Array.isArray(i)?i.map(e=>parseFloat(e)):[parseFloat(i),parseFloat(i),parseFloat(i)],offsetHdr:Array.isArray(a)?a.map(e=>parseFloat(e)):[parseFloat(a),parseFloat(a),parseFloat(a)],hdrCapacityMin:parseFloat(o),hdrCapacityMax:parseFloat(c)}}catch(CI){}n=t.indexOf("<x:xmpmeta",e)}})(e);if(!t)throw new GGe("Gain map XMP metadata not found");const n=new KGe({extractFII:!0,extractNonFII:!0}),r=await n.extract(e);if(2!==r.length)throw new VGe("Gain map recovery image not found");return{sdr:new Uint8Array(await r[0].arrayBuffer()),gainMap:new Uint8Array(await r[1].arrayBuffer()),metadata:t}},XGe=e=>new Promise((t,n)=>{const r=document.createElement("img");r.onload=()=>{t(r)},r.onerror=e=>{n(e)},r.src=URL.createObjectURL(e)});class $Ge extends RRe{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new PRe}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer;const e=new HGe({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new BSe,sdr:new BSe});return new zGe({width:16,height:16,type:RNe,colorSpace:R_e,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,n,r){const i=r?new Blob([r],{type:"image/jpeg"}):void 0,a=new Blob([n],{type:"image/jpeg"});let s,o,l=!1;if("undefined"==typeof createImageBitmap){const e=await Promise.all([i?XGe(i):Promise.resolve(void 0),XGe(a)]);o=e[0],s=e[1],l=!0}else{const e=await Promise.all([i?createImageBitmap(i,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(a,{imageOrientation:"flipY"})]);o=e[0],s=e[1]}const c=new BSe(o||new ImageData(2,2),uNe,xNe,xNe,NNe,CNe,BNe,ANe,1,R_e);c.flipY=l,c.needsUpdate=!0;const d=new BSe(s,uNe,xNe,xNe,NNe,CNe,BNe,ANe,1,O_e);d.flipY=l,d.needsUpdate=!0,e.width=s.width,e.height=s.height,e.material.gainMap=c,e.material.sdr=d,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class YGe extends $Ge{load([e,t,n],r,i,a){const s=this.prepareQuadRenderer();let o,l,c;const d=async()=>{if(o&&l&&c){try{await this.render(s,c,o,l)}catch(i){return this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(n),"function"==typeof a&&a(i),void s.disposeOnDemandRenderer()}"function"==typeof r&&r(s),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(n),s.disposeOnDemandRenderer()}};let u=!0,h=0,p=0,m=!0,f=0,g=0,v=!0,x=0,y=0;const b=()=>{if("function"==typeof i){i(new ProgressEvent("progress",{lengthComputable:u&&m&&v,loaded:p+g+y,total:h+f+x}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(n);const w=new LRe(this._internalLoadingManager);w.setResponseType("arraybuffer"),w.setRequestHeader(this.requestHeader),w.setPath(this.path),w.setWithCredentials(this.withCredentials),w.load(e,async e=>{if("string"==typeof e)throw new Error("Invalid sdr buffer");o=e,await d()},e=>{u=e.lengthComputable,p=e.loaded,h=e.total,b()},t=>{this.manager.itemError(e),"function"==typeof a&&a(t)});const j=new LRe(this._internalLoadingManager);j.setResponseType("arraybuffer"),j.setRequestHeader(this.requestHeader),j.setPath(this.path),j.setWithCredentials(this.withCredentials),j.load(t,async e=>{if("string"==typeof e)throw new Error("Invalid gainmap buffer");l=e,await d()},e=>{m=e.lengthComputable,g=e.loaded,f=e.total,b()},e=>{this.manager.itemError(t),"function"==typeof a&&a(e)});const N=new LRe(this._internalLoadingManager);return N.setRequestHeader(this.requestHeader),N.setPath(this.path),N.setWithCredentials(this.withCredentials),N.load(n,async e=>{if("string"!=typeof e)throw new Error("Invalid metadata string");c=JSON.parse(e),await d()},e=>{v=e.lengthComputable,y=e.loaded,x=e.total,b()},e=>{this.manager.itemError(n),"function"==typeof a&&a(e)}),s}}class JGe extends $Ge{load(e,t,n,r){const i=this.prepareQuadRenderer(),a=new LRe(this._internalLoadingManager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(this.withCredentials),this.manager.itemStart(e),a.load(e,async n=>{if("string"==typeof n)throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const a=new Uint8Array(n);let s,o,l;try{const e=await qGe(a);s=e.sdr,o=e.gainMap,l=e.metadata}catch(CI){if(!(CI instanceof GGe||CI instanceof VGe))throw CI;l={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},s=a}try{await this.render(i,l,s,o)}catch(c){return this.manager.itemError(e),"function"==typeof r&&r(c),void i.disposeOnDemandRenderer()}"function"==typeof t&&t(i),this.manager.itemEnd(e),i.disposeOnDemandRenderer()},n,t=>{this.manager.itemError(e),"function"==typeof r&&r(t)}),i}}const ZGe={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},QGe="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",eWe=e=>Array.isArray(e),tWe=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function nWe({files:e=tWe,path:t="",preset:n,encoding:r,extensions:i}={}){let a=null,s=!1;n&&(aWe(n),e=ZGe[n],t=QGe),s=eWe(e);const{extension:o,isCubemap:l}=sWe(e);if(a=oWe(o),!a)throw new Error("useEnvironment: Unrecognized file extension: "+e);const c=_Le(e=>e.gl);Ve.useLayoutEffect(()=>{"webp"!==o&&"jpg"!==o&&"jpeg"!==o||c.domElement.addEventListener("webglcontextlost",function(){MLe.clear(a,s?[e]:e)},{once:!0})},[e,c.domElement]);const d=MLe(a,s?[e]:e,e=>{"webp"!==o&&"jpg"!==o&&"jpeg"!==o||e.setRenderer(c),null==e.setPath||e.setPath(t),i&&i(e)});let u=s?d[0]:d;var h;"jpg"!==o&&"jpeg"!==o&&"webp"!==o||(u=null==(h=u.renderTarget)?void 0:h.texture);return u.mapping=l?hNe:mNe,"colorSpace"in u?u.colorSpace=(null!=r?r:l)?"srgb":"srgb-linear":u.encoding=(null!=r?r:l)?3001:3e3,u}const rWe={files:tWe,path:"",preset:void 0,extensions:void 0};nWe.preload=e=>{const t={...rWe,...e};let{files:n,path:r=""}=t;const{preset:i,extensions:a}=t;i&&(aWe(i),n=ZGe[i],r=QGe);const{extension:s}=sWe(n);if("webp"===s||"jpg"===s||"jpeg"===s)throw new Error("useEnvironment: Preloading gainmaps is not supported");const o=oWe(s);if(!o)throw new Error("useEnvironment: Unrecognized file extension: "+n);MLe.preload(o,eWe(n)?[n]:n,e=>{null==e.setPath||e.setPath(r),a&&a(e)})};const iWe={files:tWe,preset:void 0};function aWe(e){if(!(e in ZGe))throw new Error("Preset must be one of: "+Object.keys(ZGe).join(", "))}function sWe(e){var t;const n=eWe(e)&&6===e.length,r=eWe(e)&&3===e.length&&e.some(e=>e.endsWith("json")),i=eWe(e)?e[0]:e;return{extension:n?"cube":r?"webp":i.startsWith("data:application/exr")?"exr":i.startsWith("data:application/hdr")?"hdr":i.startsWith("data:image/jpeg")?"jpg":null==(t=i.split(".").pop())||null==(t=t.split("?"))||null==(t=t.shift())?void 0:t.toLowerCase(),isCubemap:n,isGainmap:r}}function oWe(e){return"cube"===e?FRe:"hdr"===e?CGe:"exr"===e?MGe:"jpg"===e||"jpeg"===e?JGe:"webp"===e?YGe:null}nWe.clear=e=>{const t={...iWe,...e};let{files:n}=t;const{preset:r}=t;r&&(aWe(r),n=ZGe[r]);const{extension:i}=sWe(n),a=oWe(i);if(!a)throw new Error("useEnvironment: Unrecognized file extension: "+n);MLe.clear(a,eWe(n)?[n]:n)};function lWe(e,t,n,r,i={}){var a,s,o,l;i={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...i};const c=(e=>{return(t=e).current&&t.current.isScene?e.current:e;var t})(t||n),d=c.background,u=c.environment,h={backgroundBlurriness:c.backgroundBlurriness,backgroundIntensity:c.backgroundIntensity,backgroundRotation:null!==(a=null==(s=c.backgroundRotation)||null==s.clone?void 0:s.clone())&&void 0!==a?a:[0,0,0],environmentIntensity:c.environmentIntensity,environmentRotation:null!==(o=null==(l=c.environmentRotation)||null==l.clone?void 0:l.clone())&&void 0!==o?o:[0,0,0]};return"only"!==e&&(c.environment=r),e&&(c.background=r),OLe(c,i),()=>{"only"!==e&&(c.environment=u),e&&(c.background=d),OLe(c,h)}}function cWe({scene:e,background:t=!1,map:n,...r}){const i=_Le(e=>e.scene);return Ve.useLayoutEffect(()=>{if(n)return lWe(t,e,i,n,r)}),null}function dWe({background:e=!1,scene:t,blur:n,backgroundBlurriness:r,backgroundIntensity:i,backgroundRotation:a,environmentIntensity:s,environmentRotation:o,...l}){const c=nWe(l),d=_Le(e=>e.scene);return Ve.useLayoutEffect(()=>lWe(e,t,d,c,{backgroundBlurriness:null!=n?n:r,backgroundIntensity:i,backgroundRotation:a,environmentIntensity:s,environmentRotation:o})),Ve.useEffect(()=>()=>{c.dispose()},[c]),null}function uWe({children:e,near:t=.1,far:n=1e3,resolution:r=256,frames:i=1,map:a,background:s=!1,blur:o,backgroundBlurriness:l,backgroundIntensity:c,backgroundRotation:d,environmentIntensity:u,environmentRotation:h,scene:p,files:m,path:f,preset:g,extensions:v}){const x=_Le(e=>e.gl),y=_Le(e=>e.scene),b=Ve.useRef(null),[w]=Ve.useState(()=>new rTe),j=Ve.useMemo(()=>{const e=new cMe(r);return e.texture.type=RNe,e},[r]);Ve.useEffect(()=>()=>{j.dispose()},[j]),Ve.useLayoutEffect(()=>{if(1===i){const e=x.autoClear;x.autoClear=!0,b.current.update(x,w),x.autoClear=e}return lWe(s,p,y,j.texture,{backgroundBlurriness:null!=o?o:l,backgroundIntensity:c,backgroundRotation:d,environmentIntensity:u,environmentRotation:h})},[e,w,j.texture,p,y,s,i,x]);let N=1;return SLe(()=>{if(i===1/0||N<i){const e=x.autoClear;x.autoClear=!0,b.current.update(x,w),x.autoClear=e,N++}}),Ve.createElement(Ve.Fragment,null,function(e,t,n){return Qe.jsx(FLe,{children:e,container:t,state:n},t.uuid)}(Ve.createElement(Ve.Fragment,null,e,Ve.createElement("cubeCamera",{ref:b,args:[t,n,j]}),m||g?Ve.createElement(dWe,{background:!0,files:m,preset:g,path:f,extensions:v}):a?Ve.createElement(cWe,{background:!0,map:a,extensions:v}):null),w))}function hWe(e){var t,n,r,i;const a=nWe(e),s=e.map||a;Ve.useMemo(()=>IDe({GroundProjectedEnvImpl:hVe}),[]),Ve.useEffect(()=>()=>{a.dispose()},[a]);const o=Ve.useMemo(()=>[s],[s]),l=null==(t=e.ground)?void 0:t.height,c=null==(n=e.ground)?void 0:n.radius,d=null!==(r=null==(i=e.ground)?void 0:i.scale)&&void 0!==r?r:1e3;return Ve.createElement(Ve.Fragment,null,Ve.createElement(cWe,W3({},e,{map:s})),Ve.createElement("groundProjectedEnvImpl",{args:o,scale:d,height:l,radius:c}))}function pWe(e){return e.ground?Ve.createElement(hWe,e):e.map?Ve.createElement(cWe,e):e.children?Ve.createElement(uWe,e):Ve.createElement(dWe,e)}const mWe=Ve.forwardRef(({scale:e=10,frames:t=1/0,opacity:n=1,width:r=1,height:i=1,blur:a=1,near:s=0,far:o=10,resolution:l=512,smooth:c=!0,color:d="#000000",depthWrite:u=!1,renderOrder:h,...p},m)=>{const f=Ve.useRef(null),g=_Le(e=>e.scene),v=_Le(e=>e.gl),x=Ve.useRef(null);r*=Array.isArray(e)?e[0]:e||1,i*=Array.isArray(e)?e[1]:e||1;const[y,b,w,j,N,_,S]=Ve.useMemo(()=>{const e=new zSe(l,l),t=new zSe(l,l);t.texture.generateMipmaps=e.texture.generateMipmaps=!1;const n=new yMe(r,i).rotateX(Math.PI/2),a=new YAe(n),s=new Uke;s.depthTest=s.depthWrite=!1,s.onBeforeCompile=e=>{e.uniforms={...e.uniforms,ucolor:{value:new cAe(d)}},e.fragmentShader=e.fragmentShader.replace("void main() {","uniform vec3 ucolor;\n           void main() {\n          "),e.fragmentShader=e.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const o=new rMe(_Ge),c=new rMe(SGe);return c.depthTest=o.depthTest=!1,[e,n,s,a,o,c,t]},[l,r,i,e,d]),C=e=>{j.visible=!0,j.material=N,N.uniforms.tDiffuse.value=y.texture,N.uniforms.h.value=1*e/256,v.setRenderTarget(S),v.render(j,x.current),j.material=_,_.uniforms.tDiffuse.value=S.texture,_.uniforms.v.value=1*e/256,v.setRenderTarget(y),v.render(j,x.current),j.visible=!1};let A,M,E=0;return SLe(()=>{x.current&&(t===1/0||E<t)&&(E++,A=g.background,M=g.overrideMaterial,f.current.visible=!1,g.background=null,g.overrideMaterial=w,v.setRenderTarget(y),v.render(g,x.current),C(a),c&&C(.4*a),v.setRenderTarget(null),f.current.visible=!0,g.overrideMaterial=M,g.background=A)}),Ve.useImperativeHandle(m,()=>f.current,[]),Ve.createElement("group",W3({"rotation-x":Math.PI/2},p,{ref:f}),Ve.createElement("mesh",{renderOrder:h,geometry:b,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},Ve.createElement("meshBasicMaterial",{transparent:!0,map:y.texture,opacity:n,depthWrite:u})),Ve.createElement("orthographicCamera",{ref:x,args:[-r/2,r/2,i/2,-i/2,s,o]}))});function fWe({modelPath:e,scale:t=1,color:n}){const r=Ve.useRef(null),i=LGe(e);SLe(e=>{r.current&&(r.current.position.y=.12*Math.sin(.5*e.clock.elapsedTime),r.current.rotation.y+=.002)});return i&&i.scene&&i.scene.traverse(e=>{e.isMesh&&e.material&&(e.material=Array.isArray(e.material)?e.material.map(e=>e.clone()):e.material.clone(),n&&(Array.isArray(e.material)?e.material.forEach(e=>e.color&&e.color.set(n)):e.material.color&&e.material.color.set(n)),e.castShadow=!0,e.receiveShadow=!0)}),Qe.jsx("group",{ref:r,dispose:null,children:Qe.jsx("primitive",{object:i.scene,scale:[t,t,t],position:[0,-.6,0]})})}const gWe=[{id:1,name:"o Thun Local Brand",description:"Thit k c o, cht liu cotton cao cp",price:"299.000",modelPath:"/models/tshirt.glb",scale:4,badge:"Best Seller",gradient:"from-pink-500/20 to-purple-500/20"},{id:2,name:"Giy Sneaker Streetwear",description:"Phong cch urban, thoi mi c ngy",price:"899.000",modelPath:"/models/base_basic_shaded.glb",scale:10,badge:"New Arrival",gradient:"from-blue-500/20 to-cyan-500/20"},{id:3,name:"M Bucket Hat",description:"Trendy, bo v khi nng hiu qu",price:"149.000",modelPath:"/models/buckethat_shared.glb",scale:13,badge:"Hot Deal",gradient:"from-green-500/20 to-emerald-500/20"},{id:4,name:"My Xay Sinh T",description:"Cng sut mnh, ph hp cho gia nh",price:"1.299.000",modelPath:"/models/blender.glb",scale:5,badge:"Premium",gradient:"from-orange-500/20 to-red-500/20"}];function vWe(){const[e,t]=Ve.useState(0),[n,r]=Ve.useState(!0),[i,a]=Ve.useState(!1),s=gWe[e];return Qe.jsxs("section",{className:"py-8 px-4 relative overflow-hidden",children:[Qe.jsxs("div",{className:"absolute inset-0 -z-10",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background via-primary/5 to-background"}),Qe.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(var(--primary),0.1),transparent_50%)]"}),Qe.jsx(QT.div,{className:`absolute inset-0 bg-gradient-to-br ${s.gradient} opacity-30 blur-3xl`,initial:{opacity:0},animate:{opacity:.3},transition:{duration:.6,ease:[.22,1,.36,1]},style:{willChange:"opacity"}},e)]}),Qe.jsxs("div",{className:"container mx-auto max-w-7xl",children:[Qe.jsxs(QT.div,{initial:{opacity:0,y:15},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.5,ease:[.22,1,.36,1]},className:"text-center mb-12",style:{willChange:"transform, opacity"},children:[Qe.jsx(EP,{variant:"outline",className:"mb-4 text-sm px-4 py-1",children:" Featured Products"}),Qe.jsx("h2",{className:"text-3xl md:text-5xl font-bold mb-4 bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"Sn phm ni bt"}),Qe.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Khm ph nhng thit k c o vi cng ngh 3D tng tc"})]}),Qe.jsxs("div",{className:"grid md:grid-cols-2 gap-8 lg:gap-12 items-center",children:[Qe.jsxs(QT.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.8},className:"relative",children:[Qe.jsxs("div",{className:"relative h-[400px] md:h-[600px] rounded-3xl overflow-hidden border border-border/50 bg-gradient-to-br from-card/80 to-card/40 backdrop-blur-xl shadow-2xl",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent pointer-events-none"}),Qe.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-primary to-transparent"}),Qe.jsx(Ve.Suspense,{fallback:Qe.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center gap-4",children:[Qe.jsxs("div",{className:"relative",children:[Qe.jsx("div",{className:"w-20 h-20 border-4 border-primary/30 border-t-primary rounded-full animate-spin"}),Qe.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Qe.jsx($f,{className:"w-8 h-8 text-primary animate-pulse"})})]}),Qe.jsx("p",{className:"text-sm text-muted-foreground animate-pulse",children:"Loading 3D Model..."})]}),children:Qe.jsxs(uBe,{shadows:!0,camera:{position:[0,0,5],fov:50},className:"cursor-grab active:cursor-grabbing",children:[Qe.jsx("ambientLight",{intensity:.5}),Qe.jsx("spotLight",{position:[10,10,10],angle:.15,penumbra:1,intensity:1,castShadow:!0,"shadow-mapSize":[2048,2048]}),Qe.jsx("pointLight",{position:[-10,-10,-10],intensity:.5}),Qe.jsx("pointLight",{position:[10,5,-5],intensity:.3,color:"#60a5fa"}),Qe.jsx(pWe,{preset:"studio"}),Qe.jsx(DHe,{global:!0,config:{mass:2,tension:500},snap:{mass:4,tension:1500},rotation:[0,0,0],polar:[-Math.PI/3,Math.PI/3],azimuth:[-Math.PI/1.4,Math.PI/2],children:Qe.jsx(fWe,{modelPath:s.modelPath,scale:s.scale})}),Qe.jsx(mWe,{position:[0,-1.4,0],opacity:.5,scale:10,blur:2.5,far:4}),Qe.jsx(BGe,{enableZoom:!0,enablePan:!1,autoRotate:n,autoRotateSpeed:2,minDistance:3,maxDistance:8,maxPolarAngle:Math.PI/2})]})}),Qe.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2",children:[Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsx(AP,{variant:"outline",size:"icon",className:"bg-background/80 backdrop-blur-md hover:bg-background/90 border-border/50 shadow-lg",onClick:()=>r(!n),children:n?Qe.jsx(Ff,{className:"h-4 w-4"}):Qe.jsx(Gf,{className:"h-4 w-4"})})}),Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsx(AP,{variant:"outline",size:"icon",className:"bg-background/80 backdrop-blur-md hover:bg-background/90 border-border/50 shadow-lg",onClick:()=>a(!i),children:Qe.jsx(Nf,{className:"h-4 w-4"})})})]}),Qe.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 px-4 py-2 rounded-full bg-background/80 backdrop-blur-md border border-border/50 shadow-lg",children:Qe.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[Qe.jsx($f,{className:"w-3 h-3"}),"Drag to rotate  Scroll to zoom"]})}),Qe.jsx("div",{className:"absolute top-4 left-4",children:Qe.jsx(EP,{className:"bg-primary/90 backdrop-blur-md text-primary-foreground shadow-lg border-0",children:s.badge})})]}),Qe.jsx("div",{className:"absolute -inset-4 bg-gradient-to-r from-primary/20 via-transparent to-primary/20 blur-3xl -z-10 opacity-60"})]}),Qe.jsxs(QT.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.8},className:"space-y-6",children:[Qe.jsx(eM,{mode:"wait",children:Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"space-y-6",children:[Qe.jsx("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-primary/10 to-primary/5 border border-primary/20 backdrop-blur-sm",children:Qe.jsxs("div",{className:"flex items-center gap-1",children:[Qe.jsx("div",{className:"w-2 h-2 rounded-full bg-primary animate-pulse"}),Qe.jsxs("span",{className:"text-sm font-medium text-primary",children:[e+1," / ",gWe.length]})]})}),Qe.jsxs("div",{children:[Qe.jsx("h3",{className:"text-3xl md:text-5xl font-bold mb-3 bg-gradient-to-br from-foreground to-foreground/70 bg-clip-text text-transparent",children:s.name}),Qe.jsx("div",{className:"h-1 w-20 bg-gradient-to-r from-primary to-transparent rounded-full"})]}),Qe.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:s.description}),Qe.jsxs("div",{className:"flex items-center gap-4 p-6 rounded-2xl bg-gradient-to-r from-primary/5 to-primary/10 border border-primary/20",children:[Qe.jsxs("div",{children:[Qe.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Gi bn"}),Qe.jsx("span",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent",children:s.price})]}),Qe.jsx("div",{className:"flex-1"}),Qe.jsx(AP,{size:"lg",className:"bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70 shadow-lg",children:"Xem chi tit"})]}),Qe.jsx("div",{className:"grid grid-cols-3 gap-3",children:["Chnh hng","Min ph ship","i tr 7 ngy"].map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"p-3 rounded-xl bg-card/50 border border-border/50 text-center backdrop-blur-sm",children:Qe.jsx("p",{className:"text-xs text-muted-foreground",children:e})},t))})]},e)}),Qe.jsxs("div",{className:"flex items-center gap-4 pt-6",children:[Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsx(AP,{variant:"outline",size:"icon",onClick:()=>{t(e=>0===e?gWe.length-1:e-1)},className:"rounded-full h-12 w-12 border-2 hover:border-primary hover:bg-primary/10",children:Qe.jsx(xm,{className:"h-5 w-5"})})}),Qe.jsx("div",{className:"flex gap-2 flex-1 justify-center",children:gWe.map((n,r)=>Qe.jsx(QT.button,{onClick:()=>t(r),className:"h-2 rounded-full transition-all "+(r===e?"w-8 bg-primary shadow-lg shadow-primary/50":"w-2 bg-primary/30 hover:bg-primary/50"),whileHover:{scale:1.2},whileTap:{scale:.9},"aria-label":`Go to product ${r+1}`},r))}),Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsx(AP,{variant:"outline",size:"icon",onClick:()=>{t(e=>e===gWe.length-1?0:e+1)},className:"rounded-full h-12 w-12 border-2 hover:border-primary hover:bg-primary/10",children:Qe.jsx(ym,{className:"h-5 w-5"})})})]})]})]})]})]})}function xWe(){const e=Ve.useRef(null),{scrollYProgress:t}=bP({target:e,offset:["start end","end start"]});jP(t,[0,1],[100,-100]);const n=jP(t,[0,.3,.7,1],[0,1,1,0]);return Qe.jsxs("section",{ref:e,className:"relative py-10 px-4 sm:px-6 overflow-hidden",children:[Qe.jsxs("div",{className:"absolute inset-0 -z-10",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background via-primary/5 to-accent/10"}),Qe.jsx(QT.div,{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(var(--primary),0.15),transparent_50%)]",style:{opacity:n}}),Qe.jsx(QT.div,{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(var(--accent),0.15),transparent_50%)]",style:{opacity:n}}),Qe.jsx(QT.div,{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-gradient-to-tr from-primary/30 via-accent/30 to-transparent rounded-full blur-3xl",animate:{scale:[1,1.15,1],opacity:[.3,.45,.3]},transition:{duration:10,repeat:1/0,ease:[.22,1,.36,1]},style:{willChange:"transform, opacity"}}),Qe.jsx(QT.div,{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-gradient-to-tl from-accent/40 via-primary/20 to-transparent rounded-full blur-3xl",animate:{scale:[1,1.2,1],opacity:[.4,.5,.4]},transition:{duration:12,repeat:1/0,ease:[.22,1,.36,1],delay:1},style:{willChange:"transform, opacity"}}),Qe.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(var(--primary),0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(var(--primary),0.03)_1px,transparent_1px)] bg-[size:64px_64px]"})]}),Qe.jsxs("div",{className:"container mx-auto max-w-7xl",children:[Qe.jsxs(QT.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.6,ease:[.22,1,.36,1]},className:"text-center mb-20",style:{willChange:"transform, opacity"},children:[Qe.jsxs(QT.div,{initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{delay:.2},className:"inline-flex items-center gap-2 px-5 py-2.5 mb-6 rounded-full bg-gradient-to-r from-primary/10 via-accent/10 to-primary/10 border border-primary/20 backdrop-blur-sm",children:[Qe.jsx(pg,{className:"h-5 w-5 text-primary animate-pulse"}),Qe.jsx("span",{className:"text-sm font-semibold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"S mnh & Tm nhn"})]}),Qe.jsxs("h2",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold mb-6",children:[Qe.jsx("span",{className:"block bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-transparent",children:"S mnh ca"}),Qe.jsx("span",{className:"block bg-gradient-to-r from-primary via-accent to-primary bg-clip-text text-transparent mt-2",children:"chng ti"})]}),Qe.jsx(QT.div,{initial:{opacity:0,scaleX:0},whileInView:{opacity:1,scaleX:1},viewport:{once:!0},transition:{delay:.4,duration:.8},className:"h-1.5 w-24 bg-gradient-to-r from-primary to-accent rounded-full mx-auto mb-6"}),Qe.jsx("p",{className:"text-lg sm:text-xl text-muted-foreground max-w-3xl mx-auto leading-relaxed",children:"Kt ni cng ng yu thi trang Vit v lan ta gi tr sng to bn a"})]}),Qe.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-16 items-start mb-20",children:[Qe.jsx(QT.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.8},className:"space-y-6",children:[{icon:yg,color:"from-primary to-accent",shadowColor:"shadow-primary/20",title:"Mc tiu",text:"VibeMarket hng ti vic to ra mt nn tng kt ni gia cc local brand Vit vi cng ng yu thi trang, mang li tri nghim mua sm khc bit v y cm hng."},{icon:Vm,color:"from-blue-500 to-indigo-500",shadowColor:"shadow-blue-500/20",title:"Tm nhn",text:"Tr thnh khng gian sng to ni ngi Vit c th th hin phong cch, chia s am m v cng nhau xy dng bn sc thi trang Vit."},{icon:sf,color:"from-pink-500 to-rose-500",shadowColor:"shadow-pink-500/20",title:"Gi tr",text:"Chng ti tin rng mi thng hiu a phng u mang trong mnh cu chuyn ring  v VibeMarket l ni gip cu chuyn  c ta sng."}].map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.2*t,duration:.6},whileHover:{scale:1.02,y:-5},className:"group",children:Qe.jsxs(DP,{className:"relative overflow-hidden border-border/50 bg-gradient-to-br from-card/80 to-card/40 backdrop-blur-sm hover:shadow-xl hover:shadow-primary/10 transition-all duration-500",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-accent/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),Qe.jsx(UP,{className:"p-6 relative",children:Qe.jsxs("div",{className:"flex items-start gap-5",children:[Qe.jsx(QT.div,{whileHover:{rotate:360,scale:1.1},transition:{duration:.6},className:`flex-shrink-0 p-4 rounded-2xl bg-gradient-to-br ${e.color} shadow-lg ${e.shadowColor} group-hover:shadow-2xl transition-shadow duration-500`,children:Qe.jsx(e.icon,{className:"h-7 w-7 text-white"})}),Qe.jsxs("div",{className:"flex-1 space-y-2",children:[Qe.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-transparent",children:e.title}),Qe.jsx("p",{className:"text-muted-foreground leading-relaxed",children:e.text})]})]})})]})},t))}),Qe.jsxs(QT.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.8},className:"space-y-6",children:[Qe.jsxs(DP,{className:"relative overflow-hidden border-border/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-xl shadow-2xl",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 via-accent/10 to-transparent"}),Qe.jsx(UP,{className:"relative p-8 sm:p-12",children:Qe.jsxs("div",{className:"space-y-6 text-center",children:[Qe.jsx(QT.div,{animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},className:"inline-flex p-6 rounded-full bg-gradient-to-br from-primary to-accent shadow-lg shadow-primary/30",children:Qe.jsx(sf,{className:"h-12 w-12 text-white"})}),Qe.jsx("blockquote",{className:"text-xl sm:text-2xl lg:text-3xl italic font-semibold leading-relaxed",children:Qe.jsx("span",{className:"bg-gradient-to-r from-primary via-accent to-primary bg-clip-text text-transparent",children:'"Thi trang khng ch l phong cch  m l ngn ng ca cm xc v c tnh Vit."'})}),Qe.jsx("div",{className:"pt-4 border-t border-border/50",children:Qe.jsx("p",{className:"text-sm font-medium text-muted-foreground tracking-wide",children:" i ng VibeMarket"})})]})})]}),Qe.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{icon:Og,label:"Cng ng",value:"10K+",color:"from-blue-500 to-cyan-500"},{icon:Sg,label:"Tng trng",value:"+150%",color:"from-green-500 to-emerald-500"},{icon:tm,label:"Thng hiu",value:"500+",color:"from-orange-500 to-red-500"},{icon:pg,label:"Sn phm",value:"50K+",color:"from-purple-500 to-pink-500"}].map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{delay:.6+.1*t},whileHover:{scale:1.05,y:-5},children:Qe.jsx(DP,{className:"relative overflow-hidden border-border/50 bg-gradient-to-br from-card/80 to-card/40 backdrop-blur-sm hover:shadow-lg hover:shadow-primary/10 transition-all duration-300",children:Qe.jsxs(UP,{className:"p-6 text-center space-y-2",children:[Qe.jsx(QT.div,{whileHover:{rotate:360},transition:{duration:.6},className:`inline-flex p-3 rounded-xl bg-gradient-to-br ${e.color} shadow-md`,children:Qe.jsx(e.icon,{className:"h-6 w-6 text-white"})}),Qe.jsx("div",{className:`text-3xl font-bold bg-gradient-to-r ${e.color} bg-clip-text text-transparent`,children:e.value}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:e.label})]})})},t))})]})]}),Qe.jsx(QT.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"relative",children:Qe.jsxs(DP,{className:"relative overflow-hidden border-border/50 bg-gradient-to-br from-primary/10 via-accent/10 to-primary/10 backdrop-blur-sm",children:[Qe.jsx(QT.div,{className:"absolute inset-0 bg-gradient-to-r from-primary/20 to-accent/20",animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:8,repeat:1/0,ease:"linear"},style:{backgroundSize:"200% 200%"}}),Qe.jsx(UP,{className:"relative p-8 sm:p-12 text-center",children:Qe.jsxs(QT.div,{initial:{scale:.8},whileInView:{scale:1},viewport:{once:!0},className:"space-y-4",children:[Qe.jsx("h3",{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Cng nhau xy dng cng ng thi trang Vit"}),Qe.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Tham gia VibeMarket  kt ni vi hng nghn ngi yu thi trang v khm ph nhng thng hiu c o"}),Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"pt-4",children:Qe.jsx(EP,{className:"px-6 py-3 text-base bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90 cursor-pointer shadow-lg",children:"Tm hiu thm "})})]})})]})})]})]})}const yWe=[{id:1,name:"Nguyn Vn A",role:"Co-Founder & CEO",bio:"am m cng ngh v thi trang Vit, vi hn 10 nm kinh nghim trong lnh vc e-commerce v pht trin sn phm s.",avatar:"/images/founder-1.jpg",gradient:"from-blue-500 to-cyan-500",social:{instagram:"#",github:"#",facebook:"#",email:"nguyenvana@vibemarket.vn"},achievements:["Top 30 under 30 Forbes Vietnam","10+ nm kinh nghim E-commerce","Founder 3 startup thnh cng"]},{id:2,name:"Nguyn K V",role:"Developer",bio:"Chuyn gia cng ngh vi nim am m xy dng nn tng s gip kt ni cng ng v thc y thng mi in t Vit Nam.",avatar:"/images/avatars/Avt-Vy.jpg",gradient:"from-purple-500 to-pink-500",social:{instagram:"https://www.instagram.com/valt_1902",github:"https://github.com/kyvy12az",facebook:"https://www.facebook.com/kyvy.nguyen.2k6",email:"nguyenkyvy112az@gmail.com"},achievements:["Gii xut sc BWD 2025","Gii ba Olympic Tin hc tr Qung Tr 2022","Open source contributor"]},{id:3,name:"L Vn C",role:"Co-Founder & CMO",bio:"Chuyn gia marketing vi tm nhn v xy dng thng hiu bn vng v kt ni cng ng yu thi trang local brand.",avatar:"/images/founder-3.jpg",gradient:"from-orange-500 to-red-500",social:{instagram:"#",github:"#",facebook:"#",email:"levanc@vibemarket.vn"},achievements:["15+ nm kinh nghim Marketing","Brand Builder of the Year 2023","Mentor cho 50+ startups"]}];function bWe(){return Qe.jsxs("section",{className:"relative py-8 px-4 sm:px-6 overflow-hidden",children:[Qe.jsxs("div",{className:"absolute inset-0 -z-10",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background via-accent/5 to-background"}),Qe.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(var(--primary),0.1),transparent_50%)]"}),Qe.jsx(QT.div,{className:"absolute top-1/4 right-1/4 w-96 h-96 bg-gradient-to-tr from-primary/20 via-accent/20 to-transparent rounded-full blur-3xl",animate:{scale:[1,1.2,1],opacity:[.3,.5,.3]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),Qe.jsx(QT.div,{className:"absolute bottom-1/4 left-1/3 w-80 h-80 bg-gradient-to-tl from-accent/30 via-primary/20 to-transparent rounded-full blur-3xl",animate:{scale:[1,1.3,1],opacity:[.4,.6,.4]},transition:{duration:10,repeat:1/0,ease:"easeInOut",delay:2}}),Qe.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(var(--primary),0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(var(--primary),0.03)_1px,transparent_1px)] bg-[size:64px_64px]"})]}),Qe.jsxs("div",{className:"container mx-auto max-w-7xl",children:[Qe.jsxs(QT.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"text-center mb-20",children:[Qe.jsxs(QT.div,{initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{delay:.2},className:"inline-flex items-center gap-2 px-5 py-2.5 mb-6 rounded-full bg-gradient-to-r from-primary/10 via-accent/10 to-primary/10 border border-primary/20 backdrop-blur-sm",children:[Qe.jsx(pg,{className:"h-5 w-5 text-primary animate-pulse"}),Qe.jsx("span",{className:"text-sm font-semibold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"i ng sng lp"})]}),Qe.jsxs("h2",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold mb-6",children:[Qe.jsx("span",{className:"block bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-transparent",children:"Gp g nhng"}),Qe.jsx("span",{className:"block bg-gradient-to-r from-primary via-accent to-primary bg-clip-text text-transparent mt-2",children:"ngi sng lp"})]}),Qe.jsx(QT.div,{initial:{opacity:0,scaleX:0},whileInView:{opacity:1,scaleX:1},viewport:{once:!0},transition:{delay:.4,duration:.8},className:"h-1.5 w-24 bg-gradient-to-r from-primary to-accent rounded-full mx-auto mb-6"}),Qe.jsx("p",{className:"text-lg sm:text-xl text-muted-foreground max-w-3xl mx-auto leading-relaxed",children:"i ng am m v tn tm, mang n tri nghim mua sm tuyt vi cho cng ng thi trang Vit"})]}),Qe.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8 lg:gap-10",children:yWe.map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.2*t,duration:.8},children:Qe.jsxs(DP,{className:"group relative overflow-hidden border-border/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm hover:shadow-2xl hover:shadow-primary/10 transition-all duration-500 h-full",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-accent/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),Qe.jsx("div",{className:`absolute top-0 left-0 right-0 h-1 bg-gradient-to-r ${e.gradient}`}),Qe.jsxs(UP,{className:"relative p-8",children:[Qe.jsx("div",{className:"text-center mb-6",children:Qe.jsxs(QT.div,{whileHover:{scale:1.05},transition:{duration:.3},className:"relative inline-block",children:[Qe.jsx("div",{className:`absolute -inset-2 bg-gradient-to-r ${e.gradient} opacity-20 blur-xl rounded-full group-hover:opacity-40 transition-opacity duration-500`}),Qe.jsxs(AD,{className:"relative w-32 h-32 border-4 border-card shadow-xl",children:[Qe.jsx(MD,{src:e.avatar,alt:e.name}),Qe.jsx(ED,{className:`text-2xl font-bold text-white bg-gradient-to-br ${e.gradient}`,children:e.name.split(" ").map(e=>e[0]).join("")})]}),Qe.jsx(QT.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.5+.2*t},className:"absolute -bottom-2 -right-2",children:Qe.jsx("div",{className:`p-2 rounded-full bg-gradient-to-br ${e.gradient} shadow-lg`,children:Qe.jsx(tm,{className:"w-5 h-5 text-white"})})})]})}),Qe.jsxs("div",{className:"text-center mb-6 space-y-2",children:[Qe.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-transparent",children:e.name}),Qe.jsx(EP,{variant:"outline",className:`bg-gradient-to-r ${e.gradient} text-white border-0 shadow-md`,children:e.role})]}),Qe.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed mb-6 text-center",children:e.bio}),Qe.jsxs("div",{className:"space-y-2 mb-6",children:[Qe.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Qe.jsx("div",{className:`w-1 h-1 rounded-full bg-gradient-to-r ${e.gradient}`}),Qe.jsx("span",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Thnh tu"})]}),e.achievements.map((t,n)=>Qe.jsxs(QT.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:.6+.1*n},className:"flex items-start gap-2 text-sm text-muted-foreground",children:[Qe.jsx("div",{className:`w-1.5 h-1.5 rounded-full bg-gradient-to-r ${e.gradient} mt-2 flex-shrink-0`}),Qe.jsx("span",{children:t})]},n))]}),Qe.jsx("div",{className:"flex items-center justify-center gap-3 pt-6 border-t border-border/50",children:[{icon:ff,href:e.social.linkedin,label:"LinkedIn"},{icon:Qm,href:e.social.github,label:"GitHub"},{icon:Gm,href:e.social.facebook,label:"Facebook"},{icon:wf,href:`mailto:${e.social.email}`,label:"Email"}].map((e,t)=>Qe.jsx(QT.div,{whileHover:{scale:1.1,y:-2},whileTap:{scale:.95},children:Qe.jsx(AP,{variant:"ghost",size:"icon",className:"relative h-10 w-10 rounded-full hover:bg-primary/10 group/social",asChild:!0,children:Qe.jsx("a",{href:e.href,target:"_blank",rel:"noopener noreferrer","aria-label":e.label,children:Qe.jsx(e.icon,{className:"h-4 w-4 text-muted-foreground group-hover/social:text-primary transition-colors"})})})},t))})]})]})},e.id))}),Qe.jsx(QT.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},className:"mt-20",children:Qe.jsxs(DP,{className:"relative overflow-hidden border-border/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-sm",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/5 via-accent/5 to-primary/5"}),Qe.jsx(UP,{className:"relative p-8 sm:p-12",children:Qe.jsxs("div",{className:"text-center space-y-6",children:[Qe.jsx(QT.div,{animate:{rotate:[0,360]},transition:{duration:20,repeat:1/0,ease:"linear"},className:"inline-flex p-6 rounded-full bg-gradient-to-br from-primary to-accent shadow-lg",children:Qe.jsx(sf,{className:"h-12 w-12 text-white"})}),Qe.jsx("h3",{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Gi tr ct li ca i ng"}),Qe.jsx("div",{className:"grid sm:grid-cols-3 gap-6 pt-6",children:[{icon:km,title:"i mi",description:"Khng ngng sng to v ci tin"},{icon:sf,title:"am m",description:"Yu thng hiu Vit, kt ni cng ng"},{icon:tm,title:"Cht lng",description:"Cam kt mang n tri nghim tt nht"}].map((e,t)=>Qe.jsxs(QT.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.2+.1*t},whileHover:{scale:1.05},className:"p-6 rounded-xl bg-gradient-to-br from-background/50 to-card/30 border border-border/50 backdrop-blur-sm",children:[Qe.jsx(e.icon,{className:"h-8 w-8 mx-auto mb-3 text-primary"}),Qe.jsx("h4",{className:"font-semibold mb-2",children:e.title}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]},t))})]})})]})})]})]})}const wWe=()=>(Zj(),Qe.jsx("div",{className:"min-h-screen bg-background",children:Qe.jsxs(QT.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,ease:[.22,1,.36,1]},style:{willChange:"opacity"},children:[Qe.jsx(Bje,{}),Qe.jsx(vWe,{}),Qe.jsx(xWe,{}),Qe.jsx(bWe,{})]})}));function jWe(){const e=Yj(),t=Zj(),n=new URLSearchParams(e.search).get("code")||"",[r,i]=Ve.useState(!0),[a,s]=Ve.useState(null);return Ve.useEffect(()=>{if(!n)return i(!1),void s(!1);(async()=>{try{const e=await fetch(`http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/payment/vnpay/verify.php?code=${encodeURIComponent(n)}`,{credentials:"include"}),t=await e.json();t&&t.success&&t.paid?(s(!0),px.success("Thanh ton thnh cng")):(s(!1),px.error("Thanh ton khng thnh cng hoc cha xc nhn"))}catch(c$e){s(!1),px.error("Li khi kim tra giao dch")}finally{i(!1)}})()},[n]),r?Qe.jsx("div",{className:"py-20 text-center",children:"ang kim tra giao dch..."}):Qe.jsx("div",{className:"container mx-auto py-12 text-center",children:a?Qe.jsxs(Qe.Fragment,{children:[Qe.jsx("h1",{className:"text-2xl font-bold",children:"Thanh ton thnh cng"}),Qe.jsxs("p",{className:"mt-4",children:["M n: ",n]}),Qe.jsx("button",{className:"btn mt-6",onClick:()=>t("/"),children:"Quay v trang ch"})]}):Qe.jsxs(Qe.Fragment,{children:[Qe.jsx("h1",{className:"text-2xl font-bold",children:"Thanh ton tht bi"}),Qe.jsxs("p",{className:"mt-4",children:["M n: ",n]}),Qe.jsx("button",{className:"btn mt-6",onClick:()=>t(-1),children:"Quay li"})]})})}const NWe=()=>{const e=Zj(),[t,n]=Ve.useState(""),[r,i]=Ve.useState(""),[a,s]=Ve.useState(!0),[o,l]=Ve.useState({});Ve.useEffect(()=>{const t=new URLSearchParams(window.location.search),r=t.get("vnp_TxnRef"),a=t.get("status"),o=t.get("amount"),c=t.get("bank"),d=t.get("payDate"),u=t.get("transactionNo");if(!r||!a)return n("Thng tin giao dch khng hp l."),s(!1),void setTimeout(()=>{e("/checkout",{replace:!0})},5e3);l({orderCode:r,transactionNo:u||"",amount:o||"",bankCode:c||"",payDate:d||""}),"success"===a?(i("Thanh ton thnh cng!"),s(!1),setTimeout(()=>{e("/orders",{replace:!0})},5e3)):(n("Thanh ton khng thnh cng."),s(!1),setTimeout(()=>{e("/checkout",{replace:!0})},5e3))},[e]);return Qe.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-50 via-white to-pink-100 font-inter",children:Qe.jsxs("div",{className:"max-w-lg w-full",children:[a&&Qe.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 text-center border border-fuchsia-200/40",children:[Qe.jsxs("div",{className:"relative mb-6",children:[Qe.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-r from-purple-500 via-fuchsia-500 to-pink-500 rounded-full flex items-center justify-center shadow-lg",children:Qe.jsx(xf,{className:"animate-spin h-10 w-10 text-white"})}),Qe.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-fuchsia-500 rounded-full flex items-center justify-center shadow",children:Qe.jsx(Rm,{className:"w-4 h-4 text-white"})})]}),Qe.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-purple-500 via-fuchsia-500 to-pink-500 bg-clip-text text-transparent mb-3",children:"ang x l thanh ton"}),Qe.jsx("p",{className:"text-gray-600 mb-6",children:"Vui lng i trong giy lt, chng ti ang xc thc giao dch ca bn..."}),Qe.jsx("div",{className:"flex justify-center",children:Qe.jsxs("div",{className:"flex space-x-1",children:[Qe.jsx("div",{className:"w-2 h-2 bg-fuchsia-500 rounded-full animate-bounce"}),Qe.jsx("div",{className:"w-2 h-2 bg-fuchsia-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),Qe.jsx("div",{className:"w-2 h-2 bg-fuchsia-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]}),!a&&r&&Qe.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl overflow-hidden border border-fuchsia-200/40",children:[Qe.jsxs("div",{className:"bg-gradient-to-r from-purple-500 via-fuchsia-500 to-pink-500 p-6 text-center",children:[Qe.jsx("div",{className:"w-20 h-20 mx-auto bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center mb-4 shadow",children:Qe.jsx(Nm,{className:"w-12 h-12 text-white"})}),Qe.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:r}),Qe.jsxs("p",{className:"text-pink-100",children:["Cm n bn  mua sm ti ",Qe.jsx("span",{className:"font-bold",children:"VibeMarket"})]})]}),Qe.jsxs("div",{className:"p-6",children:[Qe.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-pink-50 rounded-xl p-4 mb-6 border border-pink-100",children:[Qe.jsxs("div",{className:"flex items-center mb-3",children:[Qe.jsx(lg,{className:"w-5 h-5 text-fuchsia-500 mr-2"}),Qe.jsx("span",{className:"font-semibold text-gray-900",children:"Chi tit giao dch"})]}),o.orderCode&&Qe.jsxs("div",{className:"space-y-3",children:[Qe.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 last:border-b-0",children:[Qe.jsx("span",{className:"text-gray-600 font-medium",children:"M n hng"}),Qe.jsx("span",{className:"font-bold text-fuchsia-500 bg-pink-100 px-3 py-1 rounded-full text-sm",children:o.orderCode})]}),o.transactionNo&&Qe.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 last:border-b-0",children:[Qe.jsx("span",{className:"text-gray-600 font-medium",children:"M giao dch"}),Qe.jsx("span",{className:"font-bold text-fuchsia-600 bg-purple-100 px-3 py-1 rounded-full text-sm",children:o.transactionNo})]}),o.amount&&Qe.jsxs("div",{className:"flex justify-between items-center py-2",children:[Qe.jsx("span",{className:"text-gray-600 font-medium",children:"S tin thanh ton"}),Qe.jsx("span",{className:"font-bold text-2xl text-pink-600",children:(c=o.amount,new Intl.NumberFormat("vi-VN").format(parseInt(c))+"")})]}),o.bankCode&&Qe.jsxs("div",{className:"flex justify-between items-center py-2",children:[Qe.jsx("span",{className:"text-gray-600 font-medium",children:"Ngn hng"}),Qe.jsx("span",{className:"font-bold text-fuchsia-600",children:o.bankCode})]}),o.payDate&&Qe.jsxs("div",{className:"flex justify-between items-center py-2",children:[Qe.jsx("span",{className:"text-gray-600 font-medium",children:"Thi gian thanh ton"}),Qe.jsx("span",{className:"font-bold text-gray-900",children:o.payDate})]})]})]}),Qe.jsxs("div",{className:"text-center",children:[Qe.jsxs("div",{className:"flex items-center justify-center text-sm text-gray-500 mb-4",children:[Qe.jsx("span",{children:"Bn s c chuyn n trang n hng trong 5 giy"}),Qe.jsx(Qp,{className:"w-4 h-4 ml-2 animate-pulse"})]}),Qe.jsx("button",{onClick:()=>e("/orders",{replace:!0}),className:"bg-gradient-to-r from-purple-500 via-fuchsia-500 to-pink-500 hover:opacity-90 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200 transform hover:scale-105 shadow-lg",children:"Xem n hng ngay"})]})]})]}),!a&&t&&Qe.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl overflow-hidden border border-red-200/50",children:[Qe.jsxs("div",{className:"bg-gradient-to-r from-red-500 via-fuchsia-500 to-pink-500 p-6 text-center",children:[Qe.jsx("div",{className:"w-20 h-20 mx-auto bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center mb-4 shadow",children:Qe.jsx(Am,{className:"w-12 h-12 text-white"})}),Qe.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Thanh ton tht bi"}),Qe.jsx("p",{className:"text-pink-100",children:" c li xy ra trong qu trnh thanh ton"})]}),Qe.jsxs("div",{className:"p-6 text-center",children:[Qe.jsx("div",{className:"bg-pink-50 border border-pink-200 rounded-xl p-4 mb-6",children:Qe.jsx("p",{className:"text-red-700 font-medium",children:t})}),Qe.jsxs("div",{className:"flex items-center justify-center text-sm text-gray-500 mb-6",children:[Qe.jsx("span",{children:"Bn s c chuyn v trang thanh ton trong 3 giy"}),Qe.jsx(Qp,{className:"w-4 h-4 ml-2 animate-pulse"})]}),Qe.jsxs("div",{className:"space-y-3",children:[Qe.jsx("button",{onClick:()=>e("/checkout",{replace:!0}),className:"w-full bg-gradient-to-r from-purple-500 via-fuchsia-500 to-pink-500 hover:opacity-90 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200 transform hover:scale-105 shadow-lg",children:"Th li thanh ton"}),Qe.jsx("button",{onClick:()=>e("/",{replace:!0}),className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-3 px-6 rounded-xl transition-all duration-200",children:"V trang ch"})]})]})]})]})});var c},_We=()=>{const[e,t]=Ve.useState(!1),n=Yj();return Ve.useEffect(()=>{const e=n.pathname.startsWith("/vendor-management/");if(["/","/callback/zalo","/callback/google","/callback/facebook","/callback/vnpay"].includes(n.pathname)||e)return void t(!1);t(!0);const r=setTimeout(()=>{t(!1)},600);return()=>clearTimeout(r)},[n.pathname]),Qe.jsx(eM,{mode:"wait",children:e&&Qe.jsxs(QT.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 z-[100] flex items-center justify-center bg-background/100 backdrop-blur-lg",children:[Qe.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[Qe.jsx(QT.div,{animate:{scale:[1,1.2,1],rotate:[0,180,360]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/20 rounded-full blur-3xl"}),Qe.jsx(QT.div,{animate:{scale:[1.2,1,1.2],rotate:[360,180,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-accent/20 rounded-full blur-3xl"})]}),Qe.jsxs("div",{className:"relative z-10 flex flex-col items-center space-y-8",children:[Qe.jsxs("div",{className:"relative",children:[Qe.jsx(QT.div,{animate:{scale:[1,1.3,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0,ease:[.22,1,.36,1]},className:"absolute inset-0 w-24 h-24 -translate-x-2 -translate-y-2 bg-gradient-to-br from-purple-500/30 via-violet-500/30 to-fuchsia-500/30 rounded-full blur-2xl"}),Qe.jsx(QT.div,{animate:{rotate:360},transition:{duration:3,repeat:1/0,ease:"linear"},className:"absolute inset-0 w-20 h-20 rounded-full",style:{background:"conic-gradient(from 0deg, transparent 0%, hsl(var(--primary)) 50%, transparent 100%)"}}),Qe.jsx(QT.div,{animate:{y:[0,-8,0]},transition:{duration:2,repeat:1/0,ease:[.22,1,.36,1]},className:"relative",children:Qe.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-primary via-accent to-emerald-600 p-0.5 shadow-2xl shadow-primary/40",children:Qe.jsx("div",{className:"w-full h-full rounded-full bg-white dark:bg-gray-900 flex items-center justify-center overflow-hidden",children:Qe.jsx(QT.img,{src:"/logo-2.png",alt:"VibeMarket Logo",className:"w-12 h-12 object-contain",animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,ease:[.22,1,.36,1]},onError:e=>{e.currentTarget.style.display="none";const t=e.currentTarget.parentElement;if(t){t.classList.remove("bg-white","dark:bg-gray-900"),t.classList.add("bg-gradient-to-br","from-primary","via-accent","to-emerald-600");const e=document.createElement("span");e.className="text-white font-black text-3xl",e.textContent="V",t.appendChild(e)}}})})})})]}),Qe.jsxs(QT.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex flex-col items-center -space-y-1",children:[Qe.jsx("span",{className:"text-3xl font-black bg-gradient-to-r from-purple-600 via-violet-500 to-fuchsia-600 bg-clip-text text-transparent tracking-tight",children:"VibeMarket"}),Qe.jsx("span",{className:"text-[10px] text-muted-foreground/60 font-bold tracking-[0.3em] uppercase",children:"Fashion & Lifestyle"})]}),Qe.jsxs("div",{className:"w-72 space-y-3",children:[Qe.jsx("div",{className:"relative h-1.5 bg-muted/30 rounded-full overflow-hidden backdrop-blur-sm",children:Qe.jsx(QT.div,{initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:1.5,repeat:1/0,ease:[.22,1,.36,1]},className:"absolute inset-y-0 w-1/3 bg-gradient-to-r from-transparent via-purple-600 to-transparent rounded-full",style:{boxShadow:"0 0 20px rgba(147, 51, 234, 0.5)"}})}),Qe.jsx("div",{className:"flex items-center justify-center space-x-2",children:[0,1,2].map(e=>Qe.jsx(QT.div,{animate:{scale:[1,1.5,1],opacity:[.3,1,.3]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut",delay:.2*e},className:"w-2 h-2 rounded-full bg-gradient-to-r from-purple-600 to-violet-500"},e))})]}),Qe.jsx(QT.p,{animate:{opacity:[.4,1,.4]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"text-sm text-muted-foreground font-semibold tracking-wide",children:"ang ti ni dung..."})]})]})})},SWe=()=>{const{pathname:e}=Yj();return Ve.useEffect(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),window.scrollTo(0,0),document.documentElement.scrollTop=0,document.body.scrollTop=0},[e]),null};var CWe,AWe,MWe,EWe,kWe={linear:function(e,t,n,r){return(n-t)*e/r+t},easeInQuad:function(e,t,n,r){return(n-t)*(e/=r)*e+t},easeOutQuad:function(e,t,n,r){return-(n-t)*(e/=r)*(e-2)+t},easeInOutQuad:function(e,t,n,r){var i=n-t;return(e/=r/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,n,r){return(n-t)*(e/=r)*e*e+t},easeOutCubic:function(e,t,n,r){return(n-t)*((e=e/r-1)*e*e+1)+t},easeInOutCubic:function(e,t,n,r){var i=n-t;return(e/=r/2)<1?i/2*e*e*e+t:i/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,n,r){return(n-t)*(e/=r)*e*e*e+t},easeOutQuart:function(e,t,n,r){return-(n-t)*((e=e/r-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,n,r){var i=n-t;return(e/=r/2)<1?i/2*e*e*e*e+t:-i/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,n,r){return(n-t)*(e/=r)*e*e*e*e+t},easeOutQuint:function(e,t,n,r){return(n-t)*((e=e/r-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,n,r){var i=n-t;return(e/=r/2)<1?i/2*e*e*e*e*e+t:i/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,n,r){var i=n-t;return-i*Math.cos(e/r*(Math.PI/2))+i+t},easeOutSine:function(e,t,n,r){return(n-t)*Math.sin(e/r*(Math.PI/2))+t},easeInOutSine:function(e,t,n,r){return-(n-t)/2*(Math.cos(Math.PI*e/r)-1)+t},easeInExpo:function(e,t,n,r){return 0==e?t:(n-t)*Math.pow(2,10*(e/r-1))+t},easeOutExpo:function(e,t,n,r){var i=n-t;return e==r?t+i:i*(1-Math.pow(2,-10*e/r))+t},easeInOutExpo:function(e,t,n,r){var i=n-t;return 0===e?t:e===r?t+i:(e/=r/2)<1?i/2*Math.pow(2,10*(e-1))+t:i/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(e,t,n,r){return-(n-t)*(Math.sqrt(1-(e/=r)*e)-1)+t},easeOutCirc:function(e,t,n,r){return(n-t)*Math.sqrt(1-(e=e/r-1)*e)+t},easeInOutCirc:function(e,t,n,r){var i=n-t;return(e/=r/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+t:i/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,n,r){var i,a,s,o=n-t;return s=1.70158,0===e?t:1===(e/=r)?t+o:((a=0)||(a=.3*r),(i=o)<Math.abs(o)?(i=o,s=a/4):s=a/(2*Math.PI)*Math.asin(o/i),-i*Math.pow(2,10*(e-=1))*Math.sin((e*r-s)*(2*Math.PI)/a)+t)},easeOutElastic:function(e,t,n,r){var i,a,s,o=n-t;return s=1.70158,0===e?t:1===(e/=r)?t+o:((a=0)||(a=.3*r),(i=o)<Math.abs(o)?(i=o,s=a/4):s=a/(2*Math.PI)*Math.asin(o/i),i*Math.pow(2,-10*e)*Math.sin((e*r-s)*(2*Math.PI)/a)+o+t)},easeInOutElastic:function(e,t,n,r){var i,a,s,o=n-t;return s=1.70158,0===e?t:2==(e/=r/2)?t+o:((a=0)||(a=r*(.3*1.5)),(i=o)<Math.abs(o)?(i=o,s=a/4):s=a/(2*Math.PI)*Math.asin(o/i),e<1?i*Math.pow(2,10*(e-=1))*Math.sin((e*r-s)*(2*Math.PI)/a)*-.5+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*r-s)*(2*Math.PI)/a)*.5+o+t)},easeInBack:function(e,t,n,r,i){return void 0===i&&(i=1.70158),(n-t)*(e/=r)*e*((i+1)*e-i)+t},easeOutBack:function(e,t,n,r,i){return void 0===i&&(i=1.70158),(n-t)*((e=e/r-1)*e*((i+1)*e+i)+1)+t},easeInOutBack:function(e,t,n,r,i){var a=n-t;return void 0===i&&(i=1.70158),(e/=r/2)<1?a/2*(e*e*((1+(i*=1.525))*e-i))+t:a/2*((e-=2)*e*((1+(i*=1.525))*e+i)+2)+t},easeInBounce:function(e,t,n,r){var i=n-t;return i-kWe.easeOutBounce(r-e,0,i,r)+t},easeOutBounce:function(e,t,n,r){var i=n-t;return(e/=r)<1/2.75?i*(7.5625*e*e)+t:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+t:i*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(e,t,n,r){var i=n-t;return e<r/2?.5*kWe.easeInBounce(2*e,0,i,r)+t:.5*kWe.easeOutBounce(2*e-r,0,i,r)+.5*i+t}},TWe=kWe;function PWe(e,t){return e+Math.random()*(t-e)}(AWe=CWe||(CWe={}))[AWe.Circle=0]="Circle",AWe[AWe.Square=1]="Square",AWe[AWe.Strip=2]="Strip",(EWe=MWe||(MWe={}))[EWe.Positive=1]="Positive",EWe[EWe.Negative=-1]="Negative";const OWe=1e3/60;class RWe{constructor(e,t,n,r){this.getOptions=t;const{colors:i,initialVelocityX:a,initialVelocityY:s}=this.getOptions();var o,l;this.context=e,this.x=n,this.y=r,this.w=PWe(5,20),this.h=PWe(5,20),this.radius=PWe(5,10),this.vx="number"==typeof a?PWe(-a,a):PWe(a.min,a.max),this.vy="number"==typeof s?PWe(-s,0):PWe(s.min,s.max),this.shape=(o=0,l=2,Math.floor(o+Math.random()*(l-o+1))),this.angle=PWe(0,360)*Math.PI/180,this.angularSpin=PWe(-.2,.2),this.color=i[Math.floor(Math.random()*i.length)],this.rotateY=PWe(0,1),this.rotationDirection=PWe(0,1)?MWe.Positive:MWe.Negative}update(e){const{gravity:t,wind:n,friction:r,opacity:i,drawShape:a}=this.getOptions(),s=e/OWe;this.x+=this.vx*s,this.y+=this.vy*s,this.vy+=t*s,this.vx+=n*s,this.vx*=r**s,this.vy*=r**s,this.rotateY>=1&&this.rotationDirection===MWe.Positive?this.rotationDirection=MWe.Negative:this.rotateY<=-1&&this.rotationDirection===MWe.Negative&&(this.rotationDirection=MWe.Positive);const o=.1*this.rotationDirection*s;if(this.rotateY+=o,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=i,this.context.lineCap="round",this.context.lineWidth=2,a&&"function"==typeof a)a.call(this,this.context);else switch(this.shape){case CWe.Circle:this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break;case CWe.Square:this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break;case CWe.Strip:this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h)}this.context.closePath(),this.context.restore()}}class IWe{constructor(e,t){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=e=>{this.particles.splice(e,1)},this.getParticle=()=>{const e=PWe(this.x,this.w+this.x),t=PWe(this.y,this.h+this.y);return new RWe(this.context,this.getOptions,e,t)},this.animate=e=>{const{canvas:t,context:n,particlesGenerated:r,lastNumberOfPieces:i}=this,{run:a,recycle:s,numberOfPieces:o,debug:l,tweenFunction:c,tweenDuration:d}=this.getOptions();if(!a)return!1;const u=this.particles.length,h=s?u:r;if(h<o){i!==o&&(this.tweenProgress=0,this.tweenFrom=h,this.lastNumberOfPieces=o),this.tweenProgress=Math.min(d,Math.max(0,this.tweenProgress+e));const t=c(this.tweenProgress,this.tweenFrom,o,d),n=Math.round(t-h);for(let e=0;e<n;e++)this.particles.push(this.getParticle());this.particlesGenerated+=n}l&&(n.font="12px sans-serif",n.fillStyle="#333",n.textAlign="right",n.fillText(`Particles: ${u}`,t.width-10,t.height-20));for(let p=this.particles.length-1;p>=0;p--){const n=this.particles[p];n.update(e),(n.y>t.height||n.y<-100||n.x>t.width+100||n.x<-100)&&(s&&h<=o?this.particles[p]=this.getParticle():this.removeParticleAt(p))}return u>0||h<o},this.canvas=e;const n=this.canvas.getContext("2d");if(!n)throw new Error("Could not get canvas context");this.context=n,this.getOptions=t}}const DWe={width:"undefined"!=typeof window?window.innerWidth:300,height:"undefined"!=typeof window?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:TWe.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class LWe{constructor(e,t){this.lastFrameTime=0,this.setOptionsWithDefaults=e=>{const t={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...t,...DWe,...e},Object.assign(this,e.confettiSource)},this.update=(e=0)=>{const{options:{run:t,onConfettiComplete:n,frameRate:r},canvas:i,context:a}=this,s=Math.min(e-this.lastFrameTime,50);r&&s<1e3/r?this.rafId=requestAnimationFrame(this.update):(this.lastFrameTime=e-(r?s%r:0),t&&(a.fillStyle="white",a.clearRect(0,0,i.width,i.height)),this.generator.animate(s)?this.rafId=requestAnimationFrame(this.update):(n&&"function"==typeof n&&this.generator.particlesGenerated>0&&n.call(this,this),this._options.run=!1))},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const n=this.canvas.getContext("2d");if(!n)throw new Error("Could not get canvas context");this.context=n,this.generator=new IWe(this.canvas,()=>this.options),this.options=t,this.update()}get options(){return this._options}set options(e){var t,n;const r=null==(t=this._options)?void 0:t.run,i=null==(n=this._options)?void 0:n.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),"boolean"==typeof e.recycle&&e.recycle&&!1===i&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),"boolean"==typeof e.run&&e.run&&!1===r&&this.update()}}const BWe=Ge.createRef();class FWe extends Ge.Component{constructor(e){super(e),this.canvas=Ge.createRef(),this.canvas=e.canvasRef||BWe}componentDidMount(){if(this.canvas.current){const e=UWe(this.props)[0];this.confetti=new LWe(this.canvas.current,e)}}componentDidUpdate(){const e=UWe(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,t]=UWe(this.props),n={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...t.style};return Qe.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...t,style:n})}}function UWe(e){const t={},n={},r=[...Object.keys(DWe),"confettiSource","drawShape","onConfettiComplete","frameRate"],i=["canvasRef"];for(const a in e){const s=e[a];r.includes(a)?t[a]=s:i.includes(a)?i[a]=s:n[a]=s}return[t,n,{}]}FWe.defaultProps={...DWe},FWe.displayName="ReactConfetti";const zWe=Ge.forwardRef((e,t)=>Qe.jsx(FWe,{canvasRef:t,...e}));var HWe="undefined"!=typeof window,VWe=function(e){var t,n=Ve.useRef(e);n.current=e,t=function(){return function(){return n.current()}},Ve.useEffect(t,[])},GWe=function(e){var t={},n=t.initialWidth,r=void 0===n?1/0:n,i=t.initialHeight,a=void 0===i?1/0:i,s=t.onChange,o=function(e){var t=Ve.useRef(0),n=Ve.useState(e),r=n[0],i=n[1],a=Ve.useCallback(function(e){cancelAnimationFrame(t.current),t.current=requestAnimationFrame(function(){i(e)})},[]);return VWe(function(){cancelAnimationFrame(t.current)}),[r,a]}({width:HWe?window.innerWidth:r,height:HWe?window.innerHeight:a}),l=o[0],c=o[1];return Ve.useEffect(function(){if(HWe){var e=function(){var e=window.innerWidth,t=window.innerHeight;c({width:e,height:t}),s&&s(e,t)};return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}(window,"resize",e),function(){!function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}(window,"resize",e)}}},[]),l};const WWe=[{id:"1",name:"Voucher 50K",icon:"",value:"50,000",description:"Gim 50K cho n t 500K",rarity:"common",color:"#8B5CF6"},{id:"2",name:"Freeship",icon:"",value:"30,000",description:"Min ph vn chuyn",rarity:"common",color:"#06B6D4"},{id:"3",name:"Voucher 100K",icon:"",value:"100,000",description:"Gim 100K cho n t 1 triu",rarity:"rare",color:"#8B5CF6"},{id:"4",name:"Xu Vibe",icon:"",value:"1,000 xu",description:"Tch lu  i qu",rarity:"common",color:"#06B6D4"},{id:"5",name:"Voucher 200K",icon:"",value:"200,000",description:"Gim 200K cho n t 2 triu",rarity:"epic",color:"#8B5CF6"},{id:"6",name:"Thm lt quay",icon:"",value:"+1 lt",description:"Thm 1 lt quay hm nay",rarity:"rare",color:"#06B6D4"},{id:"7",name:"Voucher 500K",icon:"",value:"500,000",description:"Gim 500K cho n t 5 triu",rarity:"legendary",color:"#8B5CF6"},{id:"8",name:"Chc may mn",icon:"",value:"Ln sau nh",description:"Hy th li vo ngy mai!",rarity:"common",color:"#06B6D4"}],KWe=e=>{localStorage.setItem("luckyWheelData",JSON.stringify(e))},qWe={gift:Zm,tag:xg,star:fg,percent:zf,coffee:Tm,heart:sf,zap:zg,pin:jf,sparkles:pg},XWe=[{primary:"#8B5CF6",secondary:"#A855F7"},{primary:"#7C3AED",secondary:"#8B5CF6"},{primary:"#6D28D9",secondary:"#7C3AED"},{primary:"#5B21B6",secondary:"#6D28D9"}],$We=({prizes:e,onSpinComplete:t,isSpinning:n,spinsLeft:r,onStart:i,onEnd:a})=>{const s=function(){const e=IN(SP);return LN(e.mount,[]),e}(),o=Ve.useRef(0);return Qe.jsxs("div",{className:"relative flex flex-col items-center justify-center p-6",children:[Qe.jsx(QT.div,{className:"absolute w-[520px] h-[520px] rounded-full bg-gradient-to-r from-primary/40 via-purple-600/40 to-primary/40 blur-3xl",animate:{scale:[1,1.1,1],opacity:[.4,.6,.4]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),Qe.jsx(QT.div,{className:"absolute w-[500px] h-[500px] rounded-full border-4 border-primary/20",animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"}}),Qe.jsx("div",{className:"absolute top-[8px] z-30",children:Qe.jsx(QT.div,{animate:{y:[0,5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:Qe.jsx("div",{className:"w-0 h-0 border-l-[20px] border-r-[20px] border-t-[50px]\r\n                        border-l-transparent border-r-transparent border-t-primary\r\n                        drop-shadow-[0_6px_12px_rgba(139,92,246,0.6)]",style:{filter:"drop-shadow(0 0 10px rgba(139,92,246,0.8))"}})})}),Qe.jsxs("div",{className:"relative w-[340px] h-[340px] md:w-[420px] md:h-[420px] lg:w-[480px] lg:h-[480px]",children:[Qe.jsx(QT.div,{animate:s,className:"absolute inset-0",style:{transformOrigin:"center",willChange:"transform",backfaceVisibility:"hidden"},children:Qe.jsxs("svg",{viewBox:"0 0 400 400",className:"w-full h-full drop-shadow-2xl",children:[Qe.jsxs("defs",{children:[Qe.jsxs("radialGradient",{id:"wheelGradient",cx:"50%",cy:"50%",r:"50%",children:[Qe.jsx("stop",{offset:"0%",stopColor:"#ffffff"}),Qe.jsx("stop",{offset:"60%",stopColor:"#f3e8ff"}),Qe.jsx("stop",{offset:"100%",stopColor:"#a855f7"})]}),XWe.map((e,t)=>Qe.jsxs("linearGradient",{id:`segmentGradient${t}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[Qe.jsx("stop",{offset:"0%",stopColor:e.primary}),Qe.jsx("stop",{offset:"100%",stopColor:e.secondary})]},t)),Qe.jsxs("filter",{id:"glow",children:[Qe.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),Qe.jsxs("feMerge",{children:[Qe.jsx("feMergeNode",{in:"coloredBlur"}),Qe.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),Qe.jsx("circle",{cx:"200",cy:"200",r:"195",fill:"url(#wheelGradient)",stroke:"#8B5CF6",strokeWidth:"3"}),Qe.jsx("circle",{cx:"200",cy:"200",r:"180",fill:"none",stroke:"#a855f7",strokeWidth:"1",opacity:"0.3"}),e.map((t,n)=>{const r=360/e.length,i=(n*r-90)*(Math.PI/180),a=((n+1)*r-90)*(Math.PI/180),s=((n+.5)*r-90)*(Math.PI/180),o=200+180*Math.cos(i),l=200+180*Math.sin(i),c=200+180*Math.cos(a),d=200+180*Math.sin(a),u=r>180?1:0,h=200+120*Math.cos(s),p=200+120*Math.sin(s),m=200+95*Math.cos(s),f=200+95*Math.sin(s),g=t.icon&&"string"==typeof t.icon?qWe[t.icon.toLowerCase()]:null,v="segmentGradient"+n%XWe.length;return Qe.jsxs("g",{children:[Qe.jsx("path",{d:`M 200 200 L ${o} ${l} A 180 180 0 ${u} 1 ${c} ${d} Z`,fill:`url(#${v})`,stroke:"white",strokeWidth:"3",opacity:"0.95",filter:"url(#glow)"}),g?Qe.jsx("foreignObject",{x:m-14,y:f-14,width:28,height:28,style:{overflow:"visible"},children:Qe.jsx("div",{xmlns:"http://www.w3.org/1999/xhtml",className:"flex items-center justify-center",children:Qe.jsx(g,{className:"w-7 h-7 text-white drop-shadow-lg"})})}):Qe.jsx("text",{x:m,y:f,textAnchor:"middle",dominantBaseline:"middle",fontSize:"28",fill:"white",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.3))"},children:t.icon}),Qe.jsx("text",{x:h,y:p,textAnchor:"middle",dominantBaseline:"middle",fontSize:"13",fontWeight:"700",fill:"white",transform:`rotate(${n*r+r/2}, ${h}, ${p})`,style:{textShadow:"0 2px 8px rgba(0,0,0,0.5)",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.3))"},children:t.name})]},t.id)}),Qe.jsx("defs",{children:Qe.jsxs("radialGradient",{id:"centerGradient",cx:"50%",cy:"50%",r:"50%",children:[Qe.jsx("stop",{offset:"0%",stopColor:"#ffffff"}),Qe.jsx("stop",{offset:"100%",stopColor:"#f3e8ff"})]})}),Qe.jsx("circle",{cx:"200",cy:"200",r:"60",fill:"url(#centerGradient)",stroke:"#8B5CF6",strokeWidth:"4",filter:"url(#glow)"})]})}),Qe.jsx(QT.button,{onClick:async()=>{if(n||r<=0)return;null==i||i();const l=Math.floor(Math.random()*e.length),c=e[l],d=((e,t)=>1800-(e+.5)*(360/t.length))(l,e),u=o.current+d;o.current=u,await s.start({rotate:u,transition:{duration:4,ease:[.22,1,.36,1]}}),await s.start({rotate:u,transition:{type:"spring",stiffness:400,damping:30,mass:1,duration:.5}}),null==a||a(c),t(c)},disabled:n||r<=0,whileHover:!n&&r>0?{scale:1.15,rotate:5}:{},whileTap:!n&&r>0?{scale:.9,rotate:-5}:{},animate:{boxShadow:n?["0 0 20px rgba(139,92,246,0.6)","0 0 40px rgba(139,92,246,0.8)","0 0 20px rgba(139,92,246,0.6)"]:"0 0 30px rgba(139,92,246,0.8)"},transition:{boxShadow:{duration:1.5,repeat:1/0,ease:"easeInOut"}},className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 \r\n                     w-24 h-24 md:w-28 md:h-28 rounded-full text-white \r\n                     font-extrabold text-base bg-gradient-to-br \r\n                     from-primary via-purple-600 to-primary\r\n                     shadow-2xl flex flex-col items-center justify-center\r\n                     z-20 disabled:opacity-50 disabled:cursor-not-allowed\r\n                     border-4 border-white/30",style:{backgroundSize:"200% 200%",animation:"gradient-shift 3s ease infinite"},children:n?Qe.jsxs("div",{className:"animate-pulse text-xs text-center leading-tight",children:[Qe.jsx(pg,{className:"w-5 h-5 mx-auto mb-1 animate-spin"}),Qe.jsx("span",{className:"block",children:"ANG"}),Qe.jsx("span",{className:"block",children:"QUAY..."})]}):r<=0?Qe.jsxs("div",{className:"text-xs text-center leading-tight opacity-60",children:[Qe.jsx("span",{className:"block text-lg",children:""}),Qe.jsx("span",{className:"block",children:"HT"}),Qe.jsx("span",{className:"block",children:"LT"})]}):Qe.jsxs(QT.div,{className:"flex flex-col items-center",animate:{y:[0,-3,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:[Qe.jsx(pg,{className:"w-5 h-5 mb-1 text-white"}),Qe.jsx("span",{className:"block text-sm",children:"QUAY"}),Qe.jsx("span",{className:"block text-sm",children:"NGAY"})]})}),[...Array(8)].map((e,t)=>Qe.jsx(QT.div,{className:"absolute w-2 h-2 bg-primary rounded-full",style:{top:50+45*Math.cos(45*t*Math.PI/180)+"%",left:50+45*Math.sin(45*t*Math.PI/180)+"%"},animate:{scale:[0,1,0],opacity:[0,1,0]},transition:{duration:2,repeat:1/0,delay:.25*t,ease:"easeInOut"}},t))]}),Qe.jsx("style",{children:"\n                @keyframes gradient-shift {\n                    0%, 100% {\n                        background-position: 0% 50%;\n                    }\n                    50% {\n                        background-position: 100% 50%;\n                    }\n                }\n            "})]})},YWe={gift:Zm,tag:xg,star:fg,percent:zf,coffee:Tm,heart:sf,zap:zg,pin:jf,sparkles:pg},JWe=({isOpen:e,onClose:t,prize:n})=>{if(!n)return null;const r="string"==typeof n.icon?YWe[n.icon.toLowerCase()]:null,i=parseInt(n.value.replace(/[^\d]/g,""))||0,a=i>=5e4,s=i>=1e5;return Qe.jsx(FR,{open:e,onOpenChange:t,children:Qe.jsx(VR,{className:"sm:max-w-lg border-0 p-0 overflow-hidden bg-transparent",children:Qe.jsx(QT.div,{initial:{scale:.5,opacity:0,y:50},animate:{scale:1,opacity:1,y:0},exit:{scale:.5,opacity:0,y:50},transition:{type:"spring",duration:.6},children:Qe.jsxs(DP,{className:"border-0 shadow-2xl overflow-hidden relative",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/20 via-purple-600/20 to-primary/20"}),Qe.jsx(QT.div,{className:`absolute inset-0 bg-gradient-to-br ${s?"from-amber-500/30 via-orange-500/30 to-amber-500/30":a?"from-green-500/30 via-emerald-500/30 to-green-500/30":"from-primary/30 via-purple-600/30 to-primary/30"} blur-3xl`,animate:{scale:[1,1.2,1],opacity:[.3,.5,.3],rotate:[0,180,360]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1.5 bg-gradient-to-r "+(s?"from-amber-500 via-orange-500 to-amber-500":a?"from-green-500 via-emerald-500 to-green-500":"from-primary via-purple-600 to-primary")}),[...Array(12)].map((e,t)=>Qe.jsx(QT.div,{className:"absolute w-2 h-2 rounded-full "+(s?"bg-amber-500/60":"bg-primary/60"),style:{top:100*Math.random()+"%",left:100*Math.random()+"%"},animate:{y:[0,-30,0],opacity:[0,1,0],scale:[0,1.5,0]},transition:{duration:2+Math.random(),repeat:1/0,delay:2*Math.random(),ease:"easeInOut"}},t)),Qe.jsxs(UP,{className:"p-8 relative",children:[Qe.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6",children:[Qe.jsxs(eM,{children:[s&&Qe.jsx(QT.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",delay:.2},children:Qe.jsxs(EP,{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white border-0 shadow-lg px-3 py-1",children:[Qe.jsx(Im,{className:"w-4 h-4 mr-1"}),"Siu Phm"]})}),a&&!s&&Qe.jsx(QT.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",delay:.2},children:Qe.jsxs(EP,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white border-0 shadow-lg px-3 py-1",children:[Qe.jsx(pg,{className:"w-4 h-4 mr-1"}),"Gi tr cao"]})})]}),Qe.jsx(QT.div,{initial:{scale:0,rotate:180},animate:{scale:1,rotate:0},transition:{type:"spring",delay:.3},children:Qe.jsxs(EP,{className:"bg-primary/20 text-primary border border-primary/30 px-3 py-1",children:[Qe.jsx(Bf,{className:"w-4 h-4 mr-1"}),"Chc mng"]})})]}),Qe.jsxs(QT.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200,damping:15,delay:.1},className:"relative mb-6",children:[Qe.jsx(QT.div,{className:"absolute inset-0 blur-3xl "+(s?"bg-gradient-to-r from-amber-500/60 to-orange-500/60":a?"bg-gradient-to-r from-green-500/60 to-emerald-500/60":"bg-gradient-to-r from-primary/60 to-purple-600/60"),animate:{scale:[1,1.3,1],opacity:[.6,.9,.6]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),Qe.jsxs(QT.div,{animate:{rotate:[0,-10,10,-10,10,0],scale:[1,1.1,1,1.1,1,1]},transition:{duration:.8,repeat:3,ease:"easeInOut",delay:.3},className:"relative",children:[Qe.jsx(QT.div,{animate:{rotate:360},transition:{duration:3,repeat:1/0,ease:"linear"},className:"absolute inset-0 rounded-full border-4 "+(s?"border-amber-500/30":a?"border-green-500/30":"border-primary/30")}),Qe.jsx("div",{className:`relative mx-auto w-32 h-32 rounded-full bg-gradient-to-br ${s?"from-amber-500/20 to-orange-500/20":a?"from-green-500/20 to-emerald-500/20":"from-primary/20 to-purple-600/20"} flex items-center justify-center border-4 ${s?"border-amber-500/40":a?"border-green-500/40":"border-primary/40"} shadow-2xl`,children:r?Qe.jsx(r,{className:"w-16 h-16 "+(s?"text-amber-500":a?"text-green-500":"text-primary")}):Qe.jsx("span",{className:"text-7xl",children:(n.icon,n.icon)})})]}),[...Array(6)].map((e,t)=>Qe.jsx(QT.div,{className:"absolute",style:{top:"50%",left:"50%"},animate:{rotate:360},transition:{duration:4+t,repeat:1/0,ease:"linear",delay:.2*t},children:Qe.jsx(QT.div,{style:{x:80*Math.cos(60*t*Math.PI/180),y:80*Math.sin(60*t*Math.PI/180)},animate:{scale:[0,1,0],opacity:[0,1,0]},transition:{duration:2,repeat:1/0,delay:.3*t},children:Qe.jsx(fg,{className:`w-4 h-4 ${s?"text-amber-500":"text-primary"} fill-current`})})},t))]}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:Qe.jsx(KR,{className:"text-3xl md:text-4xl font-bold mb-3 text-center bg-gradient-to-r from-primary via-purple-600 to-primary bg-clip-text text-transparent",children:"Chc mng bn! "})}),Qe.jsx(QT.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.5},children:Qe.jsx(DP,{className:"mb-6 border-2 "+(s?"border-amber-500/30 bg-gradient-to-br from-amber-500/10 to-orange-500/10":a?"border-green-500/30 bg-gradient-to-br from-green-500/10 to-emerald-500/10":"border-primary/30 bg-gradient-to-br from-primary/10 to-purple-600/10"),children:Qe.jsxs(UP,{className:"p-6 text-center space-y-3",children:[Qe.jsx(qR,{className:"text-lg text-foreground",children:"Bn  trng gii:"}),Qe.jsx("h3",{className:"text-2xl font-bold text-foreground",children:n.name}),Qe.jsx(QT.div,{animate:{scale:[1,1.05,1]},transition:{duration:1,repeat:1/0},className:`inline-block px-6 py-3 rounded-full bg-gradient-to-r ${s?"from-amber-500 to-orange-500":a?"from-green-500 to-emerald-500":"from-primary to-purple-600"} text-white font-bold text-2xl shadow-lg`,children:n.value}),Qe.jsx("p",{className:"text-muted-foreground text-sm pt-2",children:n.description})]})})}),Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"space-y-3",children:[Qe.jsxs(AP,{className:"w-full h-14 text-lg font-bold shadow-xl bg-gradient-to-r "+(s?"from-amber-500 via-orange-500 to-amber-500 hover:from-amber-600 hover:to-orange-600":a?"from-green-500 via-emerald-500 to-green-500 hover:from-green-600 hover:to-emerald-600":"from-primary via-purple-600 to-primary hover:from-purple-700 hover:to-cyan-600"),onClick:()=>{px.success(" nhn thng thnh cng!",{description:`${n.value}  c thm vo v ca bn`,action:{label:"Xem ngay",onClick:()=>window.location.href="/wallet"}}),t()},children:[Qe.jsx(gm,{className:"w-6 h-6 mr-2"}),"Nhn thng ngay",Qe.jsx(pg,{className:"w-6 h-6 ml-2"})]}),Qe.jsxs("div",{className:"flex gap-3",children:[Qe.jsxs(AP,{variant:"outline",className:"flex-1 h-12 border-2 hover:border-primary hover:bg-primary/5",onClick:()=>{px.success(" sao chp link chia s!")},children:[Qe.jsx(ig,{className:"w-5 h-5 mr-2"}),"Chia s"]}),Qe.jsx(AP,{variant:"outline",className:"flex-1 h-12 border-2 hover:border-primary hover:bg-primary/5",onClick:t,children:"ng"})]})]}),Qe.jsxs(QT.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"text-center text-xs text-muted-foreground mt-6 flex items-center justify-center gap-2",children:[Qe.jsx(fg,{className:"w-4 h-4 text-amber-500"}),"Phn thng s c thm vo v ca bn"]})]})]})})})})},ZWe={common:{gradient:"from-gray-500 to-gray-600",borderColor:"border-gray-500/30",bgGradient:"from-gray-500/10 to-gray-600/10",glowColor:"gray-500/40",label:"Ph bin",icon:Zm},rare:{gradient:"from-blue-500 to-cyan-500",borderColor:"border-blue-500/30",bgGradient:"from-blue-500/10 to-cyan-500/10",glowColor:"blue-500/40",label:"Him",icon:fg},epic:{gradient:"from-purple-500 to-pink-500",borderColor:"border-purple-500/30",bgGradient:"from-purple-500/10 to-pink-500/10",glowColor:"purple-500/40",label:"Siu him",icon:Jm},legendary:{gradient:"from-amber-500 to-orange-500",borderColor:"border-amber-500/30",bgGradient:"from-amber-500/10 to-orange-500/10",glowColor:"amber-500/40",label:"Huyn thoi",icon:Im}},QWe=({prizes:e})=>{var t,n,r;const i=e.reduce((e,t)=>(e[t.rarity]||(e[t.rarity]=[]),e[t.rarity].push(t),e),{});return Qe.jsx("section",{className:"mt-16",children:Qe.jsxs(QT.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:"max-w-7xl mx-auto",children:[Qe.jsxs(DP,{className:"border-border/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-xl shadow-xl overflow-hidden mb-8",children:[Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary via-purple-600 to-primary"}),Qe.jsx(UP,{className:"p-8",children:Qe.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[Qe.jsxs("div",{className:"flex items-center gap-4",children:[Qe.jsx(QT.div,{animate:{rotate:360},transition:{duration:3,repeat:1/0,ease:"linear"},className:"p-3 rounded-xl bg-gradient-to-br from-primary to-purple-600 shadow-lg",children:Qe.jsx(Zm,{className:"w-6 h-6 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx("h2",{className:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-primary via-purple-600 to-primary bg-clip-text text-transparent",children:"Kho Phn Thng"}),Qe.jsxs("p",{className:"text-muted-foreground",children:[e.length," phn qu ang ch bn khm ph"]})]})]}),Qe.jsxs("div",{className:"flex flex-wrap gap-3",children:[Qe.jsxs(EP,{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white border-0 shadow-lg px-4 py-2",children:[Qe.jsx(Im,{className:"w-4 h-4 mr-2"}),(null==(t=i.legendary)?void 0:t.length)||0," Huyn thoi"]}),Qe.jsxs(EP,{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white border-0 shadow-lg px-4 py-2",children:[Qe.jsx(Jm,{className:"w-4 h-4 mr-2"}),(null==(n=i.epic)?void 0:n.length)||0," Siu him"]}),Qe.jsxs(EP,{className:"bg-gradient-to-r from-blue-500 to-cyan-500 text-white border-0 shadow-lg px-4 py-2",children:[Qe.jsx(fg,{className:"w-4 h-4 mr-2"}),(null==(r=i.rare)?void 0:r.length)||0," Him"]})]})]})})]}),Qe.jsx("div",{className:"space-y-8",children:["legendary","epic","rare","common"].map(e=>{const t=i[e];if(!t||0===t.length)return null;const n=ZWe[e],r=n.icon;return Qe.jsxs(QT.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.1},children:[Qe.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Qe.jsx("div",{className:`p-2 rounded-lg bg-gradient-to-r ${n.gradient} shadow-lg`,children:Qe.jsx(r,{className:"w-5 h-5 text-white"})}),Qe.jsx("h3",{className:"text-xl font-bold",children:n.label}),Qe.jsxs(EP,{className:`bg-gradient-to-r ${n.gradient} text-white border-0`,children:[t.length," phn qu"]})]}),Qe.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:t.map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.05*t},whileHover:{scale:1.05,y:-8},className:"group",children:Qe.jsxs(DP,{className:`relative overflow-hidden border-2 ${n.borderColor} bg-gradient-to-br ${n.bgGradient} backdrop-blur-sm hover:shadow-2xl transition-all duration-300`,children:[Qe.jsx(QT.div,{className:`absolute inset-0 bg-gradient-to-br ${n.gradient} opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-300`,animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),Qe.jsx("div",{className:`absolute top-0 left-0 right-0 h-1 bg-gradient-to-r ${n.gradient}`}),Qe.jsx("div",{className:"absolute top-2 right-2 z-10",children:Qe.jsxs(EP,{className:`bg-gradient-to-r ${n.gradient} text-white border-0 shadow-lg text-xs px-2 py-1`,children:[Qe.jsx(r,{className:"w-3 h-3 mr-1"}),n.label]})}),Qe.jsxs(UP,{className:"p-6 text-center relative",children:[Qe.jsxs(QT.div,{animate:{rotate:[0,-10,10,-10,10,0]},transition:{duration:2,repeat:1/0,repeatDelay:3},className:"relative mb-4",children:[Qe.jsx(QT.div,{className:`absolute inset-0 bg-gradient-to-r ${n.gradient} blur-2xl opacity-50`,animate:{scale:[1,1.3,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),Qe.jsx("div",{className:"relative text-6xl",children:e.icon})]}),Qe.jsx("h3",{className:"font-bold text-foreground mb-2 text-sm md:text-base group-hover:text-primary transition-colors line-clamp-2",children:e.name}),Qe.jsx(QT.div,{whileHover:{scale:1.1},className:`inline-block px-3 py-1.5 rounded-full bg-gradient-to-r ${n.gradient} text-white font-bold text-sm shadow-lg mb-2`,children:e.value}),Qe.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:e.description}),Qe.jsx(QT.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent",initial:{x:"-100%"},animate:{x:"200%"},transition:{duration:2,repeat:1/0,repeatDelay:3,ease:"easeInOut"}})]}),[...Array(4)].map((e,t)=>Qe.jsx(QT.div,{className:`absolute w-1 h-1 bg-gradient-to-r ${n.gradient} rounded-full opacity-0 group-hover:opacity-100`,style:{top:25+25*t+"%",left:10+20*t+"%"},animate:{y:[0,-20,0],opacity:[0,1,0]},transition:{duration:1.5,repeat:1/0,delay:.2*t}},t))]})},e.id))})]},e)})}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mt-8",children:Qe.jsx(DP,{className:"border-border/50 bg-gradient-to-br from-primary/10 via-purple-600/10 to-primary/10 backdrop-blur-sm",children:Qe.jsxs(UP,{className:"p-6 text-center",children:[Qe.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[Qe.jsx(pg,{className:"w-6 h-6 text-primary"}),Qe.jsx("h4",{className:"font-bold text-lg",children:"B quyt tng t l trng"}),Qe.jsx(Sg,{className:"w-6 h-6 text-primary"})]}),Qe.jsxs("p",{className:"text-sm text-muted-foreground max-w-2xl mx-auto",children:["Phn thng ",Qe.jsx("span",{className:"font-semibold text-foreground",children:"Huyn thoi"})," v"," ",Qe.jsx("span",{className:"font-semibold text-foreground",children:"Siu him"})," c t l trng thp hn nhng gi tr cao gp nhiu ln! Hy kin nhn v may mn s n vi bn! "]})]})})})]})})};function eKe(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function tKe(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const nKe=6048e5;let rKe={};function iKe(){return rKe}function aKe(e,t){var n,r,i,a;const s=iKe(),o=(null==t?void 0:t.weekStartsOn)??(null==(r=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:r.weekStartsOn)??s.weekStartsOn??(null==(a=null==(i=s.locale)?void 0:i.options)?void 0:a.weekStartsOn)??0,l=eKe(e),c=l.getDay(),d=(c<o?7:0)+c-o;return l.setDate(l.getDate()-d),l.setHours(0,0,0,0),l}function sKe(e){return aKe(e,{weekStartsOn:1})}function oKe(e){const t=eKe(e),n=t.getFullYear(),r=tKe(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=sKe(r),a=tKe(e,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const s=sKe(a);return t.getTime()>=i.getTime()?n+1:t.getTime()>=s.getTime()?n:n-1}function lKe(e){const t=eKe(e);return t.setHours(0,0,0,0),t}function cKe(e){const t=eKe(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function dKe(e){if(!(t=e,t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)||"number"==typeof e))return!1;var t;const n=eKe(e);return!isNaN(Number(n))}const uKe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function hKe(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const pKe={date:hKe({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:hKe({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:hKe({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},mKe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function fKe(e){return(t,n)=>{let r;if("formatting"===((null==n?void 0:n.context)?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,i=(null==n?void 0:n.width)?String(n.width):t;r=e.formattingValues[i]||e.formattingValues[t]}else{const t=e.defaultWidth,i=(null==n?void 0:n.width)?String(n.width):e.defaultWidth;r=e.values[i]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}const gKe={ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:fKe({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:fKe({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:fKe({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:fKe({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:fKe({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function vKe(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;const s=a[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(o,e=>e.test(s)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(o,e=>e.test(s));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(s.length)}}}const xKe={ordinalNumber:(yKe={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const n=e.match(yKe.matchPattern);if(!n)return null;const r=n[0],i=e.match(yKe.parsePattern);if(!i)return null;let a=yKe.valueCallback?yKe.valueCallback(i[0]):i[0];return a=t.valueCallback?t.valueCallback(a):a,{value:a,rest:e.slice(r.length)}}),era:vKe({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:vKe({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:vKe({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:vKe({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:vKe({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var yKe;const bKe={code:"en-US",formatDistance:(e,t,n)=>{let r;const i=uKe[e];return r="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),(null==n?void 0:n.addSuffix)?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:pKe,formatRelative:(e,t,n,r)=>mKe[e],localize:gKe,match:xKe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function wKe(e){const t=eKe(e),n=function(e,t){const n=lKe(e),r=lKe(t),i=+n-cKe(n),a=+r-cKe(r);return Math.round((i-a)/864e5)}(t,function(e){const t=eKe(e),n=tKe(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}(t));return n+1}function jKe(e){const t=eKe(e),n=+sKe(t)-+function(e){const t=oKe(e),n=tKe(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),sKe(n)}(t);return Math.round(n/nKe)+1}function NKe(e,t){var n,r,i,a;const s=eKe(e),o=s.getFullYear(),l=iKe(),c=(null==t?void 0:t.firstWeekContainsDate)??(null==(r=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:r.firstWeekContainsDate)??l.firstWeekContainsDate??(null==(a=null==(i=l.locale)?void 0:i.options)?void 0:a.firstWeekContainsDate)??1,d=tKe(e,0);d.setFullYear(o+1,0,c),d.setHours(0,0,0,0);const u=aKe(d,t),h=tKe(e,0);h.setFullYear(o,0,c),h.setHours(0,0,0,0);const p=aKe(h,t);return s.getTime()>=u.getTime()?o+1:s.getTime()>=p.getTime()?o:o-1}function _Ke(e,t){const n=eKe(e),r=+aKe(n,t)-+function(e,t){var n,r,i,a;const s=iKe(),o=(null==t?void 0:t.firstWeekContainsDate)??(null==(r=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:r.firstWeekContainsDate)??s.firstWeekContainsDate??(null==(a=null==(i=s.locale)?void 0:i.options)?void 0:a.firstWeekContainsDate)??1,l=NKe(e,t),c=tKe(e,0);return c.setFullYear(l,0,o),c.setHours(0,0,0,0),aKe(c,t)}(n,t);return Math.round(r/nKe)+1}function SKe(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const CKe={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return SKe("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):SKe(n+1,2)},d:(e,t)=>SKe(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>SKe(e.getHours()%12||12,t.length),H:(e,t)=>SKe(e.getHours(),t.length),m:(e,t)=>SKe(e.getMinutes(),t.length),s:(e,t)=>SKe(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return SKe(Math.trunc(r*Math.pow(10,n-3)),t.length)}},AKe="midnight",MKe="noon",EKe="morning",kKe="afternoon",TKe="evening",PKe="night",OKe={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return CKe.y(e,t)},Y:function(e,t,n,r){const i=NKe(e,r),a=i>0?i:1-i;if("YY"===t){return SKe(a%100,2)}return"Yo"===t?n.ordinalNumber(a,{unit:"year"}):SKe(a,t.length)},R:function(e,t){return SKe(oKe(e),t.length)},u:function(e,t){return SKe(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return SKe(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return SKe(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return CKe.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return SKe(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=_Ke(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):SKe(i,t.length)},I:function(e,t,n){const r=jKe(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):SKe(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):CKe.d(e,t)},D:function(e,t,n){const r=wKe(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):SKe(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return SKe(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return SKe(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return SKe(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(i=12===r?MKe:0===r?AKe:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(i=r>=17?TKe:r>=12?kKe:r>=4?EKe:PKe,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return CKe.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):CKe.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):SKe(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):SKe(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):CKe.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):CKe.s(e,t)},S:function(e,t){return CKe.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return IKe(r);case"XXXX":case"XX":return DKe(r);default:return DKe(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return IKe(r);case"xxxx":case"xx":return DKe(r);default:return DKe(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+RKe(r,":");default:return"GMT"+DKe(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+RKe(r,":");default:return"GMT"+DKe(r,":")}},t:function(e,t,n){return SKe(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,n){return SKe(e.getTime(),t.length)}};function RKe(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),a=r%60;return 0===a?n+String(i):n+String(i)+t+SKe(a,2)}function IKe(e,t){if(e%60==0){return(e>0?"-":"+")+SKe(Math.abs(e)/60,2)}return DKe(e,t)}function DKe(e,t=""){const n=e>0?"-":"+",r=Math.abs(e);return n+SKe(Math.trunc(r/60),2)+t+SKe(r%60,2)}const LKe=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},BKe=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},FKe={p:BKe,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return LKe(e,t);let a;switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"})}return a.replace("{{date}}",LKe(r,t)).replace("{{time}}",BKe(i,t))}},UKe=/^D+$/,zKe=/^Y+$/,HKe=["D","DD","YY","YYYY"];const VKe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,GKe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,WKe=/^'([^]*?)'?$/,KKe=/''/g,qKe=/[a-zA-Z]/;function XKe(e,t,n){var r,i,a,s;const o=iKe(),l=o.locale??bKe,c=o.firstWeekContainsDate??(null==(i=null==(r=o.locale)?void 0:r.options)?void 0:i.firstWeekContainsDate)??1,d=o.weekStartsOn??(null==(s=null==(a=o.locale)?void 0:a.options)?void 0:s.weekStartsOn)??0,u=eKe(e);if(!dKe(u))throw new RangeError("Invalid time value");let h=t.match(GKe).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,FKe[t])(e,l.formatLong)}return e}).join("").match(VKe).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:$Ke(e)};if(OKe[t])return{isToken:!0,value:e};if(t.match(qKe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});l.localize.preprocessor&&(h=l.localize.preprocessor(u,h));const p={firstWeekContainsDate:c,weekStartsOn:d,locale:l};return h.map(n=>{if(!n.isToken)return n.value;const r=n.value;(function(e){return zKe.test(e)}(r)||function(e){return UKe.test(e)}(r))&&function(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(HKe.includes(e))throw new RangeError(r)}(r,t,String(e));return(0,OKe[r[0]])(u,r,l.localize,p)}).join("")}function $Ke(e){const t=e.match(WKe);return t?t[1].replace(KKe,"'"):e}const YKe=({history:e})=>{if(0===e.length)return Qe.jsx("section",{className:"mt-12",children:Qe.jsxs(DP,{className:"border-border/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-xl shadow-xl overflow-hidden",children:[Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary via-purple-600 to-primary"}),Qe.jsxs(UP,{className:"p-12 text-center",children:[Qe.jsx(QT.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",duration:.6},className:"inline-block mb-6",children:Qe.jsxs("div",{className:"relative",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/30 to-purple-600/30 blur-2xl rounded-full"}),Qe.jsx("div",{className:"relative p-6 rounded-full bg-gradient-to-br from-primary/20 to-purple-600/20 border-2 border-primary/30",children:Qe.jsx(of,{className:"w-20 h-20 text-primary"})})]})}),Qe.jsx("h3",{className:"text-2xl font-bold mb-3 bg-gradient-to-r from-primary via-purple-600 to-primary bg-clip-text text-transparent",children:"Lch s quay thng"}),Qe.jsx("p",{className:"text-muted-foreground text-lg mb-6 max-w-md mx-auto",children:"Cha c lch s quay no. Hy bt u quay  sn qu ngay! "}),Qe.jsx("div",{className:"flex items-center justify-center gap-4 text-sm text-muted-foreground",children:Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx(pg,{className:"w-4 h-4 text-primary"}),Qe.jsx("span",{children:"Mi ln quay u c c hi trng"})]})})]})]})});const t=e.reduce((e,t)=>e+(parseInt(t.prize.value.replace(/[^\d]/g,""))||0),0),n=e.slice(0,5),r=e.reduce((e,t)=>(parseInt(t.prize.value.replace(/[^\d]/g,""))||0)>(parseInt(e.prize.value.replace(/[^\d]/g,""))||0)?t:e);return Qe.jsxs("section",{className:"mt-12 space-y-6",children:[Qe.jsxs(DP,{className:"border-border/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-xl shadow-xl overflow-hidden",children:[Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary via-purple-600 to-primary"}),Qe.jsx(UP,{className:"p-8",children:Qe.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-6",children:[Qe.jsxs("div",{className:"flex items-center gap-4",children:[Qe.jsx(QT.div,{animate:{rotate:360},transition:{duration:3,repeat:1/0,ease:"linear"},className:"p-3 rounded-xl bg-gradient-to-br from-primary to-purple-600 shadow-lg",children:Qe.jsx(of,{className:"w-6 h-6 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-primary via-purple-600 to-primary bg-clip-text text-transparent",children:"Lch s quay thng"}),Qe.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.length," lt quay gn y"]})]})]}),Qe.jsxs("div",{className:"flex flex-wrap gap-3",children:[Qe.jsxs(EP,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white border-0 shadow-lg px-4 py-2",children:[Qe.jsx(Ag,{className:"w-4 h-4 mr-2"}),"Tng gi tr: ",t.toLocaleString("vi-VN"),""]}),Qe.jsxs(EP,{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white border-0 shadow-lg px-4 py-2",children:[Qe.jsx(tm,{className:"w-4 h-4 mr-2"}),e.length," gii thng"]})]})]})})]}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:Qe.jsxs(DP,{className:"border-border/50 bg-gradient-to-br from-amber-500/10 via-orange-500/10 to-amber-500/10 backdrop-blur-xl shadow-xl overflow-hidden relative",children:[Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-amber-500 via-orange-500 to-amber-500"}),Qe.jsx("div",{className:"absolute top-4 right-4",children:Qe.jsx(QT.div,{animate:{rotate:[0,360]},transition:{duration:3,repeat:1/0,ease:"linear"},children:Qe.jsx(pg,{className:"w-8 h-8 text-amber-500 opacity-30"})})}),Qe.jsxs(UP,{className:"p-6",children:[Qe.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[Qe.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-amber-500 to-orange-500 shadow-lg",children:Qe.jsx(Ag,{className:"w-5 h-5 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx("h4",{className:"font-bold text-lg",children:"Gii thng ln nht"}),Qe.jsx("p",{className:"text-xs text-muted-foreground",children:"Phn qu c gi tr cao nht bn  trng"})]})]}),Qe.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-gradient-to-br from-background/50 to-card/30 border border-amber-500/20",children:[Qe.jsxs("div",{className:"flex items-center gap-4",children:[Qe.jsx("div",{className:"text-5xl",children:r.prize.icon}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"font-bold text-xl mb-1",children:r.prize.name}),Qe.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[Qe.jsx(um,{className:"w-4 h-4"}),XKe(new Date(r.timestamp),"dd/MM/yyyy HH:mm")]})]})]}),Qe.jsxs(EP,{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white border-0 shadow-lg text-lg px-4 py-2",children:[Qe.jsx(fg,{className:"w-5 h-5 mr-2"}),r.prize.value]})]})]})]})}),Qe.jsxs(DP,{className:"border-border/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-xl shadow-xl overflow-hidden",children:[Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary via-purple-600 to-primary"}),Qe.jsxs(UP,{className:"p-8",children:[Qe.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[Qe.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-primary to-purple-600 shadow-lg",children:Qe.jsx(Sg,{className:"w-5 h-5 text-white"})}),Qe.jsx("h4",{className:"font-bold text-lg",children:"Lt quay gn y"})]}),Qe.jsx("div",{className:"space-y-3",children:n.map((e,t)=>{const n=(parseInt(e.prize.value.replace(/[^\d]/g,""))||0)>=5e4;return Qe.jsx(QT.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2+.1*t},whileHover:{scale:1.02,x:4},className:"group",children:Qe.jsxs(DP,{className:"border-border/50 bg-gradient-to-br from-background/50 to-card/30 hover:shadow-lg transition-all cursor-pointer overflow-hidden "+(n?"border-amber-500/30":""),children:[n&&Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-0.5 bg-gradient-to-r from-amber-500 to-orange-500"}),Qe.jsx(UP,{className:"p-5",children:Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[Qe.jsxs(QT.div,{whileHover:{rotate:360,scale:1.2},transition:{duration:.6},className:"relative",children:[Qe.jsx("div",{className:"absolute inset-0 blur-xl "+(n?"bg-gradient-to-br from-amber-500/40 to-orange-500/40":"bg-gradient-to-br from-primary/40 to-purple-600/40")}),Qe.jsx("div",{className:"relative text-5xl",children:e.prize.icon})]}),Qe.jsxs("div",{className:"flex-1",children:[Qe.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Qe.jsx("p",{className:"font-bold text-lg group-hover:text-primary transition-colors",children:e.prize.name}),n&&Qe.jsxs(EP,{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white border-0 text-xs",children:[Qe.jsx(pg,{className:"w-3 h-3 mr-1"}),"Gi tr cao"]})]}),Qe.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-muted-foreground",children:[Qe.jsxs("span",{className:"flex items-center gap-1",children:[Qe.jsx(um,{className:"w-3.5 h-3.5"}),XKe(new Date(e.timestamp),"dd/MM/yyyy")]}),Qe.jsxs("span",{className:"flex items-center gap-1",children:[Qe.jsx(Em,{className:"w-3.5 h-3.5"}),XKe(new Date(e.timestamp),"HH:mm:ss")]}),Qe.jsxs(EP,{variant:"secondary",className:"text-xs",children:["#",t+1]})]})]})]}),Qe.jsx(QT.div,{whileHover:{scale:1.1},transition:{type:"spring",stiffness:400},children:Qe.jsxs(EP,{className:(n?"bg-gradient-to-r from-amber-500 to-orange-500":"bg-gradient-to-r from-green-500 to-emerald-500")+" text-white border-0 shadow-lg text-base px-4 py-2 font-bold",children:[Qe.jsx(Zm,{className:"w-4 h-4 mr-2"}),e.prize.value]})})]})})]})},`${e.timestamp}-${t}`)})}),e.length>5&&Qe.jsx(QT.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},className:"mt-6 text-center",children:Qe.jsxs("button",{className:"text-primary hover:text-purple-600 font-semibold text-sm flex items-center gap-2 mx-auto group",children:["Xem tt c ",e.length," lt quay",Qe.jsx(QT.div,{animate:{x:[0,5,0]},transition:{duration:1.5,repeat:1/0},children:Qe.jsx(Sg,{className:"w-4 h-4"})})]})})]})]}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:Qe.jsx(DP,{className:"border-border/50 bg-gradient-to-br from-primary/10 via-purple-600/10 to-primary/10 backdrop-blur-sm",children:Qe.jsxs(UP,{className:"p-6 text-center",children:[Qe.jsx(Bf,{className:"w-8 h-8 mx-auto mb-3 text-primary"}),Qe.jsxs("p",{className:"text-sm text-muted-foreground",children:[Qe.jsx("span",{className:"font-semibold text-foreground",children:"Mo nh:"})," Hy quay vo nhng khung gi vng  tng c hi trng gii ln! "]})]})})})]})},JKe=()=>{const[e,t]=Ve.useState(10),[n,r]=Ve.useState([]),[i,a]=Ve.useState(!1),[s,o]=Ve.useState(!1),[l,c]=Ve.useState(null),[d,u]=Ve.useState(!1);Ve.useEffect(()=>{const e=(()=>{const e=localStorage.getItem("luckyWheelData");if(!e)return{spinsLeft:10,history:[]};try{return JSON.parse(e)}catch{return{spinsLeft:10,history:[]}}})();t(e.spinsLeft),r(e.history)},[]),Ve.useEffect(()=>{const e=()=>{const e=localStorage.getItem("lastResetDate"),n=(new Date).toDateString();e!==n&&(t(10),localStorage.setItem("lastResetDate",n),KWe({spinsLeft:10,history:[]}),r([]))};e();const n=setInterval(e,6e4);return()=>clearInterval(n)},[]),Ve.useEffect(()=>{null!==e&&null!==n&&KWe({spinsLeft:e,history:n})},[e,n]);return{spinsLeft:e,history:n,isSpinning:i,showModal:s,setShowModal:o,currentPrize:l,showConfetti:d,handleSpin:async s=>{if(e<=0||i)return;a(!0);const l=e-1;t(l);const d=[{prize:s,timestamp:Date.now()},...n].slice(0,50);r(d),c(s),o(!0),u(!0),a(!1),KWe({spinsLeft:l,history:d}),setTimeout(()=>u(!1),5e3)},resetSpins:(e=10)=>{t(e),KWe({spinsLeft:e,history:n}),localStorage.setItem("lastResetDate",(new Date).toDateString())},clearHistory:()=>{r([]),KWe({spinsLeft:e,history:[]})}}},ZKe=()=>{const{spinsLeft:e,history:t,isSpinning:n,showModal:r,setShowModal:i,currentPrize:a,showConfetti:s,handleSpin:o,resetSpins:l}=JKe(),{width:c,height:d}=GWe(),u=10,h=(u-e)/u*100;return Qe.jsxs("div",{className:"min-h-screen bg-background relative overflow-hidden",children:[Qe.jsxs("div",{className:"fixed inset-0 -z-10",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-background via-primary/5 to-background"}),Qe.jsx(QT.div,{className:"absolute top-20 left-20 w-96 h-96 bg-gradient-to-br from-primary/30 via-purple-600/30 to-primary/30 rounded-full blur-3xl",animate:{scale:[1,1.2,1],opacity:[.3,.5,.3],x:[0,50,0],y:[0,30,0]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),Qe.jsx(QT.div,{className:"absolute bottom-20 right-20 w-80 h-80 bg-gradient-to-br from-purple-600/30 via-pink-500/30 to-primary/30 rounded-full blur-3xl",animate:{scale:[1.2,1,1.2],opacity:[.2,.4,.2],x:[0,-30,0],y:[0,-50,0]},transition:{duration:10,repeat:1/0,ease:"easeInOut"}}),Qe.jsx(QT.div,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-gradient-to-br from-amber-500/20 via-orange-500/20 to-primary/20 rounded-full blur-3xl",animate:{scale:[1,1.3,1],opacity:[.1,.3,.1],rotate:[0,180,360]},transition:{duration:15,repeat:1/0,ease:"easeInOut"}}),Qe.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(var(--primary),0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(var(--primary),0.03)_1px,transparent_1px)] bg-[size:64px_64px]"}),[...Array(20)].map((e,t)=>Qe.jsx(QT.div,{className:"absolute w-2 h-2 bg-primary/30 rounded-full",style:{top:100*Math.random()+"%",left:100*Math.random()+"%"},animate:{y:[0,-30,0],opacity:[0,1,0],scale:[0,1,0]},transition:{duration:3+2*Math.random(),repeat:1/0,delay:2*Math.random(),ease:"easeInOut"}},t))]}),s&&Qe.jsx(zWe,{width:c,height:d,recycle:!1,numberOfPieces:500,gravity:.3,colors:["#8B5CF6","#A855F7","#7C3AED","#6D28D9","#F59E0B","#F97316"]}),Qe.jsxs("main",{className:"container mx-auto px-4 py-8 relative z-10",children:[Qe.jsxs(QT.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-12 mt-8",children:[Qe.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[Qe.jsx(QT.div,{animate:{rotate:[0,360]},transition:{duration:3,repeat:1/0,ease:"linear"},children:Qe.jsx(Bf,{className:"w-12 h-12 text-primary"})}),Qe.jsx("h1",{className:"text-4xl md:text-6xl font-bold bg-gradient-to-r from-primary via-purple-600 to-primary bg-clip-text text-transparent",children:"Vng Quay May Mn"}),Qe.jsx(QT.div,{animate:{rotate:[360,0]},transition:{duration:3,repeat:1/0,ease:"linear"},children:Qe.jsx(Ag,{className:"w-12 h-12 text-amber-500"})})]}),Qe.jsx("p",{className:"text-muted-foreground text-lg md:text-xl max-w-3xl mx-auto mb-6",children:"Quay tht mnh  sn ngay voucher, qu tng v hng ngn phn thng cc khng! "}),Qe.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4",children:[Qe.jsxs(EP,{className:"bg-gradient-to-r from-primary to-purple-600 text-white border-0 shadow-lg px-4 py-2",children:[Qe.jsx(qm,{className:"w-4 h-4 mr-2"}),Qe.jsx("span",{className:"font-bold",children:"HOT"})," nht hm nay"]}),Qe.jsxs(EP,{className:"bg-gradient-to-r from-amber-500 to-orange-500 text-white border-0 shadow-lg px-4 py-2",children:[Qe.jsx(Ag,{className:"w-4 h-4 mr-2"}),t.length.toLocaleString()," lt  quay"]}),Qe.jsxs(EP,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white border-0 shadow-lg px-4 py-2",children:[Qe.jsx(Zm,{className:"w-4 h-4 mr-2"}),WWe.length," phn qu"]})]})]}),Qe.jsx(QT.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:"max-w-4xl mx-auto mb-8",children:Qe.jsxs(DP,{className:"relative overflow-hidden border-border/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-xl shadow-2xl",children:[Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary via-purple-600 to-primary"}),Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-purple-600/5"}),Qe.jsx(UP,{className:"p-8 relative",children:Qe.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[Qe.jsxs("div",{className:"flex-1 space-y-4 w-full",children:[Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx(QT.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"p-3 rounded-xl bg-gradient-to-br from-primary to-purple-600 shadow-lg",children:Qe.jsx(zg,{className:"w-6 h-6 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx("h3",{className:"text-2xl font-bold",children:"Lt quay ca bn"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Reset vo 00:00 hng ngy"})]})]}),Qe.jsxs("div",{className:"text-right",children:[Qe.jsxs("div",{className:"flex items-baseline gap-2",children:[Qe.jsx("span",{className:"text-5xl font-bold bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:e}),Qe.jsxs("span",{className:"text-2xl text-muted-foreground",children:["/",u]})]}),Qe.jsxs(EP,{className:"mt-2 bg-primary/20 text-primary",children:[Qe.jsx(Em,{className:"w-3 h-3 mr-1"}),"Hm nay"]})]})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs("div",{className:"flex justify-between text-sm",children:[Qe.jsx("span",{className:"text-muted-foreground",children:" s dng"}),Qe.jsxs("span",{className:"font-semibold",children:[u-e,"/",u," lt"]})]}),Qe.jsx("div",{className:"h-3 bg-muted rounded-full overflow-hidden",children:Qe.jsx(QT.div,{initial:{width:0},animate:{width:`${h}%`},transition:{duration:1,ease:"easeOut"},className:"h-full bg-gradient-to-r from-primary via-purple-600 to-primary"})})]}),Qe.jsxs("div",{className:"flex flex-wrap gap-3",children:[Qe.jsxs(AP,{disabled:!0,size:"lg",className:"bg-gradient-to-r from-amber-500 to-orange-500 hover:opacity-90 shadow-lg",children:[Qe.jsx(fg,{className:"w-5 h-5 mr-2"}),"Nhn thm lt",Qe.jsx(EP,{className:"ml-2 bg-white/20",children:"Soon"})]}),Qe.jsxs(AP,{variant:"outline",size:"lg",className:"border-2 hover:border-primary hover:bg-primary/5",onClick:()=>l(10),children:[Qe.jsx(qf,{className:"w-5 h-5 mr-2"}),"Reset (",u," lt)"]})]})]}),Qe.jsx("div",{className:"w-full md:w-64",children:Qe.jsx(DP,{className:"border-border/50 bg-gradient-to-br from-amber-500/10 to-orange-500/10",children:Qe.jsxs(UP,{className:"p-6 space-y-3",children:[Qe.jsxs("div",{className:"flex items-center gap-2 text-amber-500",children:[Qe.jsx(Im,{className:"w-5 h-5"}),Qe.jsx("span",{className:"font-bold",children:"c quyn VIP"})]}),Qe.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[Qe.jsxs("li",{className:"flex items-center gap-2",children:[Qe.jsx(pg,{className:"w-4 h-4 text-primary"}),"+5 lt quay thm"]}),Qe.jsxs("li",{className:"flex items-center gap-2",children:[Qe.jsx(Sg,{className:"w-4 h-4 text-primary"}),"Tng 2x t l trng"]}),Qe.jsxs("li",{className:"flex items-center gap-2",children:[Qe.jsx(Zm,{className:"w-4 h-4 text-primary"}),"Qu c quyn"]})]}),Qe.jsxs(AP,{size:"sm",className:"w-full bg-gradient-to-r from-amber-500 to-orange-500",children:[Qe.jsx(Im,{className:"w-4 h-4 mr-2"}),"Nng cp VIP"]})]})})})]})})]})}),Qe.jsxs(QT.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.3,duration:.8},className:"flex justify-center mb-12 relative",children:[Qe.jsxs("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[Qe.jsx(QT.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},className:"w-[600px] h-[600px] rounded-full border-2 border-primary/20"}),Qe.jsx(QT.div,{animate:{rotate:-360},transition:{duration:15,repeat:1/0,ease:"linear"},className:"absolute w-[650px] h-[650px] rounded-full border border-purple-600/20"})]}),Qe.jsx(DP,{className:"relative border-border/50 bg-gradient-to-br from-card/50 to-card/30 backdrop-blur-sm shadow-2xl rounded-3xl overflow-visible",children:Qe.jsx(UP,{className:"p-8",children:Qe.jsx($We,{prizes:WWe,onSpinComplete:async e=>{await o(e)},isSpinning:n,spinsLeft:e})})})]}),Qe.jsx(QT.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.4},children:Qe.jsx(QWe,{prizes:WWe})}),Qe.jsx(QT.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.5},className:"mt-8",children:Qe.jsx(YKe,{history:t})}),Qe.jsx(QT.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.6},className:"mt-12 max-w-4xl mx-auto",children:Qe.jsxs(DP,{className:"border-border/50 bg-gradient-to-br from-card/90 to-card/50 backdrop-blur-xl shadow-xl overflow-hidden",children:[Qe.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary via-purple-600 to-primary"}),Qe.jsxs(UP,{className:"p-8",children:[Qe.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[Qe.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-primary to-purple-600 shadow-lg",children:Qe.jsx(tm,{className:"w-6 h-6 text-white"})}),Qe.jsx("h3",{className:"text-2xl font-bold",children:"Th l chng trnh"})]}),Qe.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[Qe.jsxs("div",{className:"space-y-3",children:[Qe.jsxs("h4",{className:"font-semibold text-primary flex items-center gap-2",children:[Qe.jsx(pg,{className:"w-4 h-4"}),"Cch chi"]}),Qe.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[Qe.jsxs("li",{className:"flex items-start gap-2",children:[Qe.jsx("span",{className:"text-primary font-bold",children:""}),"Mi ngi dng c ",u," lt quay min ph mi ngy"]}),Qe.jsxs("li",{className:"flex items-start gap-2",children:[Qe.jsx("span",{className:"text-primary font-bold",children:""}),'Nhn nt "QUAY NGAY"  bt u']}),Qe.jsxs("li",{className:"flex items-start gap-2",children:[Qe.jsx("span",{className:"text-primary font-bold",children:""}),"Ch vng quay dng  nhn gii thng"]}),Qe.jsxs("li",{className:"flex items-start gap-2",children:[Qe.jsx("span",{className:"text-primary font-bold",children:""}),"Phn thng t ng cng vo ti khon"]})]})]}),Qe.jsxs("div",{className:"space-y-3",children:[Qe.jsxs("h4",{className:"font-semibold text-primary flex items-center gap-2",children:[Qe.jsx(Zm,{className:"w-4 h-4"}),"Quy nh"]}),Qe.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[Qe.jsxs("li",{className:"flex items-start gap-2",children:[Qe.jsx("span",{className:"text-primary font-bold",children:""}),"Lt quay reset vo 00:00 hng ngy"]}),Qe.jsxs("li",{className:"flex items-start gap-2",children:[Qe.jsx("span",{className:"text-primary font-bold",children:""}),"Voucher c hn s dng 30 ngy"]}),Qe.jsxs("li",{className:"flex items-start gap-2",children:[Qe.jsx("span",{className:"text-primary font-bold",children:""}),"T l trng ph thuc  him"]}),Qe.jsxs("li",{className:"flex items-start gap-2",children:[Qe.jsx("span",{className:"text-primary font-bold",children:""}),"Khng gii hn s ln trng thng"]})]})]})]}),Qe.jsxs("div",{className:"mt-8 pt-6 border-t border-border/50 flex flex-col md:flex-row items-center justify-between gap-4",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx(sf,{className:"w-5 h-5 text-red-500"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Chc bn may mn v nhn c nhiu phn qu gi tr!"})]}),Qe.jsxs(AP,{className:"bg-gradient-to-r from-primary to-purple-600 hover:opacity-90 shadow-lg",children:[Qe.jsx(pg,{className:"w-4 h-4 mr-2"}),"Chia s vi bn b"]})]})]})]})})]}),Qe.jsx(JWe,{isOpen:r,onClose:()=>i(!1),prize:a})]})};class QKe{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const t of this._parts)e.push(t);return function(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e){const e=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);n.set(e,r),r+=i.byteLength}return n}(e).buffer}}function eqe(e){return new nqe(e).unpack()}function tqe(e){const t=new rqe,n=t.pack(e);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class nqe{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((224^e)<32)return(224^e)-32;let t;if((t=160^e)<=15)return this.unpack_raw(t);if((t=176^e)<=15)return this.unpack_string(t);if((t=144^e)<=15)return this.unpack_array(t);if((t=128^e)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:case 212:case 213:case 214:case 215:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}}unpack_uint8(){const e=255&this.dataView[this.index];return this.index++,e}unpack_uint16(){const e=this.read(2),t=256*(255&e[0])+(255&e[1]);return this.index+=2,t}unpack_uint32(){const e=this.read(4),t=256*(256*(256*e[0]+e[1])+e[2])+e[3];return this.index+=4,t}unpack_uint64(){const e=this.read(8),t=256*(256*(256*(256*(256*(256*(256*e[0]+e[1])+e[2])+e[3])+e[4])+e[5])+e[6])+e[7];return this.index+=8,t}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t}unpack_string(e){const t=this.read(e);let n,r,i=0,a="";for(;i<e;)n=t[i],n<160?(r=n,i++):(192^n)<32?(r=(31&n)<<6|63&t[i+1],i+=2):(224^n)<16?(r=(15&n)<<12|(63&t[i+1])<<6|63&t[i+2],i+=3):(r=(7&n)<<18|(63&t[i+1])<<12|(63&t[i+2])<<6|63&t[i+3],i+=4),a+=String.fromCodePoint(r);return this.index+=e,a}unpack_array(e){const t=new Array(e);for(let n=0;n<e;n++)t[n]=this.unpack();return t}unpack_map(e){const t={};for(let n=0;n<e;n++){t[this.unpack()]=this.unpack()}return t}unpack_float(){const e=this.unpack_uint32();return(0===e>>31?1:-1)*(8388607&e|8388608)*2**((e>>23&255)-127-23)}unpack_double(){const e=this.unpack_uint32(),t=(e>>20&2047)-1023;return(0===e>>31?1:-1)*((1048575&e|1048576)*2**(t-20)+this.unpack_uint32()*2**(t-52))}read(e){const t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")}}class rqe{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if("string"==typeof e)this.pack_string(e);else if("number"==typeof e)Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if("boolean"==typeof e)!0===e?this._bufferBuilder.append(195):!1===e&&this._bufferBuilder.append(194);else if(void 0===e)this._bufferBuilder.append(192);else{if("object"!=typeof e)throw new Error(`Type "${typeof e}" not yet supported`);if(null===e)this._bufferBuilder.append(192);else{const t=e.constructor;if(e instanceof Array){const t=this.pack_array(e);if(t instanceof Promise)return t.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const t=e;this.pack_bin(new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(e=>{this.pack_bin(new Uint8Array(e)),this._bufferBuilder.flush()});if(t!=Object&&!t.toString().startsWith("class"))throw new Error(`Type "${t.toString()}" not yet supported`);{const t=this.pack_object(e);if(t instanceof Promise)return t.then(()=>this._bufferBuilder.flush())}}}}this._bufferBuilder.flush()}pack_bin(e){const t=e.length;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this._bufferBuilder.append(218),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(219),this.pack_uint32(t)}this._bufferBuilder.append_buffer(e)}pack_string(e){const t=this._textEncoder.encode(e),n=t.length;if(n<=15)this.pack_uint8(176+n);else if(n<=65535)this._bufferBuilder.append(216),this.pack_uint16(n);else{if(!(n<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(217),this.pack_uint32(n)}this._bufferBuilder.append_buffer(t)}pack_array(e){const t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this._bufferBuilder.append(220),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(221),this.pack_uint32(t)}const n=r=>{if(r<t){const t=this.pack(e[r]);return t instanceof Promise?t.then(()=>n(r+1)):n(r+1)}};return n(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(255&e);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-0x8000000000000000&&e<=0x8000000000000000)this._bufferBuilder.append(211),this.pack_int64(e);else{if(!(e>=0&&e<=0x10000000000000000))throw new Error("Invalid integer");this._bufferBuilder.append(207),this.pack_uint64(e)}}pack_double(e){let t=0;e<0&&(t=1,e=-e);const n=Math.floor(Math.log(e)/Math.LN2),r=e/2**n-1,i=Math.floor(r*2**52),a=2**32,s=t<<31|n+1023<<20|i/a&1048575,o=i%a;this._bufferBuilder.append(203),this.pack_int32(s),this.pack_int32(o)}pack_object(e){const t=Object.keys(e),n=t.length;if(n<=15)this.pack_uint8(128+n);else if(n<=65535)this._bufferBuilder.append(222),this.pack_uint16(n);else{if(!(n<=4294967295))throw new Error("Invalid length");this._bufferBuilder.append(223),this.pack_uint32(n)}const r=n=>{if(n<t.length){const i=t[n];if(e.hasOwnProperty(i)){this.pack(i);const t=this.pack(e[i]);if(t instanceof Promise)return t.then(()=>r(n+1))}return r(n+1)}};return r(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(255&e)}pack_uint32(e){const t=4294967295&e;this._bufferBuilder.append((4278190080&t)>>>24),this._bufferBuilder.append((16711680&t)>>>16),this._bufferBuilder.append((65280&t)>>>8),this._bufferBuilder.append(255&t)}pack_uint64(e){const t=e/2**32,n=e%2**32;this._bufferBuilder.append((4278190080&t)>>>24),this._bufferBuilder.append((16711680&t)>>>16),this._bufferBuilder.append((65280&t)>>>8),this._bufferBuilder.append(255&t),this._bufferBuilder.append((4278190080&n)>>>24),this._bufferBuilder.append((16711680&n)>>>16),this._bufferBuilder.append((65280&n)>>>8),this._bufferBuilder.append(255&n)}pack_int8(e){this._bufferBuilder.append(255&e)}pack_int16(e){this._bufferBuilder.append((65280&e)>>8),this._bufferBuilder.append(255&e)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((16711680&e)>>>16),this._bufferBuilder.append((65280&e)>>>8),this._bufferBuilder.append(255&e)}pack_int64(e){const t=Math.floor(e/2**32),n=e%2**32;this._bufferBuilder.append((4278190080&t)>>>24),this._bufferBuilder.append((16711680&t)>>>16),this._bufferBuilder.append((65280&t)>>>8),this._bufferBuilder.append(255&t),this._bufferBuilder.append((4278190080&n)>>>24),this._bufferBuilder.append((16711680&n)>>>16),this._bufferBuilder.append((65280&n)>>>8),this._bufferBuilder.append(255&n)}constructor(){this._bufferBuilder=new QKe,this._textEncoder=new TextEncoder}}let iqe=!0,aqe=!0;function sqe(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseFloat(r[n],10)}function oqe(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);const a=e=>{const t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,a),i.apply(this,[e,a])};const a=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return a.apply(this,arguments);if(!this._eventMap[t].has(n))return a.apply(this,arguments);const r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,a.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function lqe(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(iqe=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function cqe(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(aqe=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function dqe(){if("object"==typeof window){if(iqe)return;"undefined"!=typeof console&&console.log}}function uqe(e,t){}function hqe(e){return"[object Object]"===Object.prototype.toString.call(e)}function pqe(e){return hqe(e)?Object.keys(e).reduce(function(t,n){const r=hqe(e[n]),i=r?pqe(e[n]):e[n],a=r&&!Object.keys(i).length;return void 0===i||a?t:Object.assign(t,{[n]:i})},{}):e}function mqe(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?mqe(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(t=>{mqe(e,e.get(t),n)})}))}function fqe(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;const a=[];return e.forEach(e=>{"track"===e.type&&e.trackIdentifier===t.id&&a.push(e)}),a.forEach(t=>{e.forEach(n=>{n.type===r&&n.trackId===t.id&&mqe(e,n,i)})}),i}const gqe=dqe;function vqe(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach(n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"==typeof r.ideal?(e[i("min",n)]=r.ideal,t.optional.push(e),e={},e[i("max",n)]=r.ideal,t.optional.push(e)):(e[i("",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach(e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])})}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){let a=e.video.facingMode;a=a&&("object"==typeof a?a:{ideal:a});const s=t.version<66;if(a&&("user"===a.exact||"environment"===a.exact||"user"===a.ideal||"environment"===a.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||s)){let t;if(delete e.video.facingMode,"environment"===a.exact||"environment"===a.ideal?t=["back","rear"]:"user"!==a.exact&&"user"!==a.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then(n=>{let s=(n=n.filter(e=>"videoinput"===e.kind)).find(e=>t.some(t=>e.label.toLowerCase().includes(t)));return!s&&n.length&&t.includes("back")&&(s=n[n.length-1]),s&&(e.video.deviceId=a.exact?{exact:s.deviceId}:{ideal:s.deviceId}),e.video=r(e.video),gqe("chrome: "+JSON.stringify(e)),i(e)})}e.video=r(e.video)}return gqe("chrome: "+JSON.stringify(e)),i(e)},a=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,e=>{n.webkitGetUserMedia(e,t,e=>{r&&r(a(e))})})}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return i(t,t=>e(t).then(e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(e=>{e.stop()}),new DOMException("","NotFoundError");return e},e=>Promise.reject(a(e))))}}}function xqe(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function yqe(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===n.track.id):{track:n.track};const i=new Event("track");i.track=n.track,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)}),t.stream.getTracks().forEach(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===n.id):{track:n};const i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else oqe(e,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function bqe(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach(e=>{this._senders.push(t(this,e))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach(e=>{const t=this._senders.find(t=>t.track===e);t&&this._senders.splice(this._senders.indexOf(t),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function wqe(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>fqe(t,e.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),oqe(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>fqe(t,e.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach(n=>{n.track===e&&(t?r=!0:t=n)}),this.getReceivers().forEach(t=>(t.track===e&&(n?r=!0:n=t),t.track===e)),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function jqe(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(e=>this._shimmedLocalStreams[e][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")});const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter(e=>-1===t.indexOf(e));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]}),i.apply(this,arguments)}}function Nqe(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return jqe(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map(e=>this._reverseStreams[e.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const i=e.RTCPeerConnection.prototype.removeStream;function a(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)}),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find(e=>e===t))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(e=>e.track===t))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const i=this._streams[n.id];if(i)i.addTrack(t),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find(e=>e.track===t)},["createOffer","createAnswer"].forEach(function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const n=a(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then(e=>a(this,e))}};e.RTCPeerConnection.prototype[t]=r[t]});const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};const o=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=o.get.apply(this);return""===e.type?e:a(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach(n=>{this._streams[n].getTracks().find(t=>e.track===t)&&(t=this._streams[n])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function _qe(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]})}function Sqe(e,t){oqe(e,"negotiationneeded",e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e})}const Cqe=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:Sqe,shimAddTrackRemoveTrack:Nqe,shimAddTrackRemoveTrackWithNative:jqe,shimGetSendersWithDtmf:bqe,shimGetUserMedia:vqe,shimMediaStream:xqe,shimOnTrack:yqe,shimPeerConnection:_qe,shimSenderReceiverGetStats:wqe},Symbol.toStringTag,{value:"Module"}));function Aqe(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function Mqe(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Eqe(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,a]=arguments;return r.apply(this,[e||null]).then(e=>{if(t.version<53&&!i)try{e.forEach(e=>{e.type=n[e.type]||e.type})}catch(CI){if("TypeError"!==CI.name)throw CI;e.forEach((t,r)=>{e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))})}return e}).then(i,a)}}function kqe(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Tqe(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),oqe(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Pqe(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){this.getSenders().forEach(t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)})})}function Oqe(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Rqe(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]),e=[...e];const n=e.length>0;n&&e.forEach(e=>{if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const r=t.apply(this,arguments);if(n){const{sender:t}=r,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e,t.sendEncodings=e,this.setParametersPromises.push(t.setParameters(n).then(()=>{delete t.sendEncodings}).catch(()=>{delete t.sendEncodings})))}return r})}function Iqe(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function Dqe(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function Lqe(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const Bqe=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:Rqe,shimCreateAnswer:Lqe,shimCreateOffer:Dqe,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})},shimGetParameters:Iqe,shimGetUserMedia:Aqe,shimOnTrack:Mqe,shimPeerConnection:Eqe,shimRTCDataChannel:Oqe,shimReceiverGetStats:Tqe,shimRemoveStream:Pqe,shimSenderGetStats:kqe},Symbol.toStringTag,{value:"Module"}));function Fqe(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(n=>t.call(this,n,e)),e.getVideoTracks().forEach(n=>t.call(this,n,e))},e.RTCPeerConnection.prototype.addTrack=function(e,...n){return n&&n.forEach(e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach(e=>{n.includes(e.track)&&this.removeTrack(e)})})}}function Uqe(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach(e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)})}),t.apply(e,arguments)}}}function zqe(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,a=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};let o=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=o,o=function(e,t,n){const r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=o,o=function(e,t,n){const r=s.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=o}function Hqe(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(Vqe(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function Vqe(e){return e&&void 0!==e.video?Object.assign({},e,{video:pqe(e.video)}):e}function Gqe(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];void 0===r.urls&&r.url?(uqe(),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function Wqe(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Kqe(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find(e=>"audio"===e.receiver.track.kind);!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find(e=>"video"===e.receiver.track.kind);!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function qqe(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const Xqe=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:qqe,shimCallbacksAPI:zqe,shimConstraints:Vqe,shimCreateOfferLegacy:Kqe,shimGetUserMedia:Hqe,shimLocalStreamsAPI:Fqe,shimRTCIceServerUrls:Gqe,shimRemoteStreamsAPI:Uqe,shimTrackEventTransceiver:Wqe},Symbol.toStringTag,{value:"Module"}));var $qe={exports:{}};!function(e){const t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map(e=>e.trim())},t.splitSections=function(e){return e.split("\nm=").map((e,t)=>(t>0?"m="+e:e).trim()+"\r\n")},t.getDescription=function(e){const n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){const n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter(e=>0===e.indexOf(n))},t.parseCandidate=function(e){let t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");const n={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:void 0===n[t[r]]&&(n[t[r]]=t[r+1])}return n},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substring(14).split(" ")},t.parseRtpMap=function(e){let t=e.substring(9).split(" ");const n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){const t=e.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+"\r\n"},t.parseFmtp=function(e){const t={};let n;const r=e.substring(e.indexOf(" ")+1).split(";");for(let i=0;i<r.length;i++)n=r[i].trim().split("="),t[n[0].trim()]=n[1];return t},t.writeFmtp=function(e){let t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const r=[];Object.keys(e.parameters).forEach(t=>{void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)}),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){const t=e.substring(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){let t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(e=>{t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},t.parseSsrcMedia=function(e){const t=e.indexOf(" "),n={ssrc:parseInt(e.substring(7,t),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substring(t+1,r),n.value=e.substring(r+1)):n.attribute=e.substring(t+1),n},t.parseSsrcGroup=function(e){const t=e.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(e=>parseInt(e,10))}},t.getMid=function(e){const n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(e){const t=e.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(e=>{n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},t.parseCryptoLine=function(e){const t=e.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){const r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substring(12),password:i.substring(10)}:null},t.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" ");n.profile=r[2];for(let a=3;a<r.length;a++){const i=r[a],s=t.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(s){const r=t.parseRtpMap(s),a=t.matchPrefix(e,"a=fmtp:"+i+" ");switch(r.parameters=a.length?t.parseFmtp(a[0]):{},r.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(t.parseRtcpFb),n.codecs.push(r),r.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(r.name.toUpperCase())}}}t.matchPrefix(e,"a=extmap:").forEach(e=>{n.headerExtensions.push(t.parseExtmap(e))});const i=t.matchPrefix(e,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach(e=>{i.forEach(t=>{e.rtcpFeedback.find(e=>e.type===t.type&&e.parameter===t.parameter)||e.rtcpFeedback.push(t)})}),n},t.writeRtpDescription=function(e,n){let r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=n.codecs.map(e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach(e=>{r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)});let i=0;return n.codecs.forEach(e=>{e.maxptime>i&&(i=e.maxptime)}),i>0&&(r+="a=maxptime:"+i+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach(e=>{r+=t.writeExtmap(e)}),r},t.parseRtpEncodingParameters=function(e){const n=[],r=t.parseRtpParameters(e),i=-1!==r.fecMechanisms.indexOf("RED"),a=-1!==r.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map(e=>t.parseSsrcMedia(e)).filter(e=>"cname"===e.attribute),o=s.length>0&&s[0].ssrc;let l;const c=t.matchPrefix(e,"a=ssrc-group:FID").map(e=>e.substring(17).split(" ").map(e=>parseInt(e,10)));c.length>0&&c[0].length>1&&c[0][0]===o&&(l=c[0][1]),r.codecs.forEach(e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:o,codecPayloadType:parseInt(e.parameters.apt,10)};o&&l&&(t.rtx={ssrc:l}),n.push(t),i&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:o,mechanism:a?"red+ulpfec":"red"},n.push(t))}}),0===n.length&&o&&n.push({ssrc:o});let d=t.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substring(7),10):0===d[0].indexOf("b=AS:")?1e3*parseInt(d[0].substring(5),10)*.95-16e3:void 0,n.forEach(e=>{e.maxBitrate=d})),n},t.parseRtcpParameters=function(e){const n={},r=t.matchPrefix(e,"a=ssrc:").map(e=>t.parseSsrcMedia(e)).filter(e=>"cname"===e.attribute)[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);const i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;const a=t.matchPrefix(e,"a=rtcp-mux");return n.mux=a.length>0,n},t.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){let n;const r=t.matchPrefix(e,"a=msid:");if(1===r.length)return n=r[0].substring(7).split(" "),{stream:n[0],track:n[1]};const i=t.matchPrefix(e,"a=ssrc:").map(e=>t.parseSsrcMedia(e)).filter(e=>"msid"===e.attribute);return i.length>0?(n=i[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},t.parseSctpDescription=function(e){const n=t.parseMLine(e),r=t.matchPrefix(e,"a=max-message-size:");let i;r.length>0&&(i=parseInt(r[0].substring(19),10)),isNaN(i)&&(i=65536);const a=t.matchPrefix(e,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substring(12),10),protocol:n.fmt,maxMessageSize:i};const s=t.matchPrefix(e,"a=sctpmap:");if(s.length>0){const e=s[0].substring(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:i}}},t.writeSctpDescription=function(e,t){let n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,n,r){let i;const a=void 0!==n?n:2;i=e||t.generateSessionId();return"v=0\r\no="+(r||"thisisadapterortc")+" "+i+" "+a+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){const r=t.splitLines(e);for(let t=0;t<r.length;t++)switch(r[t]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[t].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substring(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){const n=t.splitLines(e)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){const n=t.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;const n=t.splitLines(e);for(let t=0;t<n.length;t++)if(n[t].length<2||"="!==n[t].charAt(1))return!1;return!0},e.exports=t}($qe);var Yqe=$qe.exports;const Jqe=ie(Yqe),Zqe=ne({__proto__:null,default:Jqe},[Yqe]);function Qqe(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substring(2)),e.candidate&&e.candidate.length){const n=new t(e),r=Jqe.parseCandidate(e.candidate);for(const e in r)e in n||Object.defineProperty(n,e,{value:r[e]});return n.toJSON=function(){return{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,usernameFragment:n.usernameFragment}},n}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,oqe(e,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t))}function eXe(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||oqe(e,"icecandidate",e=>{if(e.candidate){const t=Jqe.parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e})}function tXe(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(e){if(!e||!e.sdp)return!1;const t=Jqe.splitSections(e.sdp);return t.shift(),t.some(e=>{const t=Jqe.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})}(arguments[0])){const e=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n}(arguments[0]),n=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n}(e),r=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const i=Jqe.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substring(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r}(arguments[0],e);let i;i=0===n&&0===r?Number.POSITIVE_INFINITY:0===n||0===r?Math.max(n,r):Math.min(n,r);const a={};Object.defineProperty(a,"maxMessageSize",{get:()=>i}),this._sctp=a}return n.apply(this,arguments)}}function nXe(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},oqe(e,"datachannel",e=>(t(e.channel,e.target),e))}function rXe(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function iXe(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter(e=>"a=extmap-allow-mixed"!==e.trim()).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function aXe(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function sXe(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!=typeof e||e.type&&e.sdp)return n.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}if(e.sdp||"offer"!==e.type&&"answer"!==e.type)return n.apply(this,[e]);return("offer"===e.type?this.createOffer:this.createAnswer).apply(this).then(e=>n.apply(this,[e]))})}const oXe=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:iXe,shimAddIceCandidateNullOrEmpty:aXe,shimConnectionState:rXe,shimMaxMessageSize:tXe,shimParameterlessSetLocalDescription:sXe,shimRTCIceCandidate:Qqe,shimRTCIceCandidateRelayProtocol:eXe,shimSendThrowTypeError:nXe},Symbol.toStringTag,{value:"Module"}));const lXe=function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=dqe,r=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const e=n.userAgentData.brands.find(e=>"Chromium"===e.brand);if(e)return{browser:"chrome",version:parseInt(e.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(sqe(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(sqe(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=parseInt(sqe(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=sqe(n.userAgent,/Version\/(\d+(\.?\d+))/,1)}return t}(e),i={browserDetails:r,commonShim:oXe,extractVersion:sqe,disableLog:lqe,disableWarnings:cqe,sdp:Zqe};switch(r.browser){case"chrome":if(!Cqe||!_qe||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(null===r.version)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=Cqe,aXe(e,r),sXe(e),vqe(e,r),xqe(e),_qe(e,r),yqe(e),Nqe(e,r),bqe(e),wqe(e),Sqe(e,r),Qqe(e),eXe(e),rXe(e),tXe(e,r),nXe(e),iXe(e,r);break;case"firefox":if(!Bqe||!Eqe||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=Bqe,aXe(e,r),sXe(e),Aqe(e,r),Eqe(e,r),Mqe(e),Pqe(e),kqe(e),Tqe(e),Oqe(e),Rqe(e),Iqe(e),Dqe(e),Lqe(e),Qqe(e),rXe(e),tXe(e,r),nXe(e);break;case"safari":if(!Xqe||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=Xqe,aXe(e,r),sXe(e),Gqe(e),Kqe(e),zqe(e),Fqe(e),Uqe(e),Wqe(e),Hqe(e),qqe(e),Qqe(e),eXe(e),tXe(e,r),nXe(e),iXe(e,r);break;default:n("Unsupported browser!")}return i}({window:"undefined"==typeof window?void 0:window});function cXe(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}class dXe{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const t=[],n=e.byteLength,r=Math.ceil(n/this.chunkedMTU);let i=0,a=0;for(;a<n;){const s=Math.min(n,a+this.chunkedMTU),o=e.slice(a,s),l={__peerData:this._dataCount,n:i,data:o,total:r};t.push(l),a=s,i++}return this._dataCount++,t}}}const uXe=lXe.default||lXe,hXe=new class{isWebRTCSupported(){return"undefined"!=typeof RTCPeerConnection}isBrowserSupported(){const e=this.getBrowser(),t=this.getVersion();return!!this.supportedBrowsers.includes(e)&&("chrome"===e?t>=this.minChromeVersion:"firefox"===e?t>=this.minFirefoxVersion:"safari"===e&&(!this.isIOS&&t>=this.minSafariVersion))}getBrowser(){return uXe.browserDetails.browser}getVersion(){return uXe.browserDetails.version||0}isUnifiedPlanSupported(){const e=this.getBrowser(),t=uXe.browserDetails.version||0;if("chrome"===e&&t<this.minChromeVersion)return!1;if("firefox"===e&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch(CI){}finally{n&&n.close()}return r}toString(){return`Supports:\n    browser:${this.getBrowser()}\n    version:${this.getVersion()}\n    isIOS:${this.isIOS}\n    isWebRTCSupported:${this.isWebRTCSupported()}\n    isBrowserSupported:${this.isBrowserSupported()}\n    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS="undefined"!=typeof navigator&&["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},pXe=e=>!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e),mXe=()=>Math.random().toString(36).slice(2),fXe={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};const gXe=new class extends dXe{noop(){}blobToArrayBuffer(e,t){const n=new FileReader;return n.onload=function(e){e.target&&t(e.target.result)},n.readAsArrayBuffer(e),n}binaryStringToArrayBuffer(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=255&e.charCodeAt(n);return t.buffer}isSecure(){return"https:"===location.protocol}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=fXe,this.browser=hXe.getBrowser(),this.browserVersion=hXe.getVersion(),this.pack=tqe,this.unpack=eqe,this.supports=function(){const e={browser:hXe.isBrowserSupported(),webRTC:hXe.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!e.webRTC)return e;let t;try{let n;t=new RTCPeerConnection(fXe),e.audioVideo=!0;try{n=t.createDataChannel("_PEERJSTEST",{ordered:!0}),e.data=!0,e.reliable=!!n.ordered;try{n.binaryType="blob",e.binaryBlob=!hXe.isIOS}catch(CI){}}catch(CI){}finally{n&&n.close()}}catch(CI){}finally{t&&t.close()}return e}(),this.validateId=pXe,this.randomToken=mXe}};var vXe,xXe=new class{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...t){const n=["PeerJS: ",...t];for(const r in n)n[r]instanceof Error&&(n[r]="("+n[r].name+") "+n[r].message)}constructor(){this._logLevel=0}},yXe=Object.prototype.hasOwnProperty,bXe="~";function wXe(){}function jXe(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function NXe(e,t,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new jXe(n,r||e,i),s=bXe?bXe+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],a]:e._events[s].push(a):(e._events[s]=a,e._eventsCount++),e}function _Xe(e,t){0===--e._eventsCount?e._events=new wXe:delete e._events[t]}function SXe(){this._events=new wXe,this._eventsCount=0}Object.create&&(wXe.prototype=Object.create(null),(new wXe).__proto__||(bXe=!1)),SXe.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)yXe.call(e,t)&&n.push(bXe?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},SXe.prototype.listeners=function(e){var t=bXe?bXe+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,a=new Array(i);r<i;r++)a[r]=n[r].fn;return a},SXe.prototype.listenerCount=function(e){var t=bXe?bXe+e:e,n=this._events[t];return n?n.fn?1:n.length:0},SXe.prototype.emit=function(e,t,n,r,i,a){var s=bXe?bXe+e:e;if(!this._events[s])return!1;var o,l,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,r),!0;case 5:return c.fn.call(c.context,t,n,r,i),!0;case 6:return c.fn.call(c.context,t,n,r,i,a),!0}for(l=1,o=new Array(d-1);l<d;l++)o[l-1]=arguments[l];c.fn.apply(c.context,o)}else{var u,h=c.length;for(l=0;l<h;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),d){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,n);break;case 4:c[l].fn.call(c[l].context,t,n,r);break;default:if(!o)for(u=1,o=new Array(d-1);u<d;u++)o[u-1]=arguments[u];c[l].fn.apply(c[l].context,o)}}return!0},SXe.prototype.on=function(e,t,n){return NXe(this,e,t,n,!1)},SXe.prototype.once=function(e,t,n){return NXe(this,e,t,n,!0)},SXe.prototype.removeListener=function(e,t,n,r){var i=bXe?bXe+e:e;if(!this._events[i])return this;if(!t)return _Xe(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||r&&!a.once||n&&a.context!==n||_Xe(this,i);else{for(var s=0,o=[],l=a.length;s<l;s++)(a[s].fn!==t||r&&!a[s].once||n&&a[s].context!==n)&&o.push(a[s]);o.length?this._events[i]=1===o.length?o[0]:o:_Xe(this,i)}return this},SXe.prototype.removeAllListeners=function(e){var t;return e?(t=bXe?bXe+e:e,this._events[t]&&_Xe(this,t)):(this._events=new wXe,this._eventsCount=0),this},SXe.prototype.off=SXe.prototype.removeListener,SXe.prototype.addListener=SXe.prototype.on,SXe.prefixed=bXe,SXe.EventEmitter=SXe,vXe=SXe;var CXe={};cXe(CXe,"ConnectionType",()=>AXe),cXe(CXe,"PeerErrorType",()=>MXe),cXe(CXe,"BaseConnectionErrorType",()=>EXe),cXe(CXe,"DataConnectionErrorType",()=>kXe),cXe(CXe,"SerializationType",()=>TXe),cXe(CXe,"SocketEventType",()=>PXe),cXe(CXe,"ServerMessageType",()=>OXe);var AXe=function(e){return e.Data="data",e.Media="media",e}({}),MXe=function(e){return e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc",e}({}),EXe=function(e){return e.NegotiationFailed="negotiation-failed",e.ConnectionClosed="connection-closed",e}({}),kXe=function(e){return e.NotOpenYet="not-open-yet",e.MessageToBig="message-too-big",e}({}),TXe=function(e){return e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json",e.None="raw",e}({}),PXe=function(e){return e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close",e}({}),OXe=function(e){return e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE",e}({});const RXe="1.5.5";class IXe extends vXe.EventEmitter{constructor(e,t,n,r,i,a=5e3){super(),this.pingInterval=a,this._disconnected=!0,this._messagesQueue=[];const s=e?"wss://":"ws://";this._baseUrl=s+t+":"+n+r+"peerjs?key="+i}start(e,t){this._id=e;const n=`${this._baseUrl}&id=${e}&token=${t}`;!this._socket&&this._disconnected&&(this._socket=new WebSocket(n+"&version="+RXe),this._disconnected=!1,this._socket.onmessage=e=>{let t;try{t=JSON.parse(e.data),xXe.log("Server message received:",t)}catch(CI){return void xXe.log("Invalid server message",e.data)}this.emit(PXe.Message,t)},this._socket.onclose=e=>{this._disconnected||(xXe.log("Socket closed.",e),this._cleanup(),this._disconnected=!0,this.emit(PXe.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),xXe.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen())return void xXe.log("Cannot send heartbeat, because socket closed");const e=JSON.stringify({type:OXe.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&1===this._socket.readyState}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const t of e)this.send(t)}send(e){if(this._disconnected)return;if(!this._id)return void this._messagesQueue.push(e);if(!e.type)return void this.emit(PXe.Error,"Invalid message");if(!this._wsOpen())return;const t=JSON.stringify(e);this._socket.send(t)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class DXe{constructor(e){this.connection=e}startConnection(e){const t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===AXe.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){const n=this.connection,r={ordered:!!e.reliable},i=t.createDataChannel(n.label,r);n._initializeDataChannel(i),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){xXe.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const t=this.connection.peer,n=this.connection.connectionId,r=this.connection.type,i=this.connection.provider;xXe.log("Listening for ICE candidates."),e.onicecandidate=e=>{e.candidate&&e.candidate.candidate&&(xXe.log(`Received ICE candidates for ${t}:`,e.candidate),i.socket.send({type:OXe.Candidate,payload:{candidate:e.candidate,type:r,connectionId:n},dst:t}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":xXe.log("iceConnectionState is failed, closing connections to "+t),this.connection.emitError(EXe.NegotiationFailed,"Negotiation of connection to "+t+" failed."),this.connection.close();break;case"closed":xXe.log("iceConnectionState is closed, closing connections to "+t),this.connection.emitError(EXe.ConnectionClosed,"Connection to "+t+" closed."),this.connection.close();break;case"disconnected":xXe.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=()=>{}}this.connection.emit("iceStateChanged",e.iceConnectionState)},xXe.log("Listening for data channel"),e.ondatachannel=e=>{xXe.log("Received data channel");const r=e.channel;i.getConnection(t,n)._initializeDataChannel(r)},xXe.log("Listening for remote stream"),e.ontrack=e=>{xXe.log("Received remote stream");const r=e.streams[0],a=i.getConnection(t,n);if(a.type===AXe.Media){const e=a;this._addStreamToMediaConnection(r,e)}}}cleanup(){xXe.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const t="closed"!==e.signalingState;let n=!1;const r=this.connection.dataChannel;r&&(n=!!r.readyState&&"closed"!==r.readyState),(t||n)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const n=await e.createOffer(this.connection.options.constraints);xXe.log("Created offer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp);try{await e.setLocalDescription(n),xXe.log("Set localDescription:",n,`for:${this.connection.peer}`);let r={sdp:n,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===AXe.Data){const e=this.connection;r={...r,label:e.label,reliable:e.reliable,serialization:e.serialization}}t.socket.send({type:OXe.Offer,payload:r,dst:this.connection.peer})}catch(c$e){"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"!=c$e&&(t.emitError(MXe.WebRTC,c$e),xXe.log("Failed to setLocalDescription, ",c$e))}}catch(n){t.emitError(MXe.WebRTC,n),xXe.log("Failed to createOffer, ",n)}}async _makeAnswer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const n=await e.createAnswer();xXe.log("Created answer."),this.connection.options.sdpTransform&&"function"==typeof this.connection.options.sdpTransform&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp);try{await e.setLocalDescription(n),xXe.log("Set localDescription:",n,`for:${this.connection.peer}`),t.socket.send({type:OXe.Answer,payload:{sdp:n,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(c$e){t.emitError(MXe.WebRTC,c$e),xXe.log("Failed to setLocalDescription, ",c$e)}}catch(n){t.emitError(MXe.WebRTC,n),xXe.log("Failed to create answer, ",n)}}async handleSDP(e,t){t=new RTCSessionDescription(t);const n=this.connection.peerConnection,r=this.connection.provider;xXe.log("Setting remote description",t);const i=this;try{await n.setRemoteDescription(t),xXe.log(`Set remoteDescription:${e} for:${this.connection.peer}`),"OFFER"===e&&await i._makeAnswer()}catch(c$e){r.emitError(MXe.WebRTC,c$e),xXe.log("Failed to setRemoteDescription, ",c$e)}}async handleCandidate(e){xXe.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),xXe.log(`Added ICE candidate for:${this.connection.peer}`)}catch(c$e){this.connection.provider.emitError(MXe.WebRTC,c$e),xXe.log("Failed to handleCandidate, ",c$e)}}_addTracksToConnection(e,t){if(xXe.log(`add tracks from stream ${e.id} to peer connection`),!t.addTrack)return xXe.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(n=>{t.addTrack(n,e)})}_addStreamToMediaConnection(e,t){xXe.log(`add stream ${e.id} to media connection ${t.connectionId}`),t.addStream(e)}}class LXe extends vXe.EventEmitter{emitError(e,t){xXe.error("Error:",t),this.emit("error",new BXe(`${e}`,t))}}class BXe extends Error{constructor(e,t){"string"==typeof t?super(t):(super(),Object.assign(this,t)),this.type=e}}class FXe extends LXe{get open(){return this._open}constructor(e,t,n){super(),this.peer=e,this.provider=t,this.options=n,this._open=!1,this.metadata=n.metadata}}const UXe=class e extends FXe{get type(){return AXe.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,n,r){super(t,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||e.ID_PREFIX+gXe.randomToken(),this._negotiator=new DXe(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{xXe.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{xXe.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){xXe.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const t=e.type,n=e.payload;switch(e.type){case OXe.Answer:this._negotiator.handleSDP(t,n.sdp),this._open=!0;break;case OXe.Candidate:this._negotiator.handleCandidate(n.candidate);break;default:xXe.warn(`Unrecognized message type:${t} from peer:${this.peer}`)}}answer(e,t={}){if(this._localStream)return void xXe.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const n=this.provider._getMessages(this.connectionId);for(const r of n)this.handleMessage(r);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};W=new WeakMap,Z(UXe,W,UXe.ID_PREFIX="mc_");let zXe=UXe;class HXe{constructor(e){this._options=e}_buildRequest(e){const t=this._options.secure?"https":"http",{host:n,port:r,path:i,key:a}=this._options,s=new URL(`${t}://${n}:${r}${i}${a}/${e}`);return s.searchParams.set("ts",`${Date.now()}${Math.random()}`),s.searchParams.set("version",RXe),fetch(s.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(200!==e.status)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){xXe.error("Error retrieving ID",e);let t="";throw"/"===this._options.path&&this._options.host!==gXe.CLOUD_HOST&&(t=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+t)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(200!==e.status){if(401===e.status){let e="";throw e=this._options.host===gXe.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+e)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw xXe.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}const VXe=class e extends FXe{get type(){return AXe.Data}constructor(t,n,r){super(t,n,r),this.connectionId=this.options.connectionId||e.ID_PREFIX+mXe(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new DXe(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{xXe.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=e=>{xXe.log(`DC#${this.connectionId} dc onmessage:`,e.data)},this.dataChannel.onclose=()=>{xXe.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){(null==e?void 0:e.flush)?this.send({__peerData:{type:"close"}}):(this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close")))}send(e,t=!1){if(this.open)return this._send(e,t);this.emitError(kXe.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.")}async handleMessage(e){const t=e.payload;switch(e.type){case OXe.Answer:await this._negotiator.handleSDP(e.type,t.sdp);break;case OXe.Candidate:await this._negotiator.handleCandidate(t.candidate);break;default:xXe.warn("Unrecognized message type:",e.type,"from peer:",this.peer)}}};K=new WeakMap,q=new WeakMap,Z(VXe,K,VXe.ID_PREFIX="dc_"),Z(VXe,q,VXe.MAX_BUFFERED_AMOUNT=8388608);let GXe=VXe;class WXe extends GXe{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",e=>this._handleDataMessage(e))}_bufferedSend(e){!this._buffering&&this._trySend(e)||(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>GXe.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(CI){return xXe.error(`DC#:${this.connectionId} Error when sending:`,CI),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open)return;if(0===this._buffer.length)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){(null==e?void 0:e.flush)?this.send({__peerData:{type:"close"}}):(this._buffer=[],this._bufferSize=0,super.close())}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class KXe extends WXe{close(e){super.close(e),this._chunkedData={}}constructor(e,t,n){super(e,t,n),this.chunker=new dXe,this.serialization=TXe.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const t=eqe(e),n=t.__peerData;if(n)return"close"===n.type?void this.close():void this._handleChunk(t);this.emit("data",t)}_handleChunk(e){const t=e.__peerData,n=this._chunkedData[t]||{data:[],count:0,total:e.total};if(n.data[e.n]=new Uint8Array(e.data),n.count++,this._chunkedData[t]=n,n.total===n.count){delete this._chunkedData[t];const e=function(e){let t=0;for(const i of e)t+=i.byteLength;const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.byteLength;return n}(n.data);this._handleDataMessage({data:e})}}_send(e,t){const n=tqe(e);if(n instanceof Promise)return this._send_blob(n);!t&&n.byteLength>this.chunker.chunkedMTU?this._sendChunks(n):this._bufferedSend(n)}async _send_blob(e){const t=await e;t.byteLength>this.chunker.chunkedMTU?this._sendChunks(t):this._bufferedSend(t)}_sendChunks(e){const t=this.chunker.chunk(e);xXe.log(`DC#${this.connectionId} Try to send ${t.length} chunks...`);for(const n of t)this.send(n,!0)}}class qXe extends WXe{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,t){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=TXe.None}}class XXe extends WXe{_handleDataMessage({data:e}){const t=this.parse(this.decoder.decode(e)),n=t.__peerData;n&&"close"===n.type?this.close():this.emit("data",t)}_send(e,t){const n=this.encoder.encode(this.stringify(e));n.byteLength>=gXe.chunkedMTU?this.emitError(kXe.MessageToBig,"Message too big for JSON channel"):this._bufferedSend(n)}constructor(...e){super(...e),this.serialization=TXe.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}const $Xe=class e extends LXe{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[t,n]of this._connections)e[t]=n;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,n){let r;super(),this._serializers={raw:qXe,json:XXe,binary:KXe,"binary-utf8":KXe,default:KXe},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map,t&&t.constructor==Object?n=t:t&&(r=t.toString()),n={debug:0,host:gXe.CLOUD_HOST,port:gXe.CLOUD_PORT,path:"/",key:e.DEFAULT_KEY,token:gXe.randomToken(),config:gXe.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},"/"===this._options.host&&(this._options.host=window.location.hostname),this._options.path&&("/"!==this._options.path[0]&&(this._options.path="/"+this._options.path),"/"!==this._options.path[this._options.path.length-1]&&(this._options.path+="/")),void 0===this._options.secure&&this._options.host!==gXe.CLOUD_HOST?this._options.secure=gXe.isSecure():this._options.host==gXe.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&xXe.setLogFunction(this._options.logFunction),xXe.logLevel=this._options.debug||0,this._api=new HXe(n),this._socket=this._createServerConnection(),gXe.supports.audioVideo||gXe.supports.data?!r||gXe.validateId(r)?r?this._initialize(r):this._api.retrieveId().then(e=>this._initialize(e)).catch(e=>this._abort(MXe.ServerError,e)):this._delayedAbort(MXe.InvalidID,`ID "${r}" is invalid`):this._delayedAbort(MXe.BrowserIncompatible,"The current browser does not support WebRTC")}_createServerConnection(){const e=new IXe(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(PXe.Message,e=>{this._handleMessage(e)}),e.on(PXe.Error,e=>{this._abort(MXe.SocketError,e)}),e.on(PXe.Disconnected,()=>{this.disconnected||(this.emitError(MXe.Network,"Lost connection to server."),this.disconnect())}),e.on(PXe.Close,()=>{this.disconnected||this._abort(MXe.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const t=e.type,n=e.payload,r=e.src;switch(t){case OXe.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case OXe.Error:this._abort(MXe.ServerError,n.msg);break;case OXe.IdTaken:this._abort(MXe.UnavailableID,`ID "${this.id}" is taken`);break;case OXe.InvalidKey:this._abort(MXe.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case OXe.Leave:xXe.log(`Received leave message from ${r}`),this._cleanupPeer(r),this._connections.delete(r);break;case OXe.Expire:this.emitError(MXe.PeerUnavailable,`Could not connect to peer ${r}`);break;case OXe.Offer:{const e=n.connectionId;let t=this.getConnection(r,e);if(t&&(t.close(),xXe.warn(`Offer received for existing Connection ID:${e}`)),n.type===AXe.Media){const i=new zXe(r,this,{connectionId:e,_payload:n,metadata:n.metadata});t=i,this._addConnection(r,t),this.emit("call",i)}else{if(n.type!==AXe.Data)return void xXe.warn(`Received malformed connection type:${n.type}`);{const i=new this._serializers[n.serialization](r,this,{connectionId:e,_payload:n,metadata:n.metadata,label:n.label,serialization:n.serialization,reliable:n.reliable});t=i,this._addConnection(r,t),this.emit("connection",i)}}const i=this._getMessages(e);for(const n of i)t.handleMessage(n);break}default:{if(!n)return void xXe.warn(`You received a malformed message from ${r} of type ${t}`);const i=n.connectionId,a=this.getConnection(r,i);a&&a.peerConnection?a.handleMessage(e):i?this._storeMessage(i,e):xXe.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)}_getMessages(e){const t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]}connect(e,t={}){if(t={serialization:"default",...t},this.disconnected)return xXe.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError(MXe.Disconnected,"Cannot connect to new Peer after disconnecting from server.");const n=new this._serializers[t.serialization](e,this,t);return this._addConnection(e,n),n}call(e,t,n={}){if(this.disconnected)return xXe.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError(MXe.Disconnected,"Cannot connect to new Peer after disconnecting from server.");if(!t)return void xXe.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");const r=new zXe(e,this,{...n,_stream:t});return this._addConnection(e,r),r}_addConnection(e,t){xXe.log(`add connection ${t.type}:${t.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)}_removeConnection(e){const t=this._connections.get(e.peer);if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,t){const n=this._connections.get(e);if(!n)return null;for(const r of n)if(r.connectionId===t)return r;return null}_delayedAbort(e,t){setTimeout(()=>{this._abort(e,t)},0)}_abort(e,t){xXe.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(xXe.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const t=this._connections.get(e);if(t)for(const n of t)n.close()}disconnect(){if(this.disconnected)return;const e=this.id;xXe.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)xXe.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`);xXe.error("In a hurry? We're still trying to make the initial connection!")}}listAllPeers(e=e=>{}){this._api.listAllPeers().then(t=>e(t)).catch(e=>this._abort(MXe.ServerError,e))}};X=new WeakMap,Z($Xe,X,$Xe.DEFAULT_KEY="peerjs");var YXe=$Xe;const JXe=[{name:"Khng",type:"none",icon:"",filter:"none"},{name:"Lm m",type:"blur",icon:"",filter:"blur(3px)"},{name:"en trng",type:"grayscale",icon:"",filter:"grayscale(100%)"},{name:"Nu c in",type:"sepia",icon:"",filter:"sepia(100%)"},{name:"Vintage",type:"vintage",icon:"",filter:"sepia(50%) contrast(1.2) brightness(1.1)"},{name:"m p",type:"warm",icon:"",filter:"hue-rotate(15deg) saturate(1.3)"},{name:"Lnh",type:"cold",icon:"",filter:"hue-rotate(180deg) saturate(1.2)"},{name:"Sng",type:"bright",icon:"",filter:"brightness(1.3)"},{name:"Ti",type:"dark",icon:"",filter:"brightness(0.7) contrast(1.2)"},{name:"Tng phn",type:"contrast",icon:"",filter:"contrast(1.5) saturate(1.4)"}],ZXe=()=>{const e=Zj(),{conversationId:t,callType:n,callId:r}=eN(),[i,a]=Ve.useState(null),s=Ve.useRef(null),[o,l]=Ve.useState(null),[c,d]=Ve.useState({}),[u,h]=Ve.useState(!1),[p,m]=Ve.useState(!1),[f,g]=Ve.useState(!1),[v,x]=Ve.useState([]),y=Ve.useRef(null),b=Ve.useRef(null),w=Ve.useRef(null),[j,N]=Ve.useState(!1),[_,S]=Ve.useState("none"),[C,A]=Ve.useState(null),M=Ve.useRef(null),E=Ve.useRef(),k="http://localhost:3000/call",T=Ge.useCallback(async()=>{try{const e={video:"video"===n,audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}},t=await navigator.mediaDevices.getUserMedia(e);t.getTracks().map(e=>({kind:e.kind,enabled:e.enabled,muted:e.muted,readyState:e.readyState}));const r=t.getAudioTracks()[0];r&&(r.enabled=!0,r.enabled,r.muted);const i=t.getVideoTracks()[0];i&&(i.enabled=!f,i.enabled),a(t),s.current=t,A(t)}catch(c$e){const t=c$e;t.name,t.message,QI.error("Khng th truy cp camera/mic: "+t.message+". Vui lng kim tra quyn truy cp."),a(null),s.current=null,A(null)}},[n,f]);Ve.useEffect(()=>(T().catch(e=>{}),()=>{s.current&&s.current.getTracks().forEach(e=>e.stop())}),[T]),Ve.useEffect(()=>{let i=(()=>{const e=localStorage.getItem("vibeventure_token")||localStorage.getItem("token");if(e)return e;const t=sessionStorage.getItem("token");if(t)return t;const n=document.cookie.match(/(?:^|; )token=([^;]+)/);return n?decodeURIComponent(n[1]):null})();if(!i)return void QI.error("Khng tm thy token. Vui lng ng nhp li.");i.startsWith("Bearer ")&&(i=i.slice(7));const a=Jbe(k,{auth:{token:i},transports:["websocket","polling"]});return b.current=a,a.on("connect",()=>{h(!0);const e=new YXe({host:"0.peerjs.com",port:443,path:"/",secure:!0,debug:0});y.current=e,e.on("open",e=>{a.emit("register_peer",e),t&&n&&r&&a.emit("initiate_call",{callId:r,conversationId:t,callType:n})}),e.on("call",e=>{if(e.peer,s.current){const t=s.current.getAudioTracks()[0];null==t||t.enabled,null==t||t.muted,e.answer(s.current)}else T().then(()=>{if(s.current){const t=s.current.getAudioTracks()[0];null==t||t.enabled,null==t||t.muted,e.answer(s.current)}}).catch(e=>{});d(t=>({...t,[e.peer]:e})),e.on("stream",t=>{e.peer,t.getAudioTracks().map(e=>({kind:e.kind,enabled:e.enabled})),R(t,e.peer,"Khng xc nh","/images/avatars/Avt-Default.png")}),e.on("close",()=>I(e.peer)),e.on("error",t=>{I(e.peer)})}),e.on("error",e=>{h(!1)})}),a.on("connect_error",e=>{e.message,h(!1)}),a.on("incoming_call",e=>{l(e.callId),setTimeout(()=>{var t,n;(null==(t=y.current)?void 0:t.id)&&(e.callId,y.current.id,null==(n=b.current)||n.emit("join_call",{callId:e.callId,peerId:y.current.id}))},500)}),a.on("call_initiated",e=>{l(e.callId),setTimeout(()=>{var t,n;(null==(t=y.current)?void 0:t.id)&&(e.callId,y.current.id,null==(n=b.current)||n.emit("join_call",{callId:e.callId,peerId:y.current.id}))},500)}),a.on("call_joined",e=>{l(e.callId),s.current?D(e):T().then(()=>{s.current&&D(e)}).catch(e=>{})}),a.on("user_joined_call",e=>{e.user,e.peerId,QI.success((e.user.name||"Ai ")+"  tham gia cuc gi"),s.current?L(e):T().then(()=>{s.current&&(s.current.getTracks().map(e=>({kind:e.kind,enabled:e.enabled})),L(e))}).catch(e=>(e.name,void e.message))}),a.on("user_left_call",e=>{e.user,QI((e.user.name||"Ai ")+"  ri khi cuc gi",{icon:""}),e.user.id&&I(e.user.id)}),a.on("call_ended",t=>{B(),l(null),e("/messages"),setTimeout(()=>{QI.success("Cuc gi  kt thc")},100)}),a.on("call_declined",e=>{var t;e.declinedBy,QI.error(((null==(t=e.declinedBy)?void 0:t.name)||"Ngi dng")+"  t chi cuc gi")}),a.on("call_error",e=>{e.message,QI.error("Li cuc gi: "+e.message)}),a.on("connect_error",e=>{e.message,h(!1)}),a.on("disconnect",e=>{h(!1)}),()=>{b.current&&b.current.disconnect(),y.current&&y.current.destroy(),B()}},[k]),Ve.useEffect(()=>{var e;u&&(null==(e=y.current)?void 0:e.id)&&s.current&&t&&n&&r&&(l(r),setTimeout(()=>{var e,t;(null==(e=y.current)?void 0:e.id)&&(y.current.id,null==(t=b.current)||t.emit("join_call",{callId:r,peerId:y.current.id}))},1e3))},[u,t,n,r]),Ve.useEffect(()=>{if(navigator.permissions.query({name:"microphone"}).then(e=>{e.state}),window.AudioContext||window.webkitAudioContext){const e=new(window.AudioContext||window.webkitAudioContext);"suspended"===e.state&&e.resume()}},[]);const P=Ge.useCallback((e,t)=>{if(!M.current){const e=document.createElement("canvas");e.width=640,e.height=480,M.current=e}const n=M.current,r=n.getContext("2d");if(!r)return null;const i=document.createElement("video");i.srcObject=e,i.play();const a=n.captureStream(30),s=()=>{if(i.readyState>=2){switch(n.width=i.videoWidth||640,n.height=i.videoHeight||480,r.save(),t){case"blur":r.filter="blur(3px)";break;case"grayscale":r.filter="grayscale(100%)";break;case"sepia":r.filter="sepia(100%)";break;case"vintage":r.filter="sepia(50%) contrast(1.2) brightness(1.1)";break;case"warm":r.filter="hue-rotate(15deg) saturate(1.3)";break;case"cold":r.filter="hue-rotate(180deg) saturate(1.2)";break;case"bright":r.filter="brightness(1.3)";break;case"dark":r.filter="brightness(0.7) contrast(1.2)";break;case"contrast":r.filter="contrast(1.5) saturate(1.4)";break;default:r.filter="none"}r.drawImage(i,0,0,n.width,n.height),r.restore()}"none"!==t&&(E.current=requestAnimationFrame(s))};return i.addEventListener("loadeddata",()=>{s()}),a},[]),O=Ge.useCallback(async e=>{if(s.current)if(E.current&&cancelAnimationFrame(E.current),"none"===e)A(s.current),Object.values(c).forEach(e=>{var t;const n=null==(t=e.peerConnection)?void 0:t.getSenders().find(e=>e.track&&"video"===e.track.kind);if(n&&s.current){const e=s.current.getVideoTracks()[0];e&&n.replaceTrack(e)}});else{const t=P(s.current,e);t&&(A(t),Object.values(c).forEach(e=>{var n;const r=null==(n=e.peerConnection)?void 0:n.getSenders().find(e=>e.track&&"video"===e.track.kind);if(r){const e=t.getVideoTracks()[0];e&&r.replaceTrack(e)}}))}},[s.current,c,P]),R=(e,t,n="Khng r",r="/images/avatars/Avt-Default.png")=>{e.getAudioTracks().map(e=>({kind:e.kind,enabled:e.enabled})),x(i=>{const a=i.findIndex(e=>e.id===t);if(a>=0){const t=[...i];return t[a]={...t[a],stream:e,name:n,avatar:r},t}return[...i,{id:t,name:n,stream:e,avatar:r,isLocal:!1}]})},I=e=>{x(t=>t.filter(t=>t.id!==e))},D=e=>{var t,n;if(null==(t=s.current)||t.getTracks().map(e=>({kind:e.kind,enabled:e.enabled,muted:e.muted})),!s.current)return void T().then(()=>{s.current&&D(e)}).catch(e=>{});const r=s.current.getAudioTracks()[0];r&&(r.enabled=!p,r.enabled),x(e=>{const t=[...e];if(!t.find(e=>e.isLocal)){const e=JSON.parse(localStorage.getItem("vibeventure_user")||localStorage.getItem("user")||"{}");t.push({id:"local",name:e.name||"Bn",stream:s.current,avatar:e.avatar||"/images/avatars/Avt-Default.png",isLocal:!0})}return t}),null==(n=e.participants)||n.forEach(e=>{var t,n,r,i;const a=e.peerId;if(a&&a!==(null==(t=y.current)?void 0:t.id)){e.name;const t=null==(n=y.current)?void 0:n.call(a,s.current);t?(d(e=>({...e,[a]:t})),t.on("stream",t=>{e.name,e.avatar,t.getAudioTracks().map(e=>({kind:e.kind,enabled:e.enabled})),R(t,a,e.name,e.avatar)}),t.on("close",()=>I(a)),t.on("error",t=>{e.name})):(e.name,null==(r=y.current)||r.disconnected,null==(i=y.current)||i.destroyed)}})},L=e=>{var t,n,r,i,a;if(null==(t=s.current)||t.getTracks().map(e=>({kind:e.kind,enabled:e.enabled,muted:e.muted})),!s.current)return void T().then(()=>{s.current&&L(e)}).catch(e=>(e.name,void e.message));const o=s.current.getAudioTracks()[0];o&&(o.enabled=!p,o.enabled);const l=e.peerId;if(l!==(null==(n=y.current)?void 0:n.id)){e.user.name;const t=null==(r=y.current)?void 0:r.call(l,s.current);t?(d(e=>({...e,[l]:t})),t.on("stream",t=>{e.user.name,t.getAudioTracks().map(e=>({kind:e.kind,enabled:e.enabled,muted:e.muted})),R(t,l,e.user.name,e.user.avatar)}),t.on("close",()=>I(l)),t.on("error",t=>{e.user.name})):(e.user.name,null==(i=y.current)||i.disconnected,null==(a=y.current)||a.destroyed)}},B=()=>{s.current&&(s.current.getTracks().forEach(e=>e.stop()),a(null),s.current=null),x([])};return Ve.useEffect(()=>()=>{E.current&&cancelAnimationFrame(E.current)},[]),Ve.useEffect(()=>{if(w.current&&(C||i))try{const e=w.current;e.muted=!0,e.playsInline=!0,e.autoplay=!0,e.srcObject=C||i;const t=e.play();t&&t.catch(e=>{})}catch(c$e){}},[C,i]),Ve.useEffect(()=>{if(w.current&&i)try{const e=w.current;e.muted=!0,e.playsInline=!0,e.autoplay=!0,e.srcObject=i;const t=e.play();t&&t.catch(e=>{})}catch(c$e){}},[i]),Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(ZI,{position:"top-center",toastOptions:{duration:4e3,style:{background:"#1f2937",color:"#fff",border:"1px solid #374151"},success:{iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#fff"}}}}),Qe.jsxs("div",{className:"h-screen bg-gray-900 flex flex-col",children:[j&&Qe.jsxs("div",{className:"absolute top-4 left-4 right-4 bg-black/80 backdrop-blur-md rounded-xl p-4 z-50 border border-gray-700",children:[Qe.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Qe.jsx("h3",{className:"text-white font-semibold text-lg",children:"B lc video"}),Qe.jsx("button",{onClick:()=>N(!1),className:"w-8 h-8 rounded-full bg-gray-700 hover:bg-gray-600 flex items-center justify-center text-white transition-colors",children:Qe.jsx(Fg,{className:"w-4 h-4"})})]}),Qe.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3",children:JXe.map(e=>Qe.jsxs("button",{onClick:()=>{return t=e.type,S(t),O(t),void QI.success(` p dng filter: ${null==(n=JXe.find(e=>e.type===t))?void 0:n.name}`);var t,n},className:"p-3 rounded-lg border-2 transition-all duration-200 "+(_===e.type?"border-blue-500 bg-blue-500/20 text-blue-300":"border-gray-600 bg-gray-800 hover:bg-gray-700 text-white"),children:[Qe.jsx("div",{className:"text-2xl mb-1",children:e.icon}),Qe.jsx("div",{className:"text-sm font-medium",children:e.name})]},e.type))})]}),Qe.jsx("div",{className:"flex-1 overflow-y-auto p-2 md:p-4",children:0!==v.length||i?Qe.jsx("div",{className:"relative h-full w-full bg-black overflow-hidden",children:v.length<=2?Qe.jsxs(Qe.Fragment,{children:[v.filter(e=>!e.isLocal).map(e=>Qe.jsxs("div",{className:"absolute inset-0",children:[e.stream?Qe.jsx("video",{autoPlay:!0,playsInline:!0,muted:!1,className:"w-full h-full object-cover rounded-xl transform -scale-x-100",ref:t=>{t&&e.stream&&(t.srcObject=e.stream)}}):Qe.jsx("div",{className:"w-full h-full bg-gray-900 flex items-center justify-center",children:e.avatar?Qe.jsx("img",{src:e.avatar,alt:e.name,className:"w-32 h-32 rounded-full object-cover border-4 border-gray-700"}):Qe.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-5xl font-bold",children:e.name.charAt(0).toUpperCase()})}),Qe.jsx("div",{className:"absolute bottom-4 left-4 bg-black/50 backdrop-blur-md px-4 py-2 rounded-lg",children:Qe.jsx("span",{className:"text-white text-lg font-semibold",children:e.name})})]},e.id)),v.filter(e=>e.isLocal).map(e=>Qe.jsx("div",{className:"absolute bottom-4 right-4 w-32 h-48 md:w-44 md:h-64 rounded-xl overflow-hidden shadow-lg border border-white/20 cursor-pointer hover:scale-105 transition-transform",children:f?Qe.jsx("div",{className:"w-full h-full bg-gray-800 flex items-center justify-center",children:Qe.jsx(Rg,{className:"w-10 h-10 text-gray-400"})}):C||e.stream?Qe.jsx("video",{autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover rounded-xl transform -scale-x-100",ref:t=>{t&&(C||e.stream)&&(t.srcObject=C||e.stream,w.current=t)}}):Qe.jsx("div",{className:"w-full h-full bg-gray-700 flex items-center justify-center",children:Qe.jsx("span",{className:"text-white text-3xl font-bold",children:e.name.charAt(0).toUpperCase()})})},e.id))]}):Qe.jsx("div",{className:"grid gap-2 w-full h-full p-2 "+(F=v.length,F<=1?"grid-cols-1 grid-rows-1":2===F?"grid-cols-1 grid-rows-2 md:grid-cols-2 md:grid-rows-1":3===F?"grid-cols-1 grid-rows-3 sm:grid-cols-2 sm:grid-rows-[1fr_1fr] md:grid-cols-3 md:grid-rows-1":4===F?"grid-cols-2 grid-rows-2":F<=6?"grid-cols-2 grid-rows-3 md:grid-cols-3 md:grid-rows-2":F<=9?"grid-cols-3 grid-rows-3":"grid-cols-2 sm:grid-cols-3 lg:grid-cols-4"),children:v.map(e=>Qe.jsxs("div",{className:"relative bg-gray-900 rounded-xl overflow-hidden flex items-center justify-center",children:[e.isLocal?f?Qe.jsx("div",{className:"w-full h-full bg-gray-800 flex items-center justify-center",children:Qe.jsx(Rg,{className:"w-16 h-16 text-gray-400"})}):C||e.stream?Qe.jsx("video",{autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover transform -scale-x-100 border-4 border-white/20",ref:t=>{t&&(C||e.stream)&&(t.srcObject=C||e.stream)}}):Qe.jsx("div",{className:"w-full h-full bg-gray-800 flex items-center justify-center",children:e.avatar?Qe.jsx("img",{src:e.avatar,alt:e.name,className:"w-24 h-24 rounded-full object-cover border-4 border-gray-700"}):Qe.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-3xl font-bold",children:e.name.charAt(0).toUpperCase()})}):e.stream?Qe.jsx("video",{autoPlay:!0,playsInline:!0,muted:!1,className:"w-full h-full object-cover transform -scale-x-100",ref:t=>{t&&e.stream&&(t.srcObject=e.stream)}}):Qe.jsx("div",{className:"w-full h-full bg-gray-800 flex items-center justify-center",children:e.avatar?Qe.jsx("img",{src:e.avatar,alt:e.name,className:"w-24 h-24 rounded-full object-cover border-4 border-gray-700"}):Qe.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-3xl font-bold",children:e.name.charAt(0).toUpperCase()})}),Qe.jsx("div",{className:"absolute bottom-2 left-2 bg-black/50 backdrop-blur-md px-2 py-1 rounded-md",children:Qe.jsx("span",{className:"text-white text-sm font-medium",children:e.name})})]},e.id))})}):Qe.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-white",children:[Qe.jsx("div",{className:"w-20 h-20 bg-gray-800 rounded-full flex items-center justify-center mb-4",children:Qe.jsx(Vf,{className:"w-10 h-10 text-gray-400"})}),Qe.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Phng ch..."}),Qe.jsx("p",{className:"text-gray-400 text-center",children:"ang thit lp kt ni ca bn..."})]})}),o&&Qe.jsx("div",{className:"bg-black/80 backdrop-blur-sm border-t border-gray-700",children:Qe.jsxs("div",{className:"flex items-center justify-center space-x-4 md:space-x-6 py-3 md:py-4 px-4 md:px-6",children:[Qe.jsx("button",{onClick:()=>{if(s.current){const e=s.current.getAudioTracks()[0];if(e){const t=!p;e.enabled=!t,m(t),t?QI(" tt mic",{icon:""}):QI(" bt mic",{icon:""}),Object.values(c).forEach(e=>{if(e.peerConnection&&e.peerConnection.getSenders){const n=e.peerConnection.getSenders().find(e=>e.track&&"audio"===e.track.kind);n&&n.track&&(n.track.enabled=!t)}})}else QI.error("Khng th iu khin mic")}else QI.error("Khng c kt ni mic")},className:"w-10 h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center transition-all duration-200 "+(p?"bg-red-500 hover:bg-red-600 text-white":"bg-gray-700 hover:bg-gray-600 text-white"),title:p?"Bt mic":"Tt mic",children:p?Qe.jsx(Ef,{className:"w-4 h-4 md:w-5 md:h-5"}):Qe.jsx(kf,{className:"w-4 h-4 md:w-5 md:h-5"})}),"video"===n&&Qe.jsxs(Qe.Fragment,{children:[Qe.jsx("button",{onClick:()=>{if(s.current){const e=s.current.getVideoTracks()[0];if(e){const t=!f;e.enabled=!t,g(t),t?QI(" tt camera",{icon:""}):QI(" bt camera",{icon:""})}else QI.error("Khng th iu khin camera")}else QI.error("Khng c kt ni camera")},className:"w-10 h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center transition-all duration-200 "+(f?"bg-red-500 hover:bg-red-600 text-white":"bg-gray-700 hover:bg-gray-600 text-white"),title:f?"Bt camera":"Tt camera",children:f?Qe.jsx(Rg,{className:"w-4 h-4 md:w-5 md:h-5"}):Qe.jsx(Ig,{className:"w-4 h-4 md:w-5 md:h-5"})}),Qe.jsx("button",{onClick:()=>N(!j),className:"w-10 h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center transition-all duration-200 "+(j?"bg-blue-500 hover:bg-blue-600 text-white":"bg-gray-700 hover:bg-gray-600 text-white"),title:"B lc video",children:Qe.jsx(If,{className:"w-4 h-4 md:w-5 md:h-5"})})]}),Qe.jsx("button",{onClick:()=>{var t;o?(null==(t=b.current)||t.emit("end_call",{callId:o}),B(),Object.values(c).forEach(e=>e.close()),d({}),y.current&&y.current.disconnect(),l(null),m(!1),g(!1),x([]),e("/messages")):QI.error("Khng th kt thc cuc gi")},className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-red-500 hover:bg-red-600 flex items-center justify-center text-white transition-colors",title:"Kt thc cuc gi",children:Qe.jsx(Hf,{className:"w-4 h-4 md:w-5 md:h-5"})})]})})]})]});var F},QXe=["in thoi & Ph kin","Laptop & My tnh","Thi trang nam","Thi trang n","ng h","Giy dp","Ti xch","Ph kin thi trang","M phm","Sc khe"," gia dng","in t","Th thao","Sch","Khc"],e$e=["XS","S","M","L","XL","XXL","XXXL"],t$e=["en","Trng","Xm","","Xanh dng","Xanh l","Vng","Hng","Nu","Cam"],n$e={"en":"#000000","Trng":"#ffffff","Xm":"#6b7280","":"#ef4444","Xanh dng":"#3b82f6","Xanh l":"#10b981","Vng":"#f59e0b","Hng":"#ec4899","Nu":"#a3a3a3",Cam:"#f97316"};function r$e(){const{id:e}=eN(),t=Zj(),{toast:n}=vh(),{user:r}=Pae(),[i,a]=Ve.useState(!0),[s,o]=Ve.useState(!1),[l,c]=Ve.useState(null),[d,u]=Ve.useState("basic"),[h,p]=Ve.useState({name:"",description:"",category:"",brand:"",price:0,original_price:0,discount:0,quantity:0,status:"active",flash_sale:!1,sale_price:0,sale_quantity:0,is_live:!1,release_date:"",shipping_fee:0}),[m,f]=Ve.useState([]),[g,v]=Ve.useState([]),[x,y]=Ve.useState(""),[b,w]=Ve.useState([]);Ve.useEffect(()=>{e&&(null==r?void 0:r.id)&&j()},[e,r]);const j=async()=>{if(e&&(null==r?void 0:r.id)){a(!0);try{const i=await fetch(`http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/vendor/get_product_edit.php?product_id=${e}&user_id=${r.id}`),a=await i.json();if(a.success){const e=a.product;c(e),p({name:e.name||"",description:e.description||"",category:e.category||"",brand:e.brand||"",price:e.price||0,original_price:e.original_price||0,discount:e.discount||0,quantity:e.quantity||0,status:e.status||"active",flash_sale:e.flash_sale||!1,sale_price:e.sale_price||0,sale_quantity:e.sale_quantity||0,is_live:e.is_live||!1,release_date:e.release_date||"",shipping_fee:e.shipping_fee||0}),f(e.sizes||[]),v(e.colors||[]),w(e.tags||[])}else n({title:"Li",description:a.error||"Khng th ti thng tin sn phm",variant:"destructive"}),t("/vendor-management/product-management")}catch(i){n({title:"Li",description:"Khng th kt ni n server",variant:"destructive"})}finally{a(!1)}}},N=()=>{x.trim()&&!b.includes(x.trim())&&(w([...b,x.trim()]),y(""))},_=[{id:"basic",label:"Thng tin c bn",icon:Rf,color:"from-blue-500 to-cyan-500"},{id:"pricing",label:"Gi & Tn kho",icon:Lm,color:"from-green-500 to-emerald-500"},{id:"variants",label:"Bin th",icon:If,color:"from-purple-500 to-pink-500"},{id:"settings",label:"Ci t",icon:rg,color:"from-orange-500 to-red-500"}];return i?Qe.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:Qe.jsxs(QT.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-4",children:[Qe.jsx("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-orange-500 via-red-500 to-pink-500 mx-auto w-20 h-20 flex items-center justify-center shadow-xl",children:Qe.jsx(vf,{className:"w-8 h-8 animate-spin text-white"})}),Qe.jsxs("div",{children:[Qe.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"ang ti thng tin sn phm"}),Qe.jsx("p",{className:"text-muted-foreground",children:"Vui lng i trong giy lt..."})]})]})}):l?Qe.jsxs("div",{className:"min-h-screen bg-background p-6 space-y-8",children:[Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"relative",children:[Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-500/5 via-red-500/5 to-pink-500/5 rounded-3xl -z-10"}),Qe.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6 p-8",children:[Qe.jsxs("div",{className:"flex items-start gap-6",children:[Qe.jsx(AP,{variant:"outline",size:"icon",onClick:()=>t("/vendor-management/product-management"),className:"rounded-xl hover:bg-muted border-border",children:Qe.jsx(Zp,{className:"w-4 h-4"})}),Qe.jsx(QT.div,{className:"p-4 rounded-2xl bg-gradient-to-br from-orange-500 via-red-500 to-pink-500 shadow-xl",animate:{rotate:[0,5,-5,0],scale:[1,1.05,1]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:Qe.jsx(Uf,{className:"w-8 h-8 text-white"})}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs("div",{children:[Qe.jsx("h1",{className:"text-4xl md:text-5xl font-black bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 bg-clip-text text-transparent",children:"Chnh sa sn phm"}),Qe.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[Qe.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"}),Qe.jsxs("p",{className:"text-muted-foreground",children:["Cp nht thng tin: ",Qe.jsx("span",{className:"font-medium text-foreground",children:l.name})]})]})]}),Qe.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl",children:" Chnh sa v cp nht thng tin sn phm mt cch d dng v chuyn nghip"})]})]}),Qe.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[Qe.jsxs("div",{className:"text-center p-4 rounded-xl bg-muted/50 border border-border",children:[Qe.jsx("div",{className:"text-xl font-bold text-foreground",children:l.current_stock}),Qe.jsx("div",{className:"text-xs text-muted-foreground",children:"Tn kho"})]}),Qe.jsxs("div",{className:"text-center p-4 rounded-xl bg-muted/50 border border-border",children:[Qe.jsx("div",{className:"text-xl font-bold text-foreground",children:l.sold}),Qe.jsx("div",{className:"text-xs text-muted-foreground",children:" bn"})]}),Qe.jsxs("div",{className:"text-center p-4 rounded-xl bg-muted/50 border border-border",children:[Qe.jsxs("div",{className:"text-xl font-bold text-primary",children:[l.price.toLocaleString(),""]}),Qe.jsx("div",{className:"text-xs text-muted-foreground",children:"Gi hin ti"})]})]})]})]}),Qe.jsxs("form",{onSubmit:async i=>{if(i.preventDefault(),(null==r?void 0:r.id)&&e)if(!h.name||h.price<=0)n({title:"Li",description:"Vui lng in y  thng tin bt buc",variant:"destructive"});else{o(!0);try{const i=await fetch("http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/vendor/update_product.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_id:parseInt(e),user_id:r.id,...h,sizes:m,colors:g,tags:b})}),a=await i.json();a.success?(n({title:"Thnh cng",description:"Cp nht sn phm thnh cng"}),t("/vendor-management/products")):n({title:"Li",description:a.error||"Khng th cp nht sn phm",variant:"destructive"})}catch(a){n({title:"Li",description:"Khng th kt ni n server",variant:"destructive"})}finally{o(!1)}}},className:"space-y-8",children:[Qe.jsx(QT.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex justify-center",children:Qe.jsx("div",{className:"flex items-center gap-4 p-2 bg-muted/50 rounded-2xl border border-border",children:_.map((e,t)=>Qe.jsxs(QT.button,{type:"button",onClick:()=>u(e.id),className:"flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300 "+(d===e.id?"bg-gradient-to-r from-primary to-purple-600 text-white shadow-md":"hover:bg-muted"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[Qe.jsx(e.icon,{className:"w-4 h-4"}),Qe.jsx("span",{className:"text-sm font-medium hidden sm:block",children:e.label})]},e.id))})}),Qe.jsxs(eM,{mode:"wait",children:["basic"===d&&Qe.jsx(QT.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:Qe.jsxs(DP,{className:"border shadow-sm",children:[Qe.jsx(LP,{className:"border-b bg-gradient-to-r from-blue-50 to-cyan-50",children:Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-500",children:Qe.jsx(Rf,{className:"w-5 h-5 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx(BP,{className:"text-lg bg-gradient-to-r from-blue-500 to-cyan-500 bg-clip-text text-transparent",children:"Thng tin c bn"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Tn, m t v phn loi sn phm"})]})]})}),Qe.jsxs(UP,{className:"p-6 space-y-6",children:[Qe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs(Rle,{htmlFor:"name",className:"flex items-center gap-2",children:[Qe.jsx(Uf,{className:"w-4 h-4"}),"Tn sn phm ",Qe.jsx("span",{className:"text-red-500",children:"*"})]}),Qe.jsx(Vne,{id:"name",value:h.name,onChange:e=>p({...h,name:e.target.value}),placeholder:"Nhp tn sn phm...",className:"border-border focus:border-primary",required:!0})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs(Rle,{htmlFor:"brand",className:"flex items-center gap-2",children:[Qe.jsx(fg,{className:"w-4 h-4"}),"Thng hiu"]}),Qe.jsx(Vne,{id:"brand",value:h.brand,onChange:e=>p({...h,brand:e.target.value}),placeholder:"Nhp thng hiu...",className:"border-border focus:border-primary"})]})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs(Rle,{htmlFor:"category",className:"flex items-center gap-2",children:[Qe.jsx(Rf,{className:"w-4 h-4"}),"Danh mc ",Qe.jsx("span",{className:"text-red-500",children:"*"})]}),Qe.jsxs(uie,{value:h.category,onValueChange:e=>p({...h,category:e}),children:[Qe.jsx(pie,{className:"border-border focus:border-primary",children:Qe.jsx(hie,{placeholder:"Chn danh mc..."})}),Qe.jsx(gie,{children:QXe.map(e=>Qe.jsx(vie,{value:e,children:e},e))})]})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs(Rle,{htmlFor:"description",className:"flex items-center gap-2",children:[Qe.jsx(uf,{className:"w-4 h-4"}),"M t sn phm"]}),Qe.jsx(Hne,{id:"description",value:h.description,onChange:e=>p({...h,description:e.target.value}),placeholder:"Nhp m t chi tit v sn phm...",rows:6,className:"border-border focus:border-primary resize-none"})]})]})]})},"basic"),"pricing"===d&&Qe.jsx(QT.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:Qe.jsxs("div",{className:"space-y-6",children:[Qe.jsxs(DP,{className:"border shadow-sm",children:[Qe.jsx(LP,{className:"border-b bg-gradient-to-r from-green-50 to-emerald-50",children:Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-green-500 to-emerald-500",children:Qe.jsx(Lm,{className:"w-5 h-5 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx(BP,{className:"text-lg bg-gradient-to-r from-green-500 to-emerald-500 bg-clip-text text-transparent",children:"Gi bn v chit khu"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Thit lp gi v chnh sch gim gi"})]})]})}),Qe.jsxs(UP,{className:"p-6 space-y-6",children:[Qe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs(Rle,{htmlFor:"price",className:"flex items-center gap-2",children:[Qe.jsx(Sg,{className:"w-4 h-4 text-green-600"}),"Gi bn ",Qe.jsx("span",{className:"text-red-500",children:"*"})]}),Qe.jsxs("div",{className:"relative",children:[Qe.jsx(Vne,{id:"price",type:"number",min:"0",value:h.price,onChange:e=>p({...h,price:parseInt(e.target.value)||0}),placeholder:"0",className:"border-border focus:border-primary pl-8",required:!0}),Qe.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:""})]})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs(Rle,{htmlFor:"original_price",className:"flex items-center gap-2",children:[Qe.jsx(Lm,{className:"w-4 h-4 text-gray-600"}),"Gi gc"]}),Qe.jsxs("div",{className:"relative",children:[Qe.jsx(Vne,{id:"original_price",type:"number",min:"0",value:h.original_price,onChange:e=>p({...h,original_price:parseInt(e.target.value)||0}),placeholder:"0",className:"border-border focus:border-primary pl-8"}),Qe.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:""})]})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs(Rle,{htmlFor:"discount",className:"flex items-center gap-2",children:[Qe.jsx(pg,{className:"w-4 h-4 text-orange-600"}),"Gim gi (%)"]}),Qe.jsxs("div",{className:"relative",children:[Qe.jsx(Vne,{id:"discount",type:"number",min:"0",max:"100",value:h.discount,onChange:e=>p({...h,discount:parseInt(e.target.value)||0}),placeholder:"0",className:"border-border focus:border-primary pr-8"}),Qe.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"%"})]})]})]}),Qe.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-r from-red-50 to-pink-50 border border-red-200",children:[Qe.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx(pg,{className:"w-5 h-5 text-red-600"}),Qe.jsx(Rle,{htmlFor:"flash_sale",className:"font-medium text-red-800",children:"Kch hot Flash Sale"})]}),Qe.jsx(Pje,{id:"flash_sale",checked:h.flash_sale,onCheckedChange:e=>p({...h,flash_sale:e})})]}),h.flash_sale&&Qe.jsxs(QT.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"sale_price",children:"Gi Flash Sale"}),Qe.jsxs("div",{className:"relative",children:[Qe.jsx(Vne,{id:"sale_price",type:"number",min:"0",value:h.sale_price,onChange:e=>p({...h,sale_price:parseInt(e.target.value)||0}),placeholder:"0",className:"border-border focus:border-primary pl-8"}),Qe.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:""})]})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx(Rle,{htmlFor:"sale_quantity",children:"S lng Flash Sale"}),Qe.jsx(Vne,{id:"sale_quantity",type:"number",min:"0",value:h.sale_quantity,onChange:e=>p({...h,sale_quantity:parseInt(e.target.value)||0}),placeholder:"0",className:"border-border focus:border-primary"})]})]})]})]})]}),Qe.jsxs(DP,{className:"border shadow-sm",children:[Qe.jsx(LP,{className:"border-b bg-muted/20",children:Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-blue-500 to-indigo-500",children:Qe.jsx(Rf,{className:"w-5 h-5 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx(BP,{className:"text-lg",children:"Tn kho v vn chuyn"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Qun l s lng v ph ship"})]})]})}),Qe.jsxs(UP,{className:"p-6 space-y-6",children:[Qe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs(Rle,{htmlFor:"quantity",className:"flex items-center gap-2",children:[Qe.jsx(Rf,{className:"w-4 h-4"}),"Tn kho ban u ",Qe.jsx("span",{className:"text-red-500",children:"*"})]}),Qe.jsx(Vne,{id:"quantity",type:"number",min:"0",value:h.quantity,onChange:e=>p({...h,quantity:parseInt(e.target.value)||0}),placeholder:"0",className:"border-border focus:border-primary",required:!0}),Qe.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mt-2",children:[Qe.jsxs("div",{className:"flex items-center gap-1",children:[Qe.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),Qe.jsxs("span",{children:["Tn kho hin ti: ",Qe.jsx("strong",{children:l.current_stock})]})]}),Qe.jsxs("div",{className:"flex items-center gap-1",children:[Qe.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),Qe.jsxs("span",{children:[" bn: ",Qe.jsx("strong",{children:l.sold})]})]})]})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs(Rle,{htmlFor:"shipping_fee",className:"flex items-center gap-2",children:[Qe.jsx(Mg,{className:"w-4 h-4"}),"Ph vn chuyn"]}),Qe.jsxs("div",{className:"relative",children:[Qe.jsx(Vne,{id:"shipping_fee",type:"number",min:"0",value:h.shipping_fee,onChange:e=>p({...h,shipping_fee:parseInt(e.target.value)||0}),placeholder:"0",className:"border-border focus:border-primary pl-8"}),Qe.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:""})]})]})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs(Rle,{htmlFor:"status",className:"flex items-center gap-2",children:[Qe.jsx(Vm,{className:"w-4 h-4"}),"Trng thi sn phm"]}),Qe.jsxs(uie,{value:h.status,onValueChange:e=>p({...h,status:e}),children:[Qe.jsx(pie,{className:"border-border focus:border-primary",children:Qe.jsx(hie,{})}),Qe.jsxs(gie,{children:[Qe.jsx(vie,{value:"active",children:Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"ang bn"]})}),Qe.jsx(vie,{value:"inactive",children:Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),"Ngng bn"]})})]})]})]})]})]})]})},"pricing"),"variants"===d&&Qe.jsx(QT.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:Qe.jsxs("div",{className:"space-y-6",children:[Qe.jsxs(DP,{className:"border shadow-sm",children:[Qe.jsx(LP,{className:"border-b bg-gradient-to-r from-purple-50 to-pink-50",children:Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500",children:Qe.jsx(Rf,{className:"w-5 h-5 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx(BP,{className:"text-lg bg-gradient-to-r from-purple-500 to-pink-500 bg-clip-text text-transparent",children:"Kch thc sn phm"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Chn cc size c sn"})]})]})}),Qe.jsxs(UP,{className:"p-6",children:[Qe.jsx("div",{className:"flex flex-wrap gap-3",children:e$e.map(e=>Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(EP,{variant:m.includes(e)?"default":"outline",className:"cursor-pointer px-4 py-2 text-sm transition-all "+(m.includes(e)?"bg-gradient-to-r from-purple-500 to-pink-500 border-transparent text-white shadow-md":"hover:border-purple-500"),onClick:()=>(e=>{f(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(e),children:[m.includes(e)&&Qe.jsx(gm,{className:"w-3 h-3 mr-1"}),e]})},e))}),m.length>0&&Qe.jsx("div",{className:"mt-4 p-3 bg-muted/50 rounded-lg",children:Qe.jsxs("p",{className:"text-sm text-muted-foreground",children:[" chn ",m.length," size: ",m.join(", ")]})})]})]}),Qe.jsxs(DP,{className:"border shadow-sm",children:[Qe.jsx(LP,{className:"border-b bg-muted/20",children:Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-cyan-500 to-blue-500",children:Qe.jsx(If,{className:"w-5 h-5 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx(BP,{className:"text-lg",children:"Mu sc sn phm"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Chn cc mu c sn"})]})]})}),Qe.jsxs(UP,{className:"p-6",children:[Qe.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3",children:t$e.map(e=>Qe.jsxs(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"p-3 rounded-xl border-2 cursor-pointer transition-all "+(g.includes(e)?"border-primary bg-primary/10":"border-border hover:border-primary/50"),onClick:()=>(e=>{v(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(e),children:[Qe.jsxs("div",{className:"flex items-center gap-2",children:[Qe.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-white shadow-sm",style:{backgroundColor:n$e[e]}}),Qe.jsx("span",{className:"text-sm font-medium",children:e})]}),g.includes(e)&&Qe.jsx(gm,{className:"w-4 h-4 text-primary mt-1"})]},e))}),g.length>0&&Qe.jsx("div",{className:"mt-4 p-3 bg-muted/50 rounded-lg",children:Qe.jsxs("p",{className:"text-sm text-muted-foreground",children:[" chn ",g.length," mu: ",g.join(", ")]})})]})]}),Qe.jsxs(DP,{className:"border shadow-sm",children:[Qe.jsx(LP,{className:"border-b bg-muted/20",children:Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-orange-500 to-red-500",children:Qe.jsx(xg,{className:"w-5 h-5 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx(BP,{className:"text-lg",children:"Tags sn phm"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Thm t kha  d tm kim"})]})]})}),Qe.jsxs(UP,{className:"p-6 space-y-4",children:[Qe.jsxs("div",{className:"flex gap-2",children:[Qe.jsx(Vne,{value:x,onChange:e=>y(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),N()),placeholder:"Nhp tag v nhn Enter...",className:"border-border"}),Qe.jsx(AP,{type:"button",variant:"outline",onClick:N,className:"px-4",children:Qe.jsx(Wf,{className:"w-4 h-4"})})]}),b.length>0&&Qe.jsxs("div",{className:"space-y-3",children:[Qe.jsx("div",{className:"flex flex-wrap gap-2",children:b.map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.05*t},children:Qe.jsxs(EP,{variant:"secondary",className:"gap-1 px-3 py-1.5 bg-muted hover:bg-muted/80 transition-colors",children:[e,Qe.jsx(Fg,{className:"w-3 h-3 cursor-pointer hover:text-red-500",onClick:()=>(e=>{w(b.filter(t=>t!==e))})(e)})]})},e))}),Qe.jsxs("p",{className:"text-sm text-muted-foreground",children:[b.length," tag(s)  thm"]})]})]})]})]})},"variants"),"settings"===d&&Qe.jsx(QT.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:Qe.jsxs("div",{className:"space-y-6",children:[Qe.jsxs(DP,{className:"border shadow-sm",children:[Qe.jsx(LP,{className:"border-b bg-gradient-to-r from-orange-50 to-red-50",children:Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-orange-500 to-red-500",children:Qe.jsx(um,{className:"w-5 h-5 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx(BP,{className:"text-lg bg-gradient-to-r from-orange-500 to-red-500 bg-clip-text text-transparent",children:"Ci t pht hnh"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Thit lp thi gian xut bn sn phm"})]})]})}),Qe.jsxs(UP,{className:"p-6 space-y-6",children:[Qe.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-muted/50 border border-border",children:[Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:Qe.jsx(Em,{className:"w-5 h-5 text-primary"})}),Qe.jsxs("div",{children:[Qe.jsx(Rle,{htmlFor:"is_live",className:"font-medium",children:"Pht hnh ngay lp tc"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Sn phm s hin th ngay sau khi lu"})]})]}),Qe.jsx(Pje,{id:"is_live",checked:h.is_live,onCheckedChange:e=>p({...h,is_live:e})})]}),!h.is_live&&Qe.jsxs(QT.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2",children:[Qe.jsxs(Rle,{htmlFor:"release_date",className:"flex items-center gap-2",children:[Qe.jsx(um,{className:"w-4 h-4"}),"Ngy pht hnh"]}),Qe.jsx(Vne,{id:"release_date",type:"datetime-local",value:h.release_date,onChange:e=>p({...h,release_date:e.target.value}),className:"border-border focus:border-primary"}),Qe.jsx("p",{className:"text-xs text-muted-foreground",children:"Sn phm s c pht hnh t ng vo thi gian  chn"})]})]})]}),Qe.jsxs(DP,{className:"border shadow-sm",children:[Qe.jsx(LP,{className:"border-b bg-muted/20",children:Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-500",children:Qe.jsx(df,{className:"w-5 h-5 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx(BP,{className:"text-lg",children:"Hnh nh sn phm"}),Qe.jsx("p",{className:"text-sm text-muted-foreground",children:"Xem v qun l hnh nh hin ti"})]})]})}),Qe.jsxs(UP,{className:"p-6",children:[l.images.length>0?Qe.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:l.images.map((e,t)=>Qe.jsxs(QT.div,{className:"relative aspect-square group",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.1*t},children:[Qe.jsx("img",{src:e,alt:`Product ${t+1}`,className:"w-full h-full object-cover rounded-xl border-2 border-border group-hover:border-primary transition-colors shadow-sm"}),Qe.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors rounded-xl"}),0===t&&Qe.jsx(EP,{className:"absolute top-2 left-2 bg-primary text-primary-foreground",children:"Chnh"})]},t))}):Qe.jsxs("div",{className:"text-center py-12",children:[Qe.jsx(df,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),Qe.jsx("p",{className:"text-muted-foreground",children:"Cha c hnh nh no"})]}),Qe.jsx("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:Qe.jsxs("div",{className:"flex items-start gap-3",children:[Qe.jsx(jm,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),Qe.jsxs("div",{children:[Qe.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Lu  v hnh nh"}),Qe.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:" thay i hnh nh sn phm, bn cn to sn phm mi hoc lin h b phn h tr."})]})]})})]})]})]})},"settings")]}),Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"flex justify-between items-center pt-6 border-t",children:[Qe.jsx("div",{className:"flex gap-3",children:Qe.jsxs(AP,{type:"button",variant:"outline",onClick:()=>t("/vendor-management/product-management"),disabled:s,className:"gap-2",children:[Qe.jsx(Zp,{className:"w-4 h-4"}),"Hy b"]})}),Qe.jsxs("div",{className:"flex gap-3",children:[Qe.jsx("div",{className:"hidden sm:flex gap-2",children:_.map((e,t)=>{const n=_.findIndex(e=>e.id===d),r=t;return Qe.jsx(AP,{type:"button",variant:r<n||r===n?"default":"outline",size:"sm",onClick:()=>u(e.id),disabled:s,className:r<=n?"bg-primary":"",children:r<n?Qe.jsx(gm,{className:"w-4 h-4"}):Qe.jsx(e.icon,{className:"w-4 h-4"})},e.id)})}),Qe.jsx(AP,{type:"submit",disabled:s,className:"bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 hover:opacity-90 gap-2 min-w-[140px]",children:s?Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(vf,{className:"w-4 h-4 animate-spin"}),"ang lu..."]}):Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(Jf,{className:"w-4 h-4"}),"Lu thay i"]})})]})]})]})]}):Qe.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:Qe.jsxs(QT.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-4",children:[Qe.jsx("div",{className:"p-4 rounded-2xl bg-muted mx-auto w-20 h-20 flex items-center justify-center",children:Qe.jsx(Rf,{className:"w-8 h-8 text-muted-foreground"})}),Qe.jsxs("div",{children:[Qe.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Khng tm thy sn phm"}),Qe.jsx("p",{className:"text-muted-foreground",children:"Sn phm ny c th  b xa hoc bn khng c quyn truy cp"})]})]})})}const i$e=()=>{const{orderId:e}=eN(),t=Zj(),{user:n}=Pae(),{toast:r}=vh(),[i,a]=Ve.useState([]),[s,o]=Ve.useState(!0),[l,c]=Ve.useState(!1),[d,u]=Ve.useState({}),[h,p]=Ve.useState({});Ve.useEffect(()=>{(null==n?void 0:n.id)&&e&&m()},[null==n?void 0:n.id,e]);const m=async()=>{o(!0);try{const t=await fetch(`http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/review/check_review_eligibility.php?user_id=${null==n?void 0:n.id}&order_id=${e}`),r=await t.json();if(r.success){a(r.products);const e={},t={};r.products.forEach(n=>{n.has_reviewed||(e[n.product_id]={rating:0,comment:"",images:[]},t[n.product_id]=[])}),u(e),p(t)}}catch(t){r({title:"Li",description:"Khng th ti danh sch sn phm",variant:"destructive"})}finally{o(!1)}},f=Object.values(d).some(e=>e.rating>0);return s?Qe.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:Qe.jsxs("div",{className:"text-center",children:[Qe.jsx(vf,{className:"w-12 h-12 animate-spin text-primary mx-auto"}),Qe.jsx("p",{className:"mt-4 text-muted-foreground",children:"ang ti..."})]})}):Qe.jsx("div",{className:"min-h-screen bg-background",children:Qe.jsxs("div",{className:"container mx-auto px-4 py-8",children:[Qe.jsxs(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[Qe.jsxs(AP,{variant:"ghost",size:"sm",onClick:()=>t("/orders"),className:"mb-4",children:[Qe.jsx(Zp,{className:"w-4 h-4 mr-2"}),"Quay li"]}),Qe.jsx("h1",{className:"text-3xl font-bold mb-2",children:"nh gi sn phm"}),Qe.jsx("p",{className:"text-muted-foreground",children:"Chia s tri nghim ca bn v cc sn phm  mua"})]}),Qe.jsx("div",{className:"space-y-6",children:i.map((e,t)=>{var n,i,a,s;return Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:Qe.jsx(DP,{children:Qe.jsxs(UP,{className:"p-6 space-y-6",children:[Qe.jsxs("div",{className:"flex gap-4",children:[Qe.jsx("img",{src:e.image_url,alt:e.product_name,className:"w-24 h-24 object-cover rounded-lg"}),Qe.jsxs("div",{className:"flex-1",children:[Qe.jsx("h3",{className:"font-semibold text-lg",children:e.product_name}),Qe.jsxs("p",{className:"text-muted-foreground",children:[e.price.toLocaleString("vi-VN"),""]})]})]}),e.has_reviewed?Qe.jsx("div",{className:"bg-green-50 text-green-700 px-4 py-3 rounded-lg text-sm font-medium",children:" Bn  nh gi sn phm ny"}):Qe.jsxs(Qe.Fragment,{children:[Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsxs("label",{className:"text-sm font-medium",children:["nh gi ca bn ",Qe.jsx("span",{className:"text-red-500",children:"*"})]}),Qe.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(t=>{var n;return Qe.jsx("button",{type:"button",onClick:()=>{return n=e.product_id,r=t,void u(e=>({...e,[n]:{...e[n],rating:r}}));var n,r},className:"transition-all hover:scale-110",children:Qe.jsx(fg,{className:"w-10 h-10 "+(t<=((null==(n=d[e.product_id])?void 0:n.rating)||0)?"fill-yellow-400 text-yellow-400":"text-gray-300 hover:text-yellow-200")})},t)})}),(null==(n=d[e.product_id])?void 0:n.rating)>0&&Qe.jsxs("p",{className:"text-sm text-muted-foreground",children:[5===d[e.product_id].rating&&"Tuyt vi! ",4===d[e.product_id].rating&&"Rt tt! ",3===d[e.product_id].rating&&"Tt ",2===d[e.product_id].rating&&"Tm c ",1===d[e.product_id].rating&&"Khng hi lng "]})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx("label",{className:"text-sm font-medium",children:"Nhn xt (khng bt buc)"}),Qe.jsx(Hne,{placeholder:"Chia s tri nghim ca bn v sn phm ny...",value:(null==(i=d[e.product_id])?void 0:i.comment)||"",onChange:t=>{return n=e.product_id,r=t.target.value,void u(e=>({...e,[n]:{...e[n],comment:r}}));var n,r},rows:4,className:"resize-none"})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx("label",{className:"text-sm font-medium",children:"Thm hnh nh (Ti a 5 nh)"}),Qe.jsxs("div",{className:"flex flex-wrap gap-3",children:[null==(a=h[e.product_id])?void 0:a.map((t,n)=>Qe.jsxs("div",{className:"relative group",children:[Qe.jsx("img",{src:t,alt:`Preview ${n+1}`,className:"w-24 h-24 object-cover rounded-lg border-2 border-gray-200"}),Qe.jsx("button",{onClick:()=>((e,t)=>{u(n=>({...n,[e]:{...n[e],images:n[e].images.filter((e,n)=>n!==t)}})),URL.revokeObjectURL(h[e][t]),p(n=>({...n,[e]:n[e].filter((e,n)=>n!==t)}))})(e.product_id,n),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:Qe.jsx(Fg,{className:"w-4 h-4"})})]},n)),((null==(s=h[e.product_id])?void 0:s.length)||0)<5&&Qe.jsxs("label",{className:"w-24 h-24 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:border-primary transition-colors",children:[Qe.jsx(cf,{className:"w-8 h-8 text-gray-400"}),Qe.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Thm nh"}),Qe.jsx("input",{type:"file",multiple:!0,accept:"image/jpeg,image/png,image/webp",className:"hidden",onChange:t=>((e,t)=>{var n;if(!t)return;const i=Array.from(t).slice(0,5-((null==(n=d[e])?void 0:n.images.length)||0)).filter(e=>{const t=["image/jpeg","image/png","image/webp"].includes(e.type),n=e.size<=5242880;return t?!!n||(r({title:"Li",description:"Kch thc nh khng c vt qu 5MB",variant:"destructive"}),!1):(r({title:"Li",description:"Ch chp nhn file JPG, PNG, WEBP",variant:"destructive"}),!1)});u(t=>{var n;return{...t,[e]:{...t[e],images:[...(null==(n=t[e])?void 0:n.images)||[],...i]}}});const a=i.map(e=>URL.createObjectURL(e));p(t=>({...t,[e]:[...t[e]||[],...a]}))})(e.product_id,t.target.files)})]})]}),Qe.jsx("p",{className:"text-xs text-muted-foreground",children:"Chp nhn JPG, PNG, WEBP. Ti a 5MB/nh"})]})]})]})})},e.product_id)})}),Qe.jsxs(QT.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"flex gap-3 justify-end mt-8 sticky bottom-4 bg-background/80 backdrop-blur-sm p-4 rounded-lg border",children:[Qe.jsx(AP,{variant:"outline",onClick:()=>t("/orders"),disabled:l,children:"Hy"}),Qe.jsx(AP,{onClick:async()=>{c(!0);try{const i=Object.entries(d).filter(([e,t])=>t.rating>0).map(async([t,r])=>{var i;const a=new FormData;return a.append("user_id",(null==(i=null==n?void 0:n.id)?void 0:i.toString())||""),a.append("product_id",t),a.append("order_id",e||""),a.append("rating",r.rating.toString()),a.append("comment",r.comment),r.images.forEach((e,t)=>{a.append("images[]",e)}),fetch("http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/review/submit_review.php",{method:"POST",body:a})}),a=await Promise.all(i);(await Promise.all(a.map(async e=>(await e.json()).success))).every(e=>e)&&(r({title:"Thnh cng",description:"Cm n bn  nh gi sn phm!"}),t("/orders"))}catch(i){r({title:"Li",description:"Khng th gi nh gi",variant:"destructive"})}finally{c(!1)}},disabled:!f||l,className:"min-w-[120px]",children:l?Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(vf,{className:"w-4 h-4 mr-2 animate-spin"}),"ang gi..."]}):"Gi nh gi"})]})]})})};function a$e(){const{sellerId:e}=eN(),t=Zj(),{toast:n}=vh(),[r,i]=Ve.useState(!0),[a,s]=Ve.useState(null),[o,l]=Ve.useState([]),[c,d]=Ve.useState(!1),[u,h]=Ve.useState(""),[p,m]=Ve.useState("grid"),[f,g]=Ve.useState("newest");Ve.useEffect(()=>{e&&v()},[e]);const v=async()=>{i(!0);try{const t=`http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE/api/vendor/get_store_detail.php?seller_id=${e}`,n=await fetch(t),r=await n.text(),i=JSON.parse(r);if(!i.success)throw new Error(i.error||"Khng th ti thng tin ca hng");s(i.store),l(i.products)}catch(t){n({title:"Li",description:t.message||" xy ra li khi ti d liu",variant:"destructive"}),s(null)}finally{i(!1)}},x=()=>{navigator.clipboard.writeText(window.location.href),n({title:" sao chp",description:" sao chp link ca hng vo clipboard"})},y=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),b=(e,t)=>Math.round((e-t)/e*100),w=[...o.filter(e=>e.product_name.toLowerCase().includes(u.toLowerCase())||e.category_name.toLowerCase().includes(u.toLowerCase()))].sort((e,t)=>{switch(f){case"price_low":return(e.discount_price||e.price)-(t.discount_price||t.price);case"price_high":return(t.discount_price||t.price)-(e.discount_price||e.price);case"rating":return(t.rating||0)-(e.rating||0);case"sold":return(t.sold||0)-(e.sold||0);default:return 0}});return r?Qe.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-rose-50 to-purple-50 dark:from-gray-950 dark:via-gray-900 dark:to-gray-800 flex items-center justify-center",children:Qe.jsxs(QT.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center space-y-6",children:[Qe.jsxs("div",{className:"relative",children:[Qe.jsx(QT.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-24 h-24 mx-auto rounded-full bg-gradient-to-r from-pink-500 via-rose-500 to-purple-500 flex items-center justify-center shadow-2xl",children:Qe.jsx(gg,{className:"w-12 h-12 text-white"})}),Qe.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-pink-500 to-purple-500 blur-2xl opacity-50 animate-pulse"})]}),Qe.jsxs("div",{className:"space-y-2",children:[Qe.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent",children:"ang ti thng tin ca hng"}),Qe.jsx("p",{className:"text-muted-foreground",children:"Vui lng i trong giy lt..."})]})]})}):a?Qe.jsxs("div",{className:"min-h-screen bg-background",children:[Qe.jsxs("div",{className:"relative h-[450px] overflow-hidden",children:[a.cover_image?Qe.jsxs(Qe.Fragment,{children:[Qe.jsx("img",{src:a.cover_image,alt:a.store_name,className:"w-full h-full object-cover"}),Qe.jsx("div",{className:"absolute inset-0 bg-black/30"})]}):Qe.jsxs("div",{className:"w-full h-full bg-gradient-to-br from-pink-500 via-rose-500 to-purple-600 relative overflow-hidden",children:[Qe.jsx("div",{className:"absolute inset-0 opacity-20",children:Qe.jsx(QT.div,{animate:{backgroundPosition:["0% 0%","100% 100%"]},transition:{duration:20,repeat:1/0,repeatType:"reverse"},className:"w-full h-full bg-gradient-to-r from-transparent via-white/10 to-transparent",style:{backgroundSize:"200% 200%"}})}),Qe.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Qe.jsx(QT.div,{animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{duration:6,repeat:1/0},children:Qe.jsx(gg,{className:"w-32 h-32 text-white/30"})})})]}),Qe.jsxs("div",{className:"absolute top-6 left-0 right-0 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between",children:[Qe.jsx(QT.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(AP,{variant:"ghost",size:"sm",className:"bg-white/20 hover:bg-white/30 backdrop-blur-xl border border-white/30 text-white shadow-xl",onClick:()=>t(-1),children:[Qe.jsx(Zp,{className:"w-4 h-4 mr-2"}),"Quay li"]})}),Qe.jsx(QT.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(AP,{variant:"ghost",size:"sm",className:"bg-white/20 hover:bg-white/30 backdrop-blur-xl border border-white/30 text-white shadow-xl",onClick:x,children:[Qe.jsx(ig,{className:"w-4 h-4 mr-2"}),"Chia s"]})})]}),Qe.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(20)].map((e,t)=>Qe.jsx(QT.div,{className:"absolute w-2 h-2 bg-white/30 rounded-full",animate:{y:[0,-100],x:[0,100*Math.random()-50],opacity:[0,1,0]},transition:{duration:3*Math.random()+2,repeat:1/0,delay:2*Math.random()},style:{left:100*Math.random()+"%",top:"100%"}},t))})]}),Qe.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Qe.jsx(QT.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"-mt-40 relative z-10",children:Qe.jsx(DP,{className:"border-pink-200/50 shadow-2xl bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl border-2",children:Qe.jsx(UP,{className:"p-8",children:Qe.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[Qe.jsx("div",{className:"flex-shrink-0",children:Qe.jsxs(QT.div,{className:"relative",whileHover:{scale:1.05},transition:{type:"spring",stiffness:300},children:[Qe.jsxs(AD,{className:"w-40 h-40 border-4 border-white shadow-2xl ring-4 ring-pink-100 dark:ring-pink-900",children:[Qe.jsx(MD,{src:a.avatar||void 0,alt:a.store_name}),Qe.jsx(ED,{className:"bg-gradient-to-br from-pink-500 to-purple-600 text-white text-5xl font-bold",children:(j=a.store_name,j.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2))})]}),Qe.jsx(QT.div,{className:"absolute -bottom-2 -right-2 bg-gradient-to-r from-pink-500 to-purple-500 rounded-full p-3 shadow-xl",animate:{boxShadow:["0 0 20px rgba(236, 72, 153, 0.5)","0 0 30px rgba(236, 72, 153, 0.8)","0 0 20px rgba(236, 72, 153, 0.5)"]},transition:{duration:2,repeat:1/0},children:Qe.jsx(Im,{className:"w-6 h-6 text-white"})})]})}),Qe.jsxs("div",{className:"flex-1 space-y-6",children:[Qe.jsxs("div",{className:"space-y-4",children:[Qe.jsxs("div",{className:"flex flex-wrap items-start gap-4",children:[Qe.jsx(QT.h1,{className:"text-4xl font-black bg-gradient-to-r from-pink-600 via-rose-500 to-purple-600 bg-clip-text text-transparent",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:a.store_name}),Qe.jsx(QT.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.4,type:"spring"},children:Qe.jsxs(EP,{className:"bg-gradient-to-r from-pink-500 to-purple-500 text-white border-0 px-4 py-2 text-sm shadow-lg",children:[Qe.jsx(nm,{className:"w-4 h-4 mr-2"}),"Ca hng uy tn"]})})]}),a.business_type&&Qe.jsxs(QT.div,{className:"flex items-center gap-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:[Qe.jsx(cm,{className:"w-5 h-5 text-pink-500"}),Qe.jsx("p",{className:"text-muted-foreground font-medium text-lg",children:a.business_type})]})]}),Qe.jsxs(QT.div,{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[Qe.jsxs(QT.div,{className:"bg-gradient-to-br from-pink-50 to-rose-100 dark:from-pink-950 dark:to-rose-900 rounded-2xl p-5 text-center border border-pink-200 dark:border-pink-800 shadow-lg",whileHover:{scale:1.05,y:-2},transition:{type:"spring",stiffness:300},children:[Qe.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[Qe.jsx(fg,{className:"w-5 h-5 fill-yellow-500 text-yellow-500"}),Qe.jsx("span",{className:"text-2xl font-bold text-foreground",children:a.avg_rating})]}),Qe.jsxs("p",{className:"text-xs text-muted-foreground font-medium",children:[a.total_reviews," nh gi"]})]}),Qe.jsxs(QT.div,{className:"bg-gradient-to-br from-purple-50 to-indigo-100 dark:from-purple-950 dark:to-indigo-900 rounded-2xl p-5 text-center border border-purple-200 dark:border-purple-800 shadow-lg",whileHover:{scale:1.05,y:-2},transition:{type:"spring",stiffness:300},children:[Qe.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[Qe.jsx(Rf,{className:"w-5 h-5 text-purple-600"}),Qe.jsx("span",{className:"text-2xl font-bold text-foreground",children:a.total_products})]}),Qe.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Sn phm"})]}),Qe.jsxs(QT.div,{className:"bg-gradient-to-br from-rose-50 to-pink-100 dark:from-rose-950 dark:to-pink-900 rounded-2xl p-5 text-center border border-rose-200 dark:border-rose-800 shadow-lg",whileHover:{scale:1.05,y:-2},transition:{type:"spring",stiffness:300},children:[Qe.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[Qe.jsx(sf,{className:"w-5 h-5 text-rose-600"}),Qe.jsx("span",{className:"text-2xl font-bold text-foreground",children:"1.2K"})]}),Qe.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Theo di"})]}),Qe.jsxs(QT.div,{className:"bg-gradient-to-br from-emerald-50 to-green-100 dark:from-emerald-950 dark:to-green-900 rounded-2xl p-5 text-center border border-emerald-200 dark:border-emerald-800 shadow-lg",whileHover:{scale:1.05,y:-2},transition:{type:"spring",stiffness:300},children:[Qe.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[Qe.jsx(Sg,{className:"w-5 h-5 text-emerald-600"}),Qe.jsx("span",{className:"text-2xl font-bold text-foreground",children:"98%"})]}),Qe.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Phn hi"})]})]}),Qe.jsxs(QT.div,{className:"flex flex-wrap gap-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:[Qe.jsx(QT.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:Qe.jsxs(AP,{onClick:()=>{d(!c),n({title:c?" b theo di":" theo di",description:c?`Bn  b theo di ${null==a?void 0:a.store_name}`:`Bn ang theo di ${null==a?void 0:a.store_name}`})},size:"lg",className:c?"bg-gradient-to-r from-rose-500 to-pink-500 hover:from-rose-600 hover:to-pink-600 shadow-xl":"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 shadow-xl",children:[Qe.jsx(sf,{className:"w-5 h-5 mr-2 "+(c?"fill-current":"")}),c?"ang theo di":"Theo di"]})}),Qe.jsx(QT.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:Qe.jsxs(AP,{variant:"outline",size:"lg",onClick:()=>{n({title:"Tnh nng ang pht trin",description:"Chc nng chat s sm c ra mt"})},className:"border-2 border-pink-300 hover:bg-pink-50 dark:hover:bg-pink-950 text-pink-600 hover:text-pink-700 shadow-lg",children:[Qe.jsx(Cf,{className:"w-5 h-5 mr-2"}),"Chat ngay"]})}),Qe.jsx(QT.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:Qe.jsxs(AP,{variant:"outline",size:"lg",onClick:x,className:"border-2 border-purple-300 hover:bg-purple-50 dark:hover:bg-purple-950 text-purple-600 hover:text-purple-700 shadow-lg",children:[Qe.jsx(ig,{className:"w-5 h-5 mr-2"}),"Chia s"]})})]})]})]})})})}),Qe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8 mt-8 pb-12",children:[Qe.jsxs(QT.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{delay:.3,duration:.8},className:"lg:col-span-1 space-y-6",children:[Qe.jsxs(DP,{className:"border-pink-200/50 shadow-xl bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl border-2 overflow-hidden",children:[Qe.jsxs("div",{className:"bg-gradient-to-r from-pink-500 to-rose-500 p-6 relative overflow-hidden",children:[Qe.jsx(QT.div,{animate:{backgroundPosition:["0% 0%","100% 100%"]},transition:{duration:15,repeat:1/0,repeatType:"reverse"},className:"absolute inset-0 opacity-20 bg-gradient-to-r from-transparent via-white/20 to-transparent",style:{backgroundSize:"200% 200%"}}),Qe.jsxs("h3",{className:"font-bold text-xl text-white flex items-center gap-3 relative z-10",children:[Qe.jsx(cm,{className:"w-6 h-6"}),"Thng tin lin h"]})]}),Qe.jsxs(UP,{className:"p-6 space-y-4",children:[a.phone&&Qe.jsxs(QT.div,{className:"flex items-start gap-4 p-4 rounded-xl bg-gradient-to-br from-green-50 to-emerald-100 dark:from-green-950 dark:to-emerald-900 border border-green-200 dark:border-green-800",whileHover:{scale:1.02},children:[Qe.jsx(Vf,{className:"w-5 h-5 text-green-600 mt-1"}),Qe.jsxs("div",{className:"flex-1",children:[Qe.jsx("p",{className:"text-xs text-muted-foreground mb-1 font-medium",children:"in thoi"}),Qe.jsx("p",{className:"font-bold text-foreground",children:a.phone})]})]}),a.email&&Qe.jsxs(QT.div,{className:"flex items-start gap-4 p-4 rounded-xl bg-gradient-to-br from-red-50 to-rose-100 dark:from-red-950 dark:to-rose-900 border border-red-200 dark:border-red-800",whileHover:{scale:1.02},children:[Qe.jsx(wf,{className:"w-5 h-5 text-red-600 mt-1"}),Qe.jsxs("div",{className:"flex-1",children:[Qe.jsx("p",{className:"text-xs text-muted-foreground mb-1 font-medium",children:"Email"}),Qe.jsx("p",{className:"font-bold text-foreground break-all text-sm",children:a.email})]})]}),a.business_address&&Qe.jsxs(QT.div,{className:"flex items-start gap-4 p-4 rounded-xl bg-gradient-to-br from-orange-50 to-amber-100 dark:from-orange-950 dark:to-amber-900 border border-orange-200 dark:border-orange-800",whileHover:{scale:1.02},children:[Qe.jsx(jf,{className:"w-5 h-5 text-orange-600 mt-1"}),Qe.jsxs("div",{className:"flex-1",children:[Qe.jsx("p",{className:"text-xs text-muted-foreground mb-1 font-medium",children:"a ch"}),Qe.jsx("p",{className:"font-bold text-foreground text-sm",children:a.business_address})]})]}),a.establish_year&&Qe.jsxs(QT.div,{className:"flex items-start gap-4 p-4 rounded-xl bg-gradient-to-br from-purple-50 to-indigo-100 dark:from-purple-950 dark:to-indigo-900 border border-purple-200 dark:border-purple-800",whileHover:{scale:1.02},children:[Qe.jsx(um,{className:"w-5 h-5 text-purple-600 mt-1"}),Qe.jsxs("div",{className:"flex-1",children:[Qe.jsx("p",{className:"text-xs text-muted-foreground mb-1 font-medium",children:"Nm thnh lp"}),Qe.jsx("p",{className:"font-bold text-foreground",children:a.establish_year})]})]})]})]}),a.description&&Qe.jsxs(DP,{className:"border-purple-200/50 shadow-xl bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl border-2 overflow-hidden",children:[Qe.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-6",children:Qe.jsxs("h3",{className:"font-bold text-xl text-white flex items-center gap-3",children:[Qe.jsx(pg,{className:"w-6 h-6"}),"Gii thiu"]})}),Qe.jsx(UP,{className:"p-6",children:Qe.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:a.description})})]}),Qe.jsxs(DP,{className:"border-yellow-200/50 shadow-xl bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl border-2 overflow-hidden",children:[Qe.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 p-6",children:Qe.jsxs("h3",{className:"font-bold text-xl text-white flex items-center gap-3",children:[Qe.jsx(tm,{className:"w-6 h-6"}),"Thnh tch"]})}),Qe.jsx(UP,{className:"p-6",children:Qe.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Qe.jsxs(QT.div,{className:"text-center p-4 rounded-xl bg-gradient-to-br from-yellow-50 to-orange-100 dark:from-yellow-950 dark:to-orange-900 border border-yellow-200 dark:border-yellow-800",whileHover:{scale:1.05,y:-2},children:[Qe.jsx(sg,{className:"w-8 h-8 text-yellow-600 mx-auto mb-3"}),Qe.jsx("p",{className:"text-sm font-bold text-foreground",children:"Uy tn"})]}),Qe.jsxs(QT.div,{className:"text-center p-4 rounded-xl bg-gradient-to-br from-blue-50 to-cyan-100 dark:from-blue-950 dark:to-cyan-900 border border-blue-200 dark:border-blue-800",whileHover:{scale:1.05,y:-2},children:[Qe.jsx(zg,{className:"w-8 h-8 text-blue-600 mx-auto mb-3"}),Qe.jsx("p",{className:"text-sm font-bold text-foreground",children:"Giao nhanh"})]}),Qe.jsxs(QT.div,{className:"text-center p-4 rounded-xl bg-gradient-to-br from-pink-50 to-rose-100 dark:from-pink-950 dark:to-rose-900 border border-pink-200 dark:border-pink-800",whileHover:{scale:1.05,y:-2},children:[Qe.jsx(Zm,{className:"w-8 h-8 text-pink-600 mx-auto mb-3"}),Qe.jsx("p",{className:"text-sm font-bold text-foreground",children:"u i"})]}),Qe.jsxs(QT.div,{className:"text-center p-4 rounded-xl bg-gradient-to-br from-purple-50 to-indigo-100 dark:from-purple-950 dark:to-indigo-900 border border-purple-200 dark:border-purple-800",whileHover:{scale:1.05,y:-2},children:[Qe.jsx(Dm,{className:"w-8 h-8 text-purple-600 mx-auto mb-3"}),Qe.jsx("p",{className:"text-sm font-bold text-foreground",children:"Cht lng"})]})]})})]})]}),Qe.jsx(QT.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{delay:.4,duration:.8},className:"lg:col-span-3",children:Qe.jsxs(DP,{className:"border-pink-200/50 shadow-xl bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl border-2 overflow-hidden",children:[Qe.jsxs("div",{className:"bg-gradient-to-r from-pink-500 via-rose-500 to-purple-500 p-8 relative overflow-hidden",children:[Qe.jsx(QT.div,{animate:{backgroundPosition:["0% 0%","100% 100%"]},transition:{duration:20,repeat:1/0,repeatType:"reverse"},className:"absolute inset-0 opacity-30 bg-gradient-to-r from-transparent via-white/20 to-transparent",style:{backgroundSize:"200% 200%"}}),Qe.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-6 relative z-10",children:[Qe.jsxs("div",{className:"flex items-center gap-4",children:[Qe.jsx(QT.div,{className:"p-3 bg-white/20 rounded-2xl backdrop-blur-sm shadow-xl",animate:{boxShadow:["0 0 20px rgba(255, 255, 255, 0.3)","0 0 30px rgba(255, 255, 255, 0.5)","0 0 20px rgba(255, 255, 255, 0.3)"]},transition:{duration:3,repeat:1/0},children:Qe.jsx(lg,{className:"w-8 h-8 text-white"})}),Qe.jsxs("div",{children:[Qe.jsx("h2",{className:"text-3xl font-bold text-white",children:"Sn phm ca ca hng"}),Qe.jsxs("p",{className:"text-pink-100 text-lg",children:[o.length," sn phm c sn"]})]})]}),Qe.jsx("div",{className:"flex items-center gap-3",children:Qe.jsxs("div",{className:"flex bg-white/20 rounded-xl p-1 backdrop-blur-sm border border-white/30 shadow-lg",children:[Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsx(AP,{variant:"ghost",size:"sm",onClick:()=>m("grid"),className:"h-10 px-4 rounded-lg transition-all duration-300 "+("grid"===p?"bg-white text-pink-600 shadow-lg font-semibold":"text-white hover:bg-white/20"),children:Qe.jsx(tf,{className:"w-5 h-5"})})}),Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsx(AP,{variant:"ghost",size:"sm",onClick:()=>m("list"),className:"h-10 px-4 rounded-lg transition-all duration-300 "+("list"===p?"bg-white text-pink-600 shadow-lg font-semibold":"text-white hover:bg-white/20"),children:Qe.jsx(gf,{className:"w-5 h-5"})})})]})})]})]}),Qe.jsxs(UP,{className:"p-8 space-y-8",children:[Qe.jsxs("div",{className:"flex flex-col sm:flex-row gap-6",children:[Qe.jsxs("div",{className:"relative flex-1",children:[Qe.jsx(eg,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-6 h-6 text-pink-400"}),Qe.jsx(Vne,{placeholder:"Tm kim sn phm, danh mc...",value:u,onChange:e=>h(e.target.value),className:"pl-12 h-14 border-2 border-pink-200 rounded-xl bg-pink-50/50 dark:bg-pink-950/20 focus:border-pink-400 text-lg backdrop-blur-sm transition-all duration-300"}),Qe.jsx(eM,{children:u&&Qe.jsx(QT.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},children:Qe.jsx(AP,{variant:"ghost",size:"sm",onClick:()=>h(""),className:"absolute right-3 top-1/2 -translate-y-1/2 h-8 w-8 p-0 hover:bg-pink-100 dark:hover:bg-pink-900 rounded-full",children:""})})})]}),Qe.jsxs("div",{className:"flex gap-3",children:[Qe.jsxs("select",{value:f,onChange:e=>g(e.target.value),className:"px-6 py-4 border-2 border-pink-200 rounded-xl bg-pink-50/50 dark:bg-pink-950/20 focus:border-pink-400 min-w-[160px] text-sm font-medium backdrop-blur-sm transition-all duration-300",children:[Qe.jsx("option",{value:"newest",children:"Mi nht"}),Qe.jsx("option",{value:"price_low",children:"Gi thp n cao"}),Qe.jsx("option",{value:"price_high",children:"Gi cao n thp"}),Qe.jsx("option",{value:"rating",children:"nh gi cao"}),Qe.jsx("option",{value:"sold",children:"Bn chy"})]}),Qe.jsx(QT.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:Qe.jsxs(AP,{variant:"outline",className:"border-2 border-pink-300 h-14 px-6 bg-pink-50/50 dark:bg-pink-950/20 hover:bg-pink-100 dark:hover:bg-pink-900 text-pink-600 font-semibold rounded-xl backdrop-blur-sm",children:[Qe.jsx(dg,{className:"w-5 h-5 mr-2"}),"B lc"]})})]})]}),Qe.jsx(eM,{children:u&&Qe.jsxs(QT.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center gap-3 text-sm",children:[Qe.jsx("div",{className:"px-4 py-2 bg-gradient-to-r from-pink-100 to-rose-100 dark:from-pink-950 dark:to-rose-950 border border-pink-200 dark:border-pink-800 rounded-full",children:Qe.jsxs("span",{className:"text-pink-700 dark:text-pink-300 font-semibold",children:[w.length,' kt qu cho "',u,'"']})}),w.length>0&&Qe.jsx(AP,{variant:"ghost",size:"sm",onClick:()=>h(""),className:"h-auto p-2 text-muted-foreground hover:text-pink-600 transition-colors",children:"Xa b lc"})]})}),Qe.jsx(eM,{mode:"wait",children:0===w.length?Qe.jsxs(QT.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center py-20",children:[Qe.jsxs("div",{className:"relative mb-8",children:[Qe.jsx(QT.div,{className:"w-32 h-32 mx-auto rounded-3xl bg-gradient-to-br from-pink-100 to-rose-200 dark:from-pink-900 dark:to-rose-900 flex items-center justify-center",animate:{scale:[1,1.05,1],rotate:[0,2,-2,0]},transition:{duration:4,repeat:1/0},children:u?Qe.jsx(eg,{className:"w-16 h-16 text-pink-400"}):Qe.jsx(Rf,{className:"w-16 h-16 text-pink-400"})}),Qe.jsx("div",{className:"absolute inset-0 rounded-3xl bg-pink-400 blur-3xl opacity-20"})]}),Qe.jsx("h3",{className:"text-3xl font-bold bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent mb-4",children:u?"Khng tm thy sn phm":"Cha c sn phm"}),Qe.jsx("p",{className:"text-muted-foreground text-lg mb-6",children:u?"Th tm kim vi t kha khc hoc xa b lc":"Ca hng cha c sn phm no  hin th"}),u&&Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsx(AP,{onClick:()=>h(""),className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 shadow-xl",children:"Xa b lc"})})]}):Qe.jsxs(QT.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:["grid"===p&&Qe.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:w.map((e,n)=>Qe.jsx(QT.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.1*n,duration:.6},whileHover:{y:-8,scale:1.02},className:"group cursor-pointer",onClick:()=>t(`/product/${e.product_id}`),children:Qe.jsxs(DP,{className:"border-2 border-pink-100 hover:border-pink-300 hover:shadow-2xl transition-all duration-500 overflow-hidden h-full bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm",children:[Qe.jsxs("div",{className:"relative aspect-square overflow-hidden bg-gradient-to-br from-pink-50 via-rose-50 to-purple-50 dark:from-pink-950 dark:via-rose-950 dark:to-purple-950",children:[e.image?Qe.jsxs(Qe.Fragment,{children:[Qe.jsx("img",{src:e.image,alt:e.product_name,className:"w-full h-full object-cover group-hover:scale-110 transition-all duration-700"}),Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}):Qe.jsx("div",{className:"w-full h-full flex items-center justify-center",children:Qe.jsx(Rf,{className:"w-20 h-20 text-pink-300"})}),Qe.jsxs("div",{className:"absolute top-4 left-4 flex flex-col gap-2",children:[e.discount_price&&Qe.jsx(QT.div,{initial:{scale:0,rotate:-10},animate:{scale:1,rotate:0},transition:{delay:.1*n+.3},children:Qe.jsxs(EP,{className:"bg-gradient-to-r from-red-500 to-pink-500 text-white border-0 shadow-xl px-3 py-1 font-bold text-sm",children:["-",b(e.price,e.discount_price),"%"]})}),e.sold&&e.sold>100&&Qe.jsx(QT.div,{initial:{scale:0,rotate:10},animate:{scale:1,rotate:0},transition:{delay:.1*n+.4},children:Qe.jsxs(EP,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white border-0 shadow-xl px-3 py-1 font-bold text-sm",children:[Qe.jsx(qm,{className:"w-3 h-3 mr-1"}),"Hot"]})})]}),Qe.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:Qe.jsx(QT.div,{whileHover:{scale:1.1},whileTap:{scale:.9},children:Qe.jsx(AP,{variant:"secondary",size:"icon",className:"h-10 w-10 bg-white/95 hover:bg-white backdrop-blur-sm shadow-xl rounded-full border-2 border-white",onClick:e=>{e.stopPropagation()},children:Qe.jsx(Vm,{className:"w-5 h-5 text-pink-600"})})})}),0===e.stock_quantity&&Qe.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center backdrop-blur-sm",children:Qe.jsx(EP,{variant:"destructive",className:"px-6 py-3 text-lg font-bold shadow-xl",children:"Ht hng"})}),Qe.jsx("div",{className:"absolute bottom-4 left-4 right-4 opacity-0 group-hover:opacity-100 transition-all duration-500 transform translate-y-4 group-hover:translate-y-0",children:Qe.jsx(QT.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:Qe.jsx(AP,{className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white font-bold shadow-xl backdrop-blur-sm border border-white/20",onClick:e=>{e.stopPropagation()},children:"Thm vo gi"})})})]}),Qe.jsxs(UP,{className:"p-6 space-y-4 bg-gradient-to-b from-white to-pink-50/50 dark:from-gray-900 dark:to-pink-950/20",children:[Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsx(EP,{variant:"secondary",className:"text-xs font-semibold bg-pink-100 text-pink-700 dark:bg-pink-900 dark:text-pink-300 px-3 py-1",children:e.category_name}),e.rating&&e.rating>0&&Qe.jsxs("div",{className:"flex items-center gap-1",children:[Qe.jsx(fg,{className:"w-4 h-4 fill-yellow-500 text-yellow-500"}),Qe.jsx("span",{className:"text-sm font-bold text-yellow-600",children:e.rating})]})]}),Qe.jsx("h3",{className:"font-bold text-base line-clamp-2 group-hover:text-pink-600 transition-colors min-h-[48px] leading-tight",children:e.product_name}),Qe.jsxs("div",{className:"flex items-baseline gap-3",children:[Qe.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent",children:y(e.discount_price||e.price)}),e.discount_price&&Qe.jsx("span",{className:"text-sm text-muted-foreground line-through",children:y(e.price)})]}),Qe.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-pink-100 dark:border-pink-800",children:[Qe.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[Qe.jsxs("span",{className:"font-medium",children:["Cn ",e.stock_quantity]}),e.sold&&e.sold>0&&Qe.jsxs(Qe.Fragment,{children:[Qe.jsx("span",{children:""}),Qe.jsxs("span",{children:[" bn ",e.sold]})]})]}),Qe.jsx(ym,{className:"w-5 h-5 text-pink-500 group-hover:translate-x-1 transition-transform"})]})]})]})},e.product_id))}),"list"===p&&Qe.jsx("div",{className:"space-y-6",children:w.map((e,n)=>Qe.jsx(QT.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{delay:.05*n,duration:.6},whileHover:{scale:1.01,x:4},className:"group cursor-pointer",onClick:()=>t(`/product/${e.product_id}`),children:Qe.jsx(DP,{className:"border-2 border-pink-100 hover:border-pink-300 hover:shadow-xl transition-all duration-300 overflow-hidden bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm",children:Qe.jsx(UP,{className:"p-6",children:Qe.jsxs("div",{className:"flex gap-6",children:[Qe.jsxs("div",{className:"relative w-28 h-28 flex-shrink-0 rounded-xl overflow-hidden bg-gradient-to-br from-pink-50 to-rose-100 dark:from-pink-950 dark:to-rose-900 border-2 border-pink-100 dark:border-pink-800",children:[e.image?Qe.jsx("img",{src:e.image,alt:e.product_name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}):Qe.jsx("div",{className:"w-full h-full flex items-center justify-center",children:Qe.jsx(Rf,{className:"w-10 h-10 text-pink-300"})}),e.discount_price&&Qe.jsxs(EP,{className:"absolute -top-1 -right-1 bg-gradient-to-r from-red-500 to-pink-500 text-white text-xs px-2 py-1 shadow-lg",children:["-",b(e.price,e.discount_price),"%"]})]}),Qe.jsxs("div",{className:"flex-1 space-y-3",children:[Qe.jsxs("div",{className:"flex items-start justify-between",children:[Qe.jsxs("div",{className:"flex-1 space-y-2",children:[Qe.jsx(EP,{variant:"secondary",className:"text-xs mb-2 bg-pink-100 text-pink-700 dark:bg-pink-900 dark:text-pink-300",children:e.category_name}),Qe.jsx("h3",{className:"font-bold text-lg line-clamp-2 group-hover:text-pink-600 transition-colors",children:e.product_name})]}),e.rating&&e.rating>0&&Qe.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[Qe.jsx(fg,{className:"w-5 h-5 fill-yellow-500 text-yellow-500"}),Qe.jsx("span",{className:"text-sm font-bold text-yellow-600",children:e.rating})]})]}),Qe.jsxs("div",{className:"flex items-center justify-between",children:[Qe.jsxs("div",{className:"flex items-baseline gap-3",children:[Qe.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent",children:y(e.discount_price||e.price)}),e.discount_price&&Qe.jsx("span",{className:"text-lg text-muted-foreground line-through",children:y(e.price)})]}),Qe.jsxs("div",{className:"flex items-center gap-6 text-sm text-muted-foreground",children:[Qe.jsxs("span",{className:"font-medium",children:["Cn ",e.stock_quantity]}),e.sold&&e.sold>0&&Qe.jsxs("span",{className:"font-medium",children:[" bn ",e.sold]}),Qe.jsx(ym,{className:"w-5 h-5 text-pink-500 group-hover:translate-x-2 transition-transform"})]})]})]})]})})})},e.product_id))}),o.length>12&&Qe.jsx(QT.div,{className:"flex justify-center pt-12",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:Qe.jsx(QT.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:Qe.jsxs(AP,{size:"lg",className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:opacity-90 text-white px-8 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300",children:["Xem tt c ",o.length," sn phm",Qe.jsx(zm,{className:"w-5 h-5 ml-2"})]})})})]})})]})]})})]})]})]}):Qe.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-rose-50 to-purple-50 dark:from-gray-950 dark:via-gray-900 dark:to-gray-800 flex items-center justify-center p-6",children:Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:Qe.jsx(DP,{className:"max-w-md w-full border-pink-200 shadow-2xl",children:Qe.jsxs(UP,{className:"p-8 text-center space-y-6",children:[Qe.jsxs("div",{className:"relative",children:[Qe.jsx("div",{className:"w-24 h-24 mx-auto rounded-full bg-gradient-to-br from-pink-100 to-rose-100 dark:from-pink-950 dark:to-rose-950 flex items-center justify-center",children:Qe.jsx(gg,{className:"w-12 h-12 text-pink-600"})}),Qe.jsx("div",{className:"absolute inset-0 rounded-full bg-pink-500 blur-2xl opacity-20"})]}),Qe.jsxs("div",{className:"space-y-3",children:[Qe.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent",children:"Ca hng khng tn ti"}),Qe.jsx("p",{className:"text-muted-foreground",children:"Ca hng bn tm kim khng tn ti hoc  b xa"})]}),Qe.jsxs(AP,{onClick:()=>t("/"),className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600",children:[Qe.jsx(Zp,{className:"w-4 h-4 mr-2"}),"V trang ch"]})]})})})});var j}const s$e=()=>{const{toast:e}=vh(),[t,n]=Ve.useState(null),[r,i]=Ve.useState(null),[a,s]=Ve.useState(""),[o,l]=Ve.useState(!1),[c,d]=Ve.useState(null),[u,h]=Ve.useState(null),p="http://localhost/VIBE_MARKET_BACKEND/VibeMarket-BE",m=()=>{n(null),i(null),s(""),d(null)};return Qe.jsx("div",{className:"min-h-screen bg-background py-12",children:Qe.jsxs("div",{className:"container mx-auto px-4",children:[Qe.jsxs(QT.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-16",children:[Qe.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[Qe.jsx(QT.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},children:Qe.jsx(pg,{className:"w-10 h-10 text-purple-600"})}),Qe.jsx("h1",{className:"text-5xl md:text-6xl font-extrabold bg-gradient-to-r from-purple-600 via-pink-600 to-blue-600 bg-clip-text text-transparent",children:"AI Shopping Assistant"})]}),Qe.jsx("p",{className:"text-gray-600 text-xl max-w-3xl mx-auto leading-relaxed",children:" Nhn din sn phm thng minh   Phn tch gi th trng   Gi  mua sm c nhn ha"}),Qe.jsxs("div",{className:"flex items-center justify-center gap-4 mt-6",children:[Qe.jsxs(EP,{variant:"secondary",className:"text-sm py-1.5 px-4",children:[Qe.jsx(uf,{className:"w-3 h-3 mr-2"}),"Powered by AI"]}),Qe.jsxs(EP,{variant:"secondary",className:"text-sm py-1.5 px-4",children:[Qe.jsx(_m,{className:"w-3 h-3 mr-2"})," chnh xc cao"]})]})]}),Qe.jsx(eM,{mode:"wait",children:t?"image"===t?Qe.jsxs(QT.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"max-w-7xl mx-auto",children:[Qe.jsx(AP,{variant:"ghost",onClick:m,className:"mb-6",children:" Quay li chn ch "}),Qe.jsxs("div",{className:"grid lg:grid-cols-5 gap-8",children:[Qe.jsx(DP,{className:"lg:col-span-2 shadow-xl",children:Qe.jsxs(UP,{className:"p-8",children:[Qe.jsxs("h3",{className:"text-2xl font-bold mb-6 flex items-center gap-3",children:[Qe.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-100 to-purple-200 rounded-xl flex items-center justify-center",children:Qe.jsx(df,{className:"w-6 h-6 text-purple-600"})}),"Upload nh Sn Phm"]}),r?Qe.jsxs("div",{className:"space-y-6",children:[Qe.jsxs("div",{className:"relative rounded-2xl overflow-hidden shadow-lg",children:[Qe.jsx("img",{src:r,alt:"Uploaded",className:"w-full h-96 object-cover"}),Qe.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"})]}),Qe.jsxs("div",{className:"flex gap-3",children:[Qe.jsx(AP,{onClick:async()=>{if(r)try{l(!0);const t=await fetch(`${p}/api/ai/detect-product.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image_base64:r})});if(!t.ok){const e=await t.text();throw new Error(`HTTP ${t.status}: ${e}`)}const n=await t.json();if(!(null==n?void 0:n.success))throw new Error((null==n?void 0:n.error)||"Nhn din tht bi");d(n.detection),e({title:" Nhn din thnh cng!",description:`Pht hin: ${n.detection.detected_product}`})}catch(t){e({title:"Li nhn din",description:(null==t?void 0:t.message)||"Vui lng th li",variant:"destructive"})}finally{l(!1)}},disabled:o,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 h-12 text-base font-semibold",children:o?Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(vf,{className:"w-5 h-5 mr-2 animate-spin"}),"ang nhn din..."]}):Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(pg,{className:"w-5 h-5 mr-2"}),"Nhn din ngay"]})}),Qe.jsx(AP,{variant:"outline",onClick:()=>i(null),className:"h-12",children:"i nh"})]})]}):Qe.jsxs("label",{className:"block",children:[Qe.jsxs(QT.div,{whileHover:{scale:1.02},className:"border-2 border-dashed border-purple-300 rounded-2xl p-16 text-center cursor-pointer hover:border-purple-500 hover:bg-gradient-to-br hover:from-purple-50 hover:to-pink-50 transition-all",children:[Qe.jsx(kg,{className:"w-20 h-20 text-purple-400 mx-auto mb-6"}),Qe.jsx("p",{className:"text-gray-700 mb-3 text-lg font-semibold",children:"Click  upload nh"}),Qe.jsx("p",{className:"text-sm text-gray-500",children:"PNG, JPG ti a 5MB"}),Qe.jsx(EP,{variant:"secondary",className:"mt-4",children:"H tr tt c nh dng nh"})]}),Qe.jsx(Vne,{type:"file",accept:"image/*",onChange:t=>{var n;const r=null==(n=t.target.files)?void 0:n[0];if(!r)return;if(r.size>5242880)return void e({title:"File qu ln",description:"Vui lng chn nh nh hn 5MB",variant:"destructive"});const a=new FileReader;a.onloadend=()=>{i(a.result)},a.readAsDataURL(r)},className:"hidden"})]})]})}),Qe.jsx("div",{className:"lg:col-span-3 space-y-8",children:c?Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:Qe.jsx(DP,{className:"shadow-xl",children:Qe.jsxs(UP,{className:"p-8",children:[Qe.jsxs("div",{className:"flex items-start justify-between mb-6",children:[Qe.jsxs("div",{className:"flex-1",children:[Qe.jsx("h3",{className:"text-3xl font-bold text-purple-600 mb-3",children:c.detected_product}),Qe.jsx(EP,{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white text-sm py-1.5 px-4",children:c.category})]}),Qe.jsxs("div",{className:"text-right bg-purple-50 p-4 rounded-xl",children:[Qe.jsx("div",{className:"text-sm text-gray-600 mb-2",children:" chnh xc"}),Qe.jsxs("div",{className:"flex items-center gap-3",children:[Qe.jsx(bae,{value:c.confidence,className:"w-24 h-2"}),Qe.jsxs("span",{className:"font-bold text-2xl text-purple-600",children:[c.confidence.toFixed(0),"%"]})]})]})]}),Qe.jsxs("div",{className:"mb-6 bg-gray-50 p-6 rounded-xl",children:[Qe.jsxs("h4",{className:"font-bold mb-4 flex items-center gap-2 text-lg",children:[Qe.jsx(pg,{className:"w-5 h-5 text-purple-600"}),"Bng Mu Sn Phm"]}),Qe.jsx("div",{className:"flex gap-3",children:c.colors.map((e,t)=>Qe.jsx(QT.div,{whileHover:{scale:1.1},className:"w-16 h-16 rounded-xl border-4 border-white shadow-lg cursor-pointer",style:{backgroundColor:e},title:e},t))})]}),Qe.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl",children:[Qe.jsxs("h4",{className:"font-bold mb-4 flex items-center gap-2 text-lg",children:[Qe.jsx(_m,{className:"w-5 h-5 text-green-600"}),"c im Sn Phm"]}),Qe.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:c.characteristics.map((e,t)=>Qe.jsxs(QT.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center gap-3 bg-white p-3 rounded-lg",children:[Qe.jsx(_m,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),Qe.jsx("span",{className:"text-sm text-gray-700",children:e})]},t))})]})]})})}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:Qe.jsx(DP,{className:"shadow-xl",children:Qe.jsxs(UP,{className:"p-8",children:[Qe.jsxs("h3",{className:"text-2xl font-bold mb-6 flex items-center gap-3",children:[Qe.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-100 to-green-200 rounded-xl flex items-center justify-center",children:Qe.jsx(Lm,{className:"w-6 h-6 text-green-600"})}),"Phn Tch Gi Th Trng"]}),Qe.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-8",children:[Qe.jsxs(QT.div,{whileHover:{scale:1.05},className:"text-center p-6 bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl",children:[Qe.jsx(_g,{className:"w-8 h-8 text-blue-600 mx-auto mb-3"}),Qe.jsx("div",{className:"text-xs text-gray-600 mb-2 font-semibold",children:"Gi Thp Nht"}),Qe.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[c.price_range.min.toLocaleString(),""]})]}),Qe.jsxs(QT.div,{whileHover:{scale:1.05},className:"text-center p-6 bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl border-2 border-purple-300",children:[Qe.jsx(fg,{className:"w-8 h-8 text-purple-600 mx-auto mb-3"}),Qe.jsx("div",{className:"text-xs text-gray-600 mb-2 font-semibold",children:"Gi Trung Bnh"}),Qe.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[c.price_range.average.toLocaleString(),""]})]}),Qe.jsxs(QT.div,{whileHover:{scale:1.05},className:"text-center p-6 bg-gradient-to-br from-pink-50 to-pink-100 rounded-2xl",children:[Qe.jsx(Sg,{className:"w-8 h-8 text-pink-600 mx-auto mb-3"}),Qe.jsx("div",{className:"text-xs text-gray-600 mb-2 font-semibold",children:"Gi Cao Nht"}),Qe.jsxs("div",{className:"text-2xl font-bold text-pink-600",children:[c.price_range.max.toLocaleString(),""]})]})]}),Qe.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Qe.jsxs("div",{className:"flex items-center gap-4 p-5 bg-gradient-to-r from-green-50 to-green-100 rounded-xl",children:[Qe.jsx("div",{className:"w-12 h-12 bg-white rounded-xl flex items-center justify-center",children:Qe.jsx(Sg,{className:"w-6 h-6 text-green-600"})}),Qe.jsxs("div",{children:[Qe.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Xu Hng Gi"}),Qe.jsx("div",{className:"font-bold text-lg capitalize",children:"increasing"===c.market_analysis.price_trend?" ang Tng":" n nh"})]})]}),Qe.jsxs("div",{className:"flex items-center gap-4 p-5 bg-gradient-to-r from-yellow-50 to-yellow-100 rounded-xl",children:[Qe.jsx("div",{className:"w-12 h-12 bg-white rounded-xl flex items-center justify-center",children:Qe.jsx(fg,{className:"w-6 h-6 text-yellow-600"})}),Qe.jsxs("div",{children:[Qe.jsx("div",{className:"text-xs text-gray-600 mb-1",children:" Ph Bin"}),Qe.jsx("div",{className:"font-bold text-lg capitalize",children:"high"===c.market_analysis.popularity?" Rt Cao":" Trung Bnh"})]})]}),Qe.jsxs("div",{className:"flex items-center gap-4 p-5 bg-gradient-to-r from-blue-50 to-blue-100 rounded-xl",children:[Qe.jsx("div",{className:"w-12 h-12 bg-white rounded-xl flex items-center justify-center",children:Qe.jsx(Rf,{className:"w-6 h-6 text-blue-600"})}),Qe.jsxs("div",{children:[Qe.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Tng Sn Phm"}),Qe.jsxs("div",{className:"font-bold text-lg",children:[c.market_analysis.total_products," SP"]})]})]}),Qe.jsxs("div",{className:"flex items-center gap-4 p-5 bg-gradient-to-r from-purple-50 to-purple-100 rounded-xl",children:[Qe.jsx("div",{className:"w-12 h-12 bg-white rounded-xl flex items-center justify-center",children:Qe.jsx(lg,{className:"w-6 h-6 text-purple-600"})}),Qe.jsxs("div",{children:[Qe.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Tng  Bn"}),Qe.jsx("div",{className:"font-bold text-lg",children:c.market_analysis.total_sold.toLocaleString()})]})]})]})]})})}),c.similar_products.length>0&&Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:Qe.jsx(DP,{className:"shadow-xl",children:Qe.jsxs(UP,{className:"p-8",children:[Qe.jsxs("h3",{className:"text-2xl font-bold mb-6 flex items-center gap-3",children:[Qe.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-pink-100 to-pink-200 rounded-xl flex items-center justify-center",children:Qe.jsx(lg,{className:"w-6 h-6 text-pink-600"})}),"Sn Phm Tng T",Qe.jsxs(EP,{className:"ml-auto bg-pink-100 text-pink-700",children:[c.similar_products.length," sn phm"]})]}),Qe.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:c.similar_products.map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},whileHover:{y:-8},children:Qe.jsx(DP,{className:"hover:shadow-2xl transition-all cursor-pointer",children:Qe.jsxs(UP,{className:"p-4",children:[Qe.jsxs("div",{className:"relative mb-3",children:[Qe.jsx("img",{src:e.image,alt:e.name,className:"w-full h-40 object-cover rounded-xl"}),e.discount&&Qe.jsxs(EP,{className:"absolute top-2 left-2 bg-red-600",children:["-",e.discount,"%"]})]}),Qe.jsx("h4",{className:"font-semibold text-sm mb-3 line-clamp-2 h-10",children:e.name}),Qe.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Qe.jsx("div",{className:"flex",children:[...Array(5)].map((t,n)=>Qe.jsx(fg,{className:"w-3 h-3 "+(n<Math.floor(e.rating)?"fill-yellow-400 text-yellow-400":"text-gray-300")},n))}),Qe.jsx("span",{className:"text-xs font-semibold",children:e.rating}),Qe.jsxs("span",{className:"text-xs text-gray-500 ml-auto",children:[" bn ",e.sold]})]}),Qe.jsxs("p",{className:"text-lg font-bold text-pink-600 mb-2",children:[e.price.toLocaleString(),""]}),e.shop&&Qe.jsxs("p",{className:"text-xs text-gray-500 truncate",children:[" ",e.shop]})]})})},e.id))})]})})})]}):Qe.jsx(DP,{className:"shadow-xl",children:Qe.jsxs(UP,{className:"p-20 text-center text-gray-400",children:[Qe.jsx(QT.div,{animate:{y:[0,-10,0]},transition:{duration:2,repeat:1/0},children:Qe.jsx(Rf,{className:"w-24 h-24 mx-auto mb-6 opacity-30"})}),Qe.jsx("p",{className:"text-lg",children:"Upload nh  xem kt qu nhn din AI"}),Qe.jsx("p",{className:"text-sm mt-2",children:"H thng s t ng phn tch sn phm"})]})})})]})]},"image-mode"):Qe.jsxs(QT.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"max-w-5xl mx-auto",children:[Qe.jsx(AP,{variant:"ghost",onClick:m,className:"mb-6",children:" Quay li chn ch "}),Qe.jsx(DP,{className:"shadow-xl",children:Qe.jsxs(UP,{className:"p-10",children:[Qe.jsxs("h3",{className:"text-3xl font-bold mb-6 flex items-center gap-3",children:[Qe.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-100 to-pink-200 rounded-xl flex items-center justify-center",children:Qe.jsx(Af,{className:"w-7 h-7 text-pink-600"})}),"M T Sn Phm Mong Mun"]}),Qe.jsxs("div",{className:"bg-gradient-to-r from-pink-50 to-purple-50 p-6 rounded-xl mb-6",children:[Qe.jsxs("p",{className:"text-sm text-gray-700 mb-3 font-semibold flex items-center gap-2",children:[Qe.jsx(uf,{className:"w-4 h-4"}),"Gi  m t hiu qu:"]}),Qe.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[Qe.jsxs("li",{className:"flex items-start gap-2",children:[Qe.jsx(_m,{className:"w-4 h-4 text-green-600 mt-0.5"}),Qe.jsx("span",{children:"M t chi tit mu sc, cht liu, kiu dng"})]}),Qe.jsxs("li",{className:"flex items-start gap-2",children:[Qe.jsx(_m,{className:"w-4 h-4 text-green-600 mt-0.5"}),Qe.jsx("span",{children:"Nu r mc ch s dng (i lm, d tic, th thao...)"})]}),Qe.jsxs("li",{className:"flex items-start gap-2",children:[Qe.jsx(_m,{className:"w-4 h-4 text-green-600 mt-0.5"}),Qe.jsx("span",{children:" cp n size, form dng mong mun"})]})]})]}),Qe.jsx(Hne,{placeholder:"V d: Ti mun tm o s mi trng form rng, cht liu cotton thong mt, ph hp i lm vn phng, c c b v tay di...",value:a,onChange:e=>s(e.target.value),className:"mb-6 min-h-40 text-base resize-none"}),Qe.jsx(AP,{onClick:async()=>{if(a.trim())try{l(!0);const t=await fetch(`${p}/api/ai/search-by-description.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:a,limit:8})});if(!t.ok){const e=await t.text();throw new Error(`HTTP ${t.status}: ${e}`)}const n=await t.json();if(!(null==n?void 0:n.success))throw new Error((null==n?void 0:n.error)||"Tm kim tht bi");h(n),e({title:" Tm thy sn phm!",description:`${n.products.length} sn phm ph hp`})}catch(t){e({title:"Li tm kim",description:(null==t?void 0:t.message)||"Vui lng th li",variant:"destructive"})}finally{l(!1)}else e({title:"Thiu m t",description:"Vui lng nhp m t sn phm",variant:"destructive"})},disabled:o||!a.trim(),className:"w-full bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-700 hover:to-purple-700 h-14 text-lg font-semibold",children:o?Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(vf,{className:"w-5 h-5 mr-3 animate-spin"}),"AI ang phn tch v tm kim..."]}):Qe.jsxs(Qe.Fragment,{children:[Qe.jsx(eg,{className:"w-5 h-5 mr-3"}),"Tm kim sn phm ph hp"]})})]})}),u&&u.products&&u.products.length>0&&Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-10",children:Qe.jsx(DP,{className:"shadow-xl",children:Qe.jsxs(UP,{className:"p-8",children:[Qe.jsxs("div",{className:"flex items-center justify-between mb-8",children:[Qe.jsxs("h3",{className:"text-3xl font-bold flex items-center gap-3",children:[Qe.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-100 to-green-200 rounded-xl flex items-center justify-center",children:Qe.jsx(_m,{className:"w-7 h-7 text-green-600"})}),"Kt Qu Tm Kim"]}),Qe.jsxs(EP,{className:"bg-gradient-to-r from-pink-600 to-purple-600 text-white text-base py-2 px-5",children:[u.products.length," sn phm ph hp"]})]}),Qe.jsx("div",{className:"grid md:grid-cols-4 gap-6",children:u.products.map((e,t)=>Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},whileHover:{y:-8},children:Qe.jsx(DP,{className:"hover:shadow-2xl transition-all cursor-pointer h-full",children:Qe.jsxs(UP,{className:"p-4",children:[Qe.jsxs("div",{className:"relative mb-3",children:[Qe.jsx("img",{src:e.image,alt:e.name,className:"w-full h-56 object-cover rounded-xl"}),Qe.jsxs(EP,{className:"absolute top-3 right-3 bg-gradient-to-r from-pink-600 to-purple-600 text-white text-sm py-1.5 px-3",children:[e.matchScore,"% ph hp"]})]}),Qe.jsx("h4",{className:"font-bold mb-3 line-clamp-2 h-12 text-base",children:e.name}),Qe.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Qe.jsx("div",{className:"flex",children:[...Array(5)].map((t,n)=>Qe.jsx(fg,{className:"w-4 h-4 "+(n<Math.floor(e.rating)?"fill-yellow-400 text-yellow-400":"text-gray-300")},n))}),Qe.jsx("span",{className:"text-sm font-semibold",children:e.rating}),e.sold&&Qe.jsxs("span",{className:"text-xs text-gray-500 ml-auto",children:[" bn ",e.sold]})]}),Qe.jsxs("p",{className:"text-xl font-bold text-pink-600 mb-3",children:[e.price.toLocaleString(),""]}),e.reason&&Qe.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[Qe.jsx("p",{className:"text-xs text-gray-600 mb-1 font-semibold",children:"L do ph hp:"}),Qe.jsx("p",{className:"text-xs text-gray-700",children:e.reason})]})]})})},e.id))})]})})})]},"text-mode"):Qe.jsxs(QT.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"max-w-6xl mx-auto",children:[Qe.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-16",children:[Qe.jsx(QT.div,{whileHover:{scale:1.02,y:-5},transition:{type:"spring",stiffness:300},children:Qe.jsx(DP,{className:"cursor-pointer hover:shadow-2xl transition-all duration-300 border-2 hover:border-purple-500 group overflow-hidden relative h-full",onClick:()=>n("image"),children:Qe.jsxs(UP,{className:"p-10 text-center relative z-10",children:[Qe.jsx(QT.div,{className:"mb-8 inline-block p-8 bg-gradient-to-br from-purple-100 to-purple-200 rounded-3xl group-hover:scale-110 transition-transform shadow-lg",whileHover:{rotate:[0,-10,10,-10,0]},children:Qe.jsx(hm,{className:"w-16 h-16 text-purple-600"})}),Qe.jsx("h3",{className:"text-3xl font-bold mb-4 bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Nhn Din Sn Phm"}),Qe.jsx("p",{className:"text-gray-600 mb-8 text-lg leading-relaxed",children:"Upload nh sn phm, AI s nhn din tn, loi, phn tch gi th trng v gi  sn phm tng t"}),Qe.jsxs("div",{className:"space-y-3 mb-8",children:[Qe.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700",children:[Qe.jsx(_m,{className:"w-5 h-5 text-green-600"}),Qe.jsx("span",{children:"Nhn din chnh xc cao"})]}),Qe.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700",children:[Qe.jsx(_m,{className:"w-5 h-5 text-green-600"}),Qe.jsx("span",{children:"Phn tch mu sc & c im"})]}),Qe.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700",children:[Qe.jsx(_m,{className:"w-5 h-5 text-green-600"}),Qe.jsx("span",{children:"c tnh gi th trng"})]})]}),Qe.jsxs("div",{className:"flex items-center justify-center gap-2 text-purple-600 font-bold text-lg",children:[Qe.jsx("span",{children:"Bt u ngay"}),Qe.jsx(Qp,{className:"w-6 h-6 group-hover:translate-x-2 transition-transform"})]})]})})}),Qe.jsx(QT.div,{whileHover:{scale:1.02,y:-5},transition:{type:"spring",stiffness:300},children:Qe.jsx(DP,{className:"cursor-pointer hover:shadow-2xl transition-all duration-300 border-2 hover:border-pink-500 group overflow-hidden relative h-full",onClick:()=>n("text"),children:Qe.jsxs(UP,{className:"p-10 text-center relative z-10",children:[Qe.jsx(QT.div,{className:"mb-8 inline-block p-8 bg-gradient-to-br from-pink-100 to-pink-200 rounded-3xl group-hover:scale-110 transition-transform shadow-lg",whileHover:{rotate:[0,-10,10,-10,0]},children:Qe.jsx(Af,{className:"w-16 h-16 text-pink-600"})}),Qe.jsx("h3",{className:"text-3xl font-bold mb-4 bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent",children:"Tm Theo M T"}),Qe.jsx("p",{className:"text-gray-600 mb-8 text-lg leading-relaxed",children:"M t sn phm mong mun bng li, AI s tm kim sn phm ph hp nht vi yu cu ca bn"}),Qe.jsxs("div",{className:"space-y-3 mb-8",children:[Qe.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700",children:[Qe.jsx(_m,{className:"w-5 h-5 text-green-600"}),Qe.jsx("span",{children:"Tm kim thng minh"})]}),Qe.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700",children:[Qe.jsx(_m,{className:"w-5 h-5 text-green-600"}),Qe.jsx("span",{children:"Gi  c nhn ha"})]}),Qe.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-700",children:[Qe.jsx(_m,{className:"w-5 h-5 text-green-600"}),Qe.jsx("span",{children:" ph hp cao"})]})]}),Qe.jsxs("div",{className:"flex items-center justify-center gap-2 text-pink-600 font-bold text-lg",children:[Qe.jsx("span",{children:"Bt u ngay"}),Qe.jsx(Qp,{className:"w-6 h-6 group-hover:translate-x-2 transition-transform"})]})]})})})]}),Qe.jsxs("div",{className:"grid md:grid-cols-4 gap-6",children:[Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:Qe.jsx(DP,{className:"hover:shadow-lg transition-all hover:-translate-y-1",children:Qe.jsxs(UP,{className:"p-6 text-center",children:[Qe.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-100 to-purple-200 rounded-2xl flex items-center justify-center mx-auto mb-4",children:Qe.jsx(Rf,{className:"w-7 h-7 text-purple-600"})}),Qe.jsx("h4",{className:"font-bold mb-2 text-lg",children:"Nhn Din Thng Minh"}),Qe.jsx("p",{className:"text-sm text-gray-600",children:"AI phn tch sn phm vi  chnh xc cao"})]})})}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:Qe.jsx(DP,{className:"hover:shadow-lg transition-all hover:-translate-y-1",children:Qe.jsxs(UP,{className:"p-6 text-center",children:[Qe.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-pink-100 to-pink-200 rounded-2xl flex items-center justify-center mx-auto mb-4",children:Qe.jsx(Lm,{className:"w-7 h-7 text-pink-600"})}),Qe.jsx("h4",{className:"font-bold mb-2 text-lg",children:"Phn Tch Gi"}),Qe.jsx("p",{className:"text-sm text-gray-600",children:"c tnh gi th trng chnh xc"})]})})}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:Qe.jsx(DP,{className:"hover:shadow-lg transition-all hover:-translate-y-1",children:Qe.jsxs(UP,{className:"p-6 text-center",children:[Qe.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-100 to-blue-200 rounded-2xl flex items-center justify-center mx-auto mb-4",children:Qe.jsx(Sg,{className:"w-7 h-7 text-blue-600"})}),Qe.jsx("h4",{className:"font-bold mb-2 text-lg",children:"Xu Hng Th Trng"}),Qe.jsx("p",{className:"text-sm text-gray-600",children:"Phn tch xu hng gi real-time"})]})})}),Qe.jsx(QT.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:Qe.jsx(DP,{className:"hover:shadow-lg transition-all hover:-translate-y-1",children:Qe.jsxs(UP,{className:"p-6 text-center",children:[Qe.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-green-100 to-green-200 rounded-2xl flex items-center justify-center mx-auto mb-4",children:Qe.jsx(lg,{className:"w-7 h-7 text-green-600"})}),Qe.jsx("h4",{className:"font-bold mb-2 text-lg",children:"Gi  Thng Minh"}),Qe.jsx("p",{className:"text-sm text-gray-600",children:"Sn phm tng t ph hp nht"})]})})})]})]},"mode-selection")})]})})},o$e=new ij;function l$e(){const e=Yj();return Qe.jsx(sj,{client:o$e,children:Qe.jsx(Rae,{children:Qe.jsx(Lje,{attribute:"class",defaultTheme:"dark",enableSystem:!0,children:Qe.jsx(VP,{children:Qe.jsxs(uw,{children:[Qe.jsx(Hv,{}),Qe.jsx(jx,{}),Qe.jsx(ZI,{}),Qe.jsx(SWe,{}),Qe.jsx(_We,{}),Qe.jsxs(fN,{location:e,children:[Qe.jsxs(pN,{path:"/",element:Qe.jsx(Ele,{}),children:[Qe.jsx(pN,{index:!0,element:Qe.jsx(Une,{})}),Qe.jsx(pN,{path:"/login",element:Qe.jsx(ume,{})}),Qe.jsx(pN,{path:"/register",element:Qe.jsx(pme,{})}),Qe.jsx(pN,{path:"/shop",element:Qe.jsx(zne,{})}),Qe.jsx(pN,{path:"/community",element:Qe.jsx(yie,{})}),Qe.jsx(pN,{path:"/discover",element:Qe.jsx(aae,{})}),Qe.jsx(pN,{path:"/flash-sale",element:Qe.jsx(wae,{})}),Qe.jsx(pN,{path:"/local-brand",element:Qe.jsx(jae,{})}),Qe.jsx(pN,{path:"/brand/:brandId",element:Qe.jsx(owe,{})}),Qe.jsx(pN,{path:"/ai-stylist",element:Qe.jsx(Qbe,{})}),Qe.jsx(pN,{path:"/ai-shopping",element:Qe.jsx(s$e,{})}),Qe.jsx(pN,{path:"/ai-recomment",element:Qe.jsx(ewe,{})}),Qe.jsx(pN,{path:"/lucky-wheel",element:Qe.jsx(ZKe,{})}),Qe.jsx(pN,{path:"/product/:id",element:Qe.jsx(kle,{})}),Qe.jsx(pN,{path:"/wallet",element:Qe.jsx(twe,{})}),Qe.jsx(pN,{path:"/rewards",element:Qe.jsx(lwe,{})}),Qe.jsx(pN,{path:"/checkout",element:Qe.jsx(Cde,{})}),Qe.jsx(pN,{path:"/profile",element:Qe.jsx(mme,{})}),Qe.jsx(pN,{path:"/orders",element:Qe.jsx(fme,{})}),Qe.jsx(pN,{path:"/orders/:code",element:Qe.jsx(vme,{})}),Qe.jsx(pN,{path:"/orders/:orderId/review",element:Qe.jsx(i$e,{})}),Qe.jsx(pN,{path:"/vendor-registration",element:Qe.jsx(gme,{})}),Qe.jsx(pN,{path:"/about",element:Qe.jsx(wWe,{})}),Qe.jsx(pN,{path:"/store/:sellerId",element:Qe.jsx(a$e,{})}),Qe.jsx(pN,{path:"/events/:id",element:Qe.jsx(rwe,{})}),Qe.jsx(pN,{path:"/callback/zalo",element:Qe.jsx(iwe,{})}),Qe.jsx(pN,{path:"/callback/google",element:Qe.jsx(awe,{})}),Qe.jsx(pN,{path:"/callback/facebook",element:Qe.jsx(swe,{})}),Qe.jsx(pN,{path:"/callback/vnpay",element:Qe.jsx(NWe,{})}),Qe.jsx(pN,{path:"/payment-result",element:Qe.jsx(jWe,{})}),Qe.jsx(pN,{path:"*",element:Qe.jsx(Nae,{})})]}),Qe.jsx(pN,{path:"/vendor-management/*",element:Qe.jsx(Dje,{})}),Qe.jsx(pN,{path:"/vendor-management/edit-product/:id",element:Qe.jsx(r$e,{})}),Qe.jsx(pN,{path:"/messages",element:Qe.jsx(Zbe,{})}),Qe.jsx(pN,{path:"call/:conversationId/:callType/:callId",element:Qe.jsx(ZXe,{})})]},e.pathname)]})})})})})}oh(document.getElementById("root")).render(Qe.jsx(_N,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:Qe.jsx(l$e,{})}));
