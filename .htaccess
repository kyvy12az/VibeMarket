# =======================================================
# ‚úÖ InfinityFree SPA + Vite/React Configuration
# =======================================================

# üîí Prevent access to sensitive files
<FilesMatch "^\.env">
  Order allow,deny
  Deny from all
</FilesMatch>

# B·∫≠t rewrite (cho ph√©p x·ª≠ l√Ω c√°c route frontend)
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  # N·∫øu kh√¥ng ph·∫£i file ho·∫∑c th∆∞ m·ª•c th·∫≠t -> chuy·ªÉn v·ªÅ index.html
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^ index.html [L]
</IfModule>

# =======================================================
# ‚úÖ MIME Type Fix (cho JS module l·ªói ‚Äútext/html‚Äù)
# =======================================================
AddType application/javascript .js
AddType text/css .css
AddType application/json .json
AddType image/svg+xml .svg
AddType text/html .html

# =======================================================
# ‚úÖ Ch·ªëng cache (ƒë·∫£m b·∫£o t·∫£i ƒë√∫ng file build m·ªõi)
# =======================================================
<IfModule mod_headers.c>
  Header set Cache-Control "no-cache, no-store, must-revalidate"
  Header set Pragma "no-cache"
  Header set Expires 0
</IfModule>

# =======================================================
# ‚úÖ Error pages fallback
# =======================================================
ErrorDocument 403 /index.html
ErrorDocument 404 /index.html
